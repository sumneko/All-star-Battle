globals
//globals from cjLib75hJKJ374s4e597nba9o7w45gf:
constant boolean LIBRARY_cjLib75hJKJ374s4e597nba9o7w45gf=true
group cj_tmpgr_copy_nw509ert7
//endglobals from cjLib75hJKJ374s4e597nba9o7w45gf
//globals from cjLibw560nbs9b8nse46703948:
constant boolean LIBRARY_cjLibw560nbs9b8nse46703948=true
boolexpr cj_true_bool_4896bnao87
//endglobals from cjLibw560nbs9b8nse46703948
//globals from YDTriggerSaveLoadSystem:
constant boolean LIBRARY_YDTriggerSaveLoadSystem=true
hashtable YDHT
//endglobals from YDTriggerSaveLoadSystem
//globals from YDWEBase:
constant boolean LIBRARY_YDWEBase=true
string bj_AllString=".................................!.#$%&'()*+,-./0123456789:;<=>.@ABCDEFGHIJKLMNOPQRSTUVWXYZ[.]^_`abcdefghijklmnopqrstuvwxyz{|}~................................................................................................................................"
unit bj_lastAbilityCastingUnit=null
unit bj_lastAbilityTargetUnit=null
unit bj_lastPoolAbstractedUnit=null
unitpool bj_lastCreatedUnitPool=null
item bj_lastPoolAbstractedItem=null
itempool bj_lastCreatedItemPool=null
attacktype bj_lastSetAttackType=ATTACK_TYPE_NORMAL
damagetype bj_lastSetDamageType=DAMAGE_TYPE_NORMAL
weapontype bj_lastSetWeaponType=WEAPON_TYPE_WHOKNOWS
real yd_MapMaxX=0
real yd_MapMinX=0
real yd_MapMaxY=0
real yd_MapMinY=0
string array YDWEBase__yd_PlayerColor
trigger array YDWEBase__AbilityCastingOverEventQueue
integer array YDWEBase__AbilityCastingOverEventType
integer YDWEBase__AbilityCastingOverEventNumber=0
//endglobals from YDWEBase
//globals from YDWEEnumDestructablesInCircleBJFilterNull:
constant boolean LIBRARY_YDWEEnumDestructablesInCircleBJFilterNull=true
//endglobals from YDWEEnumDestructablesInCircleBJFilterNull
//globals from YDWEGetForceOfPlayerNull:
constant boolean LIBRARY_YDWEGetForceOfPlayerNull=true
//endglobals from YDWEGetForceOfPlayerNull
//globals from YDWEGetInventoryIndexOfItemTypeBJNull:
constant boolean LIBRARY_YDWEGetInventoryIndexOfItemTypeBJNull=true
//endglobals from YDWEGetInventoryIndexOfItemTypeBJNull
//globals from YDWEGetItemOfTypeFromUnitBJNull:
constant boolean LIBRARY_YDWEGetItemOfTypeFromUnitBJNull=true
item yd_NullTempItem
//endglobals from YDWEGetItemOfTypeFromUnitBJNull
//globals from YDWEGetPlayersAlliesNull:
constant boolean LIBRARY_YDWEGetPlayersAlliesNull=true
force yd_NullTempForce
//endglobals from YDWEGetPlayersAlliesNull
//globals from YDWEGetPlayersMatchingNull:
constant boolean LIBRARY_YDWEGetPlayersMatchingNull=true
//endglobals from YDWEGetPlayersMatchingNull
//globals from YDWEGetUnitsInRangeOfLocMatchingNull:
constant boolean LIBRARY_YDWEGetUnitsInRangeOfLocMatchingNull=true
//endglobals from YDWEGetUnitsInRangeOfLocMatchingNull
//globals from YDWEGetUnitsInRectMatchingNull:
constant boolean LIBRARY_YDWEGetUnitsInRectMatchingNull=true
//endglobals from YDWEGetUnitsInRectMatchingNull
//globals from YDWEGetUnitsInRectOfPlayerNull:
constant boolean LIBRARY_YDWEGetUnitsInRectOfPlayerNull=true
group yd_NullTempGroup
//endglobals from YDWEGetUnitsInRectOfPlayerNull
//globals from YDWEGetUnitsOfPlayerAndTypeIdNull:
constant boolean LIBRARY_YDWEGetUnitsOfPlayerAndTypeIdNull=true
//endglobals from YDWEGetUnitsOfPlayerAndTypeIdNull
//globals from YDWEMakeUnitsPassiveForPlayerNull:
constant boolean LIBRARY_YDWEMakeUnitsPassiveForPlayerNull=true
//endglobals from YDWEMakeUnitsPassiveForPlayerNull
//globals from YDWEMultiboardSetItemIconBJNull:
constant boolean LIBRARY_YDWEMultiboardSetItemIconBJNull=true
//endglobals from YDWEMultiboardSetItemIconBJNull
//globals from YDWEMultiboardSetItemValueBJNull:
constant boolean LIBRARY_YDWEMultiboardSetItemValueBJNull=true
//endglobals from YDWEMultiboardSetItemValueBJNull
//globals from YDWEMultiboardSetItemWidthBJNull:
constant boolean LIBRARY_YDWEMultiboardSetItemWidthBJNull=true
//endglobals from YDWEMultiboardSetItemWidthBJNull
//globals from YDWEPlaySoundNull:
constant boolean LIBRARY_YDWEPlaySoundNull=true
//endglobals from YDWEPlaySoundNull
//globals from YDWEPolledWaitNull:
constant boolean LIBRARY_YDWEPolledWaitNull=true
//endglobals from YDWEPolledWaitNull
//globals from YDWEReplaceUnitBJNull:
constant boolean LIBRARY_YDWEReplaceUnitBJNull=true
//endglobals from YDWEReplaceUnitBJNull
//globals from YDWESetPlayerColorBJNull:
constant boolean LIBRARY_YDWESetPlayerColorBJNull=true
//endglobals from YDWESetPlayerColorBJNull
//globals from YDWESetUnitFacingToFaceLocTimedNull:
constant boolean LIBRARY_YDWESetUnitFacingToFaceLocTimedNull=true
//endglobals from YDWESetUnitFacingToFaceLocTimedNull
//globals from YDWETriggerEvent:
constant boolean LIBRARY_YDWETriggerEvent=true
trigger yd_DamageEventTrigger=null
trigger array YDWETriggerEvent__DamageEventQueue
integer YDWETriggerEvent__DamageEventNumber=0
item bj_lastMovedItemInItemSlot=null
trigger YDWETriggerEvent__MoveItemEventTrigger=null
trigger array YDWETriggerEvent__MoveItemEventQueue
integer YDWETriggerEvent__MoveItemEventNumber=0
//endglobals from YDWETriggerEvent
//globals from YDWETriggerRegisterEnterRectSimpleNull:
constant boolean LIBRARY_YDWETriggerRegisterEnterRectSimpleNull=true
//endglobals from YDWETriggerRegisterEnterRectSimpleNull
//globals from YDWETriggerRegisterLeaveRectSimpleNull:
constant boolean LIBRARY_YDWETriggerRegisterLeaveRectSimpleNull=true
region yd_NullTempRegion
//endglobals from YDWETriggerRegisterLeaveRectSimpleNull
//globals from YDWEUnitHasItemOfTypeBJNull:
constant boolean LIBRARY_YDWEUnitHasItemOfTypeBJNull=true
//endglobals from YDWEUnitHasItemOfTypeBJNull
//globals from baseLibrary:
constant boolean LIBRARY_baseLibrary=true
//endglobals from baseLibrary
//globals from defineLibrary:
constant boolean LIBRARY_defineLibrary=true
hashtable globalHashtable=InitHashtable()
integer globalDataIndex=0
integer globalDataIndex2=0
timer globalTimer=null
integer globalTriggerIndex=0
trigger globalTrigger=null
//endglobals from defineLibrary
//globals from LuaLibrary:
constant boolean LIBRARY_LuaLibrary=true
//endglobals from LuaLibrary
//globals from Record:
constant boolean LIBRARY_Record=true
string hke_ZZ=null
string hke_Z01=null
string hke_Z11=null
string hke_Z21=null
string hke_Z31=null
string hke_Z41=null
string hke_Z51=null
string hke_Z61=null
string hke_Z71=null
string hke_Z81=null
boolean cheat=false
player cheatplayer=null
gamecache array GC
boolean array runaway
integer MaxExp=0
integer PlayerNumber=0
boolean IsGameOver=false
integer array TeamPlayer
boolean isRun=false
boolean isRun2=false
unit array BaseUnit
unit array Hero
trigger array MU_KillHero
trigger array MU_DamageHero
integer array Record
integer array MU_Assist
real array DamageTime
integer array MU_Kill
integer array MU_Die
integer array MU_Spell
integer array MU_NKill
integer array MU_MKill
integer array MU_CQ
integer array MU_Wins
boolean MVP=false
integer WinScore=0
integer LoseScore=0
boolean KengDie=true
integer array KDScore
integer EXP=0
//endglobals from Record
//globals from YDWEEnumDestructablesInCircleBJNull:
constant boolean LIBRARY_YDWEEnumDestructablesInCircleBJNull=true
//endglobals from YDWEEnumDestructablesInCircleBJNull
//globals from YDWEGetUnitsInRangeOfLocAllNull:
constant boolean LIBRARY_YDWEGetUnitsInRangeOfLocAllNull=true
//endglobals from YDWEGetUnitsInRangeOfLocAllNull
//globals from YDWEGetUnitsInRectAllNull:
constant boolean LIBRARY_YDWEGetUnitsInRectAllNull=true
//endglobals from YDWEGetUnitsInRectAllNull
//globals from YDWEJumpTimer:
constant boolean LIBRARY_YDWEJumpTimer=true
integer MoveMoreLevel_JumpTimer=3
//endglobals from YDWEJumpTimer
//globals from YDWELibrary:
constant boolean LIBRARY_YDWELibrary=true
unit YDWELibrary___U=null
unit array YDWELibrary___Uflush_units
integer YDWELibrary___Iflush_first=0
integer YDWELibrary___Iflush_top=0
//endglobals from YDWELibrary
//globals from YDWESetUnitFacingToFaceUnitTimedNull:
constant boolean LIBRARY_YDWESetUnitFacingToFaceUnitTimedNull=true
//endglobals from YDWESetUnitFacingToFaceUnitTimedNull
//globals from bakaLibrary:
constant boolean LIBRARY_bakaLibrary=true
//endglobals from bakaLibrary
//globals from effectLibrary:
constant boolean LIBRARY_effectLibrary=true
//endglobals from effectLibrary
//globals from eventLibrary:
constant boolean LIBRARY_eventLibrary=true
//endglobals from eventLibrary
//globals from mathLibrary:
constant boolean LIBRARY_mathLibrary=true
//endglobals from mathLibrary
//globals from objectLibrary:
constant boolean LIBRARY_objectLibrary=true
//endglobals from objectLibrary
//globals from processLibrary:
constant boolean LIBRARY_processLibrary=true
//endglobals from processLibrary
//globals from soundLibrary:
constant boolean LIBRARY_soundLibrary=true
//endglobals from soundLibrary
//globals from stringLibrary:
constant boolean LIBRARY_stringLibrary=true
//endglobals from stringLibrary
//globals from testLibrary:
constant boolean LIBRARY_testLibrary=true
//endglobals from testLibrary
//globals from textLibrary:
constant boolean LIBRARY_textLibrary=true
//endglobals from textLibrary
//globals from unitLibrary:
constant boolean LIBRARY_unitLibrary=true
//endglobals from unitLibrary
//globals from RecordFix:
constant boolean LIBRARY_RecordFix=true
hashtable Lua_HT=InitHashtable()
integer Lua_rf=1
integer Lua_key=2
integer Lua_value=3
timer Lua_timer=CreateTimer()
//endglobals from RecordFix
unit array udg_hero
unit array udg_hero_choose
boolean array udg_choose_ture
timer array udg_jishiqi
timerdialog array udg_chuangkou
integer array udg_leixing
group array udg_danweizu
unit array udg_danwei
dialog array udg_duihuakuang
button array udg_anniu
location array udg_point
integer array udg_zhengshu
multiboard array udg_duomianban
string array udg_touxiang
unit array udg_suijixuanren
unit array udg_fuhuo
texttag array udg_piaofuwenzi
fogmodifier array udg_kejiandu
location array udg_dian
effect array udg_texiao
rect array udg_quyu
boolean array udg_buer
real array udg_shishu
unit array udg_player
lightning array udg_shandian
timer array udg_FH
timerdialog array udg_fhck
timerdialog array udg_PKchuangkou
rect array udg_Go
rect array udg_GoT
unit array udg_PK
unit array udg_rogou
unit array udg_danwei2
location array udg_dian2
group array udg_danweizu2
timer array udg_times
integer array udg_zhengshu2
group udg_xuanqu=null
boolean array udg_buer2
fogmodifier array udg_GH
unit udg_bossSMR=null
unit array udg_zs
integer array udg_SWAP
unit array udg_SmD
string array udg_Name
group udg_sheep=null
boolean array udg_miwu
real array udg_shishu2ex
boolean array udg_SC
integer udg_key=0
real array udg_shishu2
integer array udg_kill
force array udg_jiemeng
timer array udg_timsJS
integer udg_Points=0
timerdialog udg_timesJSP=null
unit array udg_boss
unit udg_k=null
integer array udg_kzs
timer array udg_MS
timerdialog array udg_msck
unit array udg_randomhero
location array udg_randompoint
group array udg_randomGroup
integer array udg_yuansu
integer udg_roll=0
integer array udg_Score
string array udg_HeoZiFuChuan
force udg_LINSHIWANJIAZU=null
timerdialog array udg_fhck2
timerdialog array udg_fhck3
string array udg_DHK1
integer udg_FS=0
integer udg_FSDL=0
force array udg_wanjiazu
integer array udg_Savior
boolean array udg_Ajnbuer
integer array udg_gaga_zhengshu
unit array udg_gaga_danwei
string array udg_gaga_shanghai
texttag array udg_gaga_zifu
group udg_gaga_danweizu=null
item array udg_wupinfengyin
group array udg_DAZE
group udg_attack=null
unit array udg_wupinqiu
string array udg_Color
integer array udg_zhugong
real array udg_shuju
string array udg_Hexadecimal
integer array udg_zhengshuex
timer array udg_timesex
integer array udg_attackforce
real array udg_gaga_shishu
multiboarditem array udg_duomianbanxm
group udg_gaga_mofa=null
timer udg_gaga_time=null
real array udg_Shishu
unit array udg_Danwei
group array udg_Danweizu
timer array udg_Times
location array udg_Dian
integer array udg_Zhengshu
boolean array udg_a
integer array udg_aXUNHUAN
integer array udg_Defense
integer array udg_Axunhuan2
unit array udg_jianzhu
integer array udg_mp
integer array udg_shangjin
integer array udg_fuwen
timer array udg_youxixitong
integer array udg_guaji
integer udg_jubuzs1=0
integer udg_jubuzs2=0
integer udg_jubuzs3=0
real udg_jubuss1=0
real array udg_shishukuangshan
integer udg_test=0
integer array udg_mkszs
group array udg_mksdwz
integer array udg_LIExunhuan
unit array udg_U_YDWE_units
boolean udg_GameStart=false
timer udg_GameTimer=null
integer array udg_Int
real array udg_tempReal
rect gg_rct_xuanren00=null
rect gg_rct_xuanren01=null
rect gg_rct_xuanren02=null
rect gg_rct_xuanren03=null
rect gg_rct_xuanren04=null
rect gg_rct_xuanren05=null
rect gg_rct_xuanren06=null
rect gg_rct_xuanren07=null
rect gg_rct_xuanren08=null
rect gg_rct_xuanren09=null
rect gg_rct_xuanren10=null
rect gg_rct_xuanren11=null
rect gg_rct_xuanren12=null
rect gg_rct_xuanren=null
rect gg_rct_shuabing1=null
rect gg_rct_shuabign2=null
rect gg_rct_shuabign3=null
rect gg_rct_shuabign4=null
rect gg_rct_shuabing5=null
rect gg_rct_shuabing6=null
rect gg_rct_xuanren13=null
rect gg_rct_xuanren14=null
rect gg_rct_xuanren15=null
rect gg_rct_yaoqingjuedou=null
rect gg_rct_PK1=null
rect gg_rct_PK2=null
rect gg_rct_xuanren_16=null
rect gg_rct_xuanren_17=null
rect gg_rct_xuanren_18=null
rect gg_rct_G1=null
rect gg_rct_G2=null
rect gg_rct_G3=null
rect gg_rct_G4=null
rect gg_rct_G5=null
rect gg_rct_G6=null
rect gg_rct_GT1=null
rect gg_rct_GT2=null
rect gg_rct_GT3=null
rect gg_rct_GT4=null
rect gg_rct_GT5=null
rect gg_rct_GT6=null
rect gg_rct_G7=null
rect gg_rct_G8=null
rect gg_rct_G9=null
rect gg_rct_G10=null
rect gg_rct_G11=null
rect gg_rct_G12=null
rect gg_rct_GT7=null
rect gg_rct_GT8=null
rect gg_rct_GT9=null
rect gg_rct_GT10=null
rect gg_rct_GT11=null
rect gg_rct_GT12=null
rect gg_rct_xuanren_19=null
rect gg_rct_xuanren_20=null
rect gg_rct_YG1=null
rect gg_rct_YG2=null
rect gg_rct_YG3=null
rect gg_rct_YG4=null
rect gg_rct_YG5=null
rect gg_rct_YG6=null
rect gg_rct_YG7=null
rect gg_rct_DT_1=null
rect gg_rct_DT_2=null
rect gg_rct_xuanren21=null
rect gg_rct_xuechi_1=null
rect gg_rct_xuechi_2=null
rect gg_rct_GH=null
rect gg_rct_xuanren22=null
rect gg_rct_FMH=null
rect gg_rct_sheep=null
rect gg_rct_xuanren23=null
rect gg_rct_xuanren24=null
rect gg_rct_baga_1=null
rect gg_rct_baga_2=null
rect gg_rct_baga_3=null
rect gg_rct_xuanren25=null
rect gg_rct_js_1_1=null
rect gg_rct_js_1_2=null
rect gg_rct_boss=null
rect gg_rct_jidi=null
rect gg_rct_lunxuan=null
rect gg_rct_lunxuan_2=null
rect gg_rct_lunxuan_ww=null
rect gg_rct_lunxuan_jd=null
rect gg_rct_xuanren26=null
rect gg_rct_xuanren27=null
rect gg_rct_xuanren28=null
rect gg_rct_banben=null
rect gg_rct_xuanren29=null
rect gg_rct_xuanren30=null
rect gg_rct_baga_4=null
rect gg_rct_baga_5=null
rect gg_rct_jidi_2=null
rect gg_rct_jidi_3=null
rect gg_rct_xuanren31=null
rect gg_rct_xuanren32=null
rect gg_rct_xuanren33=null
rect gg_rct_xuanren34=null
rect gg_rct_YG8=null
rect gg_rct_YG9=null
rect gg_rct_xuanren35=null
rect gg_rct_xuanren36=null
sound gg_snd_Excalibur=null
sound gg_snd_HeroBladeMasterAttack1=null
sound gg_snd_CatapultMissile2=null
sound gg_snd_m82a1=null
sound gg_snd_fengjue=null
sound gg_snd_AbominationAlternateDeath1=null
sound gg_snd_EntanglingRootsTarget1=null
sound gg_snd_AbominationPissed5=null
sound gg_snd_PurgeTarget1=null
sound gg_snd_SpellShieldImpact1=null
sound gg_snd_GoblinSapperReady1=null
sound gg_snd_ReviveHuman=null
sound gg_snd_HolyBolt=null
sound gg_snd_ManaPotion=null
sound gg_snd_SpellStealMissile=null
sound gg_snd_HealingSprayBirth1=null
sound gg_snd_CharmTarget1=null
sound gg_snd_TinkerMissileLaunch1=null
sound gg_snd_TinkerMissileLaunch101=null
sound gg_snd_GuardTowerMissileHit2=null
sound gg_snd_StasisTrapBirth=null
sound gg_snd_DefendCaster=null
sound gg_snd_BlinkArrival1=null
sound gg_snd_MortarImpact=null
sound gg_snd_LightningBolt=null
sound gg_snd_InfernalBirth1=null
sound gg_snd_KeeperOfTheGroveMissileLaunch2=null
sound gg_snd_Credits=null
sound gg_snd_BloodElfMageReady1=null
sound gg_snd_BloodElfMageYes3=null
sound gg_snd_BloodElfMagePissed6=null
sound gg_snd_StasisTotem=null
sound gg_snd_MetalHeavyBashMetal1=null
sound gg_snd_Tomes=null
sound gg_snd_DivineShield=null
sound gg_snd_DarkSummoningLaunch1=null
sound gg_snd_BuildingDeathLargeHuman=null
sound gg_snd_DruidOfTheTalonMissileLaunch1=null
sound gg_snd_DruidOfTheTalonMissileHit2=null
sound gg_snd_BreathOfFrost1=null
sound gg_snd_PossessionMissileHit1=null
sound gg_snd_Shockwave=null
sound gg_snd_ZigguratMissileLaunch3=null
sound gg_snd_SheepWhat1=null
sound gg_snd_Sheep1=null
sound gg_snd_StrongDrinkMissile1=null
sound gg_snd_StarfallCaster1=null
sound gg_snd_BuildingDeathLargeHuman01=null
sound gg_snd_HeroShadowhunterMissileLaunch1=null
sound gg_snd_yueyatianchongyinxiao=null
sound gg_snd_ShimmeringPortalDeath=null
sound gg_snd_PandarenUltimate=null
sound gg_snd_ShimmeringPortalBirth=null
sound gg_snd_NightElfBuildingDeathLarge1=null
sound gg_snd_GoblinZeppelinPissed2=null
sound gg_snd_DevourMagic=null
sound gg_snd_parFir00=null
sound gg_snd_FlakCannon=null
sound gg_snd_HeroDemonMissileLaunch1=null
sound gg_snd_HeroDemonMissileLaunch2=null
sound gg_snd_CrippleTarget1=null
sound gg_snd_MetalHeavySliceMetal2=null
sound gg_snd_MetalHeavySliceFlesh3=null
sound gg_snd_ImpaleHit=null
sound gg_snd_BattleShipDeath1=null
sound gg_snd_MetalHeavySliceFlesh2=null
sound gg_snd_MetalHeavySliceFlesh1=null
sound gg_snd_TheBlackArrow=null
sound gg_snd_ManaShieldCaster1=null
sound gg_snd_CloudOfFogLoop1=null
sound gg_snd_MetalHeavySliceStone2=null
sound gg_snd_MetalHeavySliceStone3=null
sound gg_snd_MetalHeavySliceWood1=null
sound gg_snd_WoodHeavyBashStone1=null
sound gg_snd_WoodHeavyBashStone2=null
sound gg_snd_DemonHunterMissileHit2=null
sound gg_snd_FrostBoltLaunch1=null
sound gg_snd_FrostBoltHit1=null
sound gg_snd_ColdArrow1=null
sound gg_snd_BristleBackMissileLaunch3=null
sound gg_snd_Comradeship=null
sound gg_snd_QuestNew=null
sound gg_snd_QuestCompleted=null
sound gg_snd_Rescue=null
sound gg_snd_ArrangedTeamInvitation=null
sound gg_snd_Doom=null
sound gg_snd_MetalHeavyBashMetal3=null
sound gg_snd_OrbOfCorruptionTarget=null
sound gg_snd_Burrow=null
sound gg_snd_CurseTarget1=null
sound gg_snd_GryphonRiderMissileLaunch1=null
sound gg_snd_ChimaeraAlternateMissileLaunch2=null
sound gg_snd_HowlOfTerror=null
sound gg_snd_AbominationYesAttack1=null
sound gg_snd_AbominationYesAttack3=null
sound gg_snd_ArthasTheme=null
sound gg_snd_IllidansTheme=null
sound gg_snd_DeathPactTargetBirth1=null
sound gg_snd_DarkRitualTarget1=null
sound gg_snd_RaiseSkeleton=null
sound gg_snd_SadMystery=null
sound gg_snd_BattleNetTick=null
sound gg_snd_GameFound=null
sound gg_snd_Tomes01=null
sound gg_snd_Shockwave01=null
sound gg_snd_ThunderClapCaster=null
sound gg_snd_CatapultMissile4=null
sound gg_snd_Mainscreen=null
sound gg_snd_Tension=null
sound gg_snd_AncestralGuardianMissileLaunch=null
sound gg_snd_RockHeavyBashMetal1=null
sound gg_snd_CannonTowerMissile2=null
sound gg_snd_ThunderClapCaster01=null
sound gg_snd_BloodElfTheme=null
sound gg_snd_PursuitTheme=null
sound gg_snd_Warning=null
sound gg_snd_WoodHeavyBashFlesh1=null
sound gg_snd_WoodHeavyBashFlesh2=null
sound gg_snd_WoodHeavyBashFlesh3=null
sound gg_snd_ImpaleHit01=null
sound gg_snd_QuestLog=null
sound gg_snd_AutoCastButtonClick1=null
sound gg_snd_ArrangedTeamInvitation01=null
sound gg_snd_tr=null
sound gg_snd_BreathOfFire1=null
sound gg_snd_HuntressMissileLaunch=null
sound gg_snd_SearingArrowTarget2=null
sound gg_snd_CannonTowerMissile3=null
sound gg_snd_ReviveNightElf=null
sound gg_snd_RainOfFireTarget1=null
sound gg_snd_SargerasRoar=null
sound gg_snd_RollingThunder1=null
sound gg_snd_GargoyleMissileLaunch1=null
sound gg_snd_TinkerMorphAlt1=null
sound gg_snd_Incinerate1=null
sound gg_snd_WaterElementalMissile3=null
sound gg_snd_MetalLightChopMetal2=null
sound gg_snd_FeralSpiritTarget1=null
sound gg_snd_FrostArrowHit1=null
sound gg_snd_LightningShieldTarget=null
sound gg_snd_WoodHeavyBashStone3=null
sound gg_snd_MetalHeavyChopFlesh3=null
sound gg_snd_00fb_0000=null
sound gg_snd_00fb_0001=null
sound gg_snd_xiaoaiRyinxiao=null
sound gg_snd_linaliQ2=null
sound gg_snd_WindWalk=null
sound gg_snd_PolymorphDone=null
sound gg_snd_linaliR3=null
sound gg_snd_linaliD2=null
sound gg_snd_yifangw2=null
sound gg_snd_StarfallCaster101=null
sound gg_snd_SacrificeUnit=null
sound gg_snd_Disenchant=null
sound gg_snd_OrbOfCorruptionMissile=null
sound gg_snd_WindSerpentMissile=null
sound gg_snd_NightElfBuildingDeathSmall1=null
sound gg_snd_ZigguratMissileLaunch301=null
sound gg_snd_LightningBolt01=null
sound gg_snd_YSSRG=null
sound gg_snd_GPPX1=null
sound gg_snd_GPPXB2=null
sound gg_snd_NQLC3=null
sound gg_snd_InvisibilityTarget=null
sound gg_snd_PF=null
sound gg_snd_CannonTowerMissile201=null
sound gg_snd_CatapultMissile201=null
sound gg_snd_TheBlackArrow01=null
sound gg_snd_LifeDrain=null
sound gg_snd_SoulBurn1=null
sound gg_snd_AcolyteMining=null
sound gg_snd_UndeadBuildingDeathLarge1=null
sound gg_snd_NightElfBuildingDeathLarge101=null
sound gg_snd_BuildingDeathLargeOrc=null
sound gg_snd_GUN43=null
sound gg_snd_ClanInvitation=null
sound gg_snd_PhoenixAttack=null
sound gg_snd_SearingArrowTarget3=null
sound gg_snd_FrostArrowLaunch1=null
sound gg_snd_ArrowAttack1=null
sound gg_snd_ResurrectTarget=null
sound gg_snd_MetalLightChopMetal1=null
sound gg_snd_MetalLightChopMetal201=null
sound gg_snd_MetalLightChopMetal3=null
sound gg_snd_PhaseShift1=null
sound gg_snd_FaerieFireLaunch1=null
sound gg_snd_FeralSpiritTarget101=null
sound gg_snd_ReviveOrc=null
sound gg_snd_AncestralSpirit=null
sound gg_snd_InvisibilityTarget01=null
sound gg_snd_KeeperOfTheGroveMissileHit2=null
sound gg_snd_InnerFireBirth=null
sound gg_snd_FlameStrikeBirth1=null
sound gg_snd_Disenchant01=null
sound gg_snd_FrostArrowLaunch101=null
sound gg_snd_xyd=null
sound gg_snd_CycloneLoop1=null
sound gg_snd_CarrionSwarmDamage1=null
sound gg_snd_KeeperOfTheGroveMissileHit3=null
sound gg_snd_DeathPactTargetBirth101=null
sound gg_snd_FlakCannon01=null
sound gg_snd_Feedback=null
sound gg_snd_RIFLE2HD=null
sound gg_snd_RIFLE3HD=null
sound gg_snd_RIFLE4=null
sound gg_snd_ZigguratMissileLaunch1=null
sound gg_snd_SoulGem=null
sound gg_snd_7zd3=null
sound gg_snd_4zd3=null
sound gg_snd_ks3=null
sound gg_snd_wy4=null
sound gg_snd_leisheng1=null
sound gg_snd_leisheng2=null
sound gg_snd_ManaFlareStrike=null
sound gg_snd_misaka_HD=null
sound gg_snd_misaka_HD2=null
sound gg_snd_zhenhong=null
sound gg_snd_feiyan=null
sound gg_snd_duanzui=null
sound gg_snd_DemonHunterMissileHit3=null
sound gg_snd_PossessionMissileHit101=null
sound gg_snd_CrushingWaveTarget1=null
sound gg_snd_clip2HD=null
sound gg_snd_VolcanoLoop=null
sound gg_snd_FlameStrikeBirth101=null
trigger gg_trg_Lua___LuaLibrary=null
trigger gg_trg_base_lua=null
trigger gg_trg_util_lua=null
trigger gg_trg_timer_lua=null
trigger gg_trg_player_lua=null
trigger gg_trg_game_lua=null
trigger gg_trg_text_lua=null
trigger gg_trg____defineLibrary=null
trigger gg_trg__________baseLibrary=null
trigger gg_trg_11____________11plantRecord=null
trigger gg_trg______________RecordFix=null
trigger gg_trg__________eventLibrary=null
trigger gg_trg__________mathLibrary=null
trigger gg_trg_____________stringLibrary=null
trigger gg_trg__________unitLibrary=null
trigger gg_trg________________textLibrary=null
trigger gg_trg__________effeLibrary=null
trigger gg_trg__________soundLibrary=null
trigger gg_trg__________bakaLibrary=null
trigger gg_trg__________objectLibrary=null
trigger gg_trg_______testLibrary=null
trigger gg_trg_YDWEKLibrary=null
trigger gg_trg__________processLibrary=null
trigger gg_trg_suijiduiwu=null
trigger gg_trg_chushihua=null
trigger gg_trg_test_1=null
trigger gg_trg_esc=null
trigger gg_trg_time_0=null
trigger gg_trg_time_1=null
trigger gg_trg__ctgbt=null
trigger gg_trg__jzgtx=null
trigger gg_trg_time40out_random=null
trigger gg_trg_all_random=null
trigger gg_trg_choose_hero=null
trigger gg_trg_jinengxianshi=null
trigger gg_trg_duihuakuang2=null
trigger gg_trg_miwu_on_off=null
trigger gg_trg_Competition=null
trigger gg_trg_banben=null
trigger gg_trg_v2_6=null
trigger gg_trg_v2_5_______u=null
trigger gg_trg_v2_4_______u=null
trigger gg_trg_v2_3_______u=null
trigger gg_trg_v2_2_______u=null
trigger gg_trg_v2_11_______u=null
trigger gg_trg_All_skills=null
trigger gg_trg_Delete_trigger=null
trigger gg_trg_lx=null
trigger gg_trg_lx0_5=null
trigger gg_trg_lx0_6_1212=null
trigger gg_trg_lx0_6_2121=null
trigger gg_trg_lx0_7_ban_hero1=null
trigger gg_trg_lx0_7_ban_hero6=null
trigger gg_trg_lx_1=null
trigger gg_trg_lx1221122112=null
trigger gg_trg_lx2112211221=null
trigger gg_trg_lx_random_1=null
trigger gg_trg_lx_random_2=null
trigger gg_trg_lx_choose_hero=null
trigger gg_trg_random_hero=null
trigger gg_trg_random_hero2=null
trigger gg_trg_AIlibrary=null
trigger gg_trg_bi=null
trigger gg_trg_duomianban=null
trigger gg_trg_youxikaishi=null
trigger gg_trg_game_time=null
trigger gg_trg_kick_player=null
trigger gg_trg_kick_cancel=null
trigger gg_trg_kick_1=null
trigger gg_trg_kick_2=null
trigger gg_trg_game_money=null
trigger gg_trg_game_gangshao=null
trigger gg_trg_game_gangshao_2=null
trigger gg_trg_shuabign=null
trigger gg_trg_mijijinzhi=null
trigger gg_trg_duomianban2_death=null
trigger gg_trg_duomianban3_until=null
trigger gg_trg_duomianban4_hero=null
trigger gg_trg_duomianban5_chenghao=null
trigger gg_trg_duomianban6_exe=null
trigger gg_trg_duomianban6_exe_2=null
trigger gg_trg_fuhuo=null
trigger gg_trg_fh01=null
trigger gg_trg_fh02=null
trigger gg_trg_fh03=null
trigger gg_trg_fh04=null
trigger gg_trg_fh05=null
trigger gg_trg_fh06=null
trigger gg_trg_fh07=null
trigger gg_trg_fh08=null
trigger gg_trg_fh09=null
trigger gg_trg_fh10=null
trigger gg_trg_jishiqi79=null
trigger gg_trg_shengfupanding=null
trigger gg_trg_jidiboom_1=null
trigger gg_trg_jidiboom_2=null
trigger gg_trg_guanqiachongzhi=null
trigger gg_trg_guanqiachongzhi_if=null
trigger gg_trg_shengfupanding2=null
trigger gg_trg_SC=null
trigger gg_trg_water_SC=null
trigger gg_trg_water_SC_2=null
trigger gg_trg_water_SC_3=null
trigger gg_trg_star_SC_1=null
trigger gg_trg_star_SC_2=null
trigger gg_trg_tree_SC_1=null
trigger gg_trg_tree_SC_1_5=null
trigger gg_trg_tree_SC_2=null
trigger gg_trg_tree_SC_2_5=null
trigger gg_trg_start=null
trigger gg_trg_end=null
trigger gg_trg_next=null
trigger gg_trg_hg=null
trigger gg_trg_level_10=null
trigger gg_trg_lv_10_win=null
trigger gg_trg_lv_10_win_60s=null
trigger gg_trg_shuabing_JS=null
trigger gg_trg_shuabing_JS_teshu=null
trigger gg_trg_shuabing_gaoji=null
trigger gg_trg_shuabing_boss=null
trigger gg_trg_Start_go=null
trigger gg_trg_Go=null
trigger gg_trg_shuabing_left_up=null
trigger gg_trg_shuabing_right_down=null
trigger gg_trg_shuabing_all=null
trigger gg_trg_shuabing_js=null
trigger gg_trg_shuabign1=null
trigger gg_trg_shuabign2=null
trigger gg_trg_binglishengji=null
trigger gg_trg_Extra=null
trigger gg_trg_extra_ready=null
trigger gg_trg_JS_AI_1s=null
trigger gg_trg_JS_AI_3s=null
trigger gg_trg_attack_js=null
trigger gg_trg_huifu_15_u=null
trigger gg_trg_siwang_zhongji=null
trigger gg_trg_tufuzhenji=null
trigger gg_trg_tufupenguozhi=null
trigger gg_trg_ningshi_1=null
trigger gg_trg_ningshi_2=null
trigger gg_trg_xuanwo_1=null
trigger gg_trg_xuanwo_2=null
trigger gg_trg_duyepenshe_1=null
trigger gg_trg_duyepenshe_2=null
trigger gg_trg_duyepenshe_3=null
trigger gg_trg_tujin_1=null
trigger gg_trg_tujin_2=null
trigger gg_trg_zhendang_1=null
trigger gg_trg_zhendang_2=null
trigger gg_trg_zhendang_3=null
trigger gg_trg_boss_shiwangbaozou=null
trigger gg_trg_boss_dajiangshan_1=null
trigger gg_trg_boss_dajiangshan_2=null
trigger gg_trg_boss_dajiangshan_3=null
trigger gg_trg_boss_zhendangbo_1=null
trigger gg_trg_boss_zhendangbo_2=null
trigger gg_trg_boss_zhongquan_1=null
trigger gg_trg_boss_zhongquan_2=null
trigger gg_trg_boss_zhongquan_3=null
trigger gg_trg_wajue_1=null
trigger gg_trg_wajue_2=null
trigger gg_trg_xuanfengshabao_1=null
trigger gg_trg_xuanfengshabao_2=null
trigger gg_trg_tiaoji_1=null
trigger gg_trg_tiaoji_2=null
trigger gg_trg_leishouzhenji_1=null
trigger gg_trg_leishouzhenji_2=null
trigger gg_trg_anwuzhi=null
trigger gg_trg_tujin_jiaoxi=null
trigger gg_trg_siwangchanrao_1=null
trigger gg_trg_siwangchanrao_2=null
trigger gg_trg_siwanghuimie_1=null
trigger gg_trg_siwanghuimie_2=null
trigger gg_trg_guishou_1=null
trigger gg_trg_guishou_2=null
trigger gg_trg_chuanci=null
trigger gg_trg_zhixianchuanci_1=null
trigger gg_trg_zhixianchuanci_2=null
trigger gg_trg_boss2_jianta=null
trigger gg_trg_boss2_pigugongji=null
trigger gg_trg_boss2_pigugongji_2=null
trigger gg_trg_boss2_hongtianlei_0=null
trigger gg_trg_boss2_hongtianlei_1=null
trigger gg_trg_boss2_hongtianlei_2=null
trigger gg_trg_boss2_hongtianlei_3=null
trigger gg_trg_boss2_liuxingchui_0=null
trigger gg_trg_boss2_liuxingchui_1=null
trigger gg_trg_boss2_liuxingchui_2=null
trigger gg_trg_boss2_huanxingzhenji=null
trigger gg_trg_boss2_attack_1=null
trigger gg_trg_boss2_attack_2=null
trigger gg_trg_boss2_gouheji_1=null
trigger gg_trg_boss2_gouheji_2=null
trigger gg_trg_bossex_anxi_1=null
trigger gg_trg_bossex_anxi_2=null
trigger gg_trg_bossex_anren_1=null
trigger gg_trg_bossex_anren_2=null
trigger gg_trg_bossex_anren_3=null
trigger gg_trg_bossex_canying=null
trigger gg_trg_bossex_canying_2=null
trigger gg_trg_skills=null
trigger gg_trg_stop=null
trigger gg_trg_tianqi=null
trigger gg_trg_sheep_mie=null
trigger gg_trg_sheep=null
trigger gg_trg_sheep_death=null
trigger gg_trg_lipinbao=null
trigger gg_trg_FXT=null
trigger gg_trg_huanlei=null
trigger gg_trg_huanlei_2=null
trigger gg_trg_0_33t_zhouqi=null
trigger gg_trg_tognleidiejia=null
trigger gg_trg_sh=null
trigger gg_trg_jineng=null
trigger gg_trg_spell=null
trigger gg_trg_swdw=null
trigger gg_trg_kill_hero=null
trigger gg_trg_double_kill=null
trigger gg_trg_kill_ta=null
trigger gg_trg_bingyin_1=null
trigger gg_trg_bingyin_2=null
trigger gg_trg_bingyin_3=null
trigger gg_trg_bingyin_4=null
trigger gg_trg_attack=null
trigger gg_trg_Defense=null
trigger gg_trg_test_djcs=null
trigger gg_trg_djcs=null
trigger gg_trg_cxxr=null
trigger gg_trg_jfcx=null
trigger gg_trg_zs=null
trigger gg_trg_zs2=null
trigger gg_trg_bug=null
trigger gg_trg_out=null
trigger gg_trg_gpk=null
trigger gg_trg_guaji_1=null
trigger gg_trg_DT_1=null
trigger gg_trg_DT_1_out=null
trigger gg_trg_DT_2=null
trigger gg_trg_DT_2_out=null
trigger gg_trg_chuansong_1=null
trigger gg_trg_chuansong_2=null
trigger gg_trg_chuansong_3=null
trigger gg_trg_GH=null
trigger gg_trg_GH_2=null
trigger gg_trg_GH_3=null
trigger gg_trg_gangshao_1=null
trigger gg_trg_gangshao_2=null
trigger gg_trg_chaichu=null
trigger gg_trg_OB=null
trigger gg_trg_SmD_swap_xx=null
trigger gg_trg_SmD_swap=null
trigger gg_trg_Smd_swap2=null
trigger gg_trg_SmD_swap_no=null
trigger gg_trg_SmD_OB=null
trigger gg_trg_SmD_gpk=null
trigger gg_trg_SmD_Random=null
trigger gg_trg_SmD_repick=null
trigger gg_trg_SmD_V=null
trigger gg_trg_SmD_SG=null
trigger gg_trg_SG01=null
trigger gg_trg_SG02=null
trigger gg_trg_SmD_fuhuo=null
trigger gg_trg_SmD_dengta=null
trigger gg_trg_SmD_xinshi=null
trigger gg_trg_maihuo=null
trigger gg_trg_shijiao=null
trigger gg_trg_shijiao2=null
trigger gg_trg_shijiao_time=null
trigger gg_trg_money_balabala=null
trigger gg_trg_HeroSkillPoint=null
trigger gg_trg_StayHome=null
trigger gg_trg_hp1_2=null
trigger gg_trg_hp2_2=null
trigger gg_trg_renyishanghai=null
trigger gg_trg_renyishanghai_hero=null
trigger gg_trg_gongxiangwupin=null
trigger gg_trg_zhuangbei=null
trigger gg_trg_zhuangbei_new=null
trigger gg_trg_fuwen=null
trigger gg_trg_ha=null
trigger gg_trg_aoshufaqiu_2=null
trigger gg_trg_aoshufaqiu_3=null
trigger gg_trg_xuanfengzhanfu_2=null
trigger gg_trg_xuanfengzhanfu_att=null
trigger gg_trg_xuanfengzhanfu_down=null
trigger gg_trg_rexuebiaoqiang_2=null
trigger gg_trg_shengshisuipian=null
trigger gg_trg_faqiufumo=null
trigger gg_trg_faqiufumo_huoqiu=null
trigger gg_trg_faqiufumo_duqiu=null
trigger gg_trg_faqiufumo_bingqiu=null
trigger gg_trg_longcha=null
trigger gg_trg_nengliangzhiren=null
trigger gg_trg_chongji_1=null
trigger gg_trg_chongji_2=null
trigger gg_trg_chongji_3=null
trigger gg_trg_yinshenxie_0=null
trigger gg_trg_yinshenxie_1=null
trigger gg_trg_yuanzhihuo_1=null
trigger gg_trg_yuanzhihuo_2=null
trigger gg_trg_baowufengyin_1=null
trigger gg_trg_huihuang=null
trigger gg_trg_yuexi=null
trigger gg_trg_yueyaohuandun=null
trigger gg_trg_xiangchichongji=null
trigger gg_trg_xiangchichongji_2=null
trigger gg_trg_xuehongzhanfu_1=null
trigger gg_trg_xuehongzhanfu_2=null
trigger gg_trg_tuxizhiren=null
trigger gg_trg_tuxizhiren_2=null
trigger gg_trg_guangshi_1=null
trigger gg_trg_guangshi_2=null
trigger gg_trg_guangshi_3=null
trigger gg_trg_yingyan_1=null
trigger gg_trg_qidi_1=null
trigger gg_trg_fengkiangliliang_1=null
trigger gg_trg_fengkiangliliang_2=null
trigger gg_trg_yuyi_0=null
trigger gg_trg_yuyi_1=null
trigger gg_trg_yuyi_1________2=null
trigger gg_trg_xuezhou_1=null
trigger gg_trg_xingcanpifeng=null
trigger gg_trg_yuyi_2=null
trigger gg_trg_yuyi_3=null
trigger gg_trg_yuyi_4=null
trigger gg_trg_yuyi_5=null
trigger gg_trg_yuyi_6=null
trigger gg_trg_lichang_1=null
trigger gg_trg_lichang_2=null
trigger gg_trg_lichang_3=null
trigger gg_trg_lingji_1=null
trigger gg_trg_lingji_2=null
trigger gg_trg_lingji_3=null
trigger gg_trg_Hf_Yx_Lz=null
trigger gg_trg_shanshuo=null
trigger gg_trg_jushe_1=null
trigger gg_trg_jushe_2=null
trigger gg_trg_fengxing_1=null
trigger gg_trg_fengxing_2=null
trigger gg_trg_fengbao_1=null
trigger gg_trg_fengbao_2=null
trigger gg_trg_xingchenzhiren_1=null
trigger gg_trg_xingchenzhiren_2=null
trigger gg_trg_jixing_1=null
trigger gg_trg_jixing_2=null
trigger gg_trg_jufeng=null
trigger gg_trg_shenlanemeng=null
trigger gg_trg_shanxi=null
trigger gg_trg_xuanyuanjian_20=null
trigger gg_trg_guangzhang_15=null
trigger gg_trg_jinghua=null
trigger gg_trg_jinghua_2=null
trigger gg_trg_zinengliang_1=null
trigger gg_trg_zinengliang_2=null
trigger gg_trg_zinengliang_3=null
trigger gg_trg_zinengliang_4=null
trigger gg_trg_xianzuquanzhang_1=null
trigger gg_trg_xuhuachongji=null
trigger gg_trg_xuhuachongji_2=null
trigger gg_trg_mofaxishou=null
trigger gg_trg_aoshujian_1=null
trigger gg_trg_aoshujian_2=null
trigger gg_trg_cangqiong_1=null
trigger gg_trg_cangqiong_2=null
trigger gg_trg_shengmingzhishi=null
trigger gg_trg_huanxianxuwu=null
trigger gg_trg_xuwulinghun=null
trigger gg_trg_smr1=null
trigger gg_trg_smr2=null
trigger gg_trg_smr3=null
trigger gg_trg_smr4=null
trigger gg_trg_smr5=null
trigger gg_trg_smrII_3=null
trigger gg_trg_smrII_4=null
trigger gg_trg_smrII_4_5=null
trigger gg_trg_smrII_5=null
trigger gg_trg_CTZY=null
trigger gg_trg_xiaoxinshi=null
trigger gg_trg_gongxiang_1=null
trigger gg_trg_gongxiang_2=null
trigger gg_trg_gongxiang_3=null
trigger gg_trg_diuqi_all=null
trigger gg_trg_jiyu=null
trigger gg_trg_huijia=null
trigger gg_trg_xuanqu_xinshi=null
trigger gg_trg_xuanqu_hero=null
trigger gg_trg_PK_start_0=null
trigger gg_trg_PK_start_1=null
trigger gg_trg_PK_start_2=null
trigger gg_trg_PK_time=null
trigger gg_trg_PK_time_2=null
trigger gg_trg_PK_time_3=null
trigger gg_trg_PK_leave=null
trigger gg_trg_PK_be_home=null
trigger gg_trg_pk_shanghai_1=null
trigger gg_trg_pk_shanghai_2=null
trigger gg_trg_zhizhu_1=null
trigger gg_trg_juxiong=null
trigger gg_trg_jumo=null
trigger gg_trg_jumo_2=null
trigger gg_trg_fmh4=null
trigger gg_trg_fmh=null
trigger gg_trg_fmh2=null
trigger gg_trg_fmh3=null
trigger gg_trg_FMH=null
trigger gg_trg_zhiyu_1=null
trigger gg_trg_zhiyu_2=null
trigger gg_trg_zhiyu_3=null
trigger gg_trg_yuhuasongge_1=null
trigger gg_trg_yuhuasongge_2=null
trigger gg_trg_kongjianyuesong_0=null
trigger gg_trg_kongjianyuesong_1=null
trigger gg_trg_kongjianyuesong_2=null
trigger gg_trg_kongjianyuesong_3=null
trigger gg_trg_sstc=null
trigger gg_trg_sstc2=null
trigger gg_trg_star_1=null
trigger gg_trg_star_2=null
trigger gg_trg_star_3=null
trigger gg_trg_star_4=null
trigger gg_trg_qyzsg=null
trigger gg_trg_qyzsg2=null
trigger gg_trg_chifu=null
trigger gg_trg_chifu2=null
trigger gg_trg_syslzj=null
trigger gg_trg_syslzj2=null
trigger gg_trg_syslzj_3=null
trigger gg_trg_syslzj_4=null
trigger gg_trg_fwjj=null
trigger gg_trg_fwjj2=null
trigger gg_trg_fwjj3=null
trigger gg_trg_fwjj4=null
trigger gg_trg_zj=null
trigger gg_trg_yylxx=null
trigger gg_trg_yylxx2=null
trigger gg_trg_yylxx3=null
trigger gg_trg_yylxx4=null
trigger gg_trg_molifangchu_1=null
trigger gg_trg_molifangchu_2=null
trigger gg_trg_trps=null
trigger gg_trg_trps2=null
trigger gg_trg_tianporangsui=null
trigger gg_trg_hwzs=null
trigger gg_trg_hwzs2=null
trigger gg_trg_hwzs3=null
trigger gg_trg_duanzui_1=null
trigger gg_trg_duanzui_2=null
trigger gg_trg_zhenhong_1=null
trigger gg_trg_zhenhong_2=null
trigger gg_trg_feiyan_1=null
trigger gg_trg_feiyan_2=null
trigger gg_trg_hwxj=null
trigger gg_trg_hwxj2=null
trigger gg_trg_baka_1=null
trigger gg_trg_baka_2=null
trigger gg_trg_baka_5=null
trigger gg_trg_baka_6=null
trigger gg_trg_zhidianzhena_1=null
trigger gg_trg_zhidianzhena_3=null
trigger gg_trg_zhuizongdaodan_1=null
trigger gg_trg_zhuizongdaodan_2=null
trigger gg_trg_danmu_1=null
trigger gg_trg_danmu_2=null
trigger gg_trg_danmu_3=null
trigger gg_trg_majiagongji=null
trigger gg_trg_daodanqishe_1=null
trigger gg_trg_daodanqishe_2=null
trigger gg_trg_dd=null
trigger gg_trg_dd2=null
trigger gg_trg_weixingshexian_0=null
trigger gg_trg_weixingshexian_1=null
trigger gg_trg_weixingshexian_2=null
trigger gg_trg_lz=null
trigger gg_trg_lz2=null
trigger gg_trg_lz3=null
trigger gg_trg_wuyun_1=null
trigger gg_trg_wuyun_2=null
trigger gg_trg_leiji_1=null
trigger gg_trg_leiji_2=null
trigger gg_trg_sphl=null
trigger gg_trg_sphl2=null
trigger gg_trg_sjqh=null
trigger gg_trg_sjqh2=null
trigger gg_trg_guangdun_1=null
trigger gg_trg_guangdun_1_5=null
trigger gg_trg_guangdun_xuexi=null
trigger gg_trg_guangdun_2=null
trigger gg_trg_guangdun_3=null
trigger gg_trg_tbz=null
trigger gg_trg_tbz2=null
trigger gg_trg_zf=null
trigger gg_trg_zf2=null
trigger gg_trg_zhuanshuyijian_1=null
trigger gg_trg_zhuanzhuyijian_2=null
trigger gg_trg_fzj=null
trigger gg_trg_fzj2=null
trigger gg_trg_lianshe_1=null
trigger gg_trg_lianshe_2=null
trigger gg_trg_lianshe_3=null
trigger gg_trg_gmjz=null
trigger gg_trg_baoyujianzhen_2=null
trigger gg_trg_gmjz2=null
trigger gg_trg_rongjiangjushi_1=null
trigger gg_trg_rongjiangjushi_2=null
trigger gg_trg_bf=null
trigger gg_trg_bf2=null
trigger gg_trg_huixiong=null
trigger gg_trg_huixiong_2=null
trigger gg_trg_huixiong_4=null
trigger gg_trg_langrenxingtai=null
trigger gg_trg_langrenxingtai_2=null
trigger gg_trg_langren_up=null
trigger gg_trg_mengshouzhixi_1=null
trigger gg_trg_mengshouzhixi_2=null
trigger gg_trg_mengshouzhinu_2=null
trigger gg_trg_mengshouzhinu_3=null
trigger gg_trg_yanzhua=null
trigger gg_trg_huitianmiedi_1=null
trigger gg_trg_huitianmiedi_2=null
trigger gg_trg_huitianmiedi_3=null
trigger gg_trg_qianxing_1=null
trigger gg_trg_qianxing_2=null
trigger gg_trg_qianxing_3=null
trigger gg_trg_shunshenlianzhan=null
trigger gg_trg_shunshenlianzhan_0=null
trigger gg_trg_shunshenlianzhan_2=null
trigger gg_trg_huibi_1=null
trigger gg_trg_huibi_2=null
trigger gg_trg_huibi_3=null
trigger gg_trg_anyingbu_0=null
trigger gg_trg_anyingbu_0_1=null
trigger gg_trg_anyingbu_0_2=null
trigger gg_trg_anyingbu_0_3=null
trigger gg_trg_anyingbu_1=null
trigger gg_trg_anyingbu_2=null
trigger gg_trg_huixuanbiao_1=null
trigger gg_trg_huixuanbiao_2=null
trigger gg_trg_zhimigntiji=null
trigger gg_trg_zhimingtiji2=null
trigger gg_trg_dizhen=null
trigger gg_trg_dizhen2=null
trigger gg_trg_xunsu=null
trigger gg_trg_xunsu_2=null
trigger gg_trg_jiandun=null
trigger gg_trg_dunji_1=null
trigger gg_trg_dunji_2=null
trigger gg_trg_shenpanjiasuo_1=null
trigger gg_trg_shenpanjiasuo_2=null
trigger gg_trg_shenshengzhicai=null
trigger gg_trg_huangjinxuanfeng=null
trigger gg_trg_huangjinxuanfeng2=null
trigger gg_trg_aersaisideyizhi=null
trigger gg_trg_aersaisideyizhi2=null
trigger gg_trg_aersaisideyizhi3=null
trigger gg_trg_siwangchanrao=null
trigger gg_trg_siwangchanrao2=null
trigger gg_trg_xiaowangyiji=null
trigger gg_trg_xiaowangyiji1=null
trigger gg_trg_xiaowangyiji2=null
trigger gg_trg_heihuagognji=null
trigger gg_trg_heihuagongji2=null
trigger gg_trg_heihuagongji3=null
trigger gg_trg_heianyishi=null
trigger gg_trg_heianyishi2=null
trigger gg_trg_heianzuzhou_1=null
trigger gg_trg_heianzuzhou_2=null
trigger gg_trg_quanliyiji=null
trigger gg_trg_quanliyiji_2=null
trigger gg_trg_quanliyiji_3=null
trigger gg_trg_tiaoyue=null
trigger gg_trg_tiaoyue_2=null
trigger gg_trg_tiaoyue_boxing=null
trigger gg_trg_xuanfengti_1=null
trigger gg_trg_xuanfengti_2=null
trigger gg_trg_shunshenlianxi=null
trigger gg_trg_shunshenlianxi2=null
trigger gg_trg_sanlianhengda_1=null
trigger gg_trg_sanlianhengda_1_5=null
trigger gg_trg_sanlianhengda_1_9=null
trigger gg_trg_sanlianhengda_2=null
trigger gg_trg_sanlianhengda_2_5=null
trigger gg_trg_sanlianhengda_2_9=null
trigger gg_trg_sanlianhengda_3=null
trigger gg_trg_sanlianhengda_3_5=null
trigger gg_trg_sanlianhengda_4=null
trigger gg_trg_rougou_1=null
trigger gg_trg_rougou_2=null
trigger gg_trg_rougou_3=null
trigger gg_trg_rougou_2_baka=null
trigger gg_trg_guishou0=null
trigger gg_trg_guishou=null
trigger gg_trg_guishou2=null
trigger gg_trg_guishou_ex=null
trigger gg_trg_qiangxingliliang=null
trigger gg_trg_qiangxingliliang_2=null
trigger gg_trg_fushiwenyi_1=null
trigger gg_trg_fushiwenyi_2=null
trigger gg_trg_fushiwenyi_ex=null
trigger gg_trg_tufubaozha=null
trigger gg_trg_tufubaozha_2=null
trigger gg_trg_tufubaozha_3=null
trigger gg_trg_kenyao_0=null
trigger gg_trg_kenyao=null
trigger gg_trg_dianciliqianyin_1=null
trigger gg_trg_dianciliqianyin_2=null
trigger gg_trg_dianciliqianyin_3=null
trigger gg_trg_dianciliqianyin_4=null
trigger gg_trg_fangdian_1=null
trigger gg_trg_fangdian_2=null
trigger gg_trg_fangdian_2_______u=null
trigger gg_trg_leijizhiqiang_1=null
trigger gg_trg_leijizhiqiang_2=null
trigger gg_trg_leijizhiqiang_3=null
trigger gg_trg_leijian=null
trigger gg_trg_chaodiancipao_1=null
trigger gg_trg_chaodiancipao_2=null
trigger gg_trg_chaodiancipao_3=null
trigger gg_trg_chaodiancipao_4=null
trigger gg_trg_chaodiancipao_5=null
trigger gg_trg_jiujibisha=null
trigger gg_trg_jiujibisha2=null
trigger gg_trg_jiujibisha3=null
trigger gg_trg_xuesezhuahen=null
trigger gg_trg_xuesezhuahen2=null
trigger gg_trg_langxi=null
trigger gg_trg_paoxiaochongji_1=null
trigger gg_trg_paoxiaochongji_2=null
trigger gg_trg_paoxiaochongji_3=null
trigger gg_trg_langdebenneng=null
trigger gg_trg_langdebenneng_2=null
trigger gg_trg_langshenhoujiao=null
trigger gg_trg_jianqizhan=null
trigger gg_trg_jianqizhan2=null
trigger gg_trg_xiongzhan_1=null
trigger gg_trg_xiongzhan_2=null
trigger gg_trg_xiongzhan_3=null
trigger gg_trg_bingjian_1=null
trigger gg_trg_bingjian_2=null
trigger gg_trg_bingbi_1=null
trigger gg_trg_bingbi_2=null
trigger gg_trg_lianzhan=null
trigger gg_trg_lianzhan2=null
trigger gg_trg_penqiji=null
trigger gg_trg_bingdong=null
trigger gg_trg_bingdong2=null
trigger gg_trg_bigndognzhan=null
trigger gg_trg_bingdognzhan2=null
trigger gg_trg_yidaorp_1=null
trigger gg_trg_yidaorp_2=null
trigger gg_trg_chaojiu_1=null
trigger gg_trg_chaojiu_2=null
trigger gg_trg_chaojiu_3=null
trigger gg_trg_hualongdianjing_1=null
trigger gg_trg_hualongdianjing_2=null
trigger gg_trg_yanshiqiang_1=null
trigger gg_trg_yanshiqiang_2=null
trigger gg_trg_yanshiqiang_3=null
trigger gg_trg_yanshiqiang_4=null
trigger gg_trg_gangciliancheng=null
trigger gg_trg_gangciliancheng_2=null
trigger gg_trg_ganghuajiazhi=null
trigger gg_trg_zhenlizhimen=null
trigger gg_trg_zhenlizhimen_2=null
trigger gg_trg_xianzhezhishi=null
trigger gg_trg_xianzhezhishi2=null
trigger gg_trg_diyuhuoyan_1=null
trigger gg_trg_diyuhuoyan_2=null
trigger gg_trg_diyuhuoyan_3=null
trigger gg_trg_lunrudao_1=null
trigger gg_trg_lunrudao_2=null
trigger gg_trg_lunrudao_3=null
trigger gg_trg_xuhuan_1=null
trigger gg_trg_xuhuan_2=null
trigger gg_trg_xuhuan_3=null
trigger gg_trg_diyuweituo_1=null
trigger gg_trg_diyuweituo_2=null
trigger gg_trg_yuanheng_1=null
trigger gg_trg_yuanheng_2=null
trigger gg_trg_diushoulei=null
trigger gg_trg_diushoulei2=null
trigger gg_trg_sandanqiang=null
trigger gg_trg_duochongjuji_1=null
trigger gg_trg_duochongjuji_1_5=null
trigger gg_trg_duochongjuji_2=null
trigger gg_trg_duochongjuji_3=null
trigger gg_trg_houkongfan=null
trigger gg_trg_houkognfan2=null
trigger gg_trg_chongjidan_1=null
trigger gg_trg_chongjidan_2=null
trigger gg_trg_chongjidan_3=null
trigger gg_trg_baoliedan_1=null
trigger gg_trg_baoliedan_2=null
trigger gg_trg_baoliedan_3=null
trigger gg_trg_huabu_1=null
trigger gg_trg_huabu_2=null
trigger gg_trg_xiaoyefuka__1=null
trigger gg_trg_xiaoyefuka_0=null
trigger gg_trg_xiaoyefuka_1=null
trigger gg_trg_xiaoyefuka_2=null
trigger gg_trg_time_shoubiao=null
trigger gg_trg_time_shoubiao_2=null
trigger gg_trg_shunyimoshu_1=null
trigger gg_trg_shunyimoshu_2=null
trigger gg_trg_houzuoli_16=null
trigger gg_trg_tansheyinren_2_1=null
trigger gg_trg_tansheyinren_2_2=null
trigger gg_trg_feidao=null
trigger gg_trg_feidao_the_world=null
trigger gg_trg_feidao_2=null
trigger gg_trg_feidaoqishe_1=null
trigger gg_trg_jishufeidaoqishe_1=null
trigger gg_trg_jishufeidaoqishe_2=null
trigger gg_trg_feidaoqishe_the_world=null
trigger gg_trg_feidaoqishe_2=null
trigger gg_trg_feidaoqishe_2_jishu=null
trigger gg_trg_sharenmuou_1=null
trigger gg_trg_sharenmuou_2=null
trigger gg_trg_sharenmuou_3=null
trigger gg_trg_yemuhuanyingsharengui_1=null
trigger gg_trg_yemuhuanyingsharengui_2=null
trigger gg_trg_the_world_1=null
trigger gg_trg_the_world_2=null
trigger gg_trg_the_world_3=null
trigger gg_trg_chaosuzaisheng=null
trigger gg_trg_chaosuzaisheng2=null
trigger gg_trg_shunbu_1=null
trigger gg_trg_wanjie=null
trigger gg_trg_wanjie3=null
trigger gg_trg_wanjie_0_5=null
trigger gg_trg_wanjie_4=null
trigger gg_trg_xuhua_1=null
trigger gg_trg_xuhua_2=null
trigger gg_trg_zuihoudeyueya=null
trigger gg_trg_yueyatianchong=null
trigger gg_trg_yueyatianchong2=null
trigger gg_trg_yueyatianchong_hei=null
trigger gg_trg_shunbuzhan=null
trigger gg_trg_wuyue_1=null
trigger gg_trg_wuyuesbz=null
trigger gg_trg_shunbuzhan2=null
trigger gg_trg_wuyue2=null
trigger gg_trg_wuyue3=null
trigger gg_trg_zishenyidong_1=null
trigger gg_trg_zishenyidong_2=null
trigger gg_trg_yidongjinzhi=null
trigger gg_trg_yidongjinzhi_2=null
trigger gg_trg_tieshi_1=null
trigger gg_trg_tieshi_2=null
trigger gg_trg_tieshi_3=null
trigger gg_trg_tieshi_4=null
trigger gg_trg_chumoyidong_star=null
trigger gg_trg_chumoyidong=null
trigger gg_trg_shoukao=null
trigger gg_trg_shoukao_2=null
trigger gg_trg_duochongtieshi=null
trigger gg_trg_duochongtieshi_2=null
trigger gg_trg_duochongtieshi_3=null
trigger gg_trg_feitui=null
trigger gg_trg_feitui2=null
trigger gg_trg_zhanzhengjianta=null
trigger gg_trg_zhanzhengjianta2=null
trigger gg_trg_lianji=null
trigger gg_trg_lianji2=null
trigger gg_trg_yexingkuangben_1=null
trigger gg_trg_yexingkuangben_2=null
trigger gg_trg_zhanshenzhufu_1=null
trigger gg_trg_zhanshenzhufu_2=null
trigger gg_trg_zhanshenzhufu_3=null
trigger gg_trg_zhonglifeixing_star=null
trigger gg_trg_zhonglifeixing_star_______u=null
trigger gg_trg_zhonglifeixing_1=null
trigger gg_trg_zhonglifeixing_1_______u=null
trigger gg_trg_zhonglifeixing_2=null
trigger gg_trg_zhonglifeixing_2_______u=null
trigger gg_trg_zhonglifeixing_3=null
trigger gg_trg_zhonglifeixing_move=null
trigger gg_trg_zhonglifeixing_move_______u=null
trigger gg_trg_shiliangfantan_1=null
trigger gg_trg_shiliangfantan_1_5=null
trigger gg_trg_shiliangfantan_1_6=null
trigger gg_trg_shiliangfantan_1_7=null
trigger gg_trg_shiliangfantan2=null
trigger gg_trg_shanghaimianyi=null
trigger gg_trg_shiliangfantan3=null
trigger gg_trg_blood_1=null
trigger gg_trg_blood_2=null
trigger gg_trg_dongliangchongji_1=null
trigger gg_trg_dongliangchongji_2A=null
trigger gg_trg_dongliangchongji_2B=null
trigger gg_trg_doom_1=null
trigger gg_trg_doom_2=null
trigger gg_trg_doom_3=null
trigger gg_trg_doom_4=null
trigger gg_trg_dierjiefang_1=null
trigger gg_trg_dierjiefang_2=null
trigger gg_trg_dierjiefang_2_5=null
trigger gg_trg_dierjiefang_3=null
trigger gg_trg_dierjiefang_4=null
trigger gg_trg_yinjia=null
trigger gg_trg_yinjia2=null
trigger gg_trg_tiejia_1=null
trigger gg_trg_tiejia_2=null
trigger gg_trg_tiejia_3=null
trigger gg_trg_yuanwuwufeng=null
trigger gg_trg_yuanwuwufeng2=null
trigger gg_trg_yinsufengbao_1=null
trigger gg_trg_yinsufengbao_2=null
trigger gg_trg_combo=null
trigger gg_trg_yefu_tuji_1=null
trigger gg_trg_yefu_tuji_2=null
trigger gg_trg_yefu_tuji_3=null
trigger gg_trg_emo_1=null
trigger gg_trg_emo_2=null
trigger gg_trg_emo_3=null
trigger gg_trg_Damon_Lord_Walk_0=null
trigger gg_trg_Damon_Lord_Walk_1=null
trigger gg_trg_Damon_Lord_Walk_2=null
trigger gg_trg_Damon_Lord_Walk_3=null
trigger gg_trg_Damon_Lord_Walk_4=null
trigger gg_trg_shenqiang_1=null
trigger gg_trg_shenqiang_2=null
trigger gg_trg_hongmo_1=null
trigger gg_trg_hongmo_2=null
trigger gg_trg_hongmo_3=null
trigger gg_trg_yuansuzuhe=null
trigger gg_trg_test=null
trigger gg_trg_yuansupeizhi_0=null
trigger gg_trg_yuansupeizhi_1=null
trigger gg_trg_yuansupeizhi_2=null
trigger gg_trg_yuansupeizhi_2_5=null
trigger gg_trg_yuansupeizhi_3=null
trigger gg_trg_linglihuifu=null
trigger gg_trg_yuansu_lv24=null
trigger gg_trg_yuansu_cdlevel=null
trigger gg_trg_yuansu_cd=null
trigger gg_trg_yuansu_cd_2=null
trigger gg_trg_huofu_a_1=null
trigger gg_trg_huofu_a_2=null
trigger gg_trg_huofu_b_1=null
trigger gg_trg_huofu_b_2=null
trigger gg_trg_huotufu_1=null
trigger gg_trg_huojinfu_1=null
trigger gg_trg_huojinfu_2=null
trigger gg_trg_huoshuifu_1=null
trigger gg_trg_huoshuifu_2=null
trigger gg_trg_huoshuifu_3=null
trigger gg_trg_shuifu_a_1=null
trigger gg_trg_shuifu_a_2=null
trigger gg_trg_shuifu_b_1=null
trigger gg_trg_shuifu_b_2=null
trigger gg_trg_shuitu_1=null
trigger gg_trg_shuitu_2=null
trigger gg_trg_shuitu_3=null
trigger gg_trg_shuimufu_1=null
trigger gg_trg_shuimufu_2=null
trigger gg_trg_shuimufu_3=null
trigger gg_trg_shuimufu_4=null
trigger gg_trg_shuijinfu_1=null
trigger gg_trg_shuijinfu_2=null
trigger gg_trg_jinfu_a_1=null
trigger gg_trg_jinfu_a_2=null
trigger gg_trg_jinfu_b_1=null
trigger gg_trg_jinfu_b_2=null
trigger gg_trg_mufu_a_1=null
trigger gg_trg_mufu_a_2=null
trigger gg_trg_mufu_a_3=null
trigger gg_trg_mufu_b_1=null
trigger gg_trg_mufu_b_2=null
trigger gg_trg_mufu_b_3=null
trigger gg_trg_rimufu_1=null
trigger gg_trg_rimufu_2=null
trigger gg_trg_jinmufu_1=null
trigger gg_trg_jinmufu_2=null
trigger gg_trg_yuemufu_1=null
trigger gg_trg_yuemufu_2=null
trigger gg_trg_tufu_a_1=null
trigger gg_trg_tufu_a_2=null
trigger gg_trg_tufu_a_3=null
trigger gg_trg_tufu_b_1=null
trigger gg_trg_tufu_b_2=null
trigger gg_trg_tujinfu_1=null
trigger gg_trg_tujinfu_1_5=null
trigger gg_trg_tujinfu_2=null
trigger gg_trg_tujinfu_3=null
trigger gg_trg_rifu_1=null
trigger gg_trg_rifu_2=null
trigger gg_trg_rifu_3=null
trigger gg_trg_yuefu_1=null
trigger gg_trg_yuefu_2=null
trigger gg_trg_riyuefu_1=null
trigger gg_trg_riyuefu_2=null
trigger gg_trg_riyuefu_3=null
trigger gg_trg_xianzhezhishi_1=null
trigger gg_trg_xianzhezhishi_2=null
trigger gg_trg_xianzhezhishi_3=null
trigger gg_trg_xianzhezhishi_4=null
trigger gg_trg_PLD1=null
trigger gg_trg_Handsonic_0=null
trigger gg_trg_Handsonic=null
trigger gg_trg_Handsonic_0_5=null
trigger gg_trg_Handsonic_1=null
trigger gg_trg_Handsonic_2=null
trigger gg_trg_Handsonic_3=null
trigger gg_trg_fenshen_1=null
trigger gg_trg_fenshen_2=null
trigger gg_trg_fenshen_3=null
trigger gg_trg_fenshen_4=null
trigger gg_trg_Howling1_EX=null
trigger gg_trg_Howling1=null
trigger gg_trg_Howling2=null
trigger gg_trg_Howling3=null
trigger gg_trg_Howling4=null
trigger gg_trg_Distortion=null
trigger gg_trg_Distortion2=null
trigger gg_trg_Distortion3=null
trigger gg_trg_Distortion4=null
trigger gg_trg_Distortion4_5=null
trigger gg_trg_Distortion5=null
trigger gg_trg_Overdrive_0=null
trigger gg_trg_Overdrive_1=null
trigger gg_trg_Overdrive_2=null
trigger gg_trg_Overdrive_3=null
trigger gg_trg_Overdrive_3_5=null
trigger gg_trg_Overdrive_4=null
trigger gg_trg_Harmonics_0=null
trigger gg_trg_Harmonics=null
trigger gg_trg_Harmonics_1=null
trigger gg_trg_lihuazouyidong=null
trigger gg_trg_Distortion_______u=null
trigger gg_trg_Distortion2_______u=null
trigger gg_trg_Distortion3_______u=null
trigger gg_trg_Distortion4_______u=null
trigger gg_trg_Delay_attack_1=null
trigger gg_trg_Delay_attack_2=null
trigger gg_trg_Delay_attack_3=null
trigger gg_trg_sphl_______u=null
trigger gg_trg_sphl2_______u=null
trigger gg_trg_paoxiao_new=null
trigger gg_trg_paoxiao_new2=null
trigger gg_trg_mielong=null
trigger gg_trg_mielong3=null
trigger gg_trg_tunhuo=null
trigger gg_trg_tunhuo2=null
trigger gg_trg_huolong=null
trigger gg_trg_huologn2=null
trigger gg_trg_honglianbaoyanren_1=null
trigger gg_trg_honglianbaoyanren_2=null
trigger gg_trg_huolongyuji_1=null
trigger gg_trg_leitingfeichui_1=null
trigger gg_trg_leitingfeichui_2=null
trigger gg_trg_leitingfeichui_3=null
trigger gg_trg_cihua_1=null
trigger gg_trg_cihua_2=null
trigger gg_trg_shenglingkuangnu_1=null
trigger gg_trg_shenglingkuangnu_2=null
trigger gg_trg_shenglingkuangnu_3=null
trigger gg_trg_guqiang=null
trigger gg_trg_zuzhou_1=null
trigger gg_trg_zuzhou_2=null
trigger gg_trg_zuzhou_3=null
trigger gg_trg_wuran_1=null
trigger gg_trg_wuran_2=null
trigger gg_trg_linghunmoshi_0=null
trigger gg_trg_linghunmoshi_1=null
trigger gg_trg_linghunmoshi_2=null
trigger gg_trg_linghunmoshi_3=null
trigger gg_trg_linghunsuolian_1=null
trigger gg_trg_linghunsuolian_2=null
trigger gg_trg_judu=null
trigger gg_trg_judu2=null
trigger gg_trg_judu2________2=null
trigger gg_trg_judu2_______u=null
trigger gg_trg_emeng_1=null
trigger gg_trg_emeng_1_5=null
trigger gg_trg_emeng_2=null
trigger gg_trg_emeng_2_5=null
trigger gg_trg_hengkan_1=null
trigger gg_trg_hengkan_2=null
trigger gg_trg_hengkan_3=null
trigger gg_trg_huaji_1=null
trigger gg_trg_huaji_2=null
trigger gg_trg_huaji_3=null
trigger gg_trg_hengsao_1=null
trigger gg_trg_hengsao_2=null
trigger gg_trg_hengsao_3=null
trigger gg_trg_tiaokan_1=null
trigger gg_trg_tiaokan_2=null
trigger gg_trg_tiaokan_3=null
trigger gg_trg_tiaokan_4=null
trigger gg_trg_tiaokan_5=null
trigger gg_trg_feifu_1=null
trigger gg_trg_feifu_2=null
trigger gg_trg_feifu_3=null
trigger gg_trg_heihua_1=null
trigger gg_trg_heihua_2=null
trigger gg_trg_julianfeiren_1=null
trigger gg_trg_julianfeiren_2=null
trigger gg_trg_shandiantuxi_1=null
trigger gg_trg_shandiantuxi_2=null
trigger gg_trg_guangzilingqiang_1=null
trigger gg_trg_guangzilingqiang_2=null
trigger gg_trg_guangzilingqiang_3=null
trigger gg_trg_leijizhenpo_1=null
trigger gg_trg_leijizhenpo_2=null
trigger gg_trg_leiyanshengjian_1=null
trigger gg_trg_leiyanshengjian_2=null
trigger gg_trg_caiyansheji_1=null
trigger gg_trg_caiyansheji_2=null
trigger gg_trg_hongzhishi_1=null
trigger gg_trg_hongzhishi_2=null
trigger gg_trg_hongzhishi_2_5=null
trigger gg_trg_hongzhishi_2_6=null
trigger gg_trg_hongzhishi_2_7=null
trigger gg_trg_hongzhishi_3=null
trigger gg_trg_hongzhishi_4=null
trigger gg_trg_molipingzhang_0=null
trigger gg_trg_molipingzhang_1=null
trigger gg_trg_molipingzhang_2=null
trigger gg_trg_jinghuazhiyu_1=null
trigger gg_trg_jinghuazhiyu_2=null
trigger gg_trg_yuanhuanzhili_0=null
trigger gg_trg_yuanhuanzhili_1=null
trigger gg_trg_yuanhuanzhili_2=null
trigger gg_trg_baoliehuoqiang_1=null
trigger gg_trg_baoliehuoqiang_2=null
trigger gg_trg_baoliehuoqiang_3=null
trigger gg_trg_xuanfengsheji_1=null
trigger gg_trg_xuanfengsheji_2=null
trigger gg_trg_sizhidan_0=null
trigger gg_trg_sizhidan_1=null
trigger gg_trg_sizhidan_2=null
trigger gg_trg_sizhidan_3=null
trigger gg_trg_yizhidan_1=null
trigger gg_trg_yizhidan_2=null
trigger gg_trg_yizhidan_shunyi_1=null
trigger gg_trg_yizhidan_shunyi_2=null
trigger gg_trg_yizhidangongsu=null
trigger gg_trg_qizhidan_1=null
trigger gg_trg_qizhidan_2=null
trigger gg_trg_fengkuangsheji_1=null
trigger gg_trg_fengkuangsheji_2=null
trigger gg_trg_fengkuangsheji_3=null
trigger gg_trg_fengkuangsheji_3_5=null
trigger gg_trg_shishizhicheng_1=null
trigger gg_trg_shishizhicheng_2=null
trigger gg_trg_shishizhicheng_3=null
trigger gg_trg_litijidong=null
trigger gg_trg_litijidong_1_5=null
trigger gg_trg_xuanfengzhan=null
trigger gg_trg_shuangdaozhan=null
trigger gg_trg_huixuanzhan=null
trigger gg_trg_testga=null
trigger gg_trg_undef=null
unit gg_unit_hgtw_0012=null
unit gg_unit_hcas_0020=null
unit gg_unit_hgtw_0019=null
unit gg_unit_hcas_0015=null
unit gg_unit_ngme_0025=null
unit gg_unit_ngme_0014=null
unit gg_unit_nefm_0032=null
unit gg_unit_nefm_0035=null
unit gg_unit_nefm_0038=null
unit gg_unit_nefm_0041=null
unit gg_unit_n018_0103=null
unit gg_unit_n00F_0044=null
unit gg_unit_n00F_0045=null
unit gg_unit_n00G_0048=null
unit gg_unit_n016_0137=null
unit gg_unit_n00M_0069=null
unit gg_unit_n00K_0067=null
unit gg_unit_n00L_0068=null
unit gg_unit_n00J_0066=null
unit gg_unit_n00O_0091=null
unit gg_unit_n00P_0092=null
unit gg_unit_n00Q_0093=null
unit gg_unit_n00R_0094=null
unit gg_unit_n00S_0095=null
unit gg_unit_n00T_0096=null
unit gg_unit_n00U_0097=null
unit gg_unit_n00V_0098=null
unit gg_unit_n00X_0099=null
unit gg_unit_n00W_0100=null
unit gg_unit_e05H_0133=null
unit gg_unit_h001_0134=null
unit gg_unit_h00A_0135=null
unit gg_unit_h005_0104=null
unit gg_unit_h003_0105=null
unit gg_unit_h004_0106=null
unit gg_unit_n00Z_0112=null
unit gg_unit_n00Y_0109=null
unit gg_unit_n00Y_0111=null
unit gg_unit_e05G_0101=null
unit gg_unit_n016_0145=null
unit gg_unit_e05F_0128=null
unit gg_unit_e05I_0132=null
unit gg_unit_h009_0136=null
unit gg_unit_n016_0148=null
unit gg_unit_n016_0142=null
unit gg_unit_n016_0146=null
unit gg_unit_n016_0144=null
unit gg_unit_n016_0147=null
unit gg_unit_n016_0143=null
unit gg_unit_n016_0140=null
unit gg_unit_n016_0139=null
unit gg_unit_n015_0115=null
unit gg_unit_n017_0116=null
unit gg_unit_n018_0117=null
unit gg_unit_n018_0125=null
unit gg_unit_n018_0122=null
unit gg_unit_hhou_0060=null
unit gg_unit_hhou_0121=null
destructable gg_dest_YT11_3231=null

trigger l__library_init

//JASSHelper struct globals:
constant integer si__sys=1
integer si__sys_F=0
integer si__sys_I=0
integer array si__sys_V
boolean s__sys_JAPI
player s__sys_selfp
integer s__sys_self
group s__sys_g
timer s__sys_timeTimer=CreateTimer()
boolean s__sys_Debug=false
gamecache s__sys_GC
player s__sys_firstPlayer=Player(0)
integer s__sys_IsReplay=- 1
real s__sys_cx=0
real s__sys_cy=0
constant integer si__maphack=2
integer si__maphack_F=0
integer si__maphack_I=0
integer array si__maphack_V
unit array s__maphack_heroes
integer s__maphack_heroCount=0
integer array s__maphack_heroState
real array s__maphack_heroHeight
constant integer si__baka=3
integer si__baka_F=0
integer si__baka_I=0
integer array si__baka_V
player array s__baka_spplayer
integer array s__baka_spid
group array s__baka_g
integer s__baka_thisVer=260
string s__baka_thatVerName=""
group s__baka_CG1=CreateGroup()
group s__baka_CG2=CreateGroup()
group s__baka_CG3=CreateGroup()
group s__baka_CG4=CreateGroup()
unit s__baka_CU=null
trigger s__baka_CheckDeath=CreateTrigger()
integer s__baka_CheckCount=0
constant integer si__Effect=4
integer si__Effect_F=0
integer si__Effect_I=0
integer array si__Effect_V
constant integer si__Event=5
integer si__Event_F=0
integer si__Event_I=0
integer array si__Event_V
hashtable s__Event_HT=InitHashtable()
constant integer si__math=6
integer si__math_F=0
integer si__math_I=0
integer array si__math_V
real array s__math_PolygonX
real array s__math_PolygonY
constant integer si__object=7
integer si__object_F=0
integer si__object_I=0
integer array si__object_V
hashtable s__object_HT=InitHashtable()
integer s__object_COST=1
integer s__object_COOL=2
integer s__object_COMMAND=0
constant integer si__process=8
integer si__process_F=0
integer si__process_I=0
integer array si__process_V
integer array s__process_keys
unit array s__process_us
string array s__process_name
integer array s__process_uper
boolean array s__process_cover
boolean array s__process_enable
integer array s__process_lastkey
integer array s__process_nextkey
integer array s__process_hashindex
integer s__process_h_count=StringHash("过程数量")
integer array s__process_h_index
integer s__process_h_max=StringHash("过程最大值")
constant integer si__Sound=9
integer si__Sound_F=0
integer si__Sound_I=0
integer array si__Sound_V
hashtable s__Sound_HT=InitHashtable()
constant integer si__String=10
integer si__String_F=0
integer si__String_I=0
integer array si__String_V
string s__String_char2AllString="abcdefghijklmnopqrstuvwxyz"
string array s__String_Str
integer s__String_StrCount
constant integer si__test=11
integer si__test_F=0
integer si__test_I=0
integer array si__test_V
constant integer si__text=12
integer si__text_F=0
integer si__text_I=0
integer array si__text_V
constant integer si__Unit=13
integer si__Unit_F=0
integer si__Unit_I=0
integer array si__Unit_V
integer s__Unit_pause_count=StringHash("暂停计数")
trigger st__maphack_SetHeight
trigger st__maphack_GetHeight
trigger st__baka_newMap
trigger st__baka_InitHero
trigger st__Sound_SaveSound
trigger st__String_char2
unit f__arg_unit1
real f__arg_real1
real f__arg_real2
string f__arg_string1
string f__arg_string2
boolean f__arg_boolean1
boolean f__arg_boolean2
boolean f__arg_boolean3
integer f__arg_integer1
integer f__arg_integer2
real f__result_real
boolean f__result_boolean
sound f__result_sound
string f__result_string

endglobals


//Generated allocator of sys
function s__sys__allocate takes nothing returns integer
 local integer this=si__sys_F
    if (this!=0) then
        set si__sys_F=si__sys_V[this]
    else
        set si__sys_I=si__sys_I+1
        set this=si__sys_I
    endif
    if (this>8190) then
        return 0
    endif

    set si__sys_V[this]=-1
 return this
endfunction

//Generated destructor of sys
function s__sys_deallocate takes integer this returns nothing
    if this==null then
        return
    elseif (si__sys_V[this]!=-1) then
        return
    endif
    set si__sys_V[this]=si__sys_F
    set si__sys_F=this
endfunction

//Generated allocator of Unit
function s__Unit__allocate takes nothing returns integer
 local integer this=si__Unit_F
    if (this!=0) then
        set si__Unit_F=si__Unit_V[this]
    else
        set si__Unit_I=si__Unit_I+1
        set this=si__Unit_I
    endif
    if (this>8190) then
        return 0
    endif

    set si__Unit_V[this]=-1
 return this
endfunction

//Generated destructor of Unit
function s__Unit_deallocate takes integer this returns nothing
    if this==null then
        return
    elseif (si__Unit_V[this]!=-1) then
        return
    endif
    set si__Unit_V[this]=si__Unit_F
    set si__Unit_F=this
endfunction

//Generated allocator of text
function s__text__allocate takes nothing returns integer
 local integer this=si__text_F
    if (this!=0) then
        set si__text_F=si__text_V[this]
    else
        set si__text_I=si__text_I+1
        set this=si__text_I
    endif
    if (this>8190) then
        return 0
    endif

    set si__text_V[this]=-1
 return this
endfunction

//Generated destructor of text
function s__text_deallocate takes integer this returns nothing
    if this==null then
        return
    elseif (si__text_V[this]!=-1) then
        return
    endif
    set si__text_V[this]=si__text_F
    set si__text_F=this
endfunction

//Generated allocator of test
function s__test__allocate takes nothing returns integer
 local integer this=si__test_F
    if (this!=0) then
        set si__test_F=si__test_V[this]
    else
        set si__test_I=si__test_I+1
        set this=si__test_I
    endif
    if (this>8190) then
        return 0
    endif

    set si__test_V[this]=-1
 return this
endfunction

//Generated destructor of test
function s__test_deallocate takes integer this returns nothing
    if this==null then
        return
    elseif (si__test_V[this]!=-1) then
        return
    endif
    set si__test_V[this]=si__test_F
    set si__test_F=this
endfunction

//Generated method caller for String.char2
function sc__String_char2 takes integer n returns string
if n > 0 and n < 27 then
return SubString(s__String_char2AllString, n - 1, n)
endif
return ""
endfunction

//Generated allocator of String
function s__String__allocate takes nothing returns integer
 local integer this=si__String_F
    if (this!=0) then
        set si__String_F=si__String_V[this]
    else
        set si__String_I=si__String_I+1
        set this=si__String_I
    endif
    if (this>8190) then
        return 0
    endif

    set si__String_V[this]=-1
 return this
endfunction

//Generated destructor of String
function s__String_deallocate takes integer this returns nothing
    if this==null then
        return
    elseif (si__String_V[this]!=-1) then
        return
    endif
    set si__String_V[this]=si__String_F
    set si__String_F=this
endfunction

//Generated method caller for Sound.SaveSound
function sc__Sound_SaveSound takes string filename,boolean looping,boolean is3D,boolean stopwhenoutofrange,integer fadeInRate,integer fadeOutRate,string eaxSetting returns sound
local integer k
set bj_lastPlayedSound=CreateSound(filename, looping, is3D, stopwhenoutofrange, fadeInRate, fadeOutRate, eaxSetting)
set k=GetHandleId(bj_lastPlayedSound)
call SaveStr(s__Sound_HT, k, 0, filename)
call StartSound(bj_lastPlayedSound)
call StopSound(bj_lastPlayedSound, false, false)
return bj_lastPlayedSound
endfunction

//Generated allocator of Sound
function s__Sound__allocate takes nothing returns integer
 local integer this=si__Sound_F
    if (this!=0) then
        set si__Sound_F=si__Sound_V[this]
    else
        set si__Sound_I=si__Sound_I+1
        set this=si__Sound_I
    endif
    if (this>8190) then
        return 0
    endif

    set si__Sound_V[this]=-1
 return this
endfunction

//Generated destructor of Sound
function s__Sound_deallocate takes integer this returns nothing
    if this==null then
        return
    elseif (si__Sound_V[this]!=-1) then
        return
    endif
    set si__Sound_V[this]=si__Sound_F
    set si__Sound_F=this
endfunction

//Generated allocator of process
function s__process__allocate takes nothing returns integer
 local integer this=si__process_F
    if (this!=0) then
        set si__process_F=si__process_V[this]
    else
        set si__process_I=si__process_I+1
        set this=si__process_I
    endif
    if (this>8190) then
        return 0
    endif

    set si__process_V[this]=-1
 return this
endfunction

//Generated destructor of process
function s__process_deallocate takes integer this returns nothing
    if this==null then
        return
    elseif (si__process_V[this]!=-1) then
        return
    endif
    set si__process_V[this]=si__process_F
    set si__process_F=this
endfunction

//Generated allocator of object
function s__object__allocate takes nothing returns integer
 local integer this=si__object_F
    if (this!=0) then
        set si__object_F=si__object_V[this]
    else
        set si__object_I=si__object_I+1
        set this=si__object_I
    endif
    if (this>8190) then
        return 0
    endif

    set si__object_V[this]=-1
 return this
endfunction

//Generated destructor of object
function s__object_deallocate takes integer this returns nothing
    if this==null then
        return
    elseif (si__object_V[this]!=-1) then
        return
    endif
    set si__object_V[this]=si__object_F
    set si__object_F=this
endfunction

//Generated allocator of math
function s__math__allocate takes nothing returns integer
 local integer this=si__math_F
    if (this!=0) then
        set si__math_F=si__math_V[this]
    else
        set si__math_I=si__math_I+1
        set this=si__math_I
    endif
    if (this>8190) then
        return 0
    endif

    set si__math_V[this]=-1
 return this
endfunction

//Generated destructor of math
function s__math_deallocate takes integer this returns nothing
    if this==null then
        return
    elseif (si__math_V[this]!=-1) then
        return
    endif
    set si__math_V[this]=si__math_F
    set si__math_F=this
endfunction

//Generated allocator of Event
function s__Event__allocate takes nothing returns integer
 local integer this=si__Event_F
    if (this!=0) then
        set si__Event_F=si__Event_V[this]
    else
        set si__Event_I=si__Event_I+1
        set this=si__Event_I
    endif
    if (this>8190) then
        return 0
    endif

    set si__Event_V[this]=-1
 return this
endfunction

//Generated destructor of Event
function s__Event_deallocate takes integer this returns nothing
    if this==null then
        return
    elseif (si__Event_V[this]!=-1) then
        return
    endif
    set si__Event_V[this]=si__Event_F
    set si__Event_F=this
endfunction

//Generated allocator of Effect
function s__Effect__allocate takes nothing returns integer
 local integer this=si__Effect_F
    if (this!=0) then
        set si__Effect_F=si__Effect_V[this]
    else
        set si__Effect_I=si__Effect_I+1
        set this=si__Effect_I
    endif
    if (this>8190) then
        return 0
    endif

    set si__Effect_V[this]=-1
 return this
endfunction

//Generated destructor of Effect
function s__Effect_deallocate takes integer this returns nothing
    if this==null then
        return
    elseif (si__Effect_V[this]!=-1) then
        return
    endif
    set si__Effect_V[this]=si__Effect_F
    set si__Effect_F=this
endfunction

//Generated method caller for baka.newMap
function sc__baka_newMap takes nothing returns boolean
    call TriggerEvaluate(st__baka_newMap)
 return f__result_boolean
endfunction

//Generated method caller for baka.InitHero
function sc__baka_InitHero takes unit hero returns nothing
    set f__arg_unit1=hero
    call TriggerEvaluate(st__baka_InitHero)
endfunction

//Generated allocator of baka
function s__baka__allocate takes nothing returns integer
 local integer this=si__baka_F
    if (this!=0) then
        set si__baka_F=si__baka_V[this]
    else
        set si__baka_I=si__baka_I+1
        set this=si__baka_I
    endif
    if (this>8190) then
        return 0
    endif

    set si__baka_V[this]=-1
 return this
endfunction

//Generated destructor of baka
function s__baka_deallocate takes integer this returns nothing
    if this==null then
        return
    elseif (si__baka_V[this]!=-1) then
        return
    endif
    set si__baka_V[this]=si__baka_F
    set si__baka_F=this
endfunction

//Generated method caller for maphack.SetHeight
function sc__maphack_SetHeight takes unit u,real h,real r returns nothing
local integer i=1
loop
exitwhen i > s__maphack_heroCount
if s__maphack_heroes[i] == u then
set s__maphack_heroHeight[i]=h
if s__maphack_heroState[i] != 2 then
call SetUnitFlyHeight(u, h, r)
endif
return
endif
set i=i + 1
endloop
call SetUnitFlyHeight(u, h, r)
endfunction

//Generated method caller for maphack.GetHeight
function sc__maphack_GetHeight takes unit u returns real
local integer i=1
loop
exitwhen i > s__maphack_heroCount
if s__maphack_heroes[i] == u then
return s__maphack_heroHeight[i]
endif
set i=i + 1
endloop
return GetUnitFlyHeight(u)
endfunction

//Generated allocator of maphack
function s__maphack__allocate takes nothing returns integer
 local integer this=si__maphack_F
    if (this!=0) then
        set si__maphack_F=si__maphack_V[this]
    else
        set si__maphack_I=si__maphack_I+1
        set this=si__maphack_I
    endif
    if (this>8190) then
        return 0
    endif

    set si__maphack_V[this]=-1
 return this
endfunction

//Generated destructor of maphack
function s__maphack_deallocate takes integer this returns nothing
    if this==null then
        return
    elseif (si__maphack_V[this]!=-1) then
        return
    endif
    set si__maphack_V[this]=si__maphack_F
    set si__maphack_F=this
endfunction

//library cjLib75hJKJ374s4e597nba9o7w45gf:
function cj_group_copy_75hJKJ3745gf takes nothing returns nothing
//# optional
call GroupAddUnit(cj_tmpgr_copy_nw509ert7, GetEnumUnit())
endfunction

//library cjLib75hJKJ374s4e597nba9o7w45gf ends
//library cjLibw560nbs9b8nse46703948:
function cj_true_a497bnsor7 takes nothing returns boolean
//# optional
return true
endfunction
function cjLibw560nbs9b8nse46703948___init takes nothing returns nothing
set cj_true_bool_4896bnao87=Condition(function cj_true_a497bnsor7)
endfunction

//library cjLibw560nbs9b8nse46703948 ends
//library YDTriggerSaveLoadSystem:
function YDTriggerSaveLoadSystem___Init takes nothing returns nothing
set YDHT=InitHashtable()
endfunction

//library YDTriggerSaveLoadSystem ends
//library YDWEBase:
function YDWEH2I takes handle h returns integer
return GetHandleId(h)
endfunction
function YDWEFlushAllData takes nothing returns nothing
call FlushParentHashtable(YDHT)
endfunction
function YDWEFlushMissionByInteger takes integer i returns nothing
call FlushChildHashtable(YDHT, i)
endfunction
function YDWEFlushMissionByString takes string s returns nothing
call FlushChildHashtable(YDHT, StringHash(s))
endfunction
function YDWEFlushStoredIntegerByInteger takes integer i,integer j returns nothing
call RemoveSavedInteger(YDHT, i, j)
endfunction
function YDWEFlushStoredIntegerByString takes string s1,string s2 returns nothing
call RemoveSavedInteger(YDHT, StringHash(s1), StringHash(s2))
endfunction
function YDWEHaveSavedIntegerByInteger takes integer i,integer j returns boolean
return HaveSavedInteger(YDHT, i, j)
endfunction
function YDWEHaveSavedIntegerByString takes string s1,string s2 returns boolean
return HaveSavedInteger(YDHT, StringHash(s1), StringHash(s2))
endfunction
function YDWESaveIntegerByInteger takes integer pTable,integer pKey,integer i returns nothing
call SaveInteger(YDHT, pTable, pKey, i)
endfunction
function YDWESaveIntegerByString takes string pTable,string pKey,integer i returns nothing
call SaveInteger(YDHT, StringHash(pTable), StringHash(pKey), i)
endfunction
function YDWEGetIntegerByInteger takes integer pTable,integer pKey returns integer
return LoadInteger(YDHT, pTable, pKey)
endfunction
function YDWEGetIntegerByString takes string pTable,string pKey returns integer
return LoadInteger(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
function YDWESaveRealByInteger takes integer pTable,integer pKey,real r returns nothing
call SaveReal(YDHT, pTable, pKey, r)
endfunction
function YDWESaveRealByString takes string pTable,string pKey,real r returns nothing
call SaveReal(YDHT, StringHash(pTable), StringHash(pKey), r)
endfunction
function YDWEGetRealByInteger takes integer pTable,integer pKey returns real
return LoadReal(YDHT, pTable, pKey)
endfunction
function YDWEGetRealByString takes string pTable,string pKey returns real
return LoadReal(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
function YDWESaveStringByInteger takes integer pTable,integer pKey,string s returns nothing
call SaveStr(YDHT, pTable, pKey, s)
endfunction
function YDWESaveStringByString takes string pTable,string pKey,string s returns nothing
call SaveStr(YDHT, StringHash(pTable), StringHash(pKey), s)
endfunction
function YDWEGetStringByInteger takes integer pTable,integer pKey returns string
return LoadStr(YDHT, pTable, pKey)
endfunction
function YDWEGetStringByString takes string pTable,string pKey returns string
return LoadStr(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
function YDWESaveBooleanByInteger takes integer pTable,integer pKey,boolean b returns nothing
call SaveBoolean(YDHT, pTable, pKey, b)
endfunction
function YDWESaveBooleanByString takes string pTable,string pKey,boolean b returns nothing
call SaveBoolean(YDHT, StringHash(pTable), StringHash(pKey), b)
endfunction
function YDWEGetBooleanByInteger takes integer pTable,integer pKey returns boolean
return LoadBoolean(YDHT, pTable, pKey)
endfunction
function YDWEGetBooleanByString takes string pTable,string pKey returns boolean
return LoadBoolean(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
function YDWESaveUnitByInteger takes integer pTable,integer pKey,unit u returns nothing
call SaveUnitHandle(YDHT, pTable, pKey, u)
endfunction
function YDWESaveUnitByString takes string pTable,string pKey,unit u returns nothing
call SaveUnitHandle(YDHT, StringHash(pTable), StringHash(pKey), u)
endfunction
function YDWEGetUnitByInteger takes integer pTable,integer pKey returns unit
return LoadUnitHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetUnitByString takes string pTable,string pKey returns unit
return LoadUnitHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
function YDWESaveUnitIDByInteger takes integer pTable,integer pKey,integer uid returns nothing
call SaveInteger(YDHT, pTable, pKey, uid)
endfunction
function YDWESaveUnitIDByString takes string pTable,string pKey,integer uid returns nothing
call SaveInteger(YDHT, StringHash(pTable), StringHash(pKey), uid)
endfunction
function YDWEGetUnitIDByInteger takes integer pTable,integer pKey returns integer
return LoadInteger(YDHT, pTable, pKey)
endfunction
function YDWEGetUnitIDByString takes string pTable,string pKey returns integer
return LoadInteger(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
function YDWESaveAbilityIDByInteger takes integer pTable,integer pKey,integer abid returns nothing
call SaveInteger(YDHT, pTable, pKey, abid)
endfunction
function YDWESaveAbilityIDByString takes string pTable,string pKey,integer abid returns nothing
call SaveInteger(YDHT, StringHash(pTable), StringHash(pKey), abid)
endfunction
function YDWEGetAbilityIDByInteger takes integer pTable,integer pKey returns integer
return LoadInteger(YDHT, pTable, pKey)
endfunction
function YDWEGetAbilityIDByString takes string pTable,string pKey returns integer
return LoadInteger(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
function YDWESavePlayerByInteger takes integer pTable,integer pKey,player p returns nothing
call SavePlayerHandle(YDHT, pTable, pKey, p)
endfunction
function YDWESavePlayerByString takes string pTable,string pKey,player p returns nothing
call SavePlayerHandle(YDHT, StringHash(pTable), StringHash(pKey), p)
endfunction
function YDWEGetPlayerByInteger takes integer pTable,integer pKey returns player
return LoadPlayerHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetPlayerByString takes string pTable,string pKey returns player
return LoadPlayerHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
function YDWESaveItemByInteger takes integer pTable,integer pKey,item it returns nothing
call SaveItemHandle(YDHT, pTable, pKey, it)
endfunction
function YDWESaveItemByString takes string pTable,string pKey,item it returns nothing
call SaveItemHandle(YDHT, StringHash(pTable), StringHash(pKey), it)
endfunction
function YDWEGetItemByInteger takes integer pTable,integer pKey returns item
return LoadItemHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetItemByString takes string pTable,string pKey returns item
return LoadItemHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
function YDWESaveItemIDByInteger takes integer pTable,integer pKey,integer itid returns nothing
call SaveInteger(YDHT, pTable, pKey, itid)
endfunction
function YDWESaveItemIDByString takes string pTable,string pKey,integer itid returns nothing
call SaveInteger(YDHT, StringHash(pTable), StringHash(pKey), itid)
endfunction
function YDWEGetItemIDByInteger takes integer pTable,integer pKey returns integer
return LoadInteger(YDHT, pTable, pKey)
endfunction
function YDWEGetItemIDByString takes string pTable,string pKey returns integer
return LoadInteger(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
function YDWESaveTimerByInteger takes integer pTable,integer pKey,timer t returns nothing
call SaveTimerHandle(YDHT, pTable, pKey, t)
endfunction
function YDWESaveTimerByString takes string pTable,string pKey,timer t returns nothing
call SaveTimerHandle(YDHT, StringHash(pTable), StringHash(pKey), t)
endfunction
function YDWEGetTimerByInteger takes integer pTable,integer pKey returns timer
return LoadTimerHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetTimerByString takes string pTable,string pKey returns timer
return LoadTimerHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
function YDWESaveTriggerByInteger takes integer pTable,integer pKey,trigger trg returns nothing
call SaveTriggerHandle(YDHT, pTable, pKey, trg)
endfunction
function YDWESaveTriggerByString takes string pTable,string pKey,trigger trg returns nothing
call SaveTriggerHandle(YDHT, StringHash(pTable), StringHash(pKey), trg)
endfunction
function YDWEGetTriggerByInteger takes integer pTable,integer pKey returns trigger
return LoadTriggerHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetTriggerByString takes string pTable,string pKey returns trigger
return LoadTriggerHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
function YDWESaveLocationByInteger takes integer pTable,integer pKey,location pt returns nothing
call SaveLocationHandle(YDHT, pTable, pKey, pt)
endfunction
function YDWESaveLocationByString takes string pTable,string pKey,location pt returns nothing
call SaveLocationHandle(YDHT, StringHash(pTable), StringHash(pKey), pt)
endfunction
function YDWEGetLocationByInteger takes integer pTable,integer pKey returns location
return LoadLocationHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetLocationByString takes string pTable,string pKey returns location
return LoadLocationHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
function YDWESaveGroupByInteger takes integer pTable,integer pKey,group g returns nothing
call SaveGroupHandle(YDHT, pTable, pKey, g)
endfunction
function YDWESaveGroupByString takes string pTable,string pKey,group g returns nothing
call SaveGroupHandle(YDHT, StringHash(pTable), StringHash(pKey), g)
endfunction
function YDWEGetGroupByInteger takes integer pTable,integer pKey returns group
return LoadGroupHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetGroupByString takes string pTable,string pKey returns group
return LoadGroupHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
function YDWESaveMultiboardByInteger takes integer pTable,integer pKey,multiboard m returns nothing
call SaveMultiboardHandle(YDHT, pTable, pKey, m)
endfunction
function YDWESaveMultiboardByString takes string pTable,string pKey,multiboard m returns nothing
call SaveMultiboardHandle(YDHT, StringHash(pTable), StringHash(pKey), m)
endfunction
function YDWEGetMultiboardByInteger takes integer pTable,integer pKey returns multiboard
return LoadMultiboardHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetMultiboardByString takes string pTable,string pKey returns multiboard
return LoadMultiboardHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
function YDWESaveMultiboardItemByInteger takes integer pTable,integer pKey,multiboarditem mt returns nothing
call SaveMultiboardItemHandle(YDHT, pTable, pKey, mt)
endfunction
function YDWESaveMultiboardItemByString takes string pTable,string pKey,multiboarditem mt returns nothing
call SaveMultiboardItemHandle(YDHT, StringHash(pTable), StringHash(pKey), mt)
endfunction
function YDWEGetMultiboardItemByInteger takes integer pTable,integer pKey returns multiboarditem
return LoadMultiboardItemHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetMultiboardItemByString takes string pTable,string pKey returns multiboarditem
return LoadMultiboardItemHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
function YDWESaveTextTagByInteger takes integer pTable,integer pKey,texttag tt returns nothing
call SaveTextTagHandle(YDHT, pTable, pKey, tt)
endfunction
function YDWESaveTextTagByString takes string pTable,string pKey,texttag tt returns nothing
call SaveTextTagHandle(YDHT, StringHash(pTable), StringHash(pKey), tt)
endfunction
function YDWEGetTextTagByInteger takes integer pTable,integer pKey returns texttag
return LoadTextTagHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetTextTagByString takes string pTable,string pKey returns texttag
return LoadTextTagHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
function YDWESaveLightningByInteger takes integer pTable,integer pKey,lightning ln returns nothing
call SaveLightningHandle(YDHT, pTable, pKey, ln)
endfunction
function YDWESaveLightningByString takes string pTable,string pKey,lightning ln returns nothing
call SaveLightningHandle(YDHT, StringHash(pTable), StringHash(pKey), ln)
endfunction
function YDWEGetLightningByInteger takes integer pTable,integer pKey returns lightning
return LoadLightningHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetLightningByString takes string pTable,string pKey returns lightning
return LoadLightningHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
function YDWESaveRegionByInteger takes integer pTable,integer pKey,region rn returns nothing
call SaveRegionHandle(YDHT, pTable, pKey, rn)
endfunction
function YDWESaveRegionByString takes string pTable,string pKey,region rt returns nothing
call SaveRegionHandle(YDHT, StringHash(pTable), StringHash(pKey), rt)
endfunction
function YDWEGetRegionByInteger takes integer pTable,integer pKey returns region
return LoadRegionHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetRegionByString takes string pTable,string pKey returns region
return LoadRegionHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
function YDWESaveRectByInteger takes integer pTable,integer pKey,rect rn returns nothing
call SaveRectHandle(YDHT, pTable, pKey, rn)
endfunction
function YDWESaveRectByString takes string pTable,string pKey,rect rt returns nothing
call SaveRectHandle(YDHT, StringHash(pTable), StringHash(pKey), rt)
endfunction
function YDWEGetRectByInteger takes integer pTable,integer pKey returns rect
return LoadRectHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetRectByString takes string pTable,string pKey returns rect
return LoadRectHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
function YDWESaveLeaderboardByInteger takes integer pTable,integer pKey,leaderboard lb returns nothing
call SaveLeaderboardHandle(YDHT, pTable, pKey, lb)
endfunction
function YDWESaveLeaderboardByString takes string pTable,string pKey,leaderboard lb returns nothing
call SaveLeaderboardHandle(YDHT, StringHash(pTable), StringHash(pKey), lb)
endfunction
function YDWEGetLeaderboardByInteger takes integer pTable,integer pKey returns leaderboard
return LoadLeaderboardHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetLeaderboardByString takes string pTable,string pKey returns leaderboard
return LoadLeaderboardHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
function YDWESaveEffectByInteger takes integer pTable,integer pKey,effect e returns nothing
call SaveEffectHandle(YDHT, pTable, pKey, e)
endfunction
function YDWESaveEffectByString takes string pTable,string pKey,effect e returns nothing
call SaveEffectHandle(YDHT, StringHash(pTable), StringHash(pKey), e)
endfunction
function YDWEGetEffectByInteger takes integer pTable,integer pKey returns effect
return LoadEffectHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetEffectByString takes string pTable,string pKey returns effect
return LoadEffectHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
function YDWESaveDestructableByInteger takes integer pTable,integer pKey,destructable da returns nothing
call SaveDestructableHandle(YDHT, pTable, pKey, da)
endfunction
function YDWESaveDestructableByString takes string pTable,string pKey,destructable da returns nothing
call SaveDestructableHandle(YDHT, StringHash(pTable), StringHash(pKey), da)
endfunction
function YDWEGetDestructableByInteger takes integer pTable,integer pKey returns destructable
return LoadDestructableHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetDestructableByString takes string pTable,string pKey returns destructable
return LoadDestructableHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
function YDWESaveTriggerConditionByInteger takes integer pTable,integer pKey,triggercondition tc returns nothing
call SaveTriggerConditionHandle(YDHT, pTable, pKey, tc)
endfunction
function YDWESaveTriggerConditionByString takes string pTable,string pKey,triggercondition tc returns nothing
call SaveTriggerConditionHandle(YDHT, StringHash(pTable), StringHash(pKey), tc)
endfunction
function YDWEGetTriggerConditionByInteger takes integer pTable,integer pKey returns triggercondition
return LoadTriggerConditionHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetTriggerConditionByString takes string pTable,string pKey returns triggercondition
return LoadTriggerConditionHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
function YDWESaveTriggerActionByInteger takes integer pTable,integer pKey,triggeraction ta returns nothing
call SaveTriggerActionHandle(YDHT, pTable, pKey, ta)
endfunction
function YDWESaveTriggerActionByString takes string pTable,string pKey,triggeraction ta returns nothing
call SaveTriggerActionHandle(YDHT, StringHash(pTable), StringHash(pKey), ta)
endfunction
function YDWEGetTriggerActionByInteger takes integer pTable,integer pKey returns triggeraction
return LoadTriggerActionHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetTriggerActionByString takes string pTable,string pKey returns triggeraction
return LoadTriggerActionHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
function YDWESaveTriggerEventByInteger takes integer pTable,integer pKey,event et returns nothing
call SaveTriggerEventHandle(YDHT, pTable, pKey, et)
endfunction
function YDWESaveTriggerEventByString takes string pTable,string pKey,event et returns nothing
call SaveTriggerEventHandle(YDHT, StringHash(pTable), StringHash(pKey), et)
endfunction
function YDWEGetTriggerEventByInteger takes integer pTable,integer pKey returns event
return LoadTriggerEventHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetTriggerEventByString takes string pTable,string pKey returns event
return LoadTriggerEventHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
function YDWESaveForceByInteger takes integer pTable,integer pKey,force fc returns nothing
call SaveForceHandle(YDHT, pTable, pKey, fc)
endfunction
function YDWESaveForceByString takes string pTable,string pKey,force fc returns nothing
call SaveForceHandle(YDHT, StringHash(pTable), StringHash(pKey), fc)
endfunction
function YDWEGetForceByInteger takes integer pTable,integer pKey returns force
return LoadForceHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetForceByString takes string pTable,string pKey returns force
return LoadForceHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
function YDWESaveBoolexprByInteger takes integer pTable,integer pKey,boolexpr be returns nothing
call SaveBooleanExprHandle(YDHT, pTable, pKey, be)
endfunction
function YDWESaveBoolexprByString takes string pTable,string pKey,boolexpr be returns nothing
call SaveBooleanExprHandle(YDHT, StringHash(pTable), StringHash(pKey), be)
endfunction
function YDWEGetBoolexprByInteger takes integer pTable,integer pKey returns boolexpr
return LoadBooleanExprHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetBoolexprByString takes string pTable,string pKey returns boolexpr
return LoadBooleanExprHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
function YDWESaveSoundByInteger takes integer pTable,integer pKey,sound sd returns nothing
call SaveSoundHandle(YDHT, pTable, pKey, sd)
endfunction
function YDWESaveSoundByString takes string pTable,string pKey,sound sd returns nothing
call SaveSoundHandle(YDHT, StringHash(pTable), StringHash(pKey), sd)
endfunction
function YDWEGetSoundByInteger takes integer pTable,integer pKey returns sound
return LoadSoundHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetSoundByString takes string pTable,string pKey returns sound
return LoadSoundHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
function YDWESaveTimerDialogByInteger takes integer pTable,integer pKey,timerdialog td returns nothing
call SaveTimerDialogHandle(YDHT, pTable, pKey, td)
endfunction
function YDWESaveTimerDialogByString takes string pTable,string pKey,timerdialog td returns nothing
call SaveTimerDialogHandle(YDHT, StringHash(pTable), StringHash(pKey), td)
endfunction
function YDWEGetTimerDialogByInteger takes integer pTable,integer pKey returns timerdialog
return LoadTimerDialogHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetTimerDialogByString takes string pTable,string pKey returns timerdialog
return LoadTimerDialogHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
function YDWESaveTrackableByInteger takes integer pTable,integer pKey,trackable ta returns nothing
call SaveTrackableHandle(YDHT, pTable, pKey, ta)
endfunction
function YDWESaveTrackableByString takes string pTable,string pKey,trackable ta returns nothing
call SaveTrackableHandle(YDHT, StringHash(pTable), StringHash(pKey), ta)
endfunction
function YDWEGetTrackableByInteger takes integer pTable,integer pKey returns trackable
return LoadTrackableHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetTrackableByString takes string pTable,string pKey returns trackable
return LoadTrackableHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
function YDWESaveDialogByInteger takes integer pTable,integer pKey,dialog d returns nothing
call SaveDialogHandle(YDHT, pTable, pKey, d)
endfunction
function YDWESaveDialogByString takes string pTable,string pKey,dialog d returns nothing
call SaveDialogHandle(YDHT, StringHash(pTable), StringHash(pKey), d)
endfunction
function YDWEGetDialogByInteger takes integer pTable,integer pKey returns dialog
return LoadDialogHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetDialogByString takes string pTable,string pKey returns dialog
return LoadDialogHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
function YDWESaveButtonByInteger takes integer pTable,integer pKey,button bt returns nothing
call SaveButtonHandle(YDHT, pTable, pKey, bt)
endfunction
function YDWESaveButtonByString takes string pTable,string pKey,button bt returns nothing
call SaveButtonHandle(YDHT, StringHash(pTable), StringHash(pKey), bt)
endfunction
function YDWEGetButtonByInteger takes integer pTable,integer pKey returns button
return LoadButtonHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetButtonByString takes string pTable,string pKey returns button
return LoadButtonHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
function YDWESaveQuestByInteger takes integer pTable,integer pKey,quest qt returns nothing
call SaveQuestHandle(YDHT, pTable, pKey, qt)
endfunction
function YDWESaveQuestByString takes string pTable,string pKey,quest qt returns nothing
call SaveQuestHandle(YDHT, StringHash(pTable), StringHash(pKey), qt)
endfunction
function YDWEGetQuestByInteger takes integer pTable,integer pKey returns quest
return LoadQuestHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetQuestByString takes string pTable,string pKey returns quest
return LoadQuestHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
function YDWESaveQuestItemByInteger takes integer pTable,integer pKey,questitem qi returns nothing
call SaveQuestItemHandle(YDHT, pTable, pKey, qi)
endfunction
function YDWESaveQuestItemByString takes string pTable,string pKey,questitem qi returns nothing
call SaveQuestItemHandle(YDHT, StringHash(pTable), StringHash(pKey), qi)
endfunction
function YDWEGetQuestItemByInteger takes integer pTable,integer pKey returns questitem
return LoadQuestItemHandle(YDHT, pTable, pKey)
endfunction
function YDWEGetQuestItemByString takes string pTable,string pKey returns questitem
return LoadQuestItemHandle(YDHT, StringHash(pTable), StringHash(pKey))
endfunction
function YDWES2I takes string s returns integer
return StringHash(s)
endfunction
function YDWESaveAbilityHandleBJ takes integer AbilityID,integer key,integer missionKey,hashtable table returns nothing
call SaveInteger(table, missionKey, key, AbilityID)
endfunction
function YDWESaveAbilityHandle takes hashtable table,integer parentKey,integer childKey,integer AbilityID returns nothing
call SaveInteger(table, parentKey, childKey, AbilityID)
endfunction
function YDWELoadAbilityHandleBJ takes integer key,integer missionKey,hashtable table returns integer
return LoadInteger(table, missionKey, key)
endfunction
function YDWELoadAbilityHandle takes hashtable table,integer parentKey,integer childKey returns integer
return LoadInteger(table, parentKey, childKey)
endfunction
function YDWECoordinateX takes real x returns real
return RMinBJ(RMaxBJ(x, yd_MapMinX), yd_MapMaxX)
endfunction
function YDWECoordinateY takes real y returns real
return RMinBJ(RMaxBJ(y, yd_MapMinY), yd_MapMaxY)
endfunction
function YDWEDistanceBetweenUnits takes unit a,unit b returns real
return SquareRoot(( GetUnitX(a) - GetUnitX(b) ) * ( GetUnitX(a) - GetUnitX(b) ) + ( GetUnitY(a) - GetUnitY(b) ) * ( GetUnitY(a) - GetUnitY(b) ))
endfunction
function YDWEAngleBetweenUnits takes unit fromUnit,unit toUnit returns real
return bj_RADTODEG * Atan2(GetUnitY(toUnit) - GetUnitY(fromUnit), GetUnitX(toUnit) - GetUnitX(fromUnit))
endfunction
function YDWEGetRect takes real x,real y,real width,real height returns rect
return Rect(x - width * 0.5, y - height * 0.5, x + width * 0.5, y + height * 0.5)
endfunction
function YDWEFlyEnable takes unit u returns nothing
call UnitAddAbility(u, 0x416D7266)
call UnitRemoveAbility(u, 0x416D7266)
endfunction
function YDWEId2S takes integer value returns string
local string charMap=bj_AllString
local string result=""
local integer remainingValue=value
local integer charValue
local integer byteno
set byteno=0
loop
set charValue=ModuloInteger(remainingValue, 256)
set remainingValue=remainingValue / 256
set result=SubString(charMap, charValue, charValue + 1) + result
set byteno=byteno + 1
exitwhen byteno == 4
endloop
return result
endfunction
function YDWES2Id takes string targetstr returns integer
local string originstr=bj_AllString
local integer strlength=StringLength(targetstr)
local integer a=0
local integer b=0
local integer numx=1
local integer result=0
loop
exitwhen b > strlength - 1
set numx=R2I(Pow(256, strlength - 1 - b))
set a=1
loop
exitwhen a > 255
if SubString(targetstr, b, b + 1) == SubString(originstr, a, a + 1) then
set result=result + a * numx
set a=256
endif
set a=a + 1
endloop
set b=b + 1
endloop
return result
endfunction
function YDWES2UnitId takes string targetstr returns integer
return YDWES2Id(targetstr)
endfunction
function YDWES2ItemId takes string targetstr returns integer
return YDWES2Id(targetstr)
endfunction
function GetLastAbilityCastingUnit takes nothing returns unit
return bj_lastAbilityCastingUnit
endfunction
function GetLastAbilityTargetUnit takes nothing returns unit
return bj_lastAbilityTargetUnit
endfunction
function YDWESetMapLimitCoordinate takes real MinX,real MaxX,real MinY,real MaxY returns nothing
set yd_MapMaxX=MaxX
set yd_MapMinX=MinX
set yd_MapMaxY=MaxY
set yd_MapMinY=MinY
endfunction
function YDWESyStemAbilityCastingOverTriggerAction takes unit hero,integer index returns nothing
local integer i=0
loop
exitwhen i >= YDWEBase__AbilityCastingOverEventNumber
if YDWEBase__AbilityCastingOverEventType[i] == index then
set bj_lastAbilityCastingUnit=hero
if YDWEBase__AbilityCastingOverEventQueue[i] != null and TriggerEvaluate(YDWEBase__AbilityCastingOverEventQueue[i]) and IsTriggerEnabled(YDWEBase__AbilityCastingOverEventQueue[i]) then
call TriggerExecute(YDWEBase__AbilityCastingOverEventQueue[i])
endif
endif
set i=i + 1
endloop
endfunction
function YDWESyStemAbilityCastingOverRegistTrigger takes trigger trg,integer index returns nothing
set YDWEBase__AbilityCastingOverEventQueue[YDWEBase__AbilityCastingOverEventNumber]=trg
set YDWEBase__AbilityCastingOverEventType[YDWEBase__AbilityCastingOverEventNumber]=index
set YDWEBase__AbilityCastingOverEventNumber=YDWEBase__AbilityCastingOverEventNumber + 1
endfunction
function YDWECreateUnitPool takes nothing returns nothing
set bj_lastCreatedUnitPool=CreateUnitPool()
endfunction
function YDWEPlaceRandomUnit takes unitpool up,player p,real x,real y,real face returns nothing
set bj_lastPoolAbstractedUnit=PlaceRandomUnit(up, p, x, y, face)
endfunction
function YDWEGetLastUnitPool takes nothing returns unitpool
return bj_lastCreatedUnitPool
endfunction
function YDWEGetLastPoolAbstractedUnit takes nothing returns unit
return bj_lastPoolAbstractedUnit
endfunction
function YDWECreateItemPool takes nothing returns nothing
set bj_lastCreatedItemPool=CreateItemPool()
endfunction
function YDWEPlaceRandomItem takes itempool ip,real x,real y returns nothing
set bj_lastPoolAbstractedItem=PlaceRandomItem(ip, x, y)
endfunction
function YDWEGetLastItemPool takes nothing returns itempool
return bj_lastCreatedItemPool
endfunction
function YDWEGetLastPoolAbstractedItem takes nothing returns item
return bj_lastPoolAbstractedItem
endfunction
function YDWESetAttackDamageWeaponType takes attacktype at,damagetype dt,weapontype wt returns nothing
set bj_lastSetAttackType=at
set bj_lastSetDamageType=dt
set bj_lastSetWeaponType=wt
endfunction
function YDWEGetPlayerColorString takes player p,string s returns string
return YDWEBase__yd_PlayerColor[GetHandleId(GetPlayerColor(p))] + s + "|r"
endfunction
function YDWEGetUnitItemSoftId takes unit hero,item it returns integer
local integer i=0
loop
exitwhen i > 5
if UnitItemInSlot(hero, i) == it then
return i + 1
endif
set i=i + 1
endloop
return 0
endfunction
function YDWEVersion_Display takes nothing returns boolean
call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 30, "|cFF1E90FF当前编辑器版本为： |r|cFF00FF00YDWE 1.27.5.859")
return false
endfunction
function YDWEVersion_Init takes nothing returns nothing
local trigger t=CreateTrigger()
local integer i=0
loop
exitwhen i == 12
call TriggerRegisterPlayerChatEvent(t, Player(i), "YDWE Version", true)
set i=i + 1
endloop
call TriggerAddCondition(t, Condition(function YDWEVersion_Display))
set t=null
endfunction
function InitializeYD takes nothing returns nothing
set yd_MapMinX=GetCameraBoundMinX() - GetCameraMargin(CAMERA_MARGIN_LEFT)
set yd_MapMinY=GetCameraBoundMinY() - GetCameraMargin(CAMERA_MARGIN_BOTTOM)
set yd_MapMaxX=GetCameraBoundMaxX() + GetCameraMargin(CAMERA_MARGIN_RIGHT)
set yd_MapMaxY=GetCameraBoundMaxY() + GetCameraMargin(CAMERA_MARGIN_TOP)
set YDWEBase__yd_PlayerColor[0]="|cFFFF0303"
set YDWEBase__yd_PlayerColor[1]="|cFF0042FF"
set YDWEBase__yd_PlayerColor[2]="|cFF1CE6B9"
set YDWEBase__yd_PlayerColor[3]="|cFF540081"
set YDWEBase__yd_PlayerColor[4]="|cFFFFFC01"
set YDWEBase__yd_PlayerColor[5]="|cFFFE8A0E"
set YDWEBase__yd_PlayerColor[6]="|cFF20C000"
set YDWEBase__yd_PlayerColor[7]="|cFFE55BB0"
set YDWEBase__yd_PlayerColor[8]="|cFF959697"
set YDWEBase__yd_PlayerColor[9]="|cFF7EBFF1"
set YDWEBase__yd_PlayerColor[10]="|cFF106246"
set YDWEBase__yd_PlayerColor[11]="|cFF4E2A04"
set YDWEBase__yd_PlayerColor[12]="|cFF282828"
set YDWEBase__yd_PlayerColor[13]="|cFF282828"
set YDWEBase__yd_PlayerColor[14]="|cFF282828"
set YDWEBase__yd_PlayerColor[15]="|cFF282828"
call YDWEVersion_Init()
endfunction

//library YDWEBase ends
//library YDWEEnumDestructablesInCircleBJFilterNull:
function YDWEEnumDestructablesInCircleBJFilterNull takes nothing returns boolean
local real dx=GetDestructableX(GetFilterDestructable()) - GetLocationX(bj_enumDestructableCenter)
local real dy=GetDestructableY(GetFilterDestructable()) - GetLocationY(bj_enumDestructableCenter)
return dx * dx + dy * dy <= bj_enumDestructableRadius * bj_enumDestructableRadius
endfunction

//library YDWEEnumDestructablesInCircleBJFilterNull ends
//library YDWEGetForceOfPlayerNull:
function YDWEGetForceOfPlayerNull takes player whichPlayer returns force
local force f=CreateForce()
call ForceAddPlayer(f, whichPlayer)
set yd_NullTempForce=f
set f=null
return yd_NullTempForce
endfunction

//library YDWEGetForceOfPlayerNull ends
//library YDWEGetInventoryIndexOfItemTypeBJNull:
function YDWEGetInventoryIndexOfItemTypeBJNull takes unit whichUnit,integer itemId returns integer
local integer index=0
if itemId != 0 then
loop
if GetItemTypeId(UnitItemInSlot(whichUnit, index)) == itemId then
return index + 1
endif
set index=index + 1
exitwhen index >= bj_MAX_INVENTORY
endloop
endif
return 0
endfunction

//library YDWEGetInventoryIndexOfItemTypeBJNull ends
//library YDWEGetItemOfTypeFromUnitBJNull:
function YDWEGetItemOfTypeFromUnitBJNull takes unit whichUnit,integer itemId returns item
local integer index=0
loop
set yd_NullTempItem=UnitItemInSlot(whichUnit, index)
if GetItemTypeId(yd_NullTempItem) == itemId then
return yd_NullTempItem
endif
set index=index + 1
exitwhen index >= bj_MAX_INVENTORY
endloop
return null
endfunction

//library YDWEGetItemOfTypeFromUnitBJNull ends
//library YDWEGetPlayersAlliesNull:
function YDWEGetPlayersAlliesNull takes player whichPlayer returns force
local force f=CreateForce()
call ForceEnumAllies(f, whichPlayer, null)
set yd_NullTempForce=f
set f=null
return yd_NullTempForce
endfunction

//library YDWEGetPlayersAlliesNull ends
//library YDWEGetPlayersMatchingNull:
function YDWEGetPlayersMatchingNull takes boolexpr filter returns force
local force f=CreateForce()
call ForceEnumPlayers(f, filter)
call DestroyBoolExpr(filter)
set yd_NullTempForce=f
set f=null
return yd_NullTempForce
endfunction

//library YDWEGetPlayersMatchingNull ends
//library YDWEGetUnitsInRangeOfLocMatchingNull:
function YDWEGetUnitsInRangeOfLocMatchingNull takes real radius,location whichLocation,boolexpr filter returns group
local group g=CreateGroup()
call GroupEnumUnitsInRangeOfLoc(g, whichLocation, radius, filter)
call DestroyBoolExpr(filter)
set yd_NullTempGroup=g
set g=null
return yd_NullTempGroup
endfunction

//library YDWEGetUnitsInRangeOfLocMatchingNull ends
//library YDWEGetUnitsInRectMatchingNull:
function YDWEGetUnitsInRectMatchingNull takes rect r,boolexpr filter returns group
local group g=CreateGroup()
call GroupEnumUnitsInRect(g, r, filter)
call DestroyBoolExpr(filter)
set yd_NullTempGroup=g
set g=null
return yd_NullTempGroup
endfunction

//library YDWEGetUnitsInRectMatchingNull ends
//library YDWEGetUnitsInRectOfPlayerNull:
function YDWEGetUnitsInRectOfPlayerNull takes rect r,player whichPlayer returns group
local group g=CreateGroup()
set bj_groupEnumOwningPlayer=whichPlayer
call GroupEnumUnitsInRect(g, r, filterGetUnitsInRectOfPlayer)
set yd_NullTempGroup=g
set g=null
return yd_NullTempGroup
endfunction

//library YDWEGetUnitsInRectOfPlayerNull ends
//library YDWEGetUnitsOfPlayerAndTypeIdNull:
function YDWEGetUnitsOfPlayerAndTypeIdNull takes player whichPlayer,integer unitid returns group
local group g=CreateGroup()
set bj_groupEnumTypeId=unitid
call GroupEnumUnitsOfPlayer(g, whichPlayer, filterGetUnitsOfPlayerAndTypeId)
set yd_NullTempGroup=g
set g=null
return yd_NullTempGroup
endfunction

//library YDWEGetUnitsOfPlayerAndTypeIdNull ends
//library YDWEMakeUnitsPassiveForPlayerNull:
function YDWEMakeUnitsPassiveForPlayerNull takes player whichPlayer returns nothing
local group playerUnits=CreateGroup()
call CachePlayerHeroData(whichPlayer)
call GroupEnumUnitsOfPlayer(playerUnits, whichPlayer, null)
call ForGroup(playerUnits, function MakeUnitsPassiveForPlayerEnum)
call DestroyGroup(playerUnits)
set playerUnits=null
endfunction

//library YDWEMakeUnitsPassiveForPlayerNull ends
//library YDWEMultiboardSetItemIconBJNull:
function YDWEMultiboardSetItemIconBJNull takes multiboard mb,integer col,integer row,string iconFileName returns nothing
local integer curRow=0
local integer curCol=0
local integer numRows=MultiboardGetRowCount(mb)
local integer numCols=MultiboardGetColumnCount(mb)
local multiboarditem mbitem=null
loop
set curRow=curRow + 1
exitwhen curRow > numRows
if ( row == 0 or row == curRow ) then
set curCol=0
loop
set curCol=curCol + 1
exitwhen curCol > numCols
if ( col == 0 or col == curCol ) then
set mbitem=MultiboardGetItem(mb, curRow - 1, curCol - 1)
call MultiboardSetItemIcon(mbitem, iconFileName)
call MultiboardReleaseItem(mbitem)
endif
endloop
endif
endloop
set mbitem=null
endfunction

//library YDWEMultiboardSetItemIconBJNull ends
//library YDWEMultiboardSetItemValueBJNull:
function YDWEMultiboardSetItemValueBJNull takes multiboard mb,integer col,integer row,string val returns nothing
local integer curRow=0
local integer curCol=0
local integer numRows=MultiboardGetRowCount(mb)
local integer numCols=MultiboardGetColumnCount(mb)
local multiboarditem mbitem=null
loop
set curRow=curRow + 1
exitwhen curRow > numRows
if ( row == 0 or row == curRow ) then
set curCol=0
loop
set curCol=curCol + 1
exitwhen curCol > numCols
if ( col == 0 or col == curCol ) then
set mbitem=MultiboardGetItem(mb, curRow - 1, curCol - 1)
call MultiboardSetItemValue(mbitem, val)
call MultiboardReleaseItem(mbitem)
endif
endloop
endif
endloop
set mbitem=null
endfunction

//library YDWEMultiboardSetItemValueBJNull ends
//library YDWEMultiboardSetItemWidthBJNull:
function YDWEMultiboardSetItemWidthBJNull takes multiboard mb,integer col,integer row,real width returns nothing
local integer curRow=0
local integer curCol=0
local integer numRows=MultiboardGetRowCount(mb)
local integer numCols=MultiboardGetColumnCount(mb)
local multiboarditem mbitem=null
loop
set curRow=curRow + 1
exitwhen curRow > numRows
if ( row == 0 or row == curRow ) then
set curCol=0
loop
set curCol=curCol + 1
exitwhen curCol > numCols
if ( col == 0 or col == curCol ) then
set mbitem=MultiboardGetItem(mb, curRow - 1, curCol - 1)
call MultiboardSetItemWidth(mbitem, width / 100.0)
call MultiboardReleaseItem(mbitem)
endif
endloop
endif
endloop
set mbitem=null
endfunction

//library YDWEMultiboardSetItemWidthBJNull ends
//library YDWEPlaySoundNull:
function YDWEPlaySoundNull takes string soundName returns nothing
local sound soundHandle=sc__Sound_SaveSound(soundName , false , false , true , 12700 , 12700 , "")
call StartSound(soundHandle)
call KillSoundWhenDone(soundHandle)
set soundHandle=null
endfunction

//library YDWEPlaySoundNull ends
//library YDWEPolledWaitNull:
function YDWEPolledWaitNull takes real duration returns nothing
local timer t
local real timeRemaining
if ( duration > 0 ) then
set t=CreateTimer()
call TimerStart(t, duration, false, null)
loop
set timeRemaining=TimerGetRemaining(t)
exitwhen timeRemaining <= 0
if ( timeRemaining > bj_POLLED_WAIT_SKIP_THRESHOLD ) then
call TriggerSleepAction(0.1 * timeRemaining)
else
call TriggerSleepAction(bj_POLLED_WAIT_INTERVAL)
endif
endloop
call PauseTimer(t)
call FlushChildHashtable(globalHashtable, GetHandleId(t))
call DestroyTimer(t)
endif
set t=null
endfunction

//library YDWEPolledWaitNull ends
//library YDWEReplaceUnitBJNull:
function YDWEReplaceUnitBJNull takes unit whichUnit,integer newUnitId,integer unitStateMethod returns unit
local unit oldUnit=whichUnit
local unit newUnit
local boolean wasHidden
local integer index
local item indexItem
local real oldRatio
if ( whichUnit == null ) then
set bj_lastReplacedUnit=whichUnit
return bj_lastReplacedUnit
endif
set wasHidden=IsUnitHidden(oldUnit)
call ShowUnit(oldUnit, false)
if ( newUnitId == 0x75676F6C ) then
set newUnit=CreateBlightedGoldmine(GetOwningPlayer(oldUnit), GetUnitX(oldUnit), GetUnitY(oldUnit), GetUnitFacing(oldUnit))
else
set newUnit=CreateUnit(GetOwningPlayer(oldUnit), newUnitId, GetUnitX(oldUnit), GetUnitY(oldUnit), GetUnitFacing(oldUnit))
endif
if ( unitStateMethod == bj_UNIT_STATE_METHOD_RELATIVE ) then
if ( GetUnitState(oldUnit, UNIT_STATE_MAX_LIFE) > 0 ) then
set oldRatio=GetUnitState(oldUnit, UNIT_STATE_LIFE) / GetUnitState(oldUnit, UNIT_STATE_MAX_LIFE)
call SetUnitState(newUnit, UNIT_STATE_LIFE, oldRatio * GetUnitState(newUnit, UNIT_STATE_MAX_LIFE))
endif
if ( GetUnitState(oldUnit, UNIT_STATE_MAX_MANA) > 0 ) and ( GetUnitState(newUnit, UNIT_STATE_MAX_MANA) > 0 ) then
set oldRatio=GetUnitState(oldUnit, UNIT_STATE_MANA) / GetUnitState(oldUnit, UNIT_STATE_MAX_MANA)
call SetUnitState(newUnit, UNIT_STATE_MANA, oldRatio * GetUnitState(newUnit, UNIT_STATE_MAX_MANA))
endif
elseif ( unitStateMethod == bj_UNIT_STATE_METHOD_ABSOLUTE ) then
call SetUnitState(newUnit, UNIT_STATE_LIFE, GetUnitState(oldUnit, UNIT_STATE_LIFE))
if ( GetUnitState(newUnit, UNIT_STATE_MAX_MANA) > 0 ) then
call SetUnitState(newUnit, UNIT_STATE_MANA, GetUnitState(oldUnit, UNIT_STATE_MANA))
endif
elseif ( unitStateMethod == bj_UNIT_STATE_METHOD_DEFAULTS ) then
elseif ( unitStateMethod == bj_UNIT_STATE_METHOD_MAXIMUM ) then
call SetUnitState(newUnit, UNIT_STATE_LIFE, GetUnitState(newUnit, UNIT_STATE_MAX_LIFE))
call SetUnitState(newUnit, UNIT_STATE_MANA, GetUnitState(newUnit, UNIT_STATE_MAX_MANA))
else
endif
call SetResourceAmount(newUnit, GetResourceAmount(oldUnit))
if ( IsUnitType(oldUnit, UNIT_TYPE_HERO) and IsUnitType(newUnit, UNIT_TYPE_HERO) ) then
call SetHeroXP(newUnit, GetHeroXP(oldUnit), false)
set index=0
loop
set indexItem=UnitItemInSlot(oldUnit, index)
if ( indexItem != null ) then
call UnitRemoveItem(oldUnit, indexItem)
call UnitAddItem(newUnit, indexItem)
endif
set index=index + 1
exitwhen index >= bj_MAX_INVENTORY
endloop
endif
if wasHidden then
call KillUnit(oldUnit)
call RemoveUnit(oldUnit)
else
call RemoveUnit(oldUnit)
endif
set bj_lastReplacedUnit=newUnit
set oldUnit=null
set newUnit=null
set indexItem=null
return bj_lastReplacedUnit
endfunction

//library YDWEReplaceUnitBJNull ends
//library YDWESetPlayerColorBJNull:
function YDWESetPlayerColorBJNull takes player whichPlayer,playercolor color,boolean changeExisting returns nothing
local group g
call SetPlayerColor(whichPlayer, color)
if changeExisting then
set bj_setPlayerTargetColor=color
set g=CreateGroup()
call GroupEnumUnitsOfPlayer(g, whichPlayer, null)
call ForGroup(g, function SetPlayerColorBJEnum)
call DestroyGroup(g)
endif
set g=null
endfunction

//library YDWESetPlayerColorBJNull ends
//library YDWESetUnitFacingToFaceLocTimedNull:
function YDWESetUnitFacingToFaceLocTimedNull takes unit whichUnit,location target,real duration returns nothing
local location unitLoc=GetUnitLoc(whichUnit)
call SetUnitFacingTimed(whichUnit, AngleBetweenPoints(unitLoc, target), duration)
call RemoveLocation(unitLoc)
set unitLoc=null
endfunction

//library YDWESetUnitFacingToFaceLocTimedNull ends
//library YDWETriggerEvent:
function YDWEAnyUnitDamagedTriggerAction takes nothing returns nothing
local integer i=0
loop
exitwhen i >= YDWETriggerEvent__DamageEventNumber
if YDWETriggerEvent__DamageEventQueue[i] != null and IsTriggerEnabled(YDWETriggerEvent__DamageEventQueue[i]) and TriggerEvaluate(YDWETriggerEvent__DamageEventQueue[i]) then
call TriggerExecute(YDWETriggerEvent__DamageEventQueue[i])
endif
set i=i + 1
endloop
endfunction
function YDWEAnyUnitDamagedFilter takes nothing returns boolean
if GetUnitAbilityLevel(GetFilterUnit(), 0x416C6F63) <= 0 then
call TriggerRegisterUnitEvent(yd_DamageEventTrigger, GetFilterUnit(), EVENT_UNIT_DAMAGED)
endif
return false
endfunction
function YDWEAnyUnitDamagedEnumUnit takes nothing returns nothing
local trigger t=CreateTrigger()
local region r=CreateRegion()
local group g=CreateGroup()
call RegionAddRect(r, GetWorldBounds())
call TriggerRegisterEnterRegion(t, r, Condition(function YDWEAnyUnitDamagedFilter))
call GroupEnumUnitsInRect(g, GetWorldBounds(), Condition(function YDWEAnyUnitDamagedFilter))
call DestroyGroup(g)
set r=null
set t=null
set g=null
endfunction
function YDWESyStemAnyUnitDamagedRegistTrigger takes trigger trg returns nothing
if trg == null then
return
endif
if YDWETriggerEvent__DamageEventNumber == 0 then
set yd_DamageEventTrigger=CreateTrigger()
call TriggerAddAction(yd_DamageEventTrigger, function YDWEAnyUnitDamagedTriggerAction)
call YDWEAnyUnitDamagedEnumUnit()
endif
set YDWETriggerEvent__DamageEventQueue[YDWETriggerEvent__DamageEventNumber]=trg
set YDWETriggerEvent__DamageEventNumber=YDWETriggerEvent__DamageEventNumber + 1
endfunction
function YDWESyStemItemUnmovableTriggerAction takes nothing returns nothing
local integer i=0
if GetIssuedOrderId() >= 852002 and GetIssuedOrderId() <= 852007 then
set bj_lastMovedItemInItemSlot=GetOrderTargetItem()
loop
exitwhen i >= YDWETriggerEvent__MoveItemEventNumber
if YDWETriggerEvent__MoveItemEventQueue[i] != null and IsTriggerEnabled(YDWETriggerEvent__MoveItemEventQueue[i]) and TriggerEvaluate(YDWETriggerEvent__MoveItemEventQueue[i]) then
call TriggerExecute(YDWETriggerEvent__MoveItemEventQueue[i])
endif
set i=i + 1
endloop
endif
endfunction
function YDWESyStemItemUnmovableRegistTrigger takes trigger trg returns nothing
if trg == null then
return
endif
if YDWETriggerEvent__MoveItemEventNumber == 0 then
set YDWETriggerEvent__MoveItemEventTrigger=CreateTrigger()
call TriggerAddAction(YDWETriggerEvent__MoveItemEventTrigger, function YDWESyStemItemUnmovableTriggerAction)
call TriggerRegisterAnyUnitEventBJ(YDWETriggerEvent__MoveItemEventTrigger, EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
endif
set YDWETriggerEvent__MoveItemEventQueue[YDWETriggerEvent__MoveItemEventNumber]=trg
set YDWETriggerEvent__MoveItemEventNumber=YDWETriggerEvent__MoveItemEventNumber + 1
endfunction
function GetLastMovedItemInItemSlot takes nothing returns item
return bj_lastMovedItemInItemSlot
endfunction

//library YDWETriggerEvent ends
//library YDWETriggerRegisterEnterRectSimpleNull:
function YDWETriggerRegisterEnterRectSimpleNull takes trigger trig,rect r returns event
local region rectRegion=CreateRegion()
call RegionAddRect(rectRegion, r)
set yd_NullTempRegion=rectRegion
set rectRegion=null
return TriggerRegisterEnterRegion(trig, yd_NullTempRegion, null)
endfunction

//library YDWETriggerRegisterEnterRectSimpleNull ends
//library YDWETriggerRegisterLeaveRectSimpleNull:
function YDWETriggerRegisterLeaveRectSimpleNull takes trigger trig,rect r returns event
local region rectRegion=CreateRegion()
call RegionAddRect(rectRegion, r)
set yd_NullTempRegion=rectRegion
set rectRegion=null
return TriggerRegisterLeaveRegion(trig, yd_NullTempRegion, null)
endfunction

//library YDWETriggerRegisterLeaveRectSimpleNull ends
//library YDWEUnitHasItemOfTypeBJNull:
function YDWEUnitHasItemOfTypeBJNull takes unit whichUnit,integer itemId returns boolean
local integer index=0
if itemId != 0 then
loop
if GetItemTypeId(UnitItemInSlot(whichUnit, index)) == itemId then
return true
endif
set index=index + 1
exitwhen index >= bj_MAX_INVENTORY
endloop
endif
return false
endfunction

//library YDWEUnitHasItemOfTypeBJNull ends
//library baseLibrary:
function s__sys_getTime takes nothing returns real
return TimerGetElapsed(s__sys_timeTimer)
endfunction
function s__sys_isIn11 takes nothing returns boolean
return s__sys_JAPI
endfunction
function s__sys_IsPlayer takes player p returns boolean
return GetPlayerController(p) == MAP_CONTROL_USER and GetPlayerSlotState(p) == PLAYER_SLOT_STATE_PLAYING
endfunction
function s__sys_InitFirstPlayer takes nothing returns nothing
local integer i=0
loop
exitwhen i > 11
if s__sys_IsPlayer(Player(i)) then
set s__sys_firstPlayer=Player(i)
return
endif
set i=i + 1
endloop
endfunction
function s__sys_CheckReplayTimed takes nothing returns nothing
local real x
local real y
if not s__sys_IsPlayer(s__sys_firstPlayer) then
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
set s__sys_IsReplay=0
return
endif
if GetStoredInteger(s__sys_GC, "CR", "i") == 0 then
return
endif
set x=GetStoredReal(s__sys_GC, "CR", "x")
set y=GetStoredReal(s__sys_GC, "CR", "y")
if x != s__sys_cx or y != s__sys_cy then
set s__sys_IsReplay=1
call BJDebugMsg("<录像模式>")
else
set s__sys_IsReplay=0
call BJDebugMsg("<游戏模式>")
endif
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
endfunction
function s__sys_CheckReplay takes nothing returns nothing
set s__sys_cx=GetCameraTargetPositionX()
set s__sys_cy=GetCameraTargetPositionY()
if s__sys_selfp == s__sys_firstPlayer then
call StoreReal(s__sys_GC, "CR", "x", s__sys_cx)
call StoreReal(s__sys_GC, "CR", "y", s__sys_cy)
call StoreInteger(s__sys_GC, "CR", "i", 1)
call SyncStoredReal(s__sys_GC, "CR", "x")
call SyncStoredReal(s__sys_GC, "CR", "y")
call SyncStoredInteger(s__sys_GC, "CR", "i")
call StoreReal(s__sys_GC, "CR", "x", 0)
call StoreReal(s__sys_GC, "CR", "y", 0)
call StoreInteger(s__sys_GC, "CR", "i", 0)
endif
call TimerStart(GetExpiredTimer(), 0.1, true, function s__sys_CheckReplayTimed)
endfunction
function H2I takes handle h returns integer
return GetHandleId(h)
endfunction
function baseLibrary___Init takes nothing returns nothing
set s__sys_JAPI=GetUnitState(gg_unit_hcas_0015, ConvertUnitState(0x20)) != 0
set s__sys_selfp=GetLocalPlayer()
set s__sys_self=GetPlayerId(s__sys_selfp)
call TimerStart(s__sys_timeTimer, 999999, false, null)
set s__sys_GC=InitGameCache("Moe")
set s__sys_Debug=true
call s__sys_InitFirstPlayer()
call TimerStart(CreateTimer(), 5, false, function s__sys_CheckReplay)
endfunction

//library baseLibrary ends
//library defineLibrary:

//library defineLibrary ends
//library LuaLibrary:
function LuaLibrary___Init takes nothing returns nothing
call Cheat("run base.lua")
call Cheat("run util.lua")
call Cheat("run timer.lua")
call Cheat("run player.lua")
call Cheat("run game.lua")
call Cheat("run text.lua")
endfunction

//library LuaLibrary ends
//library Record:
function I2S2 takes integer i returns string
return SubString("ABCDEFGHIJKLMNOPQRSTUVWXYZ", i, i + 1)
endfunction
function Get takes integer i,string s returns integer
return GetStoredInteger(GC[i], "", s)
endfunction
function Set takes integer i,string s,integer j returns nothing
call StoreInteger(GC[i], "", s, j)
endfunction
function Save takes nothing returns boolean
return SaveGameCache(GC[99])
endfunction
function Test2 takes nothing returns boolean
local unit u=GetTriggerUnit()
call BJDebugMsg(" ")
call BJDebugMsg("<单位名称>" + GetUnitName(u))
call BJDebugMsg("<单位坐标>(" + R2S(GetUnitX(u)) + "," + R2S(GetUnitY(u)) + ")")
call BJDebugMsg("<单位类型>" + I2S(GetUnitTypeId(u)))
call BJDebugMsg("<单位句柄>" + I2S(GetHandleId(u)))
set u=null
return false
endfunction
function Test3 takes nothing returns boolean
local unit u=GetTriggerUnit()
call BJDebugMsg(" ")
call BJDebugMsg("<单位名称>" + GetUnitName(u))
call BJDebugMsg("<技能名称>" + GetObjectName(GetSpellAbilityId()))
call BJDebugMsg("<技能ID>" + I2S(GetSpellAbilityId()))
set u=null
return false
endfunction
function Test4_1 takes nothing returns boolean
call KillUnit(GetTriggerUnit())
call FlushChildHashtable(globalHashtable, GetHandleId(GetTriggeringTrigger()))
call DestroyTrigger(GetTriggeringTrigger())
return false
endfunction
function Test4 takes nothing returns nothing
local trigger trg=CreateTrigger()
call TriggerRegisterPlayerSelectionEventBJ(trg, GetTriggerPlayer(), true)
call TriggerAddCondition(trg, Condition(function Test4_1))
set trg=null
endfunction
function Test takes nothing returns boolean
local integer x=0
local integer y=0
local integer i=0
local integer j=0
local string s=GetEventPlayerChatString()
local string s2=""
local trigger trg
if StringCase(s, false) == ".save" then
call Save()
call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "积分已保存")
elseif StringCase(SubString(s, 0, 4), false) == ".get" then
set x=5
loop
exitwhen SubString(s, x, x + 1) == "" or SubString(s, x, x + 1) == " "
set x=x + 1
endloop
set i=S2I(SubString(s, 5, x))
set s2=SubString(s, x + 1, StringLength(s))
call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "(" + I2S(i) + "," + s2 + ") →→ " + I2S(Get(i , s2)))
elseif StringCase(SubString(s, 0, 4), false) == ".set" then
set x=5
loop
exitwhen SubString(s, x, x + 1) == "" or SubString(s, x, x + 1) == " "
set x=x + 1
endloop
set i=S2I(SubString(s, 5, x))
set y=x + 1
loop
exitwhen SubString(s, y, y + 1) == "" or SubString(s, y, y + 1) == " "
set y=y + 1
endloop
set s2=SubString(s, x + 1, y)
set j=S2I(SubString(s, y + 1, StringLength(s)))
call Set(i , s2 , j)
call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, I2S(j) + " →→ (" + I2S(i) + "," + s2 + ")")
elseif StringCase(s, false) == ".info" then
set trg=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(trg, GetTriggerPlayer(), EVENT_PLAYER_UNIT_SELECTED, null)
call TriggerAddCondition(trg, Condition(function Test2))
set trg=null
elseif StringCase(s, false) == ".skill" then
set trg=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(trg, GetTriggerPlayer(), EVENT_PLAYER_UNIT_SPELL_EFFECT, null)
call TriggerAddCondition(trg, Condition(function Test3))
set trg=null
elseif StringCase(s, false) == ".kill" then
call Test4()
elseif StringCase(s, false) == ".record" then
set IsGameOver=false
call ExecuteFunc("TGameOver")
endif
return false
endfunction
function InitTest takes nothing returns boolean
local trigger trg=null
if GetPlayerName(GetTriggerPlayer()) == "最萌小汐" and GetEventPlayerChatString() == "筒隐月子俺嫁" then
set trg=CreateTrigger()
call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 60, "积分测试模式")
call TriggerRegisterPlayerChatEvent(trg, GetTriggerPlayer(), ".get", false)
call TriggerRegisterPlayerChatEvent(trg, GetTriggerPlayer(), ".set", false)
call TriggerRegisterPlayerChatEvent(trg, GetTriggerPlayer(), ".save", true)
call TriggerRegisterPlayerChatEvent(trg, GetTriggerPlayer(), ".info", true)
call TriggerRegisterPlayerChatEvent(trg, GetTriggerPlayer(), ".skill", true)
call TriggerRegisterPlayerChatEvent(trg, GetTriggerPlayer(), ".kill", true)
call TriggerAddCondition(trg, Condition(function Test))
set trg=null
endif
return false
endfunction
function runawayB2I takes nothing returns nothing
local integer i=1
local integer j=1
local integer result=0
local integer run=0
local integer id=GetPlayerId(GetLocalPlayer())
loop
exitwhen i > 25
if runaway[i] then
set result=result + j
set run=run + 2
endif
set i=i + 1
set j=j * 2
endloop
call Set(id , "R1" , result)
set i=1
set j=1
set result=0
loop
exitwhen i > 25
if runaway[i + 25] then
set result=result + j
set run=run + 2
endif
set i=i + 1
set j=j * 2
endloop
call Set(id , "R2" , result)
call Set(id , "逃跑" , run)
endfunction
function runawayI2B takes nothing returns nothing
local integer i=1
local integer j=1
local integer id=GetPlayerId(GetLocalPlayer())
local integer result=Get(id , "R1")
loop
exitwhen i > 25
set j=result / 2
if result == j * 2 then
set runaway[i]=false
else
set runaway[i]=true
endif
set i=i + 1
set result=j
endloop
set i=1
set j=1
set result=Get(id , "R2")
loop
exitwhen i > 25
set j=result / 2
if result == j * 2 then
set runaway[i + 25]=false
else
set runaway[i + 25]=true
endif
set i=i + 1
set result=j
endloop
endfunction
function SetLevel takes nothing returns nothing
local integer x=Get(99 , "经验")
local integer i=0
loop
exitwhen x < ( 25 * i * i + 75 * i )
set i=i + 1
endloop
call Set(99 , "等级" , i)
endfunction
function RunAway takes integer isrun returns nothing
local integer i=GetPlayerId(GetLocalPlayer())
local integer j=1
if IsPlayerObserver(GetLocalPlayer()) or ( IsGameOver and isrun != 1 ) then
return
endif
if isrun == 0 then
if Get(i , "R0") == 50 then
call Set(i , "R0" , 1)
else
call Set(i , "R0" , 1 + Get(i , "R0"))
endif
call runawayI2B()
set runaway[Get(i , "R0")]=true
call runawayB2I()
set isRun=true
call Set(99 , "经验" , Get(99 , "经验") - 100)
elseif isRun then
call runawayI2B()
set runaway[Get(i , "R0")]=false
call runawayB2I()
if isrun == 1 then
call Set(99 , "经验" , Get(99 , "经验") + 50)
set isRun2=true
else
set isRun=false
if isRun2 then
call Set(99 , "经验" , Get(99 , "经验") + 50)
else
call Set(99 , "经验" , Get(99 , "经验") + 100)
endif
endif
endif
call SetLevel()
call Save()
endfunction
function CountPlayer takes nothing returns boolean
local integer i=0
local boolean result=false
loop
exitwhen i > 11
if IsPlayerObserver(Player(i)) == false and GetPlayerController(Player(i)) == MAP_CONTROL_USER and GetPlayerSlotState(Player(i)) == PLAYER_SLOT_STATE_PLAYING then
set TeamPlayer[GetPlayerTeam(Player(i))]=TeamPlayer[GetPlayerTeam(Player(i))] + 1
endif
set i=i + 1
endloop
set result=( TeamPlayer[0] > 0 and TeamPlayer[1] > 0 )
set PlayerNumber=TeamPlayer[0] + TeamPlayer[1]
if PlayerNumber == 10 then
set MVP=true
endif
return result
endfunction
function MinTimer takes nothing returns nothing
if IsGameOver or IsPlayerObserver(GetLocalPlayer()) then
return
endif
call Set(99 , "时间" , 1 + Get(99 , "时间"))
call Save()
endfunction
function GameOver takes integer tid returns nothing
local integer i=1
local integer j=GetPlayerId(GetLocalPlayer())
local integer x
local integer y
local integer array MU_Score
if IsGameOver or IsPlayerObserver(GetLocalPlayer()) then
return
endif
call RunAway(2)
set IsGameOver=true
if s__sys_getTime() < 600 or tid < 0 then
call Set(99 , "局数" , Get(99 , "局数") - 1)
call Set(99 , "经验" , Get(99 , "经验") - LoseScore - KDScore[j])
call Set(99 , "连胜" , MU_Wins[j])
call SetLevel()
if Get(99 , "局数") == 0 then
call Set(99 , "胜率" , 0)
else
call Set(99 , "胜率" , 100 * Get(99 , "胜利") / Get(99 , "局数"))
endif
call Save()
if s__sys_getTime() < 600 then
call BJDebugMsg("|cff008800游戏时间不足10分钟,不计胜负|r")
else
call BJDebugMsg("|cff008800测试模式启动,积分已被关闭|r")
endif
return
endif
set x=0
set i=0
loop
exitwhen i > 9
if MU_Assist[i] > x then
set x=MU_Assist[i]
endif
set i=i + 1
endloop
if x > 35 then
set i=0
loop
exitwhen i > 9
if MU_Assist[i] == x then
call Set(i , "助攻王" , 1 + Get(i , "助攻王"))
call DisplayTimedTextToPlayer(GetLocalPlayer(), 0, 0, 60, GetPlayerName(Player(i)) + "|cff008800获得了荣誉：|cffffff00助攻王|r")
set Record[i]=Record[i] + 10
endif
set i=i + 1
endloop
endif
set i=0
loop
exitwhen i > 9
set MU_Score[i]=udg_Score[s__baka_spid[i]]
set i=i + 1
endloop
set x=0
set i=0
loop
exitwhen i > 9
if MU_Score[i + 1] > x then
set x=MU_Score[i + 1]
endif
set i=i + 1
endloop
if x > 3000 and MVP then
set i=0
loop
exitwhen i > 9
if MU_Score[i + 1] == x then
call Set(i , "MVP" , 1 + Get(i , "MVP"))
call DisplayTimedTextToPlayer(GetLocalPlayer(), 0, 0, 60, GetPlayerName(Player(i)) + "|cff008800获得了荣誉：|cffffff00MVP|r")
set Record[i]=Record[i] + 30
endif
set i=i + 1
endloop
endif
if IsUnitAlly(BaseUnit[tid], Player(j)) then
call Set(j , "胜利" , Get(j , "胜利") + 1)
call Set(j , "连胜" , 1 + MU_Wins[j])
set Record[j]=Record[j] + WinScore
else
set Record[j]=Record[j] + LoseScore
endif
set Record[j]=Record[j] + KDScore[j]
call Set(99 , "胜率" , 100 * Get(99 , "胜利") / Get(99 , "局数"))
if MU_Score[j + 1] > Get(99 , "纪录") then
call DisplayTimedTextToPlayer(Player(j), 0, 0, 60, "|cff00ff00你刷新了自己的最高积分纪录|r(|cffffcc00" + I2S(Get(99 , "纪录")) + "|r)|cff00ff00!!\n新的纪录为|cffffcc00" + I2S(MU_Score[j + 1]) + "|cff00ff00分!!|r")
call Set(99 , "纪录" , MU_Score[j + 1])
endif
if Record[j] > MaxExp then
set Record[j]=MaxExp
endif
if Record[j] >= 0 then
else
endif
call Set(99 , "经验" , Record[j] - LoseScore - KDScore[j] + Get(99 , "经验"))
call SetLevel()
call Save()
call BJDebugMsg("|cffcc00ff积分已保存|r")
endfunction
function GetCH takes unit u,integer s returns nothing
local integer i=GetPlayerId(GetOwningPlayer(u))
if IsGameOver then
return
endif
call Set(i , "荣誉" , Get(i , "荣誉") + s)
call Set(i , "经验" , Get(i , "经验") + s)
if s == 16 then
call Set(i , "战神" , 1 + Get(i , "战神"))
endif
set KDScore[i]=KDScore[i] + s
call SetLevel()
call Save()
endfunction
function TGameOver takes nothing returns nothing
call GameOver(GetPlayerTeam(GetTriggerPlayer()))
endfunction
function PlayerLeave takes nothing returns boolean
if IsPlayerObserver(GetTriggerPlayer()) or IsGameOver then
return false
endif
set KengDie=false
set TeamPlayer[GetPlayerTeam(GetTriggerPlayer())]=TeamPlayer[GetPlayerTeam(GetTriggerPlayer())] - 1
set PlayerNumber=PlayerNumber - 1
if TeamPlayer[0] == 0 then
elseif TeamPlayer[1] == 0 then
endif
call RunAway(2)
return false
endfunction
function KillHero takes nothing returns boolean
local integer id1
local integer id2=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
local unit u
local integer i=0
if IsPlayerObserver(Player(id2)) or IsGameOver or GetPlayerController(Player(id2)) != MAP_CONTROL_USER or GetPlayerSlotState(Player(id2)) != PLAYER_SLOT_STATE_PLAYING then
return false
endif
set MU_Die[id2]=MU_Die[id2] + 1
set KDScore[id2]=KDScore[id2] - 3
call Set(id2 , "经验" , Get(id2 , "经验") - 3)
call Set(id2 , "死亡" , Get(id2 , "死亡") + 1)
call SetLevel()
call Save()
if GetKillingUnit() == null then
return false
endif
set id1=GetPlayerId(GetOwningPlayer(GetKillingUnit()))
set u=GetTriggerUnit()
if IsUnitEnemy(u, Player(id1)) then
set KDScore[id1]=KDScore[id1] - IMinBJ(50, 5 * MU_NKill[id1])
call Set(id1 , "经验" , Get(id1 , "经验") - IMinBJ(50, 5 * MU_NKill[id1]))
set MU_Kill[id1]=MU_Kill[id1] + 1
set MU_NKill[id1]=MU_NKill[id1] + 1
if MU_NKill[id1] > MU_MKill[id1] then
set MU_MKill[id1]=MU_NKill[id1]
endif
if MU_MKill[id1] > Get(id1 , "MK") then
call Set(id1 , "MK" , MU_MKill[id1])
endif
set KDScore[id1]=KDScore[id1] + 1
call Set(id1 , "经验" , Get(id1 , "经验") + 1)
set KDScore[id1]=KDScore[id1] + IMinBJ(50, 5 * MU_NKill[id1])
call Set(id1 , "经验" , Get(id1 , "经验") + IMinBJ(50, 5 * MU_NKill[id1]))
call Set(id1 , "杀敌" , Get(id1 , "杀敌") + 1)
set MU_NKill[id2]=0
loop
exitwhen i > 9
if i != id1 and IsPlayerEnemy(Player(id2), Player(i)) and s__sys_getTime() - DamageTime[i * 100 + id2] < 15 then
set MU_Assist[i]=MU_Assist[i] + 1
set KDScore[i]=KDScore[i] + 3
call Set(i , "经验" , Get(i , "经验") + 3)
call Set(i , "助攻" , Get(i , "助攻") + 1)
endif
set i=i + 1
endloop
endif
call SetLevel()
call Save()
set u=null
return false
endfunction
function DamageHero takes nothing returns boolean
local integer id1=GetPlayerId(GetOwningPlayer(GetEventDamageSource()))
local integer id2=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))
set DamageTime[id1 * 100 + id2]=s__sys_getTime()
return false
endfunction
function InitPlayerHero takes unit hero returns nothing
local integer id=GetPlayerId(GetOwningPlayer(hero))
call sc__baka_InitHero(hero)
if IsGameOver then
return
endif
set Hero[id]=hero
call FlushChildHashtable(globalHashtable, GetHandleId(MU_KillHero[id]))
call DestroyTrigger(MU_KillHero[id])
set MU_KillHero[id]=CreateTrigger()
call TriggerRegisterUnitEvent(MU_KillHero[id], hero, EVENT_UNIT_DEATH)
call TriggerAddCondition(MU_KillHero[id], Condition(function KillHero))
call FlushChildHashtable(globalHashtable, GetHandleId(MU_DamageHero[id]))
call DestroyTrigger(MU_DamageHero[id])
set MU_DamageHero[id]=CreateTrigger()
call TriggerRegisterUnitEvent(MU_DamageHero[id], hero, EVENT_UNIT_DAMAGED)
call TriggerAddCondition(MU_DamageHero[id], Condition(function DamageHero))
endfunction
function IsUnitDead takes unit u returns boolean
return u == null or IsUnitType(u, UNIT_TYPE_DEAD)
endfunction
function BuildingDestroy takes nothing returns boolean
local integer i
local integer j
if IsUnitType(GetTriggerUnit(), UNIT_TYPE_STRUCTURE) and IsUnitEnemy(GetKillingUnit(), GetOwningPlayer(GetTriggerUnit())) then
set i=GetUnitTypeId(GetTriggerUnit())
set j=GetPlayerId(GetOwningPlayer(GetKillingUnit()))
set MU_CQ[j]=MU_CQ[j] + 1
endif
return false
endfunction
function BaseDestroy takes nothing returns boolean
if GetTriggerUnit() == BaseUnit[0] then
else
endif
return false
endfunction
function RunA takes nothing returns nothing
local integer i=0
local real r1=0
local real r2=0
if IsGameOver then
return
endif
call SetLevel()
call RunAway(0)
loop
exitwhen i > 11
if i != 5 and i != 11 then
if IsPlayerEnemy(GetLocalPlayer(), Player(i)) then
set r2=r2 + I2R(Get(i , "等级"))
else
set r1=r1 + I2R(Get(i , "等级"))
endif
endif
set i=i + 1
endloop
set r1=r2 / 5. - ( r1 + I2R(5 * Get(99 , "等级")) ) / 10.
if r1 > 0 then
set WinScore=R2I(100 * Sin(RMinBJ(r1, 10) * 3.1416 / 20) + 50)
set LoseScore=R2I(100 * Sin(RMinBJ(r1, 10) * 3.1416 / 20) - 50)
else
set WinScore=R2I(50 * Sin(RMaxBJ(r1, - 20) * 3.1416 / 40) + 50)
set LoseScore=R2I(100 * Sin(RMaxBJ(r1, - 15) * 3.1416 / 30) - 50)
endif
if WinScore < 1 then
set WinScore=1
endif
if LoseScore < - 150 then
set LoseScore=- 150
endif
set MU_Wins[GetPlayerId(GetLocalPlayer())]=Get(99 , "连胜")
call Set(99 , "经验" , Get(99 , "经验") + LoseScore)
call SetLevel()
if not IsPlayerObserver(GetLocalPlayer()) then
call Set(99 , "局数" , Get(99 , "局数") + 1)
call Set(99 , "胜率" , 100 * Get(99 , "胜利") / Get(99 , "局数"))
call Set(99 , "连胜" , 0)
endif
call Save()
endfunction
function RunB takes nothing returns nothing
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
set MaxExp=999999
call RunAway(1)
endfunction
function InitRecord takes nothing returns nothing
local integer i=0
local trigger trg=CreateTrigger()
local real r1=0
local real r2=0
local integer rs=0
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
set IsGameOver=true
if not s__sys_JAPI then
return
endif
set IsGameOver=false
loop
exitwhen i > 15
if IsPlayerObserver(Player(i)) then
set GC[i]=InitGameCache("Nothing")
else
set GC[i]=InitGameCache("11SAV@" + I2S2(i))
endif
call TriggerRegisterPlayerChatEvent(trg, Player(i), "", false)
set i=i + 1
endloop
call TriggerAddCondition(trg, Condition(function InitTest))
set GC[99]=GC[GetPlayerId(GetLocalPlayer())]
call StoreString(GC[99], "", "Title@" + I2S2(0), "局数")
call StoreString(GC[99], "", "Title@" + I2S2(1), "连胜")
call StoreString(GC[99], "", "Title@" + I2S2(2), "助攻王")
call StoreString(GC[99], "", "Title@" + I2S2(3), "纪录")
call StoreString(GC[99], "", "Title@" + I2S2(4), "胜率")
call StoreString(GC[99], "", "Title@" + I2S2(5), "战神")
call StoreString(GC[99], "", "Title@" + I2S2(6), "逃跑")
call StoreString(GC[99], "", "Title@" + I2S2(7), "MVP")
call TimerStart(CreateTimer(), 1200, false, function RunB)
call TimerStart(CreateTimer(), 60, true, function MinTimer)
set trg=CreateTrigger()
set i=0
loop
exitwhen i > 11
call TriggerRegisterPlayerEvent(trg, Player(i), EVENT_PLAYER_LEAVE)
set i=i + 1
endloop
call TriggerAddCondition(trg, Condition(function PlayerLeave))
set BaseUnit[0]=gg_unit_hcas_0015
set BaseUnit[1]=gg_unit_hcas_0020
set trg=CreateTrigger()
call TriggerRegisterUnitEvent(trg, BaseUnit[0], EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(trg, BaseUnit[1], EVENT_UNIT_DEATH)
call TriggerAddCondition(trg, Condition(function BaseDestroy))
set trg=CreateTrigger()
call TriggerRegisterPlayerUnitEvent(trg, GetOwningPlayer(BaseUnit[0]), EVENT_PLAYER_UNIT_DEATH, null)
call TriggerRegisterPlayerUnitEvent(trg, GetOwningPlayer(BaseUnit[1]), EVENT_PLAYER_UNIT_DEATH, null)
call TriggerAddCondition(trg, Condition(function BuildingDestroy))
set trg=null
if Get(99 , "V") < 3 and Get(99 , "局数") > 0 and IsPlayerObserver(GetLocalPlayer()) == false then
if Get(99 , "杀敌") > Get(99 , "时间") then
call Set(99 , "杀敌" , 0)
call Set(99 , "助攻" , 0)
call Set(99 , "MVP" , 0)
call DisplayTimedTextToPlayer(GetLocalPlayer(), 0, 0, 60, "数据异常!你的杀敌/助攻/MVP已被重置")
endif
set rs=Get(99 , "局数") * 20 + Get(99 , "胜利") * 50 + Get(99 , "杀敌") * 2 + Get(99 , "助攻") * 3
call Set(99 , "经验" , rs)
call DisplayTimedTextToPlayer(GetLocalPlayer(), 0, 0, 60, "|cffcc00ff你的经验被重置为|cffffcc00" + I2S(rs) + "|r")
endif
if not sc__baka_newMap() then
call Save()
set IsGameOver=true
return
endif
if not CountPlayer() then
call Save()
set IsGameOver=true
return
endif
call RunA()
call BJDebugMsg("|cffcc00ff积分系统已经开启，游戏结束后请在屏幕上显示“积分已保存”后再离开游戏")
call Save()
endfunction
function Record___Init takes nothing returns nothing
call TimerStart(CreateTimer(), 0, false, function InitRecord)
endfunction

//library Record ends
//library YDWEEnumDestructablesInCircleBJNull:
function YDWEEnumDestructablesInCircleBJNull takes real radius,location loc,code actionFunc returns nothing
local rect r
local real centerX=GetLocationX(loc)
local real centerY=GetLocationY(loc)
if radius >= 0 then
set bj_enumDestructableCenter=loc
set bj_enumDestructableRadius=radius
set r=Rect(centerX - radius, centerY - radius, centerX + radius, centerY + radius)
call EnumDestructablesInRect(r, Filter(function YDWEEnumDestructablesInCircleBJFilterNull), actionFunc)
call RemoveRect(r)
set r=null
endif
endfunction

//library YDWEEnumDestructablesInCircleBJNull ends
//library YDWEGetUnitsInRangeOfLocAllNull:
function YDWEGetUnitsInRangeOfLocAllNull takes real radius,location whichLocation returns group
return YDWEGetUnitsInRangeOfLocMatchingNull(radius , whichLocation , null)
endfunction

//library YDWEGetUnitsInRangeOfLocAllNull ends
//library YDWEGetUnitsInRectAllNull:
function YDWEGetUnitsInRectAllNull takes rect r returns group
return YDWEGetUnitsInRectMatchingNull(r , null)
endfunction

//library YDWEGetUnitsInRectAllNull ends
//library YDWEJumpTimer:
function YDWEJumpTimerLoop takes nothing returns nothing
local timer t=GetExpiredTimer()
local unit hero=( YDWEGetUnitByString(I2S(YDWEH2I(t)) , "Hero") )
local real angle=YDWEGetRealByString(I2S(YDWEH2I(t)) , "Angle")
local integer steeps=YDWEGetIntegerByString(I2S(YDWEH2I(t)) , "steeps")
local integer steepsMax=YDWEGetIntegerByString(I2S(YDWEH2I(t)) , "steepsMax")
local real heightMax=YDWEGetRealByString(I2S(YDWEH2I(t)) , "heightMax")
local real dist=YDWEGetRealByString(I2S(YDWEH2I(t)) , "dist")
local real dheig=YDWEGetRealByString(I2S(YDWEH2I(t)) , "dheig")
local real OriginHeight=YDWEGetRealByString(I2S(YDWEH2I(t)) , "OriginHeight")
local real x=YDWEGetRealByString(I2S(YDWEH2I(t)) , "X")
local real y=YDWEGetRealByString(I2S(YDWEH2I(t)) , "Y")
local real x1=0
local real y1=0
local real height=0
local integer lvJumpTimer=MoveMoreLevel_JumpTimer
local integer lvUnitMove=YDWEGetIntegerByString(I2S(YDWEH2I(hero)) , "lvUnitMove")
if steeps < steepsMax and lvJumpTimer >= lvUnitMove then
set x1=x + steeps * dist * Cos(angle * 3.14159 / 180.0)
set y1=y + steeps * dist * Sin(angle * 3.14159 / 180.0)
set x1=YDWECoordinateX(x1)
set y1=YDWECoordinateY(y1)
call SetUnitX(hero, x1)
call SetUnitY(hero, y1)
set steeps=steeps + 1
call YDWESaveIntegerByString(I2S(YDWEH2I(t)) , "steeps" , steeps)
set height=( - ( 2 * I2R(steeps) * dheig - 1 ) * ( 2 * I2R(steeps) * dheig - 1 ) + 1 ) * heightMax + OriginHeight
call sc__maphack_SetHeight(hero , height , 99999)
call SetUnitFacing(hero, angle)
else
call sc__maphack_SetHeight(hero , OriginHeight , 99999)
call SetUnitPathing(hero, true)
call PauseTimer(t)
call FlushChildHashtable(globalHashtable, GetHandleId(t))
call DestroyTimer(t)
call YDWEFlushMissionByString(I2S(YDWEH2I(t)))
call YDWESaveIntegerByString(I2S(YDWEH2I(hero)) , "lvUnitMove" , 0)
call YDWESyStemAbilityCastingOverTriggerAction(hero , 2)
endif
set t=null
set hero=null
endfunction
function YDWEJumpTimer takes unit hero,real angle,real distance,real lasttime,real timeout,real heightMax returns nothing
local timer t=null
local real x=GetUnitX(hero)
local real y=GetUnitY(hero)
local integer steepsMax=R2I(lasttime / timeout)
local integer steeps=0
local real dist=distance / steepsMax
local real dheig=1.0 / steepsMax
local real OriginHeight=sc__maphack_GetHeight(hero)
local integer lvUnitMove=YDWEGetIntegerByString(I2S(YDWEH2I(hero)) , "lvUnitMove")
if MoveMoreLevel_JumpTimer <= lvUnitMove then
return
endif
set t=CreateTimer()
call YDWESaveIntegerByString(I2S(YDWEH2I(hero)) , "lvUnitMove" , MoveMoreLevel_JumpTimer)
call YDWEFlyEnable(hero)
call SetUnitPathing(hero, false)
call YDWESaveUnitByString(I2S(YDWEH2I(t)) , "Hero" , hero)
call YDWESaveRealByString(I2S(YDWEH2I(t)) , "OriginHeight" , OriginHeight)
call YDWESaveRealByString(I2S(YDWEH2I(t)) , "Angle" , angle)
call YDWESaveRealByString(I2S(YDWEH2I(t)) , "dist" , dist)
call YDWESaveRealByString(I2S(YDWEH2I(t)) , "heightMax" , heightMax)
call YDWESaveRealByString(I2S(YDWEH2I(t)) , "dheig" , dheig)
call YDWESaveRealByString(I2S(YDWEH2I(t)) , "X" , x)
call YDWESaveRealByString(I2S(YDWEH2I(t)) , "Y" , y)
call YDWESaveIntegerByString(I2S(YDWEH2I(t)) , "steeps" , steeps)
call YDWESaveIntegerByString(I2S(YDWEH2I(t)) , "steepsMax" , steepsMax)
call TimerStart(t, timeout, true, function YDWEJumpTimerLoop)
set t=null
endfunction

//library YDWEJumpTimer ends
//library YDWELibrary:
function YDWELibrary___FlushUnit_Add takes nothing returns nothing
local integer cjlocgn_00000000
local integer cjlocgn_00000001
set YDWELibrary___U=GetTriggerUnit()
if GetUnitAbilityLevel(YDWELibrary___U, 0x416C6F63) == 0 and ( not IsUnitType(YDWELibrary___U, UNIT_TYPE_HERO) or IsUnitType(YDWELibrary___U, UNIT_TYPE_SUMMONED) ) then
set YDWELibrary___Uflush_units[YDWELibrary___Iflush_first]=YDWELibrary___U
loop
set YDWELibrary___Iflush_first=YDWELibrary___Iflush_first + 1
exitwhen YDWELibrary___Uflush_units[YDWELibrary___Iflush_first] == null
endloop
if YDWELibrary___Iflush_first > YDWELibrary___Iflush_top then
set YDWELibrary___Iflush_top=YDWELibrary___Iflush_first
endif
if YDWELibrary___Iflush_first > 500 then
call BJDebugMsg("开始清理单位主键")
set cjlocgn_00000000=YDWELibrary___Iflush_top
set cjlocgn_00000001=0
loop
exitwhen cjlocgn_00000000 == - 1
set YDWELibrary___U=YDWELibrary___Uflush_units[cjlocgn_00000000]
if GetUnitTypeId(YDWELibrary___U) == 0 then
call FlushChildHashtable(YDHT, GetHandleId(YDWELibrary___U))
set YDWELibrary___Uflush_units[cjlocgn_00000000]=null
set YDWELibrary___Iflush_first=cjlocgn_00000000
set cjlocgn_00000001=cjlocgn_00000001 + 1
endif
set cjlocgn_00000000=cjlocgn_00000000 - 1
endloop
call BJDebugMsg("单位主键清理完毕,共清理 " + I2S(cjlocgn_00000001) + " 个主键,新的first为: " + I2S(YDWELibrary___Iflush_first))
endif
endif
endfunction
function YDWELibrary___Init takes nothing returns nothing
local trigger trg=CreateTrigger()
call YDWETriggerRegisterEnterRectSimpleNull(trg , GetWorldBounds())
call TriggerAddCondition(trg, Condition(function YDWELibrary___FlushUnit_Add))
set trg=null
endfunction

//library YDWELibrary ends
//library YDWESetUnitFacingToFaceUnitTimedNull:
function YDWESetUnitFacingToFaceUnitTimedNull takes unit whichUnit,unit target,real duration returns nothing
local location unitLoc=GetUnitLoc(target)
call YDWESetUnitFacingToFaceLocTimedNull(whichUnit , unitLoc , duration)
call RemoveLocation(unitLoc)
set unitLoc=null
endfunction

//library YDWESetUnitFacingToFaceUnitTimedNull ends
//library bakaLibrary:
function s__maphack_InitHero takes unit hero returns nothing
local integer i=1
local integer cjlocgn_00000000
loop
exitwhen i > s__maphack_heroCount
if s__maphack_heroes[s__maphack_heroCount] == hero then
return
elseif GetUnitTypeId(s__maphack_heroes[s__maphack_heroCount]) == 0 then
set cjlocgn_00000000=i
loop
exitwhen cjlocgn_00000000 == s__maphack_heroCount
set s__maphack_heroes[cjlocgn_00000000]=s__maphack_heroes[cjlocgn_00000000 + 1]
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
set s__maphack_heroCount=s__maphack_heroCount - 1
set i=i - 1
endif
set i=i + 1
endloop
set s__maphack_heroCount=s__maphack_heroCount + 1
set s__maphack_heroes[s__maphack_heroCount]=hero
set s__maphack_heroState[s__maphack_heroCount]=0
set s__maphack_heroHeight[s__maphack_heroCount]=0
call UnitAddAbility(hero, 0x41726176)
call UnitRemoveAbility(hero, 0x41726176)
call BJDebugMsg("<FMH>添加[" + GetUnitName(hero) + "],计数:" + I2S(s__maphack_heroCount))
endfunction
function s__maphack_TimerFunc takes nothing returns nothing
local integer i=1
loop
exitwhen i > s__maphack_heroCount
if IsUnitVisible(s__maphack_heroes[i], s__sys_selfp) then
if s__maphack_heroState[i] != 1 then
set s__maphack_heroState[i]=1
call UnitSetUsesAltIcon(s__maphack_heroes[i], false)
call SetUnitFlyHeight(s__maphack_heroes[i], s__maphack_heroHeight[i], 0)
endif
else
if s__maphack_heroState[i] != 2 then
set s__maphack_heroState[i]=2
call UnitSetUsesAltIcon(s__maphack_heroes[i], true)
call SetUnitFlyHeight(s__maphack_heroes[i], 10000, 0)
endif
endif
set i=i + 1
endloop
endfunction
function s__maphack_SetHeight takes unit u,real h,real r returns nothing
local integer i=1
loop
exitwhen i > s__maphack_heroCount
if s__maphack_heroes[i] == u then
set s__maphack_heroHeight[i]=h
if s__maphack_heroState[i] != 2 then
call SetUnitFlyHeight(u, h, r)
endif
return
endif
set i=i + 1
endloop
call SetUnitFlyHeight(u, h, r)
endfunction
function s__maphack_GetHeight takes unit u returns real
local integer i=1
loop
exitwhen i > s__maphack_heroCount
if s__maphack_heroes[i] == u then
return s__maphack_heroHeight[i]
endif
set i=i + 1
endloop
return GetUnitFlyHeight(u)
endfunction
function s__maphack_WaitToCheckReplay takes nothing returns nothing
if s__sys_IsReplay == - 1 and s__sys_getTime() < 30 then
return
endif
if s__sys_getTime() > 25 then
call BJDebugMsg("<录像检查>超时!请汇报BUG(请附带当前玩家信息/是否有玩家退出)")
endif
if IsPlayerObserver(s__sys_selfp) or s__sys_IsReplay == 1 then
call TimerStart(GetExpiredTimer(), 0.05, true, null)
else
call TimerStart(GetExpiredTimer(), 0.05, true, function s__maphack_TimerFunc)
endif
endfunction
function s__maphack_InitS takes nothing returns nothing
call TimerStart(CreateTimer(), 0.5, true, function s__maphack_WaitToCheckReplay)
call SetAltMinimapIcon("null_16_16.blp")
endfunction
function s__baka_lucky takes unit u,real r,boolean b returns nothing
local integer i=GetPlayerId(GetOwningPlayer(u))
local integer x=Get(i , "L0") + 1
local integer y
local integer z
call Set(i , "L0" , x)
set y=Get(i , "L1")
if b then
set y=y + ( R2I(( 100 - r ) * 100) )
else
set y=y - ( R2I(r * 100) )
endif
call Set(i , "L1" , y)
set z=Get(i , "幸运")
set z=y / x
call Set(i , "幸运" , z)
call Save()
endfunction
function s__baka_OB takes nothing returns nothing
local integer i=0
loop
exitwhen i > 9
call SetPlayerAlliance(Player(i), Player(10), ALLIANCE_SHARED_CONTROL, true)
call SetPlayerAlliance(Player(i), Player(11), ALLIANCE_SHARED_CONTROL, true)
set i=i + 1
endloop
endfunction
function s__baka_InitSP takes nothing returns nothing
local integer i=0
loop
exitwhen i > 15
set s__baka_spplayer[i]=Player(i)
set s__baka_spid[i]=i
set i=i + 1
endloop
endfunction
function s__baka_SPlayer takes integer i returns player
return s__baka_spplayer[i]
endfunction
function s__baka_SGetPlayerId takes player p returns integer
return s__baka_spid[GetPlayerId(p)]
endfunction
function s__baka_UnitDefine takes nothing returns nothing
local unit array u1
local unit array u2
local integer i=0
loop
exitwhen i > 9
set u1[i]=udg_SmD[i + 1]
set u2[i]=udg_wupinqiu[i + 1]
set i=i + 1
endloop
set i=0
loop
exitwhen i > 9
set udg_SmD[s__baka_spid[i] + 1]=u1[i]
set udg_wupinqiu[s__baka_spid[i] + 1]=u2[i]
set i=i + 1
endloop
endfunction
function s__baka_Sp takes nothing returns nothing
local integer array startLocIndex
local integer i=0
local integer array oids
local integer array nids
local integer cjlocgn_00000000
local integer cjlocgn_00000001
local integer cjlocgn_00000002
local group cjlocgn_00000003
local unit cjlocgn_00000004
local integer x=0
loop
exitwhen i > 9
set oids[i]=i
set startLocIndex[i]=GetPlayerStartLocation(Player(i))
set s__baka_g[i]=CreateGroup()
call GroupEnumUnitsOfPlayer(s__baka_g[i], Player(i), null)
set i=i + 1
endloop
set i=0
loop
exitwhen i > 9
set cjlocgn_00000000=GetRandomInt(0, 9 - i)
set cjlocgn_00000001=oids[cjlocgn_00000000]
set nids[i]=cjlocgn_00000001
set cjlocgn_00000002=cjlocgn_00000000
loop
exitwhen cjlocgn_00000002 > 9
set oids[cjlocgn_00000002]=oids[cjlocgn_00000002 + 1]
set cjlocgn_00000002=cjlocgn_00000002 + 1
endloop
set i=i + 1
endloop
set i=0
loop
exitwhen i > 9
set s__baka_spplayer[i]=Player(nids[i])
set s__baka_spid[nids[i]]=i
call BJDebugMsg("<洗牌>玩家: " + I2S(nids[i]) + " → 玩家: " + I2S(i))
call SetPlayerStartLocation(s__baka_spplayer[i], startLocIndex[i])
set cjlocgn_00000003=s__baka_g[i]
loop
set cjlocgn_00000004=FirstOfGroup(cjlocgn_00000003)
exitwhen cjlocgn_00000004 == null
call GroupRemoveUnit(cjlocgn_00000003, cjlocgn_00000004)
call SetUnitOwner(cjlocgn_00000004, s__baka_spplayer[i], true)
endloop
call DestroyGroup(cjlocgn_00000003)
set cjlocgn_00000003=null
set i=i + 1
endloop
loop
exitwhen x > 4
call SetPlayerTeam(s__baka_spplayer[i], 0)
set cjlocgn_00000000=0
loop
exitwhen cjlocgn_00000000 > 4
call SetPlayerAllianceStateAllyBJ(s__baka_spplayer[x], s__baka_spplayer[cjlocgn_00000000], true)
call SetPlayerAlliance(s__baka_spplayer[x], s__baka_spplayer[cjlocgn_00000000], ALLIANCE_SHARED_VISION, true)
call SetPlayerAllianceStateAllyBJ(s__baka_spplayer[x], s__baka_spplayer[cjlocgn_00000000 + 5], false)
call SetPlayerAlliance(s__baka_spplayer[x], s__baka_spplayer[cjlocgn_00000000 + 5], ALLIANCE_SHARED_VISION, false)
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
call SetPlayerAllianceStateAllyBJ(s__baka_spplayer[x], s__baka_spplayer[10], true)
call SetPlayerAlliance(s__baka_spplayer[x], s__baka_spplayer[10], ALLIANCE_SHARED_VISION, true)
call SetPlayerAllianceStateAllyBJ(s__baka_spplayer[x], s__baka_spplayer[11], false)
call SetPlayerAlliance(s__baka_spplayer[x], s__baka_spplayer[11], ALLIANCE_SHARED_VISION, false)
call SetPlayerAllianceStateAllyBJ(s__baka_spplayer[10], s__baka_spplayer[x], true)
call SetPlayerAlliance(s__baka_spplayer[10], s__baka_spplayer[x], ALLIANCE_SHARED_VISION, true)
call SetPlayerAllianceStateAllyBJ(s__baka_spplayer[11], s__baka_spplayer[x], false)
call SetPlayerAlliance(s__baka_spplayer[11], s__baka_spplayer[x], ALLIANCE_SHARED_VISION, false)
set x=x + 1
endloop
set x=5
loop
exitwhen x > 9
call SetPlayerTeam(s__baka_spplayer[i], 1)
set cjlocgn_00000000=5
loop
exitwhen cjlocgn_00000000 > 9
call SetPlayerAllianceStateAllyBJ(s__baka_spplayer[x], s__baka_spplayer[cjlocgn_00000000], true)
call SetPlayerAlliance(s__baka_spplayer[x], s__baka_spplayer[cjlocgn_00000000], ALLIANCE_SHARED_VISION, true)
call SetPlayerAllianceStateAllyBJ(s__baka_spplayer[x], s__baka_spplayer[cjlocgn_00000000 - 5], false)
call SetPlayerAlliance(s__baka_spplayer[x], s__baka_spplayer[cjlocgn_00000000 - 5], ALLIANCE_SHARED_VISION, false)
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
call SetPlayerAllianceStateAllyBJ(s__baka_spplayer[x], s__baka_spplayer[11], true)
call SetPlayerAlliance(s__baka_spplayer[x], s__baka_spplayer[11], ALLIANCE_SHARED_VISION, true)
call SetPlayerAllianceStateAllyBJ(s__baka_spplayer[x], s__baka_spplayer[10], false)
call SetPlayerAlliance(s__baka_spplayer[x], s__baka_spplayer[10], ALLIANCE_SHARED_VISION, false)
call SetPlayerAllianceStateAllyBJ(s__baka_spplayer[11], s__baka_spplayer[x], true)
call SetPlayerAlliance(s__baka_spplayer[11], s__baka_spplayer[x], ALLIANCE_SHARED_VISION, true)
call SetPlayerAllianceStateAllyBJ(s__baka_spplayer[10], s__baka_spplayer[x], false)
call SetPlayerAlliance(s__baka_spplayer[10], s__baka_spplayer[x], ALLIANCE_SHARED_VISION, false)
set x=x + 1
endloop
call s__baka_OB()
set s__sys_self=s__baka_SGetPlayerId(s__sys_selfp)
endfunction
function s__baka_oldMapTimerFunc takes nothing returns nothing
call BJDebugMsg("|cff00ccff当前地图版本并非最新版本,积分已经关闭.检测到的最新版本为 |cffffcc00" + s__baka_thatVerName + "|r")
endfunction
function s__baka_banMapTimerFunc takes nothing returns nothing
call BJDebugMsg("|cff00ccff当前地图版本已经废弃,请更换新版本地图进行游戏|r")
endfunction
function s__baka_getMapVerName takes integer ver returns string
local string s1=I2S(ver / 100)
local string s2=I2S(ModuloInteger(ver, 100) / 10)
local string s3=sc__String_char2(ModuloInteger(ver, 10))
return s1 + "." + s2 + s3
endfunction
function s__baka_oldMap takes integer thatVer returns nothing
set s__baka_thatVerName=s__baka_getMapVerName(thatVer)
call TimerStart(CreateTimer(), 1, false, function s__baka_oldMapTimerFunc)
call TimerStart(CreateTimer(), 60, true, function s__baka_oldMapTimerFunc)
endfunction
function s__baka_newMap takes nothing returns boolean
local integer thatVer=0
local integer banVer=0
local integer x=0
local integer cjlocgn_00000000
local integer cjlocgn_00000001
loop
exitwhen x > 11
set cjlocgn_00000000=Get(x , "V")
if cjlocgn_00000000 > thatVer then
set thatVer=cjlocgn_00000000
endif
set cjlocgn_00000001=Get(x , "B")
if cjlocgn_00000001 > banVer then
set banVer=cjlocgn_00000001
endif
set x=x + 1
endloop
if thatVer > s__baka_thisVer then
call s__baka_oldMap(thatVer)
else
set thatVer=s__baka_thisVer
endif
set x=0
loop
exitwhen x > 11
call Set(x , "V" , thatVer)
call Set(x , "B" , banVer)
set x=x + 1
endloop
if banVer >= s__baka_thisVer then
call EnableUserUI(false)
call TimerStart(CreateTimer(), 1, false, function s__baka_banMapTimerFunc)
call TimerStart(CreateTimer(), 60, true, function s__baka_banMapTimerFunc)
return false
endif
if thatVer > s__baka_thisVer then
return false
endif
return true
endfunction
function s__baka_Check1 takes nothing returns nothing
set s__baka_CU=GetEnumUnit()
if IsUnitInvisible(s__baka_CU, s__baka_SPlayer(5)) then
call GroupRemoveUnit(s__baka_CG1, s__baka_CU)
call GroupAddUnit(s__baka_CG2, s__baka_CU)
call UnitAddType(s__baka_CU, UNIT_TYPE_SAPPER)
call BJDebugMsg("万物离开视野:" + GetUnitName(s__baka_CU))
endif
endfunction
function s__baka_Check2 takes nothing returns nothing
set s__baka_CU=GetEnumUnit()
if IsUnitVisible(s__baka_CU, s__baka_SPlayer(5)) then
call GroupRemoveUnit(s__baka_CG2, s__baka_CU)
call GroupAddUnit(s__baka_CG1, s__baka_CU)
call UnitRemoveType(s__baka_CU, UNIT_TYPE_SAPPER)
call BJDebugMsg("万物进入视野:" + GetUnitName(s__baka_CU))
endif
endfunction
function s__baka_Check3 takes nothing returns nothing
set s__baka_CU=GetEnumUnit()
if IsUnitInvisible(s__baka_CU, s__baka_SPlayer(0)) then
call GroupRemoveUnit(s__baka_CG3, s__baka_CU)
call GroupAddUnit(s__baka_CG4, s__baka_CU)
call UnitAddType(s__baka_CU, UNIT_TYPE_SAPPER)
call BJDebugMsg("极寒离开视野:" + GetUnitName(s__baka_CU))
endif
endfunction
function s__baka_Check4 takes nothing returns nothing
set s__baka_CU=GetEnumUnit()
if IsUnitVisible(s__baka_CU, s__baka_SPlayer(0)) then
call GroupRemoveUnit(s__baka_CG4, s__baka_CU)
call GroupAddUnit(s__baka_CG3, s__baka_CU)
call UnitRemoveType(s__baka_CU, UNIT_TYPE_SAPPER)
call BJDebugMsg("极寒进入视野:" + GetUnitName(s__baka_CU))
endif
endfunction
function s__baka_CheckVisible takes nothing returns nothing
call ForGroup(s__baka_CG1, function s__baka_Check1)
call ForGroup(s__baka_CG2, function s__baka_Check2)
call ForGroup(s__baka_CG3, function s__baka_Check3)
call ForGroup(s__baka_CG4, function s__baka_Check4)
endfunction
function s__baka_CheckSummon takes nothing returns boolean
set s__baka_CU=GetSummonedUnit()
if IsUnitAlly(s__baka_CU, s__baka_SPlayer(0)) then
call GroupAddUnit(s__baka_CG1, s__baka_CU)
else
call GroupAddUnit(s__baka_CG3, s__baka_CU)
endif
call TriggerRegisterUnitEvent(s__baka_CheckDeath, s__baka_CU, EVENT_UNIT_DEATH)
set s__baka_CheckCount=s__baka_CheckCount + 1
call BJDebugMsg("<视野检查> 单位名称[" + GetUnitName(s__baka_CU) + "] 计数[" + I2S(s__baka_CheckCount) + "]")
return false
endfunction
function s__baka_SummonDeath takes nothing returns boolean
set s__baka_CU=GetTriggerUnit()
call GroupRemoveUnit(s__baka_CG1, s__baka_CU)
call GroupRemoveUnit(s__baka_CG2, s__baka_CU)
call GroupRemoveUnit(s__baka_CG3, s__baka_CU)
call GroupRemoveUnit(s__baka_CG4, s__baka_CU)
set s__baka_CheckCount=s__baka_CheckCount - 1
call BJDebugMsg("<视野检查> 单位名称[" + GetUnitName(s__baka_CU) + "] 计数[" + I2S(s__baka_CheckCount) + "]")
return false
endfunction
function s__baka_MoveLightningEx2 takes lightning whichBolt,boolean checkVisibility,real x1,real y1,real z1,real x2,real y2,real z2 returns boolean
if not IsVisibleToPlayer(x1, y1, s__sys_selfp) and not IsVisibleToPlayer(x2, y2, s__sys_selfp) then
call SetLightningColor(whichBolt, 1, 1, 1, 0)
else
call SetLightningColor(whichBolt, 1, 1, 1, 1)
return MoveLightningEx(whichBolt, false, x1, y1, z1, x2, y2, z2)
endif
return false
endfunction
function s__baka_IssueTargetOrder2 takes unit u,string o,unit t returns boolean
local player cjlocgn_00000000
local boolean cjlocgn_00000001
if GetUnitAbilityLevel(u, 0x416C6F63) == 1 then
set cjlocgn_00000000=GetOwningPlayer(u)
if IsUnitInvisible(t, cjlocgn_00000000) then
call UnitShareVision(t, cjlocgn_00000000, true)
set cjlocgn_00000001=IssueTargetOrder(u, o, t)
call UnitShareVision(t, cjlocgn_00000000, false)
set cjlocgn_00000000=null
return cjlocgn_00000001
endif
set cjlocgn_00000000=null
endif
return IssueTargetOrder(u, o, t)
endfunction
function s__baka_IssueTargetOrderById2 takes unit u,integer o,unit t returns boolean
local player cjlocgn_00000000
local boolean cjlocgn_00000001
if GetUnitAbilityLevel(u, 0x416C6F63) == 1 then
set cjlocgn_00000000=GetOwningPlayer(u)
if IsUnitInvisible(t, cjlocgn_00000000) then
call UnitShareVision(t, cjlocgn_00000000, true)
set cjlocgn_00000001=IssueTargetOrderById(u, o, t)
call UnitShareVision(t, cjlocgn_00000000, false)
set cjlocgn_00000000=null
return cjlocgn_00000001
endif
set cjlocgn_00000000=null
endif
return IssueTargetOrderById(u, o, t)
endfunction
function s__baka_InitHero takes unit hero returns nothing
call UnitAddAbility(hero, 0x41726176)
call UnitRemoveAbility(hero, 0x41726176)
call s__maphack_InitHero(hero)
if IsUnitAlly(hero, s__baka_SPlayer(0)) then
call GroupAddUnit(s__baka_CG1, hero)
else
call GroupAddUnit(s__baka_CG3, hero)
endif
call UnitWakeUp(hero)
endfunction
function bakaLibrary___Init takes nothing returns nothing
local trigger trg
call s__baka_InitSP()
call s__maphack_InitS()
call TimerStart(CreateTimer(), 0.1, true, function s__baka_CheckVisible)
set trg=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(trg, EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(trg, Condition(function s__baka_CheckSummon))
call TriggerAddCondition(s__baka_CheckDeath, Condition(function s__baka_SummonDeath))
set trg=null
endfunction

//library bakaLibrary ends
//library effectLibrary:
function s__Effect_TempEffect takes location where,string modelName,boolean b returns nothing
call DestroyEffect(AddSpecialEffectLoc(modelName, where))
if b then
call RemoveLocation(where)
endif
endfunction
function effectLibrary___Init takes nothing returns nothing
endfunction

//library effectLibrary ends
//library eventLibrary:
function s__Event_AnyUnitSkill takes trigger trg,integer i,integer id returns nothing
call SaveTriggerHandle(s__Event_HT, i, id, trg)
endfunction
function s__Event_skillEventAction takes nothing returns nothing
local eventid id=GetTriggerEventId()
local trigger trg
if id == EVENT_PLAYER_UNIT_SPELL_CAST then
set trg=LoadTriggerHandle(s__Event_HT, 1, GetSpellAbilityId())
elseif id == EVENT_PLAYER_UNIT_SPELL_CHANNEL then
set trg=LoadTriggerHandle(s__Event_HT, 2, GetSpellAbilityId())
elseif id == EVENT_PLAYER_UNIT_SPELL_EFFECT then
set trg=LoadTriggerHandle(s__Event_HT, 3, GetSpellAbilityId())
elseif id == EVENT_PLAYER_UNIT_SPELL_ENDCAST then
set trg=LoadTriggerHandle(s__Event_HT, 4, GetSpellAbilityId())
elseif id == EVENT_PLAYER_UNIT_SPELL_FINISH then
set trg=LoadTriggerHandle(s__Event_HT, 5, GetSpellAbilityId())
endif
if trg != null and TriggerEvaluate(trg) then
call TriggerExecute(trg)
endif
set id=null
set trg=null
endfunction
function s__Event_initSkillEvent takes nothing returns nothing
local trigger trg=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(trg, EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerRegisterAnyUnitEventBJ(trg, EVENT_PLAYER_UNIT_SPELL_CHANNEL)
call TriggerRegisterAnyUnitEventBJ(trg, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterAnyUnitEventBJ(trg, EVENT_PLAYER_UNIT_SPELL_ENDCAST)
call TriggerRegisterAnyUnitEventBJ(trg, EVENT_PLAYER_UNIT_SPELL_FINISH)
call TriggerAddAction(trg, function s__Event_skillEventAction)
set trg=null
endfunction
function eventLibrary___Init takes nothing returns nothing
call s__Event_initSkillEvent()
endfunction

//library eventLibrary ends
//library mathLibrary:
function s__math_isPointInRect takes location A,real a,real l,real w,location B,integer i returns boolean
local real Ax=GetLocationX(A)
local real Ay=GetLocationY(A)
local real Bx=GetLocationX(B)
local real By=GetLocationY(B)
local real dx=Bx - Ax
local real dy=By - Ay
local real d=SquareRoot(dx * dx + dy * dy)
local real a2=bj_RADTODEG * Atan2(dy, dx)
local real x=GetLocationX(A) + d * Cos(( a2 - a ) * bj_DEGTORAD)
local real y=GetLocationY(A) + d * Sin(( a2 - a ) * bj_DEGTORAD)
if i == 1 then
call RemoveLocation(A)
call RemoveLocation(B)
elseif i == 2 then
call RemoveLocation(A)
elseif i == 3 then
call RemoveLocation(B)
endif
return x > Ax and x < Ax + l and y > Ay - 0.5 * w and y < Ay + 0.5 * w
endfunction
function s__math_MoveLocationAngle takes location loc,real a,real r,boolean b returns nothing
if b then
call MoveLocation(loc, YDWECoordinateX(( GetLocationX(loc) + ( r * Cos(bj_DEGTORAD * a) ) )), YDWECoordinateY(( GetLocationY(loc) + ( r * Sin(bj_DEGTORAD * a) ) )))
else
call MoveLocation(loc, GetLocationX(loc) + ( r * Cos(bj_DEGTORAD * a) ), GetLocationY(loc) + ( r * Sin(bj_DEGTORAD * a) ))
endif
endfunction
function s__math_PolarProjectionMU takes location source,real dist,real angle returns location
local real x=GetLocationX(source) + dist * Cos(angle * bj_DEGTORAD)
local real y=GetLocationY(source) + dist * Sin(angle * bj_DEGTORAD)
call RemoveLocation(source)
return Location(x, y)
endfunction
function s__math_U2L takes unit u,location p,integer i,boolean b returns real
local real rs
local real cjlocgn_00000000
local real cjlocgn_00000001
if i == 0 then
set cjlocgn_00000000=GetUnitX(u) - GetLocationX(p)
set cjlocgn_00000001=GetUnitY(u) - GetLocationY(p)
set rs=SquareRoot(cjlocgn_00000000 * cjlocgn_00000000 + cjlocgn_00000001 * cjlocgn_00000001)
elseif i == 1 then
set rs=bj_RADTODEG * Atan2(GetLocationY(p) - GetUnitY(u), GetLocationX(p) - GetUnitX(u))
endif
if b then
call RemoveLocation(p)
endif
return rs
endfunction
function s__math_L2L takes location locA,location locB,integer i,integer j returns real
local real rs
local real cjlocgn_00000000
local real cjlocgn_00000001
if i == 0 then
set cjlocgn_00000000=GetLocationX(locA) - GetLocationX(locB)
set cjlocgn_00000001=GetLocationY(locA) - GetLocationY(locB)
set rs=SquareRoot(cjlocgn_00000000 * cjlocgn_00000000 + cjlocgn_00000001 * cjlocgn_00000001)
elseif i == 1 then
set rs=bj_RADTODEG * Atan2(GetLocationY(locB) - GetLocationY(locA), GetLocationX(locB) - GetLocationX(locA))
endif
if j == 1 then
call RemoveLocation(locA)
call RemoveLocation(locB)
elseif j == 2 then
call RemoveLocation(locA)
elseif j == 3 then
call RemoveLocation(locB)
endif
return rs
endfunction
function s__math_Angle takes real r1,real r2 returns real
local real r=r1 - r2
set r=r - ( R2I(r / 360.) * 360. )
if r > 180. then
return 360. - r
elseif r < - 180 then
return 360. + r
elseif r < 0 then
return - r
endif
return r
endfunction
function s__math_SetPolygonLocation takes integer i,real x,real y returns nothing
set s__math_PolygonX[i]=x
set s__math_PolygonY[i]=y
endfunction
function s__math_InsidePolygon takes location p,integer a,integer b,boolean bb returns boolean
local integer n=b
local integer count1=0
local integer count2=0
local real value=0
loop
exitwhen a > b
set value=( GetLocationX(p) - s__math_PolygonX[n] ) * ( s__math_PolygonY[a] - s__math_PolygonY[n] ) - ( GetLocationY(p) - s__math_PolygonY[n] ) * ( s__math_PolygonX[a] - s__math_PolygonX[n] )
if value > 0 then
set count1=count1 + 1
elseif value < 0 then
set count2=count2 + 1
endif
set n=a
set a=a + 1
endloop
if bb then
call RemoveLocation(p)
endif
return ( 0 == count1 or 0 == count2 )
endfunction
function mathLibrary___Init takes nothing returns nothing
endfunction

//library mathLibrary ends
//library objectLibrary:
function s__object_saveData takes nothing returns nothing
endfunction
function s__object_getUnitSkillByType takes integer t,integer i returns integer
return LoadInteger(s__object_HT, t, i)
endfunction
function s__object_getUnitSkill takes unit u,integer i returns integer
return s__object_getUnitSkillByType(GetUnitTypeId(u) , i)
endfunction
function s__object_getSkillCost takes integer s,integer lv returns real
return LoadReal(s__object_HT, s__object_COST * 10 + s, lv)
endfunction
function s__object_getSkillCool takes integer s,integer lv returns real
return LoadReal(s__object_HT, s__object_COOL * 10 + s, lv)
endfunction
function s__object_getSkillCommand takes integer s returns string
return LoadStr(s__object_HT, s, s__object_COMMAND)
endfunction
function objectLibrary___Init takes nothing returns nothing
endfunction

//library objectLibrary ends
//library processLibrary:
function s__process_Cover takes unit u,integer uper,string name returns integer
local integer h=GetHandleId(u)
local integer count=0
local integer max=LoadInteger(YDHT, h, s__process_h_max)
local integer new_max=0
local integer i=1
local integer cjlocgn_00000000
loop
exitwhen i > max
set cjlocgn_00000000=LoadInteger(YDHT, h, s__process_h_index[i])
if cjlocgn_00000000 != 0 then
set new_max=i
if ( name == "全部" or s__process_name[cjlocgn_00000000] == name ) and s__process_uper[cjlocgn_00000000] > uper and s__process_enable[cjlocgn_00000000] then
set count=count + 1
else
call BJDebugMsg("<优先级被剔除> hashindex:[" + I2S(i) + "] key:[" + I2S(cjlocgn_00000000) + "]")
set s__process_enable[cjlocgn_00000000]=false
call SaveInteger(YDHT, h, s__process_h_index[i], 0)
endif
endif
set i=i + 1
endloop
call SaveInteger(YDHT, h, s__process_h_max, new_max)
call SaveInteger(YDHT, h, s__process_h_count, count)
return count
endfunction
function s__process_Create takes unit u,string name,integer uper,boolean cover returns integer
local integer key
local integer h=GetHandleId(u)
local integer max=LoadInteger(YDHT, h, s__process_h_max)
local integer i=1
local integer count
loop
exitwhen i > max
set key=LoadInteger(YDHT, h, s__process_h_index[i])
if key != 0 and s__process_name[key] == name and s__process_uper[key] > uper and s__process_cover[key] and s__process_enable[key] then
call BJDebugMsg("<有更高优先级存在> hashindex:[" + I2S(i) + "] key:[" + I2S(key) + "]")
return 0
endif
set i=i + 1
endloop
if cover then
call s__process_Cover(u , uper , name)
endif
set count=LoadInteger(YDHT, h, s__process_h_count) + 1
call SaveInteger(YDHT, h, s__process_h_count, count)
set max=LoadInteger(YDHT, h, s__process_h_max)
if count > max then
set max=count
call SaveInteger(YDHT, h, s__process_h_max, max)
endif
set key=1
loop
exitwhen s__process_hashindex[key] == 0
set key=key + 1
endloop
set s__process_us[key]=u
set s__process_name[key]=name
set s__process_uper[key]=uper
set s__process_cover[key]=cover
set s__process_enable[key]=true
set i=1
loop
exitwhen LoadInteger(YDHT, h, s__process_h_index[i]) == 0
set i=i + 1
endloop
if i > 100 then
call BJDebugMsg("<未找到空闲过程位>[" + GetUnitName(u) + "][" + name + "][" + I2S(uper) + "]")
return 0
endif
call SaveInteger(YDHT, h, s__process_h_index[i], key)
set s__process_hashindex[key]=i
set s__process_lastkey[key]=0
set s__process_nextkey[key]=s__process_nextkey[0]
set s__process_nextkey[0]=key
call BJDebugMsg("<新建过程> unit:[" + GetUnitName(u) + "] process:[" + name + "] hashindex:[" + I2S(i) + "] key:[" + I2S(key) + "]")
return key
endfunction
function s__process_IsEnable takes integer key returns boolean
return s__process_enable[key]
endfunction
function s__process_Remove takes integer key returns boolean
local integer h
local integer last
local integer next
if s__process_hashindex[key] == 0 then
return false
endif
set h=GetHandleId(s__process_us[key])
if s__process_enable[key] then
set s__process_enable[key]=false
call SaveInteger(YDHT, h, s__process_h_index[s__process_hashindex[key]], 0)
endif
call BJDebugMsg("<结束过程> unit:[" + GetUnitName(s__process_us[key]) + "] process:[" + s__process_name[key] + "] hashindex:[" + I2S(s__process_hashindex[key]) + "] key:[" + I2S(key) + "]")
set s__process_hashindex[key]=0
set last=s__process_lastkey[key]
set next=s__process_nextkey[key]
set s__process_nextkey[last]=next
set s__process_lastkey[next]=last
return true
endfunction
function processLibrary___Init takes nothing returns nothing
local integer i=1
loop
exitwhen i > 100
set s__process_h_index[i]=StringHash("过程" + I2S(i))
set i=i + 1
endloop
endfunction

//library processLibrary ends
//library soundLibrary:
function s__Sound_play takes real x,real y,real z,sound s,real pitch,boolean looping,boolean stopwhenoutofrange,integer fadeInRate,integer fadeOutRate,real minDist,real maxDist,real cutoff returns sound
local integer k=GetHandleId(s)
local integer i=0
local string name=LoadStr(s__Sound_HT, k, 0)
local real r=GetSoundFileDuration(name) * 0.001
local sound cjlocgn_00000000
set bj_lastPlayedSound=null
loop
exitwhen bj_lastPlayedSound != null
set cjlocgn_00000000=LoadSoundHandle(s__Sound_HT, k, i)
if cjlocgn_00000000 == null then
set bj_lastPlayedSound=CreateSound(name, looping, true, stopwhenoutofrange, fadeInRate, fadeOutRate, "")
call SaveSoundHandle(s__Sound_HT, k, i, bj_lastPlayedSound)
elseif s__sys_getTime() > LoadReal(s__Sound_HT, k, i) then
set bj_lastPlayedSound=cjlocgn_00000000
endif
set i=i + 1
endloop
call SaveReal(s__Sound_HT, k, i - 1, s__sys_getTime() + r)
call SetSoundPosition(bj_lastPlayedSound, x, y, z)
call SetSoundPitch(bj_lastPlayedSound, pitch)
call SetSoundDistances(bj_lastPlayedSound, minDist, maxDist)
call SetSoundDistanceCutoff(bj_lastPlayedSound, cutoff)
call StartSound(bj_lastPlayedSound)
return bj_lastPlayedSound
endfunction
function s__Sound_SaveSound takes string filename,boolean looping,boolean is3D,boolean stopwhenoutofrange,integer fadeInRate,integer fadeOutRate,string eaxSetting returns sound
local integer k
set bj_lastPlayedSound=CreateSound(filename, looping, is3D, stopwhenoutofrange, fadeInRate, fadeOutRate, eaxSetting)
set k=GetHandleId(bj_lastPlayedSound)
call SaveStr(s__Sound_HT, k, 0, filename)
call StartSound(bj_lastPlayedSound)
call StopSound(bj_lastPlayedSound, false, false)
return bj_lastPlayedSound
endfunction
function soundLibrary___Init takes nothing returns nothing
endfunction

//library soundLibrary ends
//library stringLibrary:
function s__String_char2 takes integer n returns string
if n > 0 and n < 27 then
return SubString(s__String_char2AllString, n - 1, n)
endif
return ""
endfunction
function s__String_GetStr takes integer i returns string
if i > s__String_StrCount then
return ""
endif
return s__String_Str[i]
endfunction
function s__String_Split takes string sss,string sp returns integer
local integer count=0
local integer i=0
local integer j=0
local string s=""
local integer length=StringLength(sss)
local integer lengthp=StringLength(sp)
set s__String_Str[0]=sss
if sss == "" then
return 0
endif
loop
set s=SubString(sss, i, i + lengthp)
exitwhen s == "" or s == null or i > length
if s == sp then
set count=count + 1
set s__String_Str[count]=SubString(sss, j, i)
set j=i + lengthp
set i=j
endif
set i=i + 1
endloop
set count=count + 1
set s__String_Str[count]=SubString(sss, j, i)
set s__String_StrCount=count
return count
endfunction
function stringLibrary___Init takes nothing returns nothing
endfunction

//library stringLibrary ends
//library testLibrary:
function s__test_action takes nothing returns boolean
local string s=GetEventPlayerChatString()
local player p=GetTriggerPlayer()
local integer id=s__baka_SGetPlayerId(p)
local unit hero=udg_player[id + 1]
local integer cjlocgn_00000000
local real cjlocgn_00000001
local real cjlocgn_00000002
local integer cjlocgn_00000003
call s__String_Split(s , " ")
set s=s__String_GetStr(1)
if s == ".lv" then
call SetHeroLevel(hero, S2I(s__String_GetStr(2)), true)
elseif s == ".showid" then
set cjlocgn_00000000=0
call BJDebugMsg("[当前ID]" + I2S(s__baka_SGetPlayerId(GetLocalPlayer())) + " / " + I2S(GetHandleId(GetLocalPlayer())))
loop
exitwhen cjlocgn_00000000 > 9
call BJDebugMsg("[" + I2S(cjlocgn_00000000) + "] → " + I2S(s__baka_SGetPlayerId(s__baka_SPlayer(cjlocgn_00000000))) + " / " + I2S(GetHandleId(s__baka_SPlayer(cjlocgn_00000000))))
set cjlocgn_00000000=cjlocgn_00000000 + 1
endloop
elseif s == ".hp" then
call SetUnitState(hero, UNIT_STATE_LIFE, 999999)
call SetUnitState(hero, UNIT_STATE_MANA, 999999)
call UnitResetCooldown(hero)
elseif s == ".move" then
if s__sys_selfp == p then
call StoreInteger(s__sys_GC, "mx", I2S(id), R2I(GetCameraTargetPositionX()))
call StoreInteger(s__sys_GC, "my", I2S(id), R2I(GetCameraTargetPositionY()))
call SyncStoredInteger(s__sys_GC, "mx", I2S(id))
call SyncStoredInteger(s__sys_GC, "my", I2S(id))
endif
call StoreInteger(s__sys_GC, "mx", I2S(id), 0)
call StoreInteger(s__sys_GC, "my", I2S(id), 0)
call TriggerSleepAction(1)
set cjlocgn_00000001=GetStoredInteger(s__sys_GC, "mx", I2S(id))
set cjlocgn_00000002=GetStoredInteger(s__sys_GC, "my", I2S(id))
call SetUnitX(hero, cjlocgn_00000001)
call SetUnitY(hero, cjlocgn_00000002)
elseif s == ".gold" then
call SetPlayerState(p, PLAYER_STATE_RESOURCE_GOLD, 999999999)
elseif s == ".skill" then
set cjlocgn_00000000=YDWES2Id(s__String_GetStr(2))
set cjlocgn_00000003=S2I(s__String_GetStr(3))
if GetUnitAbilityLevel(hero, cjlocgn_00000000) == 0 then
call UnitAddAbility(hero, cjlocgn_00000000)
call SetUnitAbilityLevel(hero, cjlocgn_00000000, cjlocgn_00000003)
else
if cjlocgn_00000003 == 0 then
call UnitRemoveAbility(hero, cjlocgn_00000000)
else
call SetUnitAbilityLevel(hero, cjlocgn_00000000, cjlocgn_00000003)
endif
endif
endif
set p=null
set hero=null
return false
endfunction
function testLibrary___Init takes nothing returns nothing
local trigger trg=CreateTrigger()
local integer i=0
loop
exitwhen i > 11
call TriggerRegisterPlayerChatEvent(trg, s__baka_SPlayer(i), "", false)
set i=i + 1
endloop
call TriggerAddAction(trg, function s__test_action)
set trg=null
endfunction

//library testLibrary ends
//library textLibrary:
function s__text_CreateText takes player p,unit luu,string str,real size,real red,real green,real blue,real see,real speed,real angle,boolean permanent,real fadepoint,real lifespan,integer showTo returns nothing
set bj_lastCreatedTextTag=CreateTextTag()
call SetTextTagText(bj_lastCreatedTextTag, str, size * 0.023 / 10)
call SetTextTagPosUnit(bj_lastCreatedTextTag, luu, 0)
call SetTextTagColor(bj_lastCreatedTextTag, R2I(red * 2.55), R2I(green * 2.55), R2I(blue * 2.55), R2I(( 100.0 - see ) * 2.55))
call SetTextTagVelocity(bj_lastCreatedTextTag, speed * 0.071 * Cos(angle * bj_DEGTORAD) / 128, speed * 0.071 * Sin(angle * bj_DEGTORAD) / 128)
call SetTextTagPermanent(bj_lastCreatedTextTag, permanent)
call SetTextTagFadepoint(bj_lastCreatedTextTag, fadepoint)
call SetTextTagLifespan(bj_lastCreatedTextTag, lifespan)
if showTo == 1 then
if IsPlayerEnemy(p, GetLocalPlayer()) then
call SetTextTagVisibility(bj_lastCreatedTextTag, false)
endif
elseif showTo == 2 then
if p != GetLocalPlayer() then
call SetTextTagVisibility(bj_lastCreatedTextTag, false)
endif
endif
endfunction
function textLibrary___Init takes nothing returns nothing
endfunction

//library textLibrary ends
//library unitLibrary:
function s__Unit_ExchangeItem takes unit luu,integer ItemID1,integer ItemID2,boolean b1,boolean b2 returns nothing
local integer i1=0
local integer i2=0
local integer a1
local integer a2
local real a3
local item lii
local item li2
local integer playerid
loop
exitwhen i1 > 5
set lii=UnitItemInSlot(luu, i1)
if GetItemTypeId(lii) == ItemID1 then
set a1=GetItemUserData(lii)
set a2=GetItemCharges(lii)
set a3=GetWidgetLife(lii)
set playerid=GetPlayerId(GetItemPlayer(lii))
call RemoveItem(lii)
loop
exitwhen i2 > i1 - 1
if UnitItemInSlot(luu, i2) == null then
call UnitAddItem(luu, CreateItem(0x63686573, GetUnitX(luu), GetUnitY(luu)))
endif
set i2=i2 + 1
endloop
set li2=CreateItem(ItemID2, - 7220, 7115)
call UnitAddItem(luu, li2)
if b1 then
call SetItemUserData(li2, a1)
endif
if b2 then
call SetItemCharges(li2, a2)
endif
call SetWidgetLife(li2, a3)
call SetItemPlayer(li2, Player(playerid), false)
set i2=0
loop
exitwhen i2 > i1 - 1
set lii=UnitItemInSlot(luu, i2)
if GetItemTypeId(lii) == 0x63686573 then
call RemoveItem(lii)
endif
set i2=i2 + 1
endloop
endif
set i1=i1 + 1
endloop
set lii=null
set li2=null
endfunction
function s__Unit_Move takes unit u,real a,real r returns boolean
if GetUnitMoveSpeed(u) == 0 then
return false
endif
call SetUnitX(u, YDWECoordinateX(( GetUnitX(u) + ( r * Cos(bj_DEGTORAD * a) ) )))
call SetUnitY(u, YDWECoordinateY(( GetUnitY(u) + ( r * Sin(bj_DEGTORAD * a) ) )))
return true
endfunction
function s__Unit_CreateNUnitsAtLocMU takes integer count,integer unitId,player whichPlayer,location loc,real face returns group
call GroupClear(bj_lastCreatedGroup)
loop
set count=count - 1
exitwhen count < 0
set bj_lastCreatedUnit=CreateUnitAtLoc(whichPlayer, unitId, loc, face)
call GroupAddUnit(bj_lastCreatedGroup, bj_lastCreatedUnit)
endloop
call RemoveLocation(loc)
return bj_lastCreatedGroup
endfunction
function s__Unit_CreateUnitAtLocMU takes player id,integer unitid,location whichLocation,real face returns unit
local real x=GetLocationX(whichLocation)
local real y=GetLocationY(whichLocation)
call RemoveLocation(whichLocation)
return CreateUnit(id, unitid, x, y, face)
endfunction
function s__Unit_SetUnitPositionLocMU takes unit u,location loc returns nothing
call SetUnitPositionLoc(u, loc)
call RemoveLocation(loc)
endfunction
function s__Unit_IssuePointOrderLocMU takes unit u,string id,location loc returns boolean
local boolean result=IssuePointOrderLoc(u, id, loc)
call RemoveLocation(loc)
return result
endfunction
function s__Unit_IssuePointOrderByIdLocMU takes unit u,integer id,location loc returns boolean
local boolean result=IssuePointOrderByIdLoc(u, id, loc)
call RemoveLocation(loc)
return result
endfunction
function s__Unit_GetUnitsInRangeOfLocMatchingMU takes real radius,location whichLocation,boolexpr filter returns group
local group g=CreateGroup()
call GroupEnumUnitsInRangeOfLoc(g, whichLocation, radius + 24, filter)
call RemoveLocation(whichLocation)
call DestroyBoolExpr(filter)
set s__sys_g=g
set g=null
return s__sys_g
endfunction
function s__Unit_GetUnitsInRangeOfLocAllMU takes real radius,location whichLocation returns group
return s__Unit_GetUnitsInRangeOfLocMatchingMU(radius , whichLocation , null)
endfunction
function s__Unit_UnitAddAbilityMU takes unit u,integer id,integer level returns integer
if id == 0 then
call UnitRemoveAbility(u, id)
return 0
elseif GetUnitAbilityLevel(u, id) == 0 then
if not UnitAddAbility(u, id) then
return 0
endif
endif
call UnitMakeAbilityPermanent(u, true, id)
if GetUnitAbilityLevel(u, id) != level then
call SetUnitAbilityLevel(u, id, level)
endif
return GetUnitAbilityLevel(u, id)
endfunction
function s__Unit_RefreshSkill takes unit u,integer id returns boolean
local integer lv=GetUnitAbilityLevel(u, id)
if lv == 0 then
return false
endif
call UnitRemoveAbility(u, id)
call UnitAddAbility(u, id)
call SetUnitAbilityLevel(u, id, lv)
return true
endfunction
function s__Unit_PauseUnitMU takes unit u,boolean b,string flag returns nothing
local integer key=StringHash("暂停-" + flag)
local integer h=GetHandleId(u)
local integer count=LoadInteger(YDHT, h, s__Unit_pause_count)
if b then
if not LoadBoolean(YDHT, h, key) then
call SaveBoolean(YDHT, h, key, true)
set count=count + 1
call SaveInteger(YDHT, h, s__Unit_pause_count, count)
if count == 1 then
call PauseUnit(u, b)
endif
endif
else
if LoadBoolean(YDHT, h, key) then
call SaveBoolean(YDHT, h, key, false)
set count=count - 1
call SaveInteger(YDHT, h, s__Unit_pause_count, count)
if count == 0 then
call PauseUnit(u, b)
endif
endif
endif
endfunction
function unitLibrary___Init takes nothing returns nothing
endfunction

//library unitLibrary ends
//library RecordFix:
function Lua_RecodFix takes nothing returns boolean
local integer i=LoadInteger(Lua_HT, 0, 0)
local integer x=2
loop
exitwhen LoadStr(Lua_HT, Lua_key, x) == null
call Set(i , LoadStr(Lua_HT, Lua_key, x) , LoadInteger(Lua_HT, Lua_value, x))
set x=x + 1
endloop
call Set(i , "胜利" , Get(i , "局数") * Get(i , "胜率") / 100)
call Set(i , "rf" , 1 + Get(i , "rf"))
call SaveInteger(Lua_HT, i, Lua_rf, Get(i , "rf"))
call SetLevel()
call Save()
call SaveBoolean(Lua_HT, 0, 0, false)
return false
endfunction
function RecordFix___StartLua takes nothing returns nothing
local integer i=0
local trigger trg
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
loop
exitwhen i > 11
call SaveInteger(Lua_HT, i, Lua_rf, Get(i , "rf"))
set i=i + 1
endloop
set trg=CreateTrigger()
call TriggerRegisterTimerExpireEvent(trg, Lua_timer)
call TriggerAddCondition(trg, Condition(function Lua_RecodFix))
set trg=null
endfunction
function RecordFix___Init takes nothing returns nothing
return
call Cheat("run Moe_RecordFix.lua")
call TimerStart(CreateTimer(), 0.1, false, function RecordFix___StartLua)
endfunction

//library RecordFix ends
function InitGlobals takes nothing returns nothing
local integer i=0
set i=0
loop
exitwhen ( i > 12 )
set udg_choose_ture[i]=false
set i=i + 1
endloop
set i=0
loop
exitwhen ( i > 300 )
set udg_jishiqi[i]=CreateTimer()
set i=i + 1
endloop
set i=0
loop
exitwhen ( i > 200 )
set udg_danweizu[i]=CreateGroup()
set i=i + 1
endloop
set i=0
loop
exitwhen ( i > 50 )
set udg_duihuakuang[i]=DialogCreate()
set i=i + 1
endloop
set i=0
loop
exitwhen ( i > 1 )
set udg_zhengshu[i]=0
set i=i + 1
endloop
set i=0
loop
exitwhen ( i > 1 )
set udg_touxiang[i]=""
set i=i + 1
endloop
set i=0
loop
exitwhen ( i > 1 )
set udg_buer[i]=true
set i=i + 1
endloop
set i=0
loop
exitwhen ( i > 1 )
set udg_shishu[i]=0
set i=i + 1
endloop
set i=0
loop
exitwhen ( i > 22 )
set udg_FH[i]=CreateTimer()
set i=i + 1
endloop
set i=0
loop
exitwhen ( i > 400 )
set udg_danweizu2[i]=CreateGroup()
set i=i + 1
endloop
set i=0
loop
exitwhen ( i > 400 )
set udg_times[i]=CreateTimer()
set i=i + 1
endloop
set i=0
loop
exitwhen ( i > 1 )
set udg_zhengshu2[i]=0
set i=i + 1
endloop
set udg_xuanqu=CreateGroup()
set i=0
loop
exitwhen ( i > 1 )
set udg_buer2[i]=false
set i=i + 1
endloop
set i=0
loop
exitwhen ( i > 1 )
set udg_SWAP[i]=0
set i=i + 1
endloop
set i=0
loop
exitwhen ( i > 10 )
set udg_Name[i]=""
set i=i + 1
endloop
set udg_sheep=CreateGroup()
set i=0
loop
exitwhen ( i > 1 )
set udg_miwu[i]=true
set i=i + 1
endloop
set i=0
loop
exitwhen ( i > 1 )
set udg_shishu2ex[i]=0
set i=i + 1
endloop
set i=0
loop
exitwhen ( i > 1 )
set udg_SC[i]=false
set i=i + 1
endloop
set udg_key=0
set i=0
loop
exitwhen ( i > 1 )
set udg_shishu2[i]=0
set i=i + 1
endloop
set i=0
loop
exitwhen ( i > 1 )
set udg_kill[i]=0
set i=i + 1
endloop
set i=0
loop
exitwhen ( i > 1 )
set udg_jiemeng[i]=CreateForce()
set i=i + 1
endloop
set i=0
loop
exitwhen ( i > 10 )
set udg_timsJS[i]=CreateTimer()
set i=i + 1
endloop
set udg_Points=0
set i=0
loop
exitwhen ( i > 1 )
set udg_kzs[i]=0
set i=i + 1
endloop
set i=0
loop
exitwhen ( i > 15 )
set udg_MS[i]=CreateTimer()
set i=i + 1
endloop
set i=0
loop
exitwhen ( i > 10 )
set udg_randomGroup[i]=CreateGroup()
set i=i + 1
endloop
set udg_roll=0
set i=0
loop
exitwhen ( i > 1 )
set udg_Score[i]=0
set i=i + 1
endloop
set i=0
loop
exitwhen ( i > 1 )
set udg_HeoZiFuChuan[i]=""
set i=i + 1
endloop
set udg_LINSHIWANJIAZU=CreateForce()
set i=0
loop
exitwhen ( i > 1 )
set udg_DHK1[i]=""
set i=i + 1
endloop
set udg_FS=0
set udg_FSDL=0
set i=0
loop
exitwhen ( i > 1 )
set udg_wanjiazu[i]=CreateForce()
set i=i + 1
endloop
set i=0
loop
exitwhen ( i > 10 )
set udg_Savior[i]=0
set i=i + 1
endloop
set i=0
loop
exitwhen ( i > 50 )
set udg_Ajnbuer[i]=false
set i=i + 1
endloop
set i=0
loop
exitwhen ( i > 1 )
set udg_gaga_zhengshu[i]=0
set i=i + 1
endloop
set i=0
loop
exitwhen ( i > 1 )
set udg_gaga_shanghai[i]=""
set i=i + 1
endloop
set udg_gaga_danweizu=CreateGroup()
set i=0
loop
exitwhen ( i > 3 )
set udg_DAZE[i]=CreateGroup()
set i=i + 1
endloop
set udg_attack=CreateGroup()
set i=0
loop
exitwhen ( i > 1 )
set udg_Color[i]=""
set i=i + 1
endloop
set i=0
loop
exitwhen ( i > 1 )
set udg_zhugong[i]=0
set i=i + 1
endloop
set i=0
loop
exitwhen ( i > 1 )
set udg_shuju[i]=0
set i=i + 1
endloop
set i=0
loop
exitwhen ( i > 1 )
set udg_Hexadecimal[i]=""
set i=i + 1
endloop
set i=0
loop
exitwhen ( i > 1 )
set udg_zhengshuex[i]=0
set i=i + 1
endloop
set i=0
loop
exitwhen ( i > 100 )
set udg_timesex[i]=CreateTimer()
set i=i + 1
endloop
set i=0
loop
exitwhen ( i > 1 )
set udg_gaga_shishu[i]=0
set i=i + 1
endloop
set udg_gaga_mofa=CreateGroup()
set udg_gaga_time=CreateTimer()
set i=0
loop
exitwhen ( i > 1 )
set udg_Shishu[i]=0
set i=i + 1
endloop
set i=0
loop
exitwhen ( i > 200 )
set udg_Danweizu[i]=CreateGroup()
set i=i + 1
endloop
set i=0
loop
exitwhen ( i > 200 )
set udg_Times[i]=CreateTimer()
set i=i + 1
endloop
set i=0
loop
exitwhen ( i > 1 )
set udg_Zhengshu[i]=0
set i=i + 1
endloop
set i=0
loop
exitwhen ( i > 50 )
set udg_a[i]=false
set i=i + 1
endloop
set i=0
loop
exitwhen ( i > 1 )
set udg_aXUNHUAN[i]=0
set i=i + 1
endloop
set i=0
loop
exitwhen ( i > 1 )
set udg_Axunhuan2[i]=0
set i=i + 1
endloop
set i=0
loop
exitwhen ( i > 1 )
set udg_shangjin[i]=0
set i=i + 1
endloop
set i=0
loop
exitwhen ( i > 1 )
set udg_fuwen[i]=0
set i=i + 1
endloop
set i=0
loop
exitwhen ( i > 10 )
set udg_youxixitong[i]=CreateTimer()
set i=i + 1
endloop
set i=0
loop
exitwhen ( i > 1 )
set udg_guaji[i]=0
set i=i + 1
endloop
set udg_jubuzs1=0
set udg_jubuzs2=0
set udg_jubuzs3=0
set udg_jubuss1=0
set i=0
loop
exitwhen ( i > 1 )
set udg_shishukuangshan[i]=0
set i=i + 1
endloop
set udg_test=0
set i=0
loop
exitwhen ( i > 1 )
set udg_mkszs[i]=0
set i=i + 1
endloop
set i=0
loop
exitwhen ( i > 3 )
set udg_mksdwz[i]=CreateGroup()
set i=i + 1
endloop
set i=0
loop
exitwhen ( i > 1 )
set udg_LIExunhuan[i]=0
set i=i + 1
endloop
set udg_GameStart=false
set udg_GameTimer=CreateTimer()
set i=0
loop
exitwhen ( i > 1 )
set udg_Int[i]=0
set i=i + 1
endloop
set i=0
loop
exitwhen ( i > 1 )
set udg_tempReal[i]=0
set i=i + 1
endloop
endfunction
function Unit000087_DropItems takes nothing returns nothing
local widget trigWidget=null
local unit trigUnit=null
local integer itemID=0
local boolean canDrop=true
set trigWidget=bj_lastDyingWidget
if ( trigWidget == null ) then
set trigUnit=GetTriggerUnit()
endif
if ( trigUnit != null ) then
set canDrop=not IsUnitHidden(trigUnit)
if ( canDrop and GetChangingUnit() != null ) then
set canDrop=( GetChangingUnitPrevOwner() == Player(PLAYER_NEUTRAL_AGGRESSIVE) )
endif
endif
if ( canDrop ) then
call RandomDistReset()
call RandomDistAddItem(0x4930305A, 100)
set itemID=RandomDistChoose()
if ( trigUnit != null ) then
call UnitDropItem(trigUnit, itemID)
else
call WidgetDropItem(trigWidget, itemID)
endif
endif
set bj_lastDyingWidget=null
call FlushChildHashtable(globalHashtable, GetHandleId(GetTriggeringTrigger()))
call DestroyTrigger(GetTriggeringTrigger())
endfunction
function Unit000088_DropItems takes nothing returns nothing
local widget trigWidget=null
local unit trigUnit=null
local integer itemID=0
local boolean canDrop=true
set trigWidget=bj_lastDyingWidget
if ( trigWidget == null ) then
set trigUnit=GetTriggerUnit()
endif
if ( trigUnit != null ) then
set canDrop=not IsUnitHidden(trigUnit)
if ( canDrop and GetChangingUnit() != null ) then
set canDrop=( GetChangingUnitPrevOwner() == Player(PLAYER_NEUTRAL_AGGRESSIVE) )
endif
endif
if ( canDrop ) then
call RandomDistReset()
call RandomDistAddItem(0x49303130, 100)
set itemID=RandomDistChoose()
if ( trigUnit != null ) then
call UnitDropItem(trigUnit, itemID)
else
call WidgetDropItem(trigWidget, itemID)
endif
endif
set bj_lastDyingWidget=null
call FlushChildHashtable(globalHashtable, GetHandleId(GetTriggeringTrigger()))
call DestroyTrigger(GetTriggeringTrigger())
endfunction
function Unit000089_DropItems takes nothing returns nothing
local widget trigWidget=null
local unit trigUnit=null
local integer itemID=0
local boolean canDrop=true
set trigWidget=bj_lastDyingWidget
if ( trigWidget == null ) then
set trigUnit=GetTriggerUnit()
endif
if ( trigUnit != null ) then
set canDrop=not IsUnitHidden(trigUnit)
if ( canDrop and GetChangingUnit() != null ) then
set canDrop=( GetChangingUnitPrevOwner() == Player(PLAYER_NEUTRAL_AGGRESSIVE) )
endif
endif
if ( canDrop ) then
call RandomDistReset()
call RandomDistAddItem(0x49303131, 100)
set itemID=RandomDistChoose()
if ( trigUnit != null ) then
call UnitDropItem(trigUnit, itemID)
else
call WidgetDropItem(trigWidget, itemID)
endif
endif
set bj_lastDyingWidget=null
call FlushChildHashtable(globalHashtable, GetHandleId(GetTriggeringTrigger()))
call DestroyTrigger(GetTriggeringTrigger())
endfunction
function Unit000090_DropItems takes nothing returns nothing
local widget trigWidget=null
local unit trigUnit=null
local integer itemID=0
local boolean canDrop=true
set trigWidget=bj_lastDyingWidget
if ( trigWidget == null ) then
set trigUnit=GetTriggerUnit()
endif
if ( trigUnit != null ) then
set canDrop=not IsUnitHidden(trigUnit)
if ( canDrop and GetChangingUnit() != null ) then
set canDrop=( GetChangingUnitPrevOwner() == Player(PLAYER_NEUTRAL_AGGRESSIVE) )
endif
endif
if ( canDrop ) then
call RandomDistReset()
call RandomDistAddItem(0x49303058, 100)
set itemID=RandomDistChoose()
if ( trigUnit != null ) then
call UnitDropItem(trigUnit, itemID)
else
call WidgetDropItem(trigWidget, itemID)
endif
endif
set bj_lastDyingWidget=null
call FlushChildHashtable(globalHashtable, GetHandleId(GetTriggeringTrigger()))
call DestroyTrigger(GetTriggeringTrigger())
endfunction
function InitSounds takes nothing returns nothing
set gg_snd_Excalibur=s__Sound_SaveSound("Excalibur.mp3" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundDuration(gg_snd_Excalibur, 4075)
call SetSoundChannel(gg_snd_Excalibur, 0)
call SetSoundVolume(gg_snd_Excalibur, 127)
call SetSoundPitch(gg_snd_Excalibur, 1.0)
call SetSoundDistances(gg_snd_Excalibur, 1000.0, 1800.0)
call SetSoundDistanceCutoff(gg_snd_Excalibur, 2000.0)
call SetSoundConeAngles(gg_snd_Excalibur, 0.0, 0.0, 127)
call SetSoundConeOrientation(gg_snd_Excalibur, 0.0, 0.0, 0.0)
set gg_snd_HeroBladeMasterAttack1=s__Sound_SaveSound("Units\\Orc\\HeroBladeMaster\\HeroBladeMasterAttack1.wav" , false , true , true , 10 , 10 , "CombatSoundsEAX")
call SetSoundParamsFromLabel(gg_snd_HeroBladeMasterAttack1, "HeroBladeMasterAttack1")
call SetSoundDuration(gg_snd_HeroBladeMasterAttack1, 1200)
call SetSoundDistances(gg_snd_HeroBladeMasterAttack1, 1500.0, 10000.0)
set gg_snd_CatapultMissile2=s__Sound_SaveSound("Abilities\\Weapons\\Catapult\\CatapultMissile2.wav" , false , true , true , 10 , 10 , "MissilesEAX")
call SetSoundParamsFromLabel(gg_snd_CatapultMissile2, "Catapult")
call SetSoundDuration(gg_snd_CatapultMissile2, 1254)
call SetSoundPitch(gg_snd_CatapultMissile2, 2.0)
call SetSoundDistances(gg_snd_CatapultMissile2, 1500.0, 10000.0)
set gg_snd_m82a1=s__Sound_SaveSound("war3mapImported\\m82a1.mp3" , false , false , true , 10 , 10 , "DefaultEAXON")
call SetSoundDuration(gg_snd_m82a1, 4631)
call SetSoundChannel(gg_snd_m82a1, 0)
call SetSoundVolume(gg_snd_m82a1, 127)
call SetSoundPitch(gg_snd_m82a1, 1.0)
set gg_snd_fengjue=s__Sound_SaveSound("fengjue.mp3" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundDuration(gg_snd_fengjue, 732)
call SetSoundChannel(gg_snd_fengjue, 0)
call SetSoundVolume(gg_snd_fengjue, 70)
call SetSoundPitch(gg_snd_fengjue, 1.0)
call SetSoundDistances(gg_snd_fengjue, 1000.0, 10000.0)
call SetSoundDistanceCutoff(gg_snd_fengjue, 3000.0)
call SetSoundConeAngles(gg_snd_fengjue, 0.0, 0.0, 127)
call SetSoundConeOrientation(gg_snd_fengjue, 0.0, 0.0, 0.0)
set gg_snd_AbominationAlternateDeath1=s__Sound_SaveSound("Units\\Undead\\Abomination\\AbominationAlternateDeath1.wav" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundParamsFromLabel(gg_snd_AbominationAlternateDeath1, "AbominationAlternateDeath")
call SetSoundDuration(gg_snd_AbominationAlternateDeath1, 2320)
call SetSoundDistances(gg_snd_AbominationAlternateDeath1, 1500.0, 10000.0)
call SetSoundDistanceCutoff(gg_snd_AbominationAlternateDeath1, 2000.0)
set gg_snd_EntanglingRootsTarget1=s__Sound_SaveSound("Abilities\\Spells\\NightElf\\EntanglingRoots\\EntanglingRootsTarget1.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_EntanglingRootsTarget1, "EntanglingRoots")
call SetSoundDuration(gg_snd_EntanglingRootsTarget1, 1625)
call SetSoundDistances(gg_snd_EntanglingRootsTarget1, 1000.0, 10000.0)
set gg_snd_AbominationPissed5=s__Sound_SaveSound("Units\\Undead\\Abomination\\AbominationPissed5.wav" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundParamsFromLabel(gg_snd_AbominationPissed5, "AbominationPissed")
call SetSoundDuration(gg_snd_AbominationPissed5, 1735)
call SetSoundDistances(gg_snd_AbominationPissed5, 1200.0, 10000.0)
call SetSoundDistanceCutoff(gg_snd_AbominationPissed5, 3000.0)
set gg_snd_PurgeTarget1=s__Sound_SaveSound("Abilities\\Spells\\Orc\\Purge\\PurgeTarget1.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_PurgeTarget1, "Purge")
call SetSoundDuration(gg_snd_PurgeTarget1, 2096)
call SetSoundPitch(gg_snd_PurgeTarget1, 2.0)
call SetSoundDistances(gg_snd_PurgeTarget1, 1000.0, 10000.0)
set gg_snd_SpellShieldImpact1=s__Sound_SaveSound("Abilities\\Spells\\Items\\SpellShieldAmulet\\SpellShieldImpact1.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_SpellShieldImpact1, "SpellShieldAmulet")
call SetSoundDuration(gg_snd_SpellShieldImpact1, 476)
call SetSoundDistances(gg_snd_SpellShieldImpact1, 1000.0, 10000.0)
set gg_snd_GoblinSapperReady1=s__Sound_SaveSound("Units\\Creeps\\GoblinSapper\\GoblinSapperReady1.wav" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundParamsFromLabel(gg_snd_GoblinSapperReady1, "GoblinSapperReady")
call SetSoundDuration(gg_snd_GoblinSapperReady1, 559)
set gg_snd_ReviveHuman=s__Sound_SaveSound("Abilities\\Spells\\Human\\ReviveHuman\\ReviveHuman.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_ReviveHuman, "ReviveHuman")
call SetSoundDuration(gg_snd_ReviveHuman, 3196)
call SetSoundPitch(gg_snd_ReviveHuman, 1.5)
call SetSoundDistances(gg_snd_ReviveHuman, 1500.0, 10000.0)
set gg_snd_HolyBolt=s__Sound_SaveSound("Abilities\\Spells\\Human\\HolyBolt\\HolyBolt.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_HolyBolt, "HolyBolt")
call SetSoundDuration(gg_snd_HolyBolt, 1591)
call SetSoundPitch(gg_snd_HolyBolt, 2.0)
call SetSoundDistances(gg_snd_HolyBolt, 1200.0, 10000.0)
call SetSoundDistanceCutoff(gg_snd_HolyBolt, 2500.0)
set gg_snd_ManaPotion=s__Sound_SaveSound("Abilities\\Spells\\Items\\AIma\\ManaPotion.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_ManaPotion, "ManaPotion")
call SetSoundDuration(gg_snd_ManaPotion, 1555)
call SetSoundPitch(gg_snd_ManaPotion, 1.8)
call SetSoundDistances(gg_snd_ManaPotion, 800.0, 10000.0)
call SetSoundDistanceCutoff(gg_snd_ManaPotion, 2000.0)
set gg_snd_SpellStealMissile=s__Sound_SaveSound("Abilities\\Spells\\Human\\SpellSteal\\SpellStealMissile.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_SpellStealMissile, "SpellStealMissileLaunch")
call SetSoundDuration(gg_snd_SpellStealMissile, 1541)
call SetSoundVolume(gg_snd_SpellStealMissile, 110)
call SetSoundDistances(gg_snd_SpellStealMissile, 800.0, 10000.0)
call SetSoundDistanceCutoff(gg_snd_SpellStealMissile, 2500.0)
set gg_snd_HealingSprayBirth1=s__Sound_SaveSound("Abilities\\Spells\\Other\\HealingSpray\\HealingSprayBirth1.wav" , false , true , true , 10 , 10 , "CombatSoundsEAX")
call SetSoundParamsFromLabel(gg_snd_HealingSprayBirth1, "HealingSprayLaunch")
call SetSoundDuration(gg_snd_HealingSprayBirth1, 789)
set gg_snd_CharmTarget1=s__Sound_SaveSound("Abilities\\Spells\\Items\\AIco\\CharmTarget1.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_CharmTarget1, "Charm")
call SetSoundDuration(gg_snd_CharmTarget1, 2682)
call SetSoundPitch(gg_snd_CharmTarget1, 2.0)
call SetSoundDistances(gg_snd_CharmTarget1, 1000.0, 10000.0)
set gg_snd_TinkerMissileLaunch1=s__Sound_SaveSound("Abilities\\Spells\\Other\\TinkerRocket\\TinkerMissileLaunch1.wav" , false , true , true , 10 , 10 , "MissilesEAX")
call SetSoundParamsFromLabel(gg_snd_TinkerMissileLaunch1, "ClusterRocketsLaunch")
call SetSoundDuration(gg_snd_TinkerMissileLaunch1, 871)
call SetSoundPitch(gg_snd_TinkerMissileLaunch1, 1.5)
call SetSoundDistances(gg_snd_TinkerMissileLaunch1, 1000.0, 10000.0)
set gg_snd_TinkerMissileLaunch101=s__Sound_SaveSound("Abilities\\Spells\\Other\\TinkerRocket\\TinkerMissileLaunch1.wav" , false , true , true , 10 , 10 , "MissilesEAX")
call SetSoundParamsFromLabel(gg_snd_TinkerMissileLaunch101, "ClusterRocketsLaunch")
call SetSoundDuration(gg_snd_TinkerMissileLaunch101, 871)
call SetSoundPitch(gg_snd_TinkerMissileLaunch101, 0.7)
call SetSoundDistances(gg_snd_TinkerMissileLaunch101, 1250.0, 10000.0)
set gg_snd_GuardTowerMissileHit2=s__Sound_SaveSound("Abilities\\Weapons\\GuardTowerMissile\\GuardTowerMissileHit2.wav" , false , true , true , 10 , 10 , "MissilesEAX")
call SetSoundParamsFromLabel(gg_snd_GuardTowerMissileHit2, "BallistaMissileHit")
call SetSoundDuration(gg_snd_GuardTowerMissileHit2, 702)
call SetSoundPitch(gg_snd_GuardTowerMissileHit2, 1.2)
call SetSoundDistances(gg_snd_GuardTowerMissileHit2, 1200.0, 10000.0)
call SetSoundDistanceCutoff(gg_snd_GuardTowerMissileHit2, 2000.0)
set gg_snd_StasisTrapBirth=s__Sound_SaveSound("Units\\Orc\\StasisTotem\\StasisTrapBirth.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_StasisTrapBirth, "StasisTotemBirth")
call SetSoundDuration(gg_snd_StasisTrapBirth, 2345)
call SetSoundPitch(gg_snd_StasisTrapBirth, 2.0)
call SetSoundDistances(gg_snd_StasisTrapBirth, 1000.0, 10000.0)
set gg_snd_DefendCaster=s__Sound_SaveSound("Abilities\\Spells\\Human\\Defend\\DefendCaster.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_DefendCaster, "Defend")
call SetSoundDuration(gg_snd_DefendCaster, 1167)
call SetSoundPitch(gg_snd_DefendCaster, 2.0)
call SetSoundDistances(gg_snd_DefendCaster, 1250.0, 10000.0)
set gg_snd_BlinkArrival1=s__Sound_SaveSound("Abilities\\Spells\\NightElf\\Blink\\BlinkArrival1.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_BlinkArrival1, "BlinkTarget")
call SetSoundDuration(gg_snd_BlinkArrival1, 1466)
call SetSoundPitch(gg_snd_BlinkArrival1, 2.0)
call SetSoundDistances(gg_snd_BlinkArrival1, 1000.0, 10000.0)
call SetSoundDistanceCutoff(gg_snd_BlinkArrival1, 2500.0)
set gg_snd_MortarImpact=s__Sound_SaveSound("Abilities\\Weapons\\Mortar\\MortarImpact.wav" , false , true , true , 10 , 10 , "MissilesEAX")
call SetSoundParamsFromLabel(gg_snd_MortarImpact, "Mortar")
call SetSoundDuration(gg_snd_MortarImpact, 1887)
call SetSoundPitch(gg_snd_MortarImpact, 0.5)
call SetSoundDistances(gg_snd_MortarImpact, 1500.0, 10000.0)
set gg_snd_LightningBolt=s__Sound_SaveSound("Abilities\\Spells\\Orc\\LightningBolt\\LightningBolt.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_LightningBolt, "LightningBolt")
call SetSoundDuration(gg_snd_LightningBolt, 2136)
call SetSoundPitch(gg_snd_LightningBolt, 0.6)
call SetSoundDistances(gg_snd_LightningBolt, 1500.0, 10000.0)
set gg_snd_InfernalBirth1=s__Sound_SaveSound("Units\\Demon\\Infernal\\InfernalBirth1.wav" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundParamsFromLabel(gg_snd_InfernalBirth1, "InfernalBirth")
call SetSoundDuration(gg_snd_InfernalBirth1, 2500)
call SetSoundPitch(gg_snd_InfernalBirth1, 1.2)
call SetSoundDistances(gg_snd_InfernalBirth1, 1500.0, 10000.0)
set gg_snd_KeeperOfTheGroveMissileLaunch2=s__Sound_SaveSound("Abilities\\Weapons\\KeeperGroveMissile\\KeeperOfTheGroveMissileLaunch2.wav" , false , true , true , 10 , 10 , "MissilesEAX")
call SetSoundParamsFromLabel(gg_snd_KeeperOfTheGroveMissileLaunch2, "KeeperOfTheGroveMissileLaunch")
call SetSoundDuration(gg_snd_KeeperOfTheGroveMissileLaunch2, 896)
call SetSoundPitch(gg_snd_KeeperOfTheGroveMissileLaunch2, 1.5)
call SetSoundDistances(gg_snd_KeeperOfTheGroveMissileLaunch2, 1250.0, 10000.0)
call SetSoundDistanceCutoff(gg_snd_KeeperOfTheGroveMissileLaunch2, 2000.0)
set gg_snd_Credits=s__Sound_SaveSound("Sound\\Music\\mp3Music\\Credits.mp3" , false , false , false , 10 , 10 , "DefaultEAXON")
call SetSoundParamsFromLabel(gg_snd_Credits, "CreditsMusic")
call SetSoundDuration(gg_snd_Credits, 130)
call SetSoundVolume(gg_snd_Credits, 127)
call SetSoundPitch(gg_snd_Credits, 1.5)
set gg_snd_BloodElfMageReady1=s__Sound_SaveSound("Units\\Human\\HeroBloodElf\\BloodElfMageReady1.wav" , false , true , true , 10 , 10 , "HeroAcksEAX")
call SetSoundParamsFromLabel(gg_snd_BloodElfMageReady1, "BloodElfSorcerorReady")
call SetSoundDuration(gg_snd_BloodElfMageReady1, 2012)
set gg_snd_BloodElfMageYes3=s__Sound_SaveSound("Units\\Human\\HeroBloodElf\\BloodElfMageYes3.wav" , false , true , true , 10 , 10 , "HeroAcksEAX")
call SetSoundParamsFromLabel(gg_snd_BloodElfMageYes3, "BloodElfSorcerorYes")
call SetSoundDuration(gg_snd_BloodElfMageYes3, 1530)
set gg_snd_BloodElfMagePissed6=s__Sound_SaveSound("Units\\Human\\HeroBloodElf\\BloodElfMagePissed6.wav" , false , false , false , 10 , 10 , "HeroAcksEAX")
call SetSoundParamsFromLabel(gg_snd_BloodElfMagePissed6, "BloodElfSorcerorPissed")
call SetSoundDuration(gg_snd_BloodElfMagePissed6, 16158)
call SetSoundPitch(gg_snd_BloodElfMagePissed6, 2.0)
set gg_snd_StasisTotem=s__Sound_SaveSound("Units\\Orc\\StasisTotem\\StasisTotem.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_StasisTotem, "StasisTotemDeath")
call SetSoundDuration(gg_snd_StasisTotem, 1858)
call SetSoundDistances(gg_snd_StasisTotem, 2000.0, 10000.0)
set gg_snd_MetalHeavyBashMetal1=s__Sound_SaveSound("Sound\\Units\\Combat\\MetalHeavyBashMetal1.wav" , false , true , true , 10 , 10 , "CombatSoundsEAX")
call SetSoundParamsFromLabel(gg_snd_MetalHeavyBashMetal1, "MetalHeavyBashMetal")
call SetSoundDuration(gg_snd_MetalHeavyBashMetal1, 1341)
call SetSoundDistances(gg_snd_MetalHeavyBashMetal1, 1200.0, 10000.0)
call SetSoundDistanceCutoff(gg_snd_MetalHeavyBashMetal1, 2500.0)
set gg_snd_Tomes=s__Sound_SaveSound("Abilities\\Spells\\Items\\AIam\\Tomes.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_Tomes, "Tome")
call SetSoundDuration(gg_snd_Tomes, 1770)
call SetSoundPitch(gg_snd_Tomes, 2.0)
call SetSoundDistances(gg_snd_Tomes, 1250.0, 10000.0)
set gg_snd_DivineShield=s__Sound_SaveSound("Abilities\\Spells\\Human\\DivineShield\\DivineShield.wav" , false , false , false , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_DivineShield, "DivineShield")
call SetSoundDuration(gg_snd_DivineShield, 1955)
call SetSoundPitch(gg_snd_DivineShield, 1.2)
set gg_snd_DarkSummoningLaunch1=s__Sound_SaveSound("Abilities\\Spells\\Undead\\DarkSummoning\\DarkSummoningLaunch1.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_DarkSummoningLaunch1, "DarkSummoningMissileLaunch")
call SetSoundDuration(gg_snd_DarkSummoningLaunch1, 2624)
call SetSoundPitch(gg_snd_DarkSummoningLaunch1, 1.8)
call SetSoundDistances(gg_snd_DarkSummoningLaunch1, 2000.0, 10000.0)
set gg_snd_BuildingDeathLargeHuman=s__Sound_SaveSound("Sound\\Buildings\\Death\\BuildingDeathLargeHuman.wav" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundParamsFromLabel(gg_snd_BuildingDeathLargeHuman, "DeathHumanLargeBuilding")
call SetSoundDuration(gg_snd_BuildingDeathLargeHuman, 3460)
call SetSoundPitch(gg_snd_BuildingDeathLargeHuman, 1.4)
call SetSoundDistances(gg_snd_BuildingDeathLargeHuman, 2500.0, 10000.0)
set gg_snd_DruidOfTheTalonMissileLaunch1=s__Sound_SaveSound("Abilities\\Weapons\\DruidoftheTalonMissile\\DruidOfTheTalonMissileLaunch1.wav" , false , true , true , 10 , 10 , "MissilesEAX")
call SetSoundParamsFromLabel(gg_snd_DruidOfTheTalonMissileLaunch1, "DruidOfTheTalonMissileLaunch")
call SetSoundDuration(gg_snd_DruidOfTheTalonMissileLaunch1, 889)
call SetSoundPitch(gg_snd_DruidOfTheTalonMissileLaunch1, 1.3)
call SetSoundDistances(gg_snd_DruidOfTheTalonMissileLaunch1, 1000.0, 10000.0)
set gg_snd_DruidOfTheTalonMissileHit2=s__Sound_SaveSound("Abilities\\Weapons\\DruidoftheTalonMissile\\DruidOfTheTalonMissileHit2.wav" , false , true , true , 10 , 10 , "MissilesEAX")
call SetSoundParamsFromLabel(gg_snd_DruidOfTheTalonMissileHit2, "DruidOfTheTalonMissileHit")
call SetSoundDuration(gg_snd_DruidOfTheTalonMissileHit2, 1043)
call SetSoundDistances(gg_snd_DruidOfTheTalonMissileHit2, 1000.0, 10000.0)
set gg_snd_BreathOfFrost1=s__Sound_SaveSound("Abilities\\Spells\\Other\\BreathOfFrost\\BreathOfFrost1.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_BreathOfFrost1, "BreathOfFrost")
call SetSoundDuration(gg_snd_BreathOfFrost1, 2235)
call SetSoundPitch(gg_snd_BreathOfFrost1, 1.7)
call SetSoundDistances(gg_snd_BreathOfFrost1, 1250.0, 10000.0)
set gg_snd_PossessionMissileHit1=s__Sound_SaveSound("Abilities\\Spells\\Undead\\Possession\\PossessionMissileHit1.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_PossessionMissileHit1, "PossessionMissileHit")
call SetSoundDuration(gg_snd_PossessionMissileHit1, 1170)
call SetSoundPitch(gg_snd_PossessionMissileHit1, 1.1)
call SetSoundDistances(gg_snd_PossessionMissileHit1, 3000.0, 10000.0)
set gg_snd_Shockwave=s__Sound_SaveSound("Abilities\\Spells\\Orc\\Shockwave\\Shockwave.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_Shockwave, "ShockWave")
call SetSoundDuration(gg_snd_Shockwave, 2847)
call SetSoundPitch(gg_snd_Shockwave, 2.0)
call SetSoundDistances(gg_snd_Shockwave, 1200.0, 10000.0)
set gg_snd_ZigguratMissileLaunch3=s__Sound_SaveSound("Abilities\\Weapons\\ZigguratMissile\\ZigguratMissileLaunch3.wav" , false , true , true , 10 , 10 , "MissilesEAX")
call SetSoundParamsFromLabel(gg_snd_ZigguratMissileLaunch3, "ZigguratMissileLaunch")
call SetSoundDuration(gg_snd_ZigguratMissileLaunch3, 522)
call SetSoundDistances(gg_snd_ZigguratMissileLaunch3, 2000.0, 10000.0)
set gg_snd_SheepWhat1=s__Sound_SaveSound("Units\\Critters\\Sheep\\SheepWhat1.wav" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundParamsFromLabel(gg_snd_SheepWhat1, "SheepWhat")
call SetSoundDuration(gg_snd_SheepWhat1, 1106)
call SetSoundDistances(gg_snd_SheepWhat1, 1200.0, 10000.0)
call SetSoundDistanceCutoff(gg_snd_SheepWhat1, 4000.0)
set gg_snd_Sheep1=s__Sound_SaveSound("Units\\Critters\\Sheep\\Sheep1.wav" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundParamsFromLabel(gg_snd_Sheep1, "SheepRandomSounds")
call SetSoundDuration(gg_snd_Sheep1, 1178)
call SetSoundVolume(gg_snd_Sheep1, 127)
call SetSoundDistances(gg_snd_Sheep1, 1500.0, 10000.0)
call SetSoundDistanceCutoff(gg_snd_Sheep1, 4000.0)
set gg_snd_StrongDrinkMissile1=s__Sound_SaveSound("Abilities\\Spells\\Other\\StrongDrink\\StrongDrinkMissile1.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_StrongDrinkMissile1, "StrongDrinkMissile")
call SetSoundDuration(gg_snd_StrongDrinkMissile1, 733)
call SetSoundPitch(gg_snd_StrongDrinkMissile1, 1.1)
call SetSoundDistances(gg_snd_StrongDrinkMissile1, 1200.0, 10000.0)
set gg_snd_StarfallCaster1=s__Sound_SaveSound("Abilities\\Spells\\NightElf\\Starfall\\StarfallCaster1.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_StarfallCaster1, "StarfallArea")
call SetSoundDuration(gg_snd_StarfallCaster1, 2209)
call SetSoundPitch(gg_snd_StarfallCaster1, 1.5)
call SetSoundDistances(gg_snd_StarfallCaster1, 2000.0, 10000.0)
set gg_snd_BuildingDeathLargeHuman01=s__Sound_SaveSound("Sound\\Buildings\\Death\\BuildingDeathLargeHuman.wav" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundParamsFromLabel(gg_snd_BuildingDeathLargeHuman01, "DeathHumanLargeBuilding")
call SetSoundDuration(gg_snd_BuildingDeathLargeHuman01, 3460)
call SetSoundPitch(gg_snd_BuildingDeathLargeHuman01, 0.8)
call SetSoundDistances(gg_snd_BuildingDeathLargeHuman01, 2000.0, 10000.0)
set gg_snd_HeroShadowhunterMissileLaunch1=s__Sound_SaveSound("Abilities\\Weapons\\ShadowHunterMissile\\HeroShadowhunterMissileLaunch1.wav" , false , true , true , 10 , 10 , "MissilesEAX")
call SetSoundParamsFromLabel(gg_snd_HeroShadowhunterMissileLaunch1, "ShadowHunterMissileLaunch")
call SetSoundDuration(gg_snd_HeroShadowhunterMissileLaunch1, 377)
call SetSoundPitch(gg_snd_HeroShadowhunterMissileLaunch1, 2.0)
set gg_snd_yueyatianchongyinxiao=s__Sound_SaveSound("yueyatianchongyinxiao.mp3" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundDuration(gg_snd_yueyatianchongyinxiao, 1802)
call SetSoundChannel(gg_snd_yueyatianchongyinxiao, 0)
call SetSoundVolume(gg_snd_yueyatianchongyinxiao, 127)
call SetSoundPitch(gg_snd_yueyatianchongyinxiao, 1.0)
call SetSoundDistances(gg_snd_yueyatianchongyinxiao, 1000.0, 1800.0)
call SetSoundDistanceCutoff(gg_snd_yueyatianchongyinxiao, 2000.0)
call SetSoundConeAngles(gg_snd_yueyatianchongyinxiao, 0.0, 0.0, 127)
call SetSoundConeOrientation(gg_snd_yueyatianchongyinxiao, 0.0, 0.0, 0.0)
set gg_snd_ShimmeringPortalDeath=s__Sound_SaveSound("Sound\\Ambient\\DoodadEffects\\ShimmeringPortalDeath.wav" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundParamsFromLabel(gg_snd_ShimmeringPortalDeath, "ShimmeringPortalDeath")
call SetSoundDuration(gg_snd_ShimmeringPortalDeath, 4783)
call SetSoundPitch(gg_snd_ShimmeringPortalDeath, 2.0)
call SetSoundDistances(gg_snd_ShimmeringPortalDeath, 1250.0, 10000.0)
call SetSoundDistanceCutoff(gg_snd_ShimmeringPortalDeath, 3000.0)
set gg_snd_PandarenUltimate=s__Sound_SaveSound("Abilities\\Spells\\Other\\StormEarthFire\\PandarenUltimate.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_PandarenUltimate, "StormEarthFireSound")
call SetSoundDuration(gg_snd_PandarenUltimate, 3251)
call SetSoundPitch(gg_snd_PandarenUltimate, 2.0)
call SetSoundDistanceCutoff(gg_snd_PandarenUltimate, 3000.0)
set gg_snd_ShimmeringPortalBirth=s__Sound_SaveSound("Sound\\Ambient\\DoodadEffects\\ShimmeringPortalBirth.wav" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundParamsFromLabel(gg_snd_ShimmeringPortalBirth, "ShimmeringPortalBirth")
call SetSoundDuration(gg_snd_ShimmeringPortalBirth, 8529)
call SetSoundPitch(gg_snd_ShimmeringPortalBirth, 1.3)
call SetSoundDistances(gg_snd_ShimmeringPortalBirth, 1500.0, 9999.0)
call SetSoundDistanceCutoff(gg_snd_ShimmeringPortalBirth, 3000.0)
set gg_snd_NightElfBuildingDeathLarge1=s__Sound_SaveSound("Sound\\Buildings\\Death\\NightElfBuildingDeathLarge1.wav" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundParamsFromLabel(gg_snd_NightElfBuildingDeathLarge1, "DeathNightElfLargeBuilding")
call SetSoundDuration(gg_snd_NightElfBuildingDeathLarge1, 3544)
call SetSoundPitch(gg_snd_NightElfBuildingDeathLarge1, 1.2)
call SetSoundDistances(gg_snd_NightElfBuildingDeathLarge1, 1500.0, 10000.0)
set gg_snd_GoblinZeppelinPissed2=s__Sound_SaveSound("Units\\Creeps\\GoblinZeppelin\\GoblinZeppelinPissed2.wav" , false , false , false , 10 , 10 , "DefaultEAXON")
call SetSoundParamsFromLabel(gg_snd_GoblinZeppelinPissed2, "GoblinZeppelinPissed")
call SetSoundDuration(gg_snd_GoblinZeppelinPissed2, 2604)
call SetSoundPitch(gg_snd_GoblinZeppelinPissed2, 2.0)
set gg_snd_DevourMagic=s__Sound_SaveSound("Abilities\\Spells\\Undead\\DevourMagic\\DevourMagic.wav" , false , true , true , 10 , 10 , "MissilesEAX")
call SetSoundParamsFromLabel(gg_snd_DevourMagic, "DevourMagicLaunch")
call SetSoundDuration(gg_snd_DevourMagic, 1225)
call SetSoundPitch(gg_snd_DevourMagic, 2.0)
call SetSoundDistances(gg_snd_DevourMagic, 1250.0, 10000.0)
set gg_snd_parFir00=s__Sound_SaveSound("war3mapImported\\parFir00.mp3" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundDuration(gg_snd_parFir00, 1409)
call SetSoundChannel(gg_snd_parFir00, 0)
call SetSoundVolume(gg_snd_parFir00, 127)
call SetSoundPitch(gg_snd_parFir00, 1.0)
call SetSoundDistances(gg_snd_parFir00, 1500.0, 10000.0)
call SetSoundDistanceCutoff(gg_snd_parFir00, 3000.0)
call SetSoundConeAngles(gg_snd_parFir00, 0.0, 0.0, 127)
call SetSoundConeOrientation(gg_snd_parFir00, 0.0, 0.0, 0.0)
set gg_snd_FlakCannon=s__Sound_SaveSound("Abilities\\Spells\\Human\\FlakCannons\\FlakCannon.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_FlakCannon, "FlakCannonHit")
call SetSoundDuration(gg_snd_FlakCannon, 1419)
call SetSoundPitch(gg_snd_FlakCannon, 2.0)
call SetSoundDistances(gg_snd_FlakCannon, 1750.0, 10000.0)
call SetSoundDistanceCutoff(gg_snd_FlakCannon, 2500.0)
set gg_snd_HeroDemonMissileLaunch1=s__Sound_SaveSound("Abilities\\Weapons\\DemonHunterMissile\\HeroDemonMissileLaunch1.wav" , false , true , true , 10 , 10 , "MissilesEAX")
call SetSoundParamsFromLabel(gg_snd_HeroDemonMissileLaunch1, "DemonHunterMissileLaunch")
call SetSoundDuration(gg_snd_HeroDemonMissileLaunch1, 1280)
call SetSoundPitch(gg_snd_HeroDemonMissileLaunch1, 1.2)
call SetSoundDistances(gg_snd_HeroDemonMissileLaunch1, 1500.0, 10000.0)
set gg_snd_HeroDemonMissileLaunch2=s__Sound_SaveSound("Abilities\\Weapons\\DemonHunterMissile\\HeroDemonMissileLaunch2.wav" , false , true , true , 10 , 10 , "MissilesEAX")
call SetSoundParamsFromLabel(gg_snd_HeroDemonMissileLaunch2, "DemonHunterMissileLaunch")
call SetSoundDuration(gg_snd_HeroDemonMissileLaunch2, 1219)
call SetSoundPitch(gg_snd_HeroDemonMissileLaunch2, 1.4)
call SetSoundDistances(gg_snd_HeroDemonMissileLaunch2, 1500.0, 10000.0)
set gg_snd_CrippleTarget1=s__Sound_SaveSound("Abilities\\Spells\\Undead\\Cripple\\CrippleTarget1.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_CrippleTarget1, "Cripple")
call SetSoundDuration(gg_snd_CrippleTarget1, 2316)
call SetSoundPitch(gg_snd_CrippleTarget1, 1.7)
call SetSoundDistances(gg_snd_CrippleTarget1, 1500.0, 10000.0)
set gg_snd_MetalHeavySliceMetal2=s__Sound_SaveSound("Sound\\Units\\Combat\\MetalHeavySliceMetal2.wav" , false , true , true , 10 , 10 , "CombatSoundsEAX")
call SetSoundParamsFromLabel(gg_snd_MetalHeavySliceMetal2, "MetalHeavySliceMetal")
call SetSoundDuration(gg_snd_MetalHeavySliceMetal2, 865)
call SetSoundDistances(gg_snd_MetalHeavySliceMetal2, 1500.0, 10000.0)
call SetSoundDistanceCutoff(gg_snd_MetalHeavySliceMetal2, 3000.0)
set gg_snd_MetalHeavySliceFlesh3=s__Sound_SaveSound("Sound\\Units\\Combat\\MetalHeavySliceFlesh3.wav" , false , true , true , 10 , 10 , "CombatSoundsEAX")
call SetSoundParamsFromLabel(gg_snd_MetalHeavySliceFlesh3, "MetalHeavySliceFlesh")
call SetSoundDuration(gg_snd_MetalHeavySliceFlesh3, 853)
call SetSoundDistances(gg_snd_MetalHeavySliceFlesh3, 1500.0, 10000.0)
call SetSoundDistanceCutoff(gg_snd_MetalHeavySliceFlesh3, 3000.0)
set gg_snd_ImpaleHit=s__Sound_SaveSound("Abilities\\Spells\\Undead\\Impale\\ImpaleHit.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_ImpaleHit, "ImpaleHit")
call SetSoundDuration(gg_snd_ImpaleHit, 1666)
call SetSoundPitch(gg_snd_ImpaleHit, 2.0)
set gg_snd_BattleShipDeath1=s__Sound_SaveSound("Doodads\\Northrend\\Water\\Battleship\\BattleShipDeath1.wav" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundParamsFromLabel(gg_snd_BattleShipDeath1, "BattleShipDeath")
call SetSoundDuration(gg_snd_BattleShipDeath1, 3065)
call SetSoundPitch(gg_snd_BattleShipDeath1, 2.0)
call SetSoundDistances(gg_snd_BattleShipDeath1, 2000.0, 10000.0)
set gg_snd_MetalHeavySliceFlesh2=s__Sound_SaveSound("Sound\\Units\\Combat\\MetalHeavySliceFlesh2.wav" , false , true , true , 10 , 10 , "CombatSoundsEAX")
call SetSoundParamsFromLabel(gg_snd_MetalHeavySliceFlesh2, "MetalHeavySliceFlesh")
call SetSoundDuration(gg_snd_MetalHeavySliceFlesh2, 946)
call SetSoundDistances(gg_snd_MetalHeavySliceFlesh2, 1300.0, 10000.0)
call SetSoundDistanceCutoff(gg_snd_MetalHeavySliceFlesh2, 3000.0)
set gg_snd_MetalHeavySliceFlesh1=s__Sound_SaveSound("Sound\\Units\\Combat\\MetalHeavySliceFlesh1.wav" , false , true , true , 10 , 10 , "CombatSoundsEAX")
call SetSoundParamsFromLabel(gg_snd_MetalHeavySliceFlesh1, "MetalHeavySliceFlesh")
call SetSoundDuration(gg_snd_MetalHeavySliceFlesh1, 1104)
call SetSoundDistances(gg_snd_MetalHeavySliceFlesh1, 1500.0, 10000.0)
call SetSoundDistanceCutoff(gg_snd_MetalHeavySliceFlesh1, 3000.0)
set gg_snd_TheBlackArrow=s__Sound_SaveSound("Abilities\\Spells\\Other\\BlackArrow\\TheBlackArrow.wav" , false , true , true , 10 , 10 , "MissilesEAX")
call SetSoundParamsFromLabel(gg_snd_TheBlackArrow, "BlackArrowHit")
call SetSoundDuration(gg_snd_TheBlackArrow, 1776)
call SetSoundPitch(gg_snd_TheBlackArrow, 1.5)
call SetSoundDistances(gg_snd_TheBlackArrow, 1500.0, 10000.0)
set gg_snd_ManaShieldCaster1=s__Sound_SaveSound("Abilities\\Spells\\Human\\ManaShield\\ManaShieldCaster1.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_ManaShieldCaster1, "ManaShieldCastSound")
call SetSoundDuration(gg_snd_ManaShieldCaster1, 2554)
call SetSoundPitch(gg_snd_ManaShieldCaster1, 1.4)
call SetSoundDistances(gg_snd_ManaShieldCaster1, 3000.0, 100000.0)
call SetSoundDistanceCutoff(gg_snd_ManaShieldCaster1, 3000.0)
set gg_snd_CloudOfFogLoop1=s__Sound_SaveSound("Abilities\\Spells\\Human\\CloudOfFog\\CloudOfFogLoop1.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_CloudOfFogLoop1, "CloudOfFogLoop")
call SetSoundDuration(gg_snd_CloudOfFogLoop1, 2038)
call SetSoundDistances(gg_snd_CloudOfFogLoop1, 800.0, 100000.0)
call SetSoundDistanceCutoff(gg_snd_CloudOfFogLoop1, 2400.0)
set gg_snd_MetalHeavySliceStone2=s__Sound_SaveSound("Sound\\Units\\Combat\\MetalHeavySliceStone2.wav" , false , true , true , 10 , 10 , "CombatSoundsEAX")
call SetSoundParamsFromLabel(gg_snd_MetalHeavySliceStone2, "MetalHeavySliceStone")
call SetSoundDuration(gg_snd_MetalHeavySliceStone2, 1348)
call SetSoundPitch(gg_snd_MetalHeavySliceStone2, 1.3)
call SetSoundDistances(gg_snd_MetalHeavySliceStone2, 1200.0, 10000.0)
call SetSoundDistanceCutoff(gg_snd_MetalHeavySliceStone2, 2500.0)
set gg_snd_MetalHeavySliceStone3=s__Sound_SaveSound("Sound\\Units\\Combat\\MetalHeavySliceStone3.wav" , false , true , true , 10 , 10 , "CombatSoundsEAX")
call SetSoundParamsFromLabel(gg_snd_MetalHeavySliceStone3, "MetalHeavySliceStone")
call SetSoundDuration(gg_snd_MetalHeavySliceStone3, 1150)
call SetSoundPitch(gg_snd_MetalHeavySliceStone3, 1.7)
set gg_snd_MetalHeavySliceWood1=s__Sound_SaveSound("Sound\\Units\\Combat\\MetalHeavySliceWood1.wav" , false , true , true , 10 , 10 , "CombatSoundsEAX")
call SetSoundParamsFromLabel(gg_snd_MetalHeavySliceWood1, "MetalHeavySliceWood")
call SetSoundDuration(gg_snd_MetalHeavySliceWood1, 1072)
call SetSoundPitch(gg_snd_MetalHeavySliceWood1, 1.2)
call SetSoundDistances(gg_snd_MetalHeavySliceWood1, 1500.0, 10000.0)
call SetSoundDistanceCutoff(gg_snd_MetalHeavySliceWood1, 3000.0)
set gg_snd_WoodHeavyBashStone1=s__Sound_SaveSound("Sound\\Units\\Combat\\WoodHeavyBashStone1.wav" , false , true , true , 10 , 10 , "CombatSoundsEAX")
call SetSoundParamsFromLabel(gg_snd_WoodHeavyBashStone1, "WoodHeavyBashStone")
call SetSoundDuration(gg_snd_WoodHeavyBashStone1, 801)
call SetSoundVolume(gg_snd_WoodHeavyBashStone1, 100)
call SetSoundDistances(gg_snd_WoodHeavyBashStone1, 1200.0, 10000.0)
call SetSoundDistanceCutoff(gg_snd_WoodHeavyBashStone1, 2500.0)
set gg_snd_WoodHeavyBashStone2=s__Sound_SaveSound("Sound\\Units\\Combat\\WoodHeavyBashStone2.wav" , false , true , true , 10 , 10 , "CombatSoundsEAX")
call SetSoundParamsFromLabel(gg_snd_WoodHeavyBashStone2, "WoodHeavyBashStone")
call SetSoundDuration(gg_snd_WoodHeavyBashStone2, 639)
call SetSoundVolume(gg_snd_WoodHeavyBashStone2, 110)
call SetSoundDistances(gg_snd_WoodHeavyBashStone2, 1500.0, 10000.0)
call SetSoundDistanceCutoff(gg_snd_WoodHeavyBashStone2, 3000.0)
set gg_snd_DemonHunterMissileHit2=s__Sound_SaveSound("Abilities\\Weapons\\DemonHunterMissile\\DemonHunterMissileHit2.wav" , false , true , true , 10 , 10 , "MissilesEAX")
call SetSoundParamsFromLabel(gg_snd_DemonHunterMissileHit2, "DemonHunterMissileHit")
call SetSoundDuration(gg_snd_DemonHunterMissileHit2, 795)
call SetSoundPitch(gg_snd_DemonHunterMissileHit2, 1.2)
call SetSoundDistances(gg_snd_DemonHunterMissileHit2, 1500.0, 10000.0)
set gg_snd_FrostBoltLaunch1=s__Sound_SaveSound("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltLaunch1.wav" , false , true , true , 10 , 10 , "MissilesEAX")
call SetSoundParamsFromLabel(gg_snd_FrostBoltLaunch1, "FrostBoltLaunch")
call SetSoundDuration(gg_snd_FrostBoltLaunch1, 1100)
call SetSoundDistances(gg_snd_FrostBoltLaunch1, 1350.0, 10000.0)
set gg_snd_FrostBoltHit1=s__Sound_SaveSound("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltHit1.wav" , false , true , true , 10 , 10 , "MissilesEAX")
call SetSoundParamsFromLabel(gg_snd_FrostBoltHit1, "FrostBoltHit")
call SetSoundDuration(gg_snd_FrostBoltHit1, 1347)
call SetSoundDistances(gg_snd_FrostBoltHit1, 1350.0, 10000.0)
set gg_snd_ColdArrow1=s__Sound_SaveSound("Abilities\\Weapons\\ColdArrow\\ColdArrow1.wav" , false , true , true , 10 , 10 , "MissilesEAX")
call SetSoundParamsFromLabel(gg_snd_ColdArrow1, "ColdArrow")
call SetSoundDuration(gg_snd_ColdArrow1, 1884)
call SetSoundPitch(gg_snd_ColdArrow1, 2.0)
call SetSoundDistances(gg_snd_ColdArrow1, 1200.0, 10000.0)
set gg_snd_BristleBackMissileLaunch3=s__Sound_SaveSound("Abilities\\Weapons\\BristleBackMissile\\BristleBackMissileLaunch3.wav" , false , true , true , 10 , 10 , "MissilesEAX")
call SetSoundParamsFromLabel(gg_snd_BristleBackMissileLaunch3, "BristleBackMissileLaunch")
call SetSoundDuration(gg_snd_BristleBackMissileLaunch3, 334)
call SetSoundPitch(gg_snd_BristleBackMissileLaunch3, 1.5)
set gg_snd_Comradeship=s__Sound_SaveSound("Sound\\Music\\mp3Music\\Comradeship.mp3" , false , false , false , 10 , 10 , "DefaultEAXON")
call SetSoundDuration(gg_snd_Comradeship, 130)
call SetSoundChannel(gg_snd_Comradeship, 0)
call SetSoundVolume(gg_snd_Comradeship, 127)
call SetSoundPitch(gg_snd_Comradeship, 1.0)
set gg_snd_QuestNew=s__Sound_SaveSound("Sound\\Interface\\QuestNew.wav" , false , false , false , 10 , 10 , "DefaultEAXON")
call SetSoundParamsFromLabel(gg_snd_QuestNew, "QuestNew")
call SetSoundDuration(gg_snd_QuestNew, 3750)
call SetSoundVolume(gg_snd_QuestNew, 127)
set gg_snd_QuestCompleted=s__Sound_SaveSound("Sound\\Interface\\QuestCompleted.wav" , false , false , false , 10 , 10 , "DefaultEAXON")
call SetSoundParamsFromLabel(gg_snd_QuestCompleted, "QuestCompleted")
call SetSoundDuration(gg_snd_QuestCompleted, 5155)
call SetSoundVolume(gg_snd_QuestCompleted, 127)
set gg_snd_Rescue=s__Sound_SaveSound("Sound\\Interface\\Rescue.wav" , false , false , false , 10 , 10 , "DefaultEAXON")
call SetSoundParamsFromLabel(gg_snd_Rescue, "Rescue")
call SetSoundDuration(gg_snd_Rescue, 3796)
call SetSoundVolume(gg_snd_Rescue, 127)
set gg_snd_ArrangedTeamInvitation=s__Sound_SaveSound("Sound\\Interface\\ArrangedTeamInvitation.wav" , false , false , false , 10 , 10 , "DefaultEAXON")
call SetSoundParamsFromLabel(gg_snd_ArrangedTeamInvitation, "ArrangedTeamInvitation")
call SetSoundDuration(gg_snd_ArrangedTeamInvitation, 2914)
call SetSoundPitch(gg_snd_ArrangedTeamInvitation, 0.8)
set gg_snd_Doom=s__Sound_SaveSound("Sound\\Music\\mp3Music\\Doom.mp3" , false , false , false , 10 , 10 , "DefaultEAXON")
call SetSoundDuration(gg_snd_Doom, 130)
call SetSoundChannel(gg_snd_Doom, 0)
call SetSoundVolume(gg_snd_Doom, 127)
call SetSoundPitch(gg_snd_Doom, 2.0)
set gg_snd_MetalHeavyBashMetal3=s__Sound_SaveSound("Sound\\Units\\Combat\\MetalHeavyBashMetal3.wav" , false , true , true , 10 , 10 , "CombatSoundsEAX")
call SetSoundParamsFromLabel(gg_snd_MetalHeavyBashMetal3, "MetalHeavyBashMetal")
call SetSoundDuration(gg_snd_MetalHeavyBashMetal3, 1196)
call SetSoundDistances(gg_snd_MetalHeavyBashMetal3, 1000.0, 10000.0)
call SetSoundDistanceCutoff(gg_snd_MetalHeavyBashMetal3, 3000.0)
set gg_snd_OrbOfCorruptionTarget=s__Sound_SaveSound("Abilities\\Spells\\Items\\OrbCorruption\\OrbOfCorruptionTarget.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_OrbOfCorruptionTarget, "OrbOfCorruptionHit")
call SetSoundDuration(gg_snd_OrbOfCorruptionTarget, 2920)
call SetSoundPitch(gg_snd_OrbOfCorruptionTarget, 2.0)
call SetSoundDistances(gg_snd_OrbOfCorruptionTarget, 1000.0, 10000.0)
set gg_snd_Burrow=s__Sound_SaveSound("Abilities\\Spells\\Undead\\Burrow\\Burrow.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_Burrow, "Burrow")
call SetSoundDuration(gg_snd_Burrow, 1950)
call SetSoundDistances(gg_snd_Burrow, 1000.0, 10000.0)
set gg_snd_CurseTarget1=s__Sound_SaveSound("Abilities\\Spells\\Undead\\Curse\\CurseTarget1.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_CurseTarget1, "Curse")
call SetSoundDuration(gg_snd_CurseTarget1, 1034)
call SetSoundDistances(gg_snd_CurseTarget1, 1000.0, 10000.0)
set gg_snd_GryphonRiderMissileLaunch1=s__Sound_SaveSound("Abilities\\Weapons\\GryphonRiderMissile\\GryphonRiderMissileLaunch1.wav" , false , true , true , 10 , 10 , "MissilesEAX")
call SetSoundParamsFromLabel(gg_snd_GryphonRiderMissileLaunch1, "GryphonRiderMissileLaunch")
call SetSoundDuration(gg_snd_GryphonRiderMissileLaunch1, 669)
call SetSoundPitch(gg_snd_GryphonRiderMissileLaunch1, 1.5)
set gg_snd_ChimaeraAlternateMissileLaunch2=s__Sound_SaveSound("Abilities\\Weapons\\ChimaeraAcidMissile\\ChimaeraAlternateMissileLaunch2.wav" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundParamsFromLabel(gg_snd_ChimaeraAlternateMissileLaunch2, "ChimaeraAcidLaunch")
call SetSoundDuration(gg_snd_ChimaeraAlternateMissileLaunch2, 868)
call SetSoundDistances(gg_snd_ChimaeraAlternateMissileLaunch2, 1000.0, 10000.0)
set gg_snd_HowlOfTerror=s__Sound_SaveSound("Abilities\\Spells\\Other\\HowlOfTerror\\HowlOfTerror.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_HowlOfTerror, "HowlOfTerror")
call SetSoundDuration(gg_snd_HowlOfTerror, 3065)
call SetSoundPitch(gg_snd_HowlOfTerror, 0.8)
call SetSoundDistances(gg_snd_HowlOfTerror, 1500.0, 10000.0)
call SetSoundDistanceCutoff(gg_snd_HowlOfTerror, 5000.0)
set gg_snd_AbominationYesAttack1=s__Sound_SaveSound("Units\\Undead\\Abomination\\AbominationYesAttack1.wav" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundParamsFromLabel(gg_snd_AbominationYesAttack1, "AbominationYesAttack")
call SetSoundDuration(gg_snd_AbominationYesAttack1, 1349)
call SetSoundDistances(gg_snd_AbominationYesAttack1, 1000.0, 10000.0)
call SetSoundDistanceCutoff(gg_snd_AbominationYesAttack1, 3000.0)
set gg_snd_AbominationYesAttack3=s__Sound_SaveSound("Units\\Undead\\Abomination\\AbominationYesAttack3.wav" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundParamsFromLabel(gg_snd_AbominationYesAttack3, "AbominationYesAttack")
call SetSoundDuration(gg_snd_AbominationYesAttack3, 1364)
call SetSoundDistances(gg_snd_AbominationYesAttack3, 1000.0, 10000.0)
call SetSoundDistanceCutoff(gg_snd_AbominationYesAttack3, 3000.0)
set gg_snd_ArthasTheme=s__Sound_SaveSound("Sound\\Music\\mp3Music\\ArthasTheme.mp3" , false , false , false , 10 , 10 , "DefaultEAXON")
call SetSoundDuration(gg_snd_ArthasTheme, 122295)
call SetSoundChannel(gg_snd_ArthasTheme, 0)
call SetSoundVolume(gg_snd_ArthasTheme, 127)
call SetSoundPitch(gg_snd_ArthasTheme, 1.4)
set gg_snd_IllidansTheme=s__Sound_SaveSound("Sound\\Music\\mp3Music\\IllidansTheme.mp3" , false , false , false , 10 , 10 , "DefaultEAXON")
call SetSoundDuration(gg_snd_IllidansTheme, 108006)
call SetSoundChannel(gg_snd_IllidansTheme, 0)
call SetSoundVolume(gg_snd_IllidansTheme, 127)
call SetSoundPitch(gg_snd_IllidansTheme, 2.0)
set gg_snd_DeathPactTargetBirth1=s__Sound_SaveSound("Abilities\\Spells\\Undead\\DeathPact\\DeathPactTargetBirth1.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_DeathPactTargetBirth1, "DeathPactTarget")
call SetSoundDuration(gg_snd_DeathPactTargetBirth1, 1635)
call SetSoundPitch(gg_snd_DeathPactTargetBirth1, 2.0)
set gg_snd_DarkRitualTarget1=s__Sound_SaveSound("Abilities\\Spells\\Undead\\DarkRitual\\DarkRitualTarget1.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_DarkRitualTarget1, "DarkRitual")
call SetSoundDuration(gg_snd_DarkRitualTarget1, 3007)
call SetSoundPitch(gg_snd_DarkRitualTarget1, 2.0)
call SetSoundDistances(gg_snd_DarkRitualTarget1, 1250.0, 10000.0)
set gg_snd_RaiseSkeleton=s__Sound_SaveSound("Abilities\\Spells\\Undead\\RaiseSkeletonWarrior\\RaiseSkeleton.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_RaiseSkeleton, "RaiseSkeletonArcher")
call SetSoundDuration(gg_snd_RaiseSkeleton, 2330)
call SetSoundDistances(gg_snd_RaiseSkeleton, 1000.0, 10000.0)
set gg_snd_SadMystery=s__Sound_SaveSound("Sound\\Music\\mp3Music\\SadMystery.mp3" , false , false , false , 10 , 10 , "DefaultEAXON")
call SetSoundDuration(gg_snd_SadMystery, 130)
call SetSoundChannel(gg_snd_SadMystery, 0)
call SetSoundVolume(gg_snd_SadMystery, 127)
call SetSoundPitch(gg_snd_SadMystery, 1.9)
set gg_snd_BattleNetTick=s__Sound_SaveSound("Sound\\Interface\\BattleNetTick.wav" , false , false , false , 10 , 10 , "DefaultEAXON")
call SetSoundParamsFromLabel(gg_snd_BattleNetTick, "ChatroomTimerTick")
call SetSoundDuration(gg_snd_BattleNetTick, 476)
call SetSoundVolume(gg_snd_BattleNetTick, 127)
set gg_snd_GameFound=s__Sound_SaveSound("Sound\\Interface\\GameFound.wav" , false , false , false , 10 , 10 , "DefaultEAXON")
call SetSoundParamsFromLabel(gg_snd_GameFound, "GameFound")
call SetSoundDuration(gg_snd_GameFound, 7488)
set gg_snd_Tomes01=s__Sound_SaveSound("Abilities\\Spells\\Items\\AIam\\Tomes.wav" , false , false , false , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_Tomes01, "Tome")
call SetSoundDuration(gg_snd_Tomes01, 1770)
call SetSoundPitch(gg_snd_Tomes01, 0.5)
set gg_snd_Shockwave01=s__Sound_SaveSound("Abilities\\Spells\\Orc\\Shockwave\\Shockwave.wav" , false , false , false , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_Shockwave01, "ShockWave")
call SetSoundDuration(gg_snd_Shockwave01, 2847)
call SetSoundPitch(gg_snd_Shockwave01, 2.0)
set gg_snd_ThunderClapCaster=s__Sound_SaveSound("Abilities\\Spells\\Human\\ThunderClap\\ThunderClapCaster.wav" , false , false , false , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_ThunderClapCaster, "ThunderClap")
call SetSoundDuration(gg_snd_ThunderClapCaster, 3451)
call SetSoundPitch(gg_snd_ThunderClapCaster, 2.0)
set gg_snd_CatapultMissile4=s__Sound_SaveSound("Abilities\\Weapons\\Catapult\\CatapultMissile4.wav" , false , true , true , 10 , 10 , "MissilesEAX")
call SetSoundParamsFromLabel(gg_snd_CatapultMissile4, "Catapult")
call SetSoundDuration(gg_snd_CatapultMissile4, 1216)
call SetSoundDistances(gg_snd_CatapultMissile4, 1500.0, 10000.0)
set gg_snd_Mainscreen=s__Sound_SaveSound("Sound\\Music\\mp3Music\\Mainscreen.mp3" , false , false , false , 10 , 10 , "DefaultEAXON")
call SetSoundDuration(gg_snd_Mainscreen, 130)
call SetSoundChannel(gg_snd_Mainscreen, 0)
call SetSoundVolume(gg_snd_Mainscreen, 127)
call SetSoundPitch(gg_snd_Mainscreen, 1.5)
set gg_snd_Tension=s__Sound_SaveSound("Sound\\Music\\mp3Music\\Tension.mp3" , false , false , false , 10 , 10 , "DefaultEAXON")
call SetSoundDuration(gg_snd_Tension, 130)
call SetSoundChannel(gg_snd_Tension, 0)
call SetSoundVolume(gg_snd_Tension, 127)
call SetSoundPitch(gg_snd_Tension, 1.0)
set gg_snd_AncestralGuardianMissileLaunch=s__Sound_SaveSound("Abilities\\Weapons\\AncestralGuardianMissile\\AncestralGuardianMissileLaunch.wav" , false , true , true , 10 , 10 , "MissilesEAX")
call SetSoundParamsFromLabel(gg_snd_AncestralGuardianMissileLaunch, "AncestralGuardianMissileLaunch")
call SetSoundDuration(gg_snd_AncestralGuardianMissileLaunch, 1045)
call SetSoundPitch(gg_snd_AncestralGuardianMissileLaunch, 2.0)
call SetSoundDistances(gg_snd_AncestralGuardianMissileLaunch, 1500.0, 10000.0)
set gg_snd_RockHeavyBashMetal1=s__Sound_SaveSound("Sound\\Units\\Combat\\RockHeavyBashMetal1.wav" , false , false , false , 10 , 10 , "CombatSoundsEAX")
call SetSoundParamsFromLabel(gg_snd_RockHeavyBashMetal1, "RockHeavyBashMetal")
call SetSoundDuration(gg_snd_RockHeavyBashMetal1, 1411)
call SetSoundPitch(gg_snd_RockHeavyBashMetal1, 0.9)
set gg_snd_CannonTowerMissile2=s__Sound_SaveSound("Abilities\\Weapons\\CannonTowerMissile\\CannonTowerMissile2.wav" , false , false , false , 10 , 10 , "MissilesEAX")
call SetSoundParamsFromLabel(gg_snd_CannonTowerMissile2, "CannonTowerMissile")
call SetSoundDuration(gg_snd_CannonTowerMissile2, 2043)
set gg_snd_ThunderClapCaster01=s__Sound_SaveSound("Abilities\\Spells\\Human\\ThunderClap\\ThunderClapCaster.wav" , false , false , false , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_ThunderClapCaster01, "ThunderClap")
call SetSoundDuration(gg_snd_ThunderClapCaster01, 3451)
set gg_snd_BloodElfTheme=s__Sound_SaveSound("Sound\\Music\\mp3Music\\BloodElfTheme.mp3" , false , false , false , 10 , 10 , "DefaultEAXON")
call SetSoundDuration(gg_snd_BloodElfTheme, 144552)
call SetSoundChannel(gg_snd_BloodElfTheme, 0)
call SetSoundVolume(gg_snd_BloodElfTheme, 127)
call SetSoundPitch(gg_snd_BloodElfTheme, 2.0)
set gg_snd_PursuitTheme=s__Sound_SaveSound("Sound\\Music\\mp3Music\\PursuitTheme.mp3" , false , false , false , 10 , 10 , "DefaultEAXON")
call SetSoundDuration(gg_snd_PursuitTheme, 82537)
call SetSoundChannel(gg_snd_PursuitTheme, 0)
call SetSoundVolume(gg_snd_PursuitTheme, 127)
call SetSoundPitch(gg_snd_PursuitTheme, 1.2)
set gg_snd_Warning=s__Sound_SaveSound("Sound\\Interface\\Warning.wav" , false , false , false , 10 , 10 , "DefaultEAXON")
call SetSoundParamsFromLabel(gg_snd_Warning, "Warning")
call SetSoundDuration(gg_snd_Warning, 1904)
call SetSoundVolume(gg_snd_Warning, 100)
set gg_snd_WoodHeavyBashFlesh1=s__Sound_SaveSound("Sound\\Units\\Combat\\WoodHeavyBashFlesh1.wav" , false , false , false , 10 , 10 , "CombatSoundsEAX")
call SetSoundParamsFromLabel(gg_snd_WoodHeavyBashFlesh1, "WoodHeavyBashFlesh")
call SetSoundDuration(gg_snd_WoodHeavyBashFlesh1, 1051)
set gg_snd_WoodHeavyBashFlesh2=s__Sound_SaveSound("Sound\\Units\\Combat\\WoodHeavyBashFlesh2.wav" , false , false , false , 10 , 10 , "CombatSoundsEAX")
call SetSoundParamsFromLabel(gg_snd_WoodHeavyBashFlesh2, "WoodHeavyBashFlesh")
call SetSoundDuration(gg_snd_WoodHeavyBashFlesh2, 903)
set gg_snd_WoodHeavyBashFlesh3=s__Sound_SaveSound("Sound\\Units\\Combat\\WoodHeavyBashFlesh3.wav" , false , false , false , 10 , 10 , "CombatSoundsEAX")
call SetSoundParamsFromLabel(gg_snd_WoodHeavyBashFlesh3, "WoodHeavyBashFlesh")
call SetSoundDuration(gg_snd_WoodHeavyBashFlesh3, 923)
set gg_snd_ImpaleHit01=s__Sound_SaveSound("Abilities\\Spells\\Undead\\Impale\\ImpaleHit.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_ImpaleHit01, "ImpaleHit")
call SetSoundDuration(gg_snd_ImpaleHit01, 1666)
call SetSoundPitch(gg_snd_ImpaleHit01, 0.9)
call SetSoundDistances(gg_snd_ImpaleHit01, 1250.0, 10000.0)
set gg_snd_QuestLog=s__Sound_SaveSound("Sound\\Interface\\QuestLog.wav" , false , false , false , 10 , 10 , "DefaultEAXON")
call SetSoundParamsFromLabel(gg_snd_QuestLog, "QuestUpdate")
call SetSoundDuration(gg_snd_QuestLog, 2276)
call SetSoundVolume(gg_snd_QuestLog, 115)
call SetSoundPitch(gg_snd_QuestLog, 0.8)
set gg_snd_AutoCastButtonClick1=s__Sound_SaveSound("Sound\\Interface\\AutoCastButtonClick1.wav" , false , false , false , 10 , 10 , "DefaultEAXON")
call SetSoundParamsFromLabel(gg_snd_AutoCastButtonClick1, "AutoCastButtonClick")
call SetSoundDuration(gg_snd_AutoCastButtonClick1, 1132)
call SetSoundPitch(gg_snd_AutoCastButtonClick1, 1.0)
set gg_snd_ArrangedTeamInvitation01=s__Sound_SaveSound("Sound\\Interface\\ArrangedTeamInvitation.wav" , false , false , false , 10 , 10 , "")
call SetSoundParamsFromLabel(gg_snd_ArrangedTeamInvitation01, "ArrangedTeamInvitation")
call SetSoundDuration(gg_snd_ArrangedTeamInvitation01, 2914)
set gg_snd_tr=s__Sound_SaveSound("tr.mp3" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundDuration(gg_snd_tr, 1515)
call SetSoundChannel(gg_snd_tr, 0)
call SetSoundVolume(gg_snd_tr, 100)
call SetSoundPitch(gg_snd_tr, 1.0)
call SetSoundDistances(gg_snd_tr, 1000.0, 1800.0)
call SetSoundDistanceCutoff(gg_snd_tr, 2000.0)
call SetSoundConeAngles(gg_snd_tr, 0.0, 0.0, 127)
call SetSoundConeOrientation(gg_snd_tr, 0.0, 0.0, 0.0)
set gg_snd_BreathOfFire1=s__Sound_SaveSound("Abilities\\Spells\\Other\\BreathOfFire\\BreathOfFire1.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_BreathOfFire1, "BreathOfFire")
call SetSoundDuration(gg_snd_BreathOfFire1, 1628)
call SetSoundPitch(gg_snd_BreathOfFire1, 0.5)
call SetSoundDistances(gg_snd_BreathOfFire1, 1000.0, 10000.0)
set gg_snd_HuntressMissileLaunch=s__Sound_SaveSound("Abilities\\Weapons\\SentinelMissile\\HuntressMissileLaunch.wav" , false , true , true , 10 , 10 , "MissilesEAX")
call SetSoundParamsFromLabel(gg_snd_HuntressMissileLaunch, "SentinelMissileLaunch")
call SetSoundDuration(gg_snd_HuntressMissileLaunch, 636)
call SetSoundPitch(gg_snd_HuntressMissileLaunch, 2.0)
set gg_snd_SearingArrowTarget2=s__Sound_SaveSound("Abilities\\Weapons\\SearingArrow\\SearingArrowTarget2.wav" , false , true , true , 10 , 10 , "MissilesEAX")
call SetSoundParamsFromLabel(gg_snd_SearingArrowTarget2, "SearingArrowHit")
call SetSoundDuration(gg_snd_SearingArrowTarget2, 740)
call SetSoundPitch(gg_snd_SearingArrowTarget2, 0.9)
call SetSoundDistances(gg_snd_SearingArrowTarget2, 2000.0, 10000.0)
set gg_snd_CannonTowerMissile3=s__Sound_SaveSound("Abilities\\Weapons\\CannonTowerMissile\\CannonTowerMissile3.wav" , false , true , true , 10 , 10 , "MissilesEAX")
call SetSoundParamsFromLabel(gg_snd_CannonTowerMissile3, "CannonTowerMissile")
call SetSoundDuration(gg_snd_CannonTowerMissile3, 2206)
call SetSoundPitch(gg_snd_CannonTowerMissile3, 0.9)
call SetSoundDistances(gg_snd_CannonTowerMissile3, 1500.0, 10000.0)
set gg_snd_ReviveNightElf=s__Sound_SaveSound("Abilities\\Spells\\NightElf\\ReviveNightElf\\ReviveNightElf.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_ReviveNightElf, "ReviveNightElf")
call SetSoundDuration(gg_snd_ReviveNightElf, 3268)
call SetSoundVolume(gg_snd_ReviveNightElf, 100)
call SetSoundPitch(gg_snd_ReviveNightElf, 1.4)
call SetSoundDistances(gg_snd_ReviveNightElf, 2000.0, 10000.0)
call SetSoundDistanceCutoff(gg_snd_ReviveNightElf, 2500.0)
set gg_snd_RainOfFireTarget1=s__Sound_SaveSound("Abilities\\Spells\\Demon\\RainOfFire\\RainOfFireTarget1.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_RainOfFireTarget1, "StarfallTarget")
call SetSoundDuration(gg_snd_RainOfFireTarget1, 3000)
call SetSoundPitch(gg_snd_RainOfFireTarget1, 0.7)
call SetSoundDistances(gg_snd_RainOfFireTarget1, 2000.0, 10000.0)
set gg_snd_SargerasRoar=s__Sound_SaveSound("Sound\\Ambient\\DoodadEffects\\SargerasRoar.wav" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundParamsFromLabel(gg_snd_SargerasRoar, "SargerasRoar")
call SetSoundDuration(gg_snd_SargerasRoar, 4481)
call SetSoundPitch(gg_snd_SargerasRoar, 0.7)
set gg_snd_RollingThunder1=s__Sound_SaveSound("Sound\\Ambient\\DoodadEffects\\RollingThunder1.wav" , false , false , false , 10 , 10 , "DefaultEAXON")
call SetSoundParamsFromLabel(gg_snd_RollingThunder1, "RollingThunderSound")
call SetSoundDuration(gg_snd_RollingThunder1, 3831)
set gg_snd_GargoyleMissileLaunch1=s__Sound_SaveSound("Abilities\\Weapons\\GargoyleMissile\\GargoyleMissileLaunch1.wav" , false , true , true , 10 , 10 , "MissilesEAX")
call SetSoundParamsFromLabel(gg_snd_GargoyleMissileLaunch1, "GargoyleMissileLaunch")
call SetSoundDuration(gg_snd_GargoyleMissileLaunch1, 868)
call SetSoundPitch(gg_snd_GargoyleMissileLaunch1, 1.2)
call SetSoundDistances(gg_snd_GargoyleMissileLaunch1, 1000.0, 10000.0)
set gg_snd_TinkerMorphAlt1=s__Sound_SaveSound("Units\\Creeps\\HeroTinker\\TinkerMorphAlt1.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_TinkerMorphAlt1, "HeroTinkerMorphAlternate")
call SetSoundDuration(gg_snd_TinkerMorphAlt1, 2711)
call SetSoundPitch(gg_snd_TinkerMorphAlt1, 1.1)
call SetSoundDistances(gg_snd_TinkerMorphAlt1, 1250.0, 10000.0)
set gg_snd_Incinerate1=s__Sound_SaveSound("Abilities\\Spells\\Other\\Incinerate\\Incinerate1.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_Incinerate1, "IncinerateDeath")
call SetSoundDuration(gg_snd_Incinerate1, 2717)
call SetSoundPitch(gg_snd_Incinerate1, 1.2)
call SetSoundDistances(gg_snd_Incinerate1, 1200.0, 10000.0)
set gg_snd_WaterElementalMissile3=s__Sound_SaveSound("Abilities\\Weapons\\WaterElementalMissile\\WaterElementalMissile3.wav" , false , true , true , 10 , 10 , "MissilesEAX")
call SetSoundParamsFromLabel(gg_snd_WaterElementalMissile3, "WaterElementalMissile")
call SetSoundDuration(gg_snd_WaterElementalMissile3, 1509)
call SetSoundPitch(gg_snd_WaterElementalMissile3, 2.0)
call SetSoundDistances(gg_snd_WaterElementalMissile3, 1200.0, 10000.0)
set gg_snd_MetalLightChopMetal2=s__Sound_SaveSound("Sound\\Units\\Combat\\MetalLightChopMetal2.wav" , false , true , true , 10 , 10 , "CombatSoundsEAX")
call SetSoundParamsFromLabel(gg_snd_MetalLightChopMetal2, "MetalLightChopMetal")
call SetSoundDuration(gg_snd_MetalLightChopMetal2, 402)
call SetSoundPitch(gg_snd_MetalLightChopMetal2, 2.0)
call SetSoundDistances(gg_snd_MetalLightChopMetal2, 1200.0, 10000.0)
call SetSoundDistanceCutoff(gg_snd_MetalLightChopMetal2, 3000.0)
set gg_snd_FeralSpiritTarget1=s__Sound_SaveSound("Abilities\\Spells\\Orc\\FeralSpirit\\FeralSpiritTarget1.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_FeralSpiritTarget1, "FeralSpiritDone")
call SetSoundDuration(gg_snd_FeralSpiritTarget1, 2436)
call SetSoundPitch(gg_snd_FeralSpiritTarget1, 1.5)
call SetSoundDistances(gg_snd_FeralSpiritTarget1, 1500.0, 10000.0)
set gg_snd_FrostArrowHit1=s__Sound_SaveSound("Abilities\\Spells\\Other\\FrostArrows\\FrostArrowHit1.wav" , false , true , true , 10 , 10 , "MissilesEAX")
call SetSoundParamsFromLabel(gg_snd_FrostArrowHit1, "FrostArrowHit")
call SetSoundDuration(gg_snd_FrostArrowHit1, 1115)
call SetSoundPitch(gg_snd_FrostArrowHit1, 0.9)
call SetSoundDistances(gg_snd_FrostArrowHit1, 1250.0, 10000.0)
set gg_snd_LightningShieldTarget=s__Sound_SaveSound("Abilities\\Spells\\Orc\\LightningShield\\LightningShieldTarget.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_LightningShieldTarget, "LightningShield")
call SetSoundDuration(gg_snd_LightningShieldTarget, 3878)
call SetSoundDistances(gg_snd_LightningShieldTarget, 1250.0, 10000.0)
set gg_snd_WoodHeavyBashStone3=s__Sound_SaveSound("Sound\\Units\\Combat\\WoodHeavyBashStone3.wav" , false , true , true , 10 , 10 , "CombatSoundsEAX")
call SetSoundParamsFromLabel(gg_snd_WoodHeavyBashStone3, "WoodHeavyBashStone")
call SetSoundDuration(gg_snd_WoodHeavyBashStone3, 897)
call SetSoundPitch(gg_snd_WoodHeavyBashStone3, 2.0)
call SetSoundDistances(gg_snd_WoodHeavyBashStone3, 1250.0, 10000.0)
call SetSoundDistanceCutoff(gg_snd_WoodHeavyBashStone3, 3000.0)
set gg_snd_MetalHeavyChopFlesh3=s__Sound_SaveSound("Sound\\Units\\Combat\\MetalHeavyChopFlesh3.wav" , false , true , true , 10 , 10 , "CombatSoundsEAX")
call SetSoundParamsFromLabel(gg_snd_MetalHeavyChopFlesh3, "MetalHeavyChopFlesh")
call SetSoundDuration(gg_snd_MetalHeavyChopFlesh3, 758)
call SetSoundPitch(gg_snd_MetalHeavyChopFlesh3, 2.0)
call SetSoundDistances(gg_snd_MetalHeavyChopFlesh3, 1000.0, 10000.0)
call SetSoundDistanceCutoff(gg_snd_MetalHeavyChopFlesh3, 3000.0)
set gg_snd_00fb_0000=s__Sound_SaveSound("00fb_0000.mp3" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundDuration(gg_snd_00fb_0000, 966)
call SetSoundChannel(gg_snd_00fb_0000, 0)
call SetSoundVolume(gg_snd_00fb_0000, 127)
call SetSoundPitch(gg_snd_00fb_0000, 1.0)
call SetSoundDistances(gg_snd_00fb_0000, 1000.0, 1800.0)
call SetSoundDistanceCutoff(gg_snd_00fb_0000, 2000.0)
call SetSoundConeAngles(gg_snd_00fb_0000, 0.0, 0.0, 127)
call SetSoundConeOrientation(gg_snd_00fb_0000, 0.0, 0.0, 0.0)
set gg_snd_00fb_0001=s__Sound_SaveSound("00fb_0001.mp3" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundDuration(gg_snd_00fb_0001, 784)
call SetSoundChannel(gg_snd_00fb_0001, 0)
call SetSoundVolume(gg_snd_00fb_0001, 127)
call SetSoundPitch(gg_snd_00fb_0001, 1.0)
call SetSoundDistances(gg_snd_00fb_0001, 1000.0, 1800.0)
call SetSoundDistanceCutoff(gg_snd_00fb_0001, 2000.0)
call SetSoundConeAngles(gg_snd_00fb_0001, 0.0, 0.0, 127)
call SetSoundConeOrientation(gg_snd_00fb_0001, 0.0, 0.0, 0.0)
set gg_snd_xiaoaiRyinxiao=s__Sound_SaveSound("xiaoaiRyinxiao.mp3" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundDuration(gg_snd_xiaoaiRyinxiao, 1881)
call SetSoundChannel(gg_snd_xiaoaiRyinxiao, 0)
call SetSoundVolume(gg_snd_xiaoaiRyinxiao, 127)
call SetSoundPitch(gg_snd_xiaoaiRyinxiao, 1.0)
call SetSoundDistances(gg_snd_xiaoaiRyinxiao, 1000.0, 1800.0)
call SetSoundDistanceCutoff(gg_snd_xiaoaiRyinxiao, 2000.0)
call SetSoundConeAngles(gg_snd_xiaoaiRyinxiao, 0.0, 0.0, 127)
call SetSoundConeOrientation(gg_snd_xiaoaiRyinxiao, 0.0, 0.0, 0.0)
set gg_snd_linaliQ2=s__Sound_SaveSound("linaliQ2.mp3" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundDuration(gg_snd_linaliQ2, 1045)
call SetSoundChannel(gg_snd_linaliQ2, 0)
call SetSoundVolume(gg_snd_linaliQ2, 127)
call SetSoundPitch(gg_snd_linaliQ2, 1.0)
call SetSoundDistances(gg_snd_linaliQ2, 1000.0, 1800.0)
call SetSoundDistanceCutoff(gg_snd_linaliQ2, 2000.0)
call SetSoundConeAngles(gg_snd_linaliQ2, 0.0, 0.0, 127)
call SetSoundConeOrientation(gg_snd_linaliQ2, 0.0, 0.0, 0.0)
set gg_snd_WindWalk=s__Sound_SaveSound("Abilities\\Spells\\Orc\\WindWalk\\WindWalk.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_WindWalk, "WindWalk")
call SetSoundDuration(gg_snd_WindWalk, 2136)
call SetSoundPitch(gg_snd_WindWalk, 2.0)
call SetSoundDistances(gg_snd_WindWalk, 1200.0, 100000.0)
call SetSoundDistanceCutoff(gg_snd_WindWalk, 3000.0)
set gg_snd_PolymorphDone=s__Sound_SaveSound("Abilities\\Spells\\Human\\Polymorph\\PolymorphDone.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_PolymorphDone, "PolymorphDone")
call SetSoundDuration(gg_snd_PolymorphDone, 1498)
call SetSoundDistances(gg_snd_PolymorphDone, 1200.0, 10000.0)
set gg_snd_linaliR3=s__Sound_SaveSound("linaliR3.mp3" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundDuration(gg_snd_linaliR3, 1410)
call SetSoundChannel(gg_snd_linaliR3, 0)
call SetSoundVolume(gg_snd_linaliR3, 127)
call SetSoundPitch(gg_snd_linaliR3, 1.0)
call SetSoundDistances(gg_snd_linaliR3, 1000.0, 1800.0)
call SetSoundDistanceCutoff(gg_snd_linaliR3, 2000.0)
call SetSoundConeAngles(gg_snd_linaliR3, 0.0, 0.0, 127)
call SetSoundConeOrientation(gg_snd_linaliR3, 0.0, 0.0, 0.0)
set gg_snd_linaliD2=s__Sound_SaveSound("linaliD2.mp3" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundDuration(gg_snd_linaliD2, 1855)
call SetSoundChannel(gg_snd_linaliD2, 0)
call SetSoundVolume(gg_snd_linaliD2, 127)
call SetSoundPitch(gg_snd_linaliD2, 1.0)
call SetSoundDistances(gg_snd_linaliD2, 1000.0, 1800.0)
call SetSoundDistanceCutoff(gg_snd_linaliD2, 2000.0)
call SetSoundConeAngles(gg_snd_linaliD2, 0.0, 0.0, 127)
call SetSoundConeOrientation(gg_snd_linaliD2, 0.0, 0.0, 0.0)
set gg_snd_yifangw2=s__Sound_SaveSound("yifangw2.mp3" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundDuration(gg_snd_yifangw2, 470)
call SetSoundChannel(gg_snd_yifangw2, 0)
call SetSoundVolume(gg_snd_yifangw2, 127)
call SetSoundPitch(gg_snd_yifangw2, 1.0)
call SetSoundDistances(gg_snd_yifangw2, 1000.0, 1800.0)
call SetSoundDistanceCutoff(gg_snd_yifangw2, 2000.0)
call SetSoundConeAngles(gg_snd_yifangw2, 0.0, 0.0, 127)
call SetSoundConeOrientation(gg_snd_yifangw2, 0.0, 0.0, 0.0)
set gg_snd_StarfallCaster101=s__Sound_SaveSound("Abilities\\Spells\\NightElf\\Starfall\\StarfallCaster1.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_StarfallCaster101, "StarfallArea")
call SetSoundDuration(gg_snd_StarfallCaster101, 2209)
call SetSoundDistances(gg_snd_StarfallCaster101, 1000.0, 10000.0)
set gg_snd_SacrificeUnit=s__Sound_SaveSound("Abilities\\Spells\\Other\\ANsa\\SacrificeUnit.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_SacrificeUnit, "SacrificeUnit")
call SetSoundDuration(gg_snd_SacrificeUnit, 2693)
call SetSoundDistances(gg_snd_SacrificeUnit, 1000.0, 10000.0)
set gg_snd_Disenchant=s__Sound_SaveSound("Abilities\\Spells\\Orc\\Disenchant\\Disenchant.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_Disenchant, "Disenchant")
call SetSoundDuration(gg_snd_Disenchant, 2043)
call SetSoundPitch(gg_snd_Disenchant, 2.0)
call SetSoundDistances(gg_snd_Disenchant, 1250.0, 100000.0)
call SetSoundDistanceCutoff(gg_snd_Disenchant, 2500.0)
set gg_snd_OrbOfCorruptionMissile=s__Sound_SaveSound("Abilities\\Spells\\Items\\OrbCorruption\\OrbOfCorruptionMissile.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_OrbOfCorruptionMissile, "OrbOfCorruptionLaunch")
call SetSoundDuration(gg_snd_OrbOfCorruptionMissile, 1123)
call SetSoundPitch(gg_snd_OrbOfCorruptionMissile, 1.2)
call SetSoundDistances(gg_snd_OrbOfCorruptionMissile, 1500.0, 10000.0)
set gg_snd_WindSerpentMissile=s__Sound_SaveSound("Abilities\\Weapons\\DragonHawkMissile\\WindSerpentMissile.wav" , false , true , true , 10 , 10 , "MissilesEAX")
call SetSoundParamsFromLabel(gg_snd_WindSerpentMissile, "DragonHawkMissileHit")
call SetSoundDuration(gg_snd_WindSerpentMissile, 1498)
call SetSoundPitch(gg_snd_WindSerpentMissile, 1.2)
set gg_snd_NightElfBuildingDeathSmall1=s__Sound_SaveSound("Sound\\Buildings\\Death\\NightElfBuildingDeathSmall1.wav" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundParamsFromLabel(gg_snd_NightElfBuildingDeathSmall1, "DeathNightElfBuildingCancel")
call SetSoundDuration(gg_snd_NightElfBuildingDeathSmall1, 3675)
call SetSoundPitch(gg_snd_NightElfBuildingDeathSmall1, 1.1)
call SetSoundDistances(gg_snd_NightElfBuildingDeathSmall1, 1500.0, 10000.0)
set gg_snd_ZigguratMissileLaunch301=s__Sound_SaveSound("Abilities\\Weapons\\ZigguratMissile\\ZigguratMissileLaunch3.wav" , false , true , true , 10 , 10 , "MissilesEAX")
call SetSoundParamsFromLabel(gg_snd_ZigguratMissileLaunch301, "ZigguratMissileLaunch")
call SetSoundDuration(gg_snd_ZigguratMissileLaunch301, 522)
call SetSoundDistances(gg_snd_ZigguratMissileLaunch301, 1200.0, 10000.0)
set gg_snd_LightningBolt01=s__Sound_SaveSound("Abilities\\Spells\\Orc\\LightningBolt\\LightningBolt.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_LightningBolt01, "LightningBolt")
call SetSoundDuration(gg_snd_LightningBolt01, 2136)
call SetSoundPitch(gg_snd_LightningBolt01, 1.3)
call SetSoundDistances(gg_snd_LightningBolt01, 1200.0, 10000.0)
set gg_snd_YSSRG=s__Sound_SaveSound("YSSRG.mp3" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundDuration(gg_snd_YSSRG, 2760)
call SetSoundChannel(gg_snd_YSSRG, 0)
call SetSoundVolume(gg_snd_YSSRG, 127)
call SetSoundPitch(gg_snd_YSSRG, 1.0)
call SetSoundDistances(gg_snd_YSSRG, 1000.0, 1800.0)
call SetSoundDistanceCutoff(gg_snd_YSSRG, 2000.0)
call SetSoundConeAngles(gg_snd_YSSRG, 0.0, 0.0, 127)
call SetSoundConeOrientation(gg_snd_YSSRG, 0.0, 0.0, 0.0)
set gg_snd_GPPX1=s__Sound_SaveSound("GPPX1.mp3" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundDuration(gg_snd_GPPX1, 2208)
call SetSoundChannel(gg_snd_GPPX1, 0)
call SetSoundVolume(gg_snd_GPPX1, 127)
call SetSoundPitch(gg_snd_GPPX1, 1.0)
call SetSoundDistances(gg_snd_GPPX1, 1000.0, 1800.0)
call SetSoundDistanceCutoff(gg_snd_GPPX1, 2000.0)
call SetSoundConeAngles(gg_snd_GPPX1, 0.0, 0.0, 127)
call SetSoundConeOrientation(gg_snd_GPPX1, 0.0, 0.0, 0.0)
set gg_snd_GPPXB2=s__Sound_SaveSound("GPPXB2.mp3" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundDuration(gg_snd_GPPXB2, 3168)
call SetSoundChannel(gg_snd_GPPXB2, 0)
call SetSoundVolume(gg_snd_GPPXB2, 127)
call SetSoundPitch(gg_snd_GPPXB2, 1.0)
call SetSoundDistances(gg_snd_GPPXB2, 1000.0, 1800.0)
call SetSoundDistanceCutoff(gg_snd_GPPXB2, 2000.0)
call SetSoundConeAngles(gg_snd_GPPXB2, 0.0, 0.0, 127)
call SetSoundConeOrientation(gg_snd_GPPXB2, 0.0, 0.0, 0.0)
set gg_snd_NQLC3=s__Sound_SaveSound("NQLC3.mp3" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundDuration(gg_snd_NQLC3, 1908)
call SetSoundChannel(gg_snd_NQLC3, 0)
call SetSoundVolume(gg_snd_NQLC3, 127)
call SetSoundPitch(gg_snd_NQLC3, 1.0)
call SetSoundDistances(gg_snd_NQLC3, 1000.0, 1800.0)
call SetSoundDistanceCutoff(gg_snd_NQLC3, 2000.0)
call SetSoundConeAngles(gg_snd_NQLC3, 0.0, 0.0, 127)
call SetSoundConeOrientation(gg_snd_NQLC3, 0.0, 0.0, 0.0)
set gg_snd_InvisibilityTarget=s__Sound_SaveSound("Abilities\\Spells\\Human\\Invisibility\\InvisibilityTarget.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_InvisibilityTarget, "Invisibility")
call SetSoundDuration(gg_snd_InvisibilityTarget, 2043)
call SetSoundPitch(gg_snd_InvisibilityTarget, 0.6)
call SetSoundDistances(gg_snd_InvisibilityTarget, 1200.0, 10000.0)
set gg_snd_PF=s__Sound_SaveSound("PF.mp3" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundDuration(gg_snd_PF, 648)
call SetSoundChannel(gg_snd_PF, 0)
call SetSoundVolume(gg_snd_PF, 127)
call SetSoundPitch(gg_snd_PF, 1.0)
call SetSoundDistances(gg_snd_PF, 1000.0, 1800.0)
call SetSoundDistanceCutoff(gg_snd_PF, 3000.0)
call SetSoundConeAngles(gg_snd_PF, 0.0, 0.0, 127)
call SetSoundConeOrientation(gg_snd_PF, 0.0, 0.0, 0.0)
set gg_snd_CannonTowerMissile201=s__Sound_SaveSound("Abilities\\Weapons\\CannonTowerMissile\\CannonTowerMissile2.wav" , false , true , true , 10 , 10 , "MissilesEAX")
call SetSoundParamsFromLabel(gg_snd_CannonTowerMissile201, "CannonTowerMissile")
call SetSoundDuration(gg_snd_CannonTowerMissile201, 2043)
call SetSoundDistances(gg_snd_CannonTowerMissile201, 1200.0, 10000.0)
set gg_snd_CatapultMissile201=s__Sound_SaveSound("Abilities\\Weapons\\Catapult\\CatapultMissile2.wav" , false , true , true , 10 , 10 , "MissilesEAX")
call SetSoundParamsFromLabel(gg_snd_CatapultMissile201, "Catapult")
call SetSoundDuration(gg_snd_CatapultMissile201, 1254)
call SetSoundPitch(gg_snd_CatapultMissile201, 0.7)
call SetSoundDistances(gg_snd_CatapultMissile201, 1350.0, 10000.0)
set gg_snd_TheBlackArrow01=s__Sound_SaveSound("Abilities\\Spells\\Other\\BlackArrow\\TheBlackArrow.wav" , false , true , true , 10 , 10 , "MissilesEAX")
call SetSoundParamsFromLabel(gg_snd_TheBlackArrow01, "BlackArrowHit")
call SetSoundDuration(gg_snd_TheBlackArrow01, 1776)
call SetSoundPitch(gg_snd_TheBlackArrow01, 1.2)
call SetSoundDistances(gg_snd_TheBlackArrow01, 1000.0, 10000.0)
set gg_snd_LifeDrain=s__Sound_SaveSound("Abilities\\Spells\\Other\\Drain\\LifeDrain.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_LifeDrain, "DrainLoop")
call SetSoundDuration(gg_snd_LifeDrain, 2490)
call SetSoundDistances(gg_snd_LifeDrain, 1000.0, 100000.0)
set gg_snd_SoulBurn1=s__Sound_SaveSound("Abilities\\Spells\\Other\\SoulBurn\\SoulBurn1.wav" , false , true , true , 10 , 10 , "CombatSoundsEAX")
call SetSoundParamsFromLabel(gg_snd_SoulBurn1, "SoulBurnTarget")
call SetSoundDuration(gg_snd_SoulBurn1, 1602)
call SetSoundDistances(gg_snd_SoulBurn1, 1200.0, 10000.0)
set gg_snd_AcolyteMining=s__Sound_SaveSound("Abilities\\Spells\\Undead\\UndeadMine\\AcolyteMining.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_AcolyteMining, "AcolyteMining")
call SetSoundDuration(gg_snd_AcolyteMining, 4233)
call SetSoundDistances(gg_snd_AcolyteMining, 1000.0, 100000.0)
set gg_snd_UndeadBuildingDeathLarge1=s__Sound_SaveSound("Sound\\Buildings\\Death\\UndeadBuildingDeathLarge1.wav" , false , false , false , 10 , 10 , "DefaultEAXON")
call SetSoundParamsFromLabel(gg_snd_UndeadBuildingDeathLarge1, "DeathUndeadLargeBuilding")
call SetSoundDuration(gg_snd_UndeadBuildingDeathLarge1, 3001)
set gg_snd_NightElfBuildingDeathLarge101=s__Sound_SaveSound("Sound\\Buildings\\Death\\NightElfBuildingDeathLarge1.wav" , false , false , false , 10 , 10 , "DefaultEAXON")
call SetSoundParamsFromLabel(gg_snd_NightElfBuildingDeathLarge101, "DeathNightElfLargeBuilding")
call SetSoundDuration(gg_snd_NightElfBuildingDeathLarge101, 3544)
set gg_snd_BuildingDeathLargeOrc=s__Sound_SaveSound("Sound\\Buildings\\Death\\BuildingDeathLargeOrc.wav" , false , false , false , 10 , 10 , "DefaultEAXON")
call SetSoundParamsFromLabel(gg_snd_BuildingDeathLargeOrc, "DeathOrcLargeBuilding")
call SetSoundDuration(gg_snd_BuildingDeathLargeOrc, 3483)
set gg_snd_GUN43=s__Sound_SaveSound("war3mapImported\\GUN43.mp3" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundDuration(gg_snd_GUN43, 1019)
call SetSoundChannel(gg_snd_GUN43, 0)
call SetSoundVolume(gg_snd_GUN43, 127)
call SetSoundPitch(gg_snd_GUN43, 1.5)
call SetSoundDistances(gg_snd_GUN43, 1000.0, 10000.0)
call SetSoundDistanceCutoff(gg_snd_GUN43, 3000.0)
call SetSoundConeAngles(gg_snd_GUN43, 0.0, 0.0, 127)
call SetSoundConeOrientation(gg_snd_GUN43, 0.0, 0.0, 0.0)
set gg_snd_ClanInvitation=s__Sound_SaveSound("Sound\\Interface\\ClanInvitation.wav" , false , false , false , 10 , 10 , "DefaultEAXON")
call SetSoundParamsFromLabel(gg_snd_ClanInvitation, "ClanInvitation")
call SetSoundDuration(gg_snd_ClanInvitation, 4296)
call SetSoundPitch(gg_snd_ClanInvitation, 0.9)
set gg_snd_PhoenixAttack=s__Sound_SaveSound("Abilities\\Weapons\\PhoenixMissile\\PhoenixAttack.wav" , false , true , true , 10 , 10 , "MissilesEAX")
call SetSoundParamsFromLabel(gg_snd_PhoenixAttack, "PhoenixMissileLaunch")
call SetSoundDuration(gg_snd_PhoenixAttack, 1901)
call SetSoundPitch(gg_snd_PhoenixAttack, 2.0)
call SetSoundDistances(gg_snd_PhoenixAttack, 800.0, 10000.0)
set gg_snd_SearingArrowTarget3=s__Sound_SaveSound("Abilities\\Weapons\\SearingArrow\\SearingArrowTarget3.wav" , false , true , true , 10 , 10 , "MissilesEAX")
call SetSoundParamsFromLabel(gg_snd_SearingArrowTarget3, "SearingArrowHit")
call SetSoundDuration(gg_snd_SearingArrowTarget3, 745)
call SetSoundPitch(gg_snd_SearingArrowTarget3, 1.3)
set gg_snd_FrostArrowLaunch1=s__Sound_SaveSound("Abilities\\Spells\\Other\\FrostArrows\\FrostArrowLaunch1.wav" , false , true , true , 10 , 10 , "MissilesEAX")
call SetSoundParamsFromLabel(gg_snd_FrostArrowLaunch1, "FrostArrowLaunch")
call SetSoundDuration(gg_snd_FrostArrowLaunch1, 944)
call SetSoundPitch(gg_snd_FrostArrowLaunch1, 1.2)
call SetSoundDistances(gg_snd_FrostArrowLaunch1, 1200.0, 10000.0)
set gg_snd_ArrowAttack1=s__Sound_SaveSound("Abilities\\Weapons\\Arrow\\ArrowAttack1.wav" , false , true , true , 10 , 10 , "MissilesEAX")
call SetSoundParamsFromLabel(gg_snd_ArrowAttack1, "ArrowLaunch")
call SetSoundDuration(gg_snd_ArrowAttack1, 672)
call SetSoundPitch(gg_snd_ArrowAttack1, 1.2)
call SetSoundDistances(gg_snd_ArrowAttack1, 1100.0, 10000.0)
set gg_snd_ResurrectTarget=s__Sound_SaveSound("Abilities\\Spells\\Human\\Resurrect\\ResurrectTarget.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_ResurrectTarget, "Resurrect")
call SetSoundDuration(gg_snd_ResurrectTarget, 3506)
call SetSoundPitch(gg_snd_ResurrectTarget, 0.7)
call SetSoundDistances(gg_snd_ResurrectTarget, 1350.0, 10000.0)
set gg_snd_MetalLightChopMetal1=s__Sound_SaveSound("Sound\\Units\\Combat\\MetalLightChopMetal1.wav" , false , true , true , 10 , 10 , "CombatSoundsEAX")
call SetSoundParamsFromLabel(gg_snd_MetalLightChopMetal1, "MetalLightChopMetal")
call SetSoundDuration(gg_snd_MetalLightChopMetal1, 395)
call SetSoundPitch(gg_snd_MetalLightChopMetal1, 1.1)
call SetSoundDistances(gg_snd_MetalLightChopMetal1, 1000.0, 10000.0)
set gg_snd_MetalLightChopMetal201=s__Sound_SaveSound("Sound\\Units\\Combat\\MetalLightChopMetal2.wav" , false , true , true , 10 , 10 , "CombatSoundsEAX")
call SetSoundParamsFromLabel(gg_snd_MetalLightChopMetal201, "MetalLightChopMetal")
call SetSoundDuration(gg_snd_MetalLightChopMetal201, 402)
call SetSoundPitch(gg_snd_MetalLightChopMetal201, 1.2)
call SetSoundDistances(gg_snd_MetalLightChopMetal201, 1000.0, 10000.0)
set gg_snd_MetalLightChopMetal3=s__Sound_SaveSound("Sound\\Units\\Combat\\MetalLightChopMetal3.wav" , false , true , true , 10 , 10 , "CombatSoundsEAX")
call SetSoundParamsFromLabel(gg_snd_MetalLightChopMetal3, "MetalLightChopMetal")
call SetSoundDuration(gg_snd_MetalLightChopMetal3, 403)
call SetSoundPitch(gg_snd_MetalLightChopMetal3, 1.2)
call SetSoundDistances(gg_snd_MetalLightChopMetal3, 1000.0, 10000.0)
set gg_snd_PhaseShift1=s__Sound_SaveSound("Abilities\\Spells\\NightElf\\FaerieDragonInvis\\PhaseShift1.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_PhaseShift1, "PhaseShift")
call SetSoundDuration(gg_snd_PhaseShift1, 1251)
call SetSoundDistances(gg_snd_PhaseShift1, 1200.0, 10000.0)
set gg_snd_FaerieFireLaunch1=s__Sound_SaveSound("Abilities\\Spells\\NightElf\\FaerieFire\\FaerieFireLaunch1.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_FaerieFireLaunch1, "FaerieFire")
call SetSoundDuration(gg_snd_FaerieFireLaunch1, 2067)
call SetSoundPitch(gg_snd_FaerieFireLaunch1, 1.2)
call SetSoundDistances(gg_snd_FaerieFireLaunch1, 1000.0, 10000.0)
set gg_snd_FeralSpiritTarget101=s__Sound_SaveSound("Abilities\\Spells\\Orc\\FeralSpirit\\FeralSpiritTarget1.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_FeralSpiritTarget101, "FeralSpiritDone")
call SetSoundDuration(gg_snd_FeralSpiritTarget101, 2436)
call SetSoundPitch(gg_snd_FeralSpiritTarget101, 0.8)
call SetSoundDistances(gg_snd_FeralSpiritTarget101, 1250.0, 10000.0)
set gg_snd_ReviveOrc=s__Sound_SaveSound("Abilities\\Spells\\Orc\\ReviveOrc\\ReviveOrc.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_ReviveOrc, "ReviveOrc")
call SetSoundDuration(gg_snd_ReviveOrc, 3013)
call SetSoundPitch(gg_snd_ReviveOrc, 2.0)
call SetSoundDistances(gg_snd_ReviveOrc, 1250.0, 10000.0)
set gg_snd_AncestralSpirit=s__Sound_SaveSound("Abilities\\Spells\\Orc\\AncestralSpirit\\AncestralSpirit.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_AncestralSpirit, "AncestralSpirit")
call SetSoundDuration(gg_snd_AncestralSpirit, 3061)
call SetSoundPitch(gg_snd_AncestralSpirit, 2.0)
set gg_snd_InvisibilityTarget01=s__Sound_SaveSound("Abilities\\Spells\\Human\\Invisibility\\InvisibilityTarget.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_InvisibilityTarget01, "Invisibility")
call SetSoundDuration(gg_snd_InvisibilityTarget01, 2043)
call SetSoundDistances(gg_snd_InvisibilityTarget01, 1000.0, 10000.0)
set gg_snd_KeeperOfTheGroveMissileHit2=s__Sound_SaveSound("Abilities\\Weapons\\KeeperGroveMissile\\KeeperOfTheGroveMissileHit2.wav" , false , true , true , 10 , 10 , "MissilesEAX")
call SetSoundParamsFromLabel(gg_snd_KeeperOfTheGroveMissileHit2, "KeeperOfTheGroveMissileHit")
call SetSoundDuration(gg_snd_KeeperOfTheGroveMissileHit2, 801)
call SetSoundPitch(gg_snd_KeeperOfTheGroveMissileHit2, 0.8)
call SetSoundDistances(gg_snd_KeeperOfTheGroveMissileHit2, 1250.0, 10000.0)
set gg_snd_InnerFireBirth=s__Sound_SaveSound("Abilities\\Spells\\Human\\InnerFire\\InnerFireBirth.wav" , false , false , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_InnerFireBirth, "InnerFire")
call SetSoundDuration(gg_snd_InnerFireBirth, 2096)
call SetSoundPitch(gg_snd_InnerFireBirth, 0.6)
set gg_snd_FlameStrikeBirth1=s__Sound_SaveSound("Abilities\\Spells\\Human\\FlameStrike\\FlameStrikeBirth1.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_FlameStrikeBirth1, "FlameStrike")
call SetSoundDuration(gg_snd_FlameStrikeBirth1, 5213)
call SetSoundPitch(gg_snd_FlameStrikeBirth1, 1.3)
call SetSoundDistances(gg_snd_FlameStrikeBirth1, 1000.0, 10000.0)
set gg_snd_Disenchant01=s__Sound_SaveSound("Abilities\\Spells\\Orc\\Disenchant\\Disenchant.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_Disenchant01, "Disenchant")
call SetSoundDuration(gg_snd_Disenchant01, 2043)
call SetSoundPitch(gg_snd_Disenchant01, 1.2)
call SetSoundDistances(gg_snd_Disenchant01, 1000.0, 100000.0)
call SetSoundDistanceCutoff(gg_snd_Disenchant01, 3000.0)
set gg_snd_FrostArrowLaunch101=s__Sound_SaveSound("Abilities\\Spells\\Other\\FrostArrows\\FrostArrowLaunch1.wav" , false , true , true , 10 , 10 , "MissilesEAX")
call SetSoundParamsFromLabel(gg_snd_FrostArrowLaunch101, "FrostArrowLaunch")
call SetSoundDuration(gg_snd_FrostArrowLaunch101, 944)
call SetSoundPitch(gg_snd_FrostArrowLaunch101, 2.0)
call SetSoundDistances(gg_snd_FrostArrowLaunch101, 1250.0, 10000.0)
set gg_snd_xyd=s__Sound_SaveSound("xyd.mp3" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundDuration(gg_snd_xyd, 3048)
call SetSoundChannel(gg_snd_xyd, 0)
call SetSoundVolume(gg_snd_xyd, 127)
call SetSoundPitch(gg_snd_xyd, 1.0)
call SetSoundDistances(gg_snd_xyd, 2500.0, 10000.0)
call SetSoundDistanceCutoff(gg_snd_xyd, 3000.0)
call SetSoundConeAngles(gg_snd_xyd, 0.0, 0.0, 127)
call SetSoundConeOrientation(gg_snd_xyd, 0.0, 0.0, 0.0)
set gg_snd_CycloneLoop1=s__Sound_SaveSound("Abilities\\Spells\\NightElf\\Cyclone\\CycloneLoop1.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_CycloneLoop1, "CycloneLoop")
call SetSoundDuration(gg_snd_CycloneLoop1, 4004)
call SetSoundPitch(gg_snd_CycloneLoop1, 0.9)
call SetSoundDistances(gg_snd_CycloneLoop1, 1200.0, 100000.0)
call SetSoundDistanceCutoff(gg_snd_CycloneLoop1, 3000.0)
set gg_snd_CarrionSwarmDamage1=s__Sound_SaveSound("Abilities\\Spells\\Undead\\CarrionSwarm\\CarrionSwarmDamage1.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_CarrionSwarmDamage1, "CarrionSwarmDamage")
call SetSoundDuration(gg_snd_CarrionSwarmDamage1, 1602)
call SetSoundDistances(gg_snd_CarrionSwarmDamage1, 1200.0, 10000.0)
set gg_snd_KeeperOfTheGroveMissileHit3=s__Sound_SaveSound("Abilities\\Weapons\\KeeperGroveMissile\\KeeperOfTheGroveMissileHit3.wav" , false , true , true , 10 , 10 , "MissilesEAX")
call SetSoundParamsFromLabel(gg_snd_KeeperOfTheGroveMissileHit3, "KeeperOfTheGroveMissileHit")
call SetSoundDuration(gg_snd_KeeperOfTheGroveMissileHit3, 801)
call SetSoundPitch(gg_snd_KeeperOfTheGroveMissileHit3, 0.8)
call SetSoundDistances(gg_snd_KeeperOfTheGroveMissileHit3, 1200.0, 10000.0)
set gg_snd_DeathPactTargetBirth101=s__Sound_SaveSound("Abilities\\Spells\\Undead\\DeathPact\\DeathPactTargetBirth1.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_DeathPactTargetBirth101, "DeathPactTarget")
call SetSoundDuration(gg_snd_DeathPactTargetBirth101, 1635)
call SetSoundPitch(gg_snd_DeathPactTargetBirth101, 0.7)
call SetSoundDistances(gg_snd_DeathPactTargetBirth101, 1000.0, 10000.0)
set gg_snd_FlakCannon01=s__Sound_SaveSound("Abilities\\Spells\\Human\\FlakCannons\\FlakCannon.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_FlakCannon01, "FlakCannonHit")
call SetSoundDuration(gg_snd_FlakCannon01, 1419)
call SetSoundPitch(gg_snd_FlakCannon01, 1.2)
call SetSoundDistances(gg_snd_FlakCannon01, 800.0, 10000.0)
set gg_snd_Feedback=s__Sound_SaveSound("Abilities\\Spells\\Human\\Feedback\\Feedback.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_Feedback, "Feedback")
call SetSoundDuration(gg_snd_Feedback, 1222)
call SetSoundDistances(gg_snd_Feedback, 800.0, 10000.0)
set gg_snd_RIFLE2HD=s__Sound_SaveSound("RIFLE2HD.mp3" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundDuration(gg_snd_RIFLE2HD, 936)
call SetSoundChannel(gg_snd_RIFLE2HD, 0)
call SetSoundVolume(gg_snd_RIFLE2HD, 127)
call SetSoundPitch(gg_snd_RIFLE2HD, 1.0)
call SetSoundDistances(gg_snd_RIFLE2HD, 1250.0, 1800.0)
call SetSoundDistanceCutoff(gg_snd_RIFLE2HD, 3000.0)
call SetSoundConeAngles(gg_snd_RIFLE2HD, 0.0, 0.0, 127)
call SetSoundConeOrientation(gg_snd_RIFLE2HD, 0.0, 0.0, 0.0)
set gg_snd_RIFLE3HD=s__Sound_SaveSound("RIFLE3HD.mp3" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundDuration(gg_snd_RIFLE3HD, 1044)
call SetSoundChannel(gg_snd_RIFLE3HD, 0)
call SetSoundVolume(gg_snd_RIFLE3HD, 127)
call SetSoundPitch(gg_snd_RIFLE3HD, 1.0)
call SetSoundDistances(gg_snd_RIFLE3HD, 1250.0, 1800.0)
call SetSoundDistanceCutoff(gg_snd_RIFLE3HD, 3000.0)
call SetSoundConeAngles(gg_snd_RIFLE3HD, 0.0, 0.0, 127)
call SetSoundConeOrientation(gg_snd_RIFLE3HD, 0.0, 0.0, 0.0)
set gg_snd_RIFLE4=s__Sound_SaveSound("war3mapImported\\RIFLE4.mp3" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundDuration(gg_snd_RIFLE4, 1593)
call SetSoundChannel(gg_snd_RIFLE4, 0)
call SetSoundVolume(gg_snd_RIFLE4, 127)
call SetSoundPitch(gg_snd_RIFLE4, 1.0)
call SetSoundDistances(gg_snd_RIFLE4, 1250.0, 10000.0)
call SetSoundDistanceCutoff(gg_snd_RIFLE4, 3000.0)
call SetSoundConeAngles(gg_snd_RIFLE4, 0.0, 0.0, 127)
call SetSoundConeOrientation(gg_snd_RIFLE4, 0.0, 0.0, 0.0)
set gg_snd_ZigguratMissileLaunch1=s__Sound_SaveSound("Abilities\\Weapons\\ZigguratMissile\\ZigguratMissileLaunch1.wav" , false , true , true , 10 , 10 , "MissilesEAX")
call SetSoundParamsFromLabel(gg_snd_ZigguratMissileLaunch1, "ZigguratMissileLaunch")
call SetSoundDuration(gg_snd_ZigguratMissileLaunch1, 401)
call SetSoundDistances(gg_snd_ZigguratMissileLaunch1, 1100.0, 10000.0)
set gg_snd_SoulGem=s__Sound_SaveSound("Abilities\\Spells\\Items\\AIso\\SoulGem.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_SoulGem, "SoulGem")
call SetSoundDuration(gg_snd_SoulGem, 4474)
call SetSoundPitch(gg_snd_SoulGem, 1.8)
call SetSoundDistances(gg_snd_SoulGem, 1500.0, 10000.0)
set gg_snd_7zd3=s__Sound_SaveSound("war3mapImported\\7zd3.mp3" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundDuration(gg_snd_7zd3, 2496)
call SetSoundChannel(gg_snd_7zd3, 0)
call SetSoundVolume(gg_snd_7zd3, 127)
call SetSoundPitch(gg_snd_7zd3, 1.0)
call SetSoundDistances(gg_snd_7zd3, 1000.0, 3000.0)
call SetSoundDistanceCutoff(gg_snd_7zd3, 2000.0)
call SetSoundConeAngles(gg_snd_7zd3, 0.0, 0.0, 127)
call SetSoundConeOrientation(gg_snd_7zd3, 0.0, 0.0, 0.0)
set gg_snd_4zd3=s__Sound_SaveSound("war3mapImported\\4zd3.mp3" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundDuration(gg_snd_4zd3, 1872)
call SetSoundChannel(gg_snd_4zd3, 0)
call SetSoundVolume(gg_snd_4zd3, 127)
call SetSoundPitch(gg_snd_4zd3, 1.0)
call SetSoundDistances(gg_snd_4zd3, 1000.0, 3000.0)
call SetSoundDistanceCutoff(gg_snd_4zd3, 2000.0)
call SetSoundConeAngles(gg_snd_4zd3, 0.0, 0.0, 127)
call SetSoundConeOrientation(gg_snd_4zd3, 0.0, 0.0, 0.0)
set gg_snd_ks3=s__Sound_SaveSound("war3mapImported\\ks3.mp3" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundDuration(gg_snd_ks3, 768)
call SetSoundChannel(gg_snd_ks3, 0)
call SetSoundVolume(gg_snd_ks3, 127)
call SetSoundPitch(gg_snd_ks3, 1.0)
call SetSoundDistances(gg_snd_ks3, 1000.0, 1800.0)
call SetSoundDistanceCutoff(gg_snd_ks3, 2000.0)
call SetSoundConeAngles(gg_snd_ks3, 0.0, 0.0, 127)
call SetSoundConeOrientation(gg_snd_ks3, 0.0, 0.0, 0.0)
set gg_snd_wy4=s__Sound_SaveSound("war3mapImported\\wy4.mp3" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundDuration(gg_snd_wy4, 1228)
call SetSoundChannel(gg_snd_wy4, 0)
call SetSoundVolume(gg_snd_wy4, 127)
call SetSoundPitch(gg_snd_wy4, 1.0)
call SetSoundDistances(gg_snd_wy4, 1000.0, 1800.0)
call SetSoundDistanceCutoff(gg_snd_wy4, 2000.0)
call SetSoundConeAngles(gg_snd_wy4, 0.0, 0.0, 127)
call SetSoundConeOrientation(gg_snd_wy4, 0.0, 0.0, 0.0)
set gg_snd_leisheng1=s__Sound_SaveSound("leisheng1.mp3" , false , false , false , 10 , 10 , "DefaultEAXON")
call SetSoundDuration(gg_snd_leisheng1, 2978)
call SetSoundChannel(gg_snd_leisheng1, 0)
call SetSoundVolume(gg_snd_leisheng1, 127)
call SetSoundPitch(gg_snd_leisheng1, 1.0)
set gg_snd_leisheng2=s__Sound_SaveSound("leisheng2.mp3" , false , false , false , 10 , 10 , "")
call SetSoundDuration(gg_snd_leisheng2, 2142)
call SetSoundChannel(gg_snd_leisheng2, 0)
call SetSoundVolume(gg_snd_leisheng2, 127)
call SetSoundPitch(gg_snd_leisheng2, 1.0)
set gg_snd_ManaFlareStrike=s__Sound_SaveSound("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareStrike.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_ManaFlareStrike, "ManaFlareMissile")
call SetSoundDuration(gg_snd_ManaFlareStrike, 791)
call SetSoundDistances(gg_snd_ManaFlareStrike, 800.0, 10000.0)
set gg_snd_misaka_HD=s__Sound_SaveSound("war3mapImported\\misaka_HD.mp3" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundDuration(gg_snd_misaka_HD, 1985)
call SetSoundChannel(gg_snd_misaka_HD, 0)
call SetSoundVolume(gg_snd_misaka_HD, 110)
call SetSoundPitch(gg_snd_misaka_HD, 1.0)
call SetSoundDistances(gg_snd_misaka_HD, 1500.0, 10000.0)
call SetSoundDistanceCutoff(gg_snd_misaka_HD, 3000.0)
call SetSoundConeAngles(gg_snd_misaka_HD, 0.0, 0.0, 127)
call SetSoundConeOrientation(gg_snd_misaka_HD, 0.0, 0.0, 0.0)
set gg_snd_misaka_HD2=s__Sound_SaveSound("war3mapImported\\misaka_HD2.mp3" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundDuration(gg_snd_misaka_HD2, 1150)
call SetSoundChannel(gg_snd_misaka_HD2, 0)
call SetSoundVolume(gg_snd_misaka_HD2, 127)
call SetSoundPitch(gg_snd_misaka_HD2, 1.0)
call SetSoundDistances(gg_snd_misaka_HD2, 1500.0, 10000.0)
call SetSoundDistanceCutoff(gg_snd_misaka_HD2, 3000.0)
call SetSoundConeAngles(gg_snd_misaka_HD2, 0.0, 0.0, 127)
call SetSoundConeOrientation(gg_snd_misaka_HD2, 0.0, 0.0, 0.0)
set gg_snd_zhenhong=s__Sound_SaveSound("war3mapImported\\zhenhong.mp3" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundDuration(gg_snd_zhenhong, 993)
call SetSoundChannel(gg_snd_zhenhong, 0)
call SetSoundVolume(gg_snd_zhenhong, 127)
call SetSoundPitch(gg_snd_zhenhong, 1.0)
call SetSoundDistances(gg_snd_zhenhong, 1250.0, 10000.0)
call SetSoundDistanceCutoff(gg_snd_zhenhong, 3000.0)
call SetSoundConeAngles(gg_snd_zhenhong, 0.0, 0.0, 127)
call SetSoundConeOrientation(gg_snd_zhenhong, 0.0, 0.0, 0.0)
set gg_snd_feiyan=s__Sound_SaveSound("war3mapImported\\feiyan.mp3" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundDuration(gg_snd_feiyan, 548)
call SetSoundChannel(gg_snd_feiyan, 0)
call SetSoundVolume(gg_snd_feiyan, 127)
call SetSoundPitch(gg_snd_feiyan, 1.0)
call SetSoundDistances(gg_snd_feiyan, 1250.0, 10000.0)
call SetSoundDistanceCutoff(gg_snd_feiyan, 3000.0)
call SetSoundConeAngles(gg_snd_feiyan, 0.0, 0.0, 127)
call SetSoundConeOrientation(gg_snd_feiyan, 0.0, 0.0, 0.0)
set gg_snd_duanzui=s__Sound_SaveSound("war3mapImported\\duanzui.mp3" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundDuration(gg_snd_duanzui, 1019)
call SetSoundChannel(gg_snd_duanzui, 0)
call SetSoundVolume(gg_snd_duanzui, 127)
call SetSoundPitch(gg_snd_duanzui, 1.0)
call SetSoundDistances(gg_snd_duanzui, 1250.0, 10000.0)
call SetSoundDistanceCutoff(gg_snd_duanzui, 3000.0)
call SetSoundConeAngles(gg_snd_duanzui, 0.0, 0.0, 127)
call SetSoundConeOrientation(gg_snd_duanzui, 0.0, 0.0, 0.0)
set gg_snd_DemonHunterMissileHit3=s__Sound_SaveSound("Abilities\\Weapons\\DemonHunterMissile\\DemonHunterMissileHit3.wav" , false , true , true , 10 , 10 , "MissilesEAX")
call SetSoundParamsFromLabel(gg_snd_DemonHunterMissileHit3, "DemonHunterMissileHit")
call SetSoundDuration(gg_snd_DemonHunterMissileHit3, 860)
call SetSoundPitch(gg_snd_DemonHunterMissileHit3, 1.3)
call SetSoundDistances(gg_snd_DemonHunterMissileHit3, 1250.0, 10000.0)
set gg_snd_PossessionMissileHit101=s__Sound_SaveSound("Abilities\\Spells\\Undead\\Possession\\PossessionMissileHit1.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_PossessionMissileHit101, "PossessionMissileHit")
call SetSoundDuration(gg_snd_PossessionMissileHit101, 1170)
call SetSoundPitch(gg_snd_PossessionMissileHit101, 2.0)
set gg_snd_CrushingWaveTarget1=s__Sound_SaveSound("Abilities\\Spells\\Other\\CrushingWave\\CrushingWaveTarget1.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_CrushingWaveTarget1, "CrushingWaveDamage")
call SetSoundDuration(gg_snd_CrushingWaveTarget1, 2113)
call SetSoundPitch(gg_snd_CrushingWaveTarget1, 2.0)
set gg_snd_clip2HD=s__Sound_SaveSound("war3mapImported\\clip2HD.mp3" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundDuration(gg_snd_clip2HD, 313)
call SetSoundChannel(gg_snd_clip2HD, 0)
call SetSoundVolume(gg_snd_clip2HD, 120)
call SetSoundPitch(gg_snd_clip2HD, 1.0)
call SetSoundDistances(gg_snd_clip2HD, 1250.0, 10000.0)
call SetSoundDistanceCutoff(gg_snd_clip2HD, 3000.0)
call SetSoundConeAngles(gg_snd_clip2HD, 0.0, 0.0, 127)
call SetSoundConeOrientation(gg_snd_clip2HD, 0.0, 0.0, 0.0)
set gg_snd_VolcanoLoop=s__Sound_SaveSound("Abilities\\Spells\\Other\\Volcano\\VolcanoLoop.wav" , false , true , true , 10 , 10 , "DefaultEAXON")
call SetSoundParamsFromLabel(gg_snd_VolcanoLoop, "VolcanoLoop")
call SetSoundDuration(gg_snd_VolcanoLoop, 7616)
call SetSoundPitch(gg_snd_VolcanoLoop, 2.0)
call SetSoundDistances(gg_snd_VolcanoLoop, 1500.0, 10000.0)
call SetSoundDistanceCutoff(gg_snd_VolcanoLoop, 5000.0)
set gg_snd_FlameStrikeBirth101=s__Sound_SaveSound("Abilities\\Spells\\Human\\FlameStrike\\FlameStrikeBirth1.wav" , false , true , true , 10 , 10 , "SpellsEAX")
call SetSoundParamsFromLabel(gg_snd_FlameStrikeBirth101, "FlameStrike")
call SetSoundDuration(gg_snd_FlameStrikeBirth101, 5213)
call SetSoundPitch(gg_snd_FlameStrikeBirth101, 1.5)
call SetSoundDistances(gg_snd_FlameStrikeBirth101, 1500.0, 10000.0)
call SetSoundDistanceCutoff(gg_snd_FlameStrikeBirth101, 4000.0)
endfunction
function CreateAllDestructables takes nothing returns nothing
local destructable d
local trigger t
local real life
set gg_dest_YT11_3231=CreateDestructableZ(0x59543131, 4512.0, - 5728.0, 22.2, 90.000, 1.000, 0)
endfunction
function CreateBuildingsForPlayer0 takes nothing returns nothing
local player p=Player(0)
local unit u
local integer unitID
local trigger t
local real life
set gg_unit_n00O_0091=CreateUnit(p, 0x6E30304F, - 5888.0, - 6784.0, 270.000)
endfunction
function CreateUnitsForPlayer0 takes nothing returns nothing
local player p=Player(0)
local unit u
local integer unitID
local trigger t
local real life
set gg_unit_n016_0137=CreateUnit(p, 0x6E303136, - 5316.8, - 5973.7, 349.269)
endfunction
function CreateBuildingsForPlayer1 takes nothing returns nothing
local player p=Player(1)
local unit u
local integer unitID
local trigger t
local real life
set gg_unit_n00P_0092=CreateUnit(p, 0x6E303050, - 5760.0, - 6784.0, 270.000)
endfunction
function CreateUnitsForPlayer1 takes nothing returns nothing
local player p=Player(1)
local unit u
local integer unitID
local trigger t
local real life
set gg_unit_n016_0139=CreateUnit(p, 0x6E303136, - 4902.5, - 6110.8, 174.549)
endfunction
function CreateBuildingsForPlayer2 takes nothing returns nothing
local player p=Player(2)
local unit u
local integer unitID
local trigger t
local real life
set gg_unit_n00Q_0093=CreateUnit(p, 0x6E303051, - 5632.0, - 6784.0, 270.000)
endfunction
function CreateUnitsForPlayer2 takes nothing returns nothing
local player p=Player(2)
local unit u
local integer unitID
local trigger t
local real life
set gg_unit_n016_0140=CreateUnit(p, 0x6E303136, - 4957.3, - 5888.6, 220.609)
endfunction
function CreateBuildingsForPlayer3 takes nothing returns nothing
local player p=Player(3)
local unit u
local integer unitID
local trigger t
local real life
set gg_unit_n00R_0094=CreateUnit(p, 0x6E303052, - 5504.0, - 6784.0, 270.000)
endfunction
function CreateUnitsForPlayer3 takes nothing returns nothing
local player p=Player(3)
local unit u
local integer unitID
local trigger t
local real life
set gg_unit_n016_0142=CreateUnit(p, 0x6E303136, - 5043.0, - 6243.3, 112.983)
endfunction
function CreateBuildingsForPlayer4 takes nothing returns nothing
local player p=Player(4)
local unit u
local integer unitID
local trigger t
local real life
set gg_unit_n00S_0095=CreateUnit(p, 0x6E303053, - 5376.0, - 6784.0, 270.000)
endfunction
function CreateUnitsForPlayer4 takes nothing returns nothing
local player p=Player(4)
local unit u
local integer unitID
local trigger t
local real life
set gg_unit_n016_0143=CreateUnit(p, 0x6E303136, - 5177.4, - 5836.0, 282.367)
endfunction
function CreateBuildingsForPlayer5 takes nothing returns nothing
local player p=Player(5)
local unit u
local integer unitID
local trigger t
local real life
set gg_unit_n00T_0096=CreateUnit(p, 0x6E303054, 6016.0, 5888.0, 270.000)
endfunction
function CreateUnitsForPlayer5 takes nothing returns nothing
local player p=Player(5)
local unit u
local integer unitID
local trigger t
local real life
set gg_unit_n016_0144=CreateUnit(p, 0x6E303136, 5251.1, 5154.8, 282.370)
endfunction
function CreateBuildingsForPlayer6 takes nothing returns nothing
local player p=Player(6)
local unit u
local integer unitID
local trigger t
local real life
set gg_unit_n00U_0097=CreateUnit(p, 0x6E303055, 6144.0, 5760.0, 270.000)
endfunction
function CreateUnitsForPlayer6 takes nothing returns nothing
local player p=Player(6)
local unit u
local integer unitID
local trigger t
local real life
set gg_unit_n016_0145=CreateUnit(p, 0x6E303136, 5443.7, 5297.5, 282.370)
endfunction
function CreateBuildingsForPlayer7 takes nothing returns nothing
local player p=Player(7)
local unit u
local integer unitID
local trigger t
local real life
set gg_unit_n00V_0098=CreateUnit(p, 0x6E303056, 6272.0, 5632.0, 270.000)
endfunction
function CreateUnitsForPlayer7 takes nothing returns nothing
local player p=Player(7)
local unit u
local integer unitID
local trigger t
local real life
set gg_unit_n016_0146=CreateUnit(p, 0x6E303136, 5066.7, 5322.5, 282.370)
endfunction
function CreateBuildingsForPlayer8 takes nothing returns nothing
local player p=Player(8)
local unit u
local integer unitID
local trigger t
local real life
set gg_unit_n00W_0100=CreateUnit(p, 0x6E303057, 6400.0, 5504.0, 270.000)
endfunction
function CreateUnitsForPlayer8 takes nothing returns nothing
local player p=Player(8)
local unit u
local integer unitID
local trigger t
local real life
set gg_unit_n016_0147=CreateUnit(p, 0x6E303136, 5366.3, 5509.7, 282.370)
endfunction
function CreateBuildingsForPlayer9 takes nothing returns nothing
local player p=Player(9)
local unit u
local integer unitID
local trigger t
local real life
set gg_unit_n00X_0099=CreateUnit(p, 0x6E303058, 6528.0, 5376.0, 270.000)
endfunction
function CreateUnitsForPlayer9 takes nothing returns nothing
local player p=Player(9)
local unit u
local integer unitID
local trigger t
local real life
set gg_unit_n016_0148=CreateUnit(p, 0x6E303136, 5145.8, 5543.4, 282.370)
endfunction
function CreateBuildingsForPlayer10 takes nothing returns nothing
local player p=Player(10)
local unit u
local integer unitID
local trigger t
local real life
set gg_unit_hgtw_0012=CreateUnit(p, 0x68677477, - 6784.0, - 6976.0, 270.000)
set gg_unit_hcas_0015=CreateUnit(p, 0x68636173, - 5120.0, - 6016.0, 270.000)
set u=CreateUnit(p, 0x6E747832, - 5504.0, - 5632.0, 270.000)
set u=CreateUnit(p, 0x6E747832, - 4736.0, - 6400.0, 270.000)
set u=CreateUnit(p, 0x6E747832, - 4736.0, - 5632.0, 270.000)
set gg_unit_nefm_0032=CreateUnit(p, 0x6E65666D, - 6112.0, - 4320.0, 270.000)
set u=CreateUnit(p, 0x6E627432, - 6400.0, - 3904.0, 270.000)
set u=CreateUnit(p, 0x6E627432, - 5760.0, - 3904.0, 270.000)
set gg_unit_nefm_0035=CreateUnit(p, 0x6E65666D, - 3616.0, - 6624.0, 270.000)
set u=CreateUnit(p, 0x6E627432, - 3136.0, - 6336.0, 270.000)
set u=CreateUnit(p, 0x6E627432, - 3136.0, - 6912.0, 270.000)
set gg_unit_n00F_0044=CreateUnit(p, 0x6E303046, - 1856.0, - 4416.0, 270.000)
set u=CreateUnit(p, 0x6E303049, - 6784.0, - 6976.0, 270.000)
set u=CreateUnit(p, 0x6E65676D, - 4864.0, 1792.0, 270.000)
set u=CreateUnit(p, 0x6E65676D, - 4288.0, 1472.0, 270.000)
set u=CreateUnit(p, 0x6E656766, - 5824.0, - 1088.0, 270.000)
set u=CreateUnit(p, 0x6E656766, - 5184.0, - 1216.0, 270.000)
set u=CreateUnit(p, 0x6E65676D, 1600.0, - 4800.0, 270.000)
set u=CreateUnit(p, 0x6E65676D, 1920.0, - 5440.0, 270.000)
set u=CreateUnit(p, 0x6E656766, - 320.0, - 5824.0, 270.000)
set u=CreateUnit(p, 0x6E656766, - 64.0, - 6336.0, 270.000)
set gg_unit_n018_0103=CreateUnit(p, 0x6E303138, - 1856.0, - 4416.0, 270.000)
set gg_unit_hhou_0121=CreateUnit(p, 0x68686F75, - 5440.0, - 6336.0, 270.000)
set gg_unit_n018_0125=CreateUnit(p, 0x6E303138, - 5568.0, - 6336.0, 270.000)
endfunction
function CreateUnitsForPlayer10 takes nothing returns nothing
local player p=Player(10)
local unit u
local integer unitID
local trigger t
local real life
set gg_unit_h005_0104=CreateUnit(p, 0x68303035, - 5129.5, - 6035.9, 270.000)
set gg_unit_h003_0105=CreateUnit(p, 0x68303033, - 5195.2, - 5993.6, 270.000)
set gg_unit_h004_0106=CreateUnit(p, 0x68303034, - 5040.3, - 5924.7, 270.000)
set gg_unit_e05F_0128=CreateUnit(p, 0x65303546, - 5256.9, - 6188.5, 225.000)
set gg_unit_e05I_0132=CreateUnit(p, 0x65303549, - 5120.5, - 6054.7, 13.730)
endfunction
function CreateBuildingsForPlayer11 takes nothing returns nothing
local player p=Player(11)
local unit u
local integer unitID
local trigger t
local real life
set gg_unit_hgtw_0019=CreateUnit(p, 0x68677477, 6528.0, 6528.0, 270.000)
set gg_unit_hcas_0020=CreateUnit(p, 0x68636173, 5248.0, 5376.0, 270.000)
set u=CreateUnit(p, 0x6E747832, 4864.0, 4992.0, 270.000)
set u=CreateUnit(p, 0x6E747832, 4864.0, 5696.0, 270.000)
set u=CreateUnit(p, 0x6E747832, 5632.0, 5056.0, 270.000)
set gg_unit_nefm_0038=CreateUnit(p, 0x6E65666D, 2976.0, 6176.0, 270.000)
set u=CreateUnit(p, 0x6E627432, 2496.0, 6400.0, 270.000)
set u=CreateUnit(p, 0x6E627432, 2496.0, 5952.0, 270.000)
set gg_unit_nefm_0041=CreateUnit(p, 0x6E65666D, 5984.0, 4064.0, 270.000)
set u=CreateUnit(p, 0x6E627432, 5632.0, 3648.0, 270.000)
set u=CreateUnit(p, 0x6E627432, 6336.0, 3648.0, 270.000)
set gg_unit_n00F_0045=CreateUnit(p, 0x6E303046, 640.0, 3584.0, 270.000)
set u=CreateUnit(p, 0x6E303049, 6528.0, 6528.0, 270.000)
set gg_unit_hhou_0060=CreateUnit(p, 0x68686F75, 5568.0, 5632.0, 270.000)
set u=CreateUnit(p, 0x6E65676D, - 2176.0, 4416.0, 270.000)
set u=CreateUnit(p, 0x6E65676D, - 1792.0, 3904.0, 270.000)
set u=CreateUnit(p, 0x6E656766, - 192.0, 5568.0, 270.000)
set u=CreateUnit(p, 0x6E656766, 128.0, 5056.0, 270.000)
set u=CreateUnit(p, 0x6E65676D, 4672.0, - 2496.0, 270.000)
set u=CreateUnit(p, 0x6E65676D, 5312.0, - 2688.0, 270.000)
set u=CreateUnit(p, 0x6E656766, 5184.0, 832.0, 270.000)
set u=CreateUnit(p, 0x6E656766, 5824.0, 768.0, 270.000)
set gg_unit_n018_0117=CreateUnit(p, 0x6E303138, 640.0, 3584.0, 270.000)
set gg_unit_n018_0122=CreateUnit(p, 0x6E303138, 5696.0, 5632.0, 270.000)
endfunction
function CreateUnitsForPlayer11 takes nothing returns nothing
local player p=Player(11)
local unit u
local integer unitID
local trigger t
local real life
set gg_unit_e05G_0101=CreateUnit(p, 0x65303547, 5253.3, 5347.8, 270.000)
set gg_unit_e05H_0133=CreateUnit(p, 0x65303548, 5247.1, 5349.7, 0.000)
set gg_unit_h001_0134=CreateUnit(p, 0x68303031, 5234.9, 5363.1, 270.000)
set gg_unit_h00A_0135=CreateUnit(p, 0x68303041, 5327.2, 5473.8, 181.870)
set gg_unit_h009_0136=CreateUnit(p, 0x68303039, 5171.5, 5398.0, 143.150)
endfunction
function CreateNeutralHostile takes nothing returns nothing
local player p=Player(PLAYER_NEUTRAL_AGGRESSIVE)
local unit u
local integer unitID
local trigger t
local real life
set u=CreateUnit(p, 0x6E62616E, - 6998.4, 2177.9, 347.003)
set u=CreateUnit(p, 0x6E62616E, - 6903.6, 2200.3, 343.278)
set u=CreateUnit(p, 0x6E62616E, - 7022.7, 2076.6, 354.908)
set u=CreateUnit(p, 0x6E62616E, - 6984.8, 1986.7, 1.802)
set u=CreateUnit(p, 0x6E62616E, - 1977.7, 6023.8, 313.969)
set u=CreateUnit(p, 0x6E62616E, - 1883.7, 5984.7, 350.298)
set u=CreateUnit(p, 0x6E62616E, - 1999.8, 5894.9, 335.278)
set u=CreateUnit(p, 0x6E62616E, - 1883.4, 6147.6, 291.474)
set u=CreateUnit(p, 0x6E62616E, 1620.9, - 7273.4, 99.418)
set u=CreateUnit(p, 0x6E62616E, 1756.0, - 7239.7, 110.318)
set u=CreateUnit(p, 0x6E62616E, 1609.9, - 7175.1, 99.886)
set u=CreateUnit(p, 0x6E62616E, 6895.9, - 1941.8, 124.577)
set u=CreateUnit(p, 0x6E62616E, 1719.6, - 7142.7, 99.886)
set u=CreateUnit(p, 0x6E62616E, 7038.3, - 1874.5, 151.792)
set u=CreateUnit(p, 0x6E62616E, 7125.2, - 1792.4, 168.503)
set u=CreateUnit(p, 0x6E62616E, 7001.0, - 1717.5, 120.627)
set u=CreateUnit(p, 0x6E62616E, - 1863.3, 5857.6, 332.916)
set u=CreateUnit(p, 0x6E62616E, - 6900.0, 2092.5, 339.934)
set u=CreateUnit(p, 0x6E62616E, 1504.3, - 7222.3, 90.264)
set u=CreateUnit(p, 0x6E62616E, 6912.0, - 1823.2, 147.725)
endfunction
function CreateNeutralPassiveBuildings takes nothing returns nothing
local player p=Player(PLAYER_NEUTRAL_PASSIVE)
local unit u
local integer unitID
local trigger t
local real life
set u=CreateUnit(p, 0x6E303030, - 1152.0, - 4864.0, 270.000)
set u=CreateUnit(p, 0x6E303030, 64.0, 3584.0, 270.000)
set gg_unit_ngme_0014=CreateUnit(p, 0x6E676D65, 6656.0, 5632.0, 270.000)
set gg_unit_ngme_0025=CreateUnit(p, 0x6E676D65, - 6528.0, - 6272.0, 270.000)
set u=CreateUnit(p, 0x6E303031, - 6464.0, - 7232.0, 270.000)
set u=CreateUnit(p, 0x6E303032, - 6592.0, - 6400.0, 270.000)
set u=CreateUnit(p, 0x6E303033, - 6848.0, - 6656.0, 270.000)
set u=CreateUnit(p, 0x6E303031, 6080.0, 6592.0, 270.000)
set u=CreateUnit(p, 0x6E303032, 6720.0, 5824.0, 270.000)
set u=CreateUnit(p, 0x6E303033, 6720.0, 6272.0, 270.000)
set gg_unit_n00G_0048=CreateUnit(p, 0x6E303047, 128.0, - 512.0, 270.000)
call SetUnitColor(gg_unit_n00G_0048, ConvertPlayerColor(9))
set u=CreateUnit(p, 0x6E303049, 128.0, - 512.0, 270.000)
set u=CreateUnit(p, 0x6E303041, 6784.0, 6016.0, 270.000)
set u=CreateUnit(p, 0x6E303041, - 6720.0, - 6528.0, 270.000)
set u=CreateUnit(p, 0x6E303042, - 6272.0, - 7168.0, 270.000)
set u=CreateUnit(p, 0x6E303042, 5888.0, 6592.0, 270.000)
set u=CreateUnit(p, 0x6E303131, 6976.0, - 5568.0, 270.000)
set u=CreateUnit(p, 0x6E303048, - 6656.0, - 7168.0, 270.000)
set u=CreateUnit(p, 0x6E303048, 6272.0, 6592.0, 270.000)
set u=CreateUnit(p, 0x6E303130, - 5888.0, - 7040.0, 270.000)
set u=CreateUnit(p, 0x6E303130, 5632.0, 6336.0, 270.000)
set u=CreateUnit(p, 0x6E303134, - 6080.0, - 7104.0, 270.000)
set u=CreateUnit(p, 0x6E303134, 5696.0, 6528.0, 270.000)
set u=CreateUnit(p, 0x6E303133, - 960.0, - 4800.0, 270.000)
call SetUnitColor(u, ConvertPlayerColor(8))
set u=CreateUnit(p, 0x6E303133, 192.0, 3712.0, 270.000)
call SetUnitColor(u, ConvertPlayerColor(8))
endfunction
function CreateNeutralPassive takes nothing returns nothing
local player p=Player(PLAYER_NEUTRAL_PASSIVE)
local unit u
local integer unitID
local trigger t
local real life
set gg_unit_n00J_0066=CreateUnit(p, 0x6E30304A, 1414.6, 3149.7, 77.205)
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t, gg_unit_n00J_0066, EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t, gg_unit_n00J_0066, EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(t, function Unit000090_DropItems)
set gg_unit_n00K_0067=CreateUnit(p, 0x6E30304B, - 7289.7, 2536.8, 343.444)
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t, gg_unit_n00K_0067, EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t, gg_unit_n00K_0067, EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(t, function Unit000088_DropItems)
set gg_unit_n00L_0068=CreateUnit(p, 0x6E30304C, 197.0, - 378.3, 270.000)
call SetUnitColor(gg_unit_n00L_0068, ConvertPlayerColor(1))
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t, gg_unit_n00L_0068, EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t, gg_unit_n00L_0068, EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(t, function Unit000089_DropItems)
set gg_unit_n00M_0069=CreateUnit(p, 0x6E30304D, 5268.4, - 5479.7, 264.039)
set t=CreateTrigger()
call TriggerRegisterUnitEvent(t, gg_unit_n00M_0069, EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(t, gg_unit_n00M_0069, EVENT_UNIT_CHANGE_OWNER)
call TriggerAddAction(t, function Unit000087_DropItems)
set gg_unit_n00Y_0109=CreateUnit(p, 0x6E303059, - 416.8, 179.3, 23.520)
set gg_unit_n00Y_0111=CreateUnit(p, 0x6E303059, 808.3, - 1080.3, 179.740)
set gg_unit_n00Z_0112=CreateUnit(p, 0x6E30305A, - 4063.3, 3882.0, 187.650)
set gg_unit_n015_0115=CreateUnit(p, 0x6E303135, 3987.5, 388.4, 283.555)
set gg_unit_n017_0116=CreateUnit(p, 0x6E303137, - 627.3, - 4201.8, 266.591)
endfunction
function CreatePlayerBuildings takes nothing returns nothing
call CreateBuildingsForPlayer0()
call CreateBuildingsForPlayer1()
call CreateBuildingsForPlayer2()
call CreateBuildingsForPlayer3()
call CreateBuildingsForPlayer4()
call CreateBuildingsForPlayer5()
call CreateBuildingsForPlayer6()
call CreateBuildingsForPlayer7()
call CreateBuildingsForPlayer8()
call CreateBuildingsForPlayer9()
call CreateBuildingsForPlayer10()
call CreateBuildingsForPlayer11()
endfunction
function CreatePlayerUnits takes nothing returns nothing
call CreateUnitsForPlayer0()
call CreateUnitsForPlayer1()
call CreateUnitsForPlayer2()
call CreateUnitsForPlayer3()
call CreateUnitsForPlayer4()
call CreateUnitsForPlayer5()
call CreateUnitsForPlayer6()
call CreateUnitsForPlayer7()
call CreateUnitsForPlayer8()
call CreateUnitsForPlayer9()
call CreateUnitsForPlayer10()
call CreateUnitsForPlayer11()
endfunction
function CreateAllUnits takes nothing returns nothing
call CreateNeutralPassiveBuildings()
call CreatePlayerBuildings()
call CreateNeutralHostile()
call CreateNeutralPassive()
call CreatePlayerUnits()
endfunction
function CreateRegions takes nothing returns nothing
local weathereffect we
set gg_rct_xuanren00=Rect(- 6688.0, 6688.0, - 6496.0, 6880.0)
set gg_rct_xuanren01=Rect(- 6464.0, 6688.0, - 6272.0, 6880.0)
set gg_rct_xuanren02=Rect(- 6240.0, 6688.0, - 6048.0, 6880.0)
set gg_rct_xuanren03=Rect(- 6016.0, 6688.0, - 5824.0, 6880.0)
set gg_rct_xuanren04=Rect(- 5568.0, 6688.0, - 5376.0, 6880.0)
set gg_rct_xuanren05=Rect(- 5792.0, 6688.0, - 5600.0, 6880.0)
set gg_rct_xuanren06=Rect(- 5344.0, 6688.0, - 5152.0, 6880.0)
set gg_rct_xuanren07=Rect(- 5120.0, 6688.0, - 4928.0, 6880.0)
set gg_rct_xuanren08=Rect(- 5344.0, 6240.0, - 5152.0, 6432.0)
set gg_rct_xuanren09=Rect(- 6688.0, 6464.0, - 6496.0, 6656.0)
set gg_rct_xuanren10=Rect(- 6464.0, 6464.0, - 6272.0, 6656.0)
set gg_rct_xuanren11=Rect(- 6240.0, 6464.0, - 6048.0, 6656.0)
set gg_rct_xuanren12=Rect(- 6016.0, 6464.0, - 5824.0, 6656.0)
set gg_rct_xuanren=Rect(- 7232.0, 5536.0, - 4672.0, 7008.0)
set gg_rct_shuabing1=Rect(- 6336.0, - 4224.0, - 5952.0, - 3776.0)
set gg_rct_shuabign2=Rect(2336.0, 5888.0, 2848.0, 6368.0)
set gg_rct_shuabign3=Rect(4992.0, 5152.0, 5536.0, 5568.0)
set gg_rct_shuabign4=Rect(- 3424.0, - 6816.0, - 2880.0, - 6432.0)
set gg_rct_shuabing5=Rect(5632.0, 3168.0, 6272.0, 3744.0)
set gg_rct_shuabing6=Rect(- 5376.0, - 6272.0, - 4864.0, - 5792.0)
set gg_rct_xuanren13=Rect(- 5792.0, 6464.0, - 5600.0, 6656.0)
set gg_rct_xuanren14=Rect(- 5568.0, 6464.0, - 5376.0, 6656.0)
set gg_rct_xuanren15=Rect(- 5344.0, 6464.0, - 5152.0, 6656.0)
set gg_rct_yaoqingjuedou=Rect(- 7488.0, 5056.0, - 4160.0, 7232.0)
set gg_rct_PK1=Rect(- 7232.0, 6048.0, - 7008.0, 6336.0)
set gg_rct_PK2=Rect(- 4896.0, 6048.0, - 4672.0, 6336.0)
set gg_rct_xuanren_16=Rect(- 5120.0, 6464.0, - 4928.0, 6656.0)
set gg_rct_xuanren_17=Rect(- 5120.0, 6240.0, - 4928.0, 6432.0)
set gg_rct_xuanren_18=Rect(- 6688.0, 6240.0, - 6496.0, 6432.0)
set gg_rct_G1=Rect(- 6304.0, - 3488.0, - 5920.0, - 3104.0)
set gg_rct_G2=Rect(- 5824.0, - 1664.0, - 5440.0, - 1280.0)
set gg_rct_G3=Rect(- 5056.0, 768.0, - 4704.0, 1088.0)
set gg_rct_G4=Rect(- 4416.0, 2368.0, - 4032.0, 2752.0)
set gg_rct_G5=Rect(- 800.0, 4832.0, - 384.0, 5152.0)
set gg_rct_G6=Rect(1376.0, 6016.0, 1856.0, 6432.0)
set gg_rct_GT1=Rect(- 6784.0, - 3776.0, - 5312.0, - 2176.0)
set gg_rct_GT2=Rect(- 6496.0, - 2176.0, - 4640.0, - 224.0)
set gg_rct_GT3=Rect(- 5856.0, - 224.0, - 3904.0, 1760.0)
set gg_rct_GT4=Rect(- 5152.0, 1760.0, - 2912.0, 4000.0)
set gg_rct_GT5=Rect(- 2912.0, 2848.0, 512.0, 6464.0)
set gg_rct_GT6=Rect(512.0, 4640.0, 2240.0, 6720.0)
set gg_rct_G7=Rect(- 160.0, - 6176.0, 320.0, - 5792.0)
set gg_rct_G8=Rect(2720.0, - 4864.0, 3136.0, - 4512.0)
set gg_rct_G9=Rect(4160.0, - 4032.0, 4544.0, - 3616.0)
set gg_rct_G10=Rect(4864.0, - 2400.0, 5312.0, - 1984.0)
set gg_rct_G11=Rect(5184.0, - 160.0, 5568.0, 448.0)
set gg_rct_G12=Rect(5600.0, 2272.0, 5952.0, 2720.0)
set gg_rct_GT7=Rect(- 1248.0, - 7072.0, 1312.0, - 4800.0)
set gg_rct_GT8=Rect(1312.0, - 5888.0, 3456.0, - 3872.0)
set gg_rct_GT9=Rect(3456.0, - 4768.0, 5088.0, - 3008.0)
set gg_rct_GT10=Rect(4224.0, - 3008.0, 6016.0, - 1056.0)
set gg_rct_GT11=Rect(4736.0, - 1056.0, 6208.0, 1280.0)
set gg_rct_GT12=Rect(4992.0, 1280.0, 6688.0, 3168.0)
set gg_rct_xuanren_19=Rect(- 6464.0, 6240.0, - 6272.0, 6432.0)
set gg_rct_xuanren_20=Rect(- 6240.0, 6240.0, - 6048.0, 6432.0)
set gg_rct_YG1=Rect(- 3072.0, - 1440.0, - 2560.0, - 832.0)
set gg_rct_YG2=Rect(- 2304.0, - 3392.0, - 1760.0, - 2880.0)
set gg_rct_YG3=Rect(2016.0, 416.0, 2720.0, 864.0)
set gg_rct_YG4=Rect(2080.0, 2688.0, 2496.0, 3200.0)
set gg_rct_YG5=Rect(6048.0, - 5152.0, 6432.0, - 4800.0)
set gg_rct_YG6=Rect(6560.0, - 7488.0, 7264.0, - 6752.0)
set gg_rct_YG7=Rect(4672.0, - 7456.0, 5248.0, - 7008.0)
set gg_rct_DT_1=Rect(224.0, 3232.0, 992.0, 3872.0)
set gg_rct_DT_2=Rect(- 2112.0, - 4864.0, - 1312.0, - 4096.0)
set gg_rct_xuanren21=Rect(- 5792.0, 6240.0, - 5600.0, 6432.0)
set gg_rct_xuechi_1=Rect(- 7072.0, - 7264.0, - 5920.0, - 6272.0)
set gg_rct_xuechi_2=Rect(5824.0, 5728.0, 6976.0, 6720.0)
set gg_rct_GH=Rect(- 320.0, - 928.0, 576.0, - 64.0)
set gg_rct_xuanren22=Rect(- 6016.0, 6240.0, - 5824.0, 6432.0)
set gg_rct_FMH=Rect(- 7488.0, 4192.0, - 7104.0, 4576.0)
set gg_rct_sheep=Rect(- 3008.0, - 3616.0, 3456.0, 2720.0)
set we=AddWeatherEffect(gg_rct_sheep, 0x4C526D61)
call EnableWeatherEffect(we, true)
set gg_rct_xuanren23=Rect(- 6464.0, 6016.0, - 6272.0, 6208.0)
set gg_rct_xuanren24=Rect(- 5568.0, 6240.0, - 5376.0, 6432.0)
set gg_rct_baga_1=Rect(- 4192.0, 3776.0, - 3936.0, 4064.0)
set gg_rct_baga_2=Rect(- 544.0, 32.0, - 256.0, 288.0)
set gg_rct_baga_3=Rect(672.0, - 1216.0, 960.0, - 928.0)
set gg_rct_xuanren25=Rect(- 6240.0, 6016.0, - 6048.0, 6208.0)
set gg_rct_js_1_1=Rect(- 1984.0, 5728.0, - 512.0, 6912.0)
set gg_rct_js_1_2=Rect(6304.0, - 3296.0, 7008.0, - 1216.0)
set gg_rct_boss=Rect(- 3680.0, - 4992.0, - 3392.0, - 4672.0)
set gg_rct_jidi=Rect(- 7424.0, - 7680.0, - 3360.0, - 4160.0)
set gg_rct_lunxuan=Rect(- 6048.0, 5792.0, - 5760.0, 6080.0)
set gg_rct_lunxuan_2=Rect(- 5632.0, 5792.0, - 5344.0, 6080.0)
set gg_rct_lunxuan_ww=Rect(- 5920.0, 6080.0, - 5472.0, 6176.0)
set gg_rct_lunxuan_jd=Rect(- 5920.0, 5696.0, - 5472.0, 5792.0)
set gg_rct_xuanren26=Rect(- 6464.0, 5792.0, - 6272.0, 5984.0)
set gg_rct_xuanren27=Rect(- 5344.0, 6016.0, - 5152.0, 6208.0)
set gg_rct_xuanren28=Rect(- 6688.0, 6016.0, - 6496.0, 6208.0)
set gg_rct_banben=Rect(- 5760.0, 5792.0, - 5632.0, 5888.0)
set gg_rct_xuanren29=Rect(- 6912.0, 6688.0, - 6720.0, 6880.0)
set gg_rct_xuanren30=Rect(- 6688.0, 5568.0, - 6496.0, 5760.0)
set gg_rct_baga_4=Rect(- 800.0, - 4384.0, - 448.0, - 4064.0)
set gg_rct_baga_5=Rect(3808.0, 192.0, 4160.0, 512.0)
set gg_rct_jidi_2=Rect(2912.0, 3744.0, 7360.0, 6848.0)
set gg_rct_jidi_3=Rect(2848.0, 3808.0, 3616.0, 4384.0)
set gg_rct_xuanren31=Rect(- 6240.0, 5792.0, - 6048.0, 5984.0)
set gg_rct_xuanren32=Rect(- 5344.0, 5792.0, - 5152.0, 5984.0)
set gg_rct_xuanren33=Rect(- 5120.0, 5568.0, - 4928.0, 5760.0)
set gg_rct_xuanren34=Rect(- 5120.0, 6016.0, - 4928.0, 6208.0)
set gg_rct_YG8=Rect(- 3456.0, - 2624.0, - 2944.0, - 2112.0)
set gg_rct_YG9=Rect(3328.0, 1792.0, 3904.0, 2336.0)
set gg_rct_xuanren35=Rect(- 5120.0, 5792.0, - 4928.0, 5984.0)
set gg_rct_xuanren36=Rect(- 6688.0, 5792.0, - 6496.0, 5984.0)
endfunction
function Trig_suijiduiwuActions takes nothing returns nothing
endfunction
function InitTrig_suijiduiwu takes nothing returns nothing
set gg_trg_suijiduiwu=CreateTrigger()
call TriggerRegisterTimerEventSingle(gg_trg_suijiduiwu, 0.00)
call TriggerAddAction(gg_trg_suijiduiwu, function Trig_suijiduiwuActions)
endfunction
function Trig_chushihuaFunc013T takes nothing returns nothing
call DestroyFogModifier(udg_kejiandu[10])
call DestroyFogModifier(udg_kejiandu[11])
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
endfunction
function Trig_chushihuaActions takes nothing returns nothing
local timer ydl_timer
set udg_zhengshu[72]=0
set udg_zhengshu[73]=0
set udg_zhengshu[120]=0
call CreateFogModifierRectBJ(true, s__baka_SPlayer(0), FOG_OF_WAR_VISIBLE, gg_rct_xuanren)
set udg_kejiandu[0]=GetLastCreatedFogModifier()
call CreateFogModifierRectBJ(true, s__baka_SPlayer(5), FOG_OF_WAR_VISIBLE, gg_rct_xuanren)
set udg_kejiandu[1]=GetLastCreatedFogModifier()
call CreateFogModifierRectBJ(true, s__baka_SPlayer(0), FOG_OF_WAR_VISIBLE, GetEntireMapRect())
set udg_kejiandu[10]=GetLastCreatedFogModifier()
call CreateFogModifierRectBJ(true, s__baka_SPlayer(5), FOG_OF_WAR_VISIBLE, GetEntireMapRect())
set udg_kejiandu[11]=GetLastCreatedFogModifier()
set ydl_timer=CreateTimer()
call TimerStart(ydl_timer, 1.00, false, function Trig_chushihuaFunc013T)
set udg_buer[0]=true
set udg_buer[3]=true
set udg_buer[6]=true
set udg_buer[7]=true
set udg_buer[8]=true
set udg_buer[9]=true
set udg_buer[10]=true
call CreateNUnitsAtLoc(1, 0x456D6F6F, s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE), GetRectCenter(gg_rct_xuanren02), 270.00)
set udg_hero[0]=bj_lastCreatedUnit
call CreateNUnitsAtLoc(1, 0x45776172, s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE), GetRectCenter(gg_rct_xuanren01), 270.00)
set udg_hero[1]=bj_lastCreatedUnit
call CreateNUnitsAtLoc(1, 0x48757468, s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE), GetRectCenter(gg_rct_xuanren00), 270.00)
set udg_hero[2]=bj_lastCreatedUnit
call CreateNUnitsAtLoc(1, 0x4E74696E, s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE), GetRectCenter(gg_rct_xuanren05), 270.00)
set udg_hero[3]=bj_lastCreatedUnit
call CreateNUnitsAtLoc(1, 0x4870616C, s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE), GetRectCenter(gg_rct_xuanren06), 270.00)
set udg_hero[4]=bj_lastCreatedUnit
call CreateNUnitsAtLoc(1, 0x48616D67, s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE), GetRectCenter(gg_rct_xuanren07), 270.00)
set udg_hero[5]=bj_lastCreatedUnit
call CreateNUnitsAtLoc(1, 0x486D6B67, s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE), GetRectCenter(gg_rct_xuanren08), 270.00)
set udg_hero[6]=bj_lastCreatedUnit
call CreateNUnitsAtLoc(1, 0x48767764, s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE), GetRectCenter(gg_rct_xuanren03), 270.00)
set udg_hero[9]=bj_lastCreatedUnit
call CreateNUnitsAtLoc(1, 0x48617266, s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE), GetRectCenter(gg_rct_xuanren04), 270.00)
set udg_hero[10]=bj_lastCreatedUnit
call CreateNUnitsAtLoc(1, 0x4F746368, s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE), GetRectCenter(gg_rct_xuanren09), 270.00)
set udg_hero[12]=bj_lastCreatedUnit
call CreateNUnitsAtLoc(1, 0x4564656D, s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE), GetRectCenter(gg_rct_xuanren10), 270.00)
set udg_hero[13]=bj_lastCreatedUnit
call CreateNUnitsAtLoc(1, 0x45777264, s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE), GetRectCenter(gg_rct_xuanren11), 270.00)
set udg_hero[14]=bj_lastCreatedUnit
call CreateNUnitsAtLoc(1, 0x55647265, s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE), GetRectCenter(gg_rct_xuanren12), 270.00)
set udg_hero[15]=bj_lastCreatedUnit
call CreateNUnitsAtLoc(1, 0x4F736864, s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE), GetRectCenter(gg_rct_xuanren13), 270.00)
set udg_hero[16]=bj_lastCreatedUnit
call CreateNUnitsAtLoc(1, 0x4F626C61, s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE), GetRectCenter(gg_rct_xuanren14), 270.00)
set udg_hero[17]=bj_lastCreatedUnit
call CreateNUnitsAtLoc(1, 0x45696C6C, s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE), GetRectCenter(gg_rct_xuanren15), 270.00)
set udg_hero[18]=bj_lastCreatedUnit
call CreateNUnitsAtLoc(1, 0x4F726578, s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE), GetRectCenter(gg_rct_xuanren_16), 270.00)
set udg_hero[19]=bj_lastCreatedUnit
call CreateNUnitsAtLoc(1, 0x4F666172, s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE), GetRectCenter(gg_rct_xuanren_17), 270.00)
set udg_hero[20]=bj_lastCreatedUnit
call CreateNUnitsAtLoc(1, 0x456B6565, s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE), GetRectCenter(gg_rct_xuanren_18), 270.00)
set udg_hero[21]=bj_lastCreatedUnit
call CreateNUnitsAtLoc(1, 0x48626C6D, s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE), GetRectCenter(gg_rct_xuanren_19), 270.00)
set udg_hero[22]=bj_lastCreatedUnit
call CreateNUnitsAtLoc(1, 0x45657669, s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE), GetRectCenter(gg_rct_xuanren_20), 270.00)
set udg_hero[23]=bj_lastCreatedUnit
call CreateNUnitsAtLoc(1, 0x45667572, s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE), GetRectCenter(gg_rct_xuanren21), 270.00)
set udg_hero[24]=bj_lastCreatedUnit
call CreateNUnitsAtLoc(1, 0x4F636268, s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE), GetRectCenter(gg_rct_xuanren22), 270.00)
set udg_hero[25]=bj_lastCreatedUnit
call CreateNUnitsAtLoc(1, 0x48303030, s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE), GetRectCenter(gg_rct_xuanren23), 270.00)
set udg_hero[26]=bj_lastCreatedUnit
call CreateNUnitsAtLoc(1, 0x4F73616D, s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE), GetRectCenter(gg_rct_xuanren24), 270.00)
set udg_hero[27]=bj_lastCreatedUnit
call CreateNUnitsAtLoc(1, 0x556C6963, s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE), GetRectCenter(gg_rct_xuanren25), 270.00)
set udg_hero[28]=bj_lastCreatedUnit
call CreateNUnitsAtLoc(1, 0x486B616C, s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE), GetRectCenter(gg_rct_xuanren26), 270.00)
set udg_hero[29]=bj_lastCreatedUnit
call CreateNUnitsAtLoc(1, 0x486D6272, s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE), GetRectCenter(gg_rct_xuanren27), 270.00)
set udg_hero[30]=bj_lastCreatedUnit
call CreateNUnitsAtLoc(1, 0x48303036, s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE), GetRectCenter(gg_rct_xuanren28), 270.00)
set udg_hero[31]=bj_lastCreatedUnit
call CreateNUnitsAtLoc(1, 0x55646561, s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE), GetRectCenter(gg_rct_xuanren31), 270.00)
set udg_hero[34]=bj_lastCreatedUnit
call CreateNUnitsAtLoc(1, 0x4830304A, s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE), GetRectCenter(gg_rct_xuanren32), 270.00)
set udg_hero[35]=bj_lastCreatedUnit
call CreateNUnitsAtLoc(1, 0x4830304C, s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE), GetRectCenter(gg_rct_xuanren34), 270.00)
set udg_hero[37]=bj_lastCreatedUnit
call CreateNUnitsAtLoc(1, 0x4830304E, s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE), GetRectCenter(gg_rct_xuanren35), 270.00)
set udg_hero[38]=bj_lastCreatedUnit
call CreateNUnitsAtLoc(1, 0x4830304F, s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE), GetRectCenter(gg_rct_xuanren36), 270.00)
set udg_hero[39]=bj_lastCreatedUnit
call GroupAddUnit(udg_danweizu[0], udg_hero[0])
call GroupAddUnit(udg_danweizu[0], udg_hero[1])
call GroupAddUnit(udg_danweizu[0], udg_hero[2])
call GroupAddUnit(udg_danweizu[0], udg_hero[3])
call GroupAddUnit(udg_danweizu[0], udg_hero[4])
call GroupAddUnit(udg_danweizu[0], udg_hero[5])
call GroupAddUnit(udg_danweizu[0], udg_hero[6])
call GroupAddUnit(udg_danweizu[0], udg_hero[9])
call GroupAddUnit(udg_danweizu[0], udg_hero[10])
call GroupAddUnit(udg_danweizu[0], udg_hero[12])
call GroupAddUnit(udg_danweizu[0], udg_hero[13])
call GroupAddUnit(udg_danweizu[0], udg_hero[14])
call GroupAddUnit(udg_danweizu[0], udg_hero[15])
call GroupAddUnit(udg_danweizu[0], udg_hero[16])
call GroupAddUnit(udg_danweizu[0], udg_hero[17])
call GroupAddUnit(udg_danweizu[0], udg_hero[18])
call GroupAddUnit(udg_danweizu[0], udg_hero[19])
call GroupAddUnit(udg_danweizu[0], udg_hero[20])
call GroupAddUnit(udg_danweizu[0], udg_hero[21])
call GroupAddUnit(udg_danweizu[0], udg_hero[22])
call GroupAddUnit(udg_danweizu[0], udg_hero[23])
call GroupAddUnit(udg_danweizu[0], udg_hero[24])
call GroupAddUnit(udg_danweizu[0], udg_hero[25])
call GroupAddUnit(udg_danweizu[0], udg_hero[26])
call GroupAddUnit(udg_danweizu[0], udg_hero[27])
call GroupAddUnit(udg_danweizu[0], udg_hero[28])
call GroupAddUnit(udg_danweizu[0], udg_hero[29])
call GroupAddUnit(udg_danweizu[0], udg_hero[30])
call GroupAddUnit(udg_danweizu[0], udg_hero[31])
call GroupAddUnit(udg_danweizu[0], udg_hero[34])
call GroupAddUnit(udg_danweizu[0], udg_hero[35])
call GroupAddUnit(udg_danweizu[0], udg_hero[37])
call GroupAddUnit(udg_danweizu[0], udg_hero[38])
call GroupAddUnit(udg_danweizu[0], udg_hero[39])
set udg_danweizu[0]=YDWEGetUnitsInRectOfPlayerNull(gg_rct_xuanren , s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE))
set udg_jiemeng[0]=CreateForce()
set udg_jiemeng[1]=CreateForce()
call ForceAddPlayer(udg_jiemeng[0], s__baka_SPlayer(0))
call ForceAddPlayer(udg_jiemeng[0], s__baka_SPlayer(1))
call ForceAddPlayer(udg_jiemeng[0], s__baka_SPlayer(2))
call ForceAddPlayer(udg_jiemeng[0], s__baka_SPlayer(3))
call ForceAddPlayer(udg_jiemeng[0], s__baka_SPlayer(4))
call ForceAddPlayer(udg_jiemeng[1], s__baka_SPlayer(5))
call ForceAddPlayer(udg_jiemeng[1], s__baka_SPlayer(6))
call ForceAddPlayer(udg_jiemeng[1], s__baka_SPlayer(7))
call ForceAddPlayer(udg_jiemeng[1], s__baka_SPlayer(8))
call ForceAddPlayer(udg_jiemeng[1], s__baka_SPlayer(9))
call SetForceAllianceStateBJ(udg_jiemeng[0], bj_FORCE_PLAYER[10], bj_ALLIANCE_ALLIED_VISION)
call SetForceAllianceStateBJ(bj_FORCE_PLAYER[10], udg_jiemeng[0], bj_ALLIANCE_ALLIED_VISION)
call SetForceAllianceStateBJ(udg_jiemeng[1], bj_FORCE_PLAYER[11], bj_ALLIANCE_ALLIED_VISION)
call SetForceAllianceStateBJ(bj_FORCE_PLAYER[11], udg_jiemeng[1], bj_ALLIANCE_ALLIED_VISION)
call SetPlayerName(s__baka_SPlayer(10), "TRIGSTR_7079")
call SetPlayerName(s__baka_SPlayer(11), "TRIGSTR_7081")
call YDWESetPlayerColorBJNull(s__baka_SPlayer(10) , PLAYER_COLOR_AQUA , true)
call YDWESetPlayerColorBJNull(s__baka_SPlayer(11) , PLAYER_COLOR_BROWN , true)
call SetUnitTimeScale(gg_unit_e05G_0101, 0.00)
call s__baka_OB()
set ydl_timer=null
endfunction
function InitTrig_chushihua takes nothing returns nothing
set gg_trg_chushihua=CreateTrigger()
call TriggerAddAction(gg_trg_chushihua, function Trig_chushihuaActions)
endfunction
function Trig_time_0Func001A takes nothing returns nothing
call UnitAddAbility(GetEnumUnit(), 0x416E6532)
call ModifyHeroSkillPoints(GetEnumUnit(), bj_MODIFYMETHOD_SET, 0)
endfunction
function Trig_time_0Func068A takes nothing returns nothing
call TriggerRegisterPlayerChatEvent(gg_trg_zs, GetEnumPlayer(), "-zs", false)
call TriggerRegisterPlayerChatEvent(gg_trg_bug, GetEnumPlayer(), "-bug", false)
call TriggerRegisterPlayerChatEvent(gg_trg_kick_player, GetEnumPlayer(), "-kick", false)
call TriggerRegisterPlayerChatEvent(gg_trg_kick_cancel, GetEnumPlayer(), "-c", false)
call TriggerRegisterPlayerEventLeave(gg_trg_out, GetEnumPlayer())
call TriggerRegisterPlayerChatEvent(gg_trg_OB, GetEnumPlayer(), "-OB", true)
call TriggerRegisterPlayerChatEvent(gg_trg_PK_start_0, GetEnumPlayer(), "-pk", false)
call SetPlayerStateBJ(GetEnumPlayer(), PLAYER_STATE_RESOURCE_GOLD, 1200)
endfunction
function Trig_time_0Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu[0], function Trig_time_0Func001A)
call s__baka_IssueTargetOrderById2(gg_unit_ngme_0025 , 852566 , gg_unit_hgtw_0012)
call s__baka_IssueTargetOrderById2(gg_unit_ngme_0014 , 852566 , gg_unit_hgtw_0019)
call TriggerExecute(gg_trg_duomianban6_exe_2)
call StartTimerBJ(udg_Times[3], true, 0.03)
call StartTimerBJ(udg_Times[4], true, 0.04)
call SetReservedLocalHeroButtons(1)
call SetMusicVolume(85)
call SetPlayerOnScoreScreen(s__baka_SPlayer(10), false)
call SetPlayerOnScoreScreen(s__baka_SPlayer(11), false)
set udg_Points=- 1
call QuestMessageBJ(GetPlayersAll(), bj_QUESTMESSAGE_UPDATED, "TRIGSTR_8407")
call QuestMessageBJ(GetPlayersAll(), bj_QUESTMESSAGE_UPDATED, "TRIGSTR_8426")
call QuestMessageBJ(GetPlayersAll(), bj_QUESTMESSAGE_UPDATED, "TRIGSTR_8434")
call QuestMessageBJ(GetPlayersAll(), bj_QUESTMESSAGE_UPDATED, "TRIGSTR_8435")
set udg_Color[1]="|Cffff0000"
set udg_Color[2]="|Cff0041ff"
set udg_Color[3]="|Cff1BE6B8"
set udg_Color[4]="|Cff6633cc"
set udg_Color[5]="|Cffffff00"
set udg_Color[6]="|Cfffe890d"
set udg_Color[7]="|Cff1fbf00"
set udg_Color[8]="|Cffff99ff"
set udg_Color[9]="|Cff949596"
set udg_Color[10]="|Cff7dbef1"
set udg_Color[11]="|Cff757575"
set udg_Color[21]="——————"
set udg_Color[22]="—Computer—"
set udg_SmD[1]=gg_unit_n00O_0091
set udg_SmD[2]=gg_unit_n00P_0092
set udg_SmD[3]=gg_unit_n00Q_0093
set udg_SmD[4]=gg_unit_n00R_0094
set udg_SmD[5]=gg_unit_n00S_0095
set udg_SmD[6]=gg_unit_n00T_0096
set udg_SmD[7]=gg_unit_n00U_0097
set udg_SmD[8]=gg_unit_n00V_0098
set udg_SmD[9]=gg_unit_n00W_0100
set udg_SmD[10]=gg_unit_n00X_0099
set udg_wupinqiu[1]=gg_unit_n016_0137
set udg_wupinqiu[2]=gg_unit_n016_0139
set udg_wupinqiu[3]=gg_unit_n016_0140
set udg_wupinqiu[4]=gg_unit_n016_0142
set udg_wupinqiu[5]=gg_unit_n016_0143
set udg_wupinqiu[6]=gg_unit_n016_0144
set udg_wupinqiu[7]=gg_unit_n016_0145
set udg_wupinqiu[8]=gg_unit_n016_0146
set udg_wupinqiu[9]=gg_unit_n016_0147
set udg_wupinqiu[10]=gg_unit_n016_0148
set udg_jianzhu[2]=gg_unit_nefm_0035
set udg_jianzhu[3]=gg_unit_nefm_0032
set udg_jianzhu[4]=gg_unit_nefm_0041
set udg_jianzhu[5]=gg_unit_nefm_0038
set udg_SC[1]=true
set udg_SC[2]=true
set udg_SC[3]=true
set udg_SC[4]=true
set udg_zhengshu2[179]=6
call SetMapFlag(MAP_LOCK_RESOURCE_TRADING, true)
call DisableTrigger(gg_trg_SmD_SG)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_Score[bj_forLoopAIndex]=0
set udg_shangjin[bj_forLoopAIndex]=100
set udg_Name[bj_forLoopAIndex]=GetPlayerName(s__baka_SPlayer(bj_forLoopAIndex - 1))
call SelectUnitForPlayerSingle(udg_SmD[bj_forLoopAIndex], s__baka_SPlayer(bj_forLoopAIndex - 1))
call IssueImmediateOrderById(udg_SmD[bj_forLoopAIndex], 852127)
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x41303647, false)
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x41303648, false)
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x41303837, false)
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x4130324C, false)
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x41303650, false)
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x4130444D, false)
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x41304457, false)
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x41304535, false)
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x41303953, false)
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x4130385A, false)
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x4130395A, false)
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x41304551, false)
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x4130374C, false)
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x41304845, false)
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x41304630, false)
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x41304931, false)
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x41304947, false)
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x41304C4D, false)
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x41304C4E, false)
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x41304C51, false)
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x41304D4E, false)
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x41305044, false)
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x41304E35, false)
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x41304F56, false)
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x41304551, false)
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x41305138, false)
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x41305139, false)
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x41305141, false)
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x41305142, false)
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x41305143, false)
call SetUnitAbilityLevel(udg_SmD[bj_forLoopAIndex], 0x4130424A, 6)
call SetUnitAbilityLevel(udg_SmD[bj_forLoopAIndex], 0x41304333, 3)
call SetUnitAbilityLevel(udg_SmD[bj_forLoopAIndex], 0x41304332, 3)
call UnitShareVision(gg_unit_n00G_0048, s__baka_SPlayer(bj_forLoopAIndex - 1), true)
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call SetPlayerAbilityAvailable(s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE), 0x41303837, false)
call EnableTrigger(gg_trg_SmD_SG)
call SetPlayerState(s__baka_SPlayer(PLAYER_NEUTRAL_AGGRESSIVE), PLAYER_STATE_GIVES_BOUNTY, 1)
call SetPlayerState(s__baka_SPlayer(10), PLAYER_STATE_GIVES_BOUNTY, 1)
call SetPlayerState(s__baka_SPlayer(11), PLAYER_STATE_GIVES_BOUNTY, 1)
call PanCameraToTimed(- 5775.00, 6225.00, 0.00)
call ForForce(GetPlayersAll(), function Trig_time_0Func068A)
if ( ( GetPlayerSlotState(s__baka_SPlayer(0)) == PLAYER_SLOT_STATE_PLAYING ) and ( GetPlayerController(s__baka_SPlayer(0)) == MAP_CONTROL_USER ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 30.00, "TRIGSTR_8436")
call StartTimerBJ(udg_jishiqi[64], true, 1.00)
call DialogSetMessage(udg_duihuakuang[0], "TRIGSTR_8458")
call DialogAddButtonWithHotkeyBJ(udg_duihuakuang[0], "TRIGSTR_8459", 0x51)
set udg_anniu[0]=GetLastCreatedButtonBJ()
call DialogAddButtonWithHotkeyBJ(udg_duihuakuang[0], "TRIGSTR_8460", 0x57)
set udg_anniu[1]=GetLastCreatedButtonBJ()
call DialogAddButtonWithHotkeyBJ(udg_duihuakuang[0], "TRIGSTR_8461", 0x45)
set udg_anniu[2]=GetLastCreatedButtonBJ()
call DialogAddButtonWithHotkeyBJ(udg_duihuakuang[0], "TRIGSTR_8462", 0x52)
set udg_anniu[3]=GetLastCreatedButtonBJ()
if ( ( GetPlayerSlotState(s__baka_SPlayer(1)) == PLAYER_SLOT_STATE_PLAYING ) and ( GetPlayerSlotState(s__baka_SPlayer(2)) == PLAYER_SLOT_STATE_PLAYING ) and ( GetPlayerSlotState(s__baka_SPlayer(3)) == PLAYER_SLOT_STATE_PLAYING ) and ( GetPlayerSlotState(s__baka_SPlayer(4)) == PLAYER_SLOT_STATE_PLAYING ) and ( GetPlayerSlotState(s__baka_SPlayer(5)) == PLAYER_SLOT_STATE_PLAYING ) and ( GetPlayerSlotState(s__baka_SPlayer(6)) == PLAYER_SLOT_STATE_PLAYING ) and ( GetPlayerSlotState(s__baka_SPlayer(7)) == PLAYER_SLOT_STATE_PLAYING ) and ( GetPlayerSlotState(s__baka_SPlayer(8)) == PLAYER_SLOT_STATE_PLAYING ) and ( GetPlayerSlotState(s__baka_SPlayer(9)) == PLAYER_SLOT_STATE_PLAYING ) ) then
call DialogAddButtonWithHotkeyBJ(udg_duihuakuang[0], "TRIGSTR_8463", 0x44)
set udg_anniu[4]=GetLastCreatedButtonBJ()
else
endif
if ( ( ( GetPlayerController(s__baka_SPlayer(5)) == MAP_CONTROL_COMPUTER ) or ( GetPlayerSlotState(s__baka_SPlayer(5)) == PLAYER_SLOT_STATE_EMPTY ) ) and ( ( GetPlayerController(s__baka_SPlayer(6)) == MAP_CONTROL_COMPUTER ) or ( GetPlayerSlotState(s__baka_SPlayer(6)) == PLAYER_SLOT_STATE_EMPTY ) ) and ( ( GetPlayerController(s__baka_SPlayer(7)) == MAP_CONTROL_COMPUTER ) or ( GetPlayerSlotState(s__baka_SPlayer(7)) == PLAYER_SLOT_STATE_EMPTY ) ) and ( ( GetPlayerController(s__baka_SPlayer(8)) == MAP_CONTROL_COMPUTER ) or ( GetPlayerSlotState(s__baka_SPlayer(8)) == PLAYER_SLOT_STATE_EMPTY ) ) and ( ( GetPlayerController(s__baka_SPlayer(9)) == MAP_CONTROL_COMPUTER ) or ( GetPlayerSlotState(s__baka_SPlayer(9)) == PLAYER_SLOT_STATE_EMPTY ) ) ) then
call DialogAddButtonWithHotkeyBJ(udg_duihuakuang[0], "TRIGSTR_8465", 0x46)
set udg_anniu[5]=GetLastCreatedButtonBJ()
else
if ( ( ( s__sys_Debug ) or ( ( GetPlayerSlotState(s__baka_SPlayer(1)) == PLAYER_SLOT_STATE_PLAYING ) and ( GetPlayerSlotState(s__baka_SPlayer(2)) == PLAYER_SLOT_STATE_PLAYING ) and ( GetPlayerSlotState(s__baka_SPlayer(3)) == PLAYER_SLOT_STATE_PLAYING ) and ( GetPlayerSlotState(s__baka_SPlayer(4)) == PLAYER_SLOT_STATE_PLAYING ) and ( GetPlayerSlotState(s__baka_SPlayer(5)) == PLAYER_SLOT_STATE_PLAYING ) and ( GetPlayerSlotState(s__baka_SPlayer(6)) == PLAYER_SLOT_STATE_PLAYING ) and ( GetPlayerSlotState(s__baka_SPlayer(7)) == PLAYER_SLOT_STATE_PLAYING ) and ( GetPlayerSlotState(s__baka_SPlayer(8)) == PLAYER_SLOT_STATE_PLAYING ) and ( GetPlayerSlotState(s__baka_SPlayer(9)) == PLAYER_SLOT_STATE_PLAYING ) ) ) ) then
call DialogAddButtonWithHotkeyBJ(udg_duihuakuang[0], "TRIGSTR_8464", 0x53)
set udg_anniu[7]=GetLastCreatedButtonBJ()
else
endif
endif
call DialogDisplay(s__baka_SPlayer(0), udg_duihuakuang[0], true)
call StartTimerBJ(udg_jishiqi[79], false, 120.00)
else
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_choose_ture[bj_forLoopAIndex]=true
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call StartTimerBJ(udg_jishiqi[64], true, 1.00)
call StartTimerBJ(udg_jishiqi[79], false, 120.00)
call DisplayTimedTextToForce(GetPlayersAll(), 30.00, "TRIGSTR_8451")
call EnableTrigger(gg_trg_choose_hero)
call StartTimerBJ(udg_jishiqi[0], false, 40.00)
call CreateTimerDialogBJ(udg_jishiqi[0], "TRIGSTR_8457")
set udg_chuangkou[0]=bj_lastCreatedTimerDialog
call TimerDialogDisplay(udg_chuangkou[0], true)
call StartTimerBJ(udg_jishiqi[28], false, 0.50)
set udg_buer[11]=true
call RemoveUnit(gg_unit_n00J_0066)
call RemoveUnit(gg_unit_n00K_0067)
call RemoveUnit(gg_unit_n00L_0068)
call RemoveUnit(gg_unit_n00M_0069)
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_time_0 takes nothing returns nothing
set gg_trg_time_0=CreateTrigger()
call TriggerRegisterTimerEventSingle(gg_trg_time_0, 0.00)
call TriggerAddAction(gg_trg_time_0, function Trig_time_0Actions)
endfunction
function Trig_time_1Actions takes nothing returns nothing
call SetPlayerStateBJ(s__baka_SPlayer(10), PLAYER_STATE_RESOURCE_GOLD, 1050)
call IssueNeutralImmediateOrderById(s__baka_SPlayer(10), gg_unit_ngme_0025, 0x49303358)
call IssueNeutralImmediateOrderById(s__baka_SPlayer(10), gg_unit_ngme_0025, 0x49303358)
call IssueNeutralImmediateOrderById(s__baka_SPlayer(10), gg_unit_ngme_0025, 0x49303358)
call IssueNeutralImmediateOrderById(s__baka_SPlayer(10), gg_unit_ngme_0025, 0x49303357)
call IssueNeutralImmediateOrderById(s__baka_SPlayer(10), gg_unit_ngme_0025, 0x49303357)
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(gg_unit_hgtw_0012 , 0x49303343))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(gg_unit_hgtw_0012 , 0x49303344))
call UnitRemoveAbility(gg_unit_hgtw_0012, 0x41304635)
call SetPlayerStateBJ(s__baka_SPlayer(11), PLAYER_STATE_RESOURCE_GOLD, 1050)
call IssueNeutralImmediateOrderById(s__baka_SPlayer(11), gg_unit_ngme_0014, 0x49303358)
call IssueNeutralImmediateOrderById(s__baka_SPlayer(11), gg_unit_ngme_0014, 0x49303358)
call IssueNeutralImmediateOrderById(s__baka_SPlayer(11), gg_unit_ngme_0014, 0x49303358)
call IssueNeutralImmediateOrderById(s__baka_SPlayer(11), gg_unit_ngme_0014, 0x49303357)
call IssueNeutralImmediateOrderById(s__baka_SPlayer(11), gg_unit_ngme_0014, 0x49303357)
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(gg_unit_hgtw_0019 , 0x49303343))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(gg_unit_hgtw_0019 , 0x49303344))
call UnitRemoveAbility(gg_unit_hgtw_0019, 0x41304635)
endfunction
function InitTrig_time_1 takes nothing returns nothing
set gg_trg_time_1=CreateTrigger()
call TriggerRegisterTimerEventSingle(gg_trg_time_1, 3.00)
call TriggerAddAction(gg_trg_time_1, function Trig_time_1Actions)
endfunction
function Trig__ctgbtActions takes nothing returns nothing
call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 5.00, "TRIGSTR_2848")
if ( ( GetRandomInt(1, 10) == 1 ) ) then
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=9
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 5.00, "TRIGSTR_2849")
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
else
endif
endfunction
function InitTrig__ctgbt takes nothing returns nothing
set gg_trg__ctgbt=CreateTrigger()
call TriggerRegisterPlayerChatEvent(gg_trg__ctgbt, s__baka_SPlayer(0), "-ctgbt", true)
call TriggerRegisterPlayerChatEvent(gg_trg__ctgbt, s__baka_SPlayer(1), "-ctgbt", true)
call TriggerRegisterPlayerChatEvent(gg_trg__ctgbt, s__baka_SPlayer(2), "-ctgbt", true)
call TriggerRegisterPlayerChatEvent(gg_trg__ctgbt, s__baka_SPlayer(3), "-ctgbt", true)
call TriggerRegisterPlayerChatEvent(gg_trg__ctgbt, s__baka_SPlayer(4), "-ctgbt", true)
call TriggerRegisterPlayerChatEvent(gg_trg__ctgbt, s__baka_SPlayer(5), "-ctgbt", true)
call TriggerRegisterPlayerChatEvent(gg_trg__ctgbt, s__baka_SPlayer(6), "-ctgbt", true)
call TriggerRegisterPlayerChatEvent(gg_trg__ctgbt, s__baka_SPlayer(7), "-ctgbt", true)
call TriggerRegisterPlayerChatEvent(gg_trg__ctgbt, s__baka_SPlayer(8), "-ctgbt", true)
call TriggerRegisterPlayerChatEvent(gg_trg__ctgbt, s__baka_SPlayer(9), "-ctgbt", true)
call TriggerAddAction(gg_trg__ctgbt, function Trig__ctgbtActions)
endfunction
function Trig__jzgtxActions takes nothing returns nothing
if ( ( GetRandomInt(1, 5) == 1 ) ) then
call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 5.00, "TRIGSTR_4056")
else
call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 5.00, "TRIGSTR_4055")
endif
endfunction
function InitTrig__jzgtx takes nothing returns nothing
set gg_trg__jzgtx=CreateTrigger()
call TriggerRegisterPlayerChatEvent(gg_trg__jzgtx, s__baka_SPlayer(0), "-jzgtx", true)
call TriggerRegisterPlayerChatEvent(gg_trg__jzgtx, s__baka_SPlayer(1), "-jzgtx", true)
call TriggerRegisterPlayerChatEvent(gg_trg__jzgtx, s__baka_SPlayer(2), "-jzgtx", true)
call TriggerRegisterPlayerChatEvent(gg_trg__jzgtx, s__baka_SPlayer(3), "-jzgtx", true)
call TriggerRegisterPlayerChatEvent(gg_trg__jzgtx, s__baka_SPlayer(4), "-jzgtx", true)
call TriggerRegisterPlayerChatEvent(gg_trg__jzgtx, s__baka_SPlayer(5), "-jzgtx", true)
call TriggerRegisterPlayerChatEvent(gg_trg__jzgtx, s__baka_SPlayer(6), "-jzgtx", true)
call TriggerRegisterPlayerChatEvent(gg_trg__jzgtx, s__baka_SPlayer(7), "-jzgtx", true)
call TriggerRegisterPlayerChatEvent(gg_trg__jzgtx, s__baka_SPlayer(8), "-jzgtx", true)
call TriggerRegisterPlayerChatEvent(gg_trg__jzgtx, s__baka_SPlayer(9), "-jzgtx", true)
call TriggerAddAction(gg_trg__jzgtx, function Trig__jzgtxActions)
endfunction
function Trig_time40out_randomFunc002Func001Func002Func001002001 takes nothing returns boolean
return ( ( GetFilterPlayer() == GetEnumPlayer() ) )
endfunction
function Trig_time40out_randomFunc002A takes nothing returns nothing
if ( ( GetPlayerController(GetEnumPlayer()) == MAP_CONTROL_USER ) and ( GetPlayerSlotState(GetEnumPlayer()) == PLAYER_SLOT_STATE_PLAYING ) ) then
if ( ( udg_choose_ture[( s__baka_SGetPlayerId(GetEnumPlayer()) + 1 )] == true ) ) then
set udg_LINSHIWANJIAZU=YDWEGetPlayersMatchingNull(Condition(function Trig_time40out_randomFunc002Func001Func002Func001002001))
call ClearTextMessagesBJ(udg_LINSHIWANJIAZU)
call DestroyForce(udg_LINSHIWANJIAZU)
set udg_danwei[0]=GroupPickRandomUnit(udg_danweizu[0])
set udg_danwei2[0]=udg_danwei[0]
call ModifyHeroSkillPoints(udg_danwei2[0], bj_MODIFYMETHOD_SET, 1)
call UnitRemoveAbility(udg_danwei2[0], 0x416E6532)
call InitPlayerHero(udg_danwei2[0])
set udg_a[GetUnitPointValue(udg_danwei2[0])]=true
call TriggerExecute(gg_trg_All_skills)
set udg_danwei2[0]=null
set udg_suijixuanren[( s__baka_SGetPlayerId(GetEnumPlayer()) + 1 )]=udg_danwei[0]
set udg_point[8]=GetPlayerStartLocationLoc(GetEnumPlayer())
call GroupRemoveUnit(udg_danweizu[0], udg_danwei[0])
call CreateNUnitsAtLoc(1, GetUnitTypeId(udg_danwei[0]), GetEnumPlayer(), udg_point[8], bj_UNIT_FACING)
set udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(bj_lastCreatedUnit)) + 1 )]=bj_lastCreatedUnit
call TriggerRegisterUnitEvent(gg_trg_renyishanghai_hero, udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(bj_lastCreatedUnit)) + 1 )], EVENT_UNIT_DAMAGED)
call YDWEMultiboardSetItemIconBJNull(udg_duomianban[0] , 1 , ( ( s__baka_SGetPlayerId(GetOwningPlayer(bj_lastCreatedUnit)) + 1 ) + 1 ) , udg_touxiang[GetUnitPointValue(bj_lastCreatedUnit)])
call QuestMessageBJ(GetPlayersAll(), bj_QUESTMESSAGE_UPDATED, ( GetPlayerName(GetEnumPlayer()) + ( "|cFF33FF33随机了|r" + GetHeroProperName(udg_player[( s__baka_SGetPlayerId(GetEnumPlayer()) + 1 )]) ) ))
call PanCameraToTimedLocForPlayer(GetEnumPlayer(), udg_point[8], 0)
call SelectUnitForPlayerSingle(udg_player[( s__baka_SGetPlayerId(GetEnumPlayer()) + 1 )], GetEnumPlayer())
call SetPlayerName(GetEnumPlayer(), ( udg_Name[( s__baka_SGetPlayerId(GetEnumPlayer()) + 1 )] + ( "（" + ( GetHeroProperName(udg_player[( s__baka_SGetPlayerId(GetEnumPlayer()) + 1 )]) + "）" ) ) ))
call RemoveLocation(udg_point[8])
set udg_choose_ture[( s__baka_SGetPlayerId(GetEnumPlayer()) + 1 )]=false
call RemoveUnit(udg_danwei[0])
set udg_danwei[0]=null
else
endif
else
endif
endfunction
function Trig_time40out_randomFunc003A takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Trig_time40out_randomActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call TimerDialogDisplay(udg_chuangkou[0], false)
call ForForce(GetPlayersAll(), function Trig_time40out_randomFunc002A)
call ForGroupBJ(udg_danweizu[0], function Trig_time40out_randomFunc003A)
if ( ( udg_Points >= 0 ) ) then
call RemoveUnit(udg_hero[15])
else
endif
call DestroyGroup(udg_danweizu[0])
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x41303646, false)
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x41303648, false)
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x41303034, false)
call UnitRemoveAbility(udg_SmD[bj_forLoopAIndex], 0x41303034)
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call RemoveRect(gg_rct_xuanren)
call RemoveRect(gg_rct_xuanren00)
call RemoveRect(gg_rct_xuanren01)
call RemoveRect(gg_rct_xuanren02)
call RemoveRect(gg_rct_xuanren03)
call RemoveRect(gg_rct_xuanren04)
call RemoveRect(gg_rct_xuanren05)
call RemoveRect(gg_rct_xuanren06)
call RemoveRect(gg_rct_xuanren07)
call RemoveRect(gg_rct_xuanren08)
call RemoveRect(gg_rct_xuanren09)
call RemoveRect(gg_rct_xuanren10)
call RemoveRect(gg_rct_xuanren11)
call RemoveRect(gg_rct_xuanren12)
call RemoveRect(gg_rct_xuanren13)
call RemoveRect(gg_rct_xuanren14)
call RemoveRect(gg_rct_xuanren15)
call RemoveRect(gg_rct_xuanren_16)
call RemoveRect(gg_rct_xuanren_17)
call RemoveRect(gg_rct_xuanren_18)
call RemoveRect(gg_rct_xuanren_19)
call RemoveRect(gg_rct_xuanren_20)
call RemoveRect(gg_rct_xuanren21)
call RemoveRect(gg_rct_xuanren22)
call RemoveRect(gg_rct_xuanren23)
call RemoveRect(gg_rct_xuanren24)
call RemoveRect(gg_rct_xuanren25)
call RemoveRect(gg_rct_xuanren26)
call RemoveRect(gg_rct_xuanren27)
call RemoveRect(gg_rct_xuanren28)
call RemoveRect(gg_rct_xuanren29)
call RemoveRect(gg_rct_xuanren30)
call RemoveRect(gg_rct_xuanren31)
call RemoveRect(gg_rct_xuanren32)
call RemoveRect(gg_rct_xuanren33)
call RemoveRect(gg_rct_xuanren34)
call RemoveRect(gg_rct_xuanren35)
call RemoveRect(gg_rct_xuanren36)
call DialogClear(udg_duihuakuang[0])
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_choose_hero))
call DestroyTrigger(gg_trg_choose_hero)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_chushihua))
call DestroyTrigger(gg_trg_chushihua)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_all_random))
call DestroyTrigger(gg_trg_all_random)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_duihuakuang2))
call DestroyTrigger(gg_trg_duihuakuang2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_time_0))
call DestroyTrigger(gg_trg_time_0)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_OB))
call DestroyTrigger(gg_trg_OB)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_time40out_random takes nothing returns nothing
set gg_trg_time40out_random=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_time40out_random, udg_jishiqi[0])
call TriggerAddAction(gg_trg_time40out_random, function Trig_time40out_randomActions)
endfunction
function Trig_all_randomFunc002Func001Func002Func001002001 takes nothing returns boolean
return ( ( GetFilterPlayer() == GetEnumPlayer() ) )
endfunction
function Trig_all_randomFunc002A takes nothing returns nothing
if ( ( GetPlayerController(GetEnumPlayer()) == MAP_CONTROL_USER ) and ( GetPlayerSlotState(GetEnumPlayer()) == PLAYER_SLOT_STATE_PLAYING ) ) then
if ( ( udg_choose_ture[( s__baka_SGetPlayerId(GetEnumPlayer()) + 1 )] == true ) ) then
set udg_LINSHIWANJIAZU=YDWEGetPlayersMatchingNull(Condition(function Trig_all_randomFunc002Func001Func002Func001002001))
call ClearTextMessagesBJ(udg_LINSHIWANJIAZU)
call DestroyForce(udg_LINSHIWANJIAZU)
set udg_danwei[0]=GroupPickRandomUnit(udg_danweizu[0])
set udg_danwei2[0]=udg_danwei[0]
call ModifyHeroSkillPoints(udg_danwei2[0], bj_MODIFYMETHOD_SET, 1)
call UnitRemoveAbility(udg_danwei2[0], 0x416E6532)
set udg_a[GetUnitPointValue(udg_danwei2[0])]=true
call TriggerExecute(gg_trg_All_skills)
set udg_danwei2[0]=null
call GroupRemoveUnit(udg_danweizu[0], udg_danwei[0])
set udg_suijixuanren[( s__baka_SGetPlayerId(GetEnumPlayer()) + 1 )]=udg_danwei[0]
set udg_point[8]=GetPlayerStartLocationLoc(GetEnumPlayer())
call CreateNUnitsAtLoc(1, GetUnitTypeId(udg_danwei[0]), GetEnumPlayer(), udg_point[8], bj_UNIT_FACING)
set udg_player[( s__baka_SGetPlayerId(GetEnumPlayer()) + 1 )]=bj_lastCreatedUnit
call InitPlayerHero(udg_player[( s__baka_SGetPlayerId(GetEnumPlayer()) + 1 )])
call TriggerRegisterUnitEvent(gg_trg_renyishanghai_hero, bj_lastCreatedUnit, EVENT_UNIT_DAMAGED)
call YDWEMultiboardSetItemIconBJNull(udg_duomianban[0] , 1 , ( ( s__baka_SGetPlayerId(GetOwningPlayer(bj_lastCreatedUnit)) + 1 ) + 1 ) , udg_touxiang[GetUnitPointValue(bj_lastCreatedUnit)])
call QuestMessageBJ(GetPlayersAll(), bj_QUESTMESSAGE_UPDATED, ( GetPlayerName(GetEnumPlayer()) + ( "|cFF33FF33随机了|r" + GetHeroProperName(udg_player[( s__baka_SGetPlayerId(GetEnumPlayer()) + 1 )]) ) ))
call SetPlayerName(GetOwningPlayer(bj_lastCreatedUnit), ( udg_Name[( s__baka_SGetPlayerId(GetOwningPlayer(bj_lastCreatedUnit)) + 1 )] + ( "（" + ( GetHeroProperName(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(bj_lastCreatedUnit)) + 1 )]) + "）" ) ) ))
call SelectUnitForPlayerSingle(udg_player[( s__baka_SGetPlayerId(GetEnumPlayer()) + 1 )], GetEnumPlayer())
call PanCameraToTimedLocForPlayer(GetEnumPlayer(), udg_point[8], 0)
set udg_choose_ture[( s__baka_SGetPlayerId(GetEnumPlayer()) + 1 )]=false
set udg_danwei[0]=null
call RemoveLocation(udg_point[8])
else
endif
else
endif
endfunction
function Trig_all_randomActions takes nothing returns nothing
call ForForce(GetPlayersAll(), function Trig_all_randomFunc002A)
set bj_forLoopAIndex=0
set bj_forLoopAIndexEnd=39
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call RemoveUnit(udg_hero[bj_forLoopAIndex])
set udg_hero[bj_forLoopAIndex]=null
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x41303646, false)
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x41303648, false)
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call TimerDialogDisplay(udg_chuangkou[0], false)
call DestroyGroup(udg_danweizu[0])
call RemoveRect(gg_rct_xuanren)
call RemoveRect(gg_rct_xuanren00)
call RemoveRect(gg_rct_xuanren01)
call RemoveRect(gg_rct_xuanren02)
call RemoveRect(gg_rct_xuanren03)
call RemoveRect(gg_rct_xuanren04)
call RemoveRect(gg_rct_xuanren05)
call RemoveRect(gg_rct_xuanren06)
call RemoveRect(gg_rct_xuanren07)
call RemoveRect(gg_rct_xuanren08)
call RemoveRect(gg_rct_xuanren09)
call RemoveRect(gg_rct_xuanren10)
call RemoveRect(gg_rct_xuanren11)
call RemoveRect(gg_rct_xuanren12)
call RemoveRect(gg_rct_xuanren13)
call RemoveRect(gg_rct_xuanren14)
call RemoveRect(gg_rct_xuanren15)
call RemoveRect(gg_rct_xuanren_16)
call RemoveRect(gg_rct_xuanren_17)
call RemoveRect(gg_rct_xuanren_18)
call RemoveRect(gg_rct_xuanren_19)
call RemoveRect(gg_rct_xuanren_20)
call RemoveRect(gg_rct_xuanren21)
call RemoveRect(gg_rct_xuanren22)
call RemoveRect(gg_rct_xuanren23)
call RemoveRect(gg_rct_xuanren24)
call RemoveRect(gg_rct_xuanren25)
call RemoveRect(gg_rct_xuanren26)
call RemoveRect(gg_rct_xuanren27)
call RemoveRect(gg_rct_xuanren28)
call RemoveRect(gg_rct_xuanren29)
call RemoveRect(gg_rct_xuanren30)
call RemoveRect(gg_rct_xuanren31)
call DialogClear(udg_duihuakuang[0])
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_choose_hero))
call DestroyTrigger(gg_trg_choose_hero)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_chushihua))
call DestroyTrigger(gg_trg_chushihua)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_all_random))
call DestroyTrigger(gg_trg_all_random)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_duihuakuang2))
call DestroyTrigger(gg_trg_duihuakuang2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_time_0))
call DestroyTrigger(gg_trg_time_0)
endfunction
function InitTrig_all_random takes nothing returns nothing
set gg_trg_all_random=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_all_random, udg_jishiqi[25])
call TriggerAddAction(gg_trg_all_random, function Trig_all_randomActions)
endfunction
function Trig_choose_heroConditions takes nothing returns boolean
return ( ( udg_zhengshu2[181] != 1 ) and ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true ) and ( GetOwningPlayer(GetTriggerUnit()) == s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE) ) and ( IsUnitInGroup(GetTriggerUnit(), udg_danweizu[0]) == true ) and ( RectContainsUnit(gg_rct_xuanren, GetTriggerUnit()) == true ) and ( udg_choose_ture[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )] == true ) )
endfunction
function Trig_choose_heroFunc001Func001002001 takes nothing returns boolean
return ( ( GetFilterPlayer() == GetTriggerPlayer() ) )
endfunction
function Trig_choose_heroFunc001Func004002001 takes nothing returns boolean
return ( ( GetFilterPlayer() == GetTriggerPlayer() ) )
endfunction
function Trig_choose_heroActions takes nothing returns nothing
if ( ( GetTriggerUnit() == udg_hero_choose[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )] ) ) then
set udg_LINSHIWANJIAZU=YDWEGetPlayersMatchingNull(Condition(function Trig_choose_heroFunc001Func001002001))
call ClearTextMessagesBJ(udg_LINSHIWANJIAZU)
call DestroyForce(udg_LINSHIWANJIAZU)
call StopSoundBJ(gg_snd_AutoCastButtonClick1, false)
call PlaySoundBJ(gg_snd_AutoCastButtonClick1)
set udg_danwei2[0]=GetTriggerUnit()
call ModifyHeroSkillPoints(udg_danwei2[0], bj_MODIFYMETHOD_SET, 1)
call UnitRemoveAbility(udg_danwei2[0], 0x416E6532)
set udg_a[GetUnitPointValue(udg_danwei2[0])]=true
call TriggerExecute(gg_trg_All_skills)
set udg_danwei2[0]=null
call YDWEMultiboardSetItemIconBJNull(udg_duomianban[0] , 1 , ( ( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 ) + 1 ) , udg_touxiang[GetUnitPointValue(GetTriggerUnit())])
set udg_choose_ture[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )]=false
call SetUnitOwner(GetTriggerUnit(), GetTriggerPlayer(), true)
set udg_hero_choose[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )]=null
call SetUnitPositionLoc(GetTriggerUnit(), GetPlayerStartLocationLoc(GetOwningPlayer(GetTriggerUnit())))
call TriggerRegisterUnitEvent(gg_trg_renyishanghai_hero, GetTriggerUnit(), EVENT_UNIT_DAMAGED)
set udg_player[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )]=GetTriggerUnit()
call InitPlayerHero(udg_player[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )])
call QuestMessageBJ(GetPlayersAll(), bj_QUESTMESSAGE_UPDATED, ( GetPlayerName(GetTriggerPlayer()) + ( "|cFF0066FF选择了|r" + GetHeroProperName(GetTriggerUnit()) ) ))
call PanCameraToTimedLocForPlayer(GetTriggerPlayer(), GetPlayerStartLocationLoc(GetTriggerPlayer()), 0.50)
call SelectUnitForPlayerSingle(GetTriggerUnit(), GetTriggerPlayer())
call SetPlayerName(GetOwningPlayer(udg_player[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )]), ( GetPlayerName(GetTriggerPlayer()) + ( "（" + ( GetHeroProperName(GetTriggerUnit()) + "）" ) ) ))
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_player[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )]), 0x41303646, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_player[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )]), 0x41303648, false)
call GroupRemoveUnit(udg_danweizu[0], GetTriggerUnit())
else
set udg_LINSHIWANJIAZU=YDWEGetPlayersMatchingNull(Condition(function Trig_choose_heroFunc001Func004002001))
call ClearTextMessagesBJ(udg_LINSHIWANJIAZU)
call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 99999.00, udg_HeoZiFuChuan[GetUnitPointValue(GetTriggerUnit())])
call DestroyForce(udg_LINSHIWANJIAZU)
set udg_hero_choose[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )]=GetTriggerUnit()
call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 99999.00, "TRIGSTR_9958")
call YDWEPolledWaitNull(0.30)
set udg_hero_choose[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )]=null
endif
endfunction
function InitTrig_choose_hero takes nothing returns nothing
set gg_trg_choose_hero=CreateTrigger()
call DisableTrigger(gg_trg_choose_hero)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_choose_hero, s__baka_SPlayer(0), true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_choose_hero, s__baka_SPlayer(1), true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_choose_hero, s__baka_SPlayer(2), true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_choose_hero, s__baka_SPlayer(3), true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_choose_hero, s__baka_SPlayer(4), true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_choose_hero, s__baka_SPlayer(5), true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_choose_hero, s__baka_SPlayer(6), true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_choose_hero, s__baka_SPlayer(7), true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_choose_hero, s__baka_SPlayer(8), true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_choose_hero, s__baka_SPlayer(9), true)
call TriggerAddCondition(gg_trg_choose_hero, Condition(function Trig_choose_heroConditions))
call TriggerAddAction(gg_trg_choose_hero, function Trig_choose_heroActions)
endfunction
function Trig_jinengxianshiConditions takes nothing returns boolean
return ( ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true ) and ( GetOwningPlayer(GetTriggerUnit()) == s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE) ) and ( IsUnitInGroup(GetTriggerUnit(), udg_danweizu[0]) == true ) )
endfunction
function Trig_jinengxianshiActions takes nothing returns nothing
call ForceUIKeyBJ(GetTriggerPlayer(), "O")
endfunction
function InitTrig_jinengxianshi takes nothing returns nothing
set gg_trg_jinengxianshi=CreateTrigger()
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_jinengxianshi, s__baka_SPlayer(0), true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_jinengxianshi, s__baka_SPlayer(1), true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_jinengxianshi, s__baka_SPlayer(2), true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_jinengxianshi, s__baka_SPlayer(3), true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_jinengxianshi, s__baka_SPlayer(4), true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_jinengxianshi, s__baka_SPlayer(5), true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_jinengxianshi, s__baka_SPlayer(6), true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_jinengxianshi, s__baka_SPlayer(7), true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_jinengxianshi, s__baka_SPlayer(8), true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_jinengxianshi, s__baka_SPlayer(9), true)
call TriggerAddCondition(gg_trg_jinengxianshi, Condition(function Trig_jinengxianshiConditions))
call TriggerAddAction(gg_trg_jinengxianshi, function Trig_jinengxianshiActions)
endfunction
function Trig_duihuakuang2Func002Func009Func003Func004Func002Func002Func002Func108A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x6E62616E ) ) then
call RemoveUnit(udg_danwei2[0])
else
endif
if ( ( ( GetUnitTypeId(udg_danwei2[0]) == 0x75303047 ) or ( GetUnitTypeId(udg_danwei2[0]) == 0x75303053 ) ) ) then
call GroupAddUnit(udg_danweizu2[154], udg_danwei2[0])
else
endif
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_STRUCTURE) == true ) and ( GetOwningPlayer(udg_danwei2[0]) == s__baka_SPlayer(11) ) ) then
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x6E65676D ) ) then
call YDWEReplaceUnitBJNull(udg_danwei2[0] , 0x757A6967 , bj_UNIT_STATE_METHOD_RELATIVE)
else
endif
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x6E656766 ) ) then
call YDWEReplaceUnitBJNull(udg_danwei2[0] , 0x757A6731 , bj_UNIT_STATE_METHOD_RELATIVE)
else
endif
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x6E627432 ) ) then
call YDWEReplaceUnitBJNull(udg_danwei2[0] , 0x757A6732 , bj_UNIT_STATE_METHOD_RELATIVE)
else
endif
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x6E65666D ) ) then
call YDWEReplaceUnitBJNull(udg_danwei2[0] , 0x75746F64 , bj_UNIT_STATE_METHOD_RELATIVE)
else
endif
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x6E747832 ) ) then
call YDWEReplaceUnitBJNull(udg_danwei2[0] , 0x75736170 , bj_UNIT_STATE_METHOD_RELATIVE)
else
endif
else
endif
set udg_danwei2[0]=null
endfunction
function Trig_duihuakuang2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call EnableUserControl(true)
if ( ( GetClickedButtonBJ() == udg_anniu[0] ) ) then
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x41303648, true)
set udg_choose_ture[bj_forLoopAIndex]=true
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call DisplayTimedTextToForce(GetPlayersAll(), 30.00, "TRIGSTR_7514")
call EnableTrigger(gg_trg_choose_hero)
call EnableTrigger(gg_trg_OB)
call StartTimerBJ(udg_jishiqi[0], false, 40.00)
call CreateTimerDialogBJ(udg_jishiqi[0], "TRIGSTR_7191")
set udg_chuangkou[0]=bj_lastCreatedTimerDialog
call TimerDialogDisplay(udg_chuangkou[0], true)
call StartTimerBJ(udg_jishiqi[28], false, 0.00)
set udg_buer[11]=true
call RemoveUnit(gg_unit_n00J_0066)
call RemoveUnit(gg_unit_n00K_0067)
call RemoveUnit(gg_unit_n00L_0068)
call RemoveUnit(gg_unit_n00M_0069)
set udg_DHK1[0]=( udg_DHK1[0] + "|cFFFF0000【自由选择】|r" )
call StartTimerBJ(udg_jishiqi[136], false, 45.00)
else
if ( ( GetClickedButtonBJ() == udg_anniu[1] ) ) then
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_choose_ture[bj_forLoopAIndex]=true
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call DisplayTimedTextToForce(GetPlayersAll(), 30.00, "TRIGSTR_7513")
call StartTimerBJ(udg_jishiqi[25], false, 1.00)
call StartTimerBJ(udg_jishiqi[28], false, 0.00)
set udg_buer[12]=true
call RemoveUnit(gg_unit_n00J_0066)
call RemoveUnit(gg_unit_n00K_0067)
call RemoveUnit(gg_unit_n00L_0068)
call RemoveUnit(gg_unit_n00M_0069)
set udg_DHK1[0]=( udg_DHK1[0] + "|cFFFF0000【随机选择】|r" )
call StartTimerBJ(udg_jishiqi[136], false, 5.00)
else
if ( ( GetClickedButtonBJ() == udg_anniu[2] ) ) then
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_choose_ture[bj_forLoopAIndex]=true
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
set udg_zhengshu2[181]=2
set udg_zhengshu2[179]=12
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call SetUnitAbilityLevel(udg_SmD[bj_forLoopAIndex], 0x4130424A, 7)
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x41303648, true)
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call DialogClear(udg_duihuakuang[0])
call DialogSetMessage(udg_duihuakuang[2], "TRIGSTR_8326")
call DialogAddButtonWithHotkeyBJ(udg_duihuakuang[2], "TRIGSTR_8327", 0x51)
set udg_anniu[0]=GetLastCreatedButtonBJ()
call DialogAddButtonWithHotkeyBJ(udg_duihuakuang[2], "TRIGSTR_8328", 0x57)
set udg_anniu[1]=GetLastCreatedButtonBJ()
call DialogDisplay(s__baka_SPlayer(0), udg_duihuakuang[2], true)
else
if ( ( GetClickedButtonBJ() == udg_anniu[3] ) ) then
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_choose_ture[bj_forLoopAIndex]=true
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call DialogClear(udg_duihuakuang[0])
call DialogSetMessage(udg_duihuakuang[3], "TRIGSTR_8766")
call DialogAddButtonWithHotkeyBJ(udg_duihuakuang[3], "TRIGSTR_8767", 0x51)
set udg_anniu[0]=GetLastCreatedButtonBJ()
call DialogAddButtonWithHotkeyBJ(udg_duihuakuang[3], "TRIGSTR_8768", 0x57)
set udg_anniu[1]=GetLastCreatedButtonBJ()
call DialogDisplay(s__baka_SPlayer(0), udg_duihuakuang[3], true)
else
if ( ( GetClickedButtonBJ() == udg_anniu[4] ) ) then
if ( ( GetPlayerSlotState(s__baka_SPlayer(1)) == PLAYER_SLOT_STATE_PLAYING ) and ( GetPlayerSlotState(s__baka_SPlayer(2)) == PLAYER_SLOT_STATE_PLAYING ) and ( GetPlayerSlotState(s__baka_SPlayer(3)) == PLAYER_SLOT_STATE_PLAYING ) and ( GetPlayerSlotState(s__baka_SPlayer(4)) == PLAYER_SLOT_STATE_PLAYING ) and ( GetPlayerSlotState(s__baka_SPlayer(5)) == PLAYER_SLOT_STATE_PLAYING ) and ( GetPlayerSlotState(s__baka_SPlayer(6)) == PLAYER_SLOT_STATE_PLAYING ) and ( GetPlayerSlotState(s__baka_SPlayer(7)) == PLAYER_SLOT_STATE_PLAYING ) and ( GetPlayerSlotState(s__baka_SPlayer(8)) == PLAYER_SLOT_STATE_PLAYING ) and ( GetPlayerSlotState(s__baka_SPlayer(9)) == PLAYER_SLOT_STATE_PLAYING ) ) then
set udg_zhengshu2[181]=1
call PauseTimer(udg_jishiqi[60])
call StartTimerBJ(udg_MS[0], false, 1.00)
set udg_DHK1[0]=( udg_DHK1[0] + "|cFFFF0000【轮选模式】|r" )
else
call DisplayTimedTextToPlayer(s__baka_SPlayer(0), 0, 0, 5.00, "TRIGSTR_1304")
call DialogClear(udg_duihuakuang[0])
call DialogSetMessage(udg_duihuakuang[0], "TRIGSTR_1305")
call DialogAddButtonWithHotkeyBJ(udg_duihuakuang[0], "TRIGSTR_1306", 0x51)
set udg_anniu[0]=GetLastCreatedButtonBJ()
call DialogAddButtonWithHotkeyBJ(udg_duihuakuang[0], "TRIGSTR_1307", 0x57)
set udg_anniu[1]=GetLastCreatedButtonBJ()
call DialogAddButtonWithHotkeyBJ(udg_duihuakuang[0], "TRIGSTR_1308", 0x45)
set udg_anniu[2]=GetLastCreatedButtonBJ()
call DialogAddButtonWithHotkeyBJ(udg_duihuakuang[0], "TRIGSTR_1309", 0x52)
set udg_anniu[3]=GetLastCreatedButtonBJ()
if ( ( ( GetPlayerController(s__baka_SPlayer(5)) == MAP_CONTROL_COMPUTER ) or ( GetPlayerSlotState(s__baka_SPlayer(5)) == PLAYER_SLOT_STATE_EMPTY ) ) and ( ( GetPlayerController(s__baka_SPlayer(6)) == MAP_CONTROL_COMPUTER ) or ( GetPlayerSlotState(s__baka_SPlayer(6)) == PLAYER_SLOT_STATE_EMPTY ) ) and ( ( GetPlayerController(s__baka_SPlayer(7)) == MAP_CONTROL_COMPUTER ) or ( GetPlayerSlotState(s__baka_SPlayer(7)) == PLAYER_SLOT_STATE_EMPTY ) ) and ( ( GetPlayerController(s__baka_SPlayer(8)) == MAP_CONTROL_COMPUTER ) or ( GetPlayerSlotState(s__baka_SPlayer(8)) == PLAYER_SLOT_STATE_EMPTY ) ) and ( ( GetPlayerController(s__baka_SPlayer(9)) == MAP_CONTROL_COMPUTER ) or ( GetPlayerSlotState(s__baka_SPlayer(9)) == PLAYER_SLOT_STATE_EMPTY ) ) ) then
call DialogAddButtonWithHotkeyBJ(udg_duihuakuang[0], "TRIGSTR_1311", 0x46)
set udg_anniu[5]=GetLastCreatedButtonBJ()
else
endif
call DialogDisplay(s__baka_SPlayer(0), udg_duihuakuang[0], true)
endif
else
if ( ( GetClickedButtonBJ() == udg_anniu[5] ) ) then
if ( ( ( GetPlayerController(s__baka_SPlayer(5)) == MAP_CONTROL_COMPUTER ) or ( GetPlayerSlotState(s__baka_SPlayer(5)) == PLAYER_SLOT_STATE_EMPTY ) ) and ( ( GetPlayerController(s__baka_SPlayer(6)) == MAP_CONTROL_COMPUTER ) or ( GetPlayerSlotState(s__baka_SPlayer(6)) == PLAYER_SLOT_STATE_EMPTY ) ) and ( ( GetPlayerController(s__baka_SPlayer(7)) == MAP_CONTROL_COMPUTER ) or ( GetPlayerSlotState(s__baka_SPlayer(7)) == PLAYER_SLOT_STATE_EMPTY ) ) and ( ( GetPlayerController(s__baka_SPlayer(8)) == MAP_CONTROL_COMPUTER ) or ( GetPlayerSlotState(s__baka_SPlayer(8)) == PLAYER_SLOT_STATE_EMPTY ) ) and ( ( GetPlayerController(s__baka_SPlayer(9)) == MAP_CONTROL_COMPUTER ) or ( GetPlayerSlotState(s__baka_SPlayer(9)) == PLAYER_SLOT_STATE_EMPTY ) ) ) then
call TriggerRegisterTimerEventPeriodic(gg_trg_JS_AI_1s, 1.00)
call TriggerRegisterTimerEventPeriodic(gg_trg_JS_AI_3s, 3.00)
call TriggerRegisterAnyUnitEventBJ(gg_trg_attack_js, EVENT_PLAYER_UNIT_ATTACKED)
call s__Event_AnyUnitSkill(gg_trg_huifu_15_u , 3 , 0x41304150)
call s__Event_AnyUnitSkill(gg_trg_siwang_zhongji , 3 , 0x41304248)
call s__Event_AnyUnitSkill(gg_trg_tufuzhenji , 3 , 0x41304142)
call s__Event_AnyUnitSkill(gg_trg_tufupenguozhi , 3 , 0x41304244)
call s__Event_AnyUnitSkill(gg_trg_ningshi_1 , 3 , 0x41304237)
call TriggerRegisterTimerEventPeriodic(gg_trg_ningshi_2, 0.05)
call s__Event_AnyUnitSkill(gg_trg_xuanwo_1 , 3 , 0x41304147)
call TriggerRegisterTimerEventPeriodic(gg_trg_xuanwo_2, 0.05)
call s__Event_AnyUnitSkill(gg_trg_duyepenshe_1 , 3 , 0x41304153)
call TriggerRegisterTimerEventPeriodic(gg_trg_duyepenshe_2, 0.06)
call s__Event_AnyUnitSkill(gg_trg_tujin_1 , 3 , 0x41304158)
call s__Event_AnyUnitSkill(gg_trg_zhendang_1 , 3 , 0x41304235)
call s__Event_AnyUnitSkill(gg_trg_boss_shiwangbaozou , 3 , 0x41304241)
call s__Event_AnyUnitSkill(gg_trg_boss_dajiangshan_1 , 3 , 0x41304159)
call s__Event_AnyUnitSkill(gg_trg_boss_zhendangbo_1 , 3 , 0x41304232)
call s__Event_AnyUnitSkill(gg_trg_boss_zhongquan_1 , 3 , 0x41304231)
call s__Event_AnyUnitSkill(gg_trg_wajue_1 , 3 , 0x41304239)
call TriggerRegisterTimerEventPeriodic(gg_trg_wajue_2, 0.05)
call s__Event_AnyUnitSkill(gg_trg_xuanfengshabao_1 , 3 , 0x41304233)
call TriggerRegisterTimerEventPeriodic(gg_trg_xuanfengshabao_2, 0.05)
call s__Event_AnyUnitSkill(gg_trg_tiaoji_1 , 3 , 0x41304243)
call s__Event_AnyUnitSkill(gg_trg_leishouzhenji_1 , 3 , 0x41304246)
call TriggerRegisterTimerEventPeriodic(gg_trg_leishouzhenji_2, 0.08)
call TriggerRegisterTimerEventPeriodic(gg_trg_anwuzhi, 0.30)
call s__Event_AnyUnitSkill(gg_trg_siwangchanrao_1 , 3 , 0x41304249)
call s__Event_AnyUnitSkill(gg_trg_siwanghuimie_1 , 3 , 0x4130424B)
call TriggerRegisterTimerEventPeriodic(gg_trg_siwanghuimie_2, 0.08)
call s__Event_AnyUnitSkill(gg_trg_guishou_1 , 3 , 0x4130424F)
call TriggerRegisterTimerEventPeriodic(gg_trg_guishou_2, 0.05)
call s__Event_AnyUnitSkill(gg_trg_chuanci , 3 , 0x41304254)
call s__Event_AnyUnitSkill(gg_trg_zhixianchuanci_1 , 3 , 0x41304330)
call TriggerRegisterTimerEventPeriodic(gg_trg_boss2_jianta, 0.10)
call s__Event_AnyUnitSkill(gg_trg_boss2_hongtianlei_0 , 3 , 0x41304251)
call TriggerRegisterTimerEventPeriodic(gg_trg_boss2_hongtianlei_2, 0.08)
call s__Event_AnyUnitSkill(gg_trg_boss2_liuxingchui_0 , 3 , 0x41304253)
call TriggerRegisterTimerEventPeriodic(gg_trg_boss2_liuxingchui_2, 0.05)
call s__Event_AnyUnitSkill(gg_trg_boss2_huanxingzhenji , 3 , 0x4130425A)
call s__Event_AnyUnitSkill(gg_trg_boss2_attack_1 , 3 , 0x41304252)
call s__Event_AnyUnitSkill(gg_trg_boss2_gouheji_1 , 3 , 0x41304250)
call s__Event_AnyUnitSkill(gg_trg_bossex_anxi_1 , 3 , 0x41304257)
call s__Event_AnyUnitSkill(gg_trg_bossex_anren_1 , 3 , 0x41304256)
call TriggerRegisterTimerEventPeriodic(gg_trg_bossex_anren_3, 0.05)
call TriggerRegisterTimerEventPeriodic(gg_trg_bossex_canying, 0.20)
call TriggerRegisterTimerEventPeriodic(gg_trg_bossex_canying_2, 0.10)
call TriggerRegisterAnyUnitEventBJ(gg_trg_skills, EVENT_PLAYER_UNIT_SPELL_FINISH)
call TriggerRegisterAnyUnitEventBJ(gg_trg_stop, EVENT_PLAYER_UNIT_ISSUED_ORDER)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_choose_ture[bj_forLoopAIndex]=true
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
set udg_dian2[157]=GetUnitLoc(gg_unit_hcas_0015)
set udg_dian2[158]=GetUnitLoc(gg_unit_h005_0104)
set udg_dian2[159]=GetUnitLoc(gg_unit_h003_0105)
set udg_dian2[160]=GetUnitLoc(gg_unit_h004_0106)
set udg_buer[14]=true
set udg_Points=0
call DisableTrigger(gg_trg_zhizhu_1)
call DisableTrigger(gg_trg_juxiong)
call DisableTrigger(gg_trg_jumo)
call DisableTrigger(gg_trg_jumo_2)
call DisableTrigger(gg_trg_shuabing_all)
call EnableTrigger(gg_trg_choose_hero)
call EnableTrigger(gg_trg_OB)
call PlaySoundBJ(gg_snd_SadMystery)
call DisplayTimedTextToForce(GetPlayersAll(), 30.00, "TRIGSTR_1145")
set udg_DHK1[0]="|cFFFF0000【防守模式】|r"
call SetTerrainFogEx(0, 0.00, 8000.00, 1.00, 1.00, 0.70, 0.00)
call StartTimerBJ(udg_jishiqi[0], false, 40.00)
call CreateTimerDialogBJ(udg_jishiqi[0], "TRIGSTR_1146")
set udg_chuangkou[0]=bj_lastCreatedTimerDialog
call TimerDialogDisplay(udg_chuangkou[0], true)
call StartTimerBJ(udg_jishiqi[28], false, 0.00)
set udg_buer[11]=true
call RemoveUnit(gg_unit_n00J_0066)
call RemoveUnit(gg_unit_n00K_0067)
call RemoveUnit(gg_unit_n00L_0068)
call RemoveUnit(gg_unit_n00M_0069)
call s__Unit_PauseUnitMU(gg_unit_hgtw_0012 , true , "全局")
call UnitAddAbility(gg_unit_hgtw_0012, 0x4176756C)
call KillUnit(gg_unit_h001_0134)
call KillUnit(gg_unit_h009_0136)
call KillUnit(gg_unit_h00A_0135)
set udg_dian2[0]=GetUnitLoc(gg_unit_hcas_0020)
call RemoveUnit(gg_unit_hcas_0020)
call CreateNUnitsAtLoc(1, 0x756E7032, s__baka_SPlayer(11), udg_dian2[0], bj_UNIT_FACING)
call RemoveLocation(udg_dian2[0])
set udg_xuanqu=YDWEGetUnitsInRectAllNull(GetPlayableMapRect())
call ForGroupBJ(udg_xuanqu, function Trig_duihuakuang2Func002Func009Func003Func004Func002Func002Func002Func108A)
call DestroyGroup(udg_xuanqu)
call SetPlayerAbilityAvailable(s__baka_SPlayer(0), 0x41303647, false)
call SetPlayerAbilityAvailable(s__baka_SPlayer(5), 0x41303647, false)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call AdjustPlayerStateBJ(4000, s__baka_SPlayer(bj_forLoopAIndex - 1), PLAYER_STATE_RESOURCE_GOLD)
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x4130315A, false)
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x4130424A, true)
call SetUnitAbilityLevel(udg_SmD[bj_forLoopAIndex], 0x4130424A, 1)
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call SetUnitVertexColor(udg_hero[15], 255, 255, 255, 100)
call GroupRemoveUnit(udg_danweizu[0], udg_hero[15])
call EnableTrigger(gg_trg_shuabing_js)
else
call DisplayTimedTextToPlayer(s__baka_SPlayer(0), 0, 0, 5.00, "TRIGSTR_1168")
call DialogClear(udg_duihuakuang[0])
call DialogSetMessage(udg_duihuakuang[0], "TRIGSTR_1152")
call DialogAddButtonWithHotkeyBJ(udg_duihuakuang[0], "TRIGSTR_1153", 0x51)
set udg_anniu[0]=GetLastCreatedButtonBJ()
call DialogAddButtonWithHotkeyBJ(udg_duihuakuang[0], "TRIGSTR_1154", 0x57)
set udg_anniu[1]=GetLastCreatedButtonBJ()
call DialogAddButtonWithHotkeyBJ(udg_duihuakuang[0], "TRIGSTR_1156", 0x45)
set udg_anniu[2]=GetLastCreatedButtonBJ()
call DialogAddButtonWithHotkeyBJ(udg_duihuakuang[0], "TRIGSTR_1157", 0x52)
set udg_anniu[3]=GetLastCreatedButtonBJ()
if ( ( GetPlayerSlotState(s__baka_SPlayer(1)) == PLAYER_SLOT_STATE_PLAYING ) and ( GetPlayerSlotState(s__baka_SPlayer(2)) == PLAYER_SLOT_STATE_PLAYING ) and ( GetPlayerSlotState(s__baka_SPlayer(3)) == PLAYER_SLOT_STATE_PLAYING ) and ( GetPlayerSlotState(s__baka_SPlayer(4)) == PLAYER_SLOT_STATE_PLAYING ) and ( GetPlayerSlotState(s__baka_SPlayer(5)) == PLAYER_SLOT_STATE_PLAYING ) and ( GetPlayerSlotState(s__baka_SPlayer(6)) == PLAYER_SLOT_STATE_PLAYING ) and ( GetPlayerSlotState(s__baka_SPlayer(7)) == PLAYER_SLOT_STATE_PLAYING ) and ( GetPlayerSlotState(s__baka_SPlayer(8)) == PLAYER_SLOT_STATE_PLAYING ) and ( GetPlayerSlotState(s__baka_SPlayer(9)) == PLAYER_SLOT_STATE_PLAYING ) ) then
if ( true ) then
call DialogAddButtonWithHotkeyBJ(udg_duihuakuang[0], "TRIGSTR_1252", 0x44)
set udg_anniu[4]=GetLastCreatedButtonBJ()
else
endif
else
endif
call DialogDisplay(s__baka_SPlayer(0), udg_duihuakuang[0], true)
endif
else
if ( ( GetClickedButtonBJ() == udg_anniu[6] ) ) then
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_choose_ture[bj_forLoopAIndex]=true
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call DisplayTimedTextToForce(GetPlayersAll(), 20.00, "TRIGSTR_1203")
set udg_DHK1[0]=( udg_DHK1[0] + "|cFFFF0000【随机征召】|r" )
call PauseTimer(udg_jishiqi[60])
call StartTimerBJ(udg_MS[4], false, 0.00)
else
if ( ( GetClickedButtonBJ() == udg_anniu[7] ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 20.00, "TRIGSTR_8311")
set udg_DHK1[0]=( udg_DHK1[0] + "|cFFFF0000【洗牌模式】|r" )
call DialogClear(udg_duihuakuang[0])
call DialogSetMessage(udg_duihuakuang[0], "TRIGSTR_8312")
call DialogAddButtonWithHotkeyBJ(udg_duihuakuang[0], "TRIGSTR_8313", 0x51)
set udg_anniu[0]=GetLastCreatedButtonBJ()
call DialogAddButtonWithHotkeyBJ(udg_duihuakuang[0], "TRIGSTR_8314", 0x57)
set udg_anniu[1]=GetLastCreatedButtonBJ()
call DialogAddButtonWithHotkeyBJ(udg_duihuakuang[0], "TRIGSTR_8315", 0x45)
set udg_anniu[2]=GetLastCreatedButtonBJ()
call DialogAddButtonWithHotkeyBJ(udg_duihuakuang[0], "TRIGSTR_8316", 0x52)
set udg_anniu[3]=GetLastCreatedButtonBJ()
call DialogAddButtonWithHotkeyBJ(udg_duihuakuang[0], "TRIGSTR_050", 0x44)
set udg_anniu[4]=GetLastCreatedButtonBJ()
call DialogDisplay(s__baka_SPlayer(0), udg_duihuakuang[0], true)
call s__baka_Sp()
call DestroyFogModifier(udg_kejiandu[0])
call DestroyFogModifier(udg_kejiandu[1])
call CreateFogModifierRectBJ(true, s__baka_SPlayer(0), FOG_OF_WAR_VISIBLE, gg_rct_xuanren)
set udg_kejiandu[0]=GetLastCreatedFogModifier()
call CreateFogModifierRectBJ(true, s__baka_SPlayer(5), FOG_OF_WAR_VISIBLE, gg_rct_xuanren)
set udg_kejiandu[1]=GetLastCreatedFogModifier()
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_Name[bj_forLoopAIndex]=GetPlayerName(s__baka_SPlayer(bj_forLoopAIndex - 1))
call SelectUnitForPlayerSingle(udg_SmD[bj_forLoopAIndex], s__baka_SPlayer(bj_forLoopAIndex - 1))
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
else
endif
endif
endif
endif
endif
endif
endif
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_duihuakuang2 takes nothing returns nothing
set gg_trg_duihuakuang2=CreateTrigger()
call TriggerRegisterDialogEvent(gg_trg_duihuakuang2, udg_duihuakuang[0])
call TriggerAddAction(gg_trg_duihuakuang2, function Trig_duihuakuang2Actions)
endfunction
function Trig_miwu_on_offActions takes nothing returns nothing
if ( ( GetClickedButtonBJ() == udg_anniu[0] ) ) then
call SetTimeOfDay(12)
set udg_dian2[0]=GetRectCenter(gg_rct_GH)
call SetTerrainTypeBJ(udg_dian2[0], 0x4E736E77, - 1, 8, 0)
call SetTerrainTypeBJ(udg_dian2[0], 0x4E696365, - 1, 5, 0)
call SetTerrainFogEx(0, 0.00, 6000.00, 1.00, 0.00, 1, 1.00)
call AddWeatherEffectSaveLast(GetPlayableMapRect(), 0x534E6273)
call EnableWeatherEffect(GetLastCreatedWeatherEffect(), true)
call EnableTrigger(gg_trg_tianqi)
call EnableTrigger(gg_trg_sheep)
call EnableTrigger(gg_trg_sheep_mie)
call EnableTrigger(gg_trg_choose_hero)
call EnableTrigger(gg_trg_OB)
call StartTimerBJ(udg_jishiqi[0], false, 40.00)
call CreateTimerDialogBJ(udg_jishiqi[0], "TRIGSTR_8332")
set udg_chuangkou[0]=bj_lastCreatedTimerDialog
call TimerDialogDisplay(udg_chuangkou[0], true)
call StartTimerBJ(udg_jishiqi[28], false, 0.00)
set udg_buer[16]=true
call RemoveLocation(udg_dian2[0])
call DisplayTimedTextToForce(GetPlayersAll(), 30.00, "TRIGSTR_8333")
call StartTimerBJ(udg_jishiqi[136], false, 45.00)
else
if ( ( GetClickedButtonBJ() == udg_anniu[1] ) ) then
set udg_miwu[0]=false
call EnableTrigger(gg_trg_tianqi)
call EnableTrigger(gg_trg_sheep)
call EnableTrigger(gg_trg_sheep_mie)
call EnableTrigger(gg_trg_choose_hero)
call EnableTrigger(gg_trg_OB)
call StartTimerBJ(udg_jishiqi[0], false, 40.00)
call CreateTimerDialogBJ(udg_jishiqi[0], "TRIGSTR_8334")
set udg_chuangkou[0]=bj_lastCreatedTimerDialog
call StartTimerBJ(udg_jishiqi[28], false, 0.00)
set udg_buer[16]=true
call RemoveLocation(udg_dian2[0])
call DisplayTimedTextToForce(GetPlayersAll(), 30.00, "TRIGSTR_8335")
call StartTimerBJ(udg_jishiqi[136], false, 45.00)
else
endif
endif
set udg_DHK1[0]="|cff00ffff【圣诞模式】|r"
endfunction
function InitTrig_miwu_on_off takes nothing returns nothing
set gg_trg_miwu_on_off=CreateTrigger()
call TriggerRegisterDialogEvent(gg_trg_miwu_on_off, udg_duihuakuang[2])
call TriggerAddAction(gg_trg_miwu_on_off, function Trig_miwu_on_offActions)
endfunction
function Trig_CompetitionActions takes nothing returns nothing
call DisableTrigger(gg_trg_zhizhu_1)
call DisableTrigger(gg_trg_juxiong)
call DisableTrigger(gg_trg_jumo)
call DisableTrigger(gg_trg_jumo_2)
call DisableTrigger(gg_trg_shuabing_all)
call EnableTrigger(gg_trg_choose_hero)
call StartTimerBJ(udg_jishiqi[0], false, 40.00)
call CreateTimerDialogBJ(udg_jishiqi[0], "TRIGSTR_8776")
set udg_chuangkou[0]=bj_lastCreatedTimerDialog
call TimerDialogDisplay(udg_chuangkou[0], true)
call StartTimerBJ(udg_jishiqi[28], false, 0.00)
set udg_buer[11]=true
call RemoveUnit(gg_unit_n00J_0066)
call RemoveUnit(gg_unit_n00K_0067)
call RemoveUnit(gg_unit_n00L_0068)
call RemoveUnit(gg_unit_n00M_0069)
set udg_buer[15]=true
if ( ( GetClickedButtonBJ() == udg_anniu[0] ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 30.00, "TRIGSTR_8777")
call EnableTrigger(gg_trg_shuabing_left_up)
set udg_DHK1[2]="|cffff0000(仅左路)|r"
call StartTimerBJ(udg_jishiqi[136], false, 45.00)
else
if ( ( GetClickedButtonBJ() == udg_anniu[1] ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 30.00, "TRIGSTR_8779")
call EnableTrigger(gg_trg_shuabing_right_down)
set udg_DHK1[2]="|cffff0000(仅右路)|r"
call StartTimerBJ(udg_jishiqi[136], false, 45.00)
else
set udg_DHK1[2]="|cffff0000(双兵线)|r"
endif
endif
endfunction
function InitTrig_Competition takes nothing returns nothing
set gg_trg_Competition=CreateTrigger()
call TriggerRegisterDialogEvent(gg_trg_Competition, udg_duihuakuang[3])
call TriggerAddAction(gg_trg_Competition, function Trig_CompetitionActions)
endfunction
function Trig_banbenActions takes nothing returns nothing
call StartTimerBJ(udg_times[336], true, 0.01)
set udg_zhengshu2[336]=0
set udg_dian2[336]=Location(- 5750.00, 5800.00)
endfunction
function InitTrig_banben takes nothing returns nothing
set gg_trg_banben=CreateTrigger()
call TriggerRegisterTimerEventSingle(gg_trg_banben, 1.00)
call TriggerAddAction(gg_trg_banben, function Trig_banbenActions)
endfunction
function Trig_v2_6Actions takes nothing returns nothing
set udg_zhengshu2[336]=( udg_zhengshu2[336] + 1 )
if ( ( udg_zhengshu2[336] <= 20 ) ) then
set udg_dian2[0]=PolarProjectionBJ(udg_dian2[336], 300.00, 135.00)
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 120.00, ( 135.00 - ( 9.00 * I2R(udg_zhengshu2[336]) ) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\HealingSpray\\HealBottleMissile.mdl", udg_dian2[1]))
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
if ( ( udg_zhengshu2[336] <= 33 ) ) then
set udg_dian2[0]=PolarProjectionBJ(udg_dian2[336], 180.00, 135.00)
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], ( 18.84 * I2R(( udg_zhengshu2[336] - 20 )) ), 225.00)
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\HealingSpray\\HealBottleMissile.mdl", udg_dian2[1]))
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
if ( ( udg_zhengshu2[336] <= 46 ) ) then
set udg_dian2[0]=PolarProjectionBJ(udg_dian2[336], 180.00, 135.00)
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], ( 18.84 * 13.00 ), 225.00)
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], ( 18.84 * I2R(( udg_zhengshu2[336] - 33 )) ), 0.00)
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\HealingSpray\\HealBottleMissile.mdl", udg_dian2[2]))
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
else
if ( ( udg_zhengshu2[336] <= 56 ) ) then
set udg_dian2[0]=PolarProjectionBJ(udg_dian2[336], 45.00, 0.00)
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 15.00, ( - 36.00 * I2R(( udg_zhengshu2[336] - 46 )) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\HealingSpray\\HealBottleMissile.mdl", udg_dian2[1]))
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
if ( ( udg_zhengshu2[336] <= 73 ) ) then
set udg_dian2[3]=PolarProjectionBJ(udg_dian2[336], 360.00, 25.00)
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[3], 180.00, ( 78.00 + ( 6.00 * I2R(( udg_zhengshu2[336] - 56 )) ) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\HealingSpray\\HealBottleMissile.mdl", udg_dian2[2]))
call RemoveLocation(udg_dian2[2])
call RemoveLocation(udg_dian2[3])
else
if ( ( udg_zhengshu2[336] <= 77 ) ) then
set udg_dian2[3]=PolarProjectionBJ(udg_dian2[336], 360.00, 25.00)
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[3], 180.00, 180.00)
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[2], ( 18.84 * I2R(( udg_zhengshu2[336] - 73 )) ), 270.00)
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\HealingSpray\\HealBottleMissile.mdl", udg_dian2[1]))
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
call RemoveLocation(udg_dian2[3])
else
if ( ( udg_zhengshu2[336] <= 116 ) ) then
set udg_dian2[3]=PolarProjectionBJ(udg_dian2[336], 360.00, 25.00)
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[3], 60.00, 180.00)
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[2], 75.36, 270.00)
set udg_dian2[0]=PolarProjectionBJ(udg_dian2[1], 120.00, ( 180.00 + ( 9.00 * I2R(( udg_zhengshu2[336] - 77 )) ) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\HealingSpray\\HealBottleMissile.mdl", udg_dian2[0]))
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
call RemoveLocation(udg_dian2[3])
else
call PauseTimer(udg_times[336])
call RemoveLocation(udg_dian2[336])
endif
endif
endif
endif
endif
endif
endif
endfunction
function InitTrig_v2_6 takes nothing returns nothing
set gg_trg_v2_6=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_v2_6, udg_times[336])
call TriggerAddAction(gg_trg_v2_6, function Trig_v2_6Actions)
endfunction
function Trig_All_skillsActions takes nothing returns nothing
if ( ( GetUnitPointValue(udg_danwei2[0]) == 0 ) ) then
else
endif
endfunction
function InitTrig_All_skills takes nothing returns nothing
set gg_trg_All_skills=CreateTrigger()
call TriggerAddAction(gg_trg_All_skills, function Trig_All_skillsActions)
endfunction
function Trig_Delete_triggerActions takes nothing returns nothing
if ( ( udg_a[0] == false ) ) then
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_syslzj))
call DestroyTrigger(gg_trg_syslzj)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_syslzj2))
call DestroyTrigger(gg_trg_syslzj2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_syslzj_3))
call DestroyTrigger(gg_trg_syslzj_3)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_fwjj))
call DestroyTrigger(gg_trg_fwjj)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_fwjj2))
call DestroyTrigger(gg_trg_fwjj2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_fwjj3))
call DestroyTrigger(gg_trg_fwjj3)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_fwjj4))
call DestroyTrigger(gg_trg_fwjj4)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_zj))
call DestroyTrigger(gg_trg_zj)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_yylxx))
call DestroyTrigger(gg_trg_yylxx)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_yylxx2))
call DestroyTrigger(gg_trg_yylxx2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_yylxx3))
call DestroyTrigger(gg_trg_yylxx3)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_yylxx4))
call DestroyTrigger(gg_trg_yylxx4)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_molifangchu_1))
call DestroyTrigger(gg_trg_molifangchu_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_molifangchu_2))
call DestroyTrigger(gg_trg_molifangchu_2)
else
endif
if ( ( udg_a[1] == false ) ) then
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_sstc))
call DestroyTrigger(gg_trg_sstc)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_sstc2))
call DestroyTrigger(gg_trg_sstc2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_star_1))
call DestroyTrigger(gg_trg_star_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_star_2))
call DestroyTrigger(gg_trg_star_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_star_3))
call DestroyTrigger(gg_trg_star_3)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_star_4))
call DestroyTrigger(gg_trg_star_4)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_qyzsg))
call DestroyTrigger(gg_trg_qyzsg)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_qyzsg2))
call DestroyTrigger(gg_trg_qyzsg2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_zhiyu_1))
call DestroyTrigger(gg_trg_zhiyu_1)
else
endif
if ( ( udg_a[2] == false ) ) then
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_trps))
call DestroyTrigger(gg_trg_trps)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_trps2))
call DestroyTrigger(gg_trg_trps2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_tianporangsui))
call DestroyTrigger(gg_trg_tianporangsui)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_hwzs))
call DestroyTrigger(gg_trg_hwzs)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_hwzs2))
call DestroyTrigger(gg_trg_hwzs2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_hwzs3))
call DestroyTrigger(gg_trg_hwzs3)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_hwxj))
call DestroyTrigger(gg_trg_hwxj)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_hwxj2))
call DestroyTrigger(gg_trg_hwxj2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_baka_1))
call DestroyTrigger(gg_trg_baka_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_baka_2))
call DestroyTrigger(gg_trg_baka_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_baka_5))
call DestroyTrigger(gg_trg_baka_5)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_baka_6))
call DestroyTrigger(gg_trg_baka_6)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_zhidianzhena_1))
call DestroyTrigger(gg_trg_zhidianzhena_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_zhidianzhena_3))
call DestroyTrigger(gg_trg_zhidianzhena_3)
else
endif
if ( ( udg_a[3] == false ) ) then
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_zhuizongdaodan_1))
call DestroyTrigger(gg_trg_zhuizongdaodan_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_zhuizongdaodan_2))
call DestroyTrigger(gg_trg_zhuizongdaodan_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_danmu_1))
call DestroyTrigger(gg_trg_danmu_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_danmu_2))
call DestroyTrigger(gg_trg_danmu_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_daodanqishe_1))
call DestroyTrigger(gg_trg_daodanqishe_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_daodanqishe_2))
call DestroyTrigger(gg_trg_daodanqishe_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_dd))
call DestroyTrigger(gg_trg_dd)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_dd2))
call DestroyTrigger(gg_trg_dd2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_weixingshexian_0))
call DestroyTrigger(gg_trg_weixingshexian_0)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_weixingshexian_1))
call DestroyTrigger(gg_trg_weixingshexian_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_weixingshexian_2))
call DestroyTrigger(gg_trg_weixingshexian_2)
else
endif
if ( ( udg_a[4] == false ) ) then
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_siwangchanrao_1))
call DestroyTrigger(gg_trg_siwangchanrao_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_siwangchanrao_2))
call DestroyTrigger(gg_trg_siwangchanrao_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_xiaowangyiji))
call DestroyTrigger(gg_trg_xiaowangyiji)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_xiaowangyiji1))
call DestroyTrigger(gg_trg_xiaowangyiji1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_xiaowangyiji2))
call DestroyTrigger(gg_trg_xiaowangyiji2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_heihuagognji))
call DestroyTrigger(gg_trg_heihuagognji)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_heihuagongji2))
call DestroyTrigger(gg_trg_heihuagongji2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_heianyishi))
call DestroyTrigger(gg_trg_heianyishi)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_heianyishi2))
call DestroyTrigger(gg_trg_heianyishi2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_heianzuzhou_1))
call DestroyTrigger(gg_trg_heianzuzhou_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_heianzuzhou_2))
call DestroyTrigger(gg_trg_heianzuzhou_2)
else
endif
if ( ( udg_a[5] == false ) ) then
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_lz))
call DestroyTrigger(gg_trg_lz)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_lz2))
call DestroyTrigger(gg_trg_lz2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_lz3))
call DestroyTrigger(gg_trg_lz3)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_wuyun_1))
call DestroyTrigger(gg_trg_wuyun_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_wuyun_2))
call DestroyTrigger(gg_trg_wuyun_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_sphl))
call DestroyTrigger(gg_trg_sphl)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_sphl2))
call DestroyTrigger(gg_trg_sphl2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_sjqh))
call DestroyTrigger(gg_trg_sjqh)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_sjqh2))
call DestroyTrigger(gg_trg_sjqh2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_guangdun_xuexi))
call DestroyTrigger(gg_trg_guangdun_xuexi)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_guangdun_2))
call DestroyTrigger(gg_trg_guangdun_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_guangdun_3))
call DestroyTrigger(gg_trg_guangdun_3)
else
endif
if ( ( udg_a[6] == false ) ) then
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_dizhen))
call DestroyTrigger(gg_trg_dizhen)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_dizhen2))
call DestroyTrigger(gg_trg_dizhen2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_xunsu))
call DestroyTrigger(gg_trg_xunsu)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_xunsu_2))
call DestroyTrigger(gg_trg_xunsu_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_jiandun))
call DestroyTrigger(gg_trg_jiandun)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_dunji_1))
call DestroyTrigger(gg_trg_dunji_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_dunji_2))
call DestroyTrigger(gg_trg_dunji_2)
else
endif
if ( ( udg_a[9] == false ) ) then
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_zhuanshuyijian_1))
call DestroyTrigger(gg_trg_zhuanshuyijian_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_zhuanzhuyijian_2))
call DestroyTrigger(gg_trg_zhuanzhuyijian_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_fzj))
call DestroyTrigger(gg_trg_fzj)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_fzj2))
call DestroyTrigger(gg_trg_fzj2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_lianshe_1))
call DestroyTrigger(gg_trg_lianshe_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_lianshe_2))
call DestroyTrigger(gg_trg_lianshe_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_lianshe_3))
call DestroyTrigger(gg_trg_lianshe_3)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_gmjz))
call DestroyTrigger(gg_trg_gmjz)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_gmjz2))
call DestroyTrigger(gg_trg_gmjz2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_baoyujianzhen_2))
call DestroyTrigger(gg_trg_baoyujianzhen_2)
else
endif
if ( ( udg_a[10] == false ) ) then
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_shenpanjiasuo_1))
call DestroyTrigger(gg_trg_shenpanjiasuo_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_shenpanjiasuo_2))
call DestroyTrigger(gg_trg_shenpanjiasuo_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_shenshengzhicai))
call DestroyTrigger(gg_trg_shenshengzhicai)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_huangjinxuanfeng))
call DestroyTrigger(gg_trg_huangjinxuanfeng)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_huangjinxuanfeng2))
call DestroyTrigger(gg_trg_huangjinxuanfeng2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_aersaisideyizhi))
call DestroyTrigger(gg_trg_aersaisideyizhi)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_aersaisideyizhi2))
call DestroyTrigger(gg_trg_aersaisideyizhi2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_aersaisideyizhi3))
call DestroyTrigger(gg_trg_aersaisideyizhi3)
else
endif
if ( ( udg_a[12] == false ) ) then
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_rongjiangjushi_1))
call DestroyTrigger(gg_trg_rongjiangjushi_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_rongjiangjushi_2))
call DestroyTrigger(gg_trg_rongjiangjushi_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_bf))
call DestroyTrigger(gg_trg_bf)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_bf2))
call DestroyTrigger(gg_trg_bf2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_huixiong))
call DestroyTrigger(gg_trg_huixiong)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_huixiong_2))
call DestroyTrigger(gg_trg_huixiong_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_huixiong_4))
call DestroyTrigger(gg_trg_huixiong_4)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_langrenxingtai))
call DestroyTrigger(gg_trg_langrenxingtai)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_langrenxingtai_2))
call DestroyTrigger(gg_trg_langrenxingtai_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_langren_up))
call DestroyTrigger(gg_trg_langren_up)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_mengshouzhixi_1))
call DestroyTrigger(gg_trg_mengshouzhixi_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_mengshouzhixi_2))
call DestroyTrigger(gg_trg_mengshouzhixi_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_mengshouzhinu_2))
call DestroyTrigger(gg_trg_mengshouzhinu_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_mengshouzhinu_3))
call DestroyTrigger(gg_trg_mengshouzhinu_3)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_yanzhua))
call DestroyTrigger(gg_trg_yanzhua)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_huitianmiedi_1))
call DestroyTrigger(gg_trg_huitianmiedi_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_huitianmiedi_2))
call DestroyTrigger(gg_trg_huitianmiedi_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_huitianmiedi_3))
call DestroyTrigger(gg_trg_huitianmiedi_3)
else
endif
if ( ( udg_a[13] == false ) ) then
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_qianxing_3))
call DestroyTrigger(gg_trg_qianxing_3)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_shunshenlianzhan))
call DestroyTrigger(gg_trg_shunshenlianzhan)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_shunshenlianzhan_2))
call DestroyTrigger(gg_trg_shunshenlianzhan_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_huixuanbiao_1))
call DestroyTrigger(gg_trg_huixuanbiao_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_huixuanbiao_2))
call DestroyTrigger(gg_trg_huixuanbiao_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_zhimigntiji))
call DestroyTrigger(gg_trg_zhimigntiji)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_zhimingtiji2))
call DestroyTrigger(gg_trg_zhimingtiji2)
else
endif
if ( ( udg_a[14] == false ) ) then
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_quanliyiji_2))
call DestroyTrigger(gg_trg_quanliyiji_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_quanliyiji))
call DestroyTrigger(gg_trg_quanliyiji)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_quanliyiji_3))
call DestroyTrigger(gg_trg_quanliyiji_3)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_tiaoyue))
call DestroyTrigger(gg_trg_tiaoyue)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_tiaoyue_2))
call DestroyTrigger(gg_trg_tiaoyue_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_tiaoyue_boxing))
call DestroyTrigger(gg_trg_tiaoyue_boxing)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_xuanfengti_1))
call DestroyTrigger(gg_trg_xuanfengti_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_xuanfengti_2))
call DestroyTrigger(gg_trg_xuanfengti_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_shunshenlianxi))
call DestroyTrigger(gg_trg_shunshenlianxi)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_shunshenlianxi2))
call DestroyTrigger(gg_trg_shunshenlianxi2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_sanlianhengda_1))
call DestroyTrigger(gg_trg_sanlianhengda_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_sanlianhengda_1_5))
call DestroyTrigger(gg_trg_sanlianhengda_1_5)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_sanlianhengda_2))
call DestroyTrigger(gg_trg_sanlianhengda_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_sanlianhengda_2_5))
call DestroyTrigger(gg_trg_sanlianhengda_2_5)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_sanlianhengda_2_9))
call DestroyTrigger(gg_trg_sanlianhengda_2_9)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_sanlianhengda_3))
call DestroyTrigger(gg_trg_sanlianhengda_3)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_sanlianhengda_3_5))
call DestroyTrigger(gg_trg_sanlianhengda_3_5)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_sanlianhengda_4))
call DestroyTrigger(gg_trg_sanlianhengda_4)
else
endif
if ( ( udg_a[15] == false ) ) then
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_rougou_1))
call DestroyTrigger(gg_trg_rougou_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_rougou_2))
call DestroyTrigger(gg_trg_rougou_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_guishou))
call DestroyTrigger(gg_trg_guishou)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_guishou2))
call DestroyTrigger(gg_trg_guishou2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_qiangxingliliang))
call DestroyTrigger(gg_trg_qiangxingliliang)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_qiangxingliliang_2))
call DestroyTrigger(gg_trg_qiangxingliliang_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_fushiwenyi_1))
call DestroyTrigger(gg_trg_fushiwenyi_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_fushiwenyi_2))
call DestroyTrigger(gg_trg_fushiwenyi_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_kenyao))
call DestroyTrigger(gg_trg_kenyao)
else
endif
if ( ( udg_a[16] == false ) ) then
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_dianciliqianyin_1))
call DestroyTrigger(gg_trg_dianciliqianyin_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_dianciliqianyin_2))
call DestroyTrigger(gg_trg_dianciliqianyin_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_fangdian_1))
call DestroyTrigger(gg_trg_fangdian_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_fangdian_2))
call DestroyTrigger(gg_trg_fangdian_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_leijian))
call DestroyTrigger(gg_trg_leijian)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_chaodiancipao_1))
call DestroyTrigger(gg_trg_chaodiancipao_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_chaodiancipao_2))
call DestroyTrigger(gg_trg_chaodiancipao_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_chaodiancipao_3))
call DestroyTrigger(gg_trg_chaodiancipao_3)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_jiujibisha))
call DestroyTrigger(gg_trg_jiujibisha)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_jiujibisha2))
call DestroyTrigger(gg_trg_jiujibisha2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_jiujibisha3))
call DestroyTrigger(gg_trg_jiujibisha3)
else
endif
if ( ( udg_a[17] == false ) ) then
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_xuesezhuahen))
call DestroyTrigger(gg_trg_xuesezhuahen)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_xuesezhuahen2))
call DestroyTrigger(gg_trg_xuesezhuahen2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_langxi))
call DestroyTrigger(gg_trg_langxi)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_paoxiaochongji_1))
call DestroyTrigger(gg_trg_paoxiaochongji_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_paoxiaochongji_2))
call DestroyTrigger(gg_trg_paoxiaochongji_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_paoxiaochongji_3))
call DestroyTrigger(gg_trg_paoxiaochongji_3)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_langdebenneng))
call DestroyTrigger(gg_trg_langdebenneng)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_langdebenneng_2))
call DestroyTrigger(gg_trg_langdebenneng_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_langshenhoujiao))
call DestroyTrigger(gg_trg_langshenhoujiao)
else
endif
if ( ( udg_a[18] == false ) ) then
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_jianqizhan))
call DestroyTrigger(gg_trg_jianqizhan)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_jianqizhan2))
call DestroyTrigger(gg_trg_jianqizhan2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_xiongzhan_1))
call DestroyTrigger(gg_trg_xiongzhan_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_xiongzhan_2))
call DestroyTrigger(gg_trg_xiongzhan_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_yidaorp_1))
call DestroyTrigger(gg_trg_yidaorp_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_chaojiu_1))
call DestroyTrigger(gg_trg_chaojiu_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_chaojiu_2))
call DestroyTrigger(gg_trg_chaojiu_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_hualongdianjing_1))
call DestroyTrigger(gg_trg_hualongdianjing_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_hualongdianjing_2))
call DestroyTrigger(gg_trg_hualongdianjing_2)
else
endif
if ( ( udg_a[19] == false ) ) then
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_yanshiqiang_1))
call DestroyTrigger(gg_trg_yanshiqiang_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_yanshiqiang_2))
call DestroyTrigger(gg_trg_yanshiqiang_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_yanshiqiang_3))
call DestroyTrigger(gg_trg_yanshiqiang_3)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_yanshiqiang_4))
call DestroyTrigger(gg_trg_yanshiqiang_4)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_gangciliancheng))
call DestroyTrigger(gg_trg_gangciliancheng)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_gangciliancheng_2))
call DestroyTrigger(gg_trg_gangciliancheng_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_ganghuajiazhi))
call DestroyTrigger(gg_trg_ganghuajiazhi)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_zhenlizhimen))
call DestroyTrigger(gg_trg_zhenlizhimen)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_zhenlizhimen_2))
call DestroyTrigger(gg_trg_zhenlizhimen_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_xianzhezhishi))
call DestroyTrigger(gg_trg_xianzhezhishi)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_xianzhezhishi2))
call DestroyTrigger(gg_trg_xianzhezhishi2)
else
endif
if ( ( udg_a[20] == false ) ) then
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_diyuhuoyan_1))
call DestroyTrigger(gg_trg_diyuhuoyan_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_diyuhuoyan_2))
call DestroyTrigger(gg_trg_diyuhuoyan_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_diyuhuoyan_3))
call DestroyTrigger(gg_trg_diyuhuoyan_3)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_lunrudao_1))
call DestroyTrigger(gg_trg_lunrudao_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_lunrudao_2))
call DestroyTrigger(gg_trg_lunrudao_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_lunrudao_3))
call DestroyTrigger(gg_trg_lunrudao_3)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_xuhuan_1))
call DestroyTrigger(gg_trg_xuhuan_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_xuhuan_2))
call DestroyTrigger(gg_trg_xuhuan_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_xuhuan_2))
call DestroyTrigger(gg_trg_xuhuan_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_xuhuan_3))
call DestroyTrigger(gg_trg_xuhuan_3)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_diyuweituo_1))
call DestroyTrigger(gg_trg_diyuweituo_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_diyuweituo_2))
call DestroyTrigger(gg_trg_diyuweituo_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_yuanheng_1))
call DestroyTrigger(gg_trg_yuanheng_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_yuanheng_2))
call DestroyTrigger(gg_trg_yuanheng_2)
else
endif
if ( ( udg_a[21] == false ) ) then
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_diushoulei))
call DestroyTrigger(gg_trg_diushoulei)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_diushoulei2))
call DestroyTrigger(gg_trg_diushoulei2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_duochongjuji_1))
call DestroyTrigger(gg_trg_duochongjuji_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_duochongjuji_2))
call DestroyTrigger(gg_trg_duochongjuji_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_duochongjuji_3))
call DestroyTrigger(gg_trg_duochongjuji_3)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_houkongfan))
call DestroyTrigger(gg_trg_houkongfan)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_houkognfan2))
call DestroyTrigger(gg_trg_houkognfan2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_chongjidan_1))
call DestroyTrigger(gg_trg_chongjidan_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_chongjidan_2))
call DestroyTrigger(gg_trg_chongjidan_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_chongjidan_3))
call DestroyTrigger(gg_trg_chongjidan_3)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_baoliedan_1))
call DestroyTrigger(gg_trg_baoliedan_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_baoliedan_2))
call DestroyTrigger(gg_trg_baoliedan_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_baoliedan_3))
call DestroyTrigger(gg_trg_baoliedan_3)
else
endif
if ( ( udg_a[22] == false ) ) then
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_xiaoyefuka__1))
call DestroyTrigger(gg_trg_xiaoyefuka__1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_xiaoyefuka_0))
call DestroyTrigger(gg_trg_xiaoyefuka_0)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_xiaoyefuka_1))
call DestroyTrigger(gg_trg_xiaoyefuka_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_xiaoyefuka_2))
call DestroyTrigger(gg_trg_xiaoyefuka_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_time_shoubiao))
call DestroyTrigger(gg_trg_time_shoubiao)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_time_shoubiao_2))
call DestroyTrigger(gg_trg_time_shoubiao_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_shunyimoshu_1))
call DestroyTrigger(gg_trg_shunyimoshu_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_shunyimoshu_2))
call DestroyTrigger(gg_trg_shunyimoshu_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_houzuoli_16))
call DestroyTrigger(gg_trg_houzuoli_16)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_tansheyinren_2_1))
call DestroyTrigger(gg_trg_tansheyinren_2_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_tansheyinren_2_2))
call DestroyTrigger(gg_trg_tansheyinren_2_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_feidao))
call DestroyTrigger(gg_trg_feidao)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_feidao_the_world))
call DestroyTrigger(gg_trg_feidao_the_world)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_feidao_2))
call DestroyTrigger(gg_trg_feidao_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_feidaoqishe_1))
call DestroyTrigger(gg_trg_feidaoqishe_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_jishufeidaoqishe_1))
call DestroyTrigger(gg_trg_jishufeidaoqishe_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_jishufeidaoqishe_2))
call DestroyTrigger(gg_trg_jishufeidaoqishe_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_feidaoqishe_the_world))
call DestroyTrigger(gg_trg_feidaoqishe_the_world)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_feidaoqishe_2))
call DestroyTrigger(gg_trg_feidaoqishe_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_feidaoqishe_2_jishu))
call DestroyTrigger(gg_trg_feidaoqishe_2_jishu)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_sharenmuou_1))
call DestroyTrigger(gg_trg_sharenmuou_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_sharenmuou_2))
call DestroyTrigger(gg_trg_sharenmuou_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_sharenmuou_3))
call DestroyTrigger(gg_trg_sharenmuou_3)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_yemuhuanyingsharengui_1))
call DestroyTrigger(gg_trg_yemuhuanyingsharengui_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_yemuhuanyingsharengui_2))
call DestroyTrigger(gg_trg_yemuhuanyingsharengui_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_the_world_1))
call DestroyTrigger(gg_trg_the_world_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_the_world_2))
call DestroyTrigger(gg_trg_the_world_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_the_world_3))
call DestroyTrigger(gg_trg_the_world_3)
else
endif
if ( ( udg_a[23] == false ) ) then
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_chaosuzaisheng))
call DestroyTrigger(gg_trg_chaosuzaisheng)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_chaosuzaisheng2))
call DestroyTrigger(gg_trg_chaosuzaisheng2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_shunbu_1))
call DestroyTrigger(gg_trg_shunbu_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_wanjie))
call DestroyTrigger(gg_trg_wanjie)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_wanjie3))
call DestroyTrigger(gg_trg_wanjie3)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_xuhua_1))
call DestroyTrigger(gg_trg_xuhua_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_xuhua_2))
call DestroyTrigger(gg_trg_xuhua_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_yueyatianchong))
call DestroyTrigger(gg_trg_yueyatianchong)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_yueyatianchong2))
call DestroyTrigger(gg_trg_yueyatianchong2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_yueyatianchong_hei))
call DestroyTrigger(gg_trg_yueyatianchong_hei)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_shunbuzhan))
call DestroyTrigger(gg_trg_shunbuzhan)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_shunbuzhan2))
call DestroyTrigger(gg_trg_shunbuzhan2)
else
endif
if ( ( udg_a[24] == false ) ) then
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_zishenyidong_1))
call DestroyTrigger(gg_trg_zishenyidong_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_zishenyidong_2))
call DestroyTrigger(gg_trg_zishenyidong_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_yidongjinzhi))
call DestroyTrigger(gg_trg_yidongjinzhi)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_yidongjinzhi_2))
call DestroyTrigger(gg_trg_yidongjinzhi_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_tieshi_1))
call DestroyTrigger(gg_trg_tieshi_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_tieshi_2))
call DestroyTrigger(gg_trg_tieshi_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_tieshi_3))
call DestroyTrigger(gg_trg_tieshi_3)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_tieshi_4))
call DestroyTrigger(gg_trg_tieshi_4)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_chumoyidong))
call DestroyTrigger(gg_trg_chumoyidong)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_chumoyidong_star))
call DestroyTrigger(gg_trg_chumoyidong_star)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_shoukao))
call DestroyTrigger(gg_trg_shoukao)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_shoukao_2))
call DestroyTrigger(gg_trg_shoukao_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_duochongtieshi))
call DestroyTrigger(gg_trg_duochongtieshi)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_duochongtieshi_2))
call DestroyTrigger(gg_trg_duochongtieshi_2)
else
endif
if ( ( udg_a[25] == false ) ) then
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_feitui))
call DestroyTrigger(gg_trg_feitui)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_feitui2))
call DestroyTrigger(gg_trg_feitui2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_zhanzhengjianta))
call DestroyTrigger(gg_trg_zhanzhengjianta)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_zhanzhengjianta2))
call DestroyTrigger(gg_trg_zhanzhengjianta2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_lianji))
call DestroyTrigger(gg_trg_lianji)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_lianji2))
call DestroyTrigger(gg_trg_lianji2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_yexingkuangben_1))
call DestroyTrigger(gg_trg_yexingkuangben_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_yexingkuangben_2))
call DestroyTrigger(gg_trg_yexingkuangben_2)
else
endif
if ( ( udg_a[26] == false ) ) then
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_combo))
call DestroyTrigger(gg_trg_combo)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_yefu_tuji_1))
call DestroyTrigger(gg_trg_yefu_tuji_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_yefu_tuji_2))
call DestroyTrigger(gg_trg_yefu_tuji_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_emo_1))
call DestroyTrigger(gg_trg_emo_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_emo_2))
call DestroyTrigger(gg_trg_emo_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_emo_1))
call DestroyTrigger(gg_trg_emo_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_Damon_Lord_Walk_0))
call DestroyTrigger(gg_trg_Damon_Lord_Walk_0)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_Damon_Lord_Walk_1))
call DestroyTrigger(gg_trg_Damon_Lord_Walk_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_Damon_Lord_Walk_2))
call DestroyTrigger(gg_trg_Damon_Lord_Walk_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_Damon_Lord_Walk_3))
call DestroyTrigger(gg_trg_Damon_Lord_Walk_3)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_shenqiang_1))
call DestroyTrigger(gg_trg_shenqiang_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_shenqiang_2))
call DestroyTrigger(gg_trg_shenqiang_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_hongmo_1))
call DestroyTrigger(gg_trg_hongmo_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_hongmo_2))
call DestroyTrigger(gg_trg_hongmo_2)
else
endif
if ( ( udg_a[27] == false ) ) then
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_zhonglifeixing_star))
call DestroyTrigger(gg_trg_zhonglifeixing_star)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_zhonglifeixing_1))
call DestroyTrigger(gg_trg_zhonglifeixing_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_zhonglifeixing_2))
call DestroyTrigger(gg_trg_zhonglifeixing_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_zhonglifeixing_3))
call DestroyTrigger(gg_trg_zhonglifeixing_3)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_zhonglifeixing_move))
call DestroyTrigger(gg_trg_zhonglifeixing_move)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_shiliangfantan_1))
call DestroyTrigger(gg_trg_shiliangfantan_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_shiliangfantan2))
call DestroyTrigger(gg_trg_shiliangfantan2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_shiliangfantan3))
call DestroyTrigger(gg_trg_shiliangfantan3)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_shanghaimianyi))
call DestroyTrigger(gg_trg_shanghaimianyi)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_blood_1))
call DestroyTrigger(gg_trg_blood_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_blood_2))
call DestroyTrigger(gg_trg_blood_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_dongliangchongji_1))
call DestroyTrigger(gg_trg_dongliangchongji_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_dongliangchongji_2A))
call DestroyTrigger(gg_trg_dongliangchongji_2A)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_dongliangchongji_2B))
call DestroyTrigger(gg_trg_dongliangchongji_2B)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_doom_1))
call DestroyTrigger(gg_trg_doom_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_doom_2))
call DestroyTrigger(gg_trg_doom_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_doom_3))
call DestroyTrigger(gg_trg_doom_3)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_doom_4))
call DestroyTrigger(gg_trg_doom_4)
else
endif
if ( ( udg_a[28] == false ) ) then
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_bingjian_1))
call DestroyTrigger(gg_trg_bingjian_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_bingjian_2))
call DestroyTrigger(gg_trg_bingjian_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_bingbi_1))
call DestroyTrigger(gg_trg_bingbi_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_bingbi_2))
call DestroyTrigger(gg_trg_bingbi_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_lianzhan))
call DestroyTrigger(gg_trg_lianzhan)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_lianzhan2))
call DestroyTrigger(gg_trg_lianzhan2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_penqiji))
call DestroyTrigger(gg_trg_penqiji)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_bingdong))
call DestroyTrigger(gg_trg_bingdong)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_bingdong2))
call DestroyTrigger(gg_trg_bingdong2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_bigndognzhan))
call DestroyTrigger(gg_trg_bigndognzhan)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_bingdognzhan2))
call DestroyTrigger(gg_trg_bingdognzhan2)
else
endif
if ( ( udg_a[29] == false ) ) then
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_yuansuzuhe))
call DestroyTrigger(gg_trg_yuansuzuhe)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_yuansupeizhi_0))
call DestroyTrigger(gg_trg_yuansupeizhi_0)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_yuansupeizhi_1))
call DestroyTrigger(gg_trg_yuansupeizhi_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_yuansupeizhi_2))
call DestroyTrigger(gg_trg_yuansupeizhi_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_yuansupeizhi_2_5))
call DestroyTrigger(gg_trg_yuansupeizhi_2_5)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_yuansupeizhi_3))
call DestroyTrigger(gg_trg_yuansupeizhi_3)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_linglihuifu))
call DestroyTrigger(gg_trg_linglihuifu)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_yuansu_lv24))
call DestroyTrigger(gg_trg_yuansu_lv24)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_yuansu_cdlevel))
call DestroyTrigger(gg_trg_yuansu_cdlevel)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_yuansu_cd))
call DestroyTrigger(gg_trg_yuansu_cd)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_yuansu_cd_2))
call DestroyTrigger(gg_trg_yuansu_cd_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_huofu_a_1))
call DestroyTrigger(gg_trg_huofu_a_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_huofu_a_2))
call DestroyTrigger(gg_trg_huofu_a_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_huofu_b_1))
call DestroyTrigger(gg_trg_huofu_b_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_huofu_b_2))
call DestroyTrigger(gg_trg_huofu_b_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_huojinfu_1))
call DestroyTrigger(gg_trg_huojinfu_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_huojinfu_2))
call DestroyTrigger(gg_trg_huojinfu_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_huotufu_1))
call DestroyTrigger(gg_trg_huotufu_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_huoshuifu_1))
call DestroyTrigger(gg_trg_huoshuifu_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_huoshuifu_2))
call DestroyTrigger(gg_trg_huoshuifu_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_shuifu_a_1))
call DestroyTrigger(gg_trg_shuifu_a_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_shuifu_a_2))
call DestroyTrigger(gg_trg_shuifu_a_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_shuifu_b_1))
call DestroyTrigger(gg_trg_shuifu_b_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_shuifu_b_2))
call DestroyTrigger(gg_trg_shuifu_b_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_shuitu_1))
call DestroyTrigger(gg_trg_shuitu_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_shuitu_2))
call DestroyTrigger(gg_trg_shuitu_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_shuitu_3))
call DestroyTrigger(gg_trg_shuitu_3)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_shuimufu_1))
call DestroyTrigger(gg_trg_shuimufu_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_shuimufu_2))
call DestroyTrigger(gg_trg_shuimufu_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_shuimufu_3))
call DestroyTrigger(gg_trg_shuimufu_3)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_shuimufu_4))
call DestroyTrigger(gg_trg_shuimufu_4)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_shuijinfu_1))
call DestroyTrigger(gg_trg_shuijinfu_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_shuijinfu_2))
call DestroyTrigger(gg_trg_shuijinfu_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_jinfu_a_1))
call DestroyTrigger(gg_trg_jinfu_a_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_jinfu_a_2))
call DestroyTrigger(gg_trg_jinfu_a_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_jinfu_b_1))
call DestroyTrigger(gg_trg_jinfu_b_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_jinfu_b_2))
call DestroyTrigger(gg_trg_jinfu_b_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_mufu_a_1))
call DestroyTrigger(gg_trg_mufu_a_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_mufu_a_2))
call DestroyTrigger(gg_trg_mufu_a_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_mufu_b_1))
call DestroyTrigger(gg_trg_mufu_b_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_mufu_b_2))
call DestroyTrigger(gg_trg_mufu_b_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_mufu_b_3))
call DestroyTrigger(gg_trg_mufu_b_3)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_rimufu_1))
call DestroyTrigger(gg_trg_rimufu_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_rimufu_2))
call DestroyTrigger(gg_trg_rimufu_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_jinmufu_1))
call DestroyTrigger(gg_trg_jinmufu_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_jinmufu_2))
call DestroyTrigger(gg_trg_jinmufu_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_yuemufu_1))
call DestroyTrigger(gg_trg_yuemufu_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_yuemufu_2))
call DestroyTrigger(gg_trg_yuemufu_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_tufu_a_1))
call DestroyTrigger(gg_trg_tufu_a_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_tufu_a_2))
call DestroyTrigger(gg_trg_tufu_a_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_tufu_a_3))
call DestroyTrigger(gg_trg_tufu_a_3)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_tufu_b_1))
call DestroyTrigger(gg_trg_tufu_b_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_tufu_b_2))
call DestroyTrigger(gg_trg_tufu_b_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_tujinfu_1))
call DestroyTrigger(gg_trg_tujinfu_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_tujinfu_1_5))
call DestroyTrigger(gg_trg_tujinfu_1_5)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_tujinfu_2))
call DestroyTrigger(gg_trg_tujinfu_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_tujinfu_3))
call DestroyTrigger(gg_trg_tujinfu_3)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_rifu_1))
call DestroyTrigger(gg_trg_rifu_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_rifu_2))
call DestroyTrigger(gg_trg_rifu_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_rifu_3))
call DestroyTrigger(gg_trg_rifu_3)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_yuefu_1))
call DestroyTrigger(gg_trg_yuefu_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_yuefu_2))
call DestroyTrigger(gg_trg_yuefu_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_riyuefu_1))
call DestroyTrigger(gg_trg_riyuefu_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_riyuefu_2))
call DestroyTrigger(gg_trg_riyuefu_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_riyuefu_3))
call DestroyTrigger(gg_trg_riyuefu_3)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_xianzhezhishi_1))
call DestroyTrigger(gg_trg_xianzhezhishi_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_xianzhezhishi_2))
call DestroyTrigger(gg_trg_xianzhezhishi_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_xianzhezhishi_3))
call DestroyTrigger(gg_trg_xianzhezhishi_3)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_xianzhezhishi_4))
call DestroyTrigger(gg_trg_xianzhezhishi_4)
else
endif
if ( ( udg_a[30] == false ) ) then
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_dierjiefang_1))
call DestroyTrigger(gg_trg_dierjiefang_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_dierjiefang_2))
call DestroyTrigger(gg_trg_dierjiefang_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_dierjiefang_2_5))
call DestroyTrigger(gg_trg_dierjiefang_2_5)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_dierjiefang_3))
call DestroyTrigger(gg_trg_dierjiefang_3)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_dierjiefang_4))
call DestroyTrigger(gg_trg_dierjiefang_4)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_yinjia))
call DestroyTrigger(gg_trg_yinjia)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_yinjia2))
call DestroyTrigger(gg_trg_yinjia2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_tiejia_1))
call DestroyTrigger(gg_trg_tiejia_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_tiejia_2))
call DestroyTrigger(gg_trg_tiejia_2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_yuanwuwufeng))
call DestroyTrigger(gg_trg_yuanwuwufeng)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_yuanwuwufeng2))
call DestroyTrigger(gg_trg_yuanwuwufeng2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_yinsufengbao_1))
call DestroyTrigger(gg_trg_yinsufengbao_1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_yinsufengbao_2))
call DestroyTrigger(gg_trg_yinsufengbao_2)
else
endif
endfunction
function InitTrig_Delete_trigger takes nothing returns nothing
set gg_trg_Delete_trigger=CreateTrigger()
call DisableTrigger(gg_trg_Delete_trigger)
call TriggerRegisterTimerExpireEvent(gg_trg_Delete_trigger, udg_jishiqi[136])
call TriggerAddAction(gg_trg_Delete_trigger, function Trig_Delete_triggerActions)
endfunction
function Trig_lxActions takes nothing returns nothing
call DialogClear(udg_duihuakuang[0])
call DialogSetMessage(udg_duihuakuang[4], "TRIGSTR_7870")
call DialogAddButtonWithHotkeyBJ(udg_duihuakuang[4], "TRIGSTR_7871", 0x51)
set udg_anniu[0]=GetLastCreatedButtonBJ()
call DialogAddButtonWithHotkeyBJ(udg_duihuakuang[4], "TRIGSTR_8016", 0x57)
set udg_anniu[1]=GetLastCreatedButtonBJ()
call DialogDisplay(s__baka_SPlayer(0), udg_duihuakuang[4], true)
endfunction
function InitTrig_lx takes nothing returns nothing
set gg_trg_lx=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_lx, udg_MS[0])
call TriggerAddAction(gg_trg_lx, function Trig_lxActions)
endfunction
function Trig_lx0_5Actions takes nothing returns nothing
if ( ( GetClickedButtonBJ() == udg_anniu[1] ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 20.00, "TRIGSTR_1529")
if ( ( GetRandomInt(1, 2) == 1 ) ) then
set udg_zhengshu[31]=1
call DisplayTimedTextToForce(GetPlayersAll(), 20.00, "TRIGSTR_7473")
else
set udg_zhengshu[31]=2
call DisplayTimedTextToForce(GetPlayersAll(), 20.00, "TRIGSTR_7474")
endif
call RemoveUnit(gg_unit_n00J_0066)
call RemoveUnit(gg_unit_n00K_0067)
call RemoveUnit(gg_unit_n00L_0068)
call RemoveUnit(gg_unit_n00M_0069)
call PlaySoundBJ(gg_snd_ArrangedTeamInvitation01)
call StartTimerBJ(udg_jishiqi[28], false, 0.00)
call EnableUserControl(true)
set udg_kzs[13]=0
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x41303646, false)
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x41303648, false)
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
set udg_dian2[0]=GetRectCenter(gg_rct_lunxuan)
set udg_danwei2[180]=CreateUnitAtLoc(s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE), 0x65303434, udg_dian2[0], 270.00)
call SetUnitVertexColor(udg_danwei2[180], 255, 255, 255, 100)
call RemoveLocation(udg_dian2[0])
set udg_dian2[0]=GetRectCenter(gg_rct_lunxuan_2)
set udg_danwei2[181]=CreateUnitAtLoc(s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE), 0x65303434, udg_dian2[0], 270.00)
call SetUnitVertexColor(udg_danwei2[181], 255, 255, 255, 100)
call RemoveLocation(udg_dian2[0])
call StartTimerBJ(udg_times[180], false, 3.00)
call DialogClear(udg_duihuakuang[0])
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_duihuakuang2))
call DestroyTrigger(gg_trg_duihuakuang2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_chushihua))
call DestroyTrigger(gg_trg_chushihua)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_all_random))
call DestroyTrigger(gg_trg_all_random)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_OB))
call DestroyTrigger(gg_trg_OB)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_lx0_5))
call DestroyTrigger(gg_trg_lx0_5)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_lx0_6_1212))
call DestroyTrigger(gg_trg_lx0_6_1212)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_lx0_6_2121))
call DestroyTrigger(gg_trg_lx0_6_2121)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_lx0_7_ban_hero1))
call DestroyTrigger(gg_trg_lx0_7_ban_hero1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_lx0_7_ban_hero6))
call DestroyTrigger(gg_trg_lx0_7_ban_hero6)
else
if ( ( GetClickedButtonBJ() == udg_anniu[0] ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 20.00, "TRIGSTR_1528")
if ( ( GetRandomInt(1, 2) == 1 ) ) then
set udg_zhengshu[31]=1
else
set udg_zhengshu[31]=2
endif
if ( ( udg_zhengshu[31] == 1 ) ) then
call PlaySoundBJ(gg_snd_Rescue)
set udg_kzs[13]=0
call DisplayTimedTextToForce(GetPlayersAll(), 20.00, "TRIGSTR_7475")
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( ( "|cff009900玩家1：|r" + GetPlayerName(s__baka_SPlayer(0)) ) + "选择第一个要ban的英雄" ))
call DisableTrigger(gg_trg_lx1221122112)
call DisableTrigger(gg_trg_lx2112211221)
call StartTimerBJ(udg_MS[1], true, 10.00)
call CreateTimerDialogBJ(udg_MS[1], ( GetPlayerName(s__baka_SPlayer(0)) + "选择英雄" ))
set udg_msck[0]=bj_lastCreatedTimerDialog
call TimerDialogSetTitle(udg_msck[0], "TRIGSTR_7477")
call TimerDialogSetTitleColor(udg_msck[0], 0, 200, 0, 255)
call TimerDialogDisplay(udg_msck[0], true)
set udg_buer[25]=true
set udg_buer[26]=false
else
if ( ( udg_zhengshu[31] == 2 ) ) then
set udg_kzs[13]=0
call DisplayTimedTextToForce(GetPlayersAll(), 20.00, "TRIGSTR_7476")
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( ( "|cff0075ff玩家6：|r" + GetPlayerName(s__baka_SPlayer(5)) ) + "选择第一个要ban的英雄" ))
call DisableTrigger(gg_trg_lx1221122112)
call DisableTrigger(gg_trg_lx2112211221)
call StartTimerBJ(udg_MS[3], true, 10.00)
call CreateTimerDialogBJ(udg_MS[3], ( GetPlayerName(s__baka_SPlayer(5)) + "选择英雄" ))
set udg_msck[0]=bj_lastCreatedTimerDialog
call TimerDialogSetTitle(udg_msck[0], "TRIGSTR_8056")
call TimerDialogSetTitleColor(udg_msck[0], 0, 150, 255, 255)
call TimerDialogDisplay(udg_msck[0], true)
set udg_buer[25]=false
set udg_buer[26]=true
else
endif
endif
else
endif
endif
endfunction
function InitTrig_lx0_5 takes nothing returns nothing
set gg_trg_lx0_5=CreateTrigger()
call TriggerRegisterDialogEvent(gg_trg_lx0_5, udg_duihuakuang[4])
call TriggerAddAction(gg_trg_lx0_5, function Trig_lx0_5Actions)
endfunction
function Trig_lx0_6_1212Actions takes nothing returns nothing
set udg_kzs[13]=( udg_kzs[13] + 1 )
if ( ( udg_kzs[13] == 1 ) ) then
call PlaySoundBJ(gg_snd_Rescue)
set udg_buer[26]=true
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( ( "|cff0075ff玩家6：|r" + GetPlayerName(s__baka_SPlayer(5)) ) + "选择第一个要ban的英雄" ))
call TimerDialogSetTitle(udg_msck[0], "TRIGSTR_7478")
call TimerDialogSetTitleColor(udg_msck[0], 0, 150, 255, 255)
call TimerDialogDisplay(udg_msck[0], true)
else
if ( ( udg_kzs[13] == 2 ) ) then
call PlaySoundBJ(gg_snd_Rescue)
set udg_buer[25]=true
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( ( "|cff009900玩家1：|r" + GetPlayerName(s__baka_SPlayer(0)) ) + "选择第二个要ban的英雄" ))
call TimerDialogSetTitle(udg_msck[0], "TRIGSTR_7572")
call TimerDialogSetTitleColor(udg_msck[0], 0, 200, 0, 255)
call TimerDialogDisplay(udg_msck[0], true)
else
if ( ( udg_kzs[13] == 3 ) ) then
call PlaySoundBJ(gg_snd_Rescue)
set udg_buer[26]=true
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( ( "|cff0075ff玩家6：|r" + GetPlayerName(s__baka_SPlayer(5)) ) + "选择第二个要ban的英雄" ))
call TimerDialogSetTitle(udg_msck[0], "TRIGSTR_7619")
call TimerDialogSetTitleColor(udg_msck[0], 0, 150, 255, 255)
call TimerDialogDisplay(udg_msck[0], true)
else
if ( ( udg_kzs[13] == 4 ) ) then
call TimerDialogDisplay(udg_msck[0], false)
call DestroyTimerDialog(udg_msck[0])
call StartTimerBJ(udg_jishiqi[28], false, 0.00)
call RemoveUnit(gg_unit_n00J_0066)
call RemoveUnit(gg_unit_n00K_0067)
call RemoveUnit(gg_unit_n00L_0068)
call RemoveUnit(gg_unit_n00M_0069)
call PlaySoundBJ(gg_snd_ArrangedTeamInvitation01)
call EnableUserControl(true)
set udg_kzs[13]=0
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x41303646, false)
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x41303648, false)
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
set udg_dian2[0]=GetRectCenter(gg_rct_lunxuan)
set udg_danwei2[180]=CreateUnitAtLoc(s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE), 0x65303434, udg_dian2[0], 270.00)
call SetUnitVertexColor(udg_danwei2[180], 255, 255, 255, 100)
call RemoveLocation(udg_dian2[0])
set udg_dian2[0]=GetRectCenter(gg_rct_lunxuan_2)
set udg_danwei2[181]=CreateUnitAtLoc(s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE), 0x65303434, udg_dian2[0], 270.00)
call SetUnitVertexColor(udg_danwei2[181], 255, 255, 255, 100)
call RemoveLocation(udg_dian2[0])
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_duihuakuang2))
call DestroyTrigger(gg_trg_duihuakuang2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_chushihua))
call DestroyTrigger(gg_trg_chushihua)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_all_random))
call DestroyTrigger(gg_trg_all_random)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_OB))
call DestroyTrigger(gg_trg_OB)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_lx0_5))
call DestroyTrigger(gg_trg_lx0_5)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_lx0_6_1212))
call DestroyTrigger(gg_trg_lx0_6_1212)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_lx0_6_2121))
call DestroyTrigger(gg_trg_lx0_6_2121)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_lx0_7_ban_hero1))
call DestroyTrigger(gg_trg_lx0_7_ban_hero1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_lx0_7_ban_hero6))
call DestroyTrigger(gg_trg_lx0_7_ban_hero6)
call StartTimerBJ(udg_times[180], false, 3.00)
call DialogClear(udg_duihuakuang[0])
call PauseTimer(udg_MS[1])
else
endif
endif
endif
endif
endfunction
function InitTrig_lx0_6_1212 takes nothing returns nothing
set gg_trg_lx0_6_1212=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_lx0_6_1212, udg_MS[1])
call TriggerAddAction(gg_trg_lx0_6_1212, function Trig_lx0_6_1212Actions)
endfunction
function Trig_lx0_6_2121Actions takes nothing returns nothing
set udg_kzs[13]=( udg_kzs[13] + 1 )
if ( ( udg_kzs[13] == 1 ) ) then
call PlaySoundBJ(gg_snd_Rescue)
set udg_buer[25]=true
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( ( "|cff009900玩家1：|r" + GetPlayerName(s__baka_SPlayer(0)) ) + "选择第一个要ban的英雄" ))
call TimerDialogSetTitle(udg_msck[0], "TRIGSTR_8059")
call TimerDialogSetTitleColor(udg_msck[0], 0, 200, 0, 255)
call TimerDialogDisplay(udg_msck[0], true)
else
if ( ( udg_kzs[13] == 2 ) ) then
call PlaySoundBJ(gg_snd_Rescue)
set udg_buer[26]=true
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( ( "|cff0075ff玩家6：|r" + GetPlayerName(s__baka_SPlayer(5)) ) + "选择第二个要ban的英雄" ))
call TimerDialogSetTitle(udg_msck[0], "TRIGSTR_8093")
call TimerDialogSetTitleColor(udg_msck[0], 0, 150, 255, 255)
call TimerDialogDisplay(udg_msck[0], true)
else
if ( ( udg_kzs[13] == 3 ) ) then
set udg_buer[25]=true
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( ( "|cff009900玩家1：|r" + GetPlayerName(s__baka_SPlayer(0)) ) + "选择第二个要ban的英雄" ))
call TimerDialogSetTitle(udg_msck[0], "TRIGSTR_8096")
call TimerDialogSetTitleColor(udg_msck[0], 0, 200, 0, 255)
call TimerDialogDisplay(udg_msck[0], true)
else
if ( ( udg_kzs[13] == 4 ) ) then
call TimerDialogDisplay(udg_msck[0], false)
call DestroyTimerDialog(udg_msck[0])
call StartTimerBJ(udg_jishiqi[28], false, 0.00)
call RemoveUnit(gg_unit_n00J_0066)
call RemoveUnit(gg_unit_n00K_0067)
call RemoveUnit(gg_unit_n00L_0068)
call RemoveUnit(gg_unit_n00M_0069)
call PlaySoundBJ(gg_snd_ArrangedTeamInvitation01)
call EnableUserControl(true)
set udg_kzs[13]=0
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x41303646, false)
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x41303648, false)
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
set udg_dian2[0]=GetRectCenter(gg_rct_lunxuan)
set udg_danwei2[180]=CreateUnitAtLoc(s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE), 0x65303434, udg_dian2[0], 270.00)
call SetUnitVertexColor(udg_danwei2[180], 255, 255, 255, 100)
call RemoveLocation(udg_dian2[0])
set udg_dian2[0]=GetRectCenter(gg_rct_lunxuan_2)
set udg_danwei2[181]=CreateUnitAtLoc(s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE), 0x65303434, udg_dian2[0], 270.00)
call SetUnitVertexColor(udg_danwei2[181], 255, 255, 255, 100)
call RemoveLocation(udg_dian2[0])
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_duihuakuang2))
call DestroyTrigger(gg_trg_duihuakuang2)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_chushihua))
call DestroyTrigger(gg_trg_chushihua)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_all_random))
call DestroyTrigger(gg_trg_all_random)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_OB))
call DestroyTrigger(gg_trg_OB)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_lx0_5))
call DestroyTrigger(gg_trg_lx0_5)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_lx0_6_1212))
call DestroyTrigger(gg_trg_lx0_6_1212)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_lx0_6_2121))
call DestroyTrigger(gg_trg_lx0_6_2121)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_lx0_7_ban_hero1))
call DestroyTrigger(gg_trg_lx0_7_ban_hero1)
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_lx0_7_ban_hero6))
call DestroyTrigger(gg_trg_lx0_7_ban_hero6)
call StartTimerBJ(udg_times[180], false, 3.00)
call DialogClear(udg_duihuakuang[0])
call PauseTimer(udg_MS[1])
else
endif
endif
endif
endif
endfunction
function InitTrig_lx0_6_2121 takes nothing returns nothing
set gg_trg_lx0_6_2121=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_lx0_6_2121, udg_MS[3])
call TriggerAddAction(gg_trg_lx0_6_2121, function Trig_lx0_6_2121Actions)
endfunction
function Trig_lx0_7_ban_hero1Conditions takes nothing returns boolean
return ( ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true ) and ( GetOwningPlayer(GetTriggerUnit()) == s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE) ) and ( RectContainsUnit(gg_rct_xuanren, GetTriggerUnit()) == true ) and ( udg_buer[25] == true ) )
endfunction
function Trig_lx0_7_ban_hero1Actions takes nothing returns nothing
set udg_danwei[0]=GetTriggerUnit()
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( ( "|cff009900玩家1：|r" + ( GetPlayerName(GetTriggerPlayer()) + "|cFF666666ban掉了|r" ) ) + GetHeroProperName(udg_danwei[0]) ))
call SetUnitVertexColor(udg_danwei[0], 255, 255, 255, 200)
call UnitAddAbility(udg_danwei[0], 0x416C6F63)
call GroupRemoveUnit(udg_danweizu[0], udg_danwei[0])
set udg_buer[25]=false
set udg_danwei[0]=null
endfunction
function InitTrig_lx0_7_ban_hero1 takes nothing returns nothing
set gg_trg_lx0_7_ban_hero1=CreateTrigger()
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_lx0_7_ban_hero1, s__baka_SPlayer(0), true)
call TriggerAddCondition(gg_trg_lx0_7_ban_hero1, Condition(function Trig_lx0_7_ban_hero1Conditions))
call TriggerAddAction(gg_trg_lx0_7_ban_hero1, function Trig_lx0_7_ban_hero1Actions)
endfunction
function Trig_lx0_7_ban_hero6Conditions takes nothing returns boolean
return ( ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true ) and ( GetOwningPlayer(GetTriggerUnit()) == s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE) ) and ( RectContainsUnit(gg_rct_xuanren, GetTriggerUnit()) == true ) and ( udg_buer[26] == true ) )
endfunction
function Trig_lx0_7_ban_hero6Actions takes nothing returns nothing
set udg_danwei[0]=GetTriggerUnit()
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( ( "|cff0075ff玩家6：|r" + ( "|cFF666666ban掉了|r" + GetHeroProperName(udg_danwei[0]) ) ) + "" ))
call SetUnitVertexColor(udg_danwei[0], 255, 255, 255, 200)
call UnitAddAbility(udg_danwei[0], 0x416C6F63)
call GroupRemoveUnit(udg_danweizu[0], udg_danwei[0])
set udg_buer[26]=false
set udg_danwei[0]=null
endfunction
function InitTrig_lx0_7_ban_hero6 takes nothing returns nothing
set gg_trg_lx0_7_ban_hero6=CreateTrigger()
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_lx0_7_ban_hero6, s__baka_SPlayer(5), true)
call TriggerAddCondition(gg_trg_lx0_7_ban_hero6, Condition(function Trig_lx0_7_ban_hero6Conditions))
call TriggerAddAction(gg_trg_lx0_7_ban_hero6, function Trig_lx0_7_ban_hero6Actions)
endfunction
function Trig_lx_1Actions takes nothing returns nothing
call PlaySoundBJ(gg_snd_Rescue)
if ( ( udg_zhengshu[31] == 1 ) ) then
call CreateTimerDialogBJ(udg_MS[1], ( GetPlayerName(s__baka_SPlayer(0)) + "选择英雄" ))
set udg_msck[0]=bj_lastCreatedTimerDialog
set udg_choose_ture[1]=true
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( ( "|cff009900玩家1：|r" + GetPlayerName(s__baka_SPlayer(0)) ) + "选择英雄——" ))
call SetUnitColor(udg_danwei2[180], PLAYER_COLOR_RED)
call TimerDialogSetTitle(udg_msck[0], "TRIGSTR_8047")
call TimerDialogSetTitleColor(udg_msck[0], 0, 200, 0, 255)
call StartTimerBJ(udg_MS[1], false, 10.00)
call TimerDialogDisplay(udg_msck[0], true)
call EnableTrigger(gg_trg_lx1221122112)
else
call CreateTimerDialogBJ(udg_MS[3], ( GetPlayerName(s__baka_SPlayer(5)) + "选择英雄" ))
set udg_msck[0]=bj_lastCreatedTimerDialog
set udg_choose_ture[6]=true
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( ( "|cff0075ff玩家6：|r" + GetPlayerName(s__baka_SPlayer(5)) ) + "选择英雄——" ))
call SetUnitColor(udg_danwei2[180], PLAYER_COLOR_ORANGE)
call TimerDialogSetTitle(udg_msck[0], "TRIGSTR_8036")
call TimerDialogSetTitleColor(udg_msck[0], 0, 150, 255, 255)
call StartTimerBJ(udg_MS[3], false, 10.00)
call TimerDialogDisplay(udg_msck[0], true)
call EnableTrigger(gg_trg_lx2112211221)
endif
set udg_zhengshu2[180]=0
call SetUnitVertexColor(udg_danwei2[180], 255, 255, 255, 255)
endfunction
function InitTrig_lx_1 takes nothing returns nothing
set gg_trg_lx_1=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_lx_1, udg_times[180])
call TriggerAddAction(gg_trg_lx_1, function Trig_lx_1Actions)
endfunction
function Trig_lx1221122112Func002Func005Func003Func001Func015Func005Func003Func011Func015Func005Func002Func003Func007A takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Trig_lx1221122112Func002Func005Func003Func001Func015Func005Func003Func011Func015Func005Func002Func003Func008A takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Trig_lx1221122112Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_kzs[13]=( udg_kzs[13] + 1 )
if ( ( udg_kzs[13] == 1 ) ) then
call SetUnitColor(udg_danwei2[180], ConvertPlayerColor(12))
call SetUnitColor(udg_danwei2[181], ConvertPlayerColor(12))
call SetUnitVertexColor(udg_danwei2[180], 255, 255, 255, 100)
call SetUnitVertexColor(udg_danwei2[181], 255, 255, 255, 100)
set udg_zhengshu2[161]=1
if ( ( udg_choose_ture[1] == true ) ) then
call StartTimerBJ(udg_MS[2], false, 0.00)
else
endif
call TimerDialogDisplay(udg_msck[0], false)
call StartTimerBJ(udg_MS[1], false, 1.00)
else
if ( ( udg_kzs[13] == 2 ) ) then
call PlaySoundBJ(gg_snd_Rescue)
call SetUnitVertexColor(udg_danwei2[180], 255, 255, 255, 255)
call SetUnitVertexColor(udg_danwei2[181], 255, 255, 255, 255)
call SetUnitColor(udg_danwei2[180], PLAYER_COLOR_ORANGE)
call SetUnitColor(udg_danwei2[181], PLAYER_COLOR_GREEN)
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( ( "|cff0075ff玩家6：|r" + GetPlayerName(s__baka_SPlayer(5)) ) + "选择英雄——" ))
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( ( "|cff0075ff玩家7：|r" + GetPlayerName(s__baka_SPlayer(6)) ) + "选择英雄——" ))
set udg_choose_ture[6]=true
set udg_choose_ture[7]=true
call TimerDialogSetTitle(udg_msck[0], "TRIGSTR_1537")
call TimerDialogSetTitleColor(udg_msck[0], 0, 150, 255, 255)
call StartTimerBJ(udg_MS[1], false, 10.00)
call TimerDialogDisplay(udg_msck[0], true)
else
if ( ( udg_kzs[13] == 3 ) ) then
call SetUnitColor(udg_danwei2[180], ConvertPlayerColor(12))
call SetUnitColor(udg_danwei2[181], ConvertPlayerColor(12))
call SetUnitVertexColor(udg_danwei2[180], 255, 255, 255, 100)
call SetUnitVertexColor(udg_danwei2[181], 255, 255, 255, 100)
set udg_zhengshu2[161]=6
set udg_zhengshu2[180]=7
if ( ( udg_choose_ture[6] == true ) ) then
call StartTimerBJ(udg_MS[2], false, 0.00)
else
endif
if ( ( udg_choose_ture[7] == true ) ) then
call StartTimerBJ(udg_times[181], false, 0.00)
else
endif
call TimerDialogDisplay(udg_msck[0], false)
call StartTimerBJ(udg_MS[1], false, 1.00)
else
if ( ( udg_kzs[13] == 4 ) ) then
call PlaySoundBJ(gg_snd_Rescue)
call SetUnitVertexColor(udg_danwei2[180], 255, 255, 255, 255)
call SetUnitVertexColor(udg_danwei2[181], 255, 255, 255, 255)
call SetUnitColor(udg_danwei2[180], PLAYER_COLOR_BLUE)
call SetUnitColor(udg_danwei2[181], PLAYER_COLOR_CYAN)
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( GetPlayerName(s__baka_SPlayer(1)) + "|cFF3366FF选择英雄|r" ))
set udg_choose_ture[2]=true
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( GetPlayerName(s__baka_SPlayer(2)) + "|cFF3366FF选择英雄|r" ))
set udg_choose_ture[3]=true
call TimerDialogSetTitle(udg_msck[0], "TRIGSTR_1535")
call TimerDialogSetTitleColor(udg_msck[0], 0, 200, 0, 255)
call StartTimerBJ(udg_MS[1], false, 10.00)
call TimerDialogDisplay(udg_msck[0], true)
else
if ( ( udg_kzs[13] == 5 ) ) then
call SetUnitColor(udg_danwei2[180], ConvertPlayerColor(12))
call SetUnitColor(udg_danwei2[181], ConvertPlayerColor(12))
call SetUnitVertexColor(udg_danwei2[180], 255, 255, 255, 100)
call SetUnitVertexColor(udg_danwei2[181], 255, 255, 255, 100)
set udg_zhengshu2[161]=2
set udg_zhengshu2[180]=3
if ( ( udg_choose_ture[2] == true ) ) then
call StartTimerBJ(udg_MS[2], false, 0.00)
else
endif
if ( ( udg_choose_ture[3] == true ) ) then
call StartTimerBJ(udg_times[181], false, 0.00)
else
endif
call TimerDialogDisplay(udg_msck[0], false)
call StartTimerBJ(udg_MS[1], false, 1.00)
else
if ( ( udg_kzs[13] == 6 ) ) then
call PlaySoundBJ(gg_snd_Rescue)
call SetUnitVertexColor(udg_danwei2[180], 255, 255, 255, 255)
call SetUnitVertexColor(udg_danwei2[181], 255, 255, 255, 255)
call SetUnitColor(udg_danwei2[180], PLAYER_COLOR_PINK)
call SetUnitColor(udg_danwei2[181], PLAYER_COLOR_LIGHT_GRAY)
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( GetPlayerName(s__baka_SPlayer(7)) + "|cFF3366FF选择英雄|r" ))
set udg_choose_ture[8]=true
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( GetPlayerName(s__baka_SPlayer(8)) + "|cFF3366FF选择英雄|r" ))
set udg_choose_ture[9]=true
call TimerDialogSetTitle(udg_msck[0], "TRIGSTR_1538")
call TimerDialogSetTitleColor(udg_msck[0], 0, 150, 255, 255)
call StartTimerBJ(udg_MS[1], false, 10.00)
call TimerDialogDisplay(udg_msck[0], true)
else
if ( ( udg_kzs[13] == 7 ) ) then
call SetUnitColor(udg_danwei2[180], ConvertPlayerColor(12))
call SetUnitColor(udg_danwei2[181], ConvertPlayerColor(12))
call SetUnitVertexColor(udg_danwei2[180], 255, 255, 255, 100)
call SetUnitVertexColor(udg_danwei2[181], 255, 255, 255, 100)
set udg_zhengshu2[161]=8
set udg_zhengshu2[180]=9
if ( ( udg_choose_ture[8] == true ) ) then
call StartTimerBJ(udg_MS[2], false, 0.00)
else
endif
if ( ( udg_choose_ture[9] == true ) ) then
call StartTimerBJ(udg_times[181], false, 0.00)
else
endif
call TimerDialogDisplay(udg_msck[0], false)
call StartTimerBJ(udg_MS[1], false, 1.00)
else
if ( ( udg_kzs[13] == 8 ) ) then
call PlaySoundBJ(gg_snd_Rescue)
call SetUnitVertexColor(udg_danwei2[180], 255, 255, 255, 255)
call SetUnitVertexColor(udg_danwei2[181], 255, 255, 255, 255)
call SetUnitColor(udg_danwei2[180], PLAYER_COLOR_PURPLE)
call SetUnitColor(udg_danwei2[181], PLAYER_COLOR_ORANGE)
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( GetPlayerName(s__baka_SPlayer(3)) + "|cFF3366FF选择英雄|r" ))
set udg_choose_ture[4]=true
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( GetPlayerName(s__baka_SPlayer(4)) + "|cFF3366FF选择英雄|r" ))
set udg_choose_ture[5]=true
call TimerDialogSetTitle(udg_msck[0], "TRIGSTR_1534")
call TimerDialogSetTitleColor(udg_msck[0], 0, 200, 0, 255)
call StartTimerBJ(udg_MS[1], false, 10.00)
call TimerDialogDisplay(udg_msck[0], true)
else
if ( ( udg_kzs[13] == 9 ) ) then
call SetUnitColor(udg_danwei2[180], ConvertPlayerColor(12))
call SetUnitColor(udg_danwei2[181], ConvertPlayerColor(12))
call SetUnitVertexColor(udg_danwei2[180], 255, 255, 255, 100)
call SetUnitVertexColor(udg_danwei2[181], 255, 255, 255, 100)
set udg_zhengshu2[161]=4
set udg_zhengshu2[180]=5
if ( ( udg_choose_ture[4] == true ) ) then
call StartTimerBJ(udg_MS[2], false, 0.00)
else
endif
if ( ( udg_choose_ture[5] == true ) ) then
call StartTimerBJ(udg_times[181], false, 0.00)
else
endif
call TimerDialogDisplay(udg_msck[0], false)
call StartTimerBJ(udg_MS[1], false, 1.00)
else
if ( ( udg_kzs[13] == 10 ) ) then
call PlaySoundBJ(gg_snd_Rescue)
call SetUnitColor(udg_danwei2[181], PLAYER_COLOR_LIGHT_BLUE)
call SetUnitVertexColor(udg_danwei2[181], 255, 255, 255, 255)
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( GetPlayerName(s__baka_SPlayer(9)) + "|cFF3366FF选择英雄|r" ))
set udg_choose_ture[10]=true
call TimerDialogSetTitle(udg_msck[0], "TRIGSTR_1539")
call TimerDialogSetTitleColor(udg_msck[0], 0, 150, 255, 255)
call StartTimerBJ(udg_MS[1], false, 10.00)
call TimerDialogDisplay(udg_msck[0], true)
else
if ( ( udg_kzs[13] == 11 ) ) then
call SetUnitColor(udg_danwei2[181], ConvertPlayerColor(12))
call SetUnitVertexColor(udg_danwei2[181], 255, 255, 255, 100)
set udg_zhengshu2[161]=10
if ( ( udg_choose_ture[10] == true ) ) then
call StartTimerBJ(udg_MS[2], false, 0.00)
else
endif
call DestroyTimerDialog(udg_msck[0])
call StartTimerBJ(udg_MS[1], false, 5.00)
else
if ( ( udg_kzs[13] == 12 ) ) then
call StartTimerBJ(udg_jishiqi[136], false, 20.00)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call ShowUnit(udg_player[bj_forLoopAIndex], true)
set udg_point[8]=GetUnitLoc(udg_player[bj_forLoopAIndex])
call PanCameraToTimedLocForPlayer(s__baka_SPlayer(bj_forLoopAIndex - 1), udg_point[8], 0)
call SelectUnitForPlayerSingle(udg_player[bj_forLoopAIndex], s__baka_SPlayer(bj_forLoopAIndex - 1))
call RemoveLocation(udg_point[8])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call PlaySoundBJ(gg_snd_QuestNew)
call RemoveUnit(udg_danwei2[180])
call RemoveUnit(udg_danwei2[181])
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, "TRIGSTR_1541")
call ForGroupBJ(udg_danweizu[0], function Trig_lx1221122112Func002Func005Func003Func001Func015Func005Func003Func011Func015Func005Func002Func003Func007A)
call ForGroupBJ(udg_danweizu2[180], function Trig_lx1221122112Func002Func005Func003Func001Func015Func005Func003Func011Func015Func005Func002Func003Func008A)
else
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_lx1221122112 takes nothing returns nothing
set gg_trg_lx1221122112=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_lx1221122112, udg_MS[1])
call TriggerAddAction(gg_trg_lx1221122112, function Trig_lx1221122112Actions)
endfunction
function Trig_lx2112211221Func002Func005Func003Func001Func015Func005Func003Func011Func015Func005Func002Func003Func007A takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Trig_lx2112211221Func002Func005Func003Func001Func015Func005Func003Func011Func015Func005Func002Func003Func008A takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Trig_lx2112211221Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_kzs[13]=( udg_kzs[13] + 1 )
if ( ( udg_kzs[13] == 1 ) ) then
call SetUnitColor(udg_danwei2[180], ConvertPlayerColor(12))
call SetUnitColor(udg_danwei2[181], ConvertPlayerColor(12))
call SetUnitVertexColor(udg_danwei2[180], 255, 255, 255, 100)
call SetUnitVertexColor(udg_danwei2[181], 255, 255, 255, 100)
set udg_zhengshu2[161]=6
if ( ( udg_choose_ture[6] == true ) ) then
call StartTimerBJ(udg_MS[2], false, 0.00)
else
endif
call TimerDialogDisplay(udg_msck[0], false)
call StartTimerBJ(udg_MS[3], false, 1.00)
else
if ( ( udg_kzs[13] == 2 ) ) then
call PlaySoundBJ(gg_snd_Rescue)
call SetUnitVertexColor(udg_danwei2[180], 255, 255, 255, 255)
call SetUnitVertexColor(udg_danwei2[181], 255, 255, 255, 255)
call SetUnitColor(udg_danwei2[180], PLAYER_COLOR_RED)
call SetUnitColor(udg_danwei2[181], PLAYER_COLOR_BLUE)
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( ( "|cff009900玩家1：|r" + GetPlayerName(s__baka_SPlayer(0)) ) + "选择英雄——" ))
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( ( "|cff009900玩家2：|r" + GetPlayerName(s__baka_SPlayer(1)) ) + "选择英雄——" ))
set udg_choose_ture[1]=true
set udg_choose_ture[2]=true
call TimerDialogSetTitle(udg_msck[0], "TRIGSTR_1548")
call TimerDialogSetTitleColor(udg_msck[0], 0, 200, 0, 255)
call StartTimerBJ(udg_MS[3], false, 10.00)
call TimerDialogDisplay(udg_msck[0], true)
else
if ( ( udg_kzs[13] == 3 ) ) then
call SetUnitColor(udg_danwei2[180], ConvertPlayerColor(12))
call SetUnitColor(udg_danwei2[181], ConvertPlayerColor(12))
call SetUnitVertexColor(udg_danwei2[180], 255, 255, 255, 100)
call SetUnitVertexColor(udg_danwei2[181], 255, 255, 255, 100)
set udg_zhengshu2[161]=1
set udg_zhengshu2[180]=2
if ( ( udg_choose_ture[1] == true ) ) then
call StartTimerBJ(udg_MS[2], false, 0.00)
else
endif
if ( ( udg_choose_ture[2] == true ) ) then
call StartTimerBJ(udg_times[181], false, 0.00)
else
endif
call TimerDialogDisplay(udg_msck[0], false)
call StartTimerBJ(udg_MS[3], false, 1.00)
else
if ( ( udg_kzs[13] == 4 ) ) then
call PlaySoundBJ(gg_snd_Rescue)
call SetUnitVertexColor(udg_danwei2[180], 255, 255, 255, 255)
call SetUnitVertexColor(udg_danwei2[181], 255, 255, 255, 255)
call SetUnitColor(udg_danwei2[180], PLAYER_COLOR_GREEN)
call SetUnitColor(udg_danwei2[181], PLAYER_COLOR_PINK)
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( ( "|cff0075ff玩家7：|r" + GetPlayerName(s__baka_SPlayer(6)) ) + "选择英雄——" ))
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( ( "|cff0075ff玩家8：|r" + GetPlayerName(s__baka_SPlayer(7)) ) + "选择英雄——" ))
set udg_choose_ture[7]=true
set udg_choose_ture[8]=true
call TimerDialogSetTitle(udg_msck[0], "TRIGSTR_1549")
call TimerDialogSetTitleColor(udg_msck[0], 0, 150, 255, 255)
call StartTimerBJ(udg_MS[3], false, 10.00)
call TimerDialogDisplay(udg_msck[0], true)
else
if ( ( udg_kzs[13] == 5 ) ) then
call SetUnitColor(udg_danwei2[180], ConvertPlayerColor(12))
call SetUnitColor(udg_danwei2[181], ConvertPlayerColor(12))
call SetUnitVertexColor(udg_danwei2[180], 255, 255, 255, 100)
call SetUnitVertexColor(udg_danwei2[181], 255, 255, 255, 100)
set udg_zhengshu2[161]=7
set udg_zhengshu2[180]=8
if ( ( udg_choose_ture[7] == true ) ) then
call StartTimerBJ(udg_MS[2], false, 0.00)
else
endif
if ( ( udg_choose_ture[8] == true ) ) then
call StartTimerBJ(udg_times[181], false, 0.00)
else
endif
call TimerDialogDisplay(udg_msck[0], false)
call StartTimerBJ(udg_MS[3], false, 1.00)
else
if ( ( udg_kzs[13] == 6 ) ) then
call PlaySoundBJ(gg_snd_Rescue)
call SetUnitVertexColor(udg_danwei2[180], 255, 255, 255, 255)
call SetUnitVertexColor(udg_danwei2[181], 255, 255, 255, 255)
call SetUnitColor(udg_danwei2[180], PLAYER_COLOR_CYAN)
call SetUnitColor(udg_danwei2[181], PLAYER_COLOR_PURPLE)
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( ( "|cff009900玩家3：|r" + GetPlayerName(s__baka_SPlayer(2)) ) + "选择英雄——" ))
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( ( "|cff009900玩家4：|r" + GetPlayerName(s__baka_SPlayer(3)) ) + "选择英雄——" ))
set udg_choose_ture[3]=true
set udg_choose_ture[4]=true
call TimerDialogSetTitle(udg_msck[0], "TRIGSTR_1553")
call TimerDialogSetTitleColor(udg_msck[0], 0, 200, 0, 255)
call StartTimerBJ(udg_MS[3], false, 10.00)
call TimerDialogDisplay(udg_msck[0], true)
else
if ( ( udg_kzs[13] == 7 ) ) then
call SetUnitColor(udg_danwei2[180], ConvertPlayerColor(12))
call SetUnitColor(udg_danwei2[181], ConvertPlayerColor(12))
call SetUnitVertexColor(udg_danwei2[180], 255, 255, 255, 100)
call SetUnitVertexColor(udg_danwei2[181], 255, 255, 255, 100)
set udg_zhengshu2[161]=3
set udg_zhengshu2[180]=4
if ( ( udg_choose_ture[3] == true ) ) then
call StartTimerBJ(udg_MS[2], false, 0.00)
else
endif
if ( ( udg_choose_ture[4] == true ) ) then
call StartTimerBJ(udg_times[181], false, 0.00)
else
endif
call TimerDialogDisplay(udg_msck[0], false)
call StartTimerBJ(udg_MS[3], false, 1.00)
else
if ( ( udg_kzs[13] == 8 ) ) then
call PlaySoundBJ(gg_snd_Rescue)
call SetUnitVertexColor(udg_danwei2[180], 255, 255, 255, 255)
call SetUnitVertexColor(udg_danwei2[181], 255, 255, 255, 255)
call SetUnitColor(udg_danwei2[180], PLAYER_COLOR_LIGHT_GRAY)
call SetUnitColor(udg_danwei2[181], PLAYER_COLOR_LIGHT_BLUE)
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( ( "|cff0075ff玩家9：|r" + GetPlayerName(s__baka_SPlayer(8)) ) + "选择英雄——" ))
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( ( "|cff0075ff玩家10：|r" + GetPlayerName(s__baka_SPlayer(9)) ) + "选择英雄——" ))
set udg_choose_ture[9]=true
set udg_choose_ture[10]=true
call TimerDialogSetTitle(udg_msck[0], "TRIGSTR_1554")
call TimerDialogSetTitleColor(udg_msck[0], 0, 150, 255, 255)
call StartTimerBJ(udg_MS[3], false, 10.00)
call TimerDialogDisplay(udg_msck[0], true)
else
if ( ( udg_kzs[13] == 9 ) ) then
call SetUnitColor(udg_danwei2[180], ConvertPlayerColor(12))
call SetUnitColor(udg_danwei2[181], ConvertPlayerColor(12))
call SetUnitVertexColor(udg_danwei2[180], 255, 255, 255, 100)
call SetUnitVertexColor(udg_danwei2[181], 255, 255, 255, 100)
set udg_zhengshu2[161]=9
set udg_zhengshu2[180]=10
if ( ( udg_choose_ture[9] == true ) ) then
call StartTimerBJ(udg_MS[2], false, 0.00)
else
endif
if ( ( udg_choose_ture[10] == true ) ) then
call StartTimerBJ(udg_times[181], false, 0.00)
else
endif
call TimerDialogDisplay(udg_msck[0], false)
call StartTimerBJ(udg_MS[3], false, 1.00)
else
if ( ( udg_kzs[13] == 10 ) ) then
call PlaySoundBJ(gg_snd_Rescue)
call SetUnitColor(udg_danwei2[181], PLAYER_COLOR_YELLOW)
call SetUnitVertexColor(udg_danwei2[181], 255, 255, 255, 255)
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( ( "|cff009900玩家5：|r" + GetPlayerName(s__baka_SPlayer(4)) ) + "选择英雄——" ))
set udg_choose_ture[5]=true
call TimerDialogSetTitle(udg_msck[0], "TRIGSTR_1546")
call TimerDialogSetTitleColor(udg_msck[0], 0, 200, 0, 255)
call StartTimerBJ(udg_MS[3], false, 10.00)
call TimerDialogDisplay(udg_msck[0], true)
else
if ( ( udg_kzs[13] == 11 ) ) then
call SetUnitColor(udg_danwei2[181], ConvertPlayerColor(12))
call SetUnitVertexColor(udg_danwei2[181], 255, 255, 255, 100)
set udg_zhengshu2[161]=5
if ( ( udg_choose_ture[5] == true ) ) then
call StartTimerBJ(udg_MS[2], false, 0.00)
else
endif
call DestroyTimerDialog(udg_msck[0])
call StartTimerBJ(udg_MS[3], false, 5.00)
else
if ( ( udg_kzs[13] == 12 ) ) then
call StartTimerBJ(udg_jishiqi[136], false, 20.00)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call ShowUnit(udg_player[bj_forLoopAIndex], true)
set udg_point[8]=GetUnitLoc(udg_player[bj_forLoopAIndex])
call PanCameraToTimedLocForPlayer(s__baka_SPlayer(bj_forLoopAIndex - 1), udg_point[8], 0)
call SelectUnitForPlayerSingle(udg_player[bj_forLoopAIndex], s__baka_SPlayer(bj_forLoopAIndex - 1))
call RemoveLocation(udg_point[8])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call PlaySoundBJ(gg_snd_QuestNew)
call RemoveUnit(udg_danwei2[180])
call RemoveUnit(udg_danwei2[181])
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, "TRIGSTR_1545")
call ForGroupBJ(udg_danweizu[0], function Trig_lx2112211221Func002Func005Func003Func001Func015Func005Func003Func011Func015Func005Func002Func003Func007A)
call ForGroupBJ(udg_danweizu2[180], function Trig_lx2112211221Func002Func005Func003Func001Func015Func005Func003Func011Func015Func005Func002Func003Func008A)
else
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_lx2112211221 takes nothing returns nothing
set gg_trg_lx2112211221=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_lx2112211221, udg_MS[3])
call TriggerAddAction(gg_trg_lx2112211221, function Trig_lx2112211221Actions)
endfunction
function Trig_lx_random_1Actions takes nothing returns nothing
if ( true ) then
call PlaySoundBJ(gg_snd_BattleNetTick)
set udg_danwei[0]=GroupPickRandomUnit(udg_danweizu[0])
set udg_danwei2[0]=udg_danwei[0]
call ModifyHeroSkillPoints(udg_danwei2[0], bj_MODIFYMETHOD_SET, 1)
call UnitRemoveAbility(udg_danwei2[0], 0x416E6532)
set udg_a[GetUnitPointValue(udg_danwei2[0])]=true
call TriggerExecute(gg_trg_All_skills)
set udg_danwei2[0]=null
call GroupRemoveUnit(udg_danweizu[0], udg_danwei[0])
set udg_suijixuanren[( s__baka_SGetPlayerId(s__baka_SPlayer(udg_zhengshu2[161] - 1)) + 1 )]=udg_danwei[0]
set udg_point[8]=GetPlayerStartLocationLoc(s__baka_SPlayer(udg_zhengshu2[161] - 1))
call CreateNUnitsAtLoc(1, GetUnitTypeId(udg_danwei[0]), s__baka_SPlayer(udg_zhengshu2[161] - 1), udg_point[8], bj_UNIT_FACING)
set udg_player[( s__baka_SGetPlayerId(s__baka_SPlayer(udg_zhengshu2[161] - 1)) + 1 )]=bj_lastCreatedUnit
call InitPlayerHero(bj_lastCreatedUnit)
call TriggerRegisterUnitEvent(gg_trg_renyishanghai_hero, udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(bj_lastCreatedUnit)) + 1 )], EVENT_UNIT_DAMAGED)
call YDWEMultiboardSetItemIconBJNull(udg_duomianban[0] , 1 , ( ( s__baka_SGetPlayerId(GetOwningPlayer(bj_lastCreatedUnit)) + 1 ) + 1 ) , udg_touxiang[GetUnitPointValue(bj_lastCreatedUnit)])
if ( ( udg_zhengshu2[161] >= 1 ) and ( udg_zhengshu2[161] <= 5 ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( ( "|cff009900" + GetPlayerName(s__baka_SPlayer(udg_zhengshu2[161] - 1)) ) + ( "|r|cffff0000超时！|r自动|cff7575ff随机了|r " + GetHeroProperName(udg_danwei[0]) ) ))
set udg_dian2[0]=GetRectCenter(gg_rct_lunxuan_ww)
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], ( 135.00 * ( 3.00 - I2R(udg_zhengshu2[161]) ) ), 180.00)
else
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( ( "|cff0075ff" + GetPlayerName(s__baka_SPlayer(udg_zhengshu2[161] - 1)) ) + ( "|r|cffff0000超时！|r自动|cff7575ff随机了|r " + GetHeroProperName(udg_danwei[0]) ) ))
call SetUnitFacing(udg_danwei[0], 90.00)
set udg_dian2[0]=GetRectCenter(gg_rct_lunxuan_jd)
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], ( 135.00 * ( 8.00 - I2R(udg_zhengshu2[161]) ) ), 180.00)
endif
if ( ( udg_zhengshu2[161] == 1 ) ) then
call SetUnitColor(udg_danwei[0], PLAYER_COLOR_RED)
else
if ( ( udg_zhengshu2[161] == 2 ) ) then
call SetUnitColor(udg_danwei[0], PLAYER_COLOR_BLUE)
else
if ( ( udg_zhengshu2[161] == 3 ) ) then
call SetUnitColor(udg_danwei[0], PLAYER_COLOR_CYAN)
else
if ( ( udg_zhengshu2[161] == 4 ) ) then
call SetUnitColor(udg_danwei[0], PLAYER_COLOR_PURPLE)
else
if ( ( udg_zhengshu2[161] == 5 ) ) then
call SetUnitColor(udg_danwei[0], PLAYER_COLOR_YELLOW)
else
if ( ( udg_zhengshu2[161] == 6 ) ) then
call SetUnitColor(udg_danwei[0], PLAYER_COLOR_ORANGE)
else
if ( ( udg_zhengshu2[161] == 7 ) ) then
call SetUnitColor(udg_danwei[0], PLAYER_COLOR_GREEN)
else
if ( ( udg_zhengshu2[161] == 8 ) ) then
call SetUnitColor(udg_danwei[0], PLAYER_COLOR_PINK)
else
if ( ( udg_zhengshu2[161] == 9 ) ) then
call SetUnitColor(udg_danwei[0], PLAYER_COLOR_LIGHT_GRAY)
else
call SetUnitColor(udg_danwei[0], PLAYER_COLOR_LIGHT_BLUE)
endif
endif
endif
endif
endif
endif
endif
endif
endif
call SetPlayerName(s__baka_SPlayer(udg_zhengshu2[161] - 1), ( udg_Name[( s__baka_SGetPlayerId(s__baka_SPlayer(udg_zhengshu2[161] - 1)) + 1 )] + ( "（" + ( GetHeroProperName(udg_player[( s__baka_SGetPlayerId(s__baka_SPlayer(udg_zhengshu2[161] - 1)) + 1 )]) + "）" ) ) ))
set udg_choose_ture[( s__baka_SGetPlayerId(s__baka_SPlayer(udg_zhengshu2[161] - 1)) + 1 )]=false
call UnitAddAbility(udg_danwei[0], 0x416C6F63)
call GroupAddUnit(udg_danweizu2[180], udg_danwei[0])
call SetUnitPositionLoc(udg_danwei[0], udg_dian2[1])
call ShowUnit(udg_player[udg_zhengshu2[161]], false)
set udg_danwei[0]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_point[8])
else
endif
endfunction
function InitTrig_lx_random_1 takes nothing returns nothing
set gg_trg_lx_random_1=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_lx_random_1, udg_MS[2])
call TriggerAddAction(gg_trg_lx_random_1, function Trig_lx_random_1Actions)
endfunction
function Trig_lx_random_2Actions takes nothing returns nothing
if ( true ) then
call PlaySoundBJ(gg_snd_BattleNetTick)
set udg_danwei[0]=GroupPickRandomUnit(udg_danweizu[0])
set udg_danwei2[0]=udg_danwei[0]
call ModifyHeroSkillPoints(udg_danwei2[0], bj_MODIFYMETHOD_SET, 1)
call UnitRemoveAbility(udg_danwei2[0], 0x416E6532)
set udg_a[GetUnitPointValue(udg_danwei2[0])]=true
call TriggerExecute(gg_trg_All_skills)
set udg_danwei2[0]=null
call GroupRemoveUnit(udg_danweizu[0], udg_danwei[0])
set udg_suijixuanren[( s__baka_SGetPlayerId(s__baka_SPlayer(udg_zhengshu2[180] - 1)) + 1 )]=udg_danwei[0]
set udg_point[8]=GetPlayerStartLocationLoc(s__baka_SPlayer(udg_zhengshu2[180] - 1))
call CreateNUnitsAtLoc(1, GetUnitTypeId(udg_danwei[0]), s__baka_SPlayer(udg_zhengshu2[180] - 1), udg_point[8], bj_UNIT_FACING)
set udg_player[( s__baka_SGetPlayerId(s__baka_SPlayer(udg_zhengshu2[180] - 1)) + 1 )]=bj_lastCreatedUnit
call InitPlayerHero(bj_lastCreatedUnit)
call TriggerRegisterUnitEvent(gg_trg_renyishanghai_hero, udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(bj_lastCreatedUnit)) + 1 )], EVENT_UNIT_DAMAGED)
call YDWEMultiboardSetItemIconBJNull(udg_duomianban[0] , 1 , ( ( s__baka_SGetPlayerId(GetOwningPlayer(bj_lastCreatedUnit)) + 1 ) + 1 ) , udg_touxiang[GetUnitPointValue(bj_lastCreatedUnit)])
if ( ( udg_zhengshu2[180] >= 1 ) and ( udg_zhengshu2[180] <= 5 ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( ( "|cff009900" + GetPlayerName(s__baka_SPlayer(udg_zhengshu2[180] - 1)) ) + ( "|r|cffff0000超时！|r自动|cff7575ff随机了|r " + GetHeroProperName(udg_danwei[0]) ) ))
set udg_dian2[0]=GetRectCenter(gg_rct_lunxuan_ww)
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], ( 135.00 * ( 3.00 - I2R(udg_zhengshu2[180]) ) ), 180.00)
else
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( ( "|cff0075ff" + GetPlayerName(s__baka_SPlayer(udg_zhengshu2[180] - 1)) ) + ( "|r|cffff0000超时！|r自动|cff7575ff随机了|r " + GetHeroProperName(udg_danwei[0]) ) ))
call SetUnitFacing(udg_danwei[0], 90.00)
set udg_dian2[0]=GetRectCenter(gg_rct_lunxuan_jd)
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], ( 135.00 * ( 8.00 - I2R(udg_zhengshu2[180]) ) ), 180.00)
endif
if ( ( udg_zhengshu2[180] == 1 ) ) then
call SetUnitColor(udg_danwei[0], PLAYER_COLOR_RED)
else
if ( ( udg_zhengshu2[180] == 2 ) ) then
call SetUnitColor(udg_danwei[0], PLAYER_COLOR_BLUE)
else
if ( ( udg_zhengshu2[180] == 3 ) ) then
call SetUnitColor(udg_danwei[0], PLAYER_COLOR_CYAN)
else
if ( ( udg_zhengshu2[180] == 4 ) ) then
call SetUnitColor(udg_danwei[0], PLAYER_COLOR_PURPLE)
else
if ( ( udg_zhengshu2[180] == 5 ) ) then
call SetUnitColor(udg_danwei[0], PLAYER_COLOR_YELLOW)
else
if ( ( udg_zhengshu2[180] == 6 ) ) then
call SetUnitColor(udg_danwei[0], PLAYER_COLOR_ORANGE)
else
if ( ( udg_zhengshu2[180] == 7 ) ) then
call SetUnitColor(udg_danwei[0], PLAYER_COLOR_GREEN)
else
if ( ( udg_zhengshu2[180] == 8 ) ) then
call SetUnitColor(udg_danwei[0], PLAYER_COLOR_PINK)
else
if ( ( udg_zhengshu2[180] == 9 ) ) then
call SetUnitColor(udg_danwei[0], PLAYER_COLOR_LIGHT_GRAY)
else
call SetUnitColor(udg_danwei[0], PLAYER_COLOR_LIGHT_BLUE)
endif
endif
endif
endif
endif
endif
endif
endif
endif
call SetPlayerName(s__baka_SPlayer(udg_zhengshu2[180] - 1), ( udg_Name[( s__baka_SGetPlayerId(s__baka_SPlayer(udg_zhengshu2[180] - 1)) + 1 )] + ( "（" + ( GetHeroProperName(udg_player[( s__baka_SGetPlayerId(s__baka_SPlayer(udg_zhengshu2[180] - 1)) + 1 )]) + "）" ) ) ))
set udg_choose_ture[( s__baka_SGetPlayerId(s__baka_SPlayer(udg_zhengshu2[180] - 1)) + 1 )]=false
call UnitAddAbility(udg_danwei[0], 0x416C6F63)
call GroupAddUnit(udg_danweizu2[180], udg_danwei[0])
call SetUnitPositionLoc(udg_danwei[0], udg_dian2[1])
call ShowUnit(udg_player[udg_zhengshu2[180]], false)
set udg_danwei[0]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_point[8])
else
endif
endfunction
function InitTrig_lx_random_2 takes nothing returns nothing
set gg_trg_lx_random_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_lx_random_2, udg_times[181])
call TriggerAddAction(gg_trg_lx_random_2, function Trig_lx_random_2Actions)
endfunction
function Trig_lx_choose_heroConditions takes nothing returns boolean
return ( ( udg_zhengshu2[181] == 1 ) and ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true ) and ( GetOwningPlayer(GetTriggerUnit()) == s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE) ) and ( IsUnitInGroup(GetTriggerUnit(), udg_danweizu[0]) == true ) and ( RectContainsUnit(gg_rct_xuanren, GetTriggerUnit()) == true ) and ( udg_choose_ture[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )] == true ) )
endfunction
function Trig_lx_choose_heroFunc001Func001002001 takes nothing returns boolean
return ( ( GetFilterPlayer() == GetTriggerPlayer() ) )
endfunction
function Trig_lx_choose_heroFunc001Func004002001 takes nothing returns boolean
return ( ( GetFilterPlayer() == GetTriggerPlayer() ) )
endfunction
function Trig_lx_choose_heroActions takes nothing returns nothing
if ( ( GetTriggerUnit() == udg_hero_choose[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )] ) ) then
set udg_LINSHIWANJIAZU=YDWEGetPlayersMatchingNull(Condition(function Trig_lx_choose_heroFunc001Func001002001))
call ClearTextMessagesBJ(udg_LINSHIWANJIAZU)
call DestroyForce(udg_LINSHIWANJIAZU)
call StopSoundBJ(gg_snd_AutoCastButtonClick1, false)
call PlaySoundBJ(gg_snd_AutoCastButtonClick1)
set udg_danwei[0]=GetTriggerUnit()
set udg_danwei2[0]=udg_danwei[0]
call ModifyHeroSkillPoints(udg_danwei2[0], bj_MODIFYMETHOD_SET, 1)
call UnitRemoveAbility(udg_danwei2[0], 0x416E6532)
set udg_a[GetUnitPointValue(udg_danwei2[0])]=true
call TriggerExecute(gg_trg_All_skills)
set udg_danwei2[0]=null
call GroupRemoveUnit(udg_danweizu[0], udg_danwei[0])
set udg_suijixuanren[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )]=udg_danwei[0]
set udg_point[8]=GetPlayerStartLocationLoc(GetTriggerPlayer())
call CreateNUnitsAtLoc(1, GetUnitTypeId(udg_danwei[0]), GetTriggerPlayer(), udg_point[8], bj_UNIT_FACING)
set udg_player[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )]=bj_lastCreatedUnit
call InitPlayerHero(udg_player[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )])
call TriggerRegisterUnitEvent(gg_trg_renyishanghai_hero, udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(bj_lastCreatedUnit)) + 1 )], EVENT_UNIT_DAMAGED)
call YDWEMultiboardSetItemIconBJNull(udg_duomianban[0] , 1 , ( ( s__baka_SGetPlayerId(GetOwningPlayer(bj_lastCreatedUnit)) + 1 ) + 1 ) , udg_touxiang[GetUnitPointValue(bj_lastCreatedUnit)])
if ( ( ( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 ) <= 5 ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( ( "|cff009900" + GetPlayerName(GetTriggerPlayer()) ) + ( "|cff7575ff选择了|r" + GetHeroProperName(udg_danwei[0]) ) ))
set udg_dian2[0]=GetRectCenter(gg_rct_lunxuan_ww)
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], ( 135.00 * ( 3.00 - I2R(( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )) ) ), 180.00)
else
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( ( "|cff0075ff" + GetPlayerName(GetTriggerPlayer()) ) + ( "|cff7575ff选择了|r" + GetHeroProperName(udg_danwei[0]) ) ))
call SetUnitFacing(udg_danwei[0], 90.00)
set udg_dian2[0]=GetRectCenter(gg_rct_lunxuan_jd)
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], ( 135.00 * ( 8.00 - I2R(( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )) ) ), 180.00)
endif
if ( ( ( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 ) == 1 ) ) then
call SetUnitColor(udg_danwei[0], PLAYER_COLOR_RED)
else
if ( ( ( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 ) == 2 ) ) then
call SetUnitColor(udg_danwei[0], PLAYER_COLOR_BLUE)
else
if ( ( ( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 ) == 3 ) ) then
call SetUnitColor(udg_danwei[0], PLAYER_COLOR_CYAN)
else
if ( ( ( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 ) == 4 ) ) then
call SetUnitColor(udg_danwei[0], PLAYER_COLOR_PURPLE)
else
if ( ( ( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 ) == 5 ) ) then
call SetUnitColor(udg_danwei[0], PLAYER_COLOR_YELLOW)
else
if ( ( ( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 ) == 6 ) ) then
call SetUnitColor(udg_danwei[0], PLAYER_COLOR_ORANGE)
else
if ( ( ( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 ) == 7 ) ) then
call SetUnitColor(udg_danwei[0], PLAYER_COLOR_GREEN)
else
if ( ( ( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 ) == 8 ) ) then
call SetUnitColor(udg_danwei[0], PLAYER_COLOR_PINK)
else
if ( ( ( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 ) == 9 ) ) then
call SetUnitColor(udg_danwei[0], PLAYER_COLOR_LIGHT_GRAY)
else
call SetUnitColor(udg_danwei[0], PLAYER_COLOR_LIGHT_BLUE)
endif
endif
endif
endif
endif
endif
endif
endif
endif
call SetPlayerName(GetTriggerPlayer(), ( udg_Name[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )] + ( "（" + ( GetHeroProperName(udg_player[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )]) + "）" ) ) ))
set udg_choose_ture[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )]=false
call UnitAddAbility(udg_danwei[0], 0x416C6F63)
call GroupAddUnit(udg_danweizu2[180], udg_danwei[0])
call SetUnitPositionLoc(udg_danwei[0], udg_dian2[1])
call ShowUnit(udg_player[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )], false)
set udg_danwei[0]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_point[8])
else
set udg_LINSHIWANJIAZU=YDWEGetPlayersMatchingNull(Condition(function Trig_lx_choose_heroFunc001Func004002001))
call ClearTextMessagesBJ(udg_LINSHIWANJIAZU)
call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 30.00, udg_HeoZiFuChuan[GetUnitPointValue(GetTriggerUnit())])
call DestroyForce(udg_LINSHIWANJIAZU)
set udg_hero_choose[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )]=GetTriggerUnit()
call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 3.00, "TRIGSTR_534")
call YDWEPolledWaitNull(0.30)
set udg_hero_choose[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )]=null
endif
endfunction
function InitTrig_lx_choose_hero takes nothing returns nothing
set gg_trg_lx_choose_hero=CreateTrigger()
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_lx_choose_hero, s__baka_SPlayer(0), true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_lx_choose_hero, s__baka_SPlayer(1), true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_lx_choose_hero, s__baka_SPlayer(2), true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_lx_choose_hero, s__baka_SPlayer(3), true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_lx_choose_hero, s__baka_SPlayer(4), true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_lx_choose_hero, s__baka_SPlayer(5), true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_lx_choose_hero, s__baka_SPlayer(6), true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_lx_choose_hero, s__baka_SPlayer(7), true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_lx_choose_hero, s__baka_SPlayer(8), true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_lx_choose_hero, s__baka_SPlayer(9), true)
call TriggerAddCondition(gg_trg_lx_choose_hero, Condition(function Trig_lx_choose_heroConditions))
call TriggerAddAction(gg_trg_lx_choose_hero, function Trig_lx_choose_heroActions)
endfunction
function Trig_random_heroFunc003A takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Trig_random_heroActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call DisableTrigger(gg_trg_choose_hero)
call EnableTrigger(gg_trg_random_hero2)
call ForGroupBJ(udg_danweizu[0], function Trig_random_heroFunc003A)
set udg_randompoint[0]=GetRectCenter(gg_rct_yaoqingjuedou)
set udg_randomGroup[0]=CreateGroup()
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=12
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_randomhero[bj_forLoopAIndex]=GroupPickRandomUnit(udg_danweizu[0])
set udg_randompoint[bj_forLoopAIndex]=PolarProjectionBJ(udg_randompoint[0], 512.00, ( 30.00 * I2R(bj_forLoopAIndex) ))
call CreateNUnitsAtLocFacingLocBJ(1, GetUnitTypeId(udg_randomhero[bj_forLoopAIndex]), s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE), udg_randompoint[bj_forLoopAIndex], udg_randompoint[0])
call GroupAddUnit(udg_randomGroup[0], udg_randomhero[bj_forLoopAIndex])
call GroupRemoveUnitSimple(udg_randomhero[bj_forLoopAIndex], udg_danweizu[0])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call StartTimerBJ(udg_MS[0], false, 1.00)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_random_hero takes nothing returns nothing
set gg_trg_random_hero=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_random_hero, udg_MS[4])
call TriggerAddAction(gg_trg_random_hero, function Trig_random_heroActions)
endfunction
function Trig_random_hero2Conditions takes nothing returns boolean
return ( ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true ) and ( GetOwningPlayer(GetTriggerUnit()) == s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE) ) and ( IsUnitInGroup(GetTriggerUnit(), udg_randomGroup[0]) == true ) and ( RectContainsUnit(gg_rct_xuanren, GetTriggerUnit()) == true ) and ( udg_choose_ture[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )] == true ) )
endfunction
function Trig_random_hero2Actions takes nothing returns nothing
if ( ( GetTriggerUnit() == udg_hero_choose[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )] ) ) then
set udg_danwei2[0]=GetTriggerUnit()
set udg_a[GetUnitPointValue(udg_danwei2[0])]=true
call TriggerExecute(gg_trg_All_skills)
set udg_danwei2[0]=null
call YDWEMultiboardSetItemIconBJNull(udg_duomianban[0] , 1 , ( ( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 ) + 1 ) , udg_touxiang[GetUnitPointValue(GetTriggerUnit())])
call PanCameraToTimedLocForPlayer(GetTriggerPlayer(), GetPlayerStartLocationLoc(GetTriggerPlayer()), 0.50)
set udg_choose_ture[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )]=false
call SetUnitOwner(GetTriggerUnit(), GetTriggerPlayer(), true)
set udg_hero_choose[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )]=null
call SetUnitPositionLoc(GetTriggerUnit(), GetPlayerStartLocationLoc(GetOwningPlayer(GetTriggerUnit())))
set udg_player[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )]=GetTriggerUnit()
call ModifyHeroSkillPoints(GetTriggerUnit(), bj_MODIFYMETHOD_SET, 0)
call InitPlayerHero(udg_player[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )])
call QuestMessageBJ(GetPlayersAll(), bj_QUESTMESSAGE_UPDATED, ( GetPlayerName(GetTriggerPlayer()) + ( "|cFF0066FF选择了|r" + GetHeroProperName(GetTriggerUnit()) ) ))
call SetPlayerName(GetOwningPlayer(udg_player[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )]), ( GetPlayerName(GetTriggerPlayer()) + ( "（" + ( GetHeroProperName(GetTriggerUnit()) + "）" ) ) ))
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_player[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )]), 0x41303646, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_player[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )]), 0x41303648, false)
call SelectUnitForPlayerSingle(GetTriggerUnit(), GetTriggerPlayer())
call GroupRemoveUnit(udg_danweizu[0], GetTriggerUnit())
else
set udg_hero_choose[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )]=GetTriggerUnit()
call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 3.00, "TRIGSTR_8317")
call YDWEPolledWaitNull(0.30)
set udg_hero_choose[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )]=null
endif
endfunction
function InitTrig_random_hero2 takes nothing returns nothing
set gg_trg_random_hero2=CreateTrigger()
call DisableTrigger(gg_trg_random_hero2)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_random_hero2, s__baka_SPlayer(0), true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_random_hero2, s__baka_SPlayer(1), true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_random_hero2, s__baka_SPlayer(2), true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_random_hero2, s__baka_SPlayer(3), true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_random_hero2, s__baka_SPlayer(4), true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_random_hero2, s__baka_SPlayer(5), true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_random_hero2, s__baka_SPlayer(6), true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_random_hero2, s__baka_SPlayer(7), true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_random_hero2, s__baka_SPlayer(8), true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_random_hero2, s__baka_SPlayer(9), true)
call TriggerAddCondition(gg_trg_random_hero2, Condition(function Trig_random_hero2Conditions))
call TriggerAddAction(gg_trg_random_hero2, function Trig_random_hero2Actions)
endfunction
function Trig_duomianbanActions takes nothing returns nothing
if ( ( udg_zhengshu2[181] == 1 ) ) then
call StartTimerBJ(udg_jishiqi[99], false, 100.00)
set udg_Zhengshu[131]=119
else
call StartTimerBJ(udg_jishiqi[99], false, 40.00)
set udg_Zhengshu[131]=59
endif
call StartTimerBJ(udg_jishiqi[56], false, 600.00)
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED, "TRIGSTR_5831", "TRIGSTR_5834", "gasaiyono.blp")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED, "TRIGSTR_2628", "TRIGSTR_2629", "ganglian.blp")
call CreateQuestBJ(bj_QUESTTYPE_OPT_DISCOVERED, "TRIGSTR_1258", "TRIGSTR_1916", "xiaoyuan.blp")
call CreateQuestBJ(bj_QUESTTYPE_REQ_DISCOVERED, "TRIGSTR_2630", "TRIGSTR_2631", "tifatx.blp")
call CreateQuestBJ(bj_QUESTTYPE_REQ_DISCOVERED, "TRIGSTR_080", "TRIGSTR_082", "heluotx.blp")
call CreateQuestBJ(bj_QUESTTYPE_REQ_DISCOVERED, "TRIGSTR_3389", "TRIGSTR_3433", "paqiuli.blp")
set udg_touxiang[0]="saber.blp"
set udg_touxiang[1]="kailin.blp"
set udg_touxiang[2]="xiana.blp"
set udg_touxiang[3]="ReplaceableTextures\\CommandButtons\\BTNHeroTinker.blp"
set udg_touxiang[4]="Textures\\BTNHDK.blp"
set udg_touxiang[5]="tianshi.blp"
set udg_touxiang[6]="ReplaceableTextures\\CommandButtons\\BTNTheCaptain.blp"
set udg_touxiang[7]="ReplaceableTextures\\CommandButtons\\BTNGhostMage.blp"
set udg_touxiang[8]="ReplaceableTextures\\CommandButtons\\BTNJaina.blp"
set udg_touxiang[9]="ReplaceableTextures\\CommandButtons\\BTNSylvanusWindrunner.blp"
set udg_touxiang[10]="ReplaceableTextures\\CommandButtons\\BTNArthas.blp"
set udg_touxiang[11]="ReplaceableTextures\\CommandButtons\\BTNGarithos.blp"
set udg_touxiang[12]="dly.blp"
set udg_touxiang[13]="nvcike.blp"
set udg_touxiang[14]="tifatx.blp"
set udg_touxiang[15]="ReplaceableTextures\\CommandButtons\\BTNAbomination.blp"
set udg_touxiang[16]="yubanmeiqin.blp"
set udg_touxiang[17]="heluotx.blp"
set udg_touxiang[18]="kelaodetx.blp"
set udg_touxiang[19]="ganglian.blp"
set udg_touxiang[20]="yanmoai.blp"
set udg_touxiang[21]="keleniluo.blp"
set udg_touxiang[22]="shiliuyexiaoye.blp"
set udg_touxiang[23]="heiqiyihu.blp"
set udg_touxiang[24]="baijignheizi.blp"
set udg_touxiang[25]="rxqs.blp"
set udg_touxiang[26]="leimiliya.blp"
set udg_touxiang[27]="yftx.blp"
set udg_touxiang[28]="ReplaceableTextures\\CommandButtons\\BTNLichVersion2.blp"
set udg_touxiang[29]="paqiuli.blp"
set udg_touxiang[30]="linalitx.blp"
set udg_touxiang[31]="lihuazoutx.blp"
set udg_touxiang[32]="nazitx.blp"
set udg_touxiang[33]="ReplaceableTextures\\CommandButtons\\BTNFelGuardBlue.blp"
set udg_touxiang[34]="slfs.blp"
set udg_touxiang[35]="gasaiyono.blp"
set udg_touxiang[36]="fatetx.blp"
set udg_touxiang[37]="xiaoyuan.blp"
set udg_touxiang[38]="kuangsan.blp"
set udg_touxiang[39]="sanli.blp"
set udg_touxiang[100]="lvxinbing.blp"
set udg_touxiang[101]="lvyongshi.blp"
set udg_touxiang[102]="lvzhanshi.blp"
set udg_touxiang[103]="lvqishi.blp"
set udg_touxiang[104]="lvqishiwang.blp"
set udg_touxiang[105]="lvzhanshen.blp"
set udg_touxiang[106]="lvjiushizhu.blp"
set udg_touxiang[110]="lanxinbing.blp"
set udg_touxiang[111]="lanyongshi.blp"
set udg_touxiang[112]="lanzhanshi.blp"
set udg_touxiang[113]="lanqishi.blp"
set udg_touxiang[114]="lanqishiwang.blp"
set udg_touxiang[115]="lanzhanshen.blp"
set udg_touxiang[116]="lanjiushizhu.blp"
set udg_Hexadecimal[0]="0"
set udg_Hexadecimal[1]="1"
set udg_Hexadecimal[2]="2"
set udg_Hexadecimal[3]="3"
set udg_Hexadecimal[4]="4"
set udg_Hexadecimal[5]="5"
set udg_Hexadecimal[6]="6"
set udg_Hexadecimal[7]="7"
set udg_Hexadecimal[8]="8"
set udg_Hexadecimal[9]="9"
set udg_Hexadecimal[10]="a"
set udg_Hexadecimal[11]="b"
set udg_Hexadecimal[12]="c"
set udg_Hexadecimal[13]="d"
set udg_Hexadecimal[14]="e"
set udg_Hexadecimal[15]="f"
set udg_Color[30]="|cFF0066FF全|r|cFF006EEE明|r|cFF0077DD星|r|cFF0080CC战|r|cFF0088BB役|r|cffffff002.5|r"
call CreateMultiboardBJ(9, 13, udg_Color[30])
set udg_duomianban[0]=bj_lastCreatedMultiboard
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 1 , 1 , udg_Color[30])
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 2 , 1 , "TRIGSTR_2636")
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 3 , 1 , "TRIGSTR_2637")
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 4 , 1 , "TRIGSTR_2638")
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 5 , 1 , "TRIGSTR_2639")
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 6 , 1 , "TRIGSTR_2640")
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 7 , 1 , "TRIGSTR_2641")
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 8 , 1 , "TRIGSTR_1139")
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 9 , 1 , "TRIGSTR_3075")
call MultiboardSetItemsWidth(udg_duomianban[0], 0.04)
call MultiboardSetItemStyle(MultiboardGetItem(udg_duomianban[0], 0, 0), true, false)
call MultiboardSetItemStyle(MultiboardGetItem(udg_duomianban[0], 11, 0), true, false)
call MultiboardSetItemStyle(MultiboardGetItem(udg_duomianban[0], 12, 0), true, false)
call StartTimerBJ(udg_Times[131], true, 1.00)
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 1 , 13 , ( "|cffffddaa游戏开始剩余时间：|r|cffff9900 " + ( I2S(udg_Zhengshu[131]) + " |r|cffffddaa秒|r " ) ))
set bj_forLoopAIndex=0
set bj_forLoopAIndexEnd=12
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_duomianbanxm[( 0 + bj_forLoopAIndex )]=MultiboardGetItem(udg_duomianban[0], bj_forLoopAIndex, 0)
set udg_duomianbanxm[( 20 + bj_forLoopAIndex )]=MultiboardGetItem(udg_duomianban[0], bj_forLoopAIndex, 1)
set udg_duomianbanxm[( 40 + bj_forLoopAIndex )]=MultiboardGetItem(udg_duomianban[0], bj_forLoopAIndex, 2)
set udg_duomianbanxm[( 60 + bj_forLoopAIndex )]=MultiboardGetItem(udg_duomianban[0], bj_forLoopAIndex, 3)
set udg_duomianbanxm[( 80 + bj_forLoopAIndex )]=MultiboardGetItem(udg_duomianban[0], bj_forLoopAIndex, 4)
set udg_duomianbanxm[( 100 + bj_forLoopAIndex )]=MultiboardGetItem(udg_duomianban[0], bj_forLoopAIndex, 5)
set udg_duomianbanxm[( 120 + bj_forLoopAIndex )]=MultiboardGetItem(udg_duomianban[0], bj_forLoopAIndex, 6)
set udg_duomianbanxm[( 140 + bj_forLoopAIndex )]=MultiboardGetItem(udg_duomianban[0], bj_forLoopAIndex, 7)
set udg_duomianbanxm[( 160 + bj_forLoopAIndex )]=MultiboardGetItem(udg_duomianban[0], bj_forLoopAIndex, 8)
call YDWEMultiboardSetItemWidthBJNull(udg_duomianban[0] , 1 , bj_forLoopAIndex , 9.00)
call MultiboardSetItemStyle(MultiboardGetItem(udg_duomianban[0], bj_forLoopAIndex, 1), true, false)
call YDWEMultiboardSetItemWidthBJNull(udg_duomianban[0] , 2 , bj_forLoopAIndex , 3.00)
call MultiboardSetItemStyle(MultiboardGetItem(udg_duomianban[0], bj_forLoopAIndex, 2), true, false)
call YDWEMultiboardSetItemWidthBJNull(udg_duomianban[0] , 3 , bj_forLoopAIndex , 2.60)
call MultiboardSetItemStyle(MultiboardGetItem(udg_duomianban[0], bj_forLoopAIndex, 3), true, false)
call YDWEMultiboardSetItemWidthBJNull(udg_duomianban[0] , 4 , bj_forLoopAIndex , 2.20)
call MultiboardSetItemStyle(MultiboardGetItem(udg_duomianban[0], bj_forLoopAIndex, 4), true, false)
call YDWEMultiboardSetItemWidthBJNull(udg_duomianban[0] , 5 , bj_forLoopAIndex , 1.60)
call MultiboardSetItemStyle(MultiboardGetItem(udg_duomianban[0], bj_forLoopAIndex, 5), true, false)
call YDWEMultiboardSetItemWidthBJNull(udg_duomianban[0] , 6 , bj_forLoopAIndex , 1.60)
call MultiboardSetItemStyle(MultiboardGetItem(udg_duomianban[0], bj_forLoopAIndex, 6), true, false)
call YDWEMultiboardSetItemWidthBJNull(udg_duomianban[0] , 7 , bj_forLoopAIndex , 1.60)
call MultiboardSetItemStyle(MultiboardGetItem(udg_duomianban[0], bj_forLoopAIndex, 7), true, false)
call YDWEMultiboardSetItemWidthBJNull(udg_duomianban[0] , 8 , bj_forLoopAIndex , 1.90)
call MultiboardSetItemStyle(MultiboardGetItem(udg_duomianban[0], bj_forLoopAIndex, 8), true, false)
call YDWEMultiboardSetItemWidthBJNull(udg_duomianban[0] , 9 , bj_forLoopAIndex , 3.30)
call MultiboardSetItemStyle(MultiboardGetItem(udg_duomianban[0], bj_forLoopAIndex, 9), true, false)
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ( ( bj_forLoopAIndex <= 5 ) ) then
if ( ( GetPlayerSlotState(s__baka_SPlayer(bj_forLoopAIndex - 1)) != PLAYER_SLOT_STATE_EMPTY ) ) then
call YDWEMultiboardSetItemIconBJNull(udg_duomianban[0] , 1 , ( bj_forLoopAIndex + 1 ) , "ReplaceableTextures\\CommandButtons\\BTNSelectHeroOn.blp")
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 2 , ( bj_forLoopAIndex + 1 ) , "TRIGSTR_3337")
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 4 , ( bj_forLoopAIndex + 1 ) , "TRIGSTR_3348")
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 5 , ( bj_forLoopAIndex + 1 ) , "TRIGSTR_3350")
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 6 , ( bj_forLoopAIndex + 1 ) , "TRIGSTR_3381")
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 7 , ( bj_forLoopAIndex + 1 ) , "TRIGSTR_3382")
call MultiboardSetItemStyle(MultiboardGetItem(udg_duomianban[0], bj_forLoopAIndex, 8), true, true)
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 8 , ( bj_forLoopAIndex + 1 ) , "TRIGSTR_4850")
call YDWEMultiboardSetItemIconBJNull(udg_duomianban[0] , 9 , ( bj_forLoopAIndex + 1 ) , udg_touxiang[100])
if ( ( GetPlayerSlotState(s__baka_SPlayer(bj_forLoopAIndex - 1)) == PLAYER_SLOT_STATE_LEFT ) ) then
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 1 , ( bj_forLoopAIndex + 1 ) , ( "|cff00ff40○|r" + ( ( udg_Color[11] + udg_Name[bj_forLoopAIndex] ) + "|r" ) ))
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 3 , ( bj_forLoopAIndex + 1 ) , "TRIGSTR_3489")
call QuestMessageBJ(GetPlayersAll(), bj_QUESTMESSAGE_UPDATED, ( GetPlayerName(s__baka_SPlayer(bj_forLoopAIndex - 1)) + "|cffff0000秒退了游戏，节操掉了一地|r" ))
else
if ( ( GetPlayerController(s__baka_SPlayer(bj_forLoopAIndex - 1)) == MAP_CONTROL_USER ) ) then
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 1 , ( bj_forLoopAIndex + 1 ) , ( "|cff00ff40●|r" + ( ( udg_Color[bj_forLoopAIndex] + udg_Name[bj_forLoopAIndex] ) + "|r" ) ))
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 3 , ( bj_forLoopAIndex + 1 ) , "TRIGSTR_3088")
else
if ( ( GetPlayerController(s__baka_SPlayer(bj_forLoopAIndex - 1)) == MAP_CONTROL_COMPUTER ) ) then
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 1 , ( bj_forLoopAIndex + 1 ) , ( "|cff00ff40◎|r" + ( ( udg_Color[bj_forLoopAIndex] + udg_Color[22] ) + "|r" ) ))
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 3 , ( bj_forLoopAIndex + 1 ) , "TRIGSTR_3159")
else
endif
endif
endif
else
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 1 , ( bj_forLoopAIndex + 1 ) , ( "|cff00ff40○|r" + ( ( udg_Color[11] + "" ) + "|r" ) ))
call YDWEMultiboardSetItemIconBJNull(udg_duomianban[0] , 1 , ( bj_forLoopAIndex + 1 ) , "ReplaceableTextures\\CommandButtons\\BTNCancel.blp")
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 3 , ( bj_forLoopAIndex + 1 ) , "TRIGSTR_3400")
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 4 , ( bj_forLoopAIndex + 1 ) , "TRIGSTR_3401")
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 5 , ( bj_forLoopAIndex + 1 ) , "TRIGSTR_3402")
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 6 , ( bj_forLoopAIndex + 1 ) , "TRIGSTR_3403")
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 7 , ( bj_forLoopAIndex + 1 ) , "TRIGSTR_3404")
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 8 , ( bj_forLoopAIndex + 1 ) , "TRIGSTR_4854")
set udg_kzs[bj_forLoopAIndex]=- 1
endif
else
if ( ( GetPlayerSlotState(s__baka_SPlayer(bj_forLoopAIndex - 1)) != PLAYER_SLOT_STATE_EMPTY ) ) then
call YDWEMultiboardSetItemIconBJNull(udg_duomianban[0] , 1 , ( bj_forLoopAIndex + 1 ) , "ReplaceableTextures\\CommandButtons\\BTNSelectHeroOn.blp")
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 2 , ( bj_forLoopAIndex + 1 ) , "TRIGSTR_3491")
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 4 , ( bj_forLoopAIndex + 1 ) , "TRIGSTR_3447")
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 5 , ( bj_forLoopAIndex + 1 ) , "TRIGSTR_3472")
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 6 , ( bj_forLoopAIndex + 1 ) , "TRIGSTR_3487")
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 7 , ( bj_forLoopAIndex + 1 ) , "TRIGSTR_3488")
call MultiboardSetItemStyle(MultiboardGetItem(udg_duomianban[0], bj_forLoopAIndex, 8), true, true)
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 8 , ( bj_forLoopAIndex + 1 ) , "TRIGSTR_1140")
call YDWEMultiboardSetItemIconBJNull(udg_duomianban[0] , 9 , ( bj_forLoopAIndex + 1 ) , udg_touxiang[110])
if ( ( GetPlayerSlotState(s__baka_SPlayer(bj_forLoopAIndex - 1)) == PLAYER_SLOT_STATE_LEFT ) ) then
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 1 , ( bj_forLoopAIndex + 1 ) , ( "|cff00ffff○|r" + ( ( udg_Color[11] + udg_Name[bj_forLoopAIndex] ) + "|r" ) ))
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 3 , ( bj_forLoopAIndex + 1 ) , "TRIGSTR_3492")
call QuestMessageBJ(GetPlayersAll(), bj_QUESTMESSAGE_UPDATED, ( GetPlayerName(s__baka_SPlayer(bj_forLoopAIndex - 1)) + "|cffff0000秒退了游戏，节操掉了一地|r" ))
else
if ( ( GetPlayerController(s__baka_SPlayer(bj_forLoopAIndex - 1)) == MAP_CONTROL_USER ) ) then
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 1 , ( bj_forLoopAIndex + 1 ) , ( "|cff00ffff●|r" + ( ( udg_Color[bj_forLoopAIndex] + udg_Name[bj_forLoopAIndex] ) + "|r" ) ))
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 3 , ( bj_forLoopAIndex + 1 ) , "TRIGSTR_3331")
else
if ( ( GetPlayerController(s__baka_SPlayer(bj_forLoopAIndex - 1)) == MAP_CONTROL_COMPUTER ) ) then
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 1 , ( bj_forLoopAIndex + 1 ) , ( "|cff00ffff◎|r" + ( ( udg_Color[bj_forLoopAIndex] + udg_Color[22] ) + "|r" ) ))
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 3 , ( bj_forLoopAIndex + 1 ) , "TRIGSTR_3160")
else
endif
endif
endif
else
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 1 , ( bj_forLoopAIndex + 1 ) , ( "|cff00ffff○|r" + ( ( udg_Color[11] + "" ) + "|r" ) ))
call YDWEMultiboardSetItemIconBJNull(udg_duomianban[0] , 1 , ( bj_forLoopAIndex + 1 ) , "ReplaceableTextures\\CommandButtons\\BTNCancel.blp")
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 3 , ( bj_forLoopAIndex + 1 ) , "TRIGSTR_3405")
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 4 , ( bj_forLoopAIndex + 1 ) , "TRIGSTR_3411")
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 5 , ( bj_forLoopAIndex + 1 ) , "TRIGSTR_3412")
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 6 , ( bj_forLoopAIndex + 1 ) , "TRIGSTR_3444")
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 7 , ( bj_forLoopAIndex + 1 ) , "TRIGSTR_3445")
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 8 , ( bj_forLoopAIndex + 1 ) , "TRIGSTR_1141")
set udg_kzs[bj_forLoopAIndex]=- 1
endif
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call MultiboardSetTitleText(udg_duomianban[0], udg_Color[30])
call MultiboardDisplay(udg_duomianban[0], false)
call MultiboardDisplay(udg_duomianban[0], true)
call EnableTrigger(gg_trg_duomianban6_exe)
endfunction
function InitTrig_duomianban takes nothing returns nothing
set gg_trg_duomianban=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_duomianban, udg_jishiqi[28])
call TriggerAddAction(gg_trg_duomianban, function Trig_duomianbanActions)
endfunction
function Trig_youxikaishiActions takes nothing returns nothing
if ( ( udg_Zhengshu[131] > 0 ) ) then
set udg_Zhengshu[131]=( udg_Zhengshu[131] - 1 )
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 1 , 13 , ( "|cffffddaa游戏开始剩余时间：|r|cffff9900 " + ( I2S(udg_Zhengshu[131]) + " |r|cffffddaa秒|r " ) ))
else
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_test_djcs))
call DestroyTrigger(gg_trg_test_djcs)
call PauseTimer(udg_Times[131])
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 1 , 13 , "TRIGSTR_6279")
call StartTimerBJ(udg_youxixitong[0], true, 0.33)
call StartTimerBJ(udg_youxixitong[1], true, 1.00)
call StartTimerBJ(udg_youxixitong[2], true, 480.00)
call StartTimerBJ(udg_youxixitong[3], true, 30.00)
call StartTimerBJ(udg_youxixitong[4], true, 60.00)
call StartTimerBJ(udg_youxixitong[5], false, 600.00)
call StartTimerBJ(udg_youxixitong[6], true, 240.00)
call StartTimerBJ(udg_youxixitong[7], true, 360.00)
call StartTimerBJ(udg_times[179], false, 1200.00)
call TriggerExecute(gg_trg_zhizhu_1)
call TriggerExecute(gg_trg_juxiong)
set udg_GameStart=true
endif
endfunction
function InitTrig_youxikaishi takes nothing returns nothing
set gg_trg_youxikaishi=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_youxikaishi, udg_Times[131])
call TriggerAddAction(gg_trg_youxikaishi, function Trig_youxikaishiActions)
endfunction
function Trig_game_timeActions takes nothing returns nothing
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call AdjustPlayerStateBJ(1, s__baka_SPlayer(bj_forLoopAIndex - 1), PLAYER_STATE_RESOURCE_FOOD_USED)
if ( ( GetPlayerState(s__baka_SPlayer(bj_forLoopAIndex - 1), PLAYER_STATE_RESOURCE_FOOD_USED) >= 60 ) ) then
call SetPlayerStateBJ(s__baka_SPlayer(bj_forLoopAIndex - 1), PLAYER_STATE_RESOURCE_FOOD_USED, 0)
call AdjustPlayerStateBJ(1, s__baka_SPlayer(bj_forLoopAIndex - 1), PLAYER_STATE_RESOURCE_LUMBER)
else
endif
if ( ( udg_player[bj_forLoopAIndex] != null ) and ( IsUnitType(udg_player[bj_forLoopAIndex], UNIT_TYPE_DEAD) == false ) and ( GetPlayerController(s__baka_SPlayer(bj_forLoopAIndex - 1)) != MAP_CONTROL_COMPUTER ) and ( GetPlayerSlotState(s__baka_SPlayer(bj_forLoopAIndex - 1)) != PLAYER_SLOT_STATE_EMPTY ) and ( GetPlayerSlotState(s__baka_SPlayer(bj_forLoopAIndex - 1)) != PLAYER_SLOT_STATE_LEFT ) ) then
set udg_guaji[bj_forLoopAIndex]=( udg_guaji[bj_forLoopAIndex] + 1 )
if ( ( udg_guaji[bj_forLoopAIndex] == 180 ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( ( udg_Color[bj_forLoopAIndex] + ( GetPlayerName(s__baka_SPlayer(bj_forLoopAIndex - 1)) + "|r" ) ) + ( "已经挂机了|cffffcc00" + ( "3|r分钟" ) ) ))
else
endif
if ( ( udg_guaji[bj_forLoopAIndex] == 300 ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( ( udg_Color[bj_forLoopAIndex] + ( GetPlayerName(s__baka_SPlayer(bj_forLoopAIndex - 1)) + "|r" ) ) + ( "已经挂机了|cffffcc00" + ( "5|r分钟，可输入|cffffcc00-kick|r指令将其踢出游戏" ) ) ))
else
endif
if ( ( udg_guaji[bj_forLoopAIndex] == 600 ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( ( udg_Color[bj_forLoopAIndex] + ( GetPlayerName(s__baka_SPlayer(bj_forLoopAIndex - 1)) + "|r" ) ) + ( "已经挂机了|cffffcc00" + ( "10|r分钟，实在是太恶劣了！可输入|cffffcc00-kick|r指令将其踢出游戏" ) ) ))
else
endif
else
endif
if ( ( udg_player[bj_forLoopAIndex] != null ) ) then
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_player[bj_forLoopAIndex] , 0x49303139)) == true ) ) then
call SetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_player[bj_forLoopAIndex] , 0x49303139), IMinBJ(( GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_player[bj_forLoopAIndex] , 0x49303139)) + 1 ), 50))
else
endif
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
endfunction
function InitTrig_game_time takes nothing returns nothing
set gg_trg_game_time=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_game_time, udg_youxixitong[1])
call TriggerAddAction(gg_trg_game_time, function Trig_game_timeActions)
endfunction
function Trig_kick_playerActions takes nothing returns nothing
if ( ( ( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 ) <= 5 ) ) then
set udg_zhengshuex[1]=0
set udg_zhengshuex[0]=1
loop
exitwhen udg_zhengshuex[0] > 5
if ( ( udg_guaji[udg_zhengshuex[0]] >= 300 ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( ( udg_Color[udg_zhengshuex[0]] + ( GetPlayerName(s__baka_SPlayer(udg_zhengshuex[0] - 1)) + "|r" ) ) + ( "正在游戏中|cffff0000挂机|r，将在|cffffcc00" + ( "10|r秒后如无队友反对，将被踢出游戏（反对请输入|cffffcc00-C|r）" ) ) ))
set udg_zhengshuex[1]=( udg_zhengshuex[1] + 1 )
else
endif
set udg_zhengshuex[0]=udg_zhengshuex[0] + 1
endloop
if ( ( udg_zhengshuex[1] > 0 ) ) then
call DestroyTimerDialog(udg_PKchuangkou[1])
call StartTimerBJ(udg_FH[21], false, 10.00)
call CreateTimerDialogBJ(GetLastCreatedTimerBJ(), "TRIGSTR_7955")
set udg_PKchuangkou[1]=GetLastCreatedTimerDialogBJ()
else
endif
else
if ( ( ( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 ) >= 6 ) and ( ( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 ) <= 10 ) ) then
set udg_zhengshuex[1]=0
set udg_zhengshuex[0]=6
loop
exitwhen udg_zhengshuex[0] > 10
if ( ( udg_guaji[udg_zhengshuex[0]] >= 300 ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( ( udg_Color[udg_zhengshuex[0]] + ( GetPlayerName(s__baka_SPlayer(udg_zhengshuex[0] - 1)) + "|r" ) ) + ( "正在游戏中|cffff0000挂机|r，将在|cffffcc00" + ( "10|r秒后如无队友反对，将被踢出游戏（反对请输入|cffffcc00-C|r）" ) ) ))
set udg_zhengshuex[1]=( udg_zhengshuex[1] + 1 )
else
endif
set udg_zhengshuex[0]=udg_zhengshuex[0] + 1
endloop
if ( ( udg_zhengshuex[1] > 0 ) ) then
call DestroyTimerDialog(udg_PKchuangkou[2])
call StartTimerBJ(udg_FH[22], false, 10.00)
call CreateTimerDialogBJ(GetLastCreatedTimerBJ(), "TRIGSTR_7957")
set udg_PKchuangkou[2]=GetLastCreatedTimerDialogBJ()
else
endif
else
endif
endif
endfunction
function InitTrig_kick_player takes nothing returns nothing
set gg_trg_kick_player=CreateTrigger()
call TriggerAddAction(gg_trg_kick_player, function Trig_kick_playerActions)
endfunction
function Trig_kick_cancelActions takes nothing returns nothing
if ( ( ( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 ) <= 5 ) ) then
call PauseTimer(udg_FH[21])
call DestroyTimerDialog(udg_PKchuangkou[1])
else
if ( ( ( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 ) >= 6 ) and ( ( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 ) <= 10 ) ) then
call PauseTimer(udg_FH[22])
call DestroyTimerDialog(udg_PKchuangkou[2])
else
endif
endif
endfunction
function InitTrig_kick_cancel takes nothing returns nothing
set gg_trg_kick_cancel=CreateTrigger()
call TriggerAddAction(gg_trg_kick_cancel, function Trig_kick_cancelActions)
endfunction
function Trig_kick_1Actions takes nothing returns nothing
set udg_zhengshuex[0]=1
loop
exitwhen udg_zhengshuex[0] > 5
if ( ( udg_guaji[udg_zhengshuex[0]] >= 300 ) ) then
call RemovePlayer(s__baka_SPlayer(udg_zhengshuex[0] - 1), PLAYER_GAME_RESULT_DEFEAT)
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 1 , ( ( s__baka_SGetPlayerId(s__baka_SPlayer(udg_zhengshuex[0] - 1)) + 1 ) + 1 ) , ( "|cff00ff00○|r" + ( ( udg_Color[( s__baka_SGetPlayerId(s__baka_SPlayer(udg_zhengshuex[0] - 1)) + 1 )] + udg_Name[( s__baka_SGetPlayerId(s__baka_SPlayer(udg_zhengshuex[0] - 1)) + 1 )] ) + "|r" ) ))
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 3 , ( ( s__baka_SGetPlayerId(s__baka_SPlayer(udg_zhengshuex[0] - 1)) + 1 ) + 1 ) , "TRIGSTR_4960")
call UnitRemoveAbility(udg_SmD[( s__baka_SGetPlayerId(s__baka_SPlayer(udg_zhengshuex[0] - 1)) + 1 )], 0x41304C58)
call ShareEverythingWithTeam(s__baka_SPlayer(udg_zhengshuex[0] - 1))
call MultiboardDisplay(udg_duomianban[0], true)
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( ( udg_Color[udg_zhengshuex[0]] + ( GetPlayerName(s__baka_SPlayer(udg_zhengshuex[0] - 1)) + "|r" ) ) + "已被踢出游戏" ))
else
endif
set udg_zhengshuex[0]=udg_zhengshuex[0] + 1
endloop
call DestroyTimerDialog(udg_PKchuangkou[1])
endfunction
function InitTrig_kick_1 takes nothing returns nothing
set gg_trg_kick_1=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_kick_1, udg_FH[21])
call TriggerAddAction(gg_trg_kick_1, function Trig_kick_1Actions)
endfunction
function Trig_kick_2Actions takes nothing returns nothing
set udg_zhengshuex[0]=6
loop
exitwhen udg_zhengshuex[0] > 10
if ( ( udg_guaji[udg_zhengshuex[0]] >= 300 ) ) then
call RemovePlayer(s__baka_SPlayer(udg_zhengshuex[0] - 1), PLAYER_GAME_RESULT_DEFEAT)
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 1 , ( ( s__baka_SGetPlayerId(s__baka_SPlayer(udg_zhengshuex[0] - 1)) + 1 ) + 1 ) , ( "|cff00ffff○|r" + ( ( udg_Color[( s__baka_SGetPlayerId(s__baka_SPlayer(udg_zhengshuex[0] - 1)) + 1 )] + udg_Name[( s__baka_SGetPlayerId(s__baka_SPlayer(udg_zhengshuex[0] - 1)) + 1 )] ) + "|r" ) ))
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 3 , ( ( s__baka_SGetPlayerId(s__baka_SPlayer(udg_zhengshuex[0] - 1)) + 1 ) + 1 ) , "TRIGSTR_8305")
call UnitRemoveAbility(udg_SmD[( s__baka_SGetPlayerId(s__baka_SPlayer(udg_zhengshuex[0] - 1)) + 1 )], 0x41304C58)
call ShareEverythingWithTeam(s__baka_SPlayer(udg_zhengshuex[0] - 1))
call MultiboardDisplay(udg_duomianban[0], true)
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( ( udg_Color[udg_zhengshuex[0]] + ( GetPlayerName(s__baka_SPlayer(udg_zhengshuex[0] - 1)) + "|r" ) ) + "已被踢出游戏" ))
else
endif
set udg_zhengshuex[0]=udg_zhengshuex[0] + 1
endloop
call DestroyTimerDialog(udg_PKchuangkou[2])
endfunction
function InitTrig_kick_2 takes nothing returns nothing
set gg_trg_kick_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_kick_2, udg_FH[22])
call TriggerAddAction(gg_trg_kick_2, function Trig_kick_2Actions)
endfunction
function Trig_game_moneyActions takes nothing returns nothing
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call AdjustPlayerStateBJ(1, s__baka_SPlayer(bj_forLoopAIndex - 1), PLAYER_STATE_RESOURCE_GOLD)
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
endfunction
function InitTrig_game_money takes nothing returns nothing
set gg_trg_game_money=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_game_money, udg_youxixitong[0])
call TriggerAddAction(gg_trg_game_money, function Trig_game_moneyActions)
endfunction
function Trig_game_gangshaoConditions takes nothing returns boolean
return ( ( udg_Points == - 1 ) )
endfunction
function Trig_game_gangshaoActions takes nothing returns nothing
if ( ( IsUnitAliveBJ(gg_unit_hhou_0121) == true ) ) then
set udg_dian2[0]=GetUnitLoc(gg_unit_n018_0125)
call CreateItemLoc(0x49303343, udg_dian2[0])
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=5
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call DisplayTimedTextToPlayer(s__baka_SPlayer(bj_forLoopAIndex - 1), 0, 0, 15.00, "TRIGSTR_7904")
set udg_wanjiazu[0]=YDWEGetForceOfPlayerNull(s__baka_SPlayer(bj_forLoopAIndex - 1))
call PingMinimapLocForForce(udg_wanjiazu[0], udg_dian2[0], 3.00)
call DestroyForce(udg_wanjiazu[0])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call RemoveLocation(udg_dian2[0])
else
endif
if ( ( IsUnitAliveBJ(gg_unit_hhou_0060) == true ) ) then
set udg_dian2[0]=GetUnitLoc(gg_unit_n018_0122)
call CreateItemLoc(0x49303343, udg_dian2[0])
set bj_forLoopAIndex=6
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call DisplayTimedTextToPlayer(s__baka_SPlayer(bj_forLoopAIndex - 1), 0, 0, 15.00, "TRIGSTR_7914")
set udg_wanjiazu[0]=YDWEGetForceOfPlayerNull(s__baka_SPlayer(bj_forLoopAIndex - 1))
call PingMinimapLocForForce(udg_wanjiazu[0], udg_dian2[0], 3.00)
call DestroyForce(udg_wanjiazu[0])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call RemoveLocation(udg_dian2[0])
else
endif
endfunction
function InitTrig_game_gangshao takes nothing returns nothing
set gg_trg_game_gangshao=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_game_gangshao, udg_youxixitong[6])
call TriggerAddCondition(gg_trg_game_gangshao, Condition(function Trig_game_gangshaoConditions))
call TriggerAddAction(gg_trg_game_gangshao, function Trig_game_gangshaoActions)
endfunction
function Trig_game_gangshao_2Conditions takes nothing returns boolean
return ( ( udg_Points == - 1 ) )
endfunction
function Trig_game_gangshao_2Actions takes nothing returns nothing
if ( ( IsUnitAliveBJ(gg_unit_hhou_0121) == true ) ) then
set udg_dian2[0]=GetUnitLoc(gg_unit_n018_0125)
call CreateItemLoc(0x49303344, udg_dian2[0])
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=5
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call DisplayTimedTextToPlayer(s__baka_SPlayer(bj_forLoopAIndex - 1), 0, 0, 15.00, "TRIGSTR_7915")
set udg_wanjiazu[0]=YDWEGetForceOfPlayerNull(s__baka_SPlayer(bj_forLoopAIndex - 1))
call PingMinimapLocForForce(udg_wanjiazu[0], udg_dian2[0], 3.00)
call DestroyForce(udg_wanjiazu[0])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call RemoveLocation(udg_dian2[0])
else
endif
if ( ( IsUnitAliveBJ(gg_unit_hhou_0060) == true ) ) then
set udg_dian2[0]=GetUnitLoc(gg_unit_n018_0122)
call CreateItemLoc(0x49303344, udg_dian2[0])
set bj_forLoopAIndex=6
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call DisplayTimedTextToPlayer(s__baka_SPlayer(bj_forLoopAIndex - 1), 0, 0, 15.00, "TRIGSTR_7916")
set udg_wanjiazu[0]=YDWEGetForceOfPlayerNull(s__baka_SPlayer(bj_forLoopAIndex - 1))
call PingMinimapLocForForce(udg_wanjiazu[0], udg_dian2[0], 3.00)
call DestroyForce(udg_wanjiazu[0])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call RemoveLocation(udg_dian2[0])
else
endif
endfunction
function InitTrig_game_gangshao_2 takes nothing returns nothing
set gg_trg_game_gangshao_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_game_gangshao_2, udg_youxixitong[7])
call TriggerAddCondition(gg_trg_game_gangshao_2, Condition(function Trig_game_gangshao_2Conditions))
call TriggerAddAction(gg_trg_game_gangshao_2, function Trig_game_gangshao_2Actions)
endfunction
function Trig_shuabignActions takes nothing returns nothing
call EnableTrigger(gg_trg_zs)
call StartTimerBJ(udg_jishiqi[60], false, 20.00)
if ( ( udg_Points > - 1 ) ) then
call DisableTrigger(gg_trg_Extra)
if ( ( udg_Points == 100 ) ) then
call StartTimerBJ(udg_times[172], true, 0.60)
call PlaySoundBJ(gg_snd_Tension)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call DisplayTimedTextToPlayer(s__baka_SPlayer(bj_forLoopAIndex - 1), 0, 0, 10.00, "TRIGSTR_1319")
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
set udg_zhengshu2[172]=0
else
call PlaySoundBJ(gg_snd_Doom)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call DisplayTimedTextToPlayer(s__baka_SPlayer(bj_forLoopAIndex - 1), 0, 0, 10.00, "TRIGSTR_1327")
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
endif
if ( ( ( GetPlayerController(s__baka_SPlayer(1)) == MAP_CONTROL_COMPUTER ) or ( GetPlayerSlotState(s__baka_SPlayer(1)) == PLAYER_SLOT_STATE_EMPTY ) ) and ( ( GetPlayerController(s__baka_SPlayer(2)) == MAP_CONTROL_COMPUTER ) or ( GetPlayerSlotState(s__baka_SPlayer(2)) == PLAYER_SLOT_STATE_EMPTY ) ) and ( ( GetPlayerController(s__baka_SPlayer(3)) == MAP_CONTROL_COMPUTER ) or ( GetPlayerSlotState(s__baka_SPlayer(3)) == PLAYER_SLOT_STATE_EMPTY ) ) and ( ( GetPlayerController(s__baka_SPlayer(4)) == MAP_CONTROL_COMPUTER ) or ( GetPlayerSlotState(s__baka_SPlayer(4)) == PLAYER_SLOT_STATE_EMPTY ) ) and ( ( GetPlayerController(s__baka_SPlayer(5)) == MAP_CONTROL_COMPUTER ) or ( GetPlayerSlotState(s__baka_SPlayer(5)) == PLAYER_SLOT_STATE_EMPTY ) ) and ( ( GetPlayerController(s__baka_SPlayer(6)) == MAP_CONTROL_COMPUTER ) or ( GetPlayerSlotState(s__baka_SPlayer(6)) == PLAYER_SLOT_STATE_EMPTY ) ) and ( ( GetPlayerController(s__baka_SPlayer(7)) == MAP_CONTROL_COMPUTER ) or ( GetPlayerSlotState(s__baka_SPlayer(7)) == PLAYER_SLOT_STATE_EMPTY ) ) and ( ( GetPlayerController(s__baka_SPlayer(8)) == MAP_CONTROL_COMPUTER ) or ( GetPlayerSlotState(s__baka_SPlayer(8)) == PLAYER_SLOT_STATE_EMPTY ) ) and ( ( GetPlayerController(s__baka_SPlayer(9)) == MAP_CONTROL_COMPUTER ) or ( GetPlayerSlotState(s__baka_SPlayer(9)) == PLAYER_SLOT_STATE_EMPTY ) ) ) then
set udg_dian2[0]=GetRectCenter(gg_rct_FMH)
call CreateNUnitsAtLoc(1, 0x65303355, s__baka_SPlayer(0), udg_dian2[0], bj_UNIT_FACING)
call CreateNUnitsAtLoc(1, 0x65303356, s__baka_SPlayer(11), udg_dian2[0], bj_UNIT_FACING)
call DisplayTimedTextToPlayer(s__baka_SPlayer(0), 0, 0, 10.00, "TRIGSTR_1175")
call RemoveLocation(udg_dian2[0])
else
endif
else
endif
set udg_FS=0
set udg_FSDL=0
set udg_DHK1[1]=( "|cff00ff40复苏：(" + ( I2S(udg_FS) + ( ")|r VS |cff00ffff极寒：(" + ( I2S(udg_FSDL) + ")|r" ) ) ) )
call MultiboardSetTitleText(udg_duomianban[0], ( udg_DHK1[0] + ( udg_DHK1[1] + udg_DHK1[2] ) ))
endfunction
function InitTrig_shuabign takes nothing returns nothing
set gg_trg_shuabign=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_shuabign, udg_jishiqi[99])
call TriggerAddAction(gg_trg_shuabign, function Trig_shuabignActions)
endfunction
function Trig_mijijinzhiConditions takes nothing returns boolean
return ( ( GetUnitTypeId(GetDyingUnit()) == 0x65303356 ) )
endfunction
function Trig_mijijinzhiActions takes nothing returns nothing
call CustomDefeatBJ(s__baka_SPlayer(0), "TRIGSTR_1176")
endfunction
function InitTrig_mijijinzhi takes nothing returns nothing
set gg_trg_mijijinzhi=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_mijijinzhi, EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gg_trg_mijijinzhi, Condition(function Trig_mijijinzhiConditions))
call TriggerAddAction(gg_trg_mijijinzhi, function Trig_mijijinzhiActions)
endfunction
function Trig_duomianban2_deathActions takes nothing returns nothing
set udg_danwei[136]=GetDyingUnit()
if ( ( IsUnitType(udg_danwei[136], UNIT_TYPE_HERO) == true ) and ( GetUnitTypeId(udg_danwei[136]) != 0x4F303030 ) ) then
if ( ( udg_zhengshu[( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) + 19 )] >= 10 ) and ( udg_zhengshu[( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) - 1 )] <= 1 ) ) then
call DisplayTimedTextToPlayer(GetOwningPlayer(GetDyingUnit()), 0, 0, 15.00, "TRIGSTR_283")
else
endif
set udg_zhengshu[( ( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 ) - 1 )]=( udg_zhengshu[( ( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 ) - 1 )] + 1 )
call MultiboardSetItemValue(udg_duomianbanxm[( 100 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetTriggerUnit())) + 1 ) )], I2S(udg_zhengshu[( - 1 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetTriggerUnit())) + 1 ) )]))
else
endif
set udg_danwei[136]=null
endfunction
function InitTrig_duomianban2_death takes nothing returns nothing
set gg_trg_duomianban2_death=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_duomianban2_death, EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(gg_trg_duomianban2_death, function Trig_duomianban2_deathActions)
endfunction
function Trig_duomianban3_untilConditions takes nothing returns boolean
return ( ( IsUnitType(GetDyingUnit(), UNIT_TYPE_HERO) == false ) and ( GetKillingUnitBJ() != null ) )
endfunction
function Trig_duomianban3_untilFunc001Func001Func001Func020A takes nothing returns nothing
if ( ( GetItemUserData(GetEnumItem()) >= 1 ) and ( GetItemUserData(GetEnumItem()) <= 10 ) ) then
call SetItemPositionLoc(GetEnumItem(), udg_Dian[11])
else
endif
endfunction
function Trig_duomianban3_untilActions takes nothing returns nothing
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) <= 10 ) and ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) < 1 ) or ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) > 10 ) ) ) then
if ( ( IsUnitEnemy(GetKillingUnitBJ(), GetOwningPlayer(GetDyingUnit())) == true ) ) then
set udg_zhengshu[( 9 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) )]=( udg_zhengshu[( 9 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) )] + 1 )
call MultiboardSetItemValue(udg_duomianbanxm[( 60 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) )], I2S(udg_zhengshu[( 9 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) )]))
else
endif
if ( ( IsUnitEnemy(GetKillingUnitBJ(), GetOwningPlayer(GetDyingUnit())) == true ) ) then
if ( ( ( GetUnitTypeId(GetDyingUnit()) == 0x68726966 ) or ( GetUnitTypeId(GetDyingUnit()) == 0x68666F6F ) or ( GetUnitTypeId(GetDyingUnit()) == 0x68737074 ) ) ) then
set udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]=( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] + 5 )
else
if ( ( GetUnitTypeId(GetDyingUnit()) == 0x686B6E69 ) ) then
set udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]=( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] + 6 )
else
if ( ( GetUnitTypeId(GetDyingUnit()) == 0x686D696C ) ) then
set udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]=( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] + 4 )
else
if ( ( GetUnitTypeId(GetDyingUnit()) == 0x686D746D ) ) then
set udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]=( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] + 9 )
else
if ( ( GetUnitTypeId(GetDyingUnit()) == 0x6E303034 ) ) then
set udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]=( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] + 8 )
else
if ( ( GetUnitTypeId(GetDyingUnit()) == 0x6E303143 ) ) then
set udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]=( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] + 3 )
else
if ( ( GetUnitTypeId(GetDyingUnit()) == 0x6E303142 ) ) then
set udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]=( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] + 3 )
else
if ( ( GetUnitTypeId(GetDyingUnit()) == 0x6E303045 ) ) then
set udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]=( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] + 6 )
else
if ( ( GetUnitTypeId(GetDyingUnit()) == 0x6E303044 ) ) then
set udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]=( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] + 8 )
else
if ( ( GetUnitTypeId(GetDyingUnit()) == 0x6E706C67 ) ) then
set udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]=( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] + 15 )
else
if ( ( GetUnitTypeId(GetDyingUnit()) == 0x6E62616E ) ) then
set udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]=( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] + 2 )
else
if ( ( GetUnitTypeId(GetDyingUnit()) == 0x686D7474 ) ) then
set udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]=( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] + 20 )
else
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
else
set udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]=( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] + 4 )
set udg_Dian[10]=GetUnitLoc(GetDyingUnit())
call CreateTextTagLocBJ("TRIGSTR_3762", udg_Dian[10], 0, 10.00, 60.00, 60.00, 60.00, 0.00)
call SetTextTagVelocity(bj_lastCreatedTextTag, 0.00, 0.03)
call SetTextTagPermanent(bj_lastCreatedTextTag, false)
call SetTextTagFadepoint(bj_lastCreatedTextTag, 1.00)
call SetTextTagLifespan(bj_lastCreatedTextTag, 2.00)
call RemoveLocation(udg_Dian[10])
endif
else
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) <= 10 ) and ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) >= 1 ) or ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) <= 10 ) ) and ( IsUnitEnemy(GetKillingUnitBJ(), GetOwningPlayer(GetDyingUnit())) == true ) ) then
if ( ( ( GetUnitTypeId(GetDyingUnit()) == 0x6E303039 ) or ( GetUnitTypeId(GetDyingUnit()) == 0x6E303038 ) ) ) then
set udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]=( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] + 30 )
call AdjustPlayerStateBJ(( ( 50 + ( 15 * GetUnitLevel(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )]) ) ) + 0 ), GetOwningPlayer(GetKillingUnitBJ()), PLAYER_STATE_RESOURCE_GOLD)
call DisplayTimedTextToPlayer(GetOwningPlayer(GetKillingUnitBJ()), 0, 0, 15.00, ( "打爆一个奇怪的东西，掉落了|cffffdd00" + ( ( I2S(( 50 + ( 15 * GetUnitLevel(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )]) ) )) + "" ) + "|r金币（节操币）好开心啊0v0" ) ))
call DisplayTimedTextToPlayer(GetOwningPlayer(GetDyingUnit()), 0, 0, 15.00, "TRIGSTR_3429")
set udg_Dian[10]=GetUnitLoc(GetDyingUnit())
call CreateTextTagLocBJ(( "+" + I2S(R2I(( ( 50.00 + ( 15.00 * I2R(GetUnitLevel(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )])) ) ) * 1.00 ))) ), udg_Dian[10], 0, 10.00, 100.00, 86.66, 0.00, 0.00)
call SetTextTagVelocity(bj_lastCreatedTextTag, 0.00, 0.03)
call SetTextTagPermanent(bj_lastCreatedTextTag, false)
call SetTextTagFadepoint(bj_lastCreatedTextTag, 2.00)
call SetTextTagLifespan(bj_lastCreatedTextTag, 3.00)
call SetTextTagVisibility(bj_lastCreatedTextTag, false)
set udg_wanjiazu[0]=CreateForce()
call ForceAddPlayer(udg_wanjiazu[0], s__baka_SPlayer(( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) - 1))
call ShowTextTagForceBJ(true, bj_lastCreatedTextTag, udg_wanjiazu[0])
call DestroyForce(udg_wanjiazu[0])
set udg_Dian[11]=GetUnitLoc(udg_SmD[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )])
set udg_quyu[0]=RectFromCenterSizeBJ(udg_Dian[10], 200.00, 200.00)
call EnumItemsInRectBJ(udg_quyu[0], function Trig_duomianban3_untilFunc001Func001Func001Func020A)
call RemoveRect(udg_quyu[0])
call RemoveLocation(udg_Dian[10])
call RemoveLocation(udg_Dian[11])
else
if ( ( ( GetUnitTypeId(GetDyingUnit()) == 0x6F657965 ) or ( GetUnitTypeId(GetDyingUnit()) == 0x6E776164 ) ) ) then
set udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]=( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] + 15 )
else
endif
endif
else
endif
endif
endfunction
function InitTrig_duomianban3_until takes nothing returns nothing
set gg_trg_duomianban3_until=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_duomianban3_until, EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gg_trg_duomianban3_until, Condition(function Trig_duomianban3_untilConditions))
call TriggerAddAction(gg_trg_duomianban3_until, function Trig_duomianban3_untilActions)
endfunction
function Trig_duomianban4_heroActions takes nothing returns nothing
if ( ( GetKillingUnitBJ() != null ) and ( IsUnitType(GetDyingUnit(), UNIT_TYPE_HERO) == true ) and ( GetUnitTypeId(GetDyingUnit()) != 0x48303032 ) and ( GetUnitTypeId(GetDyingUnit()) != 0x4F303030 ) and ( IsUnitEnemy(GetKillingUnitBJ(), GetOwningPlayer(GetDyingUnit())) == true ) ) then
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) <= 10 ) ) then
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) <= 5 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) >= 6 ) ) then
set udg_zhugong[( ( 5 * ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) - 1 ) ) + ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) - 5 ) )]=15
else
endif
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) >= 6 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) <= 5 ) ) then
set udg_zhugong[( ( 5 * ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) - 1 ) ) + ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) - 0 ) )]=15
else
endif
set udg_zhengshu[( 19 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) )]=( udg_zhengshu[( 19 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) )] + 1 )
call MultiboardSetItemValue(udg_duomianbanxm[( 80 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) )], I2S(udg_zhengshu[( 19 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) )]))
if ( ( udg_shangjin[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] < 70 ) ) then
set udg_shangjin[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]=IMinBJ(( udg_shangjin[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] + 15 ), 200)
call MultiboardSetItemValue(udg_duomianbanxm[( 140 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) )], ( "|cffffdd00" + ( I2S(udg_shangjin[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]) + "%|r" ) ))
else
set udg_shangjin[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]=IMinBJ(( udg_shangjin[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] + 10 ), 200)
call MultiboardSetItemValue(udg_duomianbanxm[( 140 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) )], ( "|cffffdd00" + ( I2S(udg_shangjin[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]) + "%|r" ) ))
endif
set udg_kill[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]=( udg_kill[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] + 1 )
set udg_kill[( ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) + 10 )]=10
set udg_Dian[10]=GetUnitLoc(GetDyingUnit())
set udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]=( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] + R2I(( 100.00 * ( ( I2R(udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )]) + 500.00 ) / ( I2R(udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )]) + 500.00 ) ) )) )
if ( ( udg_kill[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] == 1 ) ) then
call CreateTextTagLocBJ("TRIGSTR_7703", udg_Dian[10], 50.00, 15.00, 100.00, 100.00, 100.00, 0)
else
if ( ( udg_kill[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] == 2 ) ) then
call CreateTextTagLocBJ("TRIGSTR_7702", udg_Dian[10], 50.00, 16.00, 100.00, 50.00, 0.00, 0)
set udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]=( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] + 25 )
else
if ( ( udg_kill[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] == 3 ) ) then
call CreateTextTagLocBJ("TRIGSTR_7701", udg_Dian[10], 50.00, 17.00, 100.00, 0.00, 0.00, 0)
set udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]=( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] + 50 )
else
if ( ( udg_kill[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] == 4 ) ) then
call CreateTextTagLocBJ("TRIGSTR_7668", udg_Dian[10], 50.00, 18.00, 100.00, 0.00, 50.00, 0)
set udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]=( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] + 100 )
else
if ( ( udg_kill[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] == 5 ) ) then
set udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]=( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] + 200 )
call CreateTextTagLocBJ("TRIGSTR_7640", udg_Dian[10], 50.00, 18.00, 100.00, 0.00, 100.00, 0)
else
set udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]=( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] + 100 )
call CreateTextTagLocBJ("TRIGSTR_7633", udg_Dian[10], 50.00, 19.00, 50.00, 0.00, 100.00, 0)
endif
endif
endif
endif
endif
call SetTextTagVelocity(bj_lastCreatedTextTag, 0.00, 0.05)
call SetTextTagPermanent(bj_lastCreatedTextTag, false)
call SetTextTagFadepoint(bj_lastCreatedTextTag, 0.50)
call SetTextTagLifespan(bj_lastCreatedTextTag, 0.70)
call RemoveLocation(udg_Dian[10])
else
endif
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) >= 6 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) <= 10 ) ) then
set udg_shuju[0]=0.00
set udg_zhengshuex[5]=1
loop
exitwhen udg_zhengshuex[5] > 5
set udg_shuju[0]=( udg_shuju[0] + udg_shuju[( ( 5 * ( udg_zhengshuex[5] - 1 ) ) + ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) - 5 ) )] )
set udg_zhengshuex[5]=udg_zhengshuex[5] + 1
endloop
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) <= 10 ) ) then
set udg_shuju[( ( 5 * ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) - 1 ) ) + ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) - 5 ) )]=( udg_shuju[( ( 5 * ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) - 1 ) ) + ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) - 5 ) )] + ( udg_shuju[0] * 0.25 ) )
set udg_shuju[0]=( udg_shuju[0] * 1.25 )
set udg_zhengshuex[0]=0
set udg_zhengshuex[5]=1
loop
exitwhen udg_zhengshuex[5] > 5
if ( ( udg_zhugong[( ( 5 * ( udg_zhengshuex[5] - 1 ) ) + ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) - 5 ) )] > 0 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) != udg_zhengshuex[5] ) ) then
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 1 )
else
endif
set udg_zhengshuex[5]=udg_zhengshuex[5] + 1
endloop
if ( ( udg_zhengshuex[0] == 0 ) ) then
set udg_Color[0]=( "|cff009900" + ( GetPlayerName(GetOwningPlayer(GetKillingUnitBJ())) + ( "|r将|cff0075ff" + ( GetPlayerName(GetOwningPlayer(GetDyingUnit())) + ( "|r单杀！|cffffdd00(+" + ( I2S(R2I(( ( ( ( 100.00 + ( 10.00 * I2R(GetHeroLevel(GetDyingUnit())) ) ) * ( I2R(udg_shangjin[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )]) / 100.00 ) ) + ( 50.00 + ( 5.00 * I2R(GetHeroLevel(GetDyingUnit())) ) ) ) + ( ( 100.00 + ( 10.00 * I2R(GetUnitLevel(GetDyingUnit())) ) ) * ( udg_shuju[( ( 5 * ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) - 1 ) ) + ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) - 5 ) )] / udg_shuju[0] ) ) ))) + ")|r" ) ) ) ) ) )
else
set udg_Color[0]=( "|cff009900" + ( GetPlayerName(GetOwningPlayer(GetKillingUnitBJ())) + ( "|r将|cff0075ff" + ( GetPlayerName(GetOwningPlayer(GetDyingUnit())) + ( "|r击杀|cffffdd00(+" + ( I2S(R2I(( ( ( ( 100.00 + ( 10.00 * I2R(GetHeroLevel(GetDyingUnit())) ) ) * ( I2R(udg_shangjin[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )]) / 100.00 ) ) + ( 50.00 + ( 5.00 * I2R(GetHeroLevel(GetDyingUnit())) ) ) ) + ( ( 100.00 + ( 10.00 * I2R(GetUnitLevel(GetDyingUnit())) ) ) * ( udg_shuju[( ( 5 * ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) - 1 ) ) + ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) - 5 ) )] / udg_shuju[0] ) ) ))) + ")|r" ) ) ) ) ) )
set udg_zhengshuex[0]=0
set udg_zhengshuex[5]=1
loop
exitwhen udg_zhengshuex[5] > 5
if ( ( udg_zhugong[( ( 5 * ( udg_zhengshuex[5] - 1 ) ) + ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) - 5 ) )] > 0 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) != udg_zhengshuex[5] ) ) then
set udg_Color[0]=( udg_Color[0] + ( udg_Color[udg_zhengshuex[5]] + ( GetPlayerName(s__baka_SPlayer(udg_zhengshuex[5] - 1)) + ( "|r|cffffdd00(+" + ( "" + ( I2S(R2I(( ( ( ( 100.00 + ( 10.00 * I2R(GetHeroLevel(GetDyingUnit())) ) ) * ( I2R(udg_shangjin[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )]) / 100.00 ) ) + ( 50.00 + ( 5.00 * I2R(GetHeroLevel(GetDyingUnit())) ) ) ) + ( ( 100.00 + ( 10.00 * I2R(GetUnitLevel(GetDyingUnit())) ) ) * ( udg_shuju[( ( 5 * udg_zhengshuex[5] ) + ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) - 5 ) )] / udg_shuju[0] ) ) ))) + ")|r" ) ) ) ) ) )
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 1 )
else
endif
set udg_zhengshuex[5]=udg_zhengshuex[5] + 1
endloop
if ( ( udg_zhengshuex[0] < 4 ) ) then
set udg_Color[0]=( udg_Color[0] + ( "，其余队友|cffffdd00(+" + ( "" + ( "" + ( "" + ( I2S(R2I(( ( 100.00 + ( 10.00 * I2R(GetUnitLevel(GetDyingUnit())) ) ) * ( I2R(udg_shangjin[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )]) / 100.00 ) ))) + ")|r" ) ) ) ) ) )
else
endif
endif
call DisplayTimedTextToForce(GetPlayersAll(), 15.00, udg_Color[0])
if ( ( udg_kill[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] > 1 ) ) then
if ( ( udg_kill[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] == 2 ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 15.00, ( "|cff009900" + ( GetPlayerName(GetOwningPlayer(GetKillingUnitBJ())) + "|r进行了一次 |cffff8000双杀|r 威武~" ) ))
else
if ( ( udg_kill[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] == 3 ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 15.00, ( "|cff009900" + ( GetPlayerName(GetOwningPlayer(GetKillingUnitBJ())) + "|r进行了一次 |cffff0000三连杀！|r 太猛了吧！" ) ))
else
if ( ( udg_kill[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] == 4 ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 15.00, ( "|cff009900" + ( GetPlayerName(GetOwningPlayer(GetKillingUnitBJ())) + "|r进行了一次 |cffff0080四连杀！！|r 不可思议！！" ) ))
else
if ( ( udg_kill[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] == 5 ) ) then
set udg_Savior[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]=1
call DisplayTimedTextToForce(GetPlayersAll(), 15.00, ( "|cff009900" + ( GetPlayerName(GetOwningPlayer(GetKillingUnitBJ())) + "|r进行了一次 |cffff00ff五连杀！！！|r 团灭？太容易了！都是浮云！" ) ))
else
set udg_Savior[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]=1
call DisplayTimedTextToForce(GetPlayersAll(), 15.00, ( "|cff009900" + ( GetPlayerName(GetOwningPlayer(GetKillingUnitBJ())) + "|r进行了一次 |cff8000ff？？？连杀！！！|r 神马？你确定你没开外挂？！！！！！" ) ))
endif
endif
endif
endif
else
endif
else
if ( ( GetOwningPlayer(GetKillingUnitBJ()) == s__baka_SPlayer(10) ) ) then
set udg_zhengshuex[0]=0
set udg_zhengshuex[5]=1
loop
exitwhen udg_zhengshuex[5] > 5
if ( ( udg_zhugong[( ( 5 * ( udg_zhengshuex[5] - 1 ) ) + ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) - 5 ) )] > 0 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) != udg_zhengshuex[5] ) ) then
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 1 )
else
endif
set udg_zhengshuex[5]=udg_zhengshuex[5] + 1
endloop
if ( ( udg_zhengshuex[0] == 0 ) ) then
set udg_Color[0]=( "|cff009900" + ( "万物复苏" + ( "|r将|cff0075ff" + ( GetPlayerName(GetOwningPlayer(GetDyingUnit())) + ( "|r击杀了！而且没人助攻有木有！这是在恶意卖萌啊！每人领走他|cffffdd00" + ( I2S(R2I(( ( 100.00 + ( 10.00 * I2R(GetUnitLevel(GetDyingUnit())) ) ) * ( I2R(udg_shangjin[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )]) / 100.00 ) ))) + "|r元的福利~" ) ) ) ) ) )
else
set udg_Color[0]=( "|cff009900" + ( "万物复苏" + ( "|r将|cff0075ff" + ( GetPlayerName(GetOwningPlayer(GetDyingUnit())) + ( "|r的人头补刀了，助攻：" ) ) ) ) )
set udg_zhengshuex[0]=0
set udg_zhengshuex[5]=1
loop
exitwhen udg_zhengshuex[5] > 5
if ( ( udg_zhugong[( ( 5 * ( udg_zhengshuex[5] - 1 ) ) + ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) - 5 ) )] > 0 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) != udg_zhengshuex[5] ) ) then
set udg_Color[0]=( udg_Color[0] + ( udg_Color[udg_zhengshuex[5]] + ( GetPlayerName(s__baka_SPlayer(udg_zhengshuex[5] - 1)) + ( "|r|cffffdd00(+" + ( "" + ( I2S(R2I(( ( ( ( 100.00 + ( 10.00 * I2R(GetHeroLevel(GetDyingUnit())) ) ) * ( I2R(udg_shangjin[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )]) / 100.00 ) ) + ( 50.00 + ( 5.00 * I2R(GetHeroLevel(GetDyingUnit())) ) ) ) + ( ( 100.00 + ( 10.00 * I2R(GetUnitLevel(GetDyingUnit())) ) ) * ( udg_shuju[( ( 5 * ( udg_zhengshuex[5] - 1 ) ) + ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) - 5 ) )] / udg_shuju[0] ) ) ))) + ")|r" ) ) ) ) ) )
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 1 )
else
endif
set udg_zhengshuex[5]=udg_zhengshuex[5] + 1
endloop
if ( ( udg_zhengshuex[0] < 5 ) ) then
set udg_Color[0]=( udg_Color[0] + ( "，其余队友|cffffdd00(+" + ( "" + ( "" + ( "" + ( I2S(R2I(( ( 100.00 + ( 10.00 * I2R(GetUnitLevel(GetDyingUnit())) ) ) * ( I2R(udg_shangjin[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )]) / 100.00 ) ))) + ")|r" ) ) ) ) ) )
else
endif
endif
call DisplayTimedTextToForce(GetPlayersAll(), 15.00, udg_Color[0])
else
endif
endif
set udg_zhengshuex[5]=1
loop
exitwhen udg_zhengshuex[5] > 5
set udg_wanjiazu[0]=YDWEGetForceOfPlayerNull(s__baka_SPlayer(udg_zhengshuex[5] - 1))
set udg_Dian[10]=GetUnitLoc(GetDyingUnit())
if ( ( udg_zhugong[( ( 5 * ( udg_zhengshuex[5] - 1 ) ) + ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) - 5 ) )] > 0 ) ) then
call AddHeroXP(udg_player[udg_zhengshuex[5]], ( 90 * IMaxBJ(( GetHeroLevel(GetDyingUnit()) - GetHeroLevel(udg_player[udg_zhengshuex[5]]) ), 0) ), true)
call AdjustPlayerStateBJ(( ( 50 + ( 5 * GetUnitLevel(GetDyingUnit()) ) ) + R2I(( ( 100.00 + ( 10.00 * I2R(GetUnitLevel(GetDyingUnit())) ) ) * ( udg_shuju[( ( ( 5 * udg_zhengshuex[5] ) - 5 ) + ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) - 5 ) )] / udg_shuju[0] ) )) ), s__baka_SPlayer(udg_zhengshuex[5] - 1), PLAYER_STATE_RESOURCE_GOLD)
call CreateTextTagLocBJ(( "+" + I2S(R2I(( ( ( ( 100.00 + ( 10.00 * I2R(GetHeroLevel(GetDyingUnit())) ) ) * ( I2R(udg_shangjin[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )]) / 100.00 ) ) + ( 50.00 + ( 5.00 * I2R(GetHeroLevel(GetDyingUnit())) ) ) ) + ( ( 100.00 + ( 10.00 * I2R(GetUnitLevel(GetDyingUnit())) ) ) * ( udg_shuju[( ( 5 * ( udg_zhengshuex[5] - 1 ) ) + ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) - 5 ) )] / udg_shuju[0] ) ) ))) ), udg_Dian[10], 0, 10.00, 100.00, 86.66, 0.00, 0.00)
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) != udg_zhengshuex[5] ) ) then
set udg_Score[udg_zhengshuex[5]]=( udg_Score[udg_zhengshuex[5]] + R2I(( 75.00 * ( ( I2R(udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )]) + 500.00 ) / ( I2R(udg_Score[udg_zhengshuex[5]]) + 500.00 ) ) )) )
set udg_zhugong[( 50 + udg_zhengshuex[5] )]=( udg_zhugong[( 50 + udg_zhengshuex[5] )] + 1 )
call MultiboardSetItemValue(udg_duomianbanxm[( 120 + udg_zhengshuex[5] )], I2S(udg_zhugong[( 50 + udg_zhengshuex[5] )]))
if ( ( udg_shangjin[udg_zhengshuex[5]] < 70 ) ) then
set udg_shangjin[udg_zhengshuex[5]]=IMinBJ(( udg_shangjin[udg_zhengshuex[5]] + 10 ), 70)
call MultiboardSetItemValue(udg_duomianbanxm[( 140 + udg_zhengshuex[5] )], ( "|cffffdd00" + ( I2S(udg_shangjin[udg_zhengshuex[5]]) + "%|r" ) ))
else
set udg_shangjin[udg_zhengshuex[5]]=IMinBJ(( udg_shangjin[udg_zhengshuex[5]] + 5 ), 200)
call MultiboardSetItemValue(udg_duomianbanxm[( 140 + udg_zhengshuex[5] )], ( "|cffffdd00" + ( I2S(udg_shangjin[udg_zhengshuex[5]]) + "%|r" ) ))
endif
else
endif
set udg_zhugong[( ( 5 * ( udg_zhengshuex[5] - 1 ) ) + ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) - 5 ) )]=0
set udg_shuju[( ( 5 * ( udg_zhengshuex[5] - 1 ) ) + ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) - 5 ) )]=0.00
else
call CreateTextTagLocBJ(( "+" + I2S(R2I(( ( 100.00 + ( 10.00 * I2R(GetUnitLevel(GetDyingUnit())) ) ) * ( I2R(udg_shangjin[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )]) / 100.00 ) ))) ), udg_Dian[10], 0, 10.00, 100.00, 86.66, 0.00, 0.00)
endif
call SetTextTagVelocity(bj_lastCreatedTextTag, 0.00, 0.03)
call SetTextTagPermanent(bj_lastCreatedTextTag, false)
call SetTextTagFadepoint(bj_lastCreatedTextTag, 2.00)
call SetTextTagLifespan(bj_lastCreatedTextTag, 3.00)
call SetTextTagVisibility(bj_lastCreatedTextTag, false)
call ShowTextTagForceBJ(true, GetLastCreatedTextTag(), udg_wanjiazu[0])
call RemoveLocation(udg_Dian[10])
call DestroyForce(udg_wanjiazu[0])
set udg_zhengshuex[5]=udg_zhengshuex[5] + 1
endloop
else
endif
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) <= 5 ) ) then
set udg_shuju[0]=0.00
set udg_zhengshuex[5]=6
loop
exitwhen udg_zhengshuex[5] > 10
set udg_shuju[0]=( udg_shuju[0] + udg_shuju[( ( 5 * ( udg_zhengshuex[5] - 1 ) ) + ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) - 0 ) )] )
set udg_zhengshuex[5]=udg_zhengshuex[5] + 1
endloop
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) <= 10 ) ) then
set udg_shuju[( ( 5 * ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) - 1 ) ) + ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) - 0 ) )]=( udg_shuju[( ( 5 * ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) - 1 ) ) + ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) - 0 ) )] + ( udg_shuju[0] * 0.25 ) )
set udg_shuju[0]=( udg_shuju[0] * 1.25 )
set udg_zhengshuex[0]=0
set udg_zhengshuex[5]=6
loop
exitwhen udg_zhengshuex[5] > 10
if ( ( udg_zhugong[( ( 5 * ( udg_zhengshuex[5] - 1 ) ) + ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) - 0 ) )] > 0 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) != udg_zhengshuex[5] ) ) then
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 1 )
else
endif
set udg_zhengshuex[5]=udg_zhengshuex[5] + 1
endloop
if ( ( udg_zhengshuex[0] == 0 ) ) then
set udg_Color[0]=( "|cff0075ff" + ( GetPlayerName(GetOwningPlayer(GetKillingUnitBJ())) + ( "|r将|cff009900" + ( GetPlayerName(GetOwningPlayer(GetDyingUnit())) + ( "|r单杀！|cffffdd00(+" + ( I2S(R2I(( ( ( ( 100.00 + ( 10.00 * I2R(GetHeroLevel(GetDyingUnit())) ) ) * ( I2R(udg_shangjin[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )]) / 100.00 ) ) + ( 50.00 + ( 5.00 * I2R(GetHeroLevel(GetDyingUnit())) ) ) ) + ( ( 100.00 + ( 10.00 * I2R(GetUnitLevel(GetDyingUnit())) ) ) * ( udg_shuju[( ( 5 * ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) - 1 ) ) + ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) - 0 ) )] / udg_shuju[0] ) ) ))) + ")|r" ) ) ) ) ) )
else
set udg_Color[0]=( "|cff0075ff" + ( GetPlayerName(GetOwningPlayer(GetKillingUnitBJ())) + ( "|r将|cff009900" + ( GetPlayerName(GetOwningPlayer(GetDyingUnit())) + ( "|r击杀|cffffdd00(+" + ( I2S(R2I(( ( ( ( 100.00 + ( 10.00 * I2R(GetHeroLevel(GetDyingUnit())) ) ) * ( I2R(udg_shangjin[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )]) / 100.00 ) ) + ( 50.00 + ( 5.00 * I2R(GetHeroLevel(GetDyingUnit())) ) ) ) + ( ( 100.00 + ( 10.00 * I2R(GetUnitLevel(GetDyingUnit())) ) ) * ( udg_shuju[( ( 5 * ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) - 1 ) ) + ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) - 0 ) )] / udg_shuju[0] ) ) ))) + ")|r" ) ) ) ) ) )
set udg_zhengshuex[0]=0
set udg_zhengshuex[5]=6
loop
exitwhen udg_zhengshuex[5] > 10
if ( ( udg_zhugong[( ( 5 * ( udg_zhengshuex[5] - 1 ) ) + ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) - 0 ) )] > 0 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) != udg_zhengshuex[5] ) ) then
set udg_Color[0]=( udg_Color[0] + ( udg_Color[udg_zhengshuex[5]] + ( GetPlayerName(s__baka_SPlayer(udg_zhengshuex[5] - 1)) + ( "|r|cffffdd00(+" + ( "" + ( I2S(R2I(( ( ( ( 100.00 + ( 10.00 * I2R(GetHeroLevel(GetDyingUnit())) ) ) * ( I2R(udg_shangjin[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )]) / 100.00 ) ) + ( 50.00 + ( 5.00 * I2R(GetHeroLevel(GetDyingUnit())) ) ) ) + ( ( 100.00 + ( 10.00 * I2R(GetUnitLevel(GetDyingUnit())) ) ) * ( udg_shuju[( ( 5 * ( udg_zhengshuex[5] - 1 ) ) + ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) - 0 ) )] / udg_shuju[0] ) ) ))) + ")|r" ) ) ) ) ) )
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 1 )
else
endif
set udg_zhengshuex[5]=udg_zhengshuex[5] + 1
endloop
if ( ( udg_zhengshuex[0] < 4 ) ) then
set udg_Color[0]=( udg_Color[0] + ( "，其余队友|cffffdd00(+" + ( "" + ( "" + ( "" + ( I2S(R2I(( ( 100.00 + ( 10.00 * I2R(GetUnitLevel(GetDyingUnit())) ) ) * ( I2R(udg_shangjin[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )]) / 100.00 ) ))) + ")|r" ) ) ) ) ) )
else
endif
endif
call DisplayTimedTextToForce(GetPlayersAll(), 15.00, udg_Color[0])
if ( ( udg_kill[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] > 1 ) ) then
if ( ( udg_kill[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] == 2 ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 15.00, ( "|cff0075ff" + ( GetPlayerName(GetOwningPlayer(GetKillingUnitBJ())) + "|r进行了一次 |cffff8000双杀|r 威武~" ) ))
else
if ( ( udg_kill[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] == 3 ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 15.00, ( "|cff0075ff" + ( GetPlayerName(GetOwningPlayer(GetKillingUnitBJ())) + "|r进行了一次 |cffff0000三连杀！|r 太猛了吧！" ) ))
else
if ( ( udg_kill[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] == 4 ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 15.00, ( "|cff0075ff" + ( GetPlayerName(GetOwningPlayer(GetKillingUnitBJ())) + "|r进行了一次 |cffff0080四连杀！！|r 不可思议！！" ) ))
else
if ( ( udg_kill[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] == 5 ) ) then
set udg_Savior[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]=1
call DisplayTimedTextToForce(GetPlayersAll(), 15.00, ( "|cff0075ff" + ( GetPlayerName(GetOwningPlayer(GetKillingUnitBJ())) + "|r进行了一次 |cffff00ff五连杀！！！|r 团灭？太容易了！都是浮云！" ) ))
else
set udg_Savior[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]=1
call DisplayTimedTextToForce(GetPlayersAll(), 15.00, ( "|cff0075ff" + ( GetPlayerName(GetOwningPlayer(GetKillingUnitBJ())) + "|r进行了一次 |cff8000ff？？？连杀！！！|r 神马？你确定你没开外挂？！！！！！" ) ))
endif
endif
endif
endif
else
endif
else
if ( ( GetOwningPlayer(GetKillingUnitBJ()) == s__baka_SPlayer(11) ) ) then
if ( ( udg_Points == - 1 ) ) then
set udg_zhengshuex[0]=0
set udg_zhengshuex[5]=6
loop
exitwhen udg_zhengshuex[5] > 10
if ( ( udg_zhugong[( ( 5 * ( udg_zhengshuex[5] - 1 ) ) + ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) - 0 ) )] > 0 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) != udg_zhengshuex[5] ) ) then
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 1 )
else
endif
set udg_zhengshuex[5]=udg_zhengshuex[5] + 1
endloop
if ( ( udg_zhengshuex[0] == 0 ) ) then
set udg_Color[0]=( "|cff0075ff" + ( "极冬酷寒" + ( "|r将|cff009900" + ( GetPlayerName(GetOwningPlayer(GetDyingUnit())) + ( "|r击杀了！而且没人助攻有木有！这是在恶意卖萌啊！每人领走他|cffffdd00" + ( I2S(R2I(( ( 100.00 + ( 10.00 * I2R(GetUnitLevel(GetDyingUnit())) ) ) * ( I2R(udg_shangjin[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )]) / 100.00 ) ))) + "|r元的福利~" ) ) ) ) ) )
else
set udg_Color[0]=( "|cff0075ff" + ( "极冬酷寒" + ( "|r将|cff009900" + ( GetPlayerName(GetOwningPlayer(GetDyingUnit())) + ( "|r的人头补刀了，助攻：" ) ) ) ) )
set udg_zhengshuex[0]=0
set udg_zhengshuex[5]=6
loop
exitwhen udg_zhengshuex[5] > 10
if ( ( udg_zhugong[( ( 5 * ( udg_zhengshuex[5] - 1 ) ) + ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) - 0 ) )] > 0 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) != udg_zhengshuex[5] ) ) then
set udg_Color[0]=( udg_Color[0] + ( udg_Color[udg_zhengshuex[5]] + ( GetPlayerName(s__baka_SPlayer(udg_zhengshuex[5] - 1)) + ( "|r|cffffdd00(+" + ( "" + ( I2S(R2I(( ( ( ( 100.00 + ( 10.00 * I2R(GetHeroLevel(GetDyingUnit())) ) ) * ( I2R(udg_shangjin[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )]) / 100.00 ) ) + ( 50.00 + ( 5.00 * I2R(GetHeroLevel(GetDyingUnit())) ) ) ) + ( ( 100.00 + ( 10.00 * I2R(GetUnitLevel(GetDyingUnit())) ) ) * ( udg_shuju[( ( 5 * ( udg_zhengshuex[5] - 1 ) ) + ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) - 0 ) )] / udg_shuju[0] ) ) ))) + ")|r" ) ) ) ) ) )
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 1 )
else
endif
set udg_zhengshuex[5]=udg_zhengshuex[5] + 1
endloop
if ( ( udg_zhengshuex[0] < 5 ) ) then
set udg_Color[0]=( udg_Color[0] + ( "，其余队友|cffffdd00(+" + ( "" + ( "" + ( "" + ( I2S(R2I(( ( 100.00 + ( 10.00 * I2R(GetUnitLevel(GetDyingUnit())) ) ) * ( I2R(udg_shangjin[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )]) / 100.00 ) ))) + ")|r" ) ) ) ) ) )
else
endif
endif
call DisplayTimedTextToForce(GetPlayersAll(), 15.00, udg_Color[0])
else
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetDyingUnit() , 0x4930324E)) == true ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 15.00, ( "|cffff0000" + ( GetPlayerName(GetOwningPlayer(GetDyingUnit())) + "|r被杀死了，|cffffcc0036秒|r后复活" ) ))
else
if ( ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetDyingUnit() , 0x4930324D)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetDyingUnit() , 0x4930324C)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetDyingUnit() , 0x49303245)) == true ) ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 15.00, ( "|cffff0000" + ( GetPlayerName(GetOwningPlayer(GetDyingUnit())) + "|r被杀死了，|cffffcc0038秒|r后复活" ) ))
else
call DisplayTimedTextToForce(GetPlayersAll(), 15.00, ( "|cffff0000" + ( GetPlayerName(GetOwningPlayer(GetDyingUnit())) + "|r被杀死了，|cffffcc0045秒|r后复活" ) ))
endif
endif
endif
else
endif
endif
set udg_zhengshuex[5]=6
loop
exitwhen udg_zhengshuex[5] > 10
if ( ( udg_zhugong[( ( 5 * ( udg_zhengshuex[5] - 1 ) ) + ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) - 0 ) )] > 0 ) ) then
set udg_wanjiazu[0]=YDWEGetForceOfPlayerNull(s__baka_SPlayer(udg_zhengshuex[5] - 1))
set udg_Dian[10]=GetUnitLoc(GetDyingUnit())
if ( ( udg_zhugong[( ( 5 * ( udg_zhengshuex[5] - 1 ) ) + ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) - 0 ) )] > 0 ) ) then
call AddHeroXP(udg_player[udg_zhengshuex[5]], ( 90 * IMaxBJ(( GetHeroLevel(GetDyingUnit()) - GetHeroLevel(udg_player[udg_zhengshuex[5]]) ), 0) ), true)
call AdjustPlayerStateBJ(( ( 50 + ( 5 * GetUnitLevel(GetDyingUnit()) ) ) + R2I(( ( 100.00 + ( 10.00 * I2R(GetUnitLevel(GetDyingUnit())) ) ) * ( udg_shuju[( ( ( 5 * udg_zhengshuex[5] ) - 5 ) + ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) - 0 ) )] / udg_shuju[0] ) )) ), s__baka_SPlayer(udg_zhengshuex[5] - 1), PLAYER_STATE_RESOURCE_GOLD)
call CreateTextTagLocBJ(( "+" + I2S(R2I(( ( ( ( 100.00 + ( 10.00 * I2R(GetHeroLevel(GetDyingUnit())) ) ) * ( I2R(udg_shangjin[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )]) / 100.00 ) ) + ( 50.00 + ( 5.00 * I2R(GetHeroLevel(GetDyingUnit())) ) ) ) + ( ( 100.00 + ( 10.00 * I2R(GetUnitLevel(GetDyingUnit())) ) ) * ( udg_shuju[( ( 5 * ( udg_zhengshuex[5] - 1 ) ) + ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) - 5 ) )] / udg_shuju[0] ) ) ))) ), udg_Dian[10], 0, 10.00, 100.00, 86.66, 0.00, 0.00)
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) != udg_zhengshuex[5] ) ) then
set udg_zhugong[( 50 + udg_zhengshuex[5] )]=( udg_zhugong[( 50 + udg_zhengshuex[5] )] + 1 )
set udg_Score[udg_zhengshuex[5]]=( udg_Score[udg_zhengshuex[5]] + R2I(( 75.00 * ( ( I2R(udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )]) + 500.00 ) / ( I2R(udg_Score[udg_zhengshuex[5]]) + 500.00 ) ) )) )
call MultiboardSetItemValue(udg_duomianbanxm[( 120 + udg_zhengshuex[5] )], I2S(udg_zhugong[( 50 + udg_zhengshuex[5] )]))
if ( ( udg_shangjin[udg_zhengshuex[5]] < 70 ) ) then
set udg_shangjin[udg_zhengshuex[5]]=IMinBJ(( udg_shangjin[udg_zhengshuex[5]] + 10 ), 70)
call MultiboardSetItemValue(udg_duomianbanxm[( 140 + udg_zhengshuex[5] )], ( "|cffffdd00" + ( I2S(udg_shangjin[udg_zhengshuex[5]]) + "%|r" ) ))
else
set udg_shangjin[udg_zhengshuex[5]]=IMinBJ(( udg_shangjin[udg_zhengshuex[5]] + 5 ), 200)
call MultiboardSetItemValue(udg_duomianbanxm[( 140 + udg_zhengshuex[5] )], ( "|cffffdd00" + ( I2S(udg_shangjin[udg_zhengshuex[5]]) + "%|r" ) ))
endif
else
endif
set udg_zhugong[( ( 5 * ( udg_zhengshuex[5] - 1 ) ) + ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) - 0 ) )]=0
set udg_shuju[( ( 5 * ( udg_zhengshuex[5] - 1 ) ) + ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) - 0 ) )]=0.00
else
call CreateTextTagLocBJ(( "+" + I2S(R2I(( ( 100.00 + ( 10.00 * I2R(GetUnitLevel(GetDyingUnit())) ) ) * ( I2R(udg_shangjin[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )]) / 100.00 ) ))) ), udg_Dian[10], 0, 10.00, 100.00, 86.66, 0.00, 0.00)
endif
call SetTextTagVelocity(bj_lastCreatedTextTag, 0.00, 0.03)
call SetTextTagPermanent(bj_lastCreatedTextTag, false)
call SetTextTagFadepoint(bj_lastCreatedTextTag, 2.00)
call SetTextTagLifespan(bj_lastCreatedTextTag, 3.00)
call SetTextTagVisibility(bj_lastCreatedTextTag, false)
call ShowTextTagForceBJ(true, GetLastCreatedTextTag(), udg_wanjiazu[0])
call RemoveLocation(udg_Dian[10])
call DestroyForce(udg_wanjiazu[0])
else
endif
set udg_zhengshuex[5]=udg_zhengshuex[5] + 1
endloop
else
endif
else
endif
endfunction
function InitTrig_duomianban4_hero takes nothing returns nothing
set gg_trg_duomianban4_hero=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_duomianban4_hero, EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(gg_trg_duomianban4_hero, function Trig_duomianban4_heroActions)
endfunction
function Trig_duomianban5_chenghaoActions takes nothing returns nothing
set udg_k=GetKillingUnitBJ()
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 ) <= 10 ) ) then
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 ) <= 5 ) ) then
if ( ( udg_kzs[( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 )] == 0 ) and ( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 )] >= 1000 ) ) then
set udg_kzs[( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 )]=1
call DisplayTimedTextToForce(GetPlayersAll(), 20.00, ( ( "|cff009900" + ( GetPlayerName(GetOwningPlayer(udg_k)) + "|r" ) ) + "已经成为了一名合格的|cFF6699FF勇士|r！" ))
call GetCH(udg_k , 1)
call YDWEMultiboardSetItemIconBJNull(udg_duomianban[0] , 9 , ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 ) + 1 ) , udg_touxiang[( 100 + udg_kzs[( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 )] )])
else
if ( ( udg_kzs[( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 )] == 1 ) and ( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 )] >= 2000 ) ) then
set udg_kzs[( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 )]=2
call DisplayTimedTextToForce(GetPlayersAll(), 20.00, ( ( "|cff009900" + ( GetPlayerName(GetOwningPlayer(udg_k)) + "|r" ) ) + "成功晋级为|cFF00FF33战士|r！" ))
call GetCH(udg_k , 2)
call YDWEMultiboardSetItemIconBJNull(udg_duomianban[0] , 9 , ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 ) + 1 ) , udg_touxiang[( 100 + udg_kzs[( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 )] )])
else
if ( ( udg_kzs[( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 )] == 2 ) and ( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 )] >= 3500 ) ) then
set udg_kzs[( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 )]=3
call DisplayTimedTextToForce(GetPlayersAll(), 20.00, ( ( "|cff009900" + ( GetPlayerName(GetOwningPlayer(udg_k)) + "|r" ) ) + "成功晋级为|cFFFFFF00骑士|r！" ))
call GetCH(udg_k , 4)
call YDWEMultiboardSetItemIconBJNull(udg_duomianban[0] , 9 , ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 ) + 1 ) , udg_touxiang[( 100 + udg_kzs[( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 )] )])
else
if ( ( udg_kzs[( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 )] == 3 ) and ( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 )] >= 5500 ) and ( udg_zhengshu[( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 ) - 1 )] < 10 ) and ( GetPlayerState(s__baka_SPlayer(( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 ) - 1), PLAYER_STATE_RESOURCE_LUMBER) <= 60 ) ) then
set udg_kzs[( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 )]=4
call DisplayTimedTextToForce(GetPlayersAll(), 20.00, ( "胜利与你同在，|cFFFF6600骑士王|r" + ( "|cff009900" + ( GetPlayerName(GetOwningPlayer(udg_k)) + "|r" ) ) ))
call GetCH(udg_k , 8)
call YDWEMultiboardSetItemIconBJNull(udg_duomianban[0] , 9 , ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 ) + 1 ) , udg_touxiang[( 100 + udg_kzs[( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 )] )])
else
if ( ( udg_kzs[( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 )] == 4 ) and ( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 )] >= 7500 ) and ( udg_zhengshu[( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 ) - 1 )] < 5 ) and ( GetPlayerState(s__baka_SPlayer(( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 ) - 1), PLAYER_STATE_RESOURCE_LUMBER) <= 60 ) ) then
if ( ( udg_Savior[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] == 1 ) ) then
set udg_kzs[( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 )]=6
call DisplayTimedTextToForce(GetPlayersAll(), 20.00, ( "预言中的|cFF7525ff救世主|r" + ( "|cff009900" + ( GetPlayerName(GetOwningPlayer(udg_k)) + "|r去拯救世界吧！2012弱爆了！！！" ) ) ))
call GetCH(udg_k , 24)
call YDWEMultiboardSetItemIconBJNull(udg_duomianban[0] , 9 , ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 ) + 1 ) , udg_touxiang[( 100 + udg_kzs[( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 )] )])
else
set udg_kzs[( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 )]=5
call DisplayTimedTextToForce(GetPlayersAll(), 20.00, ( "传说中的|cFFFF0000战神|r出现了，他就是" + ( "|cff009900" + ( GetPlayerName(GetOwningPlayer(udg_k)) + "|r" ) ) ))
call GetCH(udg_k , 16)
call YDWEMultiboardSetItemIconBJNull(udg_duomianban[0] , 9 , ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 ) + 1 ) , udg_touxiang[( 100 + udg_kzs[( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 )] )])
endif
else
endif
endif
endif
endif
endif
else
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 ) >= 6 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 ) <= 10 ) ) then
if ( ( udg_kzs[( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 )] == 0 ) and ( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 )] >= 1000 ) ) then
set udg_kzs[( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 )]=1
call DisplayTimedTextToForce(GetPlayersAll(), 30, ( ( "|cFF6699FF“|r|cff0075ff" + ( GetPlayerName(GetOwningPlayer(udg_k)) + "|r|cFF6699FF”|r" ) ) + "|cFF6699FF已经成为了一名合格的勇士！|r" ))
call GetCH(udg_k , 1)
call YDWEMultiboardSetItemIconBJNull(udg_duomianban[0] , 9 , ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 ) + 1 ) , udg_touxiang[( 110 + udg_kzs[( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 )] )])
else
if ( ( udg_kzs[( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 )] == 1 ) and ( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 )] >= 2000 ) ) then
set udg_kzs[( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 )]=2
call DisplayTimedTextToForce(GetPlayersAll(), 30, ( ( "|cFF00FF33“|r|cff0075ff" + ( GetPlayerName(GetOwningPlayer(udg_k)) + "|r|cFF00FF33”|r" ) ) + "|cFF00FF33成功晋级为战士！|r" ))
call GetCH(udg_k , 2)
call YDWEMultiboardSetItemIconBJNull(udg_duomianban[0] , 9 , ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 ) + 1 ) , udg_touxiang[( 110 + udg_kzs[( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 )] )])
else
if ( ( udg_kzs[( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 )] == 2 ) and ( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 )] >= 3500 ) ) then
set udg_kzs[( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 )]=3
call DisplayTimedTextToForce(GetPlayersAll(), 30, ( ( "|cff009900“|r|cff0075ff" + ( GetPlayerName(GetOwningPlayer(udg_k)) + "|r|cff009900”|r" ) ) + "|cFFFFFF00成功晋级为骑士！|r" ))
call GetCH(udg_k , 4)
call YDWEMultiboardSetItemIconBJNull(udg_duomianban[0] , 9 , ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 ) + 1 ) , udg_touxiang[( 110 + udg_kzs[( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 )] )])
else
if ( ( udg_kzs[( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 )] == 3 ) and ( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 )] >= 5500 ) and ( udg_zhengshu[( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 ) - 1 )] < 10 ) and ( GetPlayerState(s__baka_SPlayer(( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 ) - 1), PLAYER_STATE_RESOURCE_LUMBER) <= 60 ) ) then
set udg_kzs[( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 )]=4
call DisplayTimedTextToForce(GetPlayersAll(), 30, ( "|cFFFF6600胜利与你同在，骑士王|r" + ( "|cFFFF6600“|r|cff0075ff" + ( GetPlayerName(GetOwningPlayer(udg_k)) + "|r|cFFFF6600”|r" ) ) ))
call GetCH(udg_k , 8)
call YDWEMultiboardSetItemIconBJNull(udg_duomianban[0] , 9 , ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 ) + 1 ) , udg_touxiang[( 110 + udg_kzs[( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 )] )])
else
if ( ( udg_kzs[( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 )] == 4 ) and ( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 )] >= 7500 ) and ( udg_zhengshu[( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 ) - 1 )] < 5 ) and ( GetPlayerState(s__baka_SPlayer(( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 ) - 1), PLAYER_STATE_RESOURCE_LUMBER) <= 60 ) ) then
if ( ( udg_Savior[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] == 1 ) ) then
set udg_kzs[( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 )]=6
call DisplayTimedTextToForce(GetPlayersAll(), 20.00, ( "预言中的|cFF7525ff救世主|r" + ( "|cff0075ff" + ( GetPlayerName(GetOwningPlayer(udg_k)) + "|r去拯救世界吧！2012弱爆了！！！" ) ) ))
call GetCH(udg_k , 24)
call YDWEMultiboardSetItemIconBJNull(udg_duomianban[0] , 9 , ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 ) + 1 ) , udg_touxiang[( 110 + udg_kzs[( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 )] )])
else
set udg_kzs[( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 )]=5
call DisplayTimedTextToForce(GetPlayersAll(), 30, ( "|cFFFF0000传说中的战神出现了，他就是|r" + ( "|cFFFF0000“|r|cff0075ff" + ( GetPlayerName(GetOwningPlayer(udg_k)) + "|r|cFFFF0000”|r" ) ) ))
call GetCH(udg_k , 16)
call YDWEMultiboardSetItemIconBJNull(udg_duomianban[0] , 9 , ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 ) + 1 ) , udg_touxiang[( 110 + udg_kzs[( s__baka_SGetPlayerId(GetOwningPlayer(udg_k)) + 1 )] )])
endif
else
endif
endif
endif
endif
endif
else
endif
endif
else
endif
call TriggerExecute(gg_trg_duomianban6_exe)
call TriggerExecute(gg_trg_duomianban6_exe_2)
set udg_k=null
endfunction
function InitTrig_duomianban5_chenghao takes nothing returns nothing
set gg_trg_duomianban5_chenghao=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_duomianban5_chenghao, EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(gg_trg_duomianban5_chenghao, function Trig_duomianban5_chenghaoActions)
endfunction
function Trig_duomianban6_exeActions takes nothing returns nothing
set udg_DHK1[1]=( "|cff00ff40复苏：(" + ( I2S(udg_FS) + ( ")|r VS |cff00ffff极寒：(" + ( I2S(udg_FSDL) + ")|r" ) ) ) )
set udg_Hexadecimal[22]=""
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=5
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ( ( udg_player[bj_forLoopAIndex] != null ) and ( IsUnitType(udg_player[bj_forLoopAIndex], UNIT_TYPE_DEAD) == false ) ) then
set udg_Hexadecimal[22]=( udg_Hexadecimal[22] + ( udg_Color[bj_forLoopAIndex] + ( "★|r" ) ) )
call AddUnitAnimationPropertiesBJ(true, "alternate", udg_SmD[bj_forLoopAIndex])
call SetUnitVertexColor(udg_SmD[bj_forLoopAIndex], 255, 255, 255, 255)
if ( ( udg_zhengshu[( bj_forLoopAIndex - 1 )] == 0 ) ) then
call MultiboardSetItemValue(udg_duomianbanxm[( 20 + bj_forLoopAIndex )], "TRIGSTR_4170")
else
call MultiboardSetItemValue(udg_duomianbanxm[( 20 + bj_forLoopAIndex )], "TRIGSTR_4156")
endif
else
set udg_Hexadecimal[22]=( udg_Hexadecimal[22] + ( "|cff505050" + ( "☆|r" ) ) )
call AddUnitAnimationPropertiesBJ(false, "alternate", udg_SmD[bj_forLoopAIndex])
call SetUnitVertexColor(udg_SmD[bj_forLoopAIndex], 255, 255, 255, 64)
if ( ( udg_player[bj_forLoopAIndex] != null ) ) then
call MultiboardSetItemValue(udg_duomianbanxm[( 20 + bj_forLoopAIndex )], ( "|cffff0000" + ( I2S(R2I(TimerGetRemaining(udg_FH[bj_forLoopAIndex]))) + "|r(秒)" ) ))
else
call MultiboardSetItemValue(udg_duomianbanxm[( 20 + bj_forLoopAIndex )], "TRIGSTR_4169")
endif
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
set udg_Hexadecimal[23]=""
set bj_forLoopAIndex=6
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ( ( udg_player[bj_forLoopAIndex] != null ) and ( IsUnitType(udg_player[bj_forLoopAIndex], UNIT_TYPE_DEAD) == false ) ) then
set udg_Hexadecimal[23]=( udg_Hexadecimal[23] + ( udg_Color[bj_forLoopAIndex] + ( "★|r" ) ) )
call AddUnitAnimationPropertiesBJ(true, "alternate", udg_SmD[bj_forLoopAIndex])
call SetUnitVertexColor(udg_SmD[bj_forLoopAIndex], 255, 255, 255, 255)
if ( ( udg_zhengshu[( bj_forLoopAIndex - 1 )] == 0 ) ) then
call MultiboardSetItemValue(udg_duomianbanxm[( 20 + bj_forLoopAIndex )], "TRIGSTR_4184")
else
call MultiboardSetItemValue(udg_duomianbanxm[( 20 + bj_forLoopAIndex )], "TRIGSTR_4175")
endif
else
set udg_Hexadecimal[23]=( udg_Hexadecimal[23] + ( "|cff505050" + ( "☆|r" ) ) )
call AddUnitAnimationPropertiesBJ(false, "alternate", udg_SmD[bj_forLoopAIndex])
call SetUnitVertexColor(udg_SmD[bj_forLoopAIndex], 255, 255, 255, 64)
if ( ( udg_player[bj_forLoopAIndex] != null ) ) then
call MultiboardSetItemValue(udg_duomianbanxm[( 20 + bj_forLoopAIndex )], ( "|cffff0000" + ( I2S(R2I(TimerGetRemaining(udg_FH[bj_forLoopAIndex]))) + "|r(秒)" ) ))
else
call MultiboardSetItemValue(udg_duomianbanxm[( 20 + bj_forLoopAIndex )], "TRIGSTR_4217")
endif
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
set udg_Color[31]=( "" + ( "" + ( udg_Hexadecimal[22] + ( udg_DHK1[1] + udg_Hexadecimal[23] ) ) ) )
call MultiboardSetItemValue(udg_duomianbanxm[0], ( udg_Color[30] + ( udg_DHK1[0] + udg_DHK1[2] ) ))
call MultiboardSetTitleText(udg_duomianban[0], udg_Color[31])
endfunction
function InitTrig_duomianban6_exe takes nothing returns nothing
set gg_trg_duomianban6_exe=CreateTrigger()
call DisableTrigger(gg_trg_duomianban6_exe)
call TriggerRegisterTimerEventPeriodic(gg_trg_duomianban6_exe, 1.00)
call TriggerAddAction(gg_trg_duomianban6_exe, function Trig_duomianban6_exeActions)
endfunction
function Trig_duomianban6_exe_2Actions takes nothing returns nothing
set udg_zhengshuex[0]=1
loop
exitwhen udg_zhengshuex[0] > 10
if ( ( udg_kzs[udg_zhengshuex[0]] == 0 ) ) then
set udg_Hexadecimal[20]="新兵"
else
if ( ( udg_kzs[udg_zhengshuex[0]] == 1 ) ) then
set udg_Hexadecimal[20]="|cFF6699FF勇士|r"
else
if ( ( udg_kzs[udg_zhengshuex[0]] == 2 ) ) then
set udg_Hexadecimal[20]="|cFF00FF33战士|r"
else
if ( ( udg_kzs[udg_zhengshuex[0]] == 3 ) ) then
set udg_Hexadecimal[20]="|cFFFFFF00骑士|r"
else
if ( ( udg_kzs[udg_zhengshuex[0]] == 4 ) ) then
set udg_Hexadecimal[20]="|cFFFF6600骑士王|r"
else
if ( ( udg_kzs[udg_zhengshuex[0]] == 5 ) ) then
set udg_Hexadecimal[20]="|cFFFF0000战神|r"
else
if ( ( udg_kzs[udg_zhengshuex[0]] == 6 ) ) then
set udg_Hexadecimal[20]="|cFF7525ff救世主|r"
else
set udg_Hexadecimal[20]=""
endif
endif
endif
endif
endif
endif
endif
call MultiboardSetItemValue(udg_duomianbanxm[( 160 + udg_zhengshuex[0] )], udg_Hexadecimal[20])
set udg_zhengshuex[0]=udg_zhengshuex[0] + 1
endloop
endfunction
function InitTrig_duomianban6_exe_2 takes nothing returns nothing
set gg_trg_duomianban6_exe_2=CreateTrigger()
call TriggerAddAction(gg_trg_duomianban6_exe_2, function Trig_duomianban6_exe_2Actions)
endfunction
function Trig_fuhuoConditions takes nothing returns boolean
return ( ( IsUnitType(GetDyingUnit(), UNIT_TYPE_HERO) == true ) and ( GetUnitTypeId(GetDyingUnit()) != 0x4F303030 ) and ( GetUnitTypeId(GetDyingUnit()) != 0x48303032 ) )
endfunction
function Trig_fuhuoActions takes nothing returns nothing
set udg_fuhuo[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )]=GetDyingUnit()
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) <= 10 ) and ( GetHeroLevel(GetDyingUnit()) < 24 ) and ( GetHeroLevel(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]) >= 24 ) ) then
call AddHeroXP(GetKillingUnitBJ(), 500, true)
set udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]=( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] + 15 )
else
endif
if ( ( udg_Points > - 1 ) ) then
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetDyingUnit() , 0x4930324E)) == true ) ) then
call StartTimerBJ(udg_FH[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )], false, 36.00)
else
if ( ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetDyingUnit() , 0x4930324D)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetDyingUnit() , 0x4930324C)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetDyingUnit() , 0x49303245)) == true ) ) ) then
call StartTimerBJ(udg_FH[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )], false, 38.25)
else
call StartTimerBJ(udg_FH[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )], false, 45.00)
endif
endif
else
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) <= 10 ) and ( IsUnitEnemy(GetDyingUnit(), GetOwningPlayer(GetKillingUnitBJ())) == true ) ) then
if ( ( udg_zhengshu2[179] == 12 ) ) then
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetDyingUnit() , 0x4930324E)) == true ) ) then
call StartTimerBJ(udg_FH[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )], false, ( I2R(GetUnitLevel(udg_fuhuo[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )])) * 0.80 ))
else
if ( ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetDyingUnit() , 0x4930324D)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetDyingUnit() , 0x4930324C)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetDyingUnit() , 0x49303245)) == true ) ) ) then
call StartTimerBJ(udg_FH[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )], false, ( I2R(GetUnitLevel(udg_fuhuo[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )])) * 0.85 ))
else
call StartTimerBJ(udg_FH[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )], false, ( I2R(GetUnitLevel(udg_fuhuo[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )])) * 1.00 ))
endif
endif
else
if ( ( udg_zhengshu2[179] >= 11 ) ) then
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetDyingUnit() , 0x4930324E)) == true ) ) then
call StartTimerBJ(udg_FH[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )], false, ( ( I2R(GetHeroLevel(udg_fuhuo[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )])) * 3.20 ) - ( I2R(GetHeroLevel(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )])) * 0.80 ) ))
else
if ( ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetDyingUnit() , 0x4930324D)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetDyingUnit() , 0x4930324C)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetDyingUnit() , 0x49303245)) == true ) ) ) then
call StartTimerBJ(udg_FH[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )], false, ( ( I2R(GetHeroLevel(udg_fuhuo[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )])) * 3.40 ) - ( I2R(GetHeroLevel(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )])) * 0.85 ) ))
else
call StartTimerBJ(udg_FH[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )], false, ( ( I2R(GetHeroLevel(udg_fuhuo[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )])) * 4.00 ) - ( I2R(GetHeroLevel(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )])) * 1.00 ) ))
endif
endif
else
if ( ( udg_zhengshu2[179] >= 8 ) ) then
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetDyingUnit() , 0x4930324E)) == true ) ) then
call StartTimerBJ(udg_FH[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )], false, ( ( I2R(GetHeroLevel(udg_fuhuo[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )])) * 2.80 ) - ( I2R(GetHeroLevel(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )])) * 0.80 ) ))
else
if ( ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetDyingUnit() , 0x4930324D)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetDyingUnit() , 0x4930324C)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetDyingUnit() , 0x49303245)) == true ) ) ) then
call StartTimerBJ(udg_FH[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )], false, ( ( I2R(GetHeroLevel(udg_fuhuo[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )])) * 2.97 ) - ( I2R(GetHeroLevel(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )])) * 0.85 ) ))
else
call StartTimerBJ(udg_FH[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )], false, ( ( I2R(GetHeroLevel(udg_fuhuo[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )])) * 3.50 ) - ( I2R(GetHeroLevel(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )])) * 1.00 ) ))
endif
endif
else
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetDyingUnit() , 0x4930324E)) == true ) ) then
call StartTimerBJ(udg_FH[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )], false, ( ( I2R(GetHeroLevel(udg_fuhuo[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )])) * 2.40 ) - ( I2R(GetHeroLevel(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )])) * 0.80 ) ))
else
if ( ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetDyingUnit() , 0x4930324D)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetDyingUnit() , 0x4930324C)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetDyingUnit() , 0x49303245)) == true ) ) ) then
call StartTimerBJ(udg_FH[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )], false, ( ( I2R(GetHeroLevel(udg_fuhuo[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )])) * 2.55 ) - ( I2R(GetHeroLevel(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )])) * 0.85 ) ))
else
call StartTimerBJ(udg_FH[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )], false, ( ( I2R(GetHeroLevel(udg_fuhuo[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )])) * 3.00 ) - ( I2R(GetHeroLevel(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )])) * 1.00 ) ))
endif
endif
endif
endif
endif
else
if ( ( udg_zhengshu2[179] == 12 ) ) then
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetDyingUnit() , 0x4930324E)) == true ) ) then
call StartTimerBJ(udg_FH[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )], false, ( I2R(GetUnitLevel(udg_fuhuo[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )])) * 0.80 ))
else
if ( ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetDyingUnit() , 0x4930324D)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetDyingUnit() , 0x4930324C)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetDyingUnit() , 0x49303245)) == true ) ) ) then
call StartTimerBJ(udg_FH[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )], false, ( I2R(GetUnitLevel(udg_fuhuo[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )])) * 0.85 ))
else
call StartTimerBJ(udg_FH[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )], false, ( I2R(GetUnitLevel(udg_fuhuo[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )])) * 1.00 ))
endif
endif
else
if ( ( udg_zhengshu2[179] >= 11 ) ) then
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetDyingUnit() , 0x4930324E)) == true ) ) then
call StartTimerBJ(udg_FH[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )], false, ( I2R(GetUnitLevel(udg_fuhuo[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )])) * 2.40 ))
else
if ( ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetDyingUnit() , 0x4930324D)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetDyingUnit() , 0x4930324C)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetDyingUnit() , 0x49303245)) == true ) ) ) then
call StartTimerBJ(udg_FH[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )], false, ( I2R(GetUnitLevel(udg_fuhuo[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )])) * 2.55 ))
else
call StartTimerBJ(udg_FH[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )], false, ( I2R(GetUnitLevel(udg_fuhuo[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )])) * 3.00 ))
endif
endif
else
if ( ( udg_zhengshu2[179] >= 8 ) ) then
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetDyingUnit() , 0x4930324E)) == true ) ) then
call StartTimerBJ(udg_FH[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )], false, ( I2R(GetUnitLevel(udg_fuhuo[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )])) * 2.00 ))
else
if ( ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetDyingUnit() , 0x4930324D)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetDyingUnit() , 0x4930324C)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetDyingUnit() , 0x49303245)) == true ) ) ) then
call StartTimerBJ(udg_FH[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )], false, ( I2R(GetUnitLevel(udg_fuhuo[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )])) * 2.12 ))
else
call StartTimerBJ(udg_FH[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )], false, ( I2R(GetUnitLevel(udg_fuhuo[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )])) * 2.50 ))
endif
endif
else
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetDyingUnit() , 0x4930324E)) == true ) ) then
call StartTimerBJ(udg_FH[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )], false, ( I2R(GetUnitLevel(udg_fuhuo[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )])) * 1.60 ))
else
if ( ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetDyingUnit() , 0x4930324D)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetDyingUnit() , 0x4930324C)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetDyingUnit() , 0x49303245)) == true ) ) ) then
call StartTimerBJ(udg_FH[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )], false, ( I2R(GetUnitLevel(udg_fuhuo[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )])) * 1.70 ))
else
call StartTimerBJ(udg_FH[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )], false, ( I2R(GetUnitLevel(udg_fuhuo[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )])) * 2.00 ))
endif
endif
endif
endif
endif
endif
if ( ( GetHeroLevel(GetDyingUnit()) < 24 ) and ( GetHeroLevel(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]) < 24 ) and ( ( GetHeroLevel(GetDyingUnit()) + 5 ) <= GetHeroLevel(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]) ) and ( udg_zhengshu[( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) - 1 )] >= 5 ) ) then
if ( ( GetRandomInt(1, 2) == 1 ) ) then
call DisplayTimedTextToPlayer(GetOwningPlayer(GetDyingUnit()), 0, 0, 10.00, "TRIGSTR_2653")
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetDyingUnit()), 0, 0, 10.00, "TRIGSTR_2655")
endif
else
if ( ( GetHeroLevel(GetDyingUnit()) < 24 ) and ( GetHeroLevel(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]) >= 24 ) and ( udg_zhengshu[( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) - 1 )] >= 5 ) ) then
if ( ( GetRandomInt(1, 2) == 1 ) ) then
call DisplayTimedTextToPlayer(GetOwningPlayer(GetDyingUnit()), 0, 0, 10.00, "TRIGSTR_2657")
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetDyingUnit()), 0, 0, 10.00, "TRIGSTR_2656")
endif
else
if ( ( udg_zhengshu[( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) - 1 )] >= 10 ) and ( udg_zhengshu[( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) - 1 )] >= ( 3 * udg_zhengshu[( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) + 19 )] ) ) ) then
set udg_zhengshu2[3]=GetRandomInt(1, 6)
if ( ( udg_zhengshu2[3] == 1 ) ) then
call DisplayTimedTextToPlayer(GetOwningPlayer(GetDyingUnit()), 0, 0, 10.00, "TRIGSTR_2663")
else
if ( ( udg_zhengshu2[3] == 2 ) ) then
call DisplayTimedTextToPlayer(GetOwningPlayer(GetDyingUnit()), 0, 0, 10.00, "TRIGSTR_2658")
else
if ( ( udg_zhengshu2[3] == 3 ) ) then
call DisplayTimedTextToPlayer(GetOwningPlayer(GetDyingUnit()), 0, 0, 10.00, "TRIGSTR_2662")
else
if ( ( udg_zhengshu2[3] == 4 ) ) then
call DisplayTimedTextToPlayer(GetOwningPlayer(GetDyingUnit()), 0, 0, 10.00, "TRIGSTR_2661")
else
if ( ( udg_zhengshu2[3] == 5 ) ) then
call DisplayTimedTextToPlayer(GetOwningPlayer(GetDyingUnit()), 0, 0, 10.00, "TRIGSTR_2660")
else
if ( ( udg_zhengshu2[3] == 6 ) ) then
call DisplayTimedTextToPlayer(GetOwningPlayer(GetDyingUnit()), 0, 0, 10.00, "TRIGSTR_2659")
else
endif
endif
endif
endif
endif
endif
else
endif
endif
endif
endif
call CreateTimerDialogBJ(udg_FH[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )], ( "|cff00ff40" + ( GetHeroProperName(udg_fuhuo[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )]) + "|r" ) ))
set udg_fhck[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )]=bj_lastCreatedTimerDialog
call TimerDialogDisplayBJ(false, GetLastCreatedTimerDialogBJ())
call TimerDialogDisplayForPlayerBJ(true, GetLastCreatedTimerDialogBJ(), GetOwningPlayer(GetDyingUnit()))
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) <= 12 ) and ( IsUnitEnemy(GetKillingUnitBJ(), GetOwningPlayer(GetDyingUnit())) == true ) ) then
if ( ( IsUnitAlly(GetDyingUnit(), s__baka_SPlayer(10)) == true ) ) then
set udg_FSDL=( udg_FSDL + 1 )
else
if ( ( IsUnitAlly(GetDyingUnit(), s__baka_SPlayer(11)) == true ) ) then
set udg_FS=( udg_FS + 1 )
else
endif
endif
else
endif
call s__process_Cover(GetDyingUnit() , 100000000 , "全部")
endfunction
function InitTrig_fuhuo takes nothing returns nothing
set gg_trg_fuhuo=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_fuhuo, EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gg_trg_fuhuo, Condition(function Trig_fuhuoConditions))
call TriggerAddAction(gg_trg_fuhuo, function Trig_fuhuoActions)
endfunction
function Trig_fh01Actions takes nothing returns nothing
if ( ( GetExpiredTimer() == udg_FH[11] ) ) then
call UnitRemoveAbility(udg_SmD[1], 0x41304331)
call UnitAddAbility(udg_SmD[1], 0x4130424A)
call SetUnitAbilityLevel(udg_SmD[1], 0x4130424A, udg_zhengshu2[179])
else
call ShowUnit(udg_fuhuo[1], true)
set udg_Dian[168]=GetPlayerStartLocationLoc(s__baka_SPlayer(( s__baka_SGetPlayerId(GetOwningPlayer(udg_fuhuo[1])) + 1 ) - 1))
call ReviveHeroLoc(udg_fuhuo[1], udg_Dian[168], false)
call RemoveLocation(udg_Dian[168])
call QuestMessageBJ(GetPlayersAll(), bj_QUESTMESSAGE_UPDATED, ( ( "|cff009900" + GetPlayerName(GetOwningPlayer(udg_fuhuo[1])) ) + "|r复活了" ))
call SetUnitVertexColor(udg_fuhuo[1], 255, 255, 255, 255)
call s__maphack_SetHeight(udg_fuhuo[1] , 0.00 , 0.00)
call SetUnitTimeScale(udg_fuhuo[1], 1)
call SetUnitManaPercentBJ(udg_fuhuo[1], 100)
if ( ( GetUnitTypeId(udg_fuhuo[1]) == 0x4E303043 ) ) then
call UnitAddAbility(udg_fuhuo[1], 0x41305030)
call UnitRemoveAbility(udg_fuhuo[1], 0x41305030)
else
endif
set udg_fuhuo[1]=null
call DestroyTimerDialog(udg_fhck[1])
call DestroyTimerDialog(udg_fhck2[1])
call DestroyTimerDialog(udg_fhck3[1])
endif
endfunction
function InitTrig_fh01 takes nothing returns nothing
set gg_trg_fh01=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_fh01, udg_FH[1])
call TriggerRegisterTimerExpireEvent(gg_trg_fh01, udg_FH[11])
call TriggerAddAction(gg_trg_fh01, function Trig_fh01Actions)
endfunction
function Trig_fh02Actions takes nothing returns nothing
if ( ( GetExpiredTimer() == udg_FH[12] ) ) then
call UnitRemoveAbility(udg_SmD[2], 0x41304331)
call UnitAddAbility(udg_SmD[2], 0x4130424A)
call SetUnitAbilityLevel(udg_SmD[2], 0x4130424A, udg_zhengshu2[179])
else
call ShowUnit(udg_fuhuo[2], true)
set udg_Dian[168]=GetPlayerStartLocationLoc(s__baka_SPlayer(( s__baka_SGetPlayerId(GetOwningPlayer(udg_fuhuo[2])) + 1 ) - 1))
call ReviveHeroLoc(udg_fuhuo[2], udg_Dian[168], false)
call RemoveLocation(udg_Dian[168])
call QuestMessageBJ(GetPlayersAll(), bj_QUESTMESSAGE_UPDATED, ( ( "|cff009900" + GetPlayerName(GetOwningPlayer(udg_fuhuo[2])) ) + "|r复活了" ))
call SetUnitVertexColor(udg_fuhuo[2], 255, 255, 255, 255)
call s__maphack_SetHeight(udg_fuhuo[2] , 0.00 , 0.00)
call SetUnitTimeScale(udg_fuhuo[2], 1)
call SetUnitManaPercentBJ(udg_fuhuo[2], 100)
if ( ( GetUnitTypeId(udg_fuhuo[2]) == 0x4E303043 ) ) then
call UnitAddAbility(udg_fuhuo[2], 0x41305030)
call UnitRemoveAbility(udg_fuhuo[2], 0x41305030)
else
endif
set udg_fuhuo[2]=null
call DestroyTimerDialog(udg_fhck[2])
call DestroyTimerDialog(udg_fhck2[2])
call DestroyTimerDialog(udg_fhck3[2])
endif
endfunction
function InitTrig_fh02 takes nothing returns nothing
set gg_trg_fh02=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_fh02, udg_FH[2])
call TriggerRegisterTimerExpireEvent(gg_trg_fh02, udg_FH[12])
call TriggerAddAction(gg_trg_fh02, function Trig_fh02Actions)
endfunction
function Trig_fh03Actions takes nothing returns nothing
if ( ( GetExpiredTimer() == udg_FH[13] ) ) then
call UnitRemoveAbility(udg_SmD[3], 0x41304331)
call UnitAddAbility(udg_SmD[3], 0x4130424A)
call SetUnitAbilityLevel(udg_SmD[3], 0x4130424A, udg_zhengshu2[179])
else
call ShowUnit(udg_fuhuo[3], true)
set udg_Dian[168]=GetPlayerStartLocationLoc(s__baka_SPlayer(( s__baka_SGetPlayerId(GetOwningPlayer(udg_fuhuo[3])) + 1 ) - 1))
call ReviveHeroLoc(udg_fuhuo[3], udg_Dian[168], false)
call RemoveLocation(udg_Dian[168])
call QuestMessageBJ(GetPlayersAll(), bj_QUESTMESSAGE_UPDATED, ( ( "|cff009900" + GetPlayerName(GetOwningPlayer(udg_fuhuo[3])) ) + "|r复活了" ))
call SetUnitVertexColor(udg_fuhuo[3], 255, 255, 255, 255)
call s__maphack_SetHeight(udg_fuhuo[3] , 0.00 , 0.00)
call SetUnitTimeScale(udg_fuhuo[3], 1)
call SetUnitManaPercentBJ(udg_fuhuo[3], 100)
if ( ( GetUnitTypeId(udg_fuhuo[3]) == 0x4E303043 ) ) then
call UnitAddAbility(udg_fuhuo[3], 0x41305030)
call UnitRemoveAbility(udg_fuhuo[3], 0x41305030)
else
endif
set udg_fuhuo[3]=null
call DestroyTimerDialog(udg_fhck[3])
call DestroyTimerDialog(udg_fhck2[3])
call DestroyTimerDialog(udg_fhck3[3])
endif
endfunction
function InitTrig_fh03 takes nothing returns nothing
set gg_trg_fh03=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_fh03, udg_FH[3])
call TriggerRegisterTimerExpireEvent(gg_trg_fh03, udg_FH[13])
call TriggerAddAction(gg_trg_fh03, function Trig_fh03Actions)
endfunction
function Trig_fh04Actions takes nothing returns nothing
if ( ( GetExpiredTimer() == udg_FH[14] ) ) then
call UnitRemoveAbility(udg_SmD[4], 0x41304331)
call UnitAddAbility(udg_SmD[4], 0x4130424A)
call SetUnitAbilityLevel(udg_SmD[4], 0x4130424A, udg_zhengshu2[179])
else
call ShowUnit(udg_fuhuo[4], true)
set udg_Dian[168]=GetPlayerStartLocationLoc(s__baka_SPlayer(( s__baka_SGetPlayerId(GetOwningPlayer(udg_fuhuo[4])) + 1 ) - 1))
call ReviveHeroLoc(udg_fuhuo[4], udg_Dian[168], false)
call RemoveLocation(udg_Dian[168])
call QuestMessageBJ(GetPlayersAll(), bj_QUESTMESSAGE_UPDATED, ( ( "|cff009900" + GetPlayerName(GetOwningPlayer(udg_fuhuo[4])) ) + "|r复活了" ))
call SetUnitVertexColor(udg_fuhuo[4], 255, 255, 255, 255)
call s__maphack_SetHeight(udg_fuhuo[4] , 0.00 , 0.00)
call SetUnitTimeScale(udg_fuhuo[4], 1)
call SetUnitManaPercentBJ(udg_fuhuo[4], 100)
if ( ( GetUnitTypeId(udg_fuhuo[4]) == 0x4E303043 ) ) then
call UnitAddAbility(udg_fuhuo[4], 0x41305030)
call UnitRemoveAbility(udg_fuhuo[4], 0x41305030)
else
endif
set udg_fuhuo[4]=null
call DestroyTimerDialog(udg_fhck[4])
call DestroyTimerDialog(udg_fhck2[4])
call DestroyTimerDialog(udg_fhck3[4])
endif
endfunction
function InitTrig_fh04 takes nothing returns nothing
set gg_trg_fh04=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_fh04, udg_FH[4])
call TriggerRegisterTimerExpireEvent(gg_trg_fh04, udg_FH[14])
call TriggerAddAction(gg_trg_fh04, function Trig_fh04Actions)
endfunction
function Trig_fh05Actions takes nothing returns nothing
if ( ( GetExpiredTimer() == udg_FH[15] ) ) then
call UnitRemoveAbility(udg_SmD[5], 0x41304331)
call UnitAddAbility(udg_SmD[5], 0x4130424A)
call SetUnitAbilityLevel(udg_SmD[5], 0x4130424A, udg_zhengshu2[179])
else
call ShowUnit(udg_fuhuo[5], true)
set udg_Dian[168]=GetPlayerStartLocationLoc(s__baka_SPlayer(( s__baka_SGetPlayerId(GetOwningPlayer(udg_fuhuo[5])) + 1 ) - 1))
call ReviveHeroLoc(udg_fuhuo[5], udg_Dian[168], false)
call RemoveLocation(udg_Dian[168])
call QuestMessageBJ(GetPlayersAll(), bj_QUESTMESSAGE_UPDATED, ( ( "|cff009900" + GetPlayerName(GetOwningPlayer(udg_fuhuo[5])) ) + "|r复活了" ))
call SetUnitVertexColor(udg_fuhuo[5], 255, 255, 255, 255)
call s__maphack_SetHeight(udg_fuhuo[5] , 0.00 , 0.00)
call SetUnitTimeScale(udg_fuhuo[5], 1)
call SetUnitManaPercentBJ(udg_fuhuo[5], 100)
if ( ( GetUnitTypeId(udg_fuhuo[5]) == 0x4E303043 ) ) then
call UnitAddAbility(udg_fuhuo[5], 0x41305030)
call UnitRemoveAbility(udg_fuhuo[5], 0x41305030)
else
endif
set udg_fuhuo[5]=null
call DestroyTimerDialog(udg_fhck[5])
call DestroyTimerDialog(udg_fhck2[5])
call DestroyTimerDialog(udg_fhck3[5])
endif
endfunction
function InitTrig_fh05 takes nothing returns nothing
set gg_trg_fh05=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_fh05, udg_FH[5])
call TriggerRegisterTimerExpireEvent(gg_trg_fh05, udg_FH[15])
call TriggerAddAction(gg_trg_fh05, function Trig_fh05Actions)
endfunction
function Trig_fh06Actions takes nothing returns nothing
if ( ( GetExpiredTimer() == udg_FH[16] ) ) then
call UnitRemoveAbility(udg_SmD[6], 0x41304331)
call UnitAddAbility(udg_SmD[6], 0x4130424A)
call SetUnitAbilityLevel(udg_SmD[6], 0x4130424A, udg_zhengshu2[179])
else
call ShowUnit(udg_fuhuo[6], true)
set udg_Dian[168]=GetPlayerStartLocationLoc(s__baka_SPlayer(( s__baka_SGetPlayerId(GetOwningPlayer(udg_fuhuo[6])) + 1 ) - 1))
call ReviveHeroLoc(udg_fuhuo[6], udg_Dian[168], false)
call RemoveLocation(udg_Dian[168])
call QuestMessageBJ(GetPlayersAll(), bj_QUESTMESSAGE_UPDATED, ( ( "|cff0075ff" + GetPlayerName(GetOwningPlayer(udg_fuhuo[6])) ) + "|r复活了" ))
call SetUnitVertexColor(udg_fuhuo[6], 255, 255, 255, 255)
call s__maphack_SetHeight(udg_fuhuo[6] , 0.00 , 0.00)
call SetUnitTimeScale(udg_fuhuo[6], 1)
call SetUnitManaPercentBJ(udg_fuhuo[6], 100)
if ( ( GetUnitTypeId(udg_fuhuo[6]) == 0x4E303043 ) ) then
call UnitAddAbility(udg_fuhuo[6], 0x41305030)
call UnitRemoveAbility(udg_fuhuo[6], 0x41305030)
else
endif
set udg_fuhuo[6]=null
call DestroyTimerDialog(udg_fhck[6])
call DestroyTimerDialog(udg_fhck2[6])
call DestroyTimerDialog(udg_fhck3[6])
endif
endfunction
function InitTrig_fh06 takes nothing returns nothing
set gg_trg_fh06=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_fh06, udg_FH[6])
call TriggerRegisterTimerExpireEvent(gg_trg_fh06, udg_FH[16])
call TriggerAddAction(gg_trg_fh06, function Trig_fh06Actions)
endfunction
function Trig_fh07Actions takes nothing returns nothing
if ( ( GetExpiredTimer() == udg_FH[17] ) ) then
call UnitRemoveAbility(udg_SmD[7], 0x41304331)
call UnitAddAbility(udg_SmD[7], 0x4130424A)
call SetUnitAbilityLevel(udg_SmD[7], 0x4130424A, udg_zhengshu2[179])
else
call ShowUnit(udg_fuhuo[7], true)
set udg_Dian[168]=GetPlayerStartLocationLoc(s__baka_SPlayer(( s__baka_SGetPlayerId(GetOwningPlayer(udg_fuhuo[7])) + 1 ) - 1))
call ReviveHeroLoc(udg_fuhuo[7], udg_Dian[168], false)
call RemoveLocation(udg_Dian[168])
call QuestMessageBJ(GetPlayersAll(), bj_QUESTMESSAGE_UPDATED, ( ( "|cff0075ff" + GetPlayerName(GetOwningPlayer(udg_fuhuo[7])) ) + "|r复活了" ))
call SetUnitVertexColor(udg_fuhuo[7], 255, 255, 255, 255)
call s__maphack_SetHeight(udg_fuhuo[7] , 0.00 , 0.00)
call SetUnitTimeScale(udg_fuhuo[7], 1)
call SetUnitManaPercentBJ(udg_fuhuo[7], 100)
if ( ( GetUnitTypeId(udg_fuhuo[7]) == 0x4E303043 ) ) then
call UnitAddAbility(udg_fuhuo[7], 0x41305030)
call UnitRemoveAbility(udg_fuhuo[7], 0x41305030)
else
endif
set udg_fuhuo[7]=null
call DestroyTimerDialog(udg_fhck[7])
call DestroyTimerDialog(udg_fhck2[7])
call DestroyTimerDialog(udg_fhck3[7])
endif
endfunction
function InitTrig_fh07 takes nothing returns nothing
set gg_trg_fh07=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_fh07, udg_FH[7])
call TriggerRegisterTimerExpireEvent(gg_trg_fh07, udg_FH[17])
call TriggerAddAction(gg_trg_fh07, function Trig_fh07Actions)
endfunction
function Trig_fh08Actions takes nothing returns nothing
if ( ( GetExpiredTimer() == udg_FH[18] ) ) then
call UnitRemoveAbility(udg_SmD[8], 0x41304331)
call UnitAddAbility(udg_SmD[8], 0x4130424A)
call SetUnitAbilityLevel(udg_SmD[8], 0x4130424A, udg_zhengshu2[179])
else
call ShowUnit(udg_fuhuo[8], true)
set udg_Dian[168]=GetPlayerStartLocationLoc(s__baka_SPlayer(( s__baka_SGetPlayerId(GetOwningPlayer(udg_fuhuo[8])) + 1 ) - 1))
call ReviveHeroLoc(udg_fuhuo[8], udg_Dian[168], false)
call RemoveLocation(udg_Dian[168])
call QuestMessageBJ(GetPlayersAll(), bj_QUESTMESSAGE_UPDATED, ( ( "|cff0075ff" + GetPlayerName(GetOwningPlayer(udg_fuhuo[8])) ) + "|r复活了" ))
call SetUnitVertexColor(udg_fuhuo[8], 255, 255, 255, 255)
call s__maphack_SetHeight(udg_fuhuo[8] , 0.00 , 0.00)
call SetUnitTimeScale(udg_fuhuo[8], 1)
call SetUnitManaPercentBJ(udg_fuhuo[8], 100)
if ( ( GetUnitTypeId(udg_fuhuo[8]) == 0x4E303043 ) ) then
call UnitAddAbility(udg_fuhuo[8], 0x41305030)
call UnitRemoveAbility(udg_fuhuo[8], 0x41305030)
else
endif
set udg_fuhuo[8]=null
call DestroyTimerDialog(udg_fhck[8])
call DestroyTimerDialog(udg_fhck2[8])
call DestroyTimerDialog(udg_fhck3[8])
endif
endfunction
function InitTrig_fh08 takes nothing returns nothing
set gg_trg_fh08=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_fh08, udg_FH[8])
call TriggerRegisterTimerExpireEvent(gg_trg_fh08, udg_FH[18])
call TriggerAddAction(gg_trg_fh08, function Trig_fh08Actions)
endfunction
function Trig_fh09Actions takes nothing returns nothing
if ( ( GetExpiredTimer() == udg_FH[19] ) ) then
call UnitRemoveAbility(udg_SmD[9], 0x41304331)
call UnitAddAbility(udg_SmD[9], 0x4130424A)
call SetUnitAbilityLevel(udg_SmD[9], 0x4130424A, udg_zhengshu2[179])
else
call ShowUnit(udg_fuhuo[9], true)
set udg_Dian[168]=GetPlayerStartLocationLoc(s__baka_SPlayer(( s__baka_SGetPlayerId(GetOwningPlayer(udg_fuhuo[9])) + 1 ) - 1))
call ReviveHeroLoc(udg_fuhuo[9], udg_Dian[168], false)
call RemoveLocation(udg_Dian[168])
call QuestMessageBJ(GetPlayersAll(), bj_QUESTMESSAGE_UPDATED, ( ( "|cff0075ff" + GetPlayerName(GetOwningPlayer(udg_fuhuo[9])) ) + "|r复活了" ))
call SetUnitVertexColor(udg_fuhuo[9], 255, 255, 255, 255)
call s__maphack_SetHeight(udg_fuhuo[9] , 0.00 , 0.00)
call SetUnitTimeScale(udg_fuhuo[9], 1)
call SetUnitManaPercentBJ(udg_fuhuo[9], 100)
if ( ( GetUnitTypeId(udg_fuhuo[9]) == 0x4E303043 ) ) then
call UnitAddAbility(udg_fuhuo[9], 0x41305030)
call UnitRemoveAbility(udg_fuhuo[9], 0x41305030)
else
endif
set udg_fuhuo[9]=null
call DestroyTimerDialog(udg_fhck[9])
call DestroyTimerDialog(udg_fhck2[9])
call DestroyTimerDialog(udg_fhck3[9])
endif
endfunction
function InitTrig_fh09 takes nothing returns nothing
set gg_trg_fh09=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_fh09, udg_FH[9])
call TriggerRegisterTimerExpireEvent(gg_trg_fh09, udg_FH[19])
call TriggerAddAction(gg_trg_fh09, function Trig_fh09Actions)
endfunction
function Trig_fh10Actions takes nothing returns nothing
if ( ( GetExpiredTimer() == udg_FH[20] ) ) then
call UnitRemoveAbility(udg_SmD[10], 0x41304331)
call UnitAddAbility(udg_SmD[10], 0x4130424A)
call SetUnitAbilityLevel(udg_SmD[10], 0x4130424A, udg_zhengshu2[179])
else
call ShowUnit(udg_fuhuo[10], true)
set udg_Dian[168]=GetPlayerStartLocationLoc(s__baka_SPlayer(( s__baka_SGetPlayerId(GetOwningPlayer(udg_fuhuo[10])) + 1 ) - 1))
call ReviveHeroLoc(udg_fuhuo[10], udg_Dian[168], false)
call RemoveLocation(udg_Dian[168])
call QuestMessageBJ(GetPlayersAll(), bj_QUESTMESSAGE_UPDATED, ( ( "|cff0075ff" + GetPlayerName(GetOwningPlayer(udg_fuhuo[10])) ) + "|r复活了" ))
call SetUnitVertexColor(udg_fuhuo[10], 255, 255, 255, 255)
call s__maphack_SetHeight(udg_fuhuo[10] , 0.00 , 0.00)
call SetUnitTimeScale(udg_fuhuo[10], 1)
call SetUnitManaPercentBJ(udg_fuhuo[10], 100)
if ( ( GetUnitTypeId(udg_fuhuo[10]) == 0x4E303043 ) ) then
call UnitAddAbility(udg_fuhuo[10], 0x41305030)
call UnitRemoveAbility(udg_fuhuo[10], 0x41305030)
else
endif
set udg_fuhuo[10]=null
call DestroyTimerDialog(udg_fhck[10])
call DestroyTimerDialog(udg_fhck2[10])
call DestroyTimerDialog(udg_fhck3[10])
endif
endfunction
function InitTrig_fh10 takes nothing returns nothing
set gg_trg_fh10=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_fh10, udg_FH[10])
call TriggerRegisterTimerExpireEvent(gg_trg_fh10, udg_FH[20])
call TriggerAddAction(gg_trg_fh10, function Trig_fh10Actions)
endfunction
function Trig_jishiqi79Actions takes nothing returns nothing
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x41303645, false)
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x41303644, false)
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call EnableTrigger(gg_trg_shengfupanding2)
endfunction
function InitTrig_jishiqi79 takes nothing returns nothing
set gg_trg_jishiqi79=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_jishiqi79, udg_jishiqi[79])
call TriggerAddAction(gg_trg_jishiqi79, function Trig_jishiqi79Actions)
endfunction
function Trig_shengfupandingConditions takes nothing returns boolean
return ( ( IsUnitType(GetDyingUnit(), UNIT_TYPE_STRUCTURE) == true ) )
endfunction
function Trig_shengfupandingFunc002Func001Func014A takes nothing returns nothing
if ( ( GetEnumUnit() != GetDyingUnit() ) ) then
call s__Unit_PauseUnitMU(GetEnumUnit() , true , "全局")
call SetUnitInvulnerable(GetEnumUnit(), true)
call SetUnitTimeScale(GetEnumUnit(), 0.00)
else
endif
endfunction
function Trig_shengfupandingFunc002Func005Func014A takes nothing returns nothing
if ( ( GetEnumUnit() != GetDyingUnit() ) ) then
call s__Unit_PauseUnitMU(GetEnumUnit() , true , "全局")
call SetUnitInvulnerable(GetEnumUnit(), true)
call SetUnitTimeScale(GetEnumUnit(), 0.00)
else
endif
endfunction
function Trig_shengfupandingActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( GetUnitTypeId(GetDyingUnit()) == 0x68636173 ) and ( GetOwningPlayer(GetDyingUnit()) == s__baka_SPlayer(10) ) ) then
if ( ( udg_Points > - 1 ) ) then
call EnableUserControl(false)
call PauseTimer(udg_jishiqi[61])
call PauseTimer(udg_timsJS[0])
call PauseTimer(udg_timsJS[1])
call PauseTimer(udg_timsJS[2])
call PauseTimer(udg_timsJS[3])
call PauseTimer(udg_timsJS[5])
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call DisplayTimedTextToPlayer(s__baka_SPlayer(bj_forLoopAIndex - 1), 0, 0, 10.00, "TRIGSTR_915")
call PauseTimer(udg_FH[bj_forLoopAIndex])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call CinematicFadeBJ(bj_CINEFADETYPE_FADEOUT, 0.00, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 100.00, 0, 0, 50.00)
if ( ( udg_Points >= 101 ) ) then
call PlaySoundBJ(gg_snd_GameFound)
call CustomDefeatBJ(s__baka_SPlayer(0), "TRIGSTR_5260")
call CustomDefeatBJ(s__baka_SPlayer(1), "TRIGSTR_5261")
call CustomDefeatBJ(s__baka_SPlayer(2), "TRIGSTR_7139")
call CustomDefeatBJ(s__baka_SPlayer(3), "TRIGSTR_7144")
call CustomDefeatBJ(s__baka_SPlayer(4), "TRIGSTR_7495")
else
call PlaySoundBJ(gg_snd_Tomes01)
set udg_zhengshu2[159]=( udg_zhengshu2[159] + 1 )
set udg_zhengshu2[160]=0
call StartTimerBJ(udg_timsJS[10], true, 1.00)
endif
else
call FogEnable(false)
call FogMaskEnable(false)
call DisableTrigger(gg_trg_shijiao_time)
call ShowInterface(false, 1.00)
set udg_Zhengshu[129]=0
set udg_Dian[129]=GetUnitLoc(GetDyingUnit())
set udg_Dian[11]=PolarProjectionBJ(udg_Dian[129], 250.00, 90.00)
call PanCameraToTimed(GetLocationX(udg_Dian[11]), GetLocationY(udg_Dian[11]), 0.50)
call SetCameraField(CAMERA_FIELD_FIELD_OF_VIEW, 75.00, 7.00)
call CinematicFadeBJ(bj_CINEFADETYPE_FADEOUTIN, 7.00, "ReplaceableTextures\\CameraMasks\\DreamFilter_Mask.blp", 40.00, 80.00, 100.00, 0)
call PlaySoundBJ(gg_snd_NightElfBuildingDeathLarge101)
call PlaySoundBJ(gg_snd_BuildingDeathLargeOrc)
set udg_xuanqu=YDWEGetUnitsInRectAllNull(GetEntireMapRect())
call ForGroupBJ(udg_xuanqu, function Trig_shengfupandingFunc002Func001Func014A)
call DestroyGroup(udg_xuanqu)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ( ( IsUnitType(udg_player[bj_forLoopAIndex], UNIT_TYPE_DEAD) == true ) ) then
call PauseTimer(udg_FH[bj_forLoopAIndex])
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call PauseTimer(udg_youxixitong[0])
call PauseTimer(udg_youxixitong[1])
call PauseTimer(udg_youxixitong[2])
call PauseTimer(udg_youxixitong[3])
call PauseTimer(udg_youxixitong[4])
call PauseTimer(udg_youxixitong[5])
call PauseTimer(udg_youxixitong[6])
call PauseTimer(udg_youxixitong[7])
call StartTimerBJ(udg_Times[130], true, 0.10)
call RemoveLocation(udg_Dian[11])
call PauseTimer(udg_jishiqi[61])
call DisableTrigger(GetTriggeringTrigger())
call KillUnit(gg_unit_e05F_0128)
call KillUnit(gg_unit_e05I_0132)
endif
call KillUnit(gg_unit_h005_0104)
call KillUnit(gg_unit_h003_0105)
call KillUnit(gg_unit_h004_0106)
else
if ( ( GetUnitTypeId(GetDyingUnit()) == 0x68636173 ) and ( GetOwningPlayer(GetDyingUnit()) == s__baka_SPlayer(11) ) ) then
call FogEnable(false)
call FogMaskEnable(false)
call DisableTrigger(gg_trg_shijiao_time)
call ShowInterface(false, 1.00)
set udg_Zhengshu[129]=0
set udg_Dian[129]=GetUnitLoc(GetDyingUnit())
set udg_Dian[11]=PolarProjectionBJ(udg_Dian[129], 250.00, 90.00)
call PanCameraToTimed(GetLocationX(udg_Dian[11]), GetLocationY(udg_Dian[11]), 0.50)
call SetCameraField(CAMERA_FIELD_FIELD_OF_VIEW, 75.00, 7.00)
call CinematicFadeBJ(bj_CINEFADETYPE_FADEOUTIN, 7.00, "ReplaceableTextures\\CameraMasks\\DreamFilter_Mask.blp", 40.00, 80.00, 100.00, 0)
call PlaySoundBJ(gg_snd_NightElfBuildingDeathLarge101)
call PlaySoundBJ(gg_snd_BuildingDeathLargeOrc)
set udg_xuanqu=YDWEGetUnitsInRectAllNull(GetEntireMapRect())
call ForGroupBJ(udg_xuanqu, function Trig_shengfupandingFunc002Func005Func014A)
call DestroyGroup(udg_xuanqu)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ( ( IsUnitType(udg_player[bj_forLoopAIndex], UNIT_TYPE_DEAD) == true ) ) then
call PauseTimer(udg_FH[bj_forLoopAIndex])
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call PauseTimer(udg_youxixitong[0])
call PauseTimer(udg_youxixitong[1])
call PauseTimer(udg_youxixitong[2])
call PauseTimer(udg_youxixitong[3])
call PauseTimer(udg_youxixitong[4])
call PauseTimer(udg_youxixitong[5])
call PauseTimer(udg_youxixitong[6])
call PauseTimer(udg_youxixitong[7])
call StartTimerBJ(udg_Times[129], true, 0.10)
call RemoveLocation(udg_Dian[11])
call KillUnit(gg_unit_h001_0134)
call KillUnit(gg_unit_h009_0136)
call KillUnit(gg_unit_h00A_0135)
call KillUnit(gg_unit_e05G_0101)
call KillUnit(gg_unit_e05H_0133)
call PauseTimer(udg_jishiqi[61])
call DisableTrigger(GetTriggeringTrigger())
else
endif
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_shengfupanding takes nothing returns nothing
set gg_trg_shengfupanding=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_shengfupanding, EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gg_trg_shengfupanding, Condition(function Trig_shengfupandingConditions))
call TriggerAddAction(gg_trg_shengfupanding, function Trig_shengfupandingActions)
endfunction
function Trig_jidiboom_1Actions takes nothing returns nothing
if ( ( udg_Zhengshu[129] < 30 ) ) then
if ( ( udg_Zhengshu[129] == 0 ) ) then
set udg_danwei2[1]=CreateUnitAtLoc(s__baka_SPlayer(10), 0x65303747, udg_Dian[129], 0.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 0.50)
set udg_danwei2[1]=null
else
endif
if ( ( ( I2R(udg_Zhengshu[129]) / 2.00 ) == I2R(( udg_Zhengshu[129] / 2 )) ) ) then
set udg_dian2[0]=PolarProjectionBJ(udg_Dian[129], GetRandomReal(0, 100.00), ( ( 36.00 * I2R(udg_Zhengshu[129]) ) + GetRandomReal(0, 72.00) ))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl", udg_dian2[0]))
call RemoveLocation(udg_dian2[0])
else
endif
set udg_dian2[0]=PolarProjectionBJ(udg_Dian[129], GetRandomReal(0, 140.00), GetRandomReal(0, 360.00))
set udg_danwei2[1]=CreateUnitAtLoc(s__baka_SPlayer(10), 0x65303749, udg_dian2[0], 0.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 0.50)
call s__maphack_SetHeight(udg_danwei2[1] , GetRandomReal(0, 300.00) , 0.00)
call SetUnitTimeScale(udg_danwei2[1], GetRandomReal(1.00, 2.00))
call SetUnitAnimation(udg_danwei2[1], "death")
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
else
if ( ( udg_Zhengshu[129] == 30 ) ) then
call PauseTimer(udg_Times[129])
call StartTimerBJ(udg_Times[129], false, 3.00)
set udg_danwei2[1]=CreateUnitAtLoc(s__baka_SPlayer(10), 0x65303748, udg_Dian[129], 0.00)
call SetUnitTimeScale(udg_danwei2[1], 0.50)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 0.50)
set udg_danwei2[1]=null
call PlaySoundBJ(gg_snd_UndeadBuildingDeathLarge1)
call PlaySoundBJ(gg_snd_ClanInvitation)
call GameOver(0)
else
if ( ( udg_Zhengshu[129] == 31 ) ) then
call StartTimerBJ(udg_Times[129], false, 1.00)
call ShowInterface(true, 0.80)
call SetCameraTargetController(gg_unit_hcas_0020, 0, 0, false)
else
call MultiboardSuppressDisplay(false)
call MultiboardDisplay(udg_duomianban[0], true)
call MultiboardMinimize(udg_duomianban[0], false)
call CustomDefeatBJ(s__baka_SPlayer(5), "TRIGSTR_7192")
call CustomDefeatBJ(s__baka_SPlayer(6), "TRIGSTR_7194")
call CustomDefeatBJ(s__baka_SPlayer(7), "TRIGSTR_7196")
call CustomDefeatBJ(s__baka_SPlayer(8), "TRIGSTR_7197")
call CustomDefeatBJ(s__baka_SPlayer(9), "TRIGSTR_7198")
call CustomVictoryBJ(s__baka_SPlayer(0), true, true)
call CustomVictoryBJ(s__baka_SPlayer(1), true, true)
call CustomVictoryBJ(s__baka_SPlayer(2), true, true)
call CustomVictoryBJ(s__baka_SPlayer(3), true, true)
call CustomVictoryBJ(s__baka_SPlayer(4), true, true)
endif
endif
endif
set udg_Zhengshu[129]=( udg_Zhengshu[129] + 1 )
endfunction
function InitTrig_jidiboom_1 takes nothing returns nothing
set gg_trg_jidiboom_1=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_jidiboom_1, udg_Times[129])
call TriggerAddAction(gg_trg_jidiboom_1, function Trig_jidiboom_1Actions)
endfunction
function Trig_jidiboom_2Actions takes nothing returns nothing
if ( ( udg_Zhengshu[129] < 30 ) ) then
if ( ( udg_Zhengshu[129] == 0 ) ) then
set udg_danwei2[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x65303747, udg_Dian[129], 0.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 0.50)
set udg_danwei2[1]=null
else
endif
if ( ( ( I2R(udg_Zhengshu[129]) / 2.00 ) == I2R(( udg_Zhengshu[129] / 2 )) ) ) then
set udg_dian2[0]=PolarProjectionBJ(udg_Dian[129], GetRandomReal(0, 100.00), ( ( 36.00 * I2R(udg_Zhengshu[129]) ) + GetRandomReal(0, 72.00) ))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl", udg_dian2[0]))
call RemoveLocation(udg_dian2[0])
else
endif
set udg_dian2[0]=PolarProjectionBJ(udg_Dian[129], GetRandomReal(0, 140.00), GetRandomReal(0, 360.00))
set udg_danwei2[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x65303749, udg_dian2[0], 0.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 0.50)
call s__maphack_SetHeight(udg_danwei2[1] , GetRandomReal(0, 300.00) , 0.00)
call SetUnitTimeScale(udg_danwei2[1], GetRandomReal(1.00, 2.00))
call SetUnitAnimation(udg_danwei2[1], "death")
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
else
if ( ( udg_Zhengshu[129] == 30 ) ) then
call PauseTimer(udg_Times[130])
call StartTimerBJ(udg_Times[130], false, 3.00)
set udg_danwei2[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x65303748, udg_Dian[129], 0.00)
call SetUnitTimeScale(udg_danwei2[1], 0.50)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 0.50)
set udg_danwei2[1]=null
call PlaySoundBJ(gg_snd_UndeadBuildingDeathLarge1)
call PlaySoundBJ(gg_snd_ClanInvitation)
call GameOver(1)
else
if ( ( udg_Zhengshu[129] == 31 ) ) then
call StartTimerBJ(udg_Times[130], false, 1.00)
call ShowInterface(true, 0.80)
call SetCameraTargetController(gg_unit_hcas_0015, 0, 0, false)
else
call MultiboardSuppressDisplay(false)
call MultiboardDisplay(udg_duomianban[0], true)
call MultiboardMinimize(udg_duomianban[0], false)
call CustomDefeatBJ(s__baka_SPlayer(0), "TRIGSTR_7159")
call CustomDefeatBJ(s__baka_SPlayer(1), "TRIGSTR_7160")
call CustomDefeatBJ(s__baka_SPlayer(2), "TRIGSTR_7180")
call CustomDefeatBJ(s__baka_SPlayer(3), "TRIGSTR_7181")
call CustomDefeatBJ(s__baka_SPlayer(4), "TRIGSTR_7182")
call CustomVictoryBJ(s__baka_SPlayer(5), true, true)
call CustomVictoryBJ(s__baka_SPlayer(6), true, true)
call CustomVictoryBJ(s__baka_SPlayer(7), true, true)
call CustomVictoryBJ(s__baka_SPlayer(8), true, true)
call CustomVictoryBJ(s__baka_SPlayer(9), true, true)
endif
endif
endif
set udg_Zhengshu[129]=( udg_Zhengshu[129] + 1 )
endfunction
function InitTrig_jidiboom_2 takes nothing returns nothing
set gg_trg_jidiboom_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_jidiboom_2, udg_Times[130])
call TriggerAddAction(gg_trg_jidiboom_2, function Trig_jidiboom_2Actions)
endfunction
function Trig_guanqiachongzhiActions takes nothing returns nothing
set udg_zhengshu2[160]=( udg_zhengshu2[160] + 1 )
if ( ( udg_zhengshu2[160] <= 15 ) ) then
if ( ( udg_zhengshu2[160] >= 5 ) ) then
if ( ( udg_zhengshu2[160] == 5 ) ) then
if ( ( udg_zhengshu2[159] <= 1 ) ) then
call TimerDialogDisplay(udg_timesJSP, false)
call SetUserControlForceOn(bj_FORCE_PLAYER[0])
call DialogClear(udg_duihuakuang[10])
call DialogSetMessage(udg_duihuakuang[10], "TRIGSTR_547")
call DialogAddButtonWithHotkeyBJ(udg_duihuakuang[10], "TRIGSTR_1166", 0x59)
set udg_anniu[10]=GetLastCreatedButtonBJ()
call DialogAddButtonWithHotkeyBJ(udg_duihuakuang[10], "TRIGSTR_1167", 0x4E)
call DialogDisplay(s__baka_SPlayer(0), udg_duihuakuang[10], true)
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( "剩余|cffff0000" + ( I2S(( 2 - udg_zhengshu2[159] )) + "|r次回合重置的机会" ) ))
else
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, "TRIGSTR_1169")
endif
else
endif
call DisplayTimedTextToForce(GetPlayersAll(), 2.00, ( "剩余时间：|cffff0000" + ( I2S(( 15 - udg_zhengshu2[160] )) + "|r" ) ))
call StopSoundBJ(gg_snd_BattleNetTick, false)
call PlaySoundBJ(gg_snd_BattleNetTick)
else
endif
else
call PauseTimer(udg_timsJS[10])
call PlaySoundBJ(gg_snd_GameFound)
call CustomDefeatBJ(s__baka_SPlayer(0), "TRIGSTR_1158")
call CustomDefeatBJ(s__baka_SPlayer(1), "TRIGSTR_1159")
call CustomDefeatBJ(s__baka_SPlayer(2), "TRIGSTR_1160")
call CustomDefeatBJ(s__baka_SPlayer(3), "TRIGSTR_1161")
call CustomDefeatBJ(s__baka_SPlayer(4), "TRIGSTR_1162")
endif
endfunction
function InitTrig_guanqiachongzhi takes nothing returns nothing
set gg_trg_guanqiachongzhi=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_guanqiachongzhi, udg_timsJS[10])
call TriggerAddAction(gg_trg_guanqiachongzhi, function Trig_guanqiachongzhiActions)
endfunction
function Trig_guanqiachongzhi_ifFunc001Func013A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[0], UNIT_TYPE_UNDEAD) == true ) ) then
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x75303039 ) ) then
call RemoveUnit(udg_danwei2[0])
else
call KillUnit(udg_danwei2[0])
endif
else
endif
set udg_danwei2[0]=null
endfunction
function Trig_guanqiachongzhi_ifFunc001Func016A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_STRUCTURE) == false ) ) then
call KillUnit(udg_danwei2[0])
else
endif
set udg_danwei2[0]=null
endfunction
function Trig_guanqiachongzhi_ifActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( GetClickedButtonBJ() == udg_anniu[10] ) ) then
call EnableUserControl(true)
call PauseTimer(udg_timsJS[10])
set udg_Points=( udg_Points - 1 )
call StopSoundBJ(gg_snd_GameFound, false)
call StopSoundBJ(gg_snd_Comradeship, false)
call StopSoundBJ(gg_snd_IllidansTheme, false)
call CinematicFadeBJ(bj_CINEFADETYPE_FADEIN, 0.50, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 100.00, 0, 0, 50.00)
call CreateNUnitsAtLoc(1, 0x68636173, s__baka_SPlayer(10), udg_dian2[157], bj_UNIT_FACING)
call CreateNUnitsAtLoc(1, 0x68303035, s__baka_SPlayer(10), udg_dian2[158], bj_UNIT_FACING)
call CreateNUnitsAtLoc(1, 0x68303033, s__baka_SPlayer(10), udg_dian2[159], bj_UNIT_FACING)
call CreateNUnitsAtLoc(1, 0x68303034, s__baka_SPlayer(10), udg_dian2[160], bj_UNIT_FACING)
set udg_xuanqu=YDWEGetUnitsInRectOfPlayerNull(GetPlayableMapRect() , s__baka_SPlayer(11))
call ForGroupBJ(udg_xuanqu, function Trig_guanqiachongzhi_ifFunc001Func013A)
call DestroyGroup(udg_xuanqu)
set udg_xuanqu=YDWEGetUnitsInRectOfPlayerNull(GetPlayableMapRect() , s__baka_SPlayer(10))
call ForGroupBJ(udg_xuanqu, function Trig_guanqiachongzhi_ifFunc001Func016A)
call DestroyGroup(udg_xuanqu)
call PlaySoundBJ(gg_snd_Doom)
call PlaySoundBJ(gg_snd_QuestNew)
call StartTimerBJ(udg_jishiqi[60], false, 20.00)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call UnitRemoveAbility(udg_SmD[bj_forLoopAIndex], 0x41303050)
call UnitAddAbility(udg_SmD[bj_forLoopAIndex], 0x41303050)
call DisplayTimedTextToPlayer(s__baka_SPlayer(bj_forLoopAIndex - 1), 0, 0, 10.00, "TRIGSTR_1163")
call SetUnitLifePercentBJ(udg_player[bj_forLoopAIndex], 100)
call SetUnitManaPercentBJ(udg_player[bj_forLoopAIndex], 100)
if ( ( IsUnitType(udg_player[bj_forLoopAIndex], UNIT_TYPE_DEAD) == true ) and ( udg_player[bj_forLoopAIndex] != null ) ) then
call PauseTimer(udg_FH[bj_forLoopAIndex])
call StartTimerBJ(udg_FH[bj_forLoopAIndex], false, 0.00)
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
else
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_guanqiachongzhi_if takes nothing returns nothing
set gg_trg_guanqiachongzhi_if=CreateTrigger()
call TriggerRegisterDialogEvent(gg_trg_guanqiachongzhi_if, udg_duihuakuang[10])
call TriggerAddAction(gg_trg_guanqiachongzhi_if, function Trig_guanqiachongzhi_ifActions)
endfunction
function Trig_shengfupanding2Conditions takes nothing returns boolean
return ( ( udg_Points == - 1 ) )
endfunction
function Trig_shengfupanding2Actions takes nothing returns nothing
set udg_zhengshu[72]=0
set udg_zhengshu[73]=0
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=5
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ( ( GetPlayerSlotState(s__baka_SPlayer(bj_forLoopAIndex - 1)) == PLAYER_SLOT_STATE_PLAYING ) ) then
else
set udg_zhengshu[72]=( udg_zhengshu[72] + 1 )
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
if ( ( udg_zhengshu[72] == 5 ) ) then
call ExplodeUnitBJ(gg_unit_hcas_0015)
else
endif
set bj_forLoopAIndex=6
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ( ( GetPlayerSlotState(s__baka_SPlayer(bj_forLoopAIndex - 1)) == PLAYER_SLOT_STATE_PLAYING ) ) then
else
set udg_zhengshu[73]=( udg_zhengshu[73] + 1 )
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
if ( ( udg_zhengshu[73] == 5 ) ) then
call ExplodeUnitBJ(gg_unit_hcas_0020)
else
endif
endfunction
function InitTrig_shengfupanding2 takes nothing returns nothing
set gg_trg_shengfupanding2=CreateTrigger()
call DisableTrigger(gg_trg_shengfupanding2)
call TriggerRegisterTimerEventPeriodic(gg_trg_shengfupanding2, 15.00)
call TriggerAddCondition(gg_trg_shengfupanding2, Condition(function Trig_shengfupanding2Conditions))
call TriggerAddAction(gg_trg_shengfupanding2, function Trig_shengfupanding2Actions)
endfunction
function Trig_SCActions takes nothing returns nothing
call SetUnitVertexColor(gg_unit_n00Y_0109, 255, 255, 255, 255)
call SetUnitVertexColor(gg_unit_n00Y_0111, 255, 255, 255, 255)
set udg_SC[2]=true
endfunction
function InitTrig_SC takes nothing returns nothing
set gg_trg_SC=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_SC, udg_youxixitong[4])
call TriggerAddAction(gg_trg_SC, function Trig_SCActions)
endfunction
function Trig_water_SCConditions takes nothing returns boolean
return ( ( udg_SC[1] == true ) and ( IsUnitType(GetEnteringUnit(), UNIT_TYPE_HERO) == true ) and ( IsUnitType(GetEnteringUnit(), UNIT_TYPE_DEAD) == false ) and ( GetUnitTypeId(GetEnteringUnit()) != 0x4F303030 ) )
endfunction
function Trig_water_SCActions takes nothing returns nothing
set udg_SC[1]=false
set udg_danwei2[0]=GetEnteringUnit()
call StartTimerBJ(udg_times[81], false, 30.00)
set udg_dian2[1]=GetUnitLoc(gg_unit_n00Z_0112)
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Other\\ToonBoom\\ToonBoom.mdl", udg_dian2[1]))
if ( ( ( GetRandomInt(1, 3) != 1 ) or ( ( GetRandomInt(1, 2) == 1 ) and ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303231)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303158)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303037)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303256)) == true ) ) ) ) ) then
set udg_danwei2[80]=GetEnteringUnit()
set udg_zhengshu2[80]=0
call StartTimerBJ(udg_times[80], true, 0.05)
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_8985")
call PlaySoundOnUnitBJ(gg_snd_BattleShipDeath1, 100, udg_danwei2[80])
else
call s__baka_IssueTargetOrderById2(gg_unit_n00Z_0112 , 852095 , udg_danwei2[0])
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_8984")
endif
call SetUnitVertexColor(gg_unit_n00Z_0112, 0, 50, 50, 128)
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[1])
endfunction
function InitTrig_water_SC takes nothing returns nothing
set gg_trg_water_SC=CreateTrigger()
call YDWETriggerRegisterEnterRectSimpleNull(gg_trg_water_SC , gg_rct_baga_1)
call TriggerAddCondition(gg_trg_water_SC, Condition(function Trig_water_SCConditions))
call TriggerAddAction(gg_trg_water_SC, function Trig_water_SCActions)
endfunction
function Trig_water_SC_2Actions takes nothing returns nothing
set udg_zhengshu2[80]=( udg_zhengshu2[80] + 1 )
if ( ( udg_zhengshu2[80] < 65 ) and ( IsUnitType(udg_danwei2[80], UNIT_TYPE_DEAD) == false ) ) then
set udg_dian2[0]=GetRectCenter(gg_rct_baga_1)
set udg_dian2[1]=GetRectCenter(gg_rct_baga_2)
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], ( 80.00 * I2R(udg_zhengshu2[80]) ), AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl", udg_dian2[2]))
call SetUnitX(udg_danwei2[80], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[80], GetLocationY(udg_dian2[2]))
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
else
call PauseTimer(udg_times[80])
set udg_danwei2[80]=null
endif
endfunction
function InitTrig_water_SC_2 takes nothing returns nothing
set gg_trg_water_SC_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_water_SC_2, udg_times[80])
call TriggerAddAction(gg_trg_water_SC_2, function Trig_water_SC_2Actions)
endfunction
function Trig_water_SC_3Actions takes nothing returns nothing
set udg_SC[1]=true
call SetUnitVertexColor(gg_unit_n00Z_0112, 0, 255, 255, 255)
endfunction
function InitTrig_water_SC_3 takes nothing returns nothing
set gg_trg_water_SC_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_water_SC_3, udg_times[81])
call TriggerAddAction(gg_trg_water_SC_3, function Trig_water_SC_3Actions)
endfunction
function Trig_star_SC_1Conditions takes nothing returns boolean
return ( ( udg_SC[2] == true ) and ( IsUnitType(GetEnteringUnit(), UNIT_TYPE_HERO) == true ) and ( IsUnitType(GetEnteringUnit(), UNIT_TYPE_DEAD) == false ) and ( GetUnitTypeId(GetEnteringUnit()) != 0x4F303030 ) )
endfunction
function Trig_star_SC_1Actions takes nothing returns nothing
set udg_SC[2]=false
set udg_danwei2[0]=GetEnteringUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[1]=GetUnitLoc(gg_unit_n00Y_0109)
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Other\\ToonBoom\\ToonBoom.mdl", udg_dian2[1]))
if ( ( ( GetRandomInt(1, 3) != 1 ) or ( ( GetRandomInt(1, 2) == 1 ) and ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303231)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303158)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303037)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303256)) == true ) ) ) ) ) then
set udg_zhengshu2[3]=GetRandomInt(1, 4)
if ( ( ( udg_zhengshu2[3] == 1 ) or ( ( udg_zhengshu2[3] != 1 ) and ( GetRandomInt(1, 4) == 1 ) and ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303231)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303158)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303037)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303256)) == true ) ) ) ) ) then
call s__baka_IssueTargetOrderById2(gg_unit_n00Y_0109 , 852066 , udg_danwei2[0])
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_8171")
else
endif
if ( ( ( udg_zhengshu2[3] == 2 ) or ( ( udg_zhengshu2[3] != 2 ) and ( GetRandomInt(1, 4) == 1 ) and ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303231)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303158)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303037)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303256)) == true ) ) ) ) ) then
call s__baka_IssueTargetOrderById2(gg_unit_n00Y_0109 , 852069 , udg_danwei2[0])
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_8172")
else
endif
if ( ( ( udg_zhengshu2[3] == 3 ) or ( ( udg_zhengshu2[3] != 3 ) and ( GetRandomInt(1, 4) == 1 ) and ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303231)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303158)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303037)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303256)) == true ) ) ) ) ) then
call s__baka_IssueTargetOrderById2(gg_unit_n00Y_0109 , 852160 , udg_danwei2[0])
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_8173")
else
endif
if ( ( ( udg_zhengshu2[3] == 4 ) or ( ( udg_zhengshu2[3] != 4 ) and ( GetRandomInt(1, 4) == 1 ) and ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303231)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303158)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303037)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303256)) == true ) ) ) ) ) then
call s__baka_IssueTargetOrderById2(gg_unit_n00Y_0109 , 852101 , udg_danwei2[0])
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_8219")
else
endif
else
set udg_zhengshu2[3]=GetRandomInt(1, 4)
if ( ( udg_zhengshu2[3] == 1 ) ) then
call s__baka_IssueTargetOrderById2(gg_unit_n00Y_0109 , 852668 , udg_danwei2[0])
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_7677")
else
if ( ( udg_zhengshu2[3] == 2 ) ) then
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_5608")
call UnitDamageTarget(gg_unit_n00Y_0109, udg_danwei2[0], ( GetUnitState(udg_danwei2[0], UNIT_STATE_MAX_LIFE) * 0.30 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNIVERSAL, WEAPON_TYPE_WHOKNOWS)
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\NightElf\\NEDeathSmall\\NEDeathSmall.mdl", udg_dian2[0]))
else
if ( ( udg_zhengshu2[3] == 3 ) ) then
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_5607")
call SetUnitManaBJ(udg_danwei2[0], ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) * 0.50 ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Undead\\DeathPact\\DeathPactTarget.mdl", udg_dian2[0]))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Undead\\UndeadDissipate\\UndeadDissipate.mdl", udg_dian2[0]))
else
if ( ( udg_zhengshu2[3] == 4 ) ) then
call s__baka_IssueTargetOrderById2(gg_unit_n00Y_0109 , 852486 , udg_danwei2[0])
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_1234")
else
endif
endif
endif
endif
endif
call SetUnitVertexColor(gg_unit_n00Y_0109, 50, 50, 50, 128)
call SetUnitVertexColor(gg_unit_n00Y_0111, 50, 50, 50, 128)
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
set udg_danwei2[0]=null
endfunction
function InitTrig_star_SC_1 takes nothing returns nothing
set gg_trg_star_SC_1=CreateTrigger()
call YDWETriggerRegisterEnterRectSimpleNull(gg_trg_star_SC_1 , gg_rct_baga_2)
call TriggerAddCondition(gg_trg_star_SC_1, Condition(function Trig_star_SC_1Conditions))
call TriggerAddAction(gg_trg_star_SC_1, function Trig_star_SC_1Actions)
endfunction
function Trig_star_SC_2Conditions takes nothing returns boolean
return ( ( udg_SC[2] == true ) and ( IsUnitType(GetEnteringUnit(), UNIT_TYPE_HERO) == true ) and ( IsUnitType(GetEnteringUnit(), UNIT_TYPE_DEAD) == false ) and ( GetUnitTypeId(GetEnteringUnit()) != 0x4F303030 ) )
endfunction
function Trig_star_SC_2Actions takes nothing returns nothing
set udg_SC[2]=false
set udg_danwei2[0]=GetEnteringUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[1]=GetUnitLoc(gg_unit_n00Y_0111)
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Other\\ToonBoom\\ToonBoom.mdl", udg_dian2[1]))
if ( ( ( GetRandomInt(1, 3) != 1 ) or ( ( GetRandomInt(1, 2) == 1 ) and ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303231)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303158)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303037)) == true ) ) ) ) ) then
set udg_zhengshu2[3]=GetRandomInt(1, 4)
if ( ( ( udg_zhengshu2[3] == 1 ) or ( ( udg_zhengshu2[3] != 1 ) and ( GetRandomInt(1, 4) == 1 ) and ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303231)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303158)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303037)) == true ) ) ) ) ) then
call s__baka_IssueTargetOrderById2(gg_unit_n00Y_0111 , 852066 , udg_danwei2[0])
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_8986")
else
endif
if ( ( ( udg_zhengshu2[3] == 2 ) or ( ( udg_zhengshu2[3] != 2 ) and ( GetRandomInt(1, 4) == 1 ) and ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303231)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303158)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303037)) == true ) ) ) ) ) then
call s__baka_IssueTargetOrderById2(gg_unit_n00Y_0111 , 852069 , udg_danwei2[0])
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_8987")
else
endif
if ( ( ( udg_zhengshu2[3] == 3 ) or ( ( udg_zhengshu2[3] != 3 ) and ( GetRandomInt(1, 4) == 1 ) and ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303231)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303158)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303037)) == true ) ) ) ) ) then
call s__baka_IssueTargetOrderById2(gg_unit_n00Y_0111 , 852160 , udg_danwei2[0])
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_8989")
else
endif
if ( ( ( udg_zhengshu2[3] == 4 ) or ( ( udg_zhengshu2[3] != 4 ) and ( GetRandomInt(1, 4) == 1 ) and ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303231)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303158)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303037)) == true ) ) ) ) ) then
call s__baka_IssueTargetOrderById2(gg_unit_n00Y_0111 , 852101 , udg_danwei2[0])
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_9724")
else
endif
else
set udg_zhengshu2[3]=GetRandomInt(1, 4)
if ( ( udg_zhengshu2[3] == 1 ) ) then
call s__baka_IssueTargetOrderById2(gg_unit_n00Y_0111 , 852668 , udg_danwei2[0])
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_8990")
else
if ( ( udg_zhengshu2[3] == 2 ) ) then
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_8991")
call UnitDamageTarget(gg_unit_n00Y_0111, udg_danwei2[0], ( GetUnitState(udg_danwei2[0], UNIT_STATE_MAX_LIFE) * 0.30 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNIVERSAL, WEAPON_TYPE_WHOKNOWS)
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\NightElf\\NEDeathSmall\\NEDeathSmall.mdl", udg_dian2[0]))
else
if ( ( udg_zhengshu2[3] == 3 ) ) then
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_8992")
call SetUnitManaBJ(udg_danwei2[0], ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) * 0.50 ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Undead\\DeathPact\\DeathPactTarget.mdl", udg_dian2[0]))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Undead\\UndeadDissipate\\UndeadDissipate.mdl", udg_dian2[0]))
else
if ( ( udg_zhengshu2[3] == 4 ) ) then
call s__baka_IssueTargetOrderById2(gg_unit_n00Y_0111 , 852486 , udg_danwei2[0])
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_9471")
else
endif
endif
endif
endif
endif
call SetUnitVertexColor(gg_unit_n00Y_0109, 50, 50, 50, 128)
call SetUnitVertexColor(gg_unit_n00Y_0111, 50, 50, 50, 128)
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
set udg_danwei2[0]=null
call StartTimerBJ(udg_Times[36], false, 10.00)
endfunction
function InitTrig_star_SC_2 takes nothing returns nothing
set gg_trg_star_SC_2=CreateTrigger()
call YDWETriggerRegisterEnterRectSimpleNull(gg_trg_star_SC_2 , gg_rct_baga_3)
call TriggerAddCondition(gg_trg_star_SC_2, Condition(function Trig_star_SC_2Conditions))
call TriggerAddAction(gg_trg_star_SC_2, function Trig_star_SC_2Actions)
endfunction
function Trig_tree_SC_1Conditions takes nothing returns boolean
return ( ( udg_SC[3] == true ) and ( IsUnitType(GetEnteringUnit(), UNIT_TYPE_HERO) == true ) and ( IsUnitType(GetEnteringUnit(), UNIT_TYPE_DEAD) == false ) and ( GetUnitTypeId(GetEnteringUnit()) != 0x4F303030 ) )
endfunction
function Trig_tree_SC_1Actions takes nothing returns nothing
set udg_SC[3]=false
set udg_danwei2[0]=GetEnteringUnit()
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) <= 5 ) ) then
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=5
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call DisplayTimedTextToPlayer(s__baka_SPlayer(bj_forLoopAIndex - 1), 0, 0, 10.00, "TRIGSTR_4815")
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
else
endif
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) >= 6 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) <= 10 ) ) then
set bj_forLoopAIndex=6
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call DisplayTimedTextToPlayer(s__baka_SPlayer(bj_forLoopAIndex - 1), 0, 0, 10.00, "TRIGSTR_4291")
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
else
endif
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[1]=GetUnitLoc(gg_unit_n017_0116)
call DestroyEffect(AddSpecialEffectLoc("units\\nightelf\\OwlSCOUT\\OwlSCOUT.mdl", udg_dian2[0]))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Other\\ToonBoom\\ToonBoom.mdl", udg_dian2[1]))
set udg_dian2[2]=Location(- 2974.00, 521.00)
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303645, udg_dian2[2], 270.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 8.00)
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[2])
set udg_dian2[2]=Location(- 2040.00, - 592.00)
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303645, udg_dian2[2], 270.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 10.00)
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[2])
set udg_dian2[2]=Location(- 1448.00, - 1700.00)
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303645, udg_dian2[2], 270.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 10.00)
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[2])
set udg_dian2[2]=Location(- 122.00, - 2580.00)
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303645, udg_dian2[2], 270.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 10.00)
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[2])
set udg_dian2[2]=Location(700.00, - 3600.00)
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303645, udg_dian2[2], 270.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 10.00)
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[2])
set udg_dian2[2]=Location(- 3360.00, - 1030.00)
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303645, udg_dian2[2], 270.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 10.00)
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[2])
set udg_dian2[2]=Location(- 2219.00, - 2500.00)
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303645, udg_dian2[2], 270.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 10.00)
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[2])
set udg_dian2[2]=Location(- 609.00, - 4236.00)
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303645, udg_dian2[2], 270.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 10.00)
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[2])
set udg_dian2[2]=Location(- 3580.00, - 2570.00)
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303645, udg_dian2[2], 270.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 10.00)
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[2])
set udg_dian2[2]=Location(- 1672.00, - 4385.00)
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303645, udg_dian2[2], 270.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 8.00)
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[2])
call SetUnitVertexColor(gg_unit_n017_0116, 0, 255, 50, 32)
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
call StartTimerBJ(udg_Times[36], false, 180.00)
endfunction
function InitTrig_tree_SC_1 takes nothing returns nothing
set gg_trg_tree_SC_1=CreateTrigger()
call YDWETriggerRegisterEnterRectSimpleNull(gg_trg_tree_SC_1 , gg_rct_baga_4)
call TriggerAddCondition(gg_trg_tree_SC_1, Condition(function Trig_tree_SC_1Conditions))
call TriggerAddAction(gg_trg_tree_SC_1, function Trig_tree_SC_1Actions)
endfunction
function Trig_tree_SC_1_5Actions takes nothing returns nothing
set udg_SC[3]=true
call SetUnitVertexColor(gg_unit_n017_0116, 0, 255, 50, 255)
endfunction
function InitTrig_tree_SC_1_5 takes nothing returns nothing
set gg_trg_tree_SC_1_5=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_tree_SC_1_5, udg_Times[36])
call TriggerAddAction(gg_trg_tree_SC_1_5, function Trig_tree_SC_1_5Actions)
endfunction
function Trig_tree_SC_2Conditions takes nothing returns boolean
return ( ( udg_SC[4] == true ) and ( IsUnitType(GetEnteringUnit(), UNIT_TYPE_HERO) == true ) and ( IsUnitType(GetEnteringUnit(), UNIT_TYPE_DEAD) == false ) and ( GetUnitTypeId(GetEnteringUnit()) != 0x4F303030 ) )
endfunction
function Trig_tree_SC_2Actions takes nothing returns nothing
set udg_SC[4]=false
set udg_danwei2[0]=GetEnteringUnit()
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) <= 5 ) ) then
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=5
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call DisplayTimedTextToPlayer(s__baka_SPlayer(bj_forLoopAIndex - 1), 0, 0, 10.00, "TRIGSTR_4817")
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
else
endif
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) >= 6 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) <= 10 ) ) then
set bj_forLoopAIndex=6
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call DisplayTimedTextToPlayer(s__baka_SPlayer(bj_forLoopAIndex - 1), 0, 0, 10.00, "TRIGSTR_3523")
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
else
endif
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[1]=GetUnitLoc(gg_unit_n015_0115)
call DestroyEffect(AddSpecialEffectLoc("units\\nightelf\\OwlSCOUT\\OwlSCOUT.mdl", udg_dian2[0]))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Other\\ToonBoom\\ToonBoom.mdl", udg_dian2[1]))
set udg_dian2[2]=Location(3480.00, - 1300.00)
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303645, udg_dian2[2], 270.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 8.00)
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[2])
set udg_dian2[2]=Location(2230.00, 370.00)
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303645, udg_dian2[2], 270.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 8.00)
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[2])
set udg_dian2[2]=Location(1343.00, 1388.00)
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303645, udg_dian2[2], 270.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 8.00)
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[2])
set udg_dian2[2]=Location(138.00, 2251.00)
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303645, udg_dian2[2], 270.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 8.00)
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[2])
set udg_dian2[2]=Location(- 585.00, 2942.00)
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303645, udg_dian2[2], 270.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 10.00)
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[2])
set udg_dian2[2]=Location(3650.00, 750.00)
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303645, udg_dian2[2], 270.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 10.00)
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[2])
set udg_dian2[2]=Location(2290.00, 2150.00)
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303645, udg_dian2[2], 270.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 10.00)
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[2])
set udg_dian2[2]=Location(780.00, 3600.00)
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303645, udg_dian2[2], 270.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 10.00)
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[2])
set udg_dian2[2]=Location(3950.00, 2300.00)
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303645, udg_dian2[2], 270.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 10.00)
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[2])
set udg_dian2[2]=Location(2750.00, 3311.00)
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303645, udg_dian2[2], 270.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 10.00)
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[2])
set udg_dian2[2]=Location(1400.00, 4200.00)
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303645, udg_dian2[2], 270.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 10.00)
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[2])
call SetUnitVertexColor(gg_unit_n015_0115, 255, 255, 0, 32)
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
call StartTimerBJ(udg_Times[37], false, 180.00)
endfunction
function InitTrig_tree_SC_2 takes nothing returns nothing
set gg_trg_tree_SC_2=CreateTrigger()
call YDWETriggerRegisterEnterRectSimpleNull(gg_trg_tree_SC_2 , gg_rct_baga_5)
call TriggerAddCondition(gg_trg_tree_SC_2, Condition(function Trig_tree_SC_2Conditions))
call TriggerAddAction(gg_trg_tree_SC_2, function Trig_tree_SC_2Actions)
endfunction
function Trig_tree_SC_2_5Actions takes nothing returns nothing
set udg_SC[4]=true
call SetUnitVertexColor(gg_unit_n015_0115, 255, 255, 0, 255)
endfunction
function InitTrig_tree_SC_2_5 takes nothing returns nothing
set gg_trg_tree_SC_2_5=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_tree_SC_2_5, udg_Times[37])
call TriggerAddAction(gg_trg_tree_SC_2_5, function Trig_tree_SC_2_5Actions)
endfunction
function Trig_startActions takes nothing returns nothing
set udg_zhengshu[64]=0
call StartTimerBJ(udg_jishiqi[61], true, 0.50)
if ( ( udg_Points > - 1 ) ) then
call DisableTrigger(gg_trg_hg)
set udg_Points=( udg_Points + 1 )
call PlaySoundBJ(gg_snd_QuestNew)
if ( ( udg_Points >= 101 ) ) then
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call DisplayTimedTextToPlayer(s__baka_SPlayer(bj_forLoopAIndex - 1), 0, 0, 10.00, "TRIGSTR_1328")
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call SetHeroLevelBJ(udg_player[bj_forLoopAIndex], 10, false)
call SetPlayerHandicapXP(s__baka_SPlayer(bj_forLoopAIndex - 1), 3.00)
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
else
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call DisplayTimedTextToPlayer(s__baka_SPlayer(bj_forLoopAIndex - 1), 0, 0, 10.00, ( "关卡 |cffff0000 " + ( I2S(udg_Points) + " |r" ) ))
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
if ( ( udg_Points != 10 ) ) then
call StartTimerBJ(udg_timsJS[5], false, 210.00)
call CreateTimerDialogBJ(udg_timsJS[5], ( "|cffff0000关卡" + ( I2S(udg_Points) + "|r 剩余" ) ))
set udg_timesJSP=bj_lastCreatedTimerDialog
call TimerDialogDisplay(udg_timesJSP, true)
else
endif
endif
if ( ( udg_Points == 1 ) ) then
call StartTimerBJ(udg_jishiqi[136], false, 5.00)
call StartTimerBJ(udg_timsJS[0], true, GetRandomReal(1.80, 2.50))
call StartTimerBJ(udg_timsJS[1], true, GetRandomReal(35.00, 50.00))
else
if ( ( udg_Points == 2 ) ) then
call StartTimerBJ(udg_timsJS[0], true, GetRandomReal(1.80, 2.50))
call StartTimerBJ(udg_timsJS[1], true, 36.00)
call StartTimerBJ(udg_timsJS[2], true, 75.00)
else
if ( ( udg_Points == 3 ) ) then
call StartTimerBJ(udg_timsJS[0], true, GetRandomReal(1.70, 2.20))
call StartTimerBJ(udg_timsJS[1], true, GetRandomReal(45.00, 60.00))
call SetPlayerTechResearchedSwap(0x52303030, 1, s__baka_SPlayer(11))
else
if ( ( udg_Points == 4 ) ) then
call StartTimerBJ(udg_timsJS[0], true, GetRandomReal(1.70, 2.20))
call StartTimerBJ(udg_timsJS[1], true, GetRandomReal(20.00, 40.00))
call StartTimerBJ(udg_timsJS[2], false, 75.00)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call SetUnitAbilityLevel(udg_SmD[bj_forLoopAIndex], 0x4130424A, 2)
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
else
if ( ( udg_Points == 5 ) ) then
call StartTimerBJ(udg_timsJS[0], true, GetRandomReal(2.25, 2.75))
call StartTimerBJ(udg_timsJS[1], true, GetRandomReal(40.00, 50.00))
call StartTimerBJ(udg_timsJS[2], false, 40.00)
call StartTimerBJ(udg_timsJS[3], true, GetRandomReal(3.00, 4.00))
else
if ( ( udg_Points == 6 ) ) then
call StartTimerBJ(udg_timsJS[0], true, GetRandomReal(1.70, 2.20))
call StartTimerBJ(udg_timsJS[1], true, GetRandomReal(30.00, 40.00))
call StartTimerBJ(udg_timsJS[2], false, 90.00)
call SetPlayerTechResearchedSwap(0x52303030, 2, s__baka_SPlayer(11))
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call SetUnitAbilityLevel(udg_SmD[bj_forLoopAIndex], 0x4130424A, 3)
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
else
if ( ( udg_Points == 7 ) ) then
call StartTimerBJ(udg_timsJS[0], true, GetRandomReal(1.70, 2.40))
call StartTimerBJ(udg_timsJS[1], true, GetRandomReal(20.00, 30.00))
call StartTimerBJ(udg_timsJS[2], false, 60.00)
else
if ( ( udg_Points == 8 ) ) then
call StartTimerBJ(udg_timsJS[0], true, GetRandomReal(1.80, 2.50))
call StartTimerBJ(udg_timsJS[1], true, GetRandomReal(30.00, 45.00))
call StartTimerBJ(udg_timsJS[2], false, 90.00)
call StartTimerBJ(udg_timsJS[3], true, GetRandomReal(1.80, 2.50))
call SetPlayerTechResearchedSwap(0x52303030, 3, s__baka_SPlayer(11))
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call SetUnitAbilityLevel(udg_SmD[bj_forLoopAIndex], 0x4130424A, 4)
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
else
if ( ( udg_Points == 9 ) ) then
call StartTimerBJ(udg_timsJS[0], true, GetRandomReal(1.60, 2.00))
call StartTimerBJ(udg_timsJS[1], true, GetRandomReal(35.00, 45.00))
call StartTimerBJ(udg_timsJS[3], true, GetRandomReal(6.00, 8.00))
call SetPlayerTechResearchedSwap(0x52303030, 4, s__baka_SPlayer(11))
else
if ( ( udg_Points == 10 ) ) then
call PauseTimer(udg_jishiqi[61])
call PlaySoundBJ(gg_snd_ArthasTheme)
call StartTimerBJ(udg_times[175], true, 1.00)
set udg_zhengshu2[175]=0
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call SetUnitAbilityLevel(udg_SmD[bj_forLoopAIndex], 0x4130424A, 5)
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
else
if ( ( udg_Points == 101 ) ) then
call StartTimerBJ(udg_timsJS[0], true, GetRandomReal(2.00, 3.00))
call StartTimerBJ(udg_timsJS[2], true, GetRandomReal(5.00, 8.00))
else
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
else
endif
endfunction
function InitTrig_start takes nothing returns nothing
set gg_trg_start=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_start, udg_jishiqi[60])
call TriggerAddAction(gg_trg_start, function Trig_startActions)
endfunction
function Trig_endFunc013A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[0], UNIT_TYPE_UNDEAD) == true ) ) then
call KillUnit(udg_danwei2[0])
else
endif
set udg_danwei2[0]=null
endfunction
function Trig_endFunc016A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_STRUCTURE) == false ) ) then
call KillUnit(udg_danwei2[0])
else
endif
set udg_danwei2[0]=null
endfunction
function Trig_endActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call PlaySoundBJ(gg_snd_QuestCompleted)
call TimerDialogDisplay(udg_timesJSP, false)
call PauseTimer(udg_jishiqi[61])
call PauseTimer(udg_timsJS[0])
call PauseTimer(udg_timsJS[1])
call PauseTimer(udg_timsJS[2])
call PauseTimer(udg_timsJS[3])
call StartTimerBJ(udg_timsJS[4], false, 7.00)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call DisplayTimedTextToPlayer(s__baka_SPlayer(bj_forLoopAIndex - 1), 0, 0, 10.00, "TRIGSTR_1439")
call AdjustPlayerStateBJ(2500, s__baka_SPlayer(bj_forLoopAIndex - 1), PLAYER_STATE_RESOURCE_GOLD)
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call EnableTrigger(gg_trg_hg)
set udg_quyu[100]=GetEntireMapRect()
set udg_xuanqu=YDWEGetUnitsInRectOfPlayerNull(udg_quyu[100] , s__baka_SPlayer(11))
call ForGroupBJ(udg_xuanqu, function Trig_endFunc013A)
call DestroyGroup(udg_xuanqu)
set udg_xuanqu=YDWEGetUnitsInRectOfPlayerNull(udg_quyu[100] , s__baka_SPlayer(10))
call ForGroupBJ(udg_xuanqu, function Trig_endFunc016A)
call DestroyGroup(udg_xuanqu)
call RemoveRect(udg_quyu[100])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_end takes nothing returns nothing
set gg_trg_end=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_end, udg_timsJS[5])
call TriggerAddAction(gg_trg_end, function Trig_endActions)
endfunction
function Trig_nextActions takes nothing returns nothing
call StopSoundBJ(gg_snd_Comradeship, false)
call StopSoundBJ(gg_snd_IllidansTheme, false)
call PlaySoundBJ(gg_snd_Doom)
call PlaySoundBJ(gg_snd_QuestNew)
call StartTimerBJ(udg_jishiqi[60], false, 20.00)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call AddHeroXP(udg_player[bj_forLoopAIndex], 950, false)
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call DisplayTimedTextToPlayer(s__baka_SPlayer(bj_forLoopAIndex - 1), 0, 0, 10.00, "TRIGSTR_731")
call SetUnitLifePercentBJ(udg_player[bj_forLoopAIndex], 100)
call SetUnitManaPercentBJ(udg_player[bj_forLoopAIndex], 100)
if ( ( IsUnitType(udg_player[bj_forLoopAIndex], UNIT_TYPE_DEAD) == true ) and ( udg_player[bj_forLoopAIndex] != null ) ) then
call PauseTimer(udg_FH[bj_forLoopAIndex])
call StartTimerBJ(udg_FH[bj_forLoopAIndex], false, 0.00)
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
endfunction
function InitTrig_next takes nothing returns nothing
set gg_trg_next=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_next, udg_timsJS[4])
call TriggerAddAction(gg_trg_next, function Trig_nextActions)
endfunction
function Trig_hgActions takes nothing returns nothing
set udg_dian2[0]=GetRectCenter(gg_rct_xuechi_1)
call PanCameraToTimedLocForPlayer(GetTriggerPlayer(), udg_dian2[0], 0.30)
call SetUnitX(udg_player[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )], GetLocationX(udg_dian2[0]))
call SetUnitY(udg_player[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )], GetLocationY(udg_dian2[0]))
call IssueImmediateOrderById(udg_player[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )], 851972)
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportCaster.mdl", udg_dian2[0]))
call RemoveLocation(udg_dian2[0])
endfunction
function InitTrig_hg takes nothing returns nothing
set gg_trg_hg=CreateTrigger()
call DisableTrigger(gg_trg_hg)
call TriggerRegisterPlayerChatEvent(gg_trg_hg, s__baka_SPlayer(0), "-hg", true)
call TriggerRegisterPlayerChatEvent(gg_trg_hg, s__baka_SPlayer(1), "-hg", true)
call TriggerRegisterPlayerChatEvent(gg_trg_hg, s__baka_SPlayer(2), "-hg", true)
call TriggerRegisterPlayerChatEvent(gg_trg_hg, s__baka_SPlayer(3), "-hg", true)
call TriggerRegisterPlayerChatEvent(gg_trg_hg, s__baka_SPlayer(4), "-hg", true)
call TriggerRegisterPlayerChatEvent(gg_trg_hg, s__baka_SPlayer(5), "-hg", true)
call TriggerRegisterPlayerChatEvent(gg_trg_hg, s__baka_SPlayer(6), "-hg", true)
call TriggerRegisterPlayerChatEvent(gg_trg_hg, s__baka_SPlayer(7), "-hg", true)
call TriggerRegisterPlayerChatEvent(gg_trg_hg, s__baka_SPlayer(8), "-hg", true)
call TriggerRegisterPlayerChatEvent(gg_trg_hg, s__baka_SPlayer(9), "-hg", true)
call TriggerAddAction(gg_trg_hg, function Trig_hgActions)
endfunction
function Trig_level_10Actions takes nothing returns nothing
set udg_zhengshu2[175]=( udg_zhengshu2[175] + 1 )
if ( ( udg_zhengshu2[175] <= 240 ) ) then
if ( ( udg_zhengshu2[175] == 1 ) ) then
call PlaySoundBJ(gg_snd_Warning)
call DisplayTimedTextToForce(GetPlayersAll(), 5.00, "TRIGSTR_1427")
else
endif
if ( ( udg_zhengshu2[175] == 6 ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 5.00, "TRIGSTR_1428")
else
endif
if ( ( udg_zhengshu2[175] == 8 ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 5.00, "TRIGSTR_1429")
else
endif
if ( ( udg_zhengshu2[175] == 13 ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 5.00, "TRIGSTR_1430")
else
endif
if ( ( udg_zhengshu2[175] == 15 ) ) then
call PlaySoundBJ(gg_snd_ArrangedTeamInvitation)
set udg_point[2]=GetRectCenter(gg_rct_boss)
set udg_point[3]=GetRectCenter(gg_rct_shuabing6)
set udg_boss[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303039, udg_point[2], 225.00)
call IssuePointOrderLoc(udg_boss[1], "attack", udg_point[3])
call RemoveLocation(udg_point[2])
call RemoveLocation(udg_point[3])
else
endif
if ( ( udg_zhengshu2[175] == 18 ) ) then
call PlaySoundBJ(gg_snd_Warning)
call DisplayTimedTextToForce(GetPlayersAll(), 5.00, "TRIGSTR_1431")
else
endif
if ( ( udg_zhengshu2[175] == 20 ) ) then
call PlaySoundBJ(gg_snd_Rescue)
call DisplayTimedTextToForce(GetPlayersAll(), 5.00, "TRIGSTR_1433")
else
endif
if ( ( udg_zhengshu2[175] == 60 ) ) then
call StartTimerBJ(udg_jishiqi[61], true, 1.00)
call StartTimerBJ(udg_timsJS[0], true, GetRandomReal(2.50, 4.00))
else
endif
if ( ( udg_zhengshu2[175] == 90 ) ) then
call StartTimerBJ(udg_timsJS[1], true, GetRandomReal(35.00, 45.00))
else
endif
if ( ( udg_zhengshu2[175] == 120 ) ) then
call StartTimerBJ(udg_timsJS[2], true, GetRandomReal(75.00, 90.00))
else
endif
if ( ( udg_zhengshu2[175] == 180 ) ) then
call StartTimerBJ(udg_timsJS[3], true, GetRandomReal(20.00, 30.00))
else
endif
else
call SetPlayerTechResearchedSwap(0x52303030, 5, s__baka_SPlayer(11))
call PauseTimer(udg_times[175])
endif
endfunction
function InitTrig_level_10 takes nothing returns nothing
set gg_trg_level_10=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_level_10, udg_times[175])
call TriggerAddAction(gg_trg_level_10, function Trig_level_10Actions)
endfunction
function Trig_lv_10_winConditions takes nothing returns boolean
return ( ( GetUnitTypeId(GetDyingUnit()) == 0x75303039 ) )
endfunction
function Trig_lv_10_winFunc013A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[0], UNIT_TYPE_UNDEAD) == true ) ) then
call KillUnit(udg_danwei2[0])
else
endif
set udg_danwei2[0]=null
endfunction
function Trig_lv_10_winFunc016A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_STRUCTURE) == false ) ) then
call KillUnit(udg_danwei2[0])
else
endif
set udg_danwei2[0]=null
endfunction
function Trig_lv_10_winActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call StartTimerBJ(udg_times[178], false, 60.00)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call DisplayTimedTextToPlayer(s__baka_SPlayer(bj_forLoopAIndex - 1), 0, 0, 10.00, "TRIGSTR_1438")
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call PlaySoundBJ(gg_snd_Credits)
call PlaySoundBJ(gg_snd_QuestCompleted)
call TimerDialogDisplay(udg_timesJSP, false)
call PauseTimer(udg_jishiqi[61])
call PauseTimer(udg_timsJS[0])
call PauseTimer(udg_timsJS[1])
call PauseTimer(udg_timsJS[2])
call PauseTimer(udg_timsJS[3])
set udg_quyu[100]=GetEntireMapRect()
set udg_xuanqu=YDWEGetUnitsInRectOfPlayerNull(udg_quyu[100] , s__baka_SPlayer(11))
call ForGroupBJ(udg_xuanqu, function Trig_lv_10_winFunc013A)
call DestroyGroup(udg_xuanqu)
set udg_xuanqu=YDWEGetUnitsInRectOfPlayerNull(udg_quyu[100] , s__baka_SPlayer(10))
call ForGroupBJ(udg_xuanqu, function Trig_lv_10_winFunc016A)
call DestroyGroup(udg_xuanqu)
call RemoveRect(udg_quyu[100])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_lv_10_win takes nothing returns nothing
set gg_trg_lv_10_win=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_lv_10_win, EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gg_trg_lv_10_win, Condition(function Trig_lv_10_winConditions))
call TriggerAddAction(gg_trg_lv_10_win, function Trig_lv_10_winActions)
endfunction
function Trig_lv_10_win_60sActions takes nothing returns nothing
call CustomVictoryBJ(s__baka_SPlayer(0), true, true)
call CustomVictoryBJ(s__baka_SPlayer(1), true, true)
call CustomVictoryBJ(s__baka_SPlayer(2), true, true)
call CustomVictoryBJ(s__baka_SPlayer(3), true, true)
call CustomVictoryBJ(s__baka_SPlayer(4), true, true)
endfunction
function InitTrig_lv_10_win_60s takes nothing returns nothing
set gg_trg_lv_10_win_60s=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_lv_10_win_60s, udg_times[178])
call TriggerAddAction(gg_trg_lv_10_win_60s, function Trig_lv_10_win_60sActions)
endfunction
function Trig_shuabing_JSActions takes nothing returns nothing
if ( ( udg_Points == 5 ) ) then
call PlaySoundBJ(gg_snd_IllidansTheme)
else
if ( ( udg_Points == 10 ) ) then
call PlaySoundBJ(gg_snd_PursuitTheme)
else
if ( ( udg_Points < 101 ) ) then
call PlaySoundBJ(gg_snd_Comradeship)
else
call PlaySoundBJ(gg_snd_Mainscreen)
endif
endif
endif
set udg_point[2]=GetRectCenter(gg_rct_shuabign2)
set udg_point[3]=GetRectCenter(gg_rct_G6)
set udg_point[6]=GetRectCenter(gg_rct_shuabing5)
set udg_point[7]=GetRectCenter(gg_rct_G12)
if ( ( udg_Points == 1 ) ) then
if ( ( GetRandomInt(1, 8) != 1 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303033, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
if ( ( GetRandomInt(1, 3) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x4130414D)
else
endif
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303033, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
if ( ( GetRandomInt(1, 3) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x4130414D)
else
endif
set udg_danwei[1]=null
else
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303041, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
if ( ( GetRandomInt(1, 2) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304150)
else
endif
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303041, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
if ( ( GetRandomInt(1, 2) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304150)
else
endif
set udg_danwei[1]=null
endif
else
if ( ( udg_Points == 2 ) ) then
if ( ( GetRandomInt(1, 3) != 1 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303033, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
if ( ( GetRandomInt(1, 3) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x4130414D)
else
endif
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303033, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
if ( ( GetRandomInt(1, 3) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x4130414D)
else
endif
set udg_danwei[1]=null
else
set udg_zhengshu2[3]=GetRandomInt(1, 2)
if ( ( udg_zhengshu2[3] == 1 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303032, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303032, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu2[3] == 2 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303034, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303034, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
set udg_danwei[1]=null
else
endif
endif
else
if ( ( udg_Points == 3 ) ) then
if ( ( GetRandomInt(1, 3) != 1 ) ) then
if ( ( GetRandomInt(1, 3) != 1 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303033, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
call UnitAddAbility(udg_danwei[1], 0x4130414D)
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303033, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
call UnitAddAbility(udg_danwei[1], 0x4130414D)
set udg_danwei[1]=null
else
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303054, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
if ( ( GetRandomInt(1, 2) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304234)
else
endif
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303054, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
if ( ( GetRandomInt(1, 2) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304234)
else
endif
set udg_danwei[1]=null
endif
else
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303041, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
if ( ( GetRandomInt(1, 2) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304150)
else
endif
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303041, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
if ( ( GetRandomInt(1, 2) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304150)
else
endif
set udg_danwei[1]=null
endif
else
if ( ( udg_Points == 4 ) ) then
if ( ( GetRandomInt(1, 2) != 1 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303033, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
if ( ( GetRandomInt(1, 2) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x4130414D)
else
endif
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303033, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
if ( ( GetRandomInt(1, 2) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x4130414D)
else
endif
set udg_danwei[1]=null
else
set udg_zhengshu2[3]=GetRandomInt(1, 4)
if ( ( udg_zhengshu2[3] == 1 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303032, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303032, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu2[3] == 2 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303034, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303034, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu2[3] == 3 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303037, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303037, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu2[3] == 4 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303041, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
if ( ( GetRandomInt(1, 2) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304150)
else
endif
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303041, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
if ( ( GetRandomInt(1, 2) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304150)
else
endif
set udg_danwei[1]=null
else
endif
endif
else
if ( ( udg_Points == 5 ) ) then
if ( ( GetRandomInt(1, 2) == 1 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303032, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303032, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
set udg_danwei[1]=null
else
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303034, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303034, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
set udg_danwei[1]=null
endif
else
if ( ( udg_Points == 6 ) ) then
if ( ( GetRandomInt(1, 3) != 1 ) ) then
if ( ( GetRandomInt(1, 2) == 1 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303049, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303049, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
set udg_danwei[1]=null
else
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303046, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
call UnitAddAbility(udg_danwei[1], 0x4130414D)
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303046, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
call UnitAddAbility(udg_danwei[1], 0x4130414D)
set udg_danwei[1]=null
endif
else
set udg_zhengshu2[3]=GetRandomInt(1, 2)
if ( ( udg_zhengshu2[3] == 1 ) ) then
if ( ( GetRandomInt(1, 3) == 1 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x7530304E, udg_point[2], 180.00)
else
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303041, udg_point[2], 180.00)
endif
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
if ( ( GetRandomInt(1, 2) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304150)
else
endif
set udg_danwei[1]=null
if ( ( GetRandomInt(1, 3) == 1 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x7530304E, udg_point[6], 270.00)
else
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303041, udg_point[6], 270.00)
endif
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
if ( ( GetRandomInt(1, 2) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304150)
else
endif
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu2[3] == 2 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303038, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303038, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
set udg_danwei[1]=null
else
endif
endif
else
if ( ( udg_Points == 7 ) ) then
if ( ( GetRandomInt(1, 3) != 1 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x7530304F, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x7530304F, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
set udg_danwei[1]=null
else
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303038, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303038, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
set udg_danwei[1]=null
endif
else
if ( ( udg_Points == 8 ) ) then
if ( ( GetRandomInt(1, 2) == 1 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x7530304E, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
if ( ( GetRandomInt(1, 2) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304150)
else
endif
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x7530304E, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
if ( ( GetRandomInt(1, 2) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304150)
else
endif
set udg_danwei[1]=null
else
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303042, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303042, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
set udg_danwei[1]=null
endif
else
if ( ( udg_Points == 9 ) ) then
set udg_zhengshu2[3]=GetRandomInt(1, 4)
if ( ( udg_zhengshu2[3] == 1 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x7530304F, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x7530304F, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu2[3] == 2 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x7530304E, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
call UnitAddAbility(udg_danwei[1], 0x41304150)
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x7530304E, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
call UnitAddAbility(udg_danwei[1], 0x41304150)
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu2[3] == 3 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303038, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303038, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu2[3] == 4 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303052, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303052, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
set udg_danwei[1]=null
else
endif
else
if ( ( udg_Points == 10 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303059, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303059, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
set udg_danwei[1]=null
else
if ( ( udg_Points >= 101 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303042, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303042, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
set udg_danwei[1]=null
else
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
call RemoveLocation(udg_point[2])
call RemoveLocation(udg_point[3])
call RemoveLocation(udg_point[6])
call RemoveLocation(udg_point[7])
endfunction
function InitTrig_shuabing_JS takes nothing returns nothing
set gg_trg_shuabing_JS=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_shuabing_JS, udg_timsJS[0])
call TriggerAddAction(gg_trg_shuabing_JS, function Trig_shuabing_JSActions)
endfunction
function Trig_shuabing_JS_teshuActions takes nothing returns nothing
set udg_point[2]=GetRandomLocInRect(gg_rct_js_1_1)
set udg_point[3]=GetRectCenter(gg_rct_G4)
set udg_point[6]=GetRandomLocInRect(gg_rct_js_1_2)
set udg_point[7]=GetRectCenter(gg_rct_G8)
if ( ( udg_Points == 5 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303037, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303037, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
set udg_danwei[1]=null
else
if ( ( udg_Points == 8 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303049, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303049, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
set udg_danwei[1]=null
else
if ( ( udg_Points == 9 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303047, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
call GroupAddUnit(udg_danweizu2[154], udg_danwei[1])
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303047, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
call GroupAddUnit(udg_danweizu2[154], udg_danwei[1])
set udg_danwei[1]=null
else
if ( ( udg_Points == 10 ) ) then
if ( ( GetRandomInt(1, 2) == 1 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x7530304C, udg_point[2], 180.00)
else
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303044, udg_point[2], 180.00)
endif
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
call GroupAddUnit(udg_danweizu2[154], udg_danwei[1])
set udg_danwei[1]=null
if ( ( GetRandomInt(1, 2) == 1 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303044, udg_point[6], 270.00)
else
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x7530304C, udg_point[6], 270.00)
endif
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
call GroupAddUnit(udg_danweizu2[154], udg_danwei[1])
set udg_danwei[1]=null
else
endif
endif
endif
endif
call RemoveLocation(udg_point[2])
call RemoveLocation(udg_point[3])
call RemoveLocation(udg_point[6])
call RemoveLocation(udg_point[7])
endfunction
function InitTrig_shuabing_JS_teshu takes nothing returns nothing
set gg_trg_shuabing_JS_teshu=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_shuabing_JS_teshu, udg_timsJS[3])
call TriggerAddAction(gg_trg_shuabing_JS_teshu, function Trig_shuabing_JS_teshuActions)
endfunction
function Trig_shuabing_gaojiActions takes nothing returns nothing
if ( ( udg_Points != 10 ) ) then
call PlaySoundBJ(gg_snd_Rescue)
else
endif
set udg_point[2]=GetRectCenter(gg_rct_shuabign2)
set udg_point[3]=GetRectCenter(gg_rct_G6)
set udg_point[6]=GetRectCenter(gg_rct_shuabing5)
set udg_point[7]=GetRectCenter(gg_rct_G12)
if ( ( ( udg_Points == 1 ) or ( udg_Points == 2 ) ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x7530304A, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x7530304A, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
set udg_danwei[1]=null
else
if ( ( ( udg_Points == 4 ) or ( udg_Points == 5 ) ) ) then
if ( ( ( ( udg_Points == 4 ) and ( GetRandomInt(1, 3) == 1 ) ) or ( ( udg_Points == 5 ) and ( GetRandomInt(1, 2) == 1 ) ) ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x7530304C, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x7530304C, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
set udg_danwei[1]=null
else
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303044, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303044, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
set udg_danwei[1]=null
endif
else
if ( ( ( udg_Points == 3 ) or ( ( udg_Points == 6 ) and ( GetRandomInt(1, 2) == 1 ) ) ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303045, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303045, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
set udg_danwei[1]=null
else
if ( ( udg_Points == 6 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303050, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303050, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
set udg_danwei[1]=null
else
if ( ( udg_Points == 7 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303043, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303043, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
set udg_danwei[1]=null
else
if ( ( udg_Points == 8 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303048, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303048, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
set udg_danwei[1]=null
else
if ( ( udg_Points == 9 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303053, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
call GroupAddUnit(udg_danweizu2[154], udg_danwei[1])
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303053, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
call GroupAddUnit(udg_danweizu2[154], udg_danwei[1])
set udg_danwei[1]=null
else
if ( ( udg_Points == 10 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x7530305A, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
call UnitAddAbility(udg_danwei[1], 0x4130414D)
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x7530305A, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
call UnitAddAbility(udg_danwei[1], 0x4130414D)
set udg_danwei[1]=null
else
endif
endif
endif
endif
endif
endif
endif
endif
call RemoveLocation(udg_point[2])
call RemoveLocation(udg_point[3])
call RemoveLocation(udg_point[6])
call RemoveLocation(udg_point[7])
endfunction
function InitTrig_shuabing_gaoji takes nothing returns nothing
set gg_trg_shuabing_gaoji=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_shuabing_gaoji, udg_timsJS[1])
call TriggerAddAction(gg_trg_shuabing_gaoji, function Trig_shuabing_gaojiActions)
endfunction
function Trig_shuabing_bossActions takes nothing returns nothing
set udg_point[2]=GetRectCenter(gg_rct_shuabign2)
set udg_point[3]=GetRectCenter(gg_rct_G6)
set udg_point[6]=GetRectCenter(gg_rct_shuabing5)
set udg_point[7]=GetRectCenter(gg_rct_G12)
if ( ( udg_Points == 2 ) ) then
call PlaySoundBJ(gg_snd_Rescue)
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303044, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
set udg_boss[1]=udg_danwei[1]
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303044, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
set udg_boss[2]=udg_danwei[1]
set udg_danwei[1]=null
else
if ( ( udg_Points == 4 ) ) then
call PlaySoundBJ(gg_snd_Rescue)
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303050, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
set udg_boss[1]=udg_danwei[1]
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303050, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
set udg_boss[2]=udg_danwei[1]
set udg_danwei[1]=null
else
if ( ( udg_Points == 5 ) ) then
call PlaySoundBJ(gg_snd_ArrangedTeamInvitation)
call PlaySoundBJ(gg_snd_ArthasTheme)
set udg_boss[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303035, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_boss[1], "attack", udg_point[3])
set udg_boss[2]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303035, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_boss[2], "attack", udg_point[7])
else
if ( ( udg_Points == 6 ) ) then
call PlaySoundBJ(gg_snd_Rescue)
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303048, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303048, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
set udg_danwei[1]=null
else
if ( ( udg_Points == 7 ) ) then
call PlaySoundBJ(gg_snd_Rescue)
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x7530304B, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
set udg_boss[1]=udg_danwei[1]
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x7530304B, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
set udg_boss[2]=udg_danwei[1]
set udg_danwei[1]=null
else
if ( ( udg_Points == 8 ) ) then
call PlaySoundBJ(gg_snd_Rescue)
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303056, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
set udg_boss[1]=udg_danwei[1]
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303056, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
set udg_boss[2]=udg_danwei[1]
set udg_danwei[1]=null
else
if ( ( udg_Points == 10 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303058, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303058, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
set udg_danwei[1]=null
else
if ( ( udg_Points == 101 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303057, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303057, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
set udg_danwei[1]=null
else
if ( ( udg_Points == 102 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303047, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
call GroupAddUnit(udg_danweizu2[154], udg_danwei[1])
set udg_danwei[1]=null
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x75303047, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
call GroupAddUnit(udg_danweizu2[154], udg_danwei[1])
set udg_danwei[1]=null
else
endif
endif
endif
endif
endif
endif
endif
endif
endif
call RemoveLocation(udg_point[2])
call RemoveLocation(udg_point[3])
call RemoveLocation(udg_point[6])
call RemoveLocation(udg_point[7])
endfunction
function InitTrig_shuabing_boss takes nothing returns nothing
set gg_trg_shuabing_boss=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_shuabing_boss, udg_timsJS[2])
call TriggerAddAction(gg_trg_shuabing_boss, function Trig_shuabing_bossActions)
endfunction
function Trig_Start_goActions takes nothing returns nothing
set udg_Go[1]=gg_rct_G1
set udg_Go[2]=gg_rct_G2
set udg_Go[3]=gg_rct_G3
set udg_Go[4]=gg_rct_G4
set udg_Go[5]=gg_rct_G5
set udg_Go[6]=gg_rct_G6
set udg_Go[7]=gg_rct_G7
set udg_Go[8]=gg_rct_G8
set udg_Go[9]=gg_rct_G9
set udg_Go[10]=gg_rct_G10
set udg_Go[11]=gg_rct_G11
set udg_Go[12]=gg_rct_G12
set udg_GoT[1]=gg_rct_GT1
set udg_GoT[2]=gg_rct_GT2
set udg_GoT[3]=gg_rct_GT3
set udg_GoT[4]=gg_rct_GT4
set udg_GoT[5]=gg_rct_GT5
set udg_GoT[6]=gg_rct_GT6
set udg_GoT[7]=gg_rct_GT7
set udg_GoT[8]=gg_rct_GT8
set udg_GoT[9]=gg_rct_GT9
set udg_GoT[10]=gg_rct_GT10
set udg_GoT[11]=gg_rct_GT11
set udg_GoT[12]=gg_rct_GT12
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=12
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call YDWETriggerRegisterEnterRectSimpleNull(gg_trg_Go , udg_Go[bj_forLoopAIndex])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
endfunction
function InitTrig_Start_go takes nothing returns nothing
set gg_trg_Start_go=CreateTrigger()
call TriggerRegisterTimerEventSingle(gg_trg_Start_go, 5)
call TriggerAddAction(gg_trg_Start_go, function Trig_Start_goActions)
endfunction
function Trig_GoConditions takes nothing returns boolean
return ( ( IsUnitType(GetEnteringUnit(), UNIT_TYPE_HERO) == false ) )
endfunction
function Trig_GoActions takes nothing returns nothing
set udg_danwei[274]=GetEnteringUnit()
if ( ( GetOwningPlayer(udg_danwei[274]) == s__baka_SPlayer(10) ) ) then
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=5
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ( ( RectContainsUnit(udg_GoT[bj_forLoopAIndex], udg_danwei[274]) == true ) ) then
set udg_dian[221]=GetRectCenter(udg_Go[( GetForLoopIndexA() + 1 )])
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
set bj_forLoopAIndex=7
set bj_forLoopAIndexEnd=11
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ( ( RectContainsUnit(udg_GoT[bj_forLoopAIndex], udg_danwei[274]) == true ) ) then
set udg_dian[221]=GetRectCenter(udg_Go[( GetForLoopIndexA() + 1 )])
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
if ( ( RectContainsUnit(udg_GoT[6], udg_danwei[274]) == true ) ) then
set udg_dian[221]=GetRectCenter(gg_rct_shuabign2)
else
endif
if ( ( RectContainsUnit(udg_GoT[12], udg_danwei[274]) == true ) ) then
set udg_dian[221]=GetRectCenter(gg_rct_shuabing5)
else
endif
call IssuePointOrderLoc(udg_danwei[274], "attack", udg_dian[221])
call RemoveLocation(udg_dian[221])
else
endif
if ( ( GetOwningPlayer(udg_danwei[274]) == s__baka_SPlayer(11) ) ) then
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=5
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ( ( RectContainsUnit(udg_GoT[( bj_forLoopAIndex + 1 )], udg_danwei[274]) == true ) ) then
set udg_dian[221]=GetRectCenter(udg_Go[bj_forLoopAIndex])
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
set bj_forLoopAIndex=7
set bj_forLoopAIndexEnd=11
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ( ( RectContainsUnit(udg_GoT[( bj_forLoopAIndex + 1 )], udg_danwei[274]) == true ) ) then
set udg_dian[221]=GetRectCenter(udg_Go[bj_forLoopAIndex])
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
if ( ( RectContainsUnit(udg_GoT[1], udg_danwei[274]) == true ) ) then
set udg_dian[221]=GetRectCenter(gg_rct_shuabing1)
else
endif
if ( ( RectContainsUnit(udg_GoT[7], udg_danwei[274]) == true ) ) then
set udg_dian[221]=GetRectCenter(gg_rct_shuabign4)
else
endif
call IssuePointOrderLoc(udg_danwei[274], "attack", udg_dian[221])
call RemoveLocation(udg_dian[221])
else
endif
set udg_danwei[274]=null
endfunction
function InitTrig_Go takes nothing returns nothing
set gg_trg_Go=CreateTrigger()
call TriggerAddCondition(gg_trg_Go, Condition(function Trig_GoConditions))
call TriggerAddAction(gg_trg_Go, function Trig_GoActions)
endfunction
function Trig_shuabing_left_upActions takes nothing returns nothing
set udg_zhengshu[64]=( udg_zhengshu[64] + 1 )
if ( ( udg_zhengshu[64] == 1 ) ) then
set udg_point[0]=GetRectCenter(gg_rct_shuabing1)
set udg_point[1]=GetRectCenter(gg_rct_G1)
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(10), 0x686B6E69, udg_point[0], 90.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[1])
if ( ( GetUnitAbilityLevel(udg_jianzhu[5], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303754)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.15, 1.15, 1.15)
else
endif
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 2 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(10), 0x68726966, udg_point[0], 90.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[1])
if ( ( GetUnitAbilityLevel(udg_jianzhu[5], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303754)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.15, 1.15, 1.15)
else
endif
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 3 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(10), 0x68666F6F, udg_point[0], 90.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[1])
if ( ( GetUnitAbilityLevel(udg_jianzhu[5], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303754)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.15, 1.15, 1.15)
else
endif
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 4 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(10), 0x68737074, udg_point[0], 90.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[1])
if ( ( GetUnitAbilityLevel(udg_jianzhu[5], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303754)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.00, 1.00, 1.00)
else
endif
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 5 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(10), 0x686D696C, udg_point[0], 90.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[1])
if ( ( GetUnitAbilityLevel(udg_jianzhu[5], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303754)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.15, 1.15, 1.15)
else
endif
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 6 ) ) then
set udg_zhengshu2[52]=( udg_zhengshu2[52] + 1 )
if ( ( udg_zhengshu2[52] == 4 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(10), 0x686D746D, udg_point[0], 90.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[1])
if ( ( GetUnitAbilityLevel(udg_jianzhu[5], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303755)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.40, 1.40, 1.40)
else
endif
set udg_danwei[1]=null
else
endif
call RemoveLocation(udg_point[0])
call RemoveLocation(udg_point[1])
else
endif
if ( ( udg_zhengshu[64] == 1 ) ) then
set udg_point[2]=GetRectCenter(gg_rct_shuabign2)
set udg_point[3]=GetRectCenter(gg_rct_G6)
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x686B6E69, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
if ( ( GetUnitAbilityLevel(udg_jianzhu[3], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303754)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.15, 1.15, 1.15)
else
endif
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 2 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x68726966, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
if ( ( GetUnitAbilityLevel(udg_jianzhu[3], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303754)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.15, 1.15, 1.15)
else
endif
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 3 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x68666F6F, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
if ( ( GetUnitAbilityLevel(udg_jianzhu[3], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303754)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.15, 1.15, 1.15)
else
endif
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 4 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x68737074, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
if ( ( GetUnitAbilityLevel(udg_jianzhu[3], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303754)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.00, 1.00, 1.00)
else
endif
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 5 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x686D696C, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
if ( ( GetUnitAbilityLevel(udg_jianzhu[3], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303754)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.15, 1.15, 1.15)
else
endif
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 6 ) ) then
if ( ( udg_zhengshu2[52] == 4 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x686D746D, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
if ( ( GetUnitAbilityLevel(udg_jianzhu[3], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303755)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.40, 1.40, 1.40)
else
endif
set udg_danwei[1]=null
set udg_zhengshu2[52]=0
else
endif
call RemoveLocation(udg_point[2])
call RemoveLocation(udg_point[3])
else
endif
if ( ( udg_zhengshu[64] == 40 ) ) then
set udg_zhengshu[64]=0
else
endif
endfunction
function InitTrig_shuabing_left_up takes nothing returns nothing
set gg_trg_shuabing_left_up=CreateTrigger()
call DisableTrigger(gg_trg_shuabing_left_up)
call TriggerRegisterTimerExpireEvent(gg_trg_shuabing_left_up, udg_jishiqi[61])
call TriggerAddAction(gg_trg_shuabing_left_up, function Trig_shuabing_left_upActions)
endfunction
function Trig_shuabing_right_downActions takes nothing returns nothing
set udg_zhengshu[64]=( udg_zhengshu[64] + 1 )
if ( ( udg_zhengshu[64] == 1 ) ) then
set udg_point[4]=GetRectCenter(gg_rct_shuabign4)
set udg_point[5]=GetRectCenter(gg_rct_G7)
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(10), 0x686B6E69, udg_point[4], 0)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[5])
if ( ( GetUnitAbilityLevel(udg_jianzhu[4], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303754)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.15, 1.15, 1.15)
else
endif
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 2 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(10), 0x68726966, udg_point[4], 0)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[5])
if ( ( GetUnitAbilityLevel(udg_jianzhu[4], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303754)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.15, 1.15, 1.15)
else
endif
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 3 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(10), 0x68666F6F, udg_point[4], 0)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[5])
if ( ( GetUnitAbilityLevel(udg_jianzhu[4], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303754)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.15, 1.15, 1.15)
else
endif
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 4 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(10), 0x68737074, udg_point[4], 0)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[5])
if ( ( GetUnitAbilityLevel(udg_jianzhu[4], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303754)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.00, 1.00, 1.00)
else
endif
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 5 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(10), 0x686D696C, udg_point[4], 0)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[5])
if ( ( GetUnitAbilityLevel(udg_jianzhu[4], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303754)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.15, 1.15, 1.15)
else
endif
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 6 ) ) then
set udg_zhengshu2[52]=( udg_zhengshu2[52] + 1 )
if ( ( udg_zhengshu2[52] == 4 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(10), 0x686D746D, udg_point[4], 0)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[5])
if ( ( GetUnitAbilityLevel(udg_jianzhu[4], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303755)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.40, 1.40, 1.40)
else
endif
set udg_danwei[1]=null
else
endif
call RemoveLocation(udg_point[4])
call RemoveLocation(udg_point[5])
else
endif
if ( ( udg_zhengshu[64] == 1 ) ) then
set udg_point[6]=GetRectCenter(gg_rct_shuabing5)
set udg_point[7]=GetRectCenter(gg_rct_G12)
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x686B6E69, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
if ( ( GetUnitAbilityLevel(udg_jianzhu[2], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303754)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.15, 1.15, 1.15)
else
endif
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 2 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x68726966, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
if ( ( GetUnitAbilityLevel(udg_jianzhu[2], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303754)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.15, 1.15, 1.15)
else
endif
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 3 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x68666F6F, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
if ( ( GetUnitAbilityLevel(udg_jianzhu[2], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303754)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.15, 1.15, 1.15)
else
endif
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 4 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x68737074, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
if ( ( GetUnitAbilityLevel(udg_jianzhu[2], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303754)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.00, 1.00, 1.00)
else
endif
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 5 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x686D696C, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
if ( ( GetUnitAbilityLevel(udg_jianzhu[2], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303754)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.15, 1.15, 1.15)
else
endif
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 6 ) ) then
if ( ( udg_zhengshu2[52] == 4 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x686D746D, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
if ( ( GetUnitAbilityLevel(udg_jianzhu[2], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303755)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.40, 1.40, 1.40)
else
endif
set udg_danwei[1]=null
set udg_zhengshu2[52]=0
else
endif
call RemoveLocation(udg_point[6])
call RemoveLocation(udg_point[7])
else
endif
if ( ( udg_zhengshu[64] == 40 ) ) then
set udg_zhengshu[64]=0
else
endif
endfunction
function InitTrig_shuabing_right_down takes nothing returns nothing
set gg_trg_shuabing_right_down=CreateTrigger()
call DisableTrigger(gg_trg_shuabing_right_down)
call TriggerRegisterTimerExpireEvent(gg_trg_shuabing_right_down, udg_jishiqi[61])
call TriggerAddAction(gg_trg_shuabing_right_down, function Trig_shuabing_right_downActions)
endfunction
function Trig_shuabing_allActions takes nothing returns nothing
set udg_zhengshu[64]=( udg_zhengshu[64] + 1 )
if ( ( udg_zhengshu[64] == 1 ) ) then
set udg_point[0]=GetRectCenter(gg_rct_shuabing1)
set udg_point[1]=GetRectCenter(gg_rct_G1)
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(10), 0x68666F6F, udg_point[0], 90.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[1])
if ( ( GetUnitAbilityLevel(udg_jianzhu[5], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303754)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.15, 1.15, 1.15)
else
endif
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 2 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(10), 0x68737074, udg_point[0], 90.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[1])
if ( ( GetUnitAbilityLevel(udg_jianzhu[5], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303754)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.15, 1.15, 1.15)
else
endif
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 3 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(10), 0x686B6E69, udg_point[0], 90.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[1])
if ( ( GetUnitAbilityLevel(udg_jianzhu[5], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303754)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.15, 1.15, 1.15)
else
endif
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 4 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(10), 0x68726966, udg_point[0], 90.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[1])
if ( ( GetUnitAbilityLevel(udg_jianzhu[5], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303754)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.00, 1.00, 1.00)
else
endif
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 5 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(10), 0x686D696C, udg_point[0], 90.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[1])
if ( ( GetUnitAbilityLevel(udg_jianzhu[5], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303754)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.15, 1.15, 1.15)
else
endif
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 6 ) ) then
set udg_zhengshu2[52]=( udg_zhengshu2[52] + 1 )
if ( ( udg_zhengshu2[52] == 4 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(10), 0x686D746D, udg_point[0], 90.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[1])
if ( ( GetUnitAbilityLevel(udg_jianzhu[5], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303755)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.40, 1.40, 1.40)
else
endif
set udg_danwei[1]=null
else
endif
else
endif
if ( ( udg_zhengshu[64] == 7 ) ) then
if ( ( ( udg_zhengshu2[52] == 2 ) or ( ( udg_zhengshu2[52] == 4 ) and ( GetPlayerState(s__baka_SPlayer(1 - 1), PLAYER_STATE_RESOURCE_LUMBER) >= 40 ) ) or ( ( udg_zhengshu2[52] == 3 ) and ( GetPlayerState(s__baka_SPlayer(1 - 1), PLAYER_STATE_RESOURCE_LUMBER) >= 60 ) ) or ( ( udg_zhengshu2[52] == 1 ) and ( GetPlayerState(s__baka_SPlayer(1 - 1), PLAYER_STATE_RESOURCE_LUMBER) >= 70 ) ) ) and ( GetUnitAbilityLevel(udg_jianzhu[5], 0x41304A53) == 1 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(10), 0x686D7474, udg_point[0], 90.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[1])
set udg_danwei[1]=null
else
endif
call RemoveLocation(udg_point[0])
call RemoveLocation(udg_point[1])
else
endif
if ( ( udg_zhengshu[64] == 1 ) ) then
set udg_point[2]=GetRectCenter(gg_rct_shuabign2)
set udg_point[3]=GetRectCenter(gg_rct_G6)
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x68666F6F, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
if ( ( GetUnitAbilityLevel(udg_jianzhu[3], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303754)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.15, 1.15, 1.15)
else
endif
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 2 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x68737074, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
if ( ( GetUnitAbilityLevel(udg_jianzhu[3], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303754)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.15, 1.15, 1.15)
else
endif
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 3 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x686B6E69, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
if ( ( GetUnitAbilityLevel(udg_jianzhu[3], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303754)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.15, 1.15, 1.15)
else
endif
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 4 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x68726966, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
if ( ( GetUnitAbilityLevel(udg_jianzhu[3], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303754)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.00, 1.00, 1.00)
else
endif
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 5 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x686D696C, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
if ( ( GetUnitAbilityLevel(udg_jianzhu[3], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303754)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.15, 1.15, 1.15)
else
endif
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 6 ) ) then
if ( ( udg_zhengshu2[52] == 4 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x686D746D, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
if ( ( GetUnitAbilityLevel(udg_jianzhu[3], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303755)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.40, 1.40, 1.40)
else
endif
set udg_danwei[1]=null
else
endif
else
endif
if ( ( udg_zhengshu[64] == 7 ) ) then
if ( ( ( udg_zhengshu2[52] == 2 ) or ( ( udg_zhengshu2[52] == 4 ) and ( GetPlayerState(s__baka_SPlayer(1 - 1), PLAYER_STATE_RESOURCE_LUMBER) >= 40 ) ) or ( ( udg_zhengshu2[52] == 3 ) and ( GetPlayerState(s__baka_SPlayer(1 - 1), PLAYER_STATE_RESOURCE_LUMBER) >= 60 ) ) or ( ( udg_zhengshu2[52] == 1 ) and ( GetPlayerState(s__baka_SPlayer(1 - 1), PLAYER_STATE_RESOURCE_LUMBER) >= 70 ) ) ) and ( GetUnitAbilityLevel(udg_jianzhu[3], 0x41304A53) == 1 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x686D7474, udg_point[2], 180.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[3])
set udg_danwei[1]=null
else
endif
call RemoveLocation(udg_point[2])
call RemoveLocation(udg_point[3])
else
endif
if ( ( udg_zhengshu[64] == 1 ) ) then
set udg_point[4]=GetRectCenter(gg_rct_shuabign4)
set udg_point[5]=GetRectCenter(gg_rct_G7)
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(10), 0x68666F6F, udg_point[4], 0)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[5])
if ( ( GetUnitAbilityLevel(udg_jianzhu[4], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303754)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.15, 1.15, 1.15)
else
endif
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 2 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(10), 0x68737074, udg_point[4], 0)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[5])
if ( ( GetUnitAbilityLevel(udg_jianzhu[4], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303754)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.15, 1.15, 1.15)
else
endif
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 3 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(10), 0x686B6E69, udg_point[4], 0)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[5])
if ( ( GetUnitAbilityLevel(udg_jianzhu[4], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303754)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.15, 1.15, 1.15)
else
endif
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 4 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(10), 0x68726966, udg_point[4], 0)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[5])
if ( ( GetUnitAbilityLevel(udg_jianzhu[4], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303754)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.00, 1.00, 1.00)
else
endif
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 5 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(10), 0x686D696C, udg_point[4], 0)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[5])
if ( ( GetUnitAbilityLevel(udg_jianzhu[4], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303754)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.15, 1.15, 1.15)
else
endif
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 6 ) ) then
if ( ( udg_zhengshu2[52] == 4 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(10), 0x686D746D, udg_point[4], 0)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[5])
if ( ( GetUnitAbilityLevel(udg_jianzhu[4], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303755)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.40, 1.40, 1.40)
else
endif
set udg_danwei[1]=null
else
endif
else
endif
if ( ( udg_zhengshu[64] == 7 ) ) then
if ( ( ( udg_zhengshu2[52] == 2 ) or ( ( udg_zhengshu2[52] == 4 ) and ( GetPlayerState(s__baka_SPlayer(1 - 1), PLAYER_STATE_RESOURCE_LUMBER) >= 40 ) ) or ( ( udg_zhengshu2[52] == 3 ) and ( GetPlayerState(s__baka_SPlayer(1 - 1), PLAYER_STATE_RESOURCE_LUMBER) >= 60 ) ) or ( ( udg_zhengshu2[52] == 1 ) and ( GetPlayerState(s__baka_SPlayer(1 - 1), PLAYER_STATE_RESOURCE_LUMBER) >= 70 ) ) ) and ( GetUnitAbilityLevel(udg_jianzhu[4], 0x41304A53) == 1 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(10), 0x686D7474, udg_point[4], 0)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[5])
set udg_danwei[1]=null
else
endif
call RemoveLocation(udg_point[4])
call RemoveLocation(udg_point[5])
else
endif
if ( ( udg_zhengshu[64] == 1 ) ) then
set udg_point[6]=GetRectCenter(gg_rct_shuabing5)
set udg_point[7]=GetRectCenter(gg_rct_G12)
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x68666F6F, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
if ( ( GetUnitAbilityLevel(udg_jianzhu[2], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303754)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.15, 1.15, 1.15)
else
endif
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 2 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x68737074, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
if ( ( GetUnitAbilityLevel(udg_jianzhu[2], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303754)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.15, 1.15, 1.15)
else
endif
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 3 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x686B6E69, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
if ( ( GetUnitAbilityLevel(udg_jianzhu[2], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303754)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.15, 1.15, 1.15)
else
endif
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 4 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x68726966, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
if ( ( GetUnitAbilityLevel(udg_jianzhu[2], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303754)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.00, 1.00, 1.00)
else
endif
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 5 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x686D696C, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
if ( ( GetUnitAbilityLevel(udg_jianzhu[2], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303754)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.15, 1.15, 1.15)
else
endif
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 6 ) ) then
if ( ( udg_zhengshu2[52] == 4 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x686D746D, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
if ( ( GetUnitAbilityLevel(udg_jianzhu[2], 0x41304A53) == 1 ) ) then
call UnitAddAbility(udg_danwei[1], 0x41304935)
call UnitAddAbility(udg_danwei[1], 0x41303755)
call UnitAddAbility(udg_danwei[1], 0x41303756)
call SetUnitMoveSpeed(udg_danwei[1], 350.00)
call SetUnitScale(udg_danwei[1], 1.40, 1.40, 1.40)
else
endif
set udg_danwei[1]=null
else
endif
else
endif
if ( ( udg_zhengshu[64] == 7 ) ) then
if ( ( ( udg_zhengshu2[52] == 2 ) or ( ( udg_zhengshu2[52] == 4 ) and ( GetPlayerState(s__baka_SPlayer(1 - 1), PLAYER_STATE_RESOURCE_LUMBER) >= 40 ) ) or ( ( udg_zhengshu2[52] == 3 ) and ( GetPlayerState(s__baka_SPlayer(1 - 1), PLAYER_STATE_RESOURCE_LUMBER) >= 60 ) ) or ( ( udg_zhengshu2[52] == 1 ) and ( GetPlayerState(s__baka_SPlayer(1 - 1), PLAYER_STATE_RESOURCE_LUMBER) >= 70 ) ) ) and ( GetUnitAbilityLevel(udg_jianzhu[2], 0x41304A53) == 1 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x686D7474, udg_point[6], 270.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[7])
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu2[52] == 4 ) ) then
set udg_zhengshu2[52]=0
else
endif
call RemoveLocation(udg_point[6])
call RemoveLocation(udg_point[7])
else
endif
if ( ( udg_zhengshu[64] == 40 ) ) then
set udg_zhengshu[64]=0
else
endif
endfunction
function InitTrig_shuabing_all takes nothing returns nothing
set gg_trg_shuabing_all=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_shuabing_all, udg_jishiqi[61])
call TriggerAddAction(gg_trg_shuabing_all, function Trig_shuabing_allActions)
endfunction
function Trig_shuabing_jsActions takes nothing returns nothing
set udg_zhengshu[64]=( udg_zhengshu[64] + 1 )
if ( ( udg_zhengshu[64] == 1 ) ) then
set udg_point[0]=GetRectCenter(gg_rct_shuabing1)
set udg_point[1]=GetRectCenter(gg_rct_G1)
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(10), 0x686B6E69, udg_point[0], 90.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[1])
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 2 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(10), 0x68726966, udg_point[0], 90.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[1])
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 3 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(10), 0x68666F6F, udg_point[0], 90.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[1])
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 4 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(10), 0x68737074, udg_point[0], 90.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[1])
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 5 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(10), 0x686D696C, udg_point[0], 90.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[1])
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 6 ) ) then
set udg_zhengshu2[52]=( udg_zhengshu2[52] + 1 )
if ( ( udg_zhengshu2[52] == 4 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(10), 0x686D746D, udg_point[0], 90.00)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[1])
set udg_danwei[1]=null
else
endif
call RemoveLocation(udg_point[0])
call RemoveLocation(udg_point[1])
else
endif
if ( ( udg_zhengshu[64] == 1 ) ) then
set udg_point[4]=GetRectCenter(gg_rct_shuabign4)
set udg_point[5]=GetRectCenter(gg_rct_G7)
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(10), 0x686B6E69, udg_point[4], 0)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[5])
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 2 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(10), 0x68726966, udg_point[4], 0)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[5])
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 3 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(10), 0x68666F6F, udg_point[4], 0)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[5])
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 4 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(10), 0x68737074, udg_point[4], 0)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[5])
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 5 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(10), 0x686D696C, udg_point[4], 0)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[5])
set udg_danwei[1]=null
else
endif
if ( ( udg_zhengshu[64] == 6 ) ) then
if ( ( udg_zhengshu2[52] == 4 ) ) then
set udg_danwei[1]=CreateUnitAtLoc(s__baka_SPlayer(10), 0x686D746D, udg_point[4], 0)
call IssuePointOrderLoc(udg_danwei[1], "attack", udg_point[5])
set udg_danwei[1]=null
else
endif
call RemoveLocation(udg_point[4])
call RemoveLocation(udg_point[5])
else
endif
if ( ( udg_zhengshu[64] == 20 ) ) then
set udg_zhengshu[64]=0
else
endif
endfunction
function InitTrig_shuabing_js takes nothing returns nothing
set gg_trg_shuabing_js=CreateTrigger()
call DisableTrigger(gg_trg_shuabing_js)
call TriggerRegisterTimerExpireEvent(gg_trg_shuabing_js, udg_jishiqi[61])
call TriggerAddAction(gg_trg_shuabing_js, function Trig_shuabing_jsActions)
endfunction
function Trig_shuabign1Conditions takes nothing returns boolean
return ( ( GetOwningPlayer(GetTriggerUnit()) == s__baka_SPlayer(10) ) )
endfunction
function Trig_shuabign1Actions takes nothing returns nothing
set udg_danwei[91]=GetTriggerUnit()
set udg_dian[83]=GetRectCenter(gg_rct_shuabign3)
call IssuePointOrderLoc(udg_danwei[91], "attack", udg_dian[83])
set udg_danwei[91]=null
call RemoveLocation(udg_dian[83])
endfunction
function InitTrig_shuabign1 takes nothing returns nothing
set gg_trg_shuabign1=CreateTrigger()
call YDWETriggerRegisterEnterRectSimpleNull(gg_trg_shuabign1 , gg_rct_shuabign2)
call YDWETriggerRegisterEnterRectSimpleNull(gg_trg_shuabign1 , gg_rct_shuabing5)
call TriggerAddCondition(gg_trg_shuabign1, Condition(function Trig_shuabign1Conditions))
call TriggerAddAction(gg_trg_shuabign1, function Trig_shuabign1Actions)
endfunction
function Trig_shuabign2Conditions takes nothing returns boolean
return ( ( GetOwningPlayer(GetTriggerUnit()) == s__baka_SPlayer(11) ) )
endfunction
function Trig_shuabign2Actions takes nothing returns nothing
set udg_danwei[92]=GetTriggerUnit()
set udg_dian[84]=GetRectCenter(gg_rct_shuabing6)
call IssuePointOrderLoc(udg_danwei[92], "attack", udg_dian[84])
set udg_danwei[92]=null
call RemoveLocation(udg_dian[84])
endfunction
function InitTrig_shuabign2 takes nothing returns nothing
set gg_trg_shuabign2=CreateTrigger()
call YDWETriggerRegisterEnterRectSimpleNull(gg_trg_shuabign2 , gg_rct_shuabing1)
call YDWETriggerRegisterEnterRectSimpleNull(gg_trg_shuabign2 , gg_rct_shuabign4)
call TriggerAddCondition(gg_trg_shuabign2, Condition(function Trig_shuabign2Conditions))
call TriggerAddAction(gg_trg_shuabign2, function Trig_shuabign2Actions)
endfunction
function Trig_binglishengjiConditions takes nothing returns boolean
return ( ( GetTriggerExecCount(GetTriggeringTrigger()) < 10 ) )
endfunction
function Trig_binglishengjiActions takes nothing returns nothing
set bj_forLoopAIndex=11
set bj_forLoopAIndexEnd=12
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call SetPlayerTechResearchedSwap(0x526F6273, GetTriggerExecCount(GetTriggeringTrigger()), s__baka_SPlayer(bj_forLoopAIndex - 1))
call SetPlayerTechResearchedSwap(0x52687261, GetTriggerExecCount(GetTriggeringTrigger()), s__baka_SPlayer(bj_forLoopAIndex - 1))
call SetPlayerTechResearchedSwap(0x52686163, GetTriggerExecCount(GetTriggeringTrigger()), s__baka_SPlayer(bj_forLoopAIndex - 1))
call SetPlayerTechResearchedSwap(0x52687269, GetTriggerExecCount(GetTriggeringTrigger()), s__baka_SPlayer(bj_forLoopAIndex - 1))
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call SetPlayerTechResearchedSwap(0x526F6273, GetTriggerExecCount(GetTriggeringTrigger()), s__baka_SPlayer(PLAYER_NEUTRAL_AGGRESSIVE))
call SetPlayerTechResearchedSwap(0x52687261, GetTriggerExecCount(GetTriggeringTrigger()), s__baka_SPlayer(PLAYER_NEUTRAL_AGGRESSIVE))
call SetPlayerTechResearchedSwap(0x52687269, GetTriggerExecCount(GetTriggeringTrigger()), s__baka_SPlayer(PLAYER_NEUTRAL_AGGRESSIVE))
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 1 , 13 , ( "|cffffddaa当前兵力等级：|r|cffffaa00" + ( I2S(GetTriggerExecCount(GetTriggeringTrigger())) + "|r|cffffddaa级|r" ) ))
call DisplayTimedTextToForce(GetPlayersAll(), 20.00, ( ( "|cFF00FF33兵力、防御塔和野怪升级了，|r|cFFFF0033当前等级为：|r" ) + I2S(GetTriggerExecCount(GetTriggeringTrigger())) ))
endfunction
function InitTrig_binglishengji takes nothing returns nothing
set gg_trg_binglishengji=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_binglishengji, udg_youxixitong[2])
call TriggerAddCondition(gg_trg_binglishengji, Condition(function Trig_binglishengjiConditions))
call TriggerAddAction(gg_trg_binglishengji, function Trig_binglishengjiActions)
endfunction
function Trig_ExtraConditions takes nothing returns boolean
return ( ( udg_Points >= 0 ) )
endfunction
function Trig_ExtraActions takes nothing returns nothing
endfunction
function InitTrig_Extra takes nothing returns nothing
set gg_trg_Extra=CreateTrigger()
call TriggerRegisterPlayerChatEvent(gg_trg_Extra, s__baka_SPlayer(0), "-Extra", true)
call TriggerAddCondition(gg_trg_Extra, Condition(function Trig_ExtraConditions))
call TriggerAddAction(gg_trg_Extra, function Trig_ExtraActions)
endfunction
function Trig_extra_readyActions takes nothing returns nothing
set udg_zhengshu2[172]=( udg_zhengshu2[172] + 1 )
if ( ( udg_zhengshu2[172] <= 32 ) ) then
call SetTerrainFogEx(0, 0.00, ( 8000.00 - ( 60.00 * I2R(udg_zhengshu2[172]) ) ), 1.00, ( 1.00 - ( 0.03 * I2R(udg_zhengshu2[172]) ) ), ( 0.70 - ( 0.01 * I2R(udg_zhengshu2[172]) ) ), ( 0.03 * I2R(udg_zhengshu2[172]) ))
else
call PauseTimer(udg_times[172])
endif
endfunction
function InitTrig_extra_ready takes nothing returns nothing
set gg_trg_extra_ready=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_extra_ready, udg_times[172])
call TriggerAddAction(gg_trg_extra_ready, function Trig_extra_readyActions)
endfunction
function Trig_JS_AI_1sConditions takes nothing returns boolean
return ( ( udg_Points >= 0 ) )
endfunction
function Trig_JS_AI_1sFunc003Func002Func002Func003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call IssueImmediateOrderById(udg_danwei2[0], 852100)
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_JS_AI_1sFunc003Func002Func003Func003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_HERO) == true ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call s__baka_IssueTargetOrderById2(udg_danwei2[0] , 852095 , udg_danwei2[1])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_JS_AI_1sFunc003Func002Func004Func003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_HERO) == true ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) and ( GetRandomInt(1, 3) == 1 ) ) then
call IssueImmediateOrderById(udg_danwei2[0], 852096)
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_JS_AI_1sFunc003Func002Func005Func003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_HERO) == true ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) >= 350.00 ) and ( GetRandomInt(1, 2) == 1 ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call IssuePointOrderByIdLoc(udg_danwei2[0], 852218, udg_dian2[1])
else
endif
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[1])
endfunction
function Trig_JS_AI_1sFunc003Func002Func006Func003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_HERO) == true ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) >= 300.00 ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call IssuePointOrderByIdLoc(udg_danwei2[0], 852218, udg_dian2[1])
else
endif
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[1])
endfunction
function Trig_JS_AI_1sFunc003Func002Func007Func003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_HERO) == true ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) and ( GetRandomInt(1, 3) == 1 ) ) then
call IssuePointOrderByIdLoc(udg_danwei2[0], 852125, udg_dian2[1])
else
endif
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[1])
endfunction
function Trig_JS_AI_1sFunc003Func002Func008Func003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( GetRandomInt(1, 2) == 1 ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
call IssuePointOrderByIdLoc(udg_danwei2[0], 852218, udg_dian2[1])
call RemoveLocation(udg_dian2[1])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_JS_AI_1sFunc003Func002Func009Func003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_HERO) == true ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) and ( GetRandomInt(1, 2) == 1 ) ) then
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) >= 350.00 ) ) then
call IssuePointOrderByIdLoc(udg_danwei2[0], 852218, udg_dian2[1])
else
call IssueImmediateOrderById(udg_danwei2[0], 852096)
endif
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_JS_AI_1sFunc003Func002Func010Func003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_HERO) == true ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) >= 300.00 ) ) then
if ( ( GetRandomInt(1, 4) == 1 ) ) then
call IssuePointOrderByIdLoc(udg_danwei2[0], 852218, udg_dian2[1])
else
endif
else
call IssueImmediateOrderById(udg_danwei2[0], 852127)
endif
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_JS_AI_1sFunc003Func002Func011Func003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call IssueImmediateOrderById(udg_danwei2[0], 852520)
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_JS_AI_1sFunc003Func002Func012Func005A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_HERO) == true ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
if ( ( GetRandomInt(1, 5) == 1 ) ) then
call IssuePointOrderByIdLoc(udg_danwei2[0], 852218, udg_dian2[1])
else
call IssuePointOrderByIdLoc(udg_danwei2[0], 852125, udg_dian2[1])
endif
else
endif
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[1])
endfunction
function Trig_JS_AI_1sFunc003Func002Func013Func003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) <= 600.00 ) ) then
if ( ( GetRandomInt(1, 2) == 1 ) ) then
if ( ( GetRandomInt(1, 2) == 1 ) ) then
call IssuePointOrderByIdLoc(udg_danwei2[0], 852218, udg_dian2[1])
else
call IssueImmediateOrderById(udg_danwei2[0], 852526)
endif
else
endif
else
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_HERO) == true ) and ( GetRandomInt(1, 5) == 1 ) ) then
call IssueImmediateOrderById(udg_danwei2[0], 852127)
else
call IssuePointOrderByIdLoc(udg_danwei2[0], 852125, udg_dian2[1])
endif
endif
else
endif
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[1])
endfunction
function Trig_JS_AI_1sFunc003A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[0], UNIT_TYPE_UNDEAD) == true ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
if ( ( ( GetUnitTypeId(udg_danwei2[0]) == 0x75303033 ) or ( GetUnitTypeId(udg_danwei2[0]) == 0x75303046 ) or ( GetUnitTypeId(udg_danwei2[0]) == 0x7530305A ) ) ) then
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(600.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_JS_AI_1sFunc003Func002Func002Func003A)
call DestroyGroup(udg_xuanqu)
else
endif
if ( ( ( GetUnitTypeId(udg_danwei2[0]) == 0x7530304A ) or ( GetUnitTypeId(udg_danwei2[0]) == 0x7530305A ) ) ) then
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(550.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_JS_AI_1sFunc003Func002Func003Func003A)
call DestroyGroup(udg_xuanqu)
else
endif
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x75303045 ) ) then
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(800.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_JS_AI_1sFunc003Func002Func004Func003A)
call DestroyGroup(udg_xuanqu)
else
endif
if ( ( ( GetUnitTypeId(udg_danwei2[0]) == 0x75303044 ) or ( GetUnitTypeId(udg_danwei2[0]) == 0x7530304C ) ) ) then
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(800.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_JS_AI_1sFunc003Func002Func005Func003A)
call DestroyGroup(udg_xuanqu)
else
endif
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x75303050 ) ) then
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(700.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_JS_AI_1sFunc003Func002Func006Func003A)
call DestroyGroup(udg_xuanqu)
else
endif
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x75303056 ) ) then
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(750.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_JS_AI_1sFunc003Func002Func007Func003A)
call DestroyGroup(udg_xuanqu)
else
endif
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x75303043 ) ) then
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(700.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_JS_AI_1sFunc003Func002Func008Func003A)
call DestroyGroup(udg_xuanqu)
else
endif
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x75303048 ) ) then
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(1500.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_JS_AI_1sFunc003Func002Func009Func003A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[1])
else
endif
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x75303053 ) ) then
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(1000.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_JS_AI_1sFunc003Func002Func010Func003A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[1])
else
endif
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x7530304B ) ) then
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(700.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_JS_AI_1sFunc003Func002Func011Func003A)
call DestroyGroup(udg_xuanqu)
else
endif
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x75303035 ) ) then
call UnitRemoveBuffs(udg_danwei2[0], false, true)
if ( ( GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE) <= 2500.00 ) ) then
call IssueImmediateOrderById(udg_danwei2[0], 852127)
else
endif
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(1000.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_JS_AI_1sFunc003Func002Func012Func005A)
call DestroyGroup(udg_xuanqu)
else
endif
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x75303039 ) ) then
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(1500.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_JS_AI_1sFunc003Func002Func013Func003A)
call DestroyGroup(udg_xuanqu)
else
endif
call RemoveLocation(udg_dian2[0])
else
endif
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_JS_AI_1sActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_quyu[100]=GetEntireMapRect()
set udg_danweizu2[139]=YDWEGetUnitsInRectOfPlayerNull(udg_quyu[100] , s__baka_SPlayer(11))
call ForGroupBJ(udg_danweizu2[139], function Trig_JS_AI_1sFunc003A)
call DestroyGroup(udg_danweizu2[139])
call RemoveRect(udg_quyu[100])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_JS_AI_1s takes nothing returns nothing
set gg_trg_JS_AI_1s=CreateTrigger()
call TriggerAddCondition(gg_trg_JS_AI_1s, Condition(function Trig_JS_AI_1sConditions))
call TriggerAddAction(gg_trg_JS_AI_1s, function Trig_JS_AI_1sActions)
endfunction
function Trig_JS_AI_3sConditions takes nothing returns boolean
return ( ( udg_Points >= 0 ) )
endfunction
function Trig_JS_AI_3sFunc003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == true ) ) then
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[1])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_JS_AI_3sActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_xuanqu=YDWEGetUnitsInRectOfPlayerNull(gg_rct_jidi , s__baka_SPlayer(11))
call ForGroupBJ(udg_xuanqu, function Trig_JS_AI_3sFunc003A)
if ( ( IsUnitGroupEmptyBJ(udg_xuanqu) == false ) ) then
call UnitRemoveAbility(gg_unit_hgtw_0012, 0x41436E72)
call UnitRemoveAbility(gg_unit_hgtw_0012, 0x414E7265)
call UnitAddAbility(gg_unit_hgtw_0012, 0x41304152)
call SetUnitVertexColor(gg_unit_hgtw_0012, 200, 200, 200, 60)
else
call UnitRemoveAbility(gg_unit_hgtw_0012, 0x41304152)
call UnitAddAbility(gg_unit_hgtw_0012, 0x414E7265)
call UnitAddAbility(gg_unit_hgtw_0012, 0x41436E72)
call SetUnitVertexColor(gg_unit_hgtw_0012, 255, 255, 255, 255)
endif
call DestroyGroup(udg_xuanqu)
if ( ( udg_Points == 10 ) ) then
set udg_dian2[0]=GetRectCenter(gg_rct_shuabing6)
call IssuePointOrderLoc(udg_boss[1], "attack", udg_dian2[0])
call RemoveLocation(udg_dian2[0])
else
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_JS_AI_3s takes nothing returns nothing
set gg_trg_JS_AI_3s=CreateTrigger()
call TriggerAddCondition(gg_trg_JS_AI_3s, Condition(function Trig_JS_AI_3sConditions))
call TriggerAddAction(gg_trg_JS_AI_3s, function Trig_JS_AI_3sActions)
endfunction
function Trig_attack_jsFunc012Func004A takes nothing returns nothing
set udg_danwei2[2]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[2], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[2], UNIT_TYPE_DEAD) == true ) ) then
else
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[2])
endif
set udg_danwei2[2]=null
endfunction
function Trig_attack_jsActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetAttacker()
set udg_danwei2[1]=GetAttackedUnitBJ()
if ( ( ( GetUnitTypeId(udg_danwei2[0]) == 0x75303038 ) or ( GetUnitTypeId(udg_danwei2[1]) == 0x75303038 ) ) ) then
call IssueImmediateOrderById(udg_danwei2[0], 852520)
else
endif
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( GetUnitTypeId(udg_danwei2[0]) == 0x75303038 ) and ( GetRandomInt(1, 2) == 1 ) ) then
call IssueImmediateOrderById(udg_danwei2[0], 852096)
else
endif
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( GetUnitTypeId(udg_danwei2[0]) == 0x75303035 ) ) then
call s__baka_IssueTargetOrderById2(udg_danwei2[0] , 852095 , udg_danwei2[1])
else
endif
if ( ( ( GetUnitTypeId(udg_danwei2[0]) == 0x75303054 ) or ( GetUnitTypeId(udg_danwei2[0]) == 0x7530304F ) ) ) then
call IssueImmediateOrderById(udg_danwei2[0], 852100)
else
endif
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( ( GetUnitTypeId(udg_danwei2[0]) == 0x75303058 ) or ( GetUnitTypeId(udg_danwei2[0]) == 0x7530304B ) or ( GetUnitTypeId(udg_danwei2[0]) == 0x75303050 ) ) and ( GetRandomInt(1, 2) == 1 ) ) then
call IssueImmediateOrderById(udg_danwei2[0], 852127)
else
endif
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_HERO) == true ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( ( GetUnitTypeId(udg_danwei2[0]) == 0x75303058 ) or ( GetUnitTypeId(udg_danwei2[0]) == 0x7530304B ) ) and ( GetRandomInt(1, 2) == 1 ) ) then
call s__baka_IssueTargetOrderById2(udg_danwei2[0] , 852119 , udg_danwei2[1])
else
endif
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x75303039 ) ) then
call s__baka_IssueTargetOrderById2(udg_danwei2[0] , 852119 , udg_danwei2[1])
else
endif
if ( ( GetUnitTypeId(udg_danwei2[1]) == 0x75303039 ) ) then
call IssueImmediateOrderById(udg_danwei2[0], 852526)
else
endif
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( ( GetUnitTypeId(udg_danwei2[0]) == 0x75303041 ) or ( GetUnitTypeId(udg_danwei2[0]) == 0x7530304E ) ) and ( GetRandomInt(1, 2) == 1 ) ) then
if ( ( GetRandomInt(1, 3) == 1 ) ) then
call IssueImmediateOrderById(udg_danwei2[0], 852526)
else
call s__baka_IssueTargetOrderById2(udg_danwei2[0] , 852119 , udg_danwei2[1])
endif
else
endif
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x75303045 ) ) then
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_HERO) == true ) and ( GetRandomInt(1, 2) == 1 ) ) then
call s__baka_IssueTargetOrderById2(udg_danwei2[0] , 852179 , udg_danwei2[1])
else
endif
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(800.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_attack_jsFunc012Func004A)
if ( ( CountUnitsInGroup(udg_xuanqu) >= 3 ) ) then
call IssueImmediateOrderById(udg_danwei2[0], 852217)
else
endif
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[0])
else
endif
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x7530304D ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
call SetUnitUserData(udg_danwei2[0], ( R2I(DistanceBetweenPoints(udg_dian2[0], udg_dian2[1])) / 40 ))
call GroupAddUnit(udg_danweizu2[155], udg_danwei2[0])
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[0])
else
endif
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_HERO) == true ) and ( ( ( ( GetUnitTypeId(udg_danwei2[0]) == 0x75303045 ) or ( GetUnitTypeId(udg_danwei2[0]) == 0x75303032 ) ) and ( GetRandomInt(1, 2) == 1 ) ) or ( ( ( GetUnitTypeId(udg_danwei2[0]) == 0x75303051 ) or ( GetUnitTypeId(udg_danwei2[0]) == 0x75303052 ) ) and ( GetRandomInt(1, 3) == 1 ) ) or ( ( GetUnitTypeId(udg_danwei2[0]) == 0x75303042 ) and ( GetRandomInt(1, 5) == 1 ) ) ) ) then
call s__baka_IssueTargetOrderById2(udg_danwei2[0] , 852668 , udg_danwei2[1])
else
endif
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x75303047 ) and ( GetRandomInt(1, 5) == 1 ) ) then
call s__baka_IssueTargetOrderById2(udg_danwei2[0] , 852527 , udg_danwei2[1])
else
endif
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_STRUCTURE) == false ) and ( GetUnitTypeId(udg_danwei2[0]) == 0x75303052 ) and ( GetRandomInt(1, 2) == 1 ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
call SetUnitUserData(udg_danwei2[0], ( R2I(DistanceBetweenPoints(udg_dian2[0], udg_dian2[1])) / 40 ))
call GroupAddUnit(udg_danweizu2[155], udg_danwei2[0])
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
endif
set udg_danwei2[0]=null
set udg_danwei2[1]=null
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_attack_js takes nothing returns nothing
set gg_trg_attack_js=CreateTrigger()
call TriggerAddAction(gg_trg_attack_js, function Trig_attack_jsActions)
endfunction
function Trig_huifu_15_uFunc005A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitAlly(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
set udg_dian2[2]=GetUnitLoc(udg_danwei2[1])
call SetUnitLifeBJ(udg_danwei2[1], ( GetUnitState(udg_danwei2[1], UNIT_STATE_LIFE) + RMinBJ(RMaxBJ(( GetUnitState(udg_danwei2[1], UNIT_STATE_MAX_LIFE) * 0.15 ), 75.00), 300.00) ))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\NightElf\\EntBirthTarget\\EntBirthTarget.mdl", udg_dian2[2]))
call RemoveLocation(udg_dian2[2])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_huifu_15_uActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetSpellAbilityUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 400.00, GetUnitFacing(udg_danwei2[0]))
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(500.00 , udg_dian2[1])
call ForGroupBJ(udg_xuanqu, function Trig_huifu_15_uFunc005A)
call DestroyGroup(udg_xuanqu)
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_huifu_15_u takes nothing returns nothing
set gg_trg_huifu_15_u=CreateTrigger()
call TriggerAddAction(gg_trg_huifu_15_u, function Trig_huifu_15_uActions)
endfunction
function Trig_siwang_zhongjiActions takes nothing returns nothing
set udg_danwei2[0]=GetSpellAbilityUnit()
set udg_danwei2[1]=GetSpellTargetUnit()
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[1], ( GetUnitState(udg_danwei2[1], UNIT_STATE_MAX_LIFE) * 0.03 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_LIGHTNING, WEAPON_TYPE_WHOKNOWS)
call SetUnitManaBJ(udg_danwei2[1], ( GetUnitState(udg_danwei2[1], UNIT_STATE_MANA) - ( 30.00 + ( GetUnitState(udg_danwei2[1], UNIT_STATE_MAX_MANA) * 0.03 ) ) ))
set udg_danwei2[0]=null
set udg_danwei2[1]=null
endfunction
function InitTrig_siwang_zhongji takes nothing returns nothing
set gg_trg_siwang_zhongji=CreateTrigger()
call TriggerAddAction(gg_trg_siwang_zhongji, function Trig_siwang_zhongjiActions)
endfunction
function Trig_tufuzhenjiActions takes nothing returns nothing
set udg_danwei2[0]=GetSpellAbilityUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
call StopSoundBJ(gg_snd_AbominationYesAttack1, false)
call PlaySoundOnUnitBJ(gg_snd_AbominationYesAttack1, 100, udg_danwei2[0])
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=6
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 100.00, ( 60.00 * I2R(bj_forLoopAIndex) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", udg_dian2[1]))
call RemoveLocation(udg_dian2[1])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call IssueImmediateOrderById(udg_danwei2[0], 852096)
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
endfunction
function InitTrig_tufuzhenji takes nothing returns nothing
set gg_trg_tufuzhenji=CreateTrigger()
call TriggerAddAction(gg_trg_tufuzhenji, function Trig_tufuzhenjiActions)
endfunction
function Trig_tufupenguozhiFunc005Func004A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[1], 120.00, true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_tufupenguozhiActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetSpellAbilityUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
call StopSoundBJ(gg_snd_AbominationAlternateDeath1, false)
call PlaySoundOnUnitBJ(gg_snd_AbominationAlternateDeath1, 100, udg_danwei2[0])
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=4
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], ( 100.00 * I2R(bj_forLoopAIndex) ), GetUnitFacing(udg_danwei2[0]))
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=6
loop
exitwhen bj_forLoopBIndex > bj_forLoopBIndexEnd
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], ( 50.00 + ( 30.00 * I2R(bj_forLoopAIndex) ) ), ( ( 60.00 * I2R(bj_forLoopBIndex) ) + ( 30.00 * I2R(bj_forLoopAIndex) ) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\ChimaeraAcidMissile\\ChimaeraAcidMissile.mdl", udg_dian2[2]))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Demon\\DemonLargeDeathExplode\\DemonLargeDeathExplode.mdl", udg_dian2[2]))
call RemoveLocation(udg_dian2[2])
set bj_forLoopBIndex=bj_forLoopBIndex + 1
endloop
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(( 200.00 + ( 60.00 * I2R(bj_forLoopAIndex) ) ) , udg_dian2[1])
call ForGroupBJ(udg_xuanqu, function Trig_tufupenguozhiFunc005Func004A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[1])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_tufupenguozhi takes nothing returns nothing
set gg_trg_tufupenguozhi=CreateTrigger()
call TriggerAddAction(gg_trg_tufupenguozhi, function Trig_tufupenguozhiActions)
endfunction
function Trig_ningshi_1Actions takes nothing returns nothing
set udg_danwei2[0]=GetSpellAbilityUnit()
call StopSoundBJ(gg_snd_AbominationYesAttack3, false)
call PlaySoundOnUnitBJ(gg_snd_AbominationYesAttack3, 100, udg_danwei2[0])
call SetUnitUserData(udg_danwei2[0], 60)
call GroupAddUnit(udg_danweizu2[149], udg_danwei2[0])
set udg_danwei2[0]=null
endfunction
function InitTrig_ningshi_1 takes nothing returns nothing
set gg_trg_ningshi_1=CreateTrigger()
call TriggerAddAction(gg_trg_ningshi_1, function Trig_ningshi_1Actions)
endfunction
function Trig_ningshi_2Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[149]) == false ) )
endfunction
function Trig_ningshi_2Func002Func003Func004A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
call SetUnitFacing(udg_danwei2[1], AngleBetweenPoints(udg_dian2[1], udg_dian2[0]))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\BansheeMissile\\BansheeMissile.mdl", udg_danwei2[1], "chest"))
call RemoveLocation(udg_dian2[1])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_ningshi_2Func002A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
if ( ( GetUnitUserData(udg_danwei2[0]) > 0 ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(800.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_ningshi_2Func002Func003Func004A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[0])
else
call GroupRemoveUnit(udg_danweizu2[149], udg_danwei2[0])
endif
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_ningshi_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[149], function Trig_ningshi_2Func002A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_ningshi_2 takes nothing returns nothing
set gg_trg_ningshi_2=CreateTrigger()
call TriggerAddCondition(gg_trg_ningshi_2, Condition(function Trig_ningshi_2Conditions))
call TriggerAddAction(gg_trg_ningshi_2, function Trig_ningshi_2Actions)
endfunction
function Trig_xuanwo_1Actions takes nothing returns nothing
set udg_danwei2[0]=GetSpellAbilityUnit()
call PlaySoundOnUnitBJ(gg_snd_CharmTarget1, 100, udg_danwei2[0])
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=5
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x6530334A, udg_dian2[0], 0.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, ( 3.90 + ( 0.10 * I2R(bj_forLoopAIndex) ) ))
set udg_danwei2[1]=null
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call SetUnitUserData(udg_danwei2[0], 80)
call GroupAddUnit(udg_danweizu2[140], udg_danwei2[0])
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
endfunction
function InitTrig_xuanwo_1 takes nothing returns nothing
set gg_trg_xuanwo_1=CreateTrigger()
call TriggerAddAction(gg_trg_xuanwo_1, function Trig_xuanwo_1Actions)
endfunction
function Trig_xuanwo_2Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[140]) == false ) )
endfunction
function Trig_xuanwo_2Func002Func003Func005A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) - 13.50 ), ( AngleBetweenPoints(udg_dian2[0], udg_dian2[1]) - 0.80 ))
if ( ( IsTerrainPathableBJ(udg_dian2[2], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[2]))
else
endif
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_xuanwo_2Func002A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
if ( ( GetUnitUserData(udg_danwei2[0]) > 0 ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(850.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_xuanwo_2Func002Func003Func005A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[0])
else
call IssueImmediateOrderById(udg_danwei2[0], 852127)
call GroupRemoveUnit(udg_danweizu2[140], udg_danwei2[0])
endif
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_xuanwo_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[140], function Trig_xuanwo_2Func002A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_xuanwo_2 takes nothing returns nothing
set gg_trg_xuanwo_2=CreateTrigger()
call TriggerAddCondition(gg_trg_xuanwo_2, Condition(function Trig_xuanwo_2Conditions))
call TriggerAddAction(gg_trg_xuanwo_2, function Trig_xuanwo_2Actions)
endfunction
function Trig_duyepenshe_1Actions takes nothing returns nothing
set udg_danwei2[0]=GetSpellAbilityUnit()
call StopSoundBJ(gg_snd_ChimaeraAlternateMissileLaunch2, false)
call PlaySoundOnUnitBJ(gg_snd_ChimaeraAlternateMissileLaunch2, 100, udg_danwei2[0])
call SetUnitUserData(udg_danwei2[0], 8)
call GroupAddUnit(udg_danweizu2[141], udg_danwei2[0])
set udg_danwei2[0]=null
endfunction
function InitTrig_duyepenshe_1 takes nothing returns nothing
set gg_trg_duyepenshe_1=CreateTrigger()
call TriggerAddAction(gg_trg_duyepenshe_1, function Trig_duyepenshe_1Actions)
endfunction
function Trig_duyepenshe_2Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[141]) == false ) )
endfunction
function Trig_duyepenshe_2Func002A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
if ( ( GetUnitUserData(udg_danwei2[0]) > 0 ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x6530334B, udg_dian2[0], ( GetUnitFacing(udg_danwei2[0]) + GetRandomReal(- 15.00, 15.00) ))
call SetUnitUserData(udg_danwei2[1], 40)
call GroupAddUnit(udg_danweizu2[142], udg_danwei2[1])
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
else
call GroupRemoveUnit(udg_danweizu2[141], udg_danwei2[0])
endif
set udg_danwei2[0]=null
endfunction
function Trig_duyepenshe_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[141], function Trig_duyepenshe_2Func002A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_duyepenshe_2 takes nothing returns nothing
set gg_trg_duyepenshe_2=CreateTrigger()
call TriggerAddCondition(gg_trg_duyepenshe_2, Condition(function Trig_duyepenshe_2Conditions))
call TriggerAddAction(gg_trg_duyepenshe_2, function Trig_duyepenshe_2Actions)
endfunction
function Trig_duyepenshe_3Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[142]) == false ) )
endfunction
function Trig_duyepenshe_3Func002A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
if ( ( GetUnitUserData(udg_danwei2[0]) > 0 ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 30.00, GetUnitFacing(udg_danwei2[0]))
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
else
endif
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
call KillUnit(udg_danwei2[0])
call GroupRemoveUnit(udg_danweizu2[142], udg_danwei2[0])
endif
set udg_danwei2[0]=null
endfunction
function Trig_duyepenshe_3Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[142], function Trig_duyepenshe_3Func002A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_duyepenshe_3 takes nothing returns nothing
set gg_trg_duyepenshe_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_duyepenshe_3, udg_Times[4])
call TriggerAddCondition(gg_trg_duyepenshe_3, Condition(function Trig_duyepenshe_3Conditions))
call TriggerAddAction(gg_trg_duyepenshe_3, function Trig_duyepenshe_3Actions)
endfunction
function Trig_tujin_1Actions takes nothing returns nothing
set udg_danwei2[0]=GetSpellAbilityUnit()
call SetUnitUserData(udg_danwei2[0], 25)
call UnitAddAbility(udg_danwei2[0], 0x41304156)
call SetUnitTimeScale(udg_danwei2[0], 1.50)
call s__Unit_PauseUnitMU(udg_danwei2[0] , true , "僵尸突进")
call GroupAddUnit(udg_danweizu2[143], udg_danwei2[0])
set udg_danwei2[0]=null
endfunction
function InitTrig_tujin_1 takes nothing returns nothing
set gg_trg_tujin_1=CreateTrigger()
call TriggerAddAction(gg_trg_tujin_1, function Trig_tujin_1Actions)
endfunction
function Trig_tujin_2Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[143]) == false ) )
endfunction
function Trig_tujin_2Func002Func004Func003Func007A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_HERO) == true ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call SetUnitUserData(udg_danwei2[0], 0)
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[1], 200.00, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_tujin_2Func002A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
if ( ( GetUnitUserData(udg_danwei2[0]) == 24 ) ) then
call SetUnitAnimationByIndex(udg_danwei2[0], 1)
else
endif
if ( ( GetUnitUserData(udg_danwei2[0]) <= 10 ) ) then
if ( ( GetUnitUserData(udg_danwei2[0]) == 10 ) ) then
call UnitRemoveAbility(udg_danwei2[0], 0x41304156)
call UnitAddAbility(udg_danwei2[0], 0x41304157)
call SetUnitTimeScale(udg_danwei2[0], 0.00)
call StopSoundBJ(gg_snd_Shockwave, false)
call PlaySoundOnUnitBJ(gg_snd_Shockwave, 100, udg_danwei2[0])
else
endif
if ( ( GetUnitUserData(udg_danwei2[0]) > 0 ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 80.00, GetUnitFacing(udg_danwei2[0]))
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
else
endif
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(150.00 , udg_dian2[1])
call ForGroupBJ(udg_xuanqu, function Trig_tujin_2Func002Func004Func003Func007A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
if ( ( GetUnitUserData(udg_danwei2[0]) == - 1 ) ) then
call s__Unit_PauseUnitMU(udg_danwei2[0] , false , "僵尸突进")
call ResetUnitAnimation(udg_danwei2[0])
call SetUnitTimeScale(udg_danwei2[0], 1.00)
else
endif
if ( ( GetUnitUserData(udg_danwei2[0]) > - 60 ) ) then
else
call UnitRemoveAbility(udg_danwei2[0], 0x41304157)
call GroupRemoveUnit(udg_danweizu2[143], udg_danwei2[0])
endif
endif
else
endif
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_tujin_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[143], function Trig_tujin_2Func002A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_tujin_2 takes nothing returns nothing
set gg_trg_tujin_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_tujin_2, udg_Times[3])
call TriggerAddCondition(gg_trg_tujin_2, Condition(function Trig_tujin_2Conditions))
call TriggerAddAction(gg_trg_tujin_2, function Trig_tujin_2Actions)
endfunction
function Trig_zhendang_1Actions takes nothing returns nothing
set udg_danwei2[0]=GetSpellAbilityUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[1]=GetSpellTargetLoc()
call StopSoundBJ(gg_snd_OrbOfCorruptionTarget, false)
call PlaySoundOnUnitBJ(gg_snd_OrbOfCorruptionTarget, 100, udg_danwei2[0])
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x6530334E, udg_dian2[0], AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
call SetUnitUserData(udg_danwei2[1], 20)
call GroupAddUnit(udg_danweizu2[147], udg_danwei2[1])
set udg_danwei2[0]=null
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
endfunction
function InitTrig_zhendang_1 takes nothing returns nothing
set gg_trg_zhendang_1=CreateTrigger()
call TriggerAddAction(gg_trg_zhendang_1, function Trig_zhendang_1Actions)
endfunction
function Trig_zhendang_2Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[147]) == false ) )
endfunction
function Trig_zhendang_2Func002Func004Func006A takes nothing returns nothing
set udg_danwei2[2]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[2], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[2], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[2], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[2], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call s__baka_IssueTargetOrderById2(udg_danwei2[1] , 852095 , udg_danwei2[2])
call UnitDamageTarget(udg_danwei2[1], udg_danwei2[2], 125.00, true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei2[2]=null
endfunction
function Trig_zhendang_2Func002Func004Func015A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
else
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[1])
endif
set udg_danwei2[1]=null
endfunction
function Trig_zhendang_2Func002A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
if ( ( GetUnitUserData(udg_danwei2[0]) > 0 ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 70.00, GetUnitFacing(udg_danwei2[0]))
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
else
endif
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(150.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_zhendang_2Func002Func004Func015A)
if ( ( IsUnitGroupEmptyBJ(udg_xuanqu) == false ) ) then
call SetUnitUserData(udg_danwei2[0], 0)
else
endif
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[1])
else
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x6530334F, udg_dian2[0], ( GetUnitFacing(udg_danwei2[0]) + 180.00 ))
call StopSoundBJ(gg_snd_HolyBolt, false)
call PlaySoundOnUnitBJ(gg_snd_HolyBolt, 100, udg_danwei2[1])
call SetUnitUserData(udg_danwei2[1], 10)
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(400.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_zhendang_2Func002Func004Func006A)
call DestroyGroup(udg_xuanqu)
call GroupRemoveUnit(udg_danweizu2[147], udg_danwei2[0])
call GroupAddUnit(udg_danweizu2[148], udg_danwei2[1])
call RemoveUnit(udg_danwei2[0])
set udg_danwei2[1]=null
endif
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_zhendang_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[147], function Trig_zhendang_2Func002A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_zhendang_2 takes nothing returns nothing
set gg_trg_zhendang_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_zhendang_2, udg_Times[3])
call TriggerAddCondition(gg_trg_zhendang_2, Condition(function Trig_zhendang_2Conditions))
call TriggerAddAction(gg_trg_zhendang_2, function Trig_zhendang_2Actions)
endfunction
function Trig_zhendang_3Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[148]) == false ) )
endfunction
function Trig_zhendang_3Func002Func003Func005A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], 25.00, GetUnitFacing(udg_danwei2[0]))
if ( ( IsTerrainPathableBJ(udg_dian2[2], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[2]))
else
endif
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_zhendang_3Func002A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
if ( ( GetUnitUserData(udg_danwei2[0]) > 0 ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(400.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_zhendang_3Func002Func003Func005A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[0])
else
call KillUnit(udg_danwei2[148])
call GroupRemoveUnit(udg_danweizu2[148], udg_danwei2[0])
endif
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_zhendang_3Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[148], function Trig_zhendang_3Func002A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_zhendang_3 takes nothing returns nothing
set gg_trg_zhendang_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_zhendang_3, udg_Times[4])
call TriggerAddCondition(gg_trg_zhendang_3, Condition(function Trig_zhendang_3Conditions))
call TriggerAddAction(gg_trg_zhendang_3, function Trig_zhendang_3Actions)
endfunction
function Trig_boss_shiwangbaozouActions takes nothing returns nothing
set udg_danwei2[0]=GetSpellAbilityUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
call SetUnitVertexColor(udg_danwei2[0], 255, 120, 80, 255)
call UnitAddAbility(udg_danwei2[0], 0x4130334E)
call UnitAddAbility(udg_danwei2[0], 0x41303357)
call PlaySoundOnUnitBJ(gg_snd_HowlOfTerror, 100, udg_danwei2[0])
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=5
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 500.00, ( 36.00 + ( 72.00 * I2R(bj_forLoopAIndex) ) ))
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=12
loop
exitwhen bj_forLoopBIndex > bj_forLoopBIndexEnd
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], 500.00, ( 30.00 * I2R(bj_forLoopBIndex) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\HowlOfTerror\\HowlCaster.mdl", udg_dian2[2]))
call RemoveLocation(udg_dian2[2])
set bj_forLoopBIndex=bj_forLoopBIndex + 1
endloop
call RemoveLocation(udg_dian2[1])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
endfunction
function InitTrig_boss_shiwangbaozou takes nothing returns nothing
set gg_trg_boss_shiwangbaozou=CreateTrigger()
call TriggerAddAction(gg_trg_boss_shiwangbaozou, function Trig_boss_shiwangbaozouActions)
endfunction
function Trig_boss_dajiangshan_1Actions takes nothing returns nothing
set udg_danwei2[0]=GetSpellAbilityUnit()
if ( ( udg_danwei2[0] == udg_boss[1] ) ) then
set udg_dian2[143]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[144]=GetSpellTargetLoc()
call TerrainDeformationCraterBJ(0.50, false, udg_dian2[143], 350.00, 300.00)
call StartTimerBJ(udg_times[143], true, 0.04)
else
endif
if ( ( udg_danwei2[0] == udg_boss[2] ) ) then
set udg_dian2[145]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[146]=GetSpellTargetLoc()
call TerrainDeformationCraterBJ(0.50, false, udg_dian2[145], 350.00, 300.00)
call StartTimerBJ(udg_times[145], true, 0.04)
else
endif
call SetUnitUserData(udg_danwei2[0], 50)
call s__Unit_PauseUnitMU(udg_danwei2[0] , true , "僵尸大江山")
call UnitAddAbility(udg_danwei2[0], 0x41436D69)
set udg_danwei2[0]=null
endfunction
function InitTrig_boss_dajiangshan_1 takes nothing returns nothing
set gg_trg_boss_dajiangshan_1=CreateTrigger()
call TriggerAddAction(gg_trg_boss_dajiangshan_1, function Trig_boss_dajiangshan_1Actions)
endfunction
function Trig_boss_dajiangshan_2Func002Func004Func002A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_boss[1])) == true ) ) then
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], 20.00, AngleBetweenPoints(udg_dian2[1], udg_dian2[143]))
if ( ( IsTerrainPathableBJ(udg_dian2[2], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[2]))
else
endif
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_boss_dajiangshan_2Func002Func004Func006Func003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_boss[1])) == true ) ) then
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], 30.00, AngleBetweenPoints(udg_dian2[144], udg_dian2[1]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", udg_dian2[2]))
if ( ( IsTerrainPathableBJ(udg_dian2[2], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[2]))
else
endif
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_boss_dajiangshan_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call SetUnitUserData(udg_boss[1], ( GetUnitUserData(udg_boss[1]) - 1 ))
if ( ( GetUnitUserData(udg_boss[1]) >= 0 ) ) then
if ( ( GetUnitUserData(udg_boss[1]) >= 40 ) ) then
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(400.00 , udg_dian2[143])
call ForGroupBJ(udg_xuanqu, function Trig_boss_dajiangshan_2Func002Func004Func002A)
call DestroyGroup(udg_xuanqu)
if ( ( GetUnitUserData(udg_boss[1]) == 48 ) ) then
call SetUnitAnimation(udg_boss[1], "spell")
else
endif
if ( ( GetUnitUserData(udg_boss[1]) == 40 ) ) then
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_boss[1]), 0x6530334C, udg_dian2[143], 0.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 1.00)
call IssueImmediateOrderById(udg_danwei2[1], 852096)
call StopSoundBJ(gg_snd_InfernalBirth1, false)
call PlaySoundOnUnitBJ(gg_snd_InfernalBirth1, 100, udg_boss[1])
set udg_danwei2[1]=null
else
endif
else
if ( ( GetUnitUserData(udg_boss[1]) >= 10 ) ) then
if ( ( GetUnitUserData(udg_boss[1]) == 20 ) ) then
call SetUnitAnimation(udg_boss[1], "spell slam")
else
endif
set udg_dian2[0]=PolarProjectionBJ(udg_dian2[143], ( ( DistanceBetweenPoints(udg_dian2[143], udg_dian2[144]) / 30.00 ) * I2R(( 40 - GetUnitUserData(udg_boss[1]) )) ), AngleBetweenPoints(udg_dian2[143], udg_dian2[144]))
if ( ( IsTerrainPathableBJ(udg_dian2[0], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_boss[1], GetLocationX(udg_dian2[0]))
call SetUnitY(udg_boss[1], GetLocationY(udg_dian2[0]))
else
endif
call UnitAddAbility(udg_boss[1], 0x41726176)
call s__maphack_SetHeight(udg_boss[1] , ( s__maphack_GetHeight(udg_boss[1]) + ( ( I2R(GetUnitUserData(udg_boss[1])) - 25.00 ) * 10.00 ) ) , 0.00)
call UnitRemoveAbility(udg_boss[1], 0x41726176)
call RemoveLocation(udg_dian2[0])
if ( ( GetUnitUserData(udg_boss[1]) == 10 ) ) then
call StopSoundBJ(gg_snd_BuildingDeathLargeHuman01, false)
call PlaySoundOnUnitBJ(gg_snd_BuildingDeathLargeHuman01, 100, udg_boss[1])
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=8
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[144], 150.00, ( 45.00 * I2R(bj_forLoopAIndex) ))
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[144], 250.00, ( ( 45.00 * I2R(bj_forLoopAIndex) ) + 22.50 ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", udg_dian2[1]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", udg_dian2[2]))
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_boss[1]), 0x6530334C, udg_dian2[144], 0.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 1.00)
call IssueImmediateOrderById(udg_danwei2[1], 852127)
call SetUnitScale(udg_danwei2[1], 3.00, 3.00, 3.00)
set udg_danwei2[1]=null
call UnitRemoveAbility(udg_boss[1], 0x41436D69)
call s__Unit_PauseUnitMU(udg_boss[1] , false , "僵尸大江山")
else
endif
else
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(400.00 , udg_dian2[144])
call ForGroupBJ(udg_xuanqu, function Trig_boss_dajiangshan_2Func002Func004Func006Func003A)
call DestroyGroup(udg_xuanqu)
endif
endif
else
call PauseTimer(udg_times[143])
call RemoveLocation(udg_dian2[143])
call RemoveLocation(udg_dian2[144])
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_boss_dajiangshan_2 takes nothing returns nothing
set gg_trg_boss_dajiangshan_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_boss_dajiangshan_2, udg_times[143])
call TriggerAddAction(gg_trg_boss_dajiangshan_2, function Trig_boss_dajiangshan_2Actions)
endfunction
function Trig_boss_dajiangshan_3Func002Func004Func002A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_boss[2])) == true ) ) then
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], 20.00, AngleBetweenPoints(udg_dian2[1], udg_dian2[145]))
if ( ( IsTerrainPathableBJ(udg_dian2[2], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[2]))
else
endif
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_boss_dajiangshan_3Func002Func004Func006Func003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_boss[2])) == true ) ) then
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], 30.00, AngleBetweenPoints(udg_dian2[146], udg_dian2[1]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", udg_dian2[2]))
if ( ( IsTerrainPathableBJ(udg_dian2[2], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[2]))
else
endif
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_boss_dajiangshan_3Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call SetUnitUserData(udg_boss[2], ( GetUnitUserData(udg_boss[2]) - 1 ))
if ( ( GetUnitUserData(udg_boss[2]) >= 0 ) ) then
if ( ( GetUnitUserData(udg_boss[2]) >= 40 ) ) then
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(400.00 , udg_dian2[145])
call ForGroupBJ(udg_xuanqu, function Trig_boss_dajiangshan_3Func002Func004Func002A)
call DestroyGroup(udg_xuanqu)
if ( ( GetUnitUserData(udg_boss[2]) == 48 ) ) then
call SetUnitAnimation(udg_boss[2], "spell")
else
endif
if ( ( GetUnitUserData(udg_boss[2]) == 40 ) ) then
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_boss[2]), 0x6530334C, udg_dian2[145], 0.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 1.00)
call IssueImmediateOrderById(udg_danwei2[1], 852096)
call StopSoundBJ(gg_snd_InfernalBirth1, false)
call PlaySoundOnUnitBJ(gg_snd_InfernalBirth1, 100, udg_boss[2])
set udg_danwei2[1]=null
else
endif
else
if ( ( GetUnitUserData(udg_boss[2]) >= 10 ) ) then
if ( ( GetUnitUserData(udg_boss[2]) == 20 ) ) then
call SetUnitAnimation(udg_boss[2], "spell slam")
else
endif
set udg_dian2[0]=PolarProjectionBJ(udg_dian2[145], ( ( DistanceBetweenPoints(udg_dian2[145], udg_dian2[146]) / 30.00 ) * I2R(( 40 - GetUnitUserData(udg_boss[2]) )) ), AngleBetweenPoints(udg_dian2[145], udg_dian2[146]))
if ( ( IsTerrainPathableBJ(udg_dian2[0], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_boss[2], GetLocationX(udg_dian2[0]))
call SetUnitY(udg_boss[2], GetLocationY(udg_dian2[0]))
else
endif
call UnitAddAbility(udg_boss[2], 0x41726176)
call s__maphack_SetHeight(udg_boss[2] , ( s__maphack_GetHeight(udg_boss[2]) + ( ( I2R(GetUnitUserData(udg_boss[2])) - 25.00 ) * 10.00 ) ) , 0.00)
call UnitRemoveAbility(udg_boss[2], 0x41726176)
call RemoveLocation(udg_dian2[0])
if ( ( GetUnitUserData(udg_boss[2]) == 10 ) ) then
call StopSoundBJ(gg_snd_BuildingDeathLargeHuman01, false)
call PlaySoundOnUnitBJ(gg_snd_BuildingDeathLargeHuman01, 100, udg_boss[2])
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=8
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[146], 150.00, ( 45.00 * I2R(bj_forLoopAIndex) ))
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[146], 250.00, ( ( 45.00 * I2R(bj_forLoopAIndex) ) + 22.50 ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", udg_dian2[1]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", udg_dian2[2]))
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_boss[1]), 0x6530334C, udg_dian2[146], 0.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 1.00)
call IssueImmediateOrderById(udg_danwei2[1], 852127)
call SetUnitScale(udg_danwei2[1], 3.00, 3.00, 3.00)
set udg_danwei2[1]=null
call UnitRemoveAbility(udg_boss[2], 0x41436D69)
call s__Unit_PauseUnitMU(udg_boss[2] , false , "僵尸大江山")
else
endif
else
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(400.00 , udg_dian2[146])
call ForGroupBJ(udg_xuanqu, function Trig_boss_dajiangshan_3Func002Func004Func006Func003A)
call DestroyGroup(udg_xuanqu)
endif
endif
else
call PauseTimer(udg_times[145])
call RemoveLocation(udg_dian2[145])
call RemoveLocation(udg_dian2[146])
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_boss_dajiangshan_3 takes nothing returns nothing
set gg_trg_boss_dajiangshan_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_boss_dajiangshan_3, udg_times[145])
call TriggerAddAction(gg_trg_boss_dajiangshan_3, function Trig_boss_dajiangshan_3Actions)
endfunction
function Trig_boss_zhendangbo_1Actions takes nothing returns nothing
set udg_danwei2[0]=GetSpellAbilityUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[1]=GetSpellTargetLoc()
if ( ( ( GetRandomInt(1, 4) == 1 ) or ( GetUnitAbilityLevel(udg_danwei2[0], 0x4130334E) == 1 ) ) ) then
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=3
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x6530334D, udg_dian2[0], ( AngleBetweenPoints(udg_dian2[0], udg_dian2[1]) + ( ( 20.00 * I2R(bj_forLoopAIndex) ) - 40.00 ) ))
call SetUnitTimeScale(udg_danwei2[1], 5.00)
call SetUnitLifeBJ(udg_danwei2[1], 10.00)
call SetUnitUserData(udg_danwei2[1], 0)
call GroupAddUnit(udg_danweizu2[145], udg_danwei2[1])
set udg_danwei2[1]=null
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
else
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x6530334D, udg_dian2[0], AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
call SetUnitTimeScale(udg_danwei2[1], 5.00)
call SetUnitLifeBJ(udg_danwei2[1], 10.00)
call SetUnitUserData(udg_danwei2[1], 0)
call GroupAddUnit(udg_danweizu2[145], udg_danwei2[1])
set udg_danwei2[1]=null
endif
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
endfunction
function InitTrig_boss_zhendangbo_1 takes nothing returns nothing
set gg_trg_boss_zhendangbo_1=CreateTrigger()
call TriggerAddAction(gg_trg_boss_zhendangbo_1, function Trig_boss_zhendangbo_1Actions)
endfunction
function Trig_boss_zhendangbo_2Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[145]) == false ) )
endfunction
function Trig_boss_zhendangbo_2Func002Func003Func008A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
set udg_dian2[2]=GetUnitLoc(udg_danwei2[1])
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[1], 30.00, true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_HERO) == true ) ) then
call RemoveLocation(udg_dian2[1])
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 25.00, GetUnitFacing(udg_danwei2[0]))
set udg_dian2[3]=PolarProjectionBJ(udg_dian2[2], 10.00, GetUnitFacing(udg_danwei2[0]))
call SetUnitLifeBJ(udg_danwei2[0], ( GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE) + 1.00 ))
else
set udg_dian2[3]=PolarProjectionBJ(udg_dian2[2], 30.00, AngleBetweenPoints(udg_dian2[0], udg_dian2[2]))
endif
if ( ( IsTerrainPathableBJ(udg_dian2[2], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[3]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[3]))
else
endif
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", udg_dian2[3]))
call RemoveLocation(udg_dian2[2])
call RemoveLocation(udg_dian2[3])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_boss_zhendangbo_2Func002A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
call SetUnitLifeBJ(udg_danwei2[0], ( GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE) + 1.00 ))
if ( ( GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE) <= 35.00 ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 70.00, GetUnitFacing(udg_danwei2[0]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\Volcano\\VolcanoDeath.mdl", udg_dian2[0]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", udg_dian2[0]))
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(300.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_boss_zhendangbo_2Func002Func003Func008A)
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
else
endif
call DestroyGroup(udg_xuanqu)
if ( ( GetUnitUserData(udg_danwei2[0]) < 3 ) ) then
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) + 1 ))
else
call SetUnitUserData(udg_danwei2[0], 0)
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", udg_dian2[0]))
endif
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
call KillUnit(udg_danwei2[0])
call GroupRemoveUnit(udg_danweizu2[145], udg_danwei2[0])
endif
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_boss_zhendangbo_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[145], function Trig_boss_zhendangbo_2Func002A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_boss_zhendangbo_2 takes nothing returns nothing
set gg_trg_boss_zhendangbo_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_boss_zhendangbo_2, udg_Times[4])
call TriggerAddCondition(gg_trg_boss_zhendangbo_2, Condition(function Trig_boss_zhendangbo_2Conditions))
call TriggerAddAction(gg_trg_boss_zhendangbo_2, function Trig_boss_zhendangbo_2Actions)
endfunction
function Trig_boss_zhongquan_1Actions takes nothing returns nothing
set udg_danwei2[0]=GetSpellAbilityUnit()
if ( ( udg_danwei2[0] == udg_boss[1] ) ) then
set udg_danwei2[144]=GetSpellTargetUnit()
call StartTimerBJ(udg_times[144], true, 0.04)
call StopSoundBJ(gg_snd_MetalHeavyBashMetal3, false)
call PlaySoundOnUnitBJ(gg_snd_MetalHeavyBashMetal3, 100, udg_danwei2[0])
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[144], 150.00, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)
set udg_zhengshu2[144]=10
else
endif
if ( ( udg_danwei2[0] == udg_boss[2] ) ) then
set udg_danwei2[146]=GetSpellTargetUnit()
call StartTimerBJ(udg_times[146], true, 0.04)
call StopSoundBJ(gg_snd_MetalHeavyBashMetal3, false)
call PlaySoundOnUnitBJ(gg_snd_MetalHeavyBashMetal3, 100, udg_danwei2[0])
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[146], 150.00, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)
set udg_zhengshu2[146]=10
else
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_boss_zhongquan_1 takes nothing returns nothing
set gg_trg_boss_zhongquan_1=CreateTrigger()
call TriggerAddAction(gg_trg_boss_zhongquan_1, function Trig_boss_zhongquan_1Actions)
endfunction
function Trig_boss_zhongquan_2Actions takes nothing returns nothing
set udg_zhengshu2[144]=( udg_zhengshu2[144] - 1 )
if ( ( udg_zhengshu2[144] > 0 ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[144])
set udg_dian2[1]=GetUnitLoc(udg_boss[1])
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], 30.00, AngleBetweenPoints(udg_dian2[1], udg_dian2[0]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", udg_dian2[2]))
if ( ( IsTerrainPathableBJ(udg_dian2[2], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[144], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[144], GetLocationY(udg_dian2[2]))
else
endif
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
else
set udg_danwei2[144]=null
call PauseTimer(udg_times[144])
endif
endfunction
function InitTrig_boss_zhongquan_2 takes nothing returns nothing
set gg_trg_boss_zhongquan_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_boss_zhongquan_2, udg_times[144])
call TriggerAddAction(gg_trg_boss_zhongquan_2, function Trig_boss_zhongquan_2Actions)
endfunction
function Trig_boss_zhongquan_3Actions takes nothing returns nothing
set udg_zhengshu2[146]=( udg_zhengshu2[146] - 1 )
if ( ( udg_zhengshu2[146] > 0 ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[146])
set udg_dian2[1]=GetUnitLoc(udg_boss[2])
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], 30.00, AngleBetweenPoints(udg_dian2[1], udg_dian2[0]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", udg_dian2[2]))
if ( ( IsTerrainPathableBJ(udg_dian2[2], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[146], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[146], GetLocationY(udg_dian2[2]))
else
endif
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
else
set udg_danwei2[146]=null
call PauseTimer(udg_times[146])
endif
endfunction
function InitTrig_boss_zhongquan_3 takes nothing returns nothing
set gg_trg_boss_zhongquan_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_boss_zhongquan_3, udg_times[146])
call TriggerAddAction(gg_trg_boss_zhongquan_3, function Trig_boss_zhongquan_3Actions)
endfunction
function Trig_wajue_1Actions takes nothing returns nothing
set udg_danwei2[0]=GetSpellAbilityUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=3
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 150.00, ( GetUnitFacing(udg_danwei2[0]) + ( ( 20.00 * I2R(bj_forLoopAIndex) ) - 40.00 ) ))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x75303049, udg_dian2[1], ( GetUnitFacing(udg_danwei2[0]) + ( ( 20.00 * I2R(bj_forLoopAIndex) ) - 40.00 ) ))
call SetUnitAnimation(udg_danwei2[1], "morph")
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[1])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call SetUnitUserData(udg_danwei2[0], 50)
call s__Unit_PauseUnitMU(udg_danwei2[0] , true , "僵尸挖掘")
call GroupAddUnit(udg_danweizu2[150], udg_danwei2[0])
call SetUnitTimeScale(udg_danwei2[0], 1.50)
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
endfunction
function InitTrig_wajue_1 takes nothing returns nothing
set gg_trg_wajue_1=CreateTrigger()
call TriggerAddAction(gg_trg_wajue_1, function Trig_wajue_1Actions)
endfunction
function Trig_wajue_2Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[150]) == false ) )
endfunction
function Trig_wajue_2Func002Func004Func003Func002Func005A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) ) then
set udg_dian2[2]=GetUnitLoc(udg_danwei2[1])
if ( ( GetUnitTypeId(udg_danwei2[1]) == 0x75303049 ) ) then
call SetUnitAnimation(udg_danwei2[1], "morph alternate")
else
endif
if ( ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[1], 100.00, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Undead\\Impale\\ImpaleMissTarget.mdl", udg_dian2[2]))
else
endif
call RemoveLocation(udg_dian2[2])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_wajue_2Func002Func004Func003Func003Func002A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) ) then
if ( ( GetUnitTypeId(udg_danwei2[1]) == 0x75303049 ) ) then
call s__Unit_PauseUnitMU(udg_danwei2[1] , false , "僵尸挖掘")
call AddUnitAnimationProperties(udg_danwei2[1], "alternate", false)
else
endif
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_wajue_2Func002Func004Func003Func009A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) ) then
if ( ( GetUnitTypeId(udg_danwei2[1]) == 0x75303049 ) ) then
call s__Unit_PauseUnitMU(udg_danwei2[1] , true , "僵尸挖掘")
call AddUnitAnimationProperties(udg_danwei2[1], "alternate", true)
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[1]))
else
endif
if ( ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
set udg_dian2[2]=GetUnitLoc(udg_danwei2[1])
call SetUnitFacing(udg_danwei2[0], AngleBetweenPoints(udg_dian2[0], udg_dian2[2]))
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[2]) <= 180.00 ) ) then
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[1], 18.00, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
else
endif
call RemoveLocation(udg_dian2[2])
else
endif
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_wajue_2Func002A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
if ( ( GetUnitUserData(udg_danwei2[0]) > 35 ) ) then
if ( ( GetUnitUserData(udg_danwei2[0]) == 48 ) ) then
call SetUnitAnimation(udg_danwei2[0], "morph")
call StopSoundBJ(gg_snd_Burrow, false)
call PlaySoundOnUnitBJ(gg_snd_Burrow, 100, udg_danwei2[0])
else
endif
else
if ( ( GetUnitUserData(udg_danwei2[0]) > 0 ) ) then
if ( ( GetUnitUserData(udg_danwei2[0]) == 34 ) ) then
call SetUnitTimeScale(udg_danwei2[0], 1.00)
call AddUnitAnimationProperties(udg_danwei2[0], "alternate", true)
else
endif
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 40.00, GetUnitFacing(udg_danwei2[0]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", udg_dian2[1]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\TreantMissile\\TreantMissile.mdl", udg_dian2[1]))
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
else
endif
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(300.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_wajue_2Func002Func004Func003Func009A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[1])
else
if ( ( GetUnitUserData(udg_danwei2[0]) == - 1 ) ) then
call SetUnitAnimation(udg_danwei2[0], "morph alternate")
call StopSoundBJ(gg_snd_CurseTarget1, false)
call PlaySoundOnUnitBJ(gg_snd_CurseTarget1, 100, udg_danwei2[0])
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(300.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_wajue_2Func002Func004Func003Func002Func005A)
call DestroyGroup(udg_xuanqu)
else
endif
if ( ( GetUnitUserData(udg_danwei2[0]) > - 10 ) ) then
else
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(300.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_wajue_2Func002Func004Func003Func003Func002A)
call DestroyGroup(udg_xuanqu)
call s__Unit_PauseUnitMU(udg_danwei2[0] , false , "僵尸挖掘")
call ResetUnitAnimation(udg_danwei2[0])
call AddUnitAnimationProperties(udg_danwei2[0], "alternate", false)
call GroupRemoveUnit(udg_danweizu2[150], udg_danwei2[0])
endif
endif
endif
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_wajue_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[150], function Trig_wajue_2Func002A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_wajue_2 takes nothing returns nothing
set gg_trg_wajue_2=CreateTrigger()
call TriggerAddCondition(gg_trg_wajue_2, Condition(function Trig_wajue_2Conditions))
call TriggerAddAction(gg_trg_wajue_2, function Trig_wajue_2Actions)
endfunction
function Trig_xuanfengshabao_1Actions takes nothing returns nothing
set udg_danwei2[0]=GetSpellAbilityUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
call StopSoundBJ(gg_snd_DeathPactTargetBirth1, false)
call PlaySoundOnUnitBJ(gg_snd_DeathPactTargetBirth1, 100, udg_danwei2[0])
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303350, udg_dian2[0], GetUnitFacing(udg_danwei2[0]))
call SetUnitUserData(udg_danwei2[1], 20)
call GroupAddUnit(udg_danweizu2[151], udg_danwei2[1])
set udg_danwei2[0]=null
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
endfunction
function InitTrig_xuanfengshabao_1 takes nothing returns nothing
set gg_trg_xuanfengshabao_1=CreateTrigger()
call TriggerAddAction(gg_trg_xuanfengshabao_1, function Trig_xuanfengshabao_1Actions)
endfunction
function Trig_xuanfengshabao_2Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[151]) == false ) )
endfunction
function Trig_xuanfengshabao_2Func002Func003Func013A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
set udg_dian2[3]=GetUnitLoc(udg_danwei2[1])
set udg_dian2[4]=PolarProjectionBJ(udg_dian2[0], ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[3]) * 0.95 ), ( AngleBetweenPoints(udg_dian2[0], udg_dian2[3]) - ( ( 600.00 / DistanceBetweenPoints(udg_dian2[0], udg_dian2[3]) ) * 2.00 ) ))
if ( ( IsTerrainPathableBJ(udg_dian2[4], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[4]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[4]))
else
endif
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[1], 10.00, true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call RemoveLocation(udg_dian2[3])
call RemoveLocation(udg_dian2[4])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_xuanfengshabao_2Func002A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) + 1 ))
if ( ( GetUnitUserData(udg_danwei2[0]) <= 60 ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 15.00, GetUnitFacing(udg_danwei2[0]))
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], ( I2R(GetUnitUserData(udg_danwei2[0])) * 8.00 ), ( GetUnitFacing(udg_danwei2[0]) - ( ( 18.00 * I2R(GetUnitUserData(udg_danwei2[0])) ) + 90.00 ) ))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Undead\\ImpaleTargetDust\\ImpaleTargetDust.mdl", udg_dian2[2]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", udg_dian2[2]))
call RemoveLocation(udg_dian2[2])
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], ( I2R(GetUnitUserData(udg_danwei2[0])) * 8.00 ), ( GetUnitFacing(udg_danwei2[0]) - ( ( 18.00 * I2R(GetUnitUserData(udg_danwei2[0])) ) - 90.00 ) ))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Undead\\ImpaleTargetDust\\ImpaleTargetDust.mdl", udg_dian2[2]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", udg_dian2[2]))
call RemoveLocation(udg_dian2[2])
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
else
endif
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(( 100.00 + ( I2R(GetUnitUserData(udg_danwei2[0])) * 8.00 ) ) , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_xuanfengshabao_2Func002Func003Func013A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
call RemoveUnit(udg_danwei2[0])
call GroupRemoveUnit(udg_danweizu2[151], udg_danwei2[0])
endif
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_xuanfengshabao_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[151], function Trig_xuanfengshabao_2Func002A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_xuanfengshabao_2 takes nothing returns nothing
set gg_trg_xuanfengshabao_2=CreateTrigger()
call TriggerAddCondition(gg_trg_xuanfengshabao_2, Condition(function Trig_xuanfengshabao_2Conditions))
call TriggerAddAction(gg_trg_xuanfengshabao_2, function Trig_xuanfengshabao_2Actions)
endfunction
function Trig_tiaoji_1Actions takes nothing returns nothing
set udg_danwei2[0]=GetSpellAbilityUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
call SetUnitUserData(udg_danwei2[0], 20)
call s__Unit_PauseUnitMU(udg_danwei2[0] , true , "僵尸跳击")
call GroupAddUnit(udg_danweizu2[152], udg_danwei2[0])
call SetUnitAnimation(udg_danwei2[0], "spell")
call SetUnitTimeScale(udg_danwei2[0], 2.40)
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
endfunction
function InitTrig_tiaoji_1 takes nothing returns nothing
set gg_trg_tiaoji_1=CreateTrigger()
call TriggerAddAction(gg_trg_tiaoji_1, function Trig_tiaoji_1Actions)
endfunction
function Trig_tiaoji_2Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[152]) == false ) )
endfunction
function Trig_tiaoji_2Func002Func004Func003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[1], 100.00, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_tiaoji_2Func002A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
if ( ( GetUnitUserData(udg_danwei2[0]) > 0 ) ) then
if ( ( GetUnitUserData(udg_danwei2[0]) == 6 ) ) then
call SetUnitTimeScale(udg_danwei2[0], 1.00)
else
endif
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 25.00, GetUnitFacing(udg_danwei2[0]))
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
else
endif
call UnitAddAbility(udg_danwei2[0], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[0] , ( s__maphack_GetHeight(udg_danwei2[0]) + ( ( I2R(GetUnitUserData(udg_danwei2[0])) - 10.00 ) * 6.00 ) ) , 0.00)
call UnitRemoveAbility(udg_danwei2[0], 0x41726176)
call RemoveLocation(udg_dian2[1])
else
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(300.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_tiaoji_2Func002Func004Func003A)
call DestroyGroup(udg_xuanqu)
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl", udg_dian2[0]))
call s__Unit_PauseUnitMU(udg_danwei2[0] , false , "僵尸跳击")
call ResetUnitAnimation(udg_danwei2[0])
call IssueImmediateOrderById(udg_danwei2[0], 852127)
call GroupRemoveUnit(udg_danweizu2[152], udg_danwei2[0])
endif
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_tiaoji_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[152], function Trig_tiaoji_2Func002A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_tiaoji_2 takes nothing returns nothing
set gg_trg_tiaoji_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_tiaoji_2, udg_Times[4])
call TriggerAddCondition(gg_trg_tiaoji_2, Condition(function Trig_tiaoji_2Conditions))
call TriggerAddAction(gg_trg_tiaoji_2, function Trig_tiaoji_2Actions)
endfunction
function Trig_leishouzhenji_1Actions takes nothing returns nothing
set udg_danwei2[0]=GetSpellAbilityUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[1]=GetSpellTargetLoc()
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303351, udg_dian2[0], GetUnitFacing(udg_danwei2[0]))
call SetUnitUserData(udg_danwei2[1], 8)
call GroupAddUnit(udg_danweizu2[153], udg_danwei2[1])
set udg_danwei2[1]=null
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
endfunction
function InitTrig_leishouzhenji_1 takes nothing returns nothing
set gg_trg_leishouzhenji_1=CreateTrigger()
call TriggerAddAction(gg_trg_leishouzhenji_1, function Trig_leishouzhenji_1Actions)
endfunction
function Trig_leishouzhenji_2Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[153]) == false ) )
endfunction
function Trig_leishouzhenji_2Func002Func003Func009A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[1], 40.00, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_leishouzhenji_2Func002A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
if ( ( GetUnitUserData(udg_danwei2[0]) > 0 ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 50.00, GetUnitFacing(udg_danwei2[0]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", udg_dian2[1]))
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
else
endif
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(250.00 , udg_dian2[1])
call ForGroupBJ(udg_xuanqu, function Trig_leishouzhenji_2Func002Func003Func009A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
call KillUnit(udg_danwei2[0])
call GroupRemoveUnit(udg_danweizu2[153], udg_danwei2[0])
endif
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_leishouzhenji_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[153], function Trig_leishouzhenji_2Func002A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_leishouzhenji_2 takes nothing returns nothing
set gg_trg_leishouzhenji_2=CreateTrigger()
call TriggerAddCondition(gg_trg_leishouzhenji_2, Condition(function Trig_leishouzhenji_2Conditions))
call TriggerAddAction(gg_trg_leishouzhenji_2, function Trig_leishouzhenji_2Actions)
endfunction
function Trig_anwuzhiConditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[154]) == false ) )
endfunction
function Trig_anwuzhiFunc001Func002Func002Func001Func003Func006A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[1], 85.00, true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_anwuzhiFunc001A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_DEAD) == false ) ) then
if ( ( GetUnitUserData(udg_danwei2[0]) > 0 ) ) then
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
else
endif
if ( ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) > 50.00 ) and ( GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE) < GetUnitState(udg_danwei2[0], UNIT_STATE_MAX_LIFE) ) ) then
if ( ( GetUnitUserData(udg_danwei2[0]) <= 0 ) and ( GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE) < ( GetUnitState(udg_danwei2[0], UNIT_STATE_MAX_LIFE) * 0.40 ) ) ) then
call SetUnitUserData(udg_danwei2[0], 20)
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=4
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], ( 100.00 * I2R(bj_forLoopAIndex) ), GetUnitFacing(udg_danwei2[0]))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303055, udg_dian2[1], 0.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 1.50)
set udg_danwei2[1]=null
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(300.00 , udg_dian2[1])
call ForGroupBJ(udg_xuanqu, function Trig_anwuzhiFunc001Func002Func002Func001Func003Func006A)
call DestroyGroup(udg_xuanqu)
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call RemoveLocation(udg_dian2[0])
else
endif
call SetUnitLifeBJ(udg_danwei2[0], ( GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE) + RMinBJ(GetUnitState(udg_danwei2[0], UNIT_STATE_MANA), 60.00) ))
call SetUnitManaBJ(udg_danwei2[0], ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) - RMinBJ(60.00, ( GetUnitState(udg_danwei2[0], UNIT_STATE_MAX_LIFE) - GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE) )) ))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\CarrionSwarm\\CarrionSwarmDamage.mdl", udg_danwei2[0], "origin"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\CarrionSwarm\\CarrionSwarmDamage.mdl", udg_danwei2[0], "origin"))
else
endif
else
call GroupRemoveUnit(udg_danweizu2[154], udg_danwei2[0])
endif
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_anwuzhiActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[154], function Trig_anwuzhiFunc001A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_anwuzhi takes nothing returns nothing
set gg_trg_anwuzhi=CreateTrigger()
call TriggerAddCondition(gg_trg_anwuzhi, Condition(function Trig_anwuzhiConditions))
call TriggerAddAction(gg_trg_anwuzhi, function Trig_anwuzhiActions)
endfunction
function Trig_tujin_jiaoxiConditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[155]) == false ) )
endfunction
function Trig_tujin_jiaoxiFunc003Func003Func001Func004A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[1], 300.00, true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_DEMOLITION, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_tujin_jiaoxiFunc003A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
if ( ( GetUnitUserData(udg_danwei2[0]) > 0 ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 50.00, GetUnitFacing(udg_danwei2[0]))
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
else
endif
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x7530304D ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=6
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], GetRandomReal(25.00, 60.00), ( ( 60.00 * I2R(bj_forLoopAIndex) ) + GetRandomReal(0, 60.00) ))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Demon\\DemonSmallDeathExplode\\DemonSmallDeathExplode.mdl", udg_dian2[1]))
call RemoveLocation(udg_dian2[1])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(175.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_tujin_jiaoxiFunc003Func003Func001Func004A)
call DestroyGroup(udg_xuanqu)
call ExplodeUnitBJ(udg_danwei2[0])
call RemoveLocation(udg_dian2[0])
else
endif
call GroupRemoveUnit(udg_danweizu2[155], udg_danwei2[0])
endif
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_tujin_jiaoxiActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[155], function Trig_tujin_jiaoxiFunc003A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_tujin_jiaoxi takes nothing returns nothing
set gg_trg_tujin_jiaoxi=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_tujin_jiaoxi, udg_Times[4])
call TriggerAddCondition(gg_trg_tujin_jiaoxi, Condition(function Trig_tujin_jiaoxiConditions))
call TriggerAddAction(gg_trg_tujin_jiaoxi, function Trig_tujin_jiaoxiActions)
endfunction
function Trig_siwangchanrao_1Actions takes nothing returns nothing
set udg_danwei2[0]=GetSpellAbilityUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[1]=GetSpellTargetLoc()
call StopSoundBJ(gg_snd_RaiseSkeleton, false)
call PlaySoundOnUnitBJ(gg_snd_RaiseSkeleton, 100, udg_danwei2[0])
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303354, udg_dian2[0], AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
call SetUnitUserData(udg_danwei2[1], 45)
call GroupAddUnit(udg_danweizu2[156], udg_danwei2[1])
set udg_danwei2[0]=null
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
endfunction
function InitTrig_siwangchanrao_1 takes nothing returns nothing
set gg_trg_siwangchanrao_1=CreateTrigger()
call TriggerAddAction(gg_trg_siwangchanrao_1, function Trig_siwangchanrao_1Actions)
endfunction
function Trig_siwangchanrao_2Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[156]) == false ) )
endfunction
function Trig_siwangchanrao_2Func002Func004Func002A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[1], 100.00, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_siwangchanrao_2Func002Func004Func010A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
set udg_dian2[2]=GetUnitLoc(udg_danwei2[1])
set udg_dian2[3]=PolarProjectionBJ(udg_dian2[0], RMinBJ(DistanceBetweenPoints(udg_dian2[0], udg_dian2[2]), 50.00), AngleBetweenPoints(udg_dian2[0], udg_dian2[2]))
if ( ( IsTerrainPathableBJ(udg_dian2[3], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[3]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[3]))
else
endif
call RemoveLocation(udg_dian2[2])
call RemoveLocation(udg_dian2[3])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_siwangchanrao_2Func002A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
if ( ( GetUnitUserData(udg_danwei2[0]) >= 0 ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], ( ( I2R(GetUnitUserData(udg_danwei2[0])) - 22.00 ) * 4.00 ), GetUnitFacing(udg_danwei2[0]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Undead\\DeathCoil\\DeathCoilSpecialArt.mdl", udg_dian2[1]))
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
else
endif
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(200.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_siwangchanrao_2Func002Func004Func010A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[1])
else
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(200.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_siwangchanrao_2Func002Func004Func002A)
call DestroyGroup(udg_xuanqu)
call GroupRemoveUnit(udg_danweizu2[156], udg_danwei2[0])
call RemoveUnit(udg_danwei2[0])
endif
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_siwangchanrao_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[156], function Trig_siwangchanrao_2Func002A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_siwangchanrao_2 takes nothing returns nothing
set gg_trg_siwangchanrao_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_siwangchanrao_2, udg_Times[4])
call TriggerAddCondition(gg_trg_siwangchanrao_2, Condition(function Trig_siwangchanrao_2Conditions))
call TriggerAddAction(gg_trg_siwangchanrao_2, function Trig_siwangchanrao_2Actions)
endfunction
function Trig_siwanghuimie_1Actions takes nothing returns nothing
set udg_danwei2[0]=GetSpellAbilityUnit()
call StopSoundBJ(gg_snd_DarkRitualTarget1, false)
call PlaySoundOnUnitBJ(gg_snd_DarkRitualTarget1, 100, udg_danwei2[0])
call SetUnitUserData(udg_danwei2[0], 0)
call GroupAddUnit(udg_danweizu2[157], udg_danwei2[0])
set udg_danwei2[0]=null
endfunction
function InitTrig_siwanghuimie_1 takes nothing returns nothing
set gg_trg_siwanghuimie_1=CreateTrigger()
call TriggerAddAction(gg_trg_siwanghuimie_1, function Trig_siwanghuimie_1Actions)
endfunction
function Trig_siwanghuimie_2Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[157]) == false ) )
endfunction
function Trig_siwanghuimie_2Func002Func004Func008A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[1], 40.00, true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_siwanghuimie_2Func002A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) + 1 ))
if ( ( GetUnitUserData(udg_danwei2[0]) <= 10 ) ) then
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303353, udg_dian2[0], 0.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 1.00)
call SetUnitScale(udg_danwei2[1], ( I2R(GetUnitUserData(udg_danwei2[0])) + 10.00 ), ( I2R(GetUnitUserData(udg_danwei2[0])) + 10.00 ), ( I2R(GetUnitUserData(udg_danwei2[0])) + 10.00 ))
set udg_danwei2[1]=null
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=6
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], ( 50.00 * I2R(GetUnitUserData(udg_danwei2[0])) ), ( 60.00 * I2R(bj_forLoopAIndex) ))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Undead\\UndeadDissipate\\UndeadDissipate.mdl", udg_dian2[1]))
call RemoveLocation(udg_dian2[1])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(( 300.00 + ( I2R(GetUnitUserData(udg_danwei2[0])) * 50.00 ) ) , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_siwanghuimie_2Func002Func004Func008A)
call DestroyGroup(udg_xuanqu)
else
call GroupRemoveUnit(udg_danweizu2[157], udg_danwei2[0])
endif
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_siwanghuimie_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[157], function Trig_siwanghuimie_2Func002A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_siwanghuimie_2 takes nothing returns nothing
set gg_trg_siwanghuimie_2=CreateTrigger()
call TriggerAddCondition(gg_trg_siwanghuimie_2, Condition(function Trig_siwanghuimie_2Conditions))
call TriggerAddAction(gg_trg_siwanghuimie_2, function Trig_siwanghuimie_2Actions)
endfunction
function Trig_guishou_1Actions takes nothing returns nothing
set udg_danwei2[0]=GetSpellAbilityUnit()
set udg_danwei2[1]=GetSpellTargetUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
call StopSoundBJ(gg_snd_EntanglingRootsTarget1, false)
call PlaySoundOnUnitBJ(gg_snd_EntanglingRootsTarget1, 100, udg_danwei2[0])
set udg_danwei2[2]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x6530315A, udg_dian2[1], 0.00)
call SetUnitAnimation(udg_danwei2[2], "birth")
call SetUnitUserData(udg_danwei2[2], 70)
call GroupAddUnit(udg_danweizu2[161], udg_danwei2[2])
set udg_danwei2[0]=null
set udg_danwei2[1]=null
set udg_danwei2[2]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
endfunction
function InitTrig_guishou_1 takes nothing returns nothing
set gg_trg_guishou_1=CreateTrigger()
call TriggerAddAction(gg_trg_guishou_1, function Trig_guishou_1Actions)
endfunction
function Trig_guishou_2Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[161]) == false ) )
endfunction
function Trig_guishou_2Func002Func003Func006A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], RMinBJ(DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]), 35.00), DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]))
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[1], 5.00, true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
if ( ( IsTerrainPathableBJ(udg_dian2[2], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[2]))
else
endif
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_guishou_2Func002A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
if ( ( GetUnitUserData(udg_danwei2[0]) > 0 ) ) then
if ( ( GetUnitUserData(udg_danwei2[0]) == 20 ) ) then
call ResetUnitAnimation(udg_danwei2[0])
else
endif
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(100.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_guishou_2Func002Func003Func006A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[0])
else
call RemoveUnit(udg_danwei2[0])
call GroupRemoveUnit(udg_danweizu2[161], udg_danwei2[0])
endif
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_guishou_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[161], function Trig_guishou_2Func002A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_guishou_2 takes nothing returns nothing
set gg_trg_guishou_2=CreateTrigger()
call TriggerAddCondition(gg_trg_guishou_2, Condition(function Trig_guishou_2Conditions))
call TriggerAddAction(gg_trg_guishou_2, function Trig_guishou_2Actions)
endfunction
function Trig_chuanciFunc009A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[1], 150.00, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_chuanciActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetSpellAbilityUnit()
set udg_danwei2[1]=GetSpellTargetUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=4
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=4
loop
exitwhen bj_forLoopBIndex > bj_forLoopBIndexEnd
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], ( 70.00 * I2R(bj_forLoopBIndex) ), ( ( 45.00 + AngleBetweenPoints(udg_dian2[0], udg_dian2[1]) ) + ( 90.00 * I2R(bj_forLoopAIndex) ) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Undead\\Impale\\ImpaleMissTarget.mdl", udg_dian2[2]))
call RemoveLocation(udg_dian2[2])
set bj_forLoopBIndex=bj_forLoopBIndex + 1
endloop
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=6
loop
exitwhen bj_forLoopBIndex > bj_forLoopBIndexEnd
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], 50.00, ( AngleBetweenPoints(udg_dian2[0], udg_dian2[1]) + ( 60.00 * I2R(bj_forLoopAIndex) ) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Undead\\Impale\\ImpaleHitTarget.mdl", udg_dian2[2]))
call RemoveLocation(udg_dian2[2])
set bj_forLoopBIndex=bj_forLoopBIndex + 1
endloop
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Undead\\Impale\\ImpaleHitTarget.mdl", udg_dian2[1]))
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(350.00 , udg_dian2[1])
call ForGroupBJ(udg_xuanqu, function Trig_chuanciFunc009A)
call DestroyGroup(udg_xuanqu)
set udg_danwei2[0]=null
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_chuanci takes nothing returns nothing
set gg_trg_chuanci=CreateTrigger()
call TriggerAddAction(gg_trg_chuanci, function Trig_chuanciActions)
endfunction
function Trig_zhixianchuanci_1Actions takes nothing returns nothing
set udg_danwei2[0]=GetSpellAbilityUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[1]=GetSpellTargetLoc()
call StopSoundBJ(gg_snd_ImpaleHit01, false)
call PlaySoundOnUnitBJ(gg_snd_ImpaleHit01, 100, udg_danwei2[0])
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303433, udg_dian2[0], AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
call SetUnitUserData(udg_danwei2[1], 15)
call GroupAddUnit(udg_danweizu2[177], udg_danwei2[1])
set udg_danwei2[0]=null
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
endfunction
function InitTrig_zhixianchuanci_1 takes nothing returns nothing
set gg_trg_zhixianchuanci_1=CreateTrigger()
call TriggerAddAction(gg_trg_zhixianchuanci_1, function Trig_zhixianchuanci_1Actions)
endfunction
function Trig_zhixianchuanci_2Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[177]) == false ) )
endfunction
function Trig_zhixianchuanci_2Func002Func004Func008A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call IssueImmediateOrderById(udg_danwei2[1], 851972)
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[1], 50.00, true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_zhixianchuanci_2Func002A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
if ( ( GetUnitUserData(udg_danwei2[0]) > 0 ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 70.00, GetUnitFacing(udg_danwei2[0]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Undead\\Impale\\ImpaleMissTarget.mdl", udg_dian2[1]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Undead\\Impale\\ImpaleHitTarget.mdl", udg_dian2[1]))
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
else
endif
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(200.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_zhixianchuanci_2Func002Func004Func008A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[1])
else
call GroupRemoveUnit(udg_danweizu2[177], udg_danwei2[0])
call RemoveUnit(udg_danwei2[0])
endif
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_zhixianchuanci_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[177], function Trig_zhixianchuanci_2Func002A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_zhixianchuanci_2 takes nothing returns nothing
set gg_trg_zhixianchuanci_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_zhixianchuanci_2, udg_Times[3])
call TriggerAddCondition(gg_trg_zhixianchuanci_2, Condition(function Trig_zhixianchuanci_2Conditions))
call TriggerAddAction(gg_trg_zhixianchuanci_2, function Trig_zhixianchuanci_2Actions)
endfunction
function Trig_boss2_jiantaConditions takes nothing returns boolean
return ( ( GetUnitTypeId(udg_boss[1]) == 0x75303039 ) )
endfunction
function Trig_boss2_jiantaFunc004Func003Func007A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_boss[1])) == true ) ) then
call UnitDamageTarget(udg_boss[1], udg_danwei2[1], 125.00, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_boss2_jiantaActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_dian2[162]=GetUnitLoc(udg_boss[1])
call UnitRemoveBuffs(udg_boss[1], false, true)
if ( ( udg_zhengshu2[163] == 0 ) ) then
if ( ( DistanceBetweenPoints(udg_dian2[162], udg_dian2[163]) >= 39.00 ) and ( DistanceBetweenPoints(udg_dian2[162], udg_dian2[163]) <= 40.00 ) ) then
set udg_zhengshu2[162]=( udg_zhengshu2[162] + 1 )
else
endif
if ( ( udg_zhengshu2[162] == 3 ) ) then
set udg_zhengshu2[163]=3
set udg_dian2[0]=PolarProjectionBJ(udg_dian2[162], 250.00, GetUnitFacing(udg_boss[1]))
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\explosion.mdx", udg_dian2[0]))
call RemoveLocation(udg_dian2[0])
else
endif
else
set udg_zhengshu2[163]=( udg_zhengshu2[163] - 1 )
if ( ( udg_zhengshu2[163] == 2 ) ) then
call StopSoundBJ(gg_snd_Shockwave01, false)
call PlaySoundBJ(gg_snd_Shockwave01)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=5
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call CameraSetEQNoiseForPlayer(s__baka_SPlayer(bj_forLoopAIndex - 1), 10.00)
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
set udg_dian2[0]=PolarProjectionBJ(udg_dian2[162], 250.00, GetUnitFacing(udg_boss[1]))
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(450.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_boss2_jiantaFunc004Func003Func007A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[0])
else
endif
if ( ( udg_zhengshu2[163] == 0 ) ) then
set udg_zhengshu2[162]=0
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=5
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call CameraClearNoiseForPlayer(s__baka_SPlayer(bj_forLoopAIndex - 1))
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
else
endif
endif
call RemoveLocation(udg_dian2[162])
call RemoveLocation(udg_dian2[163])
set udg_dian2[163]=GetUnitLoc(udg_boss[1])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_boss2_jianta takes nothing returns nothing
set gg_trg_boss2_jianta=CreateTrigger()
call TriggerAddCondition(gg_trg_boss2_jianta, Condition(function Trig_boss2_jiantaConditions))
call TriggerAddAction(gg_trg_boss2_jianta, function Trig_boss2_jiantaActions)
endfunction
function Trig_boss2_hongtianlei_0Actions takes nothing returns nothing
set udg_danwei2[0]=GetSpellAbilityUnit()
set udg_zhengshu2[165]=6
call s__Unit_PauseUnitMU(udg_danwei2[0] , true , "僵尸轰天雷")
if ( ( GetRandomInt(1, 3) == 1 ) ) then
call UnitRemoveAbility(udg_danwei2[0], 0x41304251)
call UnitAddAbility(udg_danwei2[0], 0x41304251)
else
endif
call StartTimerBJ(udg_times[165], true, 0.10)
set udg_danwei2[0]=null
endfunction
function InitTrig_boss2_hongtianlei_0 takes nothing returns nothing
set gg_trg_boss2_hongtianlei_0=CreateTrigger()
call TriggerAddAction(gg_trg_boss2_hongtianlei_0, function Trig_boss2_hongtianlei_0Actions)
endfunction
function Trig_boss2_hongtianlei_1Actions takes nothing returns nothing
set udg_zhengshu2[165]=( udg_zhengshu2[165] - 1 )
if ( ( udg_zhengshu2[165] >= 0 ) ) then
if ( ( udg_zhengshu2[165] == 5 ) ) then
call SetUnitAnimation(udg_boss[1], "spell")
else
endif
else
call PauseTimer(udg_times[165])
call s__Unit_PauseUnitMU(udg_boss[1] , false , "僵尸轰天雷")
set udg_dian2[0]=GetUnitLoc(udg_boss[1])
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 200.00, ( GetUnitFacing(udg_boss[1]) - 60.00 ))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_boss[1]), 0x6530304D, udg_dian2[1], GetUnitFacing(udg_boss[1]))
call SetUnitFacing(udg_danwei2[1], GetUnitFacing(udg_boss[1]))
call SetUnitUserData(udg_danwei2[1], 6)
call GroupAddUnit(udg_danweizu2[165], udg_danwei2[1])
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
endif
endfunction
function InitTrig_boss2_hongtianlei_1 takes nothing returns nothing
set gg_trg_boss2_hongtianlei_1=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_boss2_hongtianlei_1, udg_times[165])
call TriggerAddAction(gg_trg_boss2_hongtianlei_1, function Trig_boss2_hongtianlei_1Actions)
endfunction
function Trig_boss2_hongtianlei_2Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[165]) == false ) )
endfunction
function Trig_boss2_hongtianlei_2Func002Func004Func009A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], 20.00, GetUnitFacing(udg_danwei2[0]))
if ( ( IsTerrainPathableBJ(udg_dian2[2], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[2]))
else
endif
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[1], 100.00, true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call s__baka_IssueTargetOrderById2(udg_danwei2[2] , 852095 , udg_danwei2[1])
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_boss2_hongtianlei_2Func002A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
if ( ( GetUnitUserData(udg_danwei2[0]) >= 0 ) ) then
call StopSoundBJ(gg_snd_ThunderClapCaster, false)
call PlaySoundBJ(gg_snd_ThunderClapCaster)
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 125.00, GetUnitFacing(udg_danwei2[0]))
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
else
endif
set udg_danwei2[2]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303432, udg_dian2[0], GetUnitFacing(udg_danwei2[0]))
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(425.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_boss2_hongtianlei_2Func002Func004Func009A)
call DestroyGroup(udg_xuanqu)
call UnitApplyTimedLife(udg_danwei2[2], 0x42487765, 1.00)
set udg_danwei2[2]=null
call RemoveLocation(udg_dian2[1])
else
call GroupRemoveUnit(udg_danweizu2[165], udg_danwei2[0])
call KillUnit(udg_danwei2[0])
endif
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_boss2_hongtianlei_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[165], function Trig_boss2_hongtianlei_2Func002A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_boss2_hongtianlei_2 takes nothing returns nothing
set gg_trg_boss2_hongtianlei_2=CreateTrigger()
call TriggerAddCondition(gg_trg_boss2_hongtianlei_2, Condition(function Trig_boss2_hongtianlei_2Conditions))
call TriggerAddAction(gg_trg_boss2_hongtianlei_2, function Trig_boss2_hongtianlei_2Actions)
endfunction
function Trig_boss2_liuxingchui_0Actions takes nothing returns nothing
set udg_danwei2[0]=GetSpellAbilityUnit()
call s__Unit_PauseUnitMU(udg_danwei2[0] , true , "僵尸流星锤")
call UnitAddAbility(udg_danwei2[0], 0x41436D69)
call StartTimerBJ(udg_times[166], true, 0.10)
set udg_danwei2[0]=null
set udg_zhengshu2[166]=7
endfunction
function InitTrig_boss2_liuxingchui_0 takes nothing returns nothing
set gg_trg_boss2_liuxingchui_0=CreateTrigger()
call TriggerAddAction(gg_trg_boss2_liuxingchui_0, function Trig_boss2_liuxingchui_0Actions)
endfunction
function Trig_boss2_liuxingchui_1Actions takes nothing returns nothing
set udg_zhengshu2[166]=( udg_zhengshu2[166] - 1 )
if ( ( udg_zhengshu2[166] >= 0 ) ) then
if ( ( udg_zhengshu2[166] == 6 ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl", udg_boss[1], "weapon"))
call SetUnitAnimation(udg_boss[1], "attack slam")
else
endif
else
set udg_dian2[0]=GetUnitLoc(udg_boss[1])
call s__Unit_PauseUnitMU(udg_boss[1] , false , "僵尸流星锤")
call UnitRemoveAbility(udg_boss[1], 0x41436D69)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=15
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_boss[1]), 0x65303358, udg_dian2[0], ( GetUnitFacing(udg_boss[1]) + GetRandomReal(- 120.00, 120.00) ))
call SetUnitManaBJ(udg_danwei2[1], GetRandomReal(0.00, 30.00))
call SetUnitUserData(udg_danwei2[1], ( 25 + ( bj_forLoopAIndex * 3 ) ))
call GroupAddUnit(udg_danweizu2[166], udg_danwei2[1])
set udg_danwei2[1]=null
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call PauseTimer(udg_times[166])
call RemoveLocation(udg_dian2[0])
endif
endfunction
function InitTrig_boss2_liuxingchui_1 takes nothing returns nothing
set gg_trg_boss2_liuxingchui_1=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_boss2_liuxingchui_1, udg_times[166])
call TriggerAddAction(gg_trg_boss2_liuxingchui_1, function Trig_boss2_liuxingchui_1Actions)
endfunction
function Trig_boss2_liuxingchui_2Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[166]) == false ) )
endfunction
function Trig_boss2_liuxingchui_2Func002Func003Func009A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[1], 225.00, true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_boss2_liuxingchui_2Func002A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
if ( ( s__maphack_GetHeight(udg_danwei2[0]) >= 10.00 ) ) then
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 3 ))
call s__maphack_SetHeight(udg_danwei2[0] , ( s__maphack_GetHeight(udg_danwei2[0]) + I2R(GetUnitUserData(udg_danwei2[0])) ) , 0.00)
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], GetUnitState(udg_danwei2[0], UNIT_STATE_MANA), GetUnitFacing(udg_danwei2[0]))
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
else
endif
call RemoveLocation(udg_dian2[1])
else
call StopSoundBJ(gg_snd_CatapultMissile4, false)
call PlaySoundAtPointBJ(gg_snd_CatapultMissile4, 100, udg_dian2[0], 500.00)
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\Mortar\\ScatterShotMissile.mdl", udg_dian2[0]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\Incinerate\\FireLordDeathExplode.mdl", udg_dian2[0]))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl", udg_dian2[0]))
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(375.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_boss2_liuxingchui_2Func002Func003Func009A)
call DestroyGroup(udg_xuanqu)
call GroupRemoveUnit(udg_danweizu2[166], udg_danwei2[0])
call RemoveUnit(udg_danwei2[0])
endif
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_boss2_liuxingchui_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[166], function Trig_boss2_liuxingchui_2Func002A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_boss2_liuxingchui_2 takes nothing returns nothing
set gg_trg_boss2_liuxingchui_2=CreateTrigger()
call TriggerAddCondition(gg_trg_boss2_liuxingchui_2, Condition(function Trig_boss2_liuxingchui_2Conditions))
call TriggerAddAction(gg_trg_boss2_liuxingchui_2, function Trig_boss2_liuxingchui_2Actions)
endfunction
function Trig_boss2_huanxingzhenjiFunc007Func001Func001Func002A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) and ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) >= 950.00 ) ) then
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[1], 400.00, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[1])
endfunction
function Trig_boss2_huanxingzhenjiFunc007Func001Func004A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) and ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) >= 650.00 ) and ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) <= 950.00 ) ) then
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[1], 400.00, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[1])
endfunction
function Trig_boss2_huanxingzhenjiFunc007Func004A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) and ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) >= 350.00 ) and ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) <= 650.00 ) ) then
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[1], 400.00, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[1])
endfunction
function Trig_boss2_huanxingzhenjiActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetSpellAbilityUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
call StopSoundBJ(gg_snd_CannonTowerMissile2, false)
call PlaySoundBJ(gg_snd_CannonTowerMissile2)
set udg_zhengshu2[3]=GetRandomInt(1, 3)
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(1250.00 , udg_dian2[0])
if ( ( udg_zhengshu2[3] == 1 ) ) then
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=20
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 500.00, ( 18.00 * I2R(bj_forLoopAIndex) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\Volcano\\VolcanoDeath.mdl", udg_dian2[1]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", udg_dian2[1]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Orc\\EarthQuake\\EarthQuakeTarget.mdl", udg_dian2[1]))
call RemoveLocation(udg_dian2[1])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call ForGroupBJ(udg_xuanqu, function Trig_boss2_huanxingzhenjiFunc007Func004A)
else
if ( ( udg_zhengshu2[3] == 2 ) ) then
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=30
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 800.00, ( 12.00 * I2R(bj_forLoopAIndex) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\Volcano\\VolcanoDeath.mdl", udg_dian2[1]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", udg_dian2[1]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Orc\\EarthQuake\\EarthQuakeTarget.mdl", udg_dian2[1]))
call RemoveLocation(udg_dian2[1])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call ForGroupBJ(udg_xuanqu, function Trig_boss2_huanxingzhenjiFunc007Func001Func004A)
else
if ( ( udg_zhengshu2[3] == 3 ) ) then
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=40
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 1100.00, ( 9.00 * I2R(bj_forLoopAIndex) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\Volcano\\VolcanoDeath.mdl", udg_dian2[1]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", udg_dian2[1]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Orc\\EarthQuake\\EarthQuakeTarget.mdl", udg_dian2[1]))
call RemoveLocation(udg_dian2[1])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call ForGroupBJ(udg_xuanqu, function Trig_boss2_huanxingzhenjiFunc007Func001Func001Func002A)
else
endif
endif
endif
call DestroyGroup(udg_xuanqu)
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_boss2_huanxingzhenji takes nothing returns nothing
set gg_trg_boss2_huanxingzhenji=CreateTrigger()
call TriggerAddAction(gg_trg_boss2_huanxingzhenji, function Trig_boss2_huanxingzhenjiActions)
endfunction
function Trig_boss2_attack_1Actions takes nothing returns nothing
set udg_danwei2[173]=GetSpellTargetUnit()
set udg_zhengshu2[173]=5
call s__Unit_PauseUnitMU(udg_boss[1] , true , "僵尸攻击")
call SetUnitAnimation(udg_boss[1], "attack")
call StartTimerBJ(udg_times[173], true, 0.10)
endfunction
function InitTrig_boss2_attack_1 takes nothing returns nothing
set gg_trg_boss2_attack_1=CreateTrigger()
call TriggerAddAction(gg_trg_boss2_attack_1, function Trig_boss2_attack_1Actions)
endfunction
function Trig_boss2_attack_2Func002Func001Func009A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( udg_danwei2[1] != udg_danwei2[173] ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_boss[1])) == true ) ) then
call UnitDamageTarget(udg_boss[1], udg_danwei2[1], GetRandomReal(300.00, 500.00), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_boss2_attack_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu2[173]=( udg_zhengshu2[173] - 1 )
if ( ( udg_zhengshu2[173] >= 0 ) ) then
if ( ( udg_zhengshu2[173] == 1 ) ) then
if ( ( IsUnitType(udg_danwei2[173], UNIT_TYPE_STRUCTURE) == true ) ) then
call UnitDamageTarget(udg_boss[1], udg_danwei2[173], GetRandomReal(600.00, 1000.00), true, false, ATTACK_TYPE_SIEGE, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)
call StopSoundBJ(gg_snd_RockHeavyBashMetal1, false)
call PlaySoundBJ(gg_snd_RockHeavyBashMetal1)
else
call UnitDamageTarget(udg_boss[1], udg_danwei2[173], GetRandomReal(600.00, 1000.00), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)
if ( ( GetRandomInt(1, 5) <= 2 ) ) then
call StopSoundBJ(gg_snd_WoodHeavyBashFlesh3, false)
call PlaySoundBJ(gg_snd_WoodHeavyBashFlesh3)
else
if ( ( GetRandomInt(1, 5) <= 3 ) ) then
call StopSoundBJ(gg_snd_WoodHeavyBashFlesh2, false)
call PlaySoundBJ(gg_snd_WoodHeavyBashFlesh2)
else
call StopSoundBJ(gg_snd_WoodHeavyBashFlesh1, false)
call PlaySoundBJ(gg_snd_WoodHeavyBashFlesh1)
endif
endif
endif
call s__Unit_PauseUnitMU(udg_boss[1] , false , "僵尸攻击")
call IssueImmediateOrderById(udg_boss[1], 851972)
call CameraSetEQNoiseForPlayer(GetOwningPlayer(udg_danwei2[173]), 12.00)
set udg_dian2[0]=GetUnitLoc(udg_danwei2[173])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl", udg_dian2[0]))
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(300.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_boss2_attack_2Func002Func001Func009A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[0])
else
endif
else
if ( ( udg_zhengshu2[173] >= - 3 ) ) then
else
call CameraClearNoiseForPlayer(GetOwningPlayer(udg_danwei2[173]))
set udg_danwei2[173]=null
call PauseTimer(udg_times[173])
endif
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_boss2_attack_2 takes nothing returns nothing
set gg_trg_boss2_attack_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_boss2_attack_2, udg_times[173])
call TriggerAddAction(gg_trg_boss2_attack_2, function Trig_boss2_attack_2Actions)
endfunction
function Trig_boss2_gouheji_1Actions takes nothing returns nothing
set udg_zhengshu2[174]=6
call s__Unit_PauseUnitMU(udg_boss[1] , true , "僵尸沟壑击?")
call StartTimerBJ(udg_times[174], true, 0.10)
endfunction
function InitTrig_boss2_gouheji_1 takes nothing returns nothing
set gg_trg_boss2_gouheji_1=CreateTrigger()
call TriggerAddAction(gg_trg_boss2_gouheji_1, function Trig_boss2_gouheji_1Actions)
endfunction
function Trig_boss2_gouheji_2Func002Func002Func006Func006A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_boss[1])) == true ) ) then
call UnitDamageTarget(udg_boss[1], udg_danwei2[1], 75.00, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_boss2_gouheji_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu2[174]=( udg_zhengshu2[174] - 1 )
if ( ( udg_zhengshu2[174] >= 0 ) ) then
if ( ( udg_zhengshu2[174] == 5 ) ) then
call SetUnitAnimation(udg_boss[1], "attack")
else
endif
if ( ( udg_zhengshu2[174] == 1 ) ) then
call StopSoundBJ(gg_snd_ThunderClapCaster01, false)
call PlaySoundBJ(gg_snd_ThunderClapCaster01)
call s__Unit_PauseUnitMU(udg_boss[1] , false , "僵尸沟壑击?")
set udg_dian2[0]=GetUnitLoc(udg_boss[1])
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=15
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], ( 100.00 * ( I2R(bj_forLoopAIndex) + 1 ) ), GetUnitFacing(udg_boss[1]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\Volcano\\VolcanoDeath.mdl", udg_dian2[1]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", udg_dian2[1]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Orc\\EarthQuake\\EarthQuakeTarget.mdl", udg_dian2[1]))
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(275.00 , udg_dian2[1])
call ForGroupBJ(udg_xuanqu, function Trig_boss2_gouheji_2Func002Func002Func006Func006A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[1])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call RemoveLocation(udg_dian2[0])
else
endif
else
call PauseTimer(udg_times[174])
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_boss2_gouheji_2 takes nothing returns nothing
set gg_trg_boss2_gouheji_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_boss2_gouheji_2, udg_times[174])
call TriggerAddAction(gg_trg_boss2_gouheji_2, function Trig_boss2_gouheji_2Actions)
endfunction
function Trig_bossex_anxi_1Actions takes nothing returns nothing
set udg_danwei2[0]=GetSpellAbilityUnit()
set udg_dian2[168]=GetUnitLoc(udg_boss[1])
set udg_dian2[169]=GetSpellTargetLoc()
set udg_zhengshu2[168]=( R2I(DistanceBetweenPoints(udg_dian2[168], udg_dian2[169])) / 80 )
call UnitAddAbility(udg_danwei2[0], 0x41303933)
call UnitAddAbility(udg_danwei2[0], 0x41436D69)
call SetUnitAnimation(udg_danwei2[0], "attack")
call StartTimerBJ(udg_times[168], true, 0.04)
set udg_danwei2[0]=null
endfunction
function InitTrig_bossex_anxi_1 takes nothing returns nothing
set gg_trg_bossex_anxi_1=CreateTrigger()
call TriggerAddAction(gg_trg_bossex_anxi_1, function Trig_bossex_anxi_1Actions)
endfunction
function Trig_bossex_anxi_2Actions takes nothing returns nothing
set udg_zhengshu2[168]=( udg_zhengshu2[168] - 1 )
if ( ( udg_zhengshu2[168] >= 0 ) ) then
set udg_dian2[0]=GetUnitLoc(udg_boss[1])
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 80.00, AngleBetweenPoints(udg_dian2[168], udg_dian2[169]))
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_boss[1], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_boss[1], GetLocationY(udg_dian2[1]))
else
endif
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
call UnitRemoveAbility(udg_boss[1], 0x41303933)
call UnitRemoveAbility(udg_boss[1], 0x41436D69)
call PauseTimer(udg_times[168])
call RemoveLocation(udg_dian2[168])
call RemoveLocation(udg_dian2[169])
endif
endfunction
function InitTrig_bossex_anxi_2 takes nothing returns nothing
set gg_trg_bossex_anxi_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_bossex_anxi_2, udg_times[168])
call TriggerAddAction(gg_trg_bossex_anxi_2, function Trig_bossex_anxi_2Actions)
endfunction
function Trig_bossex_anren_1Actions takes nothing returns nothing
set udg_danwei2[0]=GetSpellAbilityUnit()
call s__Unit_PauseUnitMU(udg_danwei2[0] , true , "僵尸矮人?")
call UnitAddAbility(udg_danwei2[0], 0x41436D69)
call StartTimerBJ(udg_times[169], true, 0.10)
set udg_danwei2[0]=null
set udg_zhengshu2[169]=5
endfunction
function InitTrig_bossex_anren_1 takes nothing returns nothing
set gg_trg_bossex_anren_1=CreateTrigger()
call TriggerAddAction(gg_trg_bossex_anren_1, function Trig_bossex_anren_1Actions)
endfunction
function Trig_bossex_anren_2Actions takes nothing returns nothing
set udg_zhengshu2[169]=( udg_zhengshu2[169] - 1 )
if ( ( udg_zhengshu2[169] >= 0 ) ) then
if ( ( udg_zhengshu2[169] == 4 ) ) then
call SetUnitAnimation(udg_boss[1], "attack")
else
endif
else
call StopSoundBJ(gg_snd_EntanglingRootsTarget1, false)
call PlaySoundOnUnitBJ(gg_snd_AncestralGuardianMissileLaunch, 100, udg_boss[1])
set udg_dian2[0]=GetUnitLoc(udg_boss[1])
call s__Unit_PauseUnitMU(udg_boss[1] , false , "僵尸矮人?")
call UnitRemoveAbility(udg_boss[1], 0x41436D69)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=11
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 150.00, ( GetUnitFacing(udg_boss[1]) + ( 42.00 - ( 7.00 * I2R(bj_forLoopAIndex) ) ) ))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_boss[1]), 0x65303359, udg_dian2[1], ( GetUnitFacing(udg_boss[1]) + ( 42.00 - ( 7.00 * I2R(bj_forLoopAIndex) ) ) ))
call SetUnitUserData(udg_danwei2[1], 8)
call GroupAddUnit(udg_danweizu2[169], udg_danwei2[1])
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[1])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call PauseTimer(udg_times[169])
call RemoveLocation(udg_dian2[0])
endif
endfunction
function InitTrig_bossex_anren_2 takes nothing returns nothing
set gg_trg_bossex_anren_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_bossex_anren_2, udg_times[169])
call TriggerAddAction(gg_trg_bossex_anren_2, function Trig_bossex_anren_2Actions)
endfunction
function Trig_bossex_anren_3Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[169]) == false ) )
endfunction
function Trig_bossex_anren_3Func002Func003Func010A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[1], 20.00, true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_LIGHT_SLICE)
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_bossex_anren_3Func002A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
if ( ( GetUnitUserData(udg_danwei2[0]) > 0 ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 70.00, GetUnitFacing(udg_danwei2[0]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\Feedback\\ArcaneTowerAttack.mdl", udg_dian2[0]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\BlackArrow\\BlackArrowMissile.mdl", udg_dian2[0]))
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
else
endif
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(120.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_bossex_anren_3Func002Func003Func010A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[0])
else
call GroupRemoveUnit(udg_danweizu2[169], udg_danwei2[0])
call RemoveUnit(udg_danwei2[0])
endif
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_bossex_anren_3Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[169], function Trig_bossex_anren_3Func002A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_bossex_anren_3 takes nothing returns nothing
set gg_trg_bossex_anren_3=CreateTrigger()
call TriggerAddCondition(gg_trg_bossex_anren_3, Condition(function Trig_bossex_anren_3Conditions))
call TriggerAddAction(gg_trg_bossex_anren_3, function Trig_bossex_anren_3Actions)
endfunction
function Trig_bossex_canyingConditions takes nothing returns boolean
return ( ( GetUnitTypeId(udg_boss[1]) == 0x75303055 ) and ( UnitHasBuffBJ(udg_boss[1], 0x42303151) == true ) )
endfunction
function Trig_bossex_canyingActions takes nothing returns nothing
set udg_dian2[0]=GetUnitLoc(udg_boss[1])
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_boss[1]), 0x6530335A, udg_dian2[0], GetUnitFacing(udg_boss[1]))
call SetUnitAnimation(udg_danwei2[1], OrderId2StringBJ(GetUnitCurrentOrder(udg_boss[1])))
call SetUnitTimeScale(udg_danwei2[1], 3.00)
call SetUnitVertexColor(udg_danwei2[1], 255, 255, 255, 160)
call SetUnitUserData(udg_danwei2[1], 8)
call SetUnitColor(udg_danwei2[1], PLAYER_COLOR_BROWN)
call GroupAddUnit(udg_danweizu2[170], udg_danwei2[1])
call RemoveLocation(udg_dian2[0])
endfunction
function InitTrig_bossex_canying takes nothing returns nothing
set gg_trg_bossex_canying=CreateTrigger()
call TriggerAddCondition(gg_trg_bossex_canying, Condition(function Trig_bossex_canyingConditions))
call TriggerAddAction(gg_trg_bossex_canying, function Trig_bossex_canyingActions)
endfunction
function Trig_bossex_canying_2Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[170]) == false ) )
endfunction
function Trig_bossex_canying_2Func002A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
if ( ( GetUnitUserData(udg_danwei2[0]) > 0 ) ) then
if ( ( GetUnitUserData(udg_danwei2[0]) == 9 ) ) then
call SetUnitTimeScale(udg_danwei2[0], 0.00)
else
endif
if ( ( GetUnitUserData(udg_danwei2[0]) <= 4 ) ) then
call SetUnitVertexColor(udg_danwei2[0], 255, 255, 255, ( 15 + ( 30 * GetUnitUserData(udg_danwei2[0]) ) ))
else
endif
else
call RemoveUnit(udg_danwei2[0])
call GroupRemoveUnit(udg_danweizu2[170], udg_danwei2[0])
endif
set udg_danwei2[0]=null
endfunction
function Trig_bossex_canying_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[170], function Trig_bossex_canying_2Func002A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_bossex_canying_2 takes nothing returns nothing
set gg_trg_bossex_canying_2=CreateTrigger()
call TriggerAddCondition(gg_trg_bossex_canying_2, Condition(function Trig_bossex_canying_2Conditions))
call TriggerAddAction(gg_trg_bossex_canying_2, function Trig_bossex_canying_2Actions)
endfunction
function Trig_skillsConditions takes nothing returns boolean
return ( ( IsUnitType(GetSpellAbilityUnit(), UNIT_TYPE_UNDEAD) == true ) and ( GetOwningPlayer(GetSpellAbilityUnit()) == s__baka_SPlayer(11) ) )
endfunction
function Trig_skillsActions takes nothing returns nothing
set udg_danwei2[0]=GetSpellAbilityUnit()
set udg_dian2[0]=GetRectCenter(gg_rct_shuabing6)
call IssuePointOrderLoc(udg_danwei2[0], "attack", udg_dian2[0])
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
endfunction
function InitTrig_skills takes nothing returns nothing
set gg_trg_skills=CreateTrigger()
call TriggerAddCondition(gg_trg_skills, Condition(function Trig_skillsConditions))
call TriggerAddAction(gg_trg_skills, function Trig_skillsActions)
endfunction
function Trig_stopConditions takes nothing returns boolean
return ( ( GetIssuedOrderIdBJ() == String2OrderIdBJ("stop") ) and ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_UNDEAD) == true ) and ( GetOwningPlayer(GetTriggerUnit()) == s__baka_SPlayer(11) ) )
endfunction
function Trig_stopActions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
set udg_dian2[0]=GetRectCenter(gg_rct_shuabing6)
call IssuePointOrderLoc(udg_danwei2[0], "attack", udg_dian2[0])
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
endfunction
function InitTrig_stop takes nothing returns nothing
set gg_trg_stop=CreateTrigger()
call TriggerAddCondition(gg_trg_stop, Condition(function Trig_stopConditions))
call TriggerAddAction(gg_trg_stop, function Trig_stopActions)
endfunction
function Trig_tianqiActions takes nothing returns nothing
if ( ( udg_miwu[0] == true ) ) then
if ( ( GetTimeOfDay() >= 12.00 ) ) then
call SetTerrainFogEx(0, 0.00, ( 9000.00 - ( 250.00 * GetTimeOfDay() ) ), 1.00, 0.00, ( 1.60 - ( GetTimeOfDay() / 20.00 ) ), 1.00)
else
call SetTerrainFogEx(0, 0.00, ( 3000.00 + ( 250.00 * GetTimeOfDay() ) ), 1.00, 0.00, ( 0.40 + ( GetTimeOfDay() / 20.00 ) ), 1.00)
endif
else
endif
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=5
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call AdjustPlayerStateBJ(( GetPlayerState(s__baka_SPlayer(10), PLAYER_STATE_RESOURCE_GOLD) / 5 ), s__baka_SPlayer(bj_forLoopAIndex - 1), PLAYER_STATE_RESOURCE_GOLD)
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
set bj_forLoopAIndex=6
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call AdjustPlayerStateBJ(( GetPlayerState(s__baka_SPlayer(11), PLAYER_STATE_RESOURCE_GOLD) / 5 ), s__baka_SPlayer(bj_forLoopAIndex - 1), PLAYER_STATE_RESOURCE_GOLD)
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call SetPlayerStateBJ(s__baka_SPlayer(10), PLAYER_STATE_RESOURCE_GOLD, 0)
call SetPlayerStateBJ(s__baka_SPlayer(11), PLAYER_STATE_RESOURCE_GOLD, 0)
endfunction
function InitTrig_tianqi takes nothing returns nothing
set gg_trg_tianqi=CreateTrigger()
call DisableTrigger(gg_trg_tianqi)
call TriggerRegisterTimerEventPeriodic(gg_trg_tianqi, 5.00)
call TriggerAddAction(gg_trg_tianqi, function Trig_tianqiActions)
endfunction
function Trig_sheep_mieFunc003A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[0]=GetRandomLocInRect(gg_rct_sheep)
call IssuePointOrderByIdLoc(udg_danwei2[0], 851986, udg_dian2[0])
call RemoveLocation(udg_dian2[0])
set udg_danwei2[0]=null
endfunction
function Trig_sheep_mieActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( GetRandomInt(1, 3) == 1 ) ) then
set udg_dian2[0]=GetRandomLocInRect(gg_rct_sheep)
if ( ( GetRandomInt(1, 4) == 1 ) ) then
if ( ( GetRandomInt(1, 8) == 1 ) ) then
set udg_danwei2[0]=CreateUnitAtLoc(s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE), 0x6E303132, udg_dian2[0], GetRandomReal(0, 360.00))
else
set udg_danwei2[0]=CreateUnitAtLoc(s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE), 0x6E303037, udg_dian2[0], GetRandomReal(0, 360.00))
call PlaySoundOnUnitBJ(gg_snd_Sheep1, 100, udg_danwei2[0])
endif
else
set udg_danwei2[0]=CreateUnitAtLoc(s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE), 0x6E303036, udg_dian2[0], GetRandomReal(0, 360.00))
call PlaySoundOnUnitBJ(gg_snd_SheepWhat1, 100, udg_danwei2[0])
endif
call UnitApplyTimedLife(udg_danwei2[0], 0x42487765, 60.00)
call GroupAddUnit(udg_sheep, udg_danwei2[0])
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
else
endif
call ForGroupBJ(udg_sheep, function Trig_sheep_mieFunc003A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_sheep_mie takes nothing returns nothing
set gg_trg_sheep_mie=CreateTrigger()
call DisableTrigger(gg_trg_sheep_mie)
call TriggerRegisterTimerEventPeriodic(gg_trg_sheep_mie, 2.00)
call TriggerAddAction(gg_trg_sheep_mie, function Trig_sheep_mieActions)
endfunction
function Trig_sheepConditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_sheep) == false ) )
endfunction
function Trig_sheepFunc002A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_DEAD) == false ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
if ( ( UnitHasBuffBJ(udg_danwei2[0], 0x42303154) == true ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 80.00, GetUnitFacing(udg_danwei2[0]))
else
call IssueImmediateOrderById(udg_danwei2[0], 852100)
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x6E303036 ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 15.00, GetUnitFacing(udg_danwei2[0]))
else
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 30.00, GetUnitFacing(udg_danwei2[0]))
endif
endif
if ( ( UnitHasBuffBJ(udg_danwei2[0], 0x42656E61) == false ) and ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
else
endif
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
call GroupRemoveUnit(udg_sheep, udg_danwei2[0])
endif
set udg_danwei2[0]=null
endfunction
function Trig_sheepActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_sheep, function Trig_sheepFunc002A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_sheep takes nothing returns nothing
set gg_trg_sheep=CreateTrigger()
call DisableTrigger(gg_trg_sheep)
call TriggerRegisterTimerExpireEvent(gg_trg_sheep, udg_Times[4])
call TriggerAddCondition(gg_trg_sheep, Condition(function Trig_sheepConditions))
call TriggerAddAction(gg_trg_sheep, function Trig_sheepActions)
endfunction
function Trig_sheep_deathFunc005Func010Func002A takes nothing returns nothing
set udg_Danwei[10]=GetEnumUnit()
if ( ( GetUnitTypeId(udg_Danwei[10]) == 0x6E303132 ) ) then
call KillUnit(udg_Danwei[10])
else
endif
set udg_Danwei[10]=null
endfunction
function Trig_sheep_deathActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_Danwei[10]=GetDyingUnit()
set udg_Danwei[11]=GetKillingUnitBJ()
if ( ( IsUnitType(udg_Danwei[11], UNIT_TYPE_HERO) == true ) and ( GetUnitTypeId(udg_Danwei[10]) == 0x6E303036 ) ) then
set udg_Dian[10]=GetUnitLoc(GetDyingUnit())
call AddHeroXP(udg_Danwei[11], GetRandomInt(200, 800), false)
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_Danwei[11]), 0, 0, 10.00, "TRIGSTR_7794")
if ( ( GetRandomInt(1, 8) == 1 ) ) then
call CreateItemLoc(0x4930314F, udg_Dian[10])
else
if ( ( GetRandomInt(1, 2) == 1 ) ) then
call CreateItemLoc(0x4930314B, udg_Dian[10])
else
call CreateItemLoc(0x4930314C, udg_Dian[10])
endif
endif
call RemoveLocation(udg_Dian[10])
else
endif
if ( ( IsUnitType(udg_Danwei[11], UNIT_TYPE_HERO) == true ) and ( GetUnitTypeId(udg_Danwei[10]) == 0x6E303037 ) ) then
set udg_Dian[10]=GetUnitLoc(GetDyingUnit())
call CreateItemLoc(0x4930314F, udg_Dian[10])
call AddHeroXP(udg_Danwei[11], GetRandomInt(800, 1600), false)
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_Danwei[11]), 0, 0, 10.00, "TRIGSTR_7795")
if ( ( GetRandomInt(1, 4) == 1 ) ) then
call CreateItemLoc(0x4930314B, udg_Dian[10])
else
endif
if ( ( GetRandomInt(1, 4) == 1 ) ) then
call CreateItemLoc(0x4930314C, udg_Dian[10])
else
endif
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=GetRandomInt(4, 10)
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_Dian[11]=PolarProjectionBJ(udg_Dian[10], GetRandomReal(0, 100.00), GetRandomReal(0, 360.00))
call CreateItemLoc(0x49303150, udg_Dian[11])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\Transmute\\PileofGold.mdl", udg_Dian[11]))
call RemoveLocation(udg_Dian[11])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call RemoveLocation(udg_Dian[10])
else
endif
if ( ( IsUnitType(udg_Danwei[11], UNIT_TYPE_HERO) == true ) and ( GetUnitTypeId(udg_Danwei[10]) == 0x6E303132 ) ) then
call CreateTextTagUnitBJ("TRIGSTR_2137", udg_Danwei[10], 50.00, 12.00, 0.00, 0.00, 100.00, 0)
call SetTextTagPermanent(GetLastCreatedTextTag(), false)
call SetTextTagLifespan(GetLastCreatedTextTag(), 3.00)
call SetTextTagFadepoint(GetLastCreatedTextTag(), 2.00)
call SetTextTagVelocity(bj_lastCreatedTextTag, 0.00, 0.05)
set udg_Dian[10]=GetUnitLoc(GetDyingUnit())
call AddHeroXP(udg_Danwei[11], GetRandomInt(5000, 8000), false)
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_Danwei[11]), 0, 0, 10.00, "TRIGSTR_2130")
if ( ( GetRandomInt(1, 3) == 1 ) ) then
call CreateItemLoc(0x49303142, udg_Dian[10])
call ForGroupBJ(udg_sheep, function Trig_sheep_deathFunc005Func010Func002A)
else
endif
call RemoveLocation(udg_Dian[10])
else
endif
set udg_Danwei[10]=null
set udg_Danwei[11]=null
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_sheep_death takes nothing returns nothing
set gg_trg_sheep_death=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_sheep_death, EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(gg_trg_sheep_death, function Trig_sheep_deathActions)
endfunction
function Trig_lipinbaoConditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x4130304F ) )
endfunction
function Trig_lipinbaoActions takes nothing returns nothing
set udg_danwei2[0]=GetSpellAbilityUnit()
set udg_zhengshu2[3]=GetRandomInt(1, 40)
if ( ( udg_zhengshu2[3] >= 1 ) and ( udg_zhengshu2[3] <= 10 ) ) then
set udg_roll=GetRandomInt(0, 1000)
call AdjustPlayerStateBJ(udg_roll, GetOwningPlayer(udg_danwei2[0]), PLAYER_STATE_RESOURCE_GOLD)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\ResourceItems\\ResourceEffectTarget.mdl", udg_danwei2[0], "origin"))
call CreateTextTagUnitBJ(( "+" + I2S(udg_roll) ), udg_danwei2[0], 50.00, 12.00, 100.00, 93.00, 0.00, 0)
call SetTextTagPermanent(GetLastCreatedTextTag(), false)
call SetTextTagLifespan(GetLastCreatedTextTag(), 3.00)
call SetTextTagFadepoint(GetLastCreatedTextTag(), 2.00)
call SetTextTagVelocity(bj_lastCreatedTextTag, 0.00, 0.05)
else
if ( ( udg_zhengshu2[3] >= 11 ) and ( udg_zhengshu2[3] <= 13 ) ) then
call UnitAddItemByIdSwapped(0x49303036, udg_danwei2[0])
else
if ( ( udg_zhengshu2[3] >= 14 ) and ( udg_zhengshu2[3] <= 16 ) ) then
call UnitAddItemByIdSwapped(0x4930304B, udg_danwei2[0])
else
if ( ( udg_zhengshu2[3] >= 17 ) and ( udg_zhengshu2[3] <= 18 ) ) then
call UnitAddItemByIdSwapped(0x4930314D, udg_danwei2[0])
else
if ( ( udg_zhengshu2[3] >= 19 ) and ( udg_zhengshu2[3] <= 20 ) ) then
call UnitAddItemByIdSwapped(0x6D636F75, udg_danwei2[0])
else
if ( ( udg_zhengshu2[3] <= 21 ) and ( udg_zhengshu2[3] <= 22 ) ) then
call UnitAddItemByIdSwapped(0x49303137, udg_danwei2[0])
else
if ( ( udg_zhengshu2[3] <= 23 ) and ( udg_zhengshu2[3] <= 24 ) ) then
call UnitAddItemByIdSwapped(0x6A64726E, udg_danwei2[0])
else
if ( ( udg_zhengshu2[3] == 25 ) ) then
call UnitAddItemByIdSwapped(0x72616D31, udg_danwei2[0])
else
if ( ( udg_zhengshu2[3] == 26 ) ) then
call UnitAddItemByIdSwapped(0x72646531, udg_danwei2[0])
else
if ( ( udg_zhengshu2[3] == 27 ) ) then
call UnitAddItemByIdSwapped(0x49303038, udg_danwei2[0])
else
if ( ( udg_zhengshu2[3] == 28 ) ) then
call UnitAddItemByIdSwapped(0x49303030, udg_danwei2[0])
else
if ( ( udg_zhengshu2[3] == 29 ) ) then
call UnitAddItemByIdSwapped(0x72696E31, udg_danwei2[0])
else
if ( ( udg_zhengshu2[3] == 30 ) ) then
call UnitAddItemByIdSwapped(0x49303132, udg_danwei2[0])
else
if ( ( udg_zhengshu2[3] == 31 ) ) then
call UnitAddItemByIdSwapped(0x49303143, udg_danwei2[0])
else
if ( ( udg_zhengshu2[3] == 32 ) ) then
call UnitAddItemByIdSwapped(0x6D6F6474, udg_danwei2[0])
else
if ( ( udg_zhengshu2[3] == 33 ) ) then
call UnitAddItemByIdSwapped(0x49303245, udg_danwei2[0])
else
if ( ( udg_zhengshu2[3] == 34 ) ) then
call UnitAddItemByIdSwapped(0x49303135, udg_danwei2[0])
else
if ( ( udg_zhengshu2[3] == 35 ) ) then
call UnitAddItemByIdSwapped(0x49303157, udg_danwei2[0])
else
if ( ( udg_zhengshu2[3] == 36 ) ) then
call UnitAddItemByIdSwapped(0x49303231, udg_danwei2[0])
else
if ( ( udg_zhengshu2[3] == 37 ) ) then
call UnitAddItemByIdSwapped(0x6F666C67, udg_danwei2[0])
else
if ( ( udg_zhengshu2[3] == 38 ) ) then
call UnitAddItemByIdSwapped(0x49303035, udg_danwei2[0])
else
if ( ( udg_zhengshu2[3] == 39 ) ) then
set udg_roll=GetRandomInt(1000, 5000)
call AdjustPlayerStateBJ(udg_roll, GetOwningPlayer(udg_danwei2[0]), PLAYER_STATE_RESOURCE_GOLD)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Transmute\\PileofGold.mdl", udg_danwei2[0], "origin"))
call CreateTextTagUnitBJ(( "+" + I2S(udg_roll) ), udg_danwei2[0], 50.00, 12.00, 100.00, 93.00, 0.00, 0)
call SetTextTagPermanent(GetLastCreatedTextTag(), false)
call SetTextTagLifespan(GetLastCreatedTextTag(), 3.00)
call SetTextTagFadepoint(GetLastCreatedTextTag(), 2.00)
call SetTextTagVelocity(bj_lastCreatedTextTag, 0.00, 0.05)
else
if ( ( udg_zhengshu2[3] == 40 ) ) then
set udg_roll=GetRandomInt(1, 3)
if ( ( udg_roll == 1 ) ) then
call UnitAddItemByIdSwapped(0x49303151, udg_danwei2[0])
else
endif
if ( ( udg_roll == 2 ) ) then
call UnitAddItemByIdSwapped(0x49303252, udg_danwei2[0])
else
endif
else
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_lipinbao takes nothing returns nothing
set gg_trg_lipinbao=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_lipinbao, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_lipinbao, Condition(function Trig_lipinbaoConditions))
call TriggerAddAction(gg_trg_lipinbao, function Trig_lipinbaoActions)
endfunction
function Trig_FXTConditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41303257 ) )
endfunction
function Trig_FXTFunc006Func004A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[1], ( I2R(( ( GetHeroStr(udg_danwei2[0], true) + GetHeroAgi(udg_danwei2[0], true) ) + GetHeroInt(udg_danwei2[0], true) )) * 0.40 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Demon\\DemonBoltImpact\\DemonBoltImpact.mdl", udg_danwei2[1], "chest"))
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_FXTActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetTriggerUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[1]=GetSpellTargetLoc()
call PlaySoundOnUnitBJ(gg_snd_StarfallCaster1, 100, udg_danwei2[0])
call PlaySoundOnUnitBJ(gg_snd_BuildingDeathLargeHuman01, 100, udg_danwei2[0])
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=15
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], ( 75.00 * I2R(bj_forLoopAIndex) ), AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl", udg_dian2[2]))
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(250.00 , udg_dian2[2])
call ForGroupBJ(udg_xuanqu, function Trig_FXTFunc006Func004A)
call DestroyGroup(udg_xuanqu)
set udg_danwei2[2]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303154, udg_dian2[2], AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
call UnitApplyTimedLife(udg_danwei2[2], 0x42487765, 2.00)
set udg_danwei2[2]=null
call RemoveLocation(udg_dian2[2])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_FXT takes nothing returns nothing
set gg_trg_FXT=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_FXT, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_FXT, Condition(function Trig_FXTConditions))
call TriggerAddAction(gg_trg_FXT, function Trig_FXTActions)
endfunction
function Trig_huanleiConditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41303043 ) )
endfunction
function Trig_huanleiActions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[1]=GetSpellTargetLoc()
set udg_danwei2[2]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303530, udg_dian2[0], AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
call SetUnitLifeBJ(udg_danwei2[2], ( I2R(GetHeroInt(udg_danwei2[0], true)) * 0.25 ))
call SetUnitUserData(udg_danwei2[2], 15)
call GroupAddUnit(udg_danweizu2[265], udg_danwei2[2])
call SetUnitAnimation(udg_danwei2[2], "birth")
call SetUnitTimeScale(udg_danwei2[2], 0.00)
set udg_danwei2[0]=null
set udg_danwei2[2]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
endfunction
function InitTrig_huanlei takes nothing returns nothing
set gg_trg_huanlei=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_huanlei, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_huanlei, Condition(function Trig_huanleiConditions))
call TriggerAddAction(gg_trg_huanlei, function Trig_huanleiActions)
endfunction
function Trig_huanlei_2Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[265]) == false ) )
endfunction
function Trig_huanlei_2Func001Func003Func014A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
if ( ( GetUnitState(udg_danwei2[1], UNIT_STATE_MAX_MANA) > 0.00 ) ) then
set udg_dian2[2]=GetUnitLoc(udg_danwei2[1])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBoltImpact.mdl", udg_dian2[2]))
call s__baka_IssueTargetOrderById2(udg_danwei2[2] , 852111 , udg_danwei2[1])
call CreateTextTagUnitBJ(( "-" + I2S(R2I(RMinBJ(( ( GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE) * 8.00 ) + ( 500.00 - DistanceBetweenPoints(udg_dian2[3], udg_dian2[2]) ) ), GetUnitState(udg_danwei2[1], UNIT_STATE_MANA)))) ), udg_danwei2[1], 50.00, 10.00, 32.00, 32.00, 100.00, 0)
call SetTextTagPermanent(GetLastCreatedTextTag(), false)
call SetTextTagLifespan(GetLastCreatedTextTag(), 3.00)
call SetTextTagFadepoint(GetLastCreatedTextTag(), 1.00)
call SetTextTagVelocity(bj_lastCreatedTextTag, 0.00, 0.05)
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[1], RMinBJ(( ( GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE) * 8.00 ) + ( 500.00 - DistanceBetweenPoints(udg_dian2[3], udg_dian2[2]) ) ), GetUnitState(udg_danwei2[1], UNIT_STATE_MANA)), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_FIRE, WEAPON_TYPE_WHOKNOWS)
call SetUnitManaBJ(udg_danwei2[1], ( GetUnitState(udg_danwei2[1], UNIT_STATE_MANA) - ( ( GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE) * 8.00 ) + ( 500.00 - DistanceBetweenPoints(udg_dian2[3], udg_dian2[2]) ) ) ))
call RemoveLocation(udg_dian2[2])
else
endif
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_huanlei_2Func001Func003Func037A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[1], GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_FIRE, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_huanlei_2Func001A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
if ( ( GetUnitUserData(udg_danwei2[0]) > 0 ) and ( IsTerrainPathableBJ(udg_dian2[0], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 50.00, GetUnitFacing(udg_danwei2[0]))
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], ( I2R(( GetUnitUserData(udg_danwei2[0]) + 6 )) * 50.00 ), GetUnitFacing(udg_danwei2[0]))
set udg_dian2[3]=PolarProjectionBJ(udg_dian2[0], 300.00, GetUnitFacing(udg_danwei2[0]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", udg_dian2[3]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\ForkedLightning\\ForkedLightningTarget.mdl", udg_dian2[3]))
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
set udg_danwei2[2]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x6530345A, udg_dian2[2], ( GetUnitFacing(udg_danwei2[0]) + 180.00 ))
call UnitApplyTimedLife(udg_danwei2[2], 0x42487765, 0.50)
call SetUnitTimeScale(udg_danwei2[2], 2.00)
call SetUnitAnimation(udg_danwei2[2], "birth")
set udg_danwei2[2]=null
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(300.00 , udg_dian2[3])
call ForGroupBJ(udg_xuanqu, function Trig_huanlei_2Func001Func003Func037A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
call RemoveLocation(udg_dian2[3])
else
set udg_dian2[3]=PolarProjectionBJ(udg_dian2[0], 300.00, GetUnitFacing(udg_danwei2[0]))
call DestroyEffect(AddSpecialEffectLoc("Units\\NightElf\\Wisp\\WispExplode.mdl", udg_dian2[3]))
set udg_danwei2[2]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303059, udg_dian2[3], 180.00)
call SetUnitScale(udg_danwei2[2], 3.00, 3.00, 3.00)
call SetUnitTimeScale(udg_danwei2[2], 0.15)
call SetUnitVertexColor(udg_danwei2[2], 0, 255, 255, 255)
call UnitApplyTimedLife(udg_danwei2[2], 0x42487765, 1.00)
call SetUnitTimeScale(udg_danwei2[2], 0.40)
set udg_danwei2[2]=null
set udg_danwei2[2]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303459, udg_dian2[3], 180.00)
call UnitApplyTimedLife(udg_danwei2[2], 0x42487765, 2.00)
call SetUnitTimeScale(udg_danwei2[2], 0.40)
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(500.00 , udg_dian2[3])
call ForGroupBJ(udg_xuanqu, function Trig_huanlei_2Func001Func003Func014A)
call DestroyGroup(udg_xuanqu)
call KillUnit(udg_danwei2[0])
call GroupRemoveUnit(udg_danweizu2[265], udg_danwei2[0])
call SetUnitTimeScale(udg_danwei2[0], 1.00)
set udg_danwei2[2]=null
call RemoveLocation(udg_dian2[3])
endif
call RemoveLocation(udg_dian2[0])
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_huanlei_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[265], function Trig_huanlei_2Func001A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_huanlei_2 takes nothing returns nothing
set gg_trg_huanlei_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_huanlei_2, udg_Times[3])
call TriggerAddCondition(gg_trg_huanlei_2, Condition(function Trig_huanlei_2Conditions))
call TriggerAddAction(gg_trg_huanlei_2, function Trig_huanlei_2Actions)
endfunction
function Trig_0_33t_zhouqiFunc004A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( ( GetUnitTypeId(udg_danwei2[1]) == 0x6E303039 ) or ( GetUnitTypeId(udg_danwei2[1]) == 0x6E303038 ) ) ) then
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 ) <= 5 ) ) then
if ( ( RectContainsUnit(gg_rct_xuechi_1, udg_danwei2[1]) == true ) ) then
call SetUnitInvulnerable(udg_danwei2[1], true)
else
call SetUnitInvulnerable(udg_danwei2[1], false)
endif
else
endif
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 ) >= 6 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 ) <= 10 ) ) then
if ( ( RectContainsUnit(gg_rct_xuechi_2, udg_danwei2[1]) == true ) ) then
call SetUnitInvulnerable(udg_danwei2[1], true)
else
call SetUnitInvulnerable(udg_danwei2[1], false)
endif
else
endif
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_0_33t_zhouqiFunc006Func002A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_HERO) == true ) or ( GetUnitTypeId(udg_danwei2[1]) == 0x686D7474 ) ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 ) >= 6 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 ) <= 10 ) and ( GetUnitTypeId(udg_danwei2[1]) != 0x4F303030 ) ) then
else
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[1])
endif
set udg_danwei2[1]=null
endfunction
function Trig_0_33t_zhouqiFunc006Func006A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_HERO) == true ) or ( GetUnitTypeId(udg_danwei2[1]) == 0x686D7474 ) ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 ) <= 5 ) and ( GetUnitTypeId(udg_danwei2[1]) != 0x4F303030 ) and ( RectContainsUnit(gg_rct_jidi_3, udg_danwei2[1]) == false ) ) then
else
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[1])
endif
set udg_danwei2[1]=null
endfunction
function Trig_0_33t_zhouqiActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=5
loop
exitwhen bj_forLoopBIndex > bj_forLoopBIndexEnd
if ( ( GetPlayerSlotState(s__baka_SPlayer(bj_forLoopBIndex - 1)) == PLAYER_SLOT_STATE_PLAYING ) ) then
set udg_wanjiazu[0]=YDWEGetForceOfPlayerNull(s__baka_SPlayer(bj_forLoopBIndex - 1))
set udg_wanjiazu[1]=CreateForce()
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=5
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call ForceAddPlayer(udg_wanjiazu[1], s__baka_SPlayer(bj_forLoopAIndex - 1))
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call SetForceAllianceStateBJ(udg_wanjiazu[0], udg_wanjiazu[1], bj_ALLIANCE_ALLIED_VISION)
call DestroyForce(udg_wanjiazu[0])
call DestroyForce(udg_wanjiazu[1])
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex + 1
endloop
set bj_forLoopBIndex=6
set bj_forLoopBIndexEnd=10
loop
exitwhen bj_forLoopBIndex > bj_forLoopBIndexEnd
if ( ( GetPlayerSlotState(s__baka_SPlayer(bj_forLoopBIndex - 1)) == PLAYER_SLOT_STATE_PLAYING ) ) then
set udg_wanjiazu[0]=YDWEGetForceOfPlayerNull(s__baka_SPlayer(bj_forLoopBIndex - 1))
set udg_wanjiazu[1]=CreateForce()
set bj_forLoopAIndex=6
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call ForceAddPlayer(udg_wanjiazu[1], s__baka_SPlayer(bj_forLoopAIndex - 1))
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call SetForceAllianceStateBJ(udg_wanjiazu[0], udg_wanjiazu[1], bj_ALLIANCE_ALLIED_VISION)
call DestroyForce(udg_wanjiazu[0])
call DestroyForce(udg_wanjiazu[1])
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex + 1
endloop
set udg_xuanqu=YDWEGetUnitsInRectAllNull(GetPlayableMapRect())
call ForGroupBJ(udg_xuanqu, function Trig_0_33t_zhouqiFunc004A)
call DestroyGroup(udg_xuanqu)
if ( ( udg_Points == - 1 ) ) then
set udg_xuanqu=YDWEGetUnitsInRectAllNull(gg_rct_jidi)
call ForGroupBJ(udg_xuanqu, function Trig_0_33t_zhouqiFunc006Func002A)
if ( ( IsUnitGroupEmptyBJ(udg_xuanqu) == true ) ) then
call SetUnitVertexColor(gg_unit_hgtw_0012, 255, 255, 255, 255)
call UnitAddAbility(gg_unit_hgtw_0012, 0x41436E72)
call UnitAddAbility(gg_unit_hgtw_0012, 0x414E7265)
call UnitRemoveAbility(gg_unit_hgtw_0012, 0x41304933)
call UnitRemoveAbility(gg_unit_hgtw_0012, 0x41304934)
else
call SetUnitVertexColor(gg_unit_hgtw_0012, 255, 255, 255, 180)
call UnitAddAbility(gg_unit_hgtw_0012, 0x41304933)
call UnitAddAbility(gg_unit_hgtw_0012, 0x41304934)
call UnitRemoveAbility(gg_unit_hgtw_0012, 0x41436E72)
call UnitRemoveAbility(gg_unit_hgtw_0012, 0x414E7265)
endif
call DestroyGroup(udg_xuanqu)
set udg_xuanqu=YDWEGetUnitsInRectAllNull(gg_rct_jidi_2)
call ForGroupBJ(udg_xuanqu, function Trig_0_33t_zhouqiFunc006Func006A)
if ( ( IsUnitGroupEmptyBJ(udg_xuanqu) == true ) ) then
call SetUnitVertexColor(gg_unit_hgtw_0019, 255, 255, 255, 255)
call UnitAddAbility(gg_unit_hgtw_0019, 0x41436E72)
call UnitAddAbility(gg_unit_hgtw_0019, 0x414E7265)
call UnitRemoveAbility(gg_unit_hgtw_0019, 0x41304933)
call UnitRemoveAbility(gg_unit_hgtw_0019, 0x41304934)
else
call SetUnitVertexColor(gg_unit_hgtw_0019, 255, 255, 255, 180)
call UnitAddAbility(gg_unit_hgtw_0019, 0x41304933)
call UnitAddAbility(gg_unit_hgtw_0019, 0x41304934)
call UnitRemoveAbility(gg_unit_hgtw_0019, 0x41436E72)
call UnitRemoveAbility(gg_unit_hgtw_0019, 0x414E7265)
endif
call DestroyGroup(udg_xuanqu)
else
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_0_33t_zhouqi takes nothing returns nothing
set gg_trg_0_33t_zhouqi=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_0_33t_zhouqi, 0.33)
call TriggerAddAction(gg_trg_0_33t_zhouqi, function Trig_0_33t_zhouqiActions)
endfunction
function Trig_tognleidiejiaConditions takes nothing returns boolean
return ( ( ( GetItemTypeId(GetManipulatedItem()) == 0x73747770 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x68736C76 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x70636C72 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x77737764 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x73726567 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x49303343 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x49303344 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x49303147 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x4930314B ) or ( GetItemTypeId(GetManipulatedItem()) == 0x4930314C ) or ( GetItemTypeId(GetManipulatedItem()) == 0x4930344C ) ) )
endfunction
function Trig_tognleidiejiaActions takes nothing returns nothing
set udg_Axunhuan2[4]=1
loop
exitwhen udg_Axunhuan2[4] > 6
if ( ( UnitItemInSlotBJ(GetTriggerUnit(), udg_Axunhuan2[4]) != GetManipulatedItem() ) and ( GetItemTypeId(UnitItemInSlotBJ(GetTriggerUnit(), udg_Axunhuan2[4])) == GetItemTypeId(GetManipulatedItem()) ) ) then
if ( ( GetItemTypeId(GetManipulatedItem()) == 0x4930344C ) ) then
call RemoveItem(GetManipulatedItem())
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetTriggerUnit() , 0x4930344C))
call UnitAddItemByIdSwapped(0x4930344D, GetTriggerUnit())
call UnitDropItemSlotBJ(GetTriggerUnit(), bj_lastCreatedItem, udg_Axunhuan2[4])
else
call SetItemCharges(UnitItemInSlotBJ(GetTriggerUnit(), udg_Axunhuan2[4]), ( GetItemCharges(UnitItemInSlotBJ(GetTriggerUnit(), udg_Axunhuan2[4])) + ( GetItemCharges(GetManipulatedItem()) + 0 ) ))
call RemoveItem(GetManipulatedItem())
endif
else
endif
set udg_Axunhuan2[4]=udg_Axunhuan2[4] + 1
endloop
endfunction
function InitTrig_tognleidiejia takes nothing returns nothing
set gg_trg_tognleidiejia=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_tognleidiejia, EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_tognleidiejia, Condition(function Trig_tognleidiejiaConditions))
call TriggerAddAction(gg_trg_tognleidiejia, function Trig_tognleidiejiaActions)
endfunction
function Trig_jinengConditions takes nothing returns boolean
return ( ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true ) )
endfunction
function Trig_jinengActions takes nothing returns nothing
if ( ( GetSpellAbilityId() != 0x41497377 ) and ( GetSpellAbilityId() != 0x41303730 ) and ( GetSpellAbilityId() != 0x41304646 ) and ( GetSpellAbilityId() != 0x4149726C ) and ( GetSpellAbilityId() != 0x41497072 ) and ( GetSpellAbilityId() != 0x41304645 ) and ( GetSpellAbilityId() != 0x4130464F ) and ( GetSpellAbilityId() != 0x41304652 ) and ( GetSpellAbilityId() != 0x4130364C ) and ( GetSpellAbilityId() != 0x41303852 ) and ( GetSpellAbilityId() != 0x41304756 ) and ( GetSpellAbilityId() != 0x41303351 ) and ( GetSpellAbilityId() != 0x41304A49 ) and ( GetSpellAbilityId() != 0x41304D56 ) and ( GetSpellAbilityId() != 0x4130474C ) and ( GetSpellAbilityId() != 0x41304850 ) and ( GetSpellAbilityId() != 0x4130474E ) and ( GetSpellAbilityId() != 0x41304834 ) and ( GetSpellAbilityId() != 0x41304D30 ) and ( GetSpellAbilityId() != 0x41303841 ) and ( GetSpellAbilityId() != 0x41304945 ) and ( GetSpellAbilityId() != 0x41304F5A ) and ( GetSpellAbilityId() != 0x41305045 ) and ( GetSpellAbilityId() != 0x41304559 ) and ( GetSpellAbilityId() != 0x41304A4A ) and ( GetSpellAbilityId() != 0x41304937 ) and ( GetSpellAbilityId() != 0x41496379 ) and ( GetSpellAbilityId() != 0x41304A4F ) and ( GetSpellAbilityId() != 0x41304A4E ) and ( GetSpellAbilityId() != 0x41304F34 ) and ( GetSpellAbilityId() != 0x41304F35 ) and ( GetSpellAbilityId() != 0x41304F36 ) and ( GetSpellAbilityId() != 0x41305030 ) and ( GetUnitTypeId(GetTriggerUnit()) != 0x4830304A ) and ( GetUnitTypeId(GetTriggerUnit()) != 0x456B6565 ) and ( GetUnitTypeId(GetTriggerUnit()) != 0x45777264 ) and ( GetUnitTypeId(GetTriggerUnit()) != 0x4F73616D ) and ( GetUnitTypeId(GetTriggerUnit()) != 0x4F736864 ) and ( GetUnitTypeId(GetTriggerUnit()) != 0x45667572 ) and ( GetUnitTypeId(GetTriggerUnit()) != 0x486B616C ) and ( GetUnitTypeId(GetTriggerUnit()) != 0x55646561 ) and ( GetUnitTypeId(GetTriggerUnit()) != 0x4564656D ) and ( GetUnitTypeId(GetTriggerUnit()) != 0x4830304E ) and ( GetUnitTypeId(GetTriggerUnit()) != 0x4F666172 ) and ( GetUnitTypeId(GetTriggerUnit()) != 0x4830304F ) ) then
set udg_danwei[41]=GetTriggerUnit()
set udg_dian[37]=GetUnitLoc(udg_danwei[41])
call CreateTextTagLocBJ(GetAbilityName(GetSpellAbilityId()), udg_dian[37], 120.00, 10, 100.00, 100.00, 100, 0)
set udg_piaofuwenzi[1]=bj_lastCreatedTextTag
call SetTextTagPermanent(udg_piaofuwenzi[1], false)
call SetTextTagVelocity(udg_piaofuwenzi[1], 0.00, 0.15)
call SetTextTagLifespan(udg_piaofuwenzi[1], 0.40)
call SetTextTagFadepoint(udg_piaofuwenzi[1], 0.25)
call SetTextTagVisibility(udg_piaofuwenzi[1], false)
set udg_wanjiazu[0]=CreateForce()
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ( ( IsUnitVisible(udg_danwei[41], s__baka_SPlayer(bj_forLoopAIndex - 1)) == true ) ) then
call ForceAddPlayer(udg_wanjiazu[0], s__baka_SPlayer(bj_forLoopAIndex - 1))
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call ShowTextTagForceBJ(true, udg_piaofuwenzi[1], udg_wanjiazu[0])
call DestroyForce(udg_wanjiazu[0])
set udg_danwei[41]=null
call RemoveLocation(udg_dian[41])
else
endif
endfunction
function InitTrig_jineng takes nothing returns nothing
set gg_trg_jineng=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_jineng, EVENT_PLAYER_UNIT_SPELL_CAST)
call TriggerAddCondition(gg_trg_jineng, Condition(function Trig_jinengConditions))
call TriggerAddAction(gg_trg_jineng, function Trig_jinengActions)
endfunction
function Trig_spellConditions takes nothing returns boolean
return ( ( ( IsUnitGroupEmptyBJ(udg_Danweizu[37]) == false ) or ( IsUnitGroupEmptyBJ(udg_Danweizu[38]) == false ) ) )
endfunction
function Trig_spellFunc002A takes nothing returns nothing
set udg_Danwei[37]=GetEnumUnit()
set udg_Dian[37]=GetUnitLoc(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[37])) + 1 )])
call SetUnitX(udg_Danwei[37], GetLocationX(udg_Dian[37]))
call SetUnitY(udg_Danwei[37], GetLocationY(udg_Dian[37]))
call RemoveLocation(udg_Dian[37])
if ( ( GetUnitState(udg_Danwei[37], UNIT_STATE_MANA) < 255.00 ) ) then
if ( ( GetUnitState(udg_Danwei[37], UNIT_STATE_MANA) > 1.00 ) ) then
call SetUnitManaBJ(udg_Danwei[37], ( GetUnitState(udg_Danwei[37], UNIT_STATE_MANA) - 10.00 ))
call SetUnitVertexColor(udg_Danwei[37], 255, 255, 255, R2I(GetUnitState(udg_Danwei[37], UNIT_STATE_MANA)))
else
call GroupRemoveUnit(udg_Danweizu[37], udg_Danwei[37])
call RemoveUnit(udg_Danwei[37])
endif
else
endif
set udg_Danwei[37]=null
endfunction
function Trig_spellFunc003A takes nothing returns nothing
set udg_Danwei[37]=GetEnumUnit()
if ( ( GetUnitState(udg_Danwei[37], UNIT_STATE_MANA) < 255.00 ) ) then
if ( ( GetUnitState(udg_Danwei[37], UNIT_STATE_MANA) > 1.00 ) ) then
call SetUnitManaBJ(udg_Danwei[37], ( GetUnitState(udg_Danwei[37], UNIT_STATE_MANA) - 10.00 ))
call SetUnitVertexColor(udg_Danwei[37], 255, 255, 255, R2I(GetUnitState(udg_Danwei[37], UNIT_STATE_MANA)))
else
call GroupRemoveUnit(udg_Danweizu[37], udg_Danwei[37])
call RemoveUnit(udg_Danwei[37])
endif
else
set udg_Dian[37]=GetUnitLoc(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[37])) + 1 )])
call SetUnitX(udg_Danwei[37], GetLocationX(udg_Dian[37]))
call SetUnitY(udg_Danwei[37], GetLocationY(udg_Dian[37]))
call RemoveLocation(udg_Dian[37])
endif
set udg_Danwei[37]=null
endfunction
function Trig_spellActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_Danweizu[37], function Trig_spellFunc002A)
call ForGroupBJ(udg_Danweizu[38], function Trig_spellFunc003A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_spell takes nothing returns nothing
set gg_trg_spell=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_spell, udg_Times[4])
call TriggerAddCondition(gg_trg_spell, Condition(function Trig_spellConditions))
call TriggerAddAction(gg_trg_spell, function Trig_spellActions)
endfunction
function Trig_swdwActions takes nothing returns nothing
if ( ( ( GetUnitTypeId(GetDyingUnit()) == 0x65303049 ) or ( GetUnitTypeId(GetDyingUnit()) == 0x6530304A ) or ( GetUnitTypeId(GetDyingUnit()) == 0x6E303035 ) or ( GetUnitTypeId(GetDyingUnit()) == 0x6530304C ) or ( GetUnitTypeId(GetDyingUnit()) == 0x65303239 ) or ( GetUnitTypeId(GetDyingUnit()) == 0x65303435 ) ) ) then
call ShowUnitHide(GetDyingUnit())
else
endif
endfunction
function InitTrig_swdw takes nothing returns nothing
set gg_trg_swdw=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_swdw, EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(gg_trg_swdw, function Trig_swdwActions)
endfunction
function Trig_kill_heroConditions takes nothing returns boolean
return ( ( udg_buer[0] == true ) )
endfunction
function Trig_kill_heroActions takes nothing returns nothing
if ( ( IsUnitType(GetDyingUnit(), UNIT_TYPE_HERO) == true ) and ( GetUnitTypeId(GetDyingUnit()) != 0x4F303030 ) and ( GetOwningPlayer(GetKillingUnitBJ()) == s__baka_SPlayer(PLAYER_NEUTRAL_AGGRESSIVE) ) ) then
if ( ( GetUnitTypeId(GetKillingUnitBJ()) == 0x48303032 ) ) then
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) <= 5 ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 15.00, ( "|cff009900" + ( GetPlayerName(GetOwningPlayer(GetDyingUnit())) + "|r被|cff00ffff神秘人|r干掉了=。=~~~神马都是浮云" ) ))
else
endif
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) >= 6 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) <= 10 ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 15.00, ( "|cff0075ff" + ( GetPlayerName(GetOwningPlayer(GetDyingUnit())) + "|r被|cff00ffff神秘人|r干掉了=。=~~~神马都是浮云" ) ))
else
endif
else
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) <= 5 ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 15.00, ( "|cff009900" + ( GetPlayerName(GetOwningPlayer(GetDyingUnit())) + "|r被|cffff0000野怪|r打死了，喂喂别卖萌啊！" ) ))
else
endif
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) >= 6 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) <= 10 ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 15.00, ( "|cff0075ff" + ( GetPlayerName(GetOwningPlayer(GetDyingUnit())) + "|r被|cffff0000野怪|r打死了，喂喂别卖萌啊！" ) ))
else
endif
endif
else
if ( ( IsUnitType(GetDyingUnit(), UNIT_TYPE_HERO) == true ) and ( GetUnitTypeId(GetDyingUnit()) != 0x4F303030 ) and ( GetUnitTypeId(GetDyingUnit()) != 0x48303032 ) ) then
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 ) <= 12 ) ) then
if ( ( IsUnitEnemy(GetKillingUnitBJ(), GetOwningPlayer(GetDyingUnit())) == true ) ) then
if ( ( IsUnitAlly(GetKillingUnitBJ(), s__baka_SPlayer(0)) == true ) ) then
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=5
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call AdjustPlayerStateBJ(( ( ( GetHeroLevel(GetDyingUnit()) * 10 ) + 100 ) * ( udg_shangjin[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )] / 100 ) ), s__baka_SPlayer(bj_forLoopAIndex - 1), PLAYER_STATE_RESOURCE_GOLD)
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
else
if ( ( IsUnitAlly(GetKillingUnitBJ(), s__baka_SPlayer(5)) == true ) ) then
set bj_forLoopAIndex=6
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call AdjustPlayerStateBJ(( ( ( GetHeroLevel(GetDyingUnit()) * 10 ) + 100 ) * ( udg_shangjin[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )] / 100 ) ), s__baka_SPlayer(bj_forLoopAIndex - 1), PLAYER_STATE_RESOURCE_GOLD)
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
else
endif
endif
if ( ( udg_shangjin[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )] > 100 ) ) then
set udg_shangjin[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )]=IMaxBJ(( udg_shangjin[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )] - 20 ), 100)
call MultiboardSetItemValue(udg_duomianbanxm[( 140 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) )], ( "|cffffdd00" + ( I2S(udg_shangjin[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )]) + "%|r" ) ))
else
set udg_shangjin[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )]=IMaxBJ(( udg_shangjin[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )] - 15 ), 20)
call MultiboardSetItemValue(udg_duomianbanxm[( 140 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) )], ( "|cffffdd00" + ( I2S(udg_shangjin[( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 )]) + "%|r" ) ))
endif
else
if ( ( GetOwningPlayer(GetKillingUnitBJ()) == GetOwningPlayer(GetDyingUnit()) ) ) then
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) <= 5 ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 15.00, ( "|cff009900" + ( GetPlayerName(GetOwningPlayer(GetDyingUnit())) + "|r自杀了，咦咦？" ) ))
else
endif
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) >= 6 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) <= 10 ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 15.00, ( "|cff0075ff" + ( GetPlayerName(GetOwningPlayer(GetDyingUnit())) + "|r自杀了，咦咦？" ) ))
else
endif
else
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) <= 5 ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 15.00, ( "|cff009900" + ( GetPlayerName(GetOwningPlayer(GetDyingUnit())) + ( "|r被队友|cff009900" + ( GetPlayerName(GetOwningPlayer(GetKillingUnitBJ())) + "|r杀死了，恭喜你被无间道反补了0.0" ) ) ) ))
else
endif
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) >= 6 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) <= 10 ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 15.00, ( "|cff0075ff" + ( GetPlayerName(GetOwningPlayer(GetDyingUnit())) + ( "|r被队友|cff0075ff" + ( GetPlayerName(GetOwningPlayer(GetKillingUnitBJ())) + "|r杀死了，恭喜你被无间道反补了0.0" ) ) ) ))
else
endif
endif
endif
else
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) <= 5 ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 15.00, ( "|cff009900" + ( GetPlayerName(GetOwningPlayer(GetDyingUnit())) + "|r不知怎么就死了，悲剧啊=，=" ) ))
else
endif
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) >= 6 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetDyingUnit())) + 1 ) <= 10 ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 15.00, ( "|cff0075ff" + ( GetPlayerName(GetOwningPlayer(GetDyingUnit())) + "|r不知怎么就死了，悲剧啊=，=" ) ))
else
endif
endif
else
endif
if ( ( GetUnitTypeId(GetDyingUnit()) == 0x48303032 ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 30.00, ( "|cffffcc00" + ( GetHeroProperName(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]) + "和他的同伴击败了 |cff00ffff神秘人|r |cffffff00真是太强大了！！！|r" ) ))
else
endif
endif
endfunction
function InitTrig_kill_hero takes nothing returns nothing
set gg_trg_kill_hero=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_kill_hero, EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gg_trg_kill_hero, Condition(function Trig_kill_heroConditions))
call TriggerAddAction(gg_trg_kill_hero, function Trig_kill_heroActions)
endfunction
function Trig_double_killActions takes nothing returns nothing
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ( ( udg_kill[( bj_forLoopAIndex + 10 )] > 0 ) ) then
set udg_kill[( bj_forLoopAIndex + 10 )]=( udg_kill[( bj_forLoopAIndex + 10 )] - 1 )
else
set udg_kill[bj_forLoopAIndex]=0
endif
if ( ( UnitHasBuffBJ(udg_player[bj_forLoopAIndex], 0x42303134) == true ) and ( UnitHasBuffBJ(udg_player[bj_forLoopAIndex], 0x42737065) == true ) ) then
call UnitRemoveBuffBJ(0x42737065, udg_player[bj_forLoopAIndex])
else
endif
if ( ( GetTimeOfDay() == 0.00 ) and ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_player[bj_forLoopAIndex] , 0x4930324E)) == true ) ) then
call UnitAddAbility(udg_player[bj_forLoopAIndex], 0x41304444)
else
call UnitRemoveAbility(udg_player[bj_forLoopAIndex], 0x41304444)
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=5
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set bj_forLoopBIndex=6
set bj_forLoopBIndexEnd=10
loop
exitwhen bj_forLoopBIndex > bj_forLoopBIndexEnd
if ( ( udg_zhugong[( ( 5 * ( bj_forLoopAIndex - 1 ) ) + ( bj_forLoopBIndex - 5 ) )] > 0 ) ) then
set udg_zhugong[( ( 5 * ( bj_forLoopAIndex - 1 ) ) + ( bj_forLoopBIndex - 5 ) )]=( udg_zhugong[( ( 5 * ( bj_forLoopAIndex - 1 ) ) + ( bj_forLoopBIndex - 5 ) )] - 1 )
else
set udg_zhugong[( ( 5 * ( bj_forLoopAIndex - 1 ) ) + ( bj_forLoopBIndex - 5 ) )]=0
set udg_shuju[( ( 5 * ( bj_forLoopAIndex - 1 ) ) + ( bj_forLoopBIndex - 5 ) )]=0.00
endif
set bj_forLoopBIndex=bj_forLoopBIndex + 1
endloop
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
set bj_forLoopAIndex=6
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=5
loop
exitwhen bj_forLoopBIndex > bj_forLoopBIndexEnd
if ( ( udg_zhugong[( ( 5 * ( bj_forLoopAIndex - 1 ) ) + ( bj_forLoopBIndex - 0 ) )] > 0 ) ) then
set udg_zhugong[( ( 5 * ( bj_forLoopAIndex - 1 ) ) + ( bj_forLoopBIndex - 0 ) )]=( udg_zhugong[( ( 5 * ( bj_forLoopAIndex - 1 ) ) + ( bj_forLoopBIndex - 0 ) )] - 1 )
else
set udg_zhugong[( ( 5 * ( bj_forLoopAIndex - 1 ) ) + ( bj_forLoopBIndex - 0 ) )]=0
set udg_shuju[( ( 5 * ( bj_forLoopAIndex - 1 ) ) + ( bj_forLoopBIndex - 0 ) )]=0.00
endif
set bj_forLoopBIndex=bj_forLoopBIndex + 1
endloop
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
endfunction
function InitTrig_double_kill takes nothing returns nothing
set gg_trg_double_kill=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_double_kill, 1.00)
call TriggerAddAction(gg_trg_double_kill, function Trig_double_killActions)
endfunction
function Trig_kill_taConditions takes nothing returns boolean
return ( ( IsUnitType(GetDyingUnit(), UNIT_TYPE_STRUCTURE) == true ) )
endfunction
function Trig_kill_taActions takes nothing returns nothing
if ( ( IsUnitAlly(GetKillingUnitBJ(), GetOwningPlayer(GetDyingUnit())) == false ) ) then
if ( ( GetOwningPlayer(GetDyingUnit()) == s__baka_SPlayer(10) ) ) then
if ( ( GetUnitTypeId(GetDyingUnit()) == 0x6E65676D ) ) then
if ( ( udg_Points >= 0 ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, "TRIGSTR_1205")
else
call DisplayTimedTextToForce(GetPlayersAll(), 15.00, ( "|cff0075ff" + ( GetPlayerName(GetOwningPlayer(GetKillingUnitBJ())) + "|r摧毁了|cff009900万物复苏|r的天怒之塔，英雄们获得了|cffffdc00 600 |r金钱" ) ))
set udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]=( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] + 25 )
set bj_forLoopAIndex=6
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call AdjustPlayerStateBJ(600, s__baka_SPlayer(bj_forLoopAIndex - 1), PLAYER_STATE_RESOURCE_GOLD)
set udg_Score[bj_forLoopAIndex]=( udg_Score[bj_forLoopAIndex] + 50 )
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
endif
else
if ( ( GetUnitTypeId(GetDyingUnit()) == 0x6E656766 ) ) then
call UnitRemoveAbility(GetDyingUnit(), 0x41304638)
if ( ( udg_Points >= 0 ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, "TRIGSTR_1206")
else
call DisplayTimedTextToForce(GetPlayersAll(), 15.00, ( "|cff0075ff" + ( GetPlayerName(GetOwningPlayer(GetKillingUnitBJ())) + "|r摧毁了|cff009900万物复苏|r的地怒之塔，英雄们获得了|cffffdc00 750 |r金钱" ) ))
set udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]=( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] + 50 )
set bj_forLoopAIndex=6
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call AdjustPlayerStateBJ(750, s__baka_SPlayer(bj_forLoopAIndex - 1), PLAYER_STATE_RESOURCE_GOLD)
set udg_Score[bj_forLoopAIndex]=( udg_Score[bj_forLoopAIndex] + 50 )
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
endif
else
if ( ( GetUnitTypeId(GetDyingUnit()) == 0x6E627432 ) ) then
if ( ( udg_Points >= 0 ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, "TRIGSTR_1207")
else
call DisplayTimedTextToForce(GetPlayersAll(), 15.00, ( "|cff0075ff" + ( GetPlayerName(GetOwningPlayer(GetKillingUnitBJ())) + "|r摧毁了|cff009900万物复苏|r的粉碎之塔，英雄们获得了|cffffdc00 1000 |r金钱" ) ))
set udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]=( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] + 75 )
set bj_forLoopAIndex=6
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call AdjustPlayerStateBJ(1000, s__baka_SPlayer(bj_forLoopAIndex - 1), PLAYER_STATE_RESOURCE_GOLD)
set udg_Score[bj_forLoopAIndex]=( udg_Score[bj_forLoopAIndex] + 75 )
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
endif
else
if ( ( GetUnitTypeId(GetDyingUnit()) == 0x6E747832 ) ) then
if ( ( udg_Points >= 0 ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, "TRIGSTR_1208")
else
call DisplayTimedTextToForce(GetPlayersAll(), 15.00, ( "|cff0075ff" + ( GetPlayerName(GetOwningPlayer(GetKillingUnitBJ())) + "|r摧毁了|cff009900万物复苏|r的灵魂之塔，英雄们获得了|cffffdc00 1000 |r金钱" ) ))
set udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]=( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] + 50 )
set bj_forLoopAIndex=6
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call AdjustPlayerStateBJ(1000, s__baka_SPlayer(bj_forLoopAIndex - 1), PLAYER_STATE_RESOURCE_GOLD)
set udg_Score[bj_forLoopAIndex]=( udg_Score[bj_forLoopAIndex] + 100 )
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
endif
else
if ( ( GetUnitTypeId(GetDyingUnit()) == 0x6E65666D ) ) then
if ( ( udg_Points >= 0 ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, "TRIGSTR_1209")
else
call DisplayTimedTextToForce(GetPlayersAll(), 15.00, ( "|cff0075ff" + ( GetPlayerName(GetOwningPlayer(GetKillingUnitBJ())) + "|r摧毁了|cff009900万物复苏|r的|cffffff00精灵兵营|r" ) ))
call DisplayTimedTextToForce(GetPlayersAll(), 15.00, "TRIGSTR_2618")
set udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]=( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] + 100 )
set bj_forLoopAIndex=6
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_Score[bj_forLoopAIndex]=( udg_Score[bj_forLoopAIndex] + 100 )
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
endif
else
if ( ( GetUnitTypeId(GetDyingUnit()) == 0x68686F75 ) ) then
if ( ( udg_Points >= 0 ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, "TRIGSTR_7910")
else
call DisplayTimedTextToForce(GetPlayersAll(), 15.00, ( "|cff0075ff" + ( GetPlayerName(GetOwningPlayer(GetKillingUnitBJ())) + "|r摧毁了|cff009900万物复苏|r的|cff00ffff预言之塔|r" ) ))
set udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]=( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] + 50 )
call RemoveUnit(gg_unit_n018_0125)
endif
set udg_Dian[10]=GetUnitLoc(GetTriggerUnit())
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Human\\HCancelDeath\\HCancelDeath.mdl", udg_Dian[10]))
call RemoveLocation(udg_Dian[10])
else
endif
endif
endif
endif
endif
endif
else
if ( ( GetOwningPlayer(GetDyingUnit()) == s__baka_SPlayer(11) ) ) then
if ( ( GetUnitTypeId(GetDyingUnit()) == 0x6E65676D ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 15.00, ( "|cff009900" + ( GetPlayerName(GetOwningPlayer(GetKillingUnitBJ())) + "|r摧毁了|cff0075ff极冬酷寒|r的天怒之塔，英雄们获得了|cffffdc00 600 |r金钱" ) ))
set udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]=( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] + 25 )
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=5
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call AdjustPlayerStateBJ(600, s__baka_SPlayer(bj_forLoopAIndex - 1), PLAYER_STATE_RESOURCE_GOLD)
set udg_Score[bj_forLoopAIndex]=( udg_Score[bj_forLoopAIndex] + 50 )
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
else
if ( ( GetUnitTypeId(GetDyingUnit()) == 0x6E656766 ) ) then
call UnitRemoveAbility(GetDyingUnit(), 0x41304638)
call DisplayTimedTextToForce(GetPlayersAll(), 15.00, ( "|cff009900" + ( GetPlayerName(GetOwningPlayer(GetKillingUnitBJ())) + "|r摧毁了|cff0075ff极冬酷寒|r的地怒之塔，英雄们获得了|cffffdc00 750 |r金钱" ) ))
set udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]=( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] + 50 )
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=5
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call AdjustPlayerStateBJ(750, s__baka_SPlayer(bj_forLoopAIndex - 1), PLAYER_STATE_RESOURCE_GOLD)
set udg_Score[bj_forLoopAIndex]=( udg_Score[bj_forLoopAIndex] + 50 )
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
else
if ( ( GetUnitTypeId(GetDyingUnit()) == 0x6E627432 ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 15.00, ( "|cff009900" + ( GetPlayerName(GetOwningPlayer(GetKillingUnitBJ())) + "|r摧毁了|cff0075ff极冬酷寒|r的粉碎之塔，英雄们获得了|cffffdc00 1000 |r金钱" ) ))
set udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]=( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] + 75 )
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=5
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call AdjustPlayerStateBJ(1000, s__baka_SPlayer(bj_forLoopAIndex - 1), PLAYER_STATE_RESOURCE_GOLD)
set udg_Score[bj_forLoopAIndex]=( udg_Score[bj_forLoopAIndex] + 75 )
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
else
if ( ( GetUnitTypeId(GetDyingUnit()) == 0x6E747832 ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 15.00, ( "|cff009900" + ( GetPlayerName(GetOwningPlayer(GetKillingUnitBJ())) + "|r摧毁了|cff0075ff极冬酷寒|r的灵魂之塔，英雄们获得了|cffffdc00 1000 |r金钱" ) ))
set udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]=( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] + 50 )
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=5
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call AdjustPlayerStateBJ(1000, s__baka_SPlayer(bj_forLoopAIndex - 1), PLAYER_STATE_RESOURCE_GOLD)
set udg_Score[bj_forLoopAIndex]=( udg_Score[bj_forLoopAIndex] + 100 )
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
else
if ( ( GetUnitTypeId(GetDyingUnit()) == 0x6E65666D ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 15.00, ( "|cff009900" + ( GetPlayerName(GetOwningPlayer(GetKillingUnitBJ())) + "|r摧毁了|cff0075ff极冬酷寒|r的|cffffff00精灵兵营|r" ) ))
call DisplayTimedTextToForce(GetPlayersAll(), 15.00, "TRIGSTR_2838")
set udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]=( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] + 100 )
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=5
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_Score[bj_forLoopAIndex]=( udg_Score[bj_forLoopAIndex] + 100 )
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
else
if ( ( GetUnitTypeId(GetDyingUnit()) == 0x68686F75 ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 15.00, ( "|cff009900" + ( GetPlayerName(GetOwningPlayer(GetKillingUnitBJ())) + "|r摧毁了|cff0075ff极冬酷寒|r的|cff00ffff预言之塔|r" ) ))
set udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]=( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )] + 50 )
call RemoveUnit(gg_unit_n018_0122)
set udg_Dian[10]=GetUnitLoc(GetTriggerUnit())
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Human\\HCancelDeath\\HCancelDeath.mdl", udg_Dian[10]))
call RemoveLocation(udg_Dian[10])
else
endif
endif
endif
endif
endif
endif
else
endif
endif
else
endif
set udg_Dian[10]=GetUnitLoc(GetTriggerUnit())
if ( ( GetDyingUnit() == udg_jianzhu[2] ) ) then
call RemoveUnit(GetDyingUnit())
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl", udg_Dian[10]))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Human\\HCancelDeath\\HCancelDeath.mdl", udg_Dian[10]))
set udg_jianzhu[2]=CreateUnitAtLoc(s__baka_SPlayer(10), 0x6E65666D, udg_Dian[10], bj_UNIT_FACING)
call SetUnitLifeBJ(udg_jianzhu[2], 1.00)
call SetUnitInvulnerable(udg_jianzhu[2], true)
call UnitAddAbility(udg_jianzhu[2], 0x41304A53)
call UnitAddAbility(udg_jianzhu[2], 0x41304648)
call UnitRemoveAbility(udg_jianzhu[2], 0x41647473)
call SetUnitVertexColor(udg_jianzhu[2], 64, 64, 64, 150)
if ( ( GetUnitAbilityLevel(udg_jianzhu[4], 0x41304A53) == 1 ) ) then
set udg_dian2[0]=GetUnitLoc(udg_jianzhu[4])
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_jianzhu[4]), 0x65303745, udg_dian2[0], 0.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 45.00)
call SetUnitTimeScale(udg_danwei2[1], 0.70)
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
call StartTimerBJ(udg_Times[116], false, 45.00)
call DisplayTimedTextToForce(GetPlayersAll(), 15.00, "TRIGSTR_3144")
call UnitRemoveAbility(udg_jianzhu[4], 0x41304A53)
call UnitRemoveAbility(udg_jianzhu[4], 0x41304648)
call UnitAddAbility(udg_jianzhu[4], 0x41647473)
call UnitAddAbility(udg_jianzhu[4], 0x41304C57)
call SetUnitVertexColor(udg_jianzhu[4], 255, 255, 255, 255)
call SetUnitLifeBJ(udg_jianzhu[4], 1.00)
else
endif
else
if ( ( GetDyingUnit() == udg_jianzhu[3] ) ) then
call RemoveUnit(GetDyingUnit())
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl", udg_Dian[10]))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Human\\HCancelDeath\\HCancelDeath.mdl", udg_Dian[10]))
set udg_jianzhu[3]=CreateUnitAtLoc(s__baka_SPlayer(10), 0x6E65666D, udg_Dian[10], bj_UNIT_FACING)
call SetUnitLifeBJ(udg_jianzhu[3], 1.00)
call SetUnitInvulnerable(udg_jianzhu[3], true)
call UnitAddAbility(udg_jianzhu[3], 0x41304A53)
call UnitAddAbility(udg_jianzhu[3], 0x41304648)
call UnitRemoveAbility(udg_jianzhu[3], 0x41647473)
call SetUnitVertexColor(udg_jianzhu[3], 64, 64, 64, 150)
if ( ( GetUnitAbilityLevel(udg_jianzhu[5], 0x41304A53) == 1 ) ) then
set udg_dian2[0]=GetUnitLoc(udg_jianzhu[5])
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_jianzhu[5]), 0x65303745, udg_dian2[0], 0.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 45.00)
call SetUnitTimeScale(udg_danwei2[1], 0.70)
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
call StartTimerBJ(udg_Times[117], false, 45.00)
call DisplayTimedTextToForce(GetPlayersAll(), 15.00, "TRIGSTR_3162")
call UnitRemoveAbility(udg_jianzhu[5], 0x41304A53)
call UnitRemoveAbility(udg_jianzhu[5], 0x41304648)
call UnitAddAbility(udg_jianzhu[5], 0x41647473)
call UnitAddAbility(udg_jianzhu[5], 0x41304C57)
call SetUnitVertexColor(udg_jianzhu[5], 255, 255, 255, 255)
call SetUnitLifeBJ(udg_jianzhu[5], 1.00)
else
endif
else
if ( ( GetDyingUnit() == udg_jianzhu[4] ) ) then
call RemoveUnit(GetDyingUnit())
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl", udg_Dian[10]))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Human\\HCancelDeath\\HCancelDeath.mdl", udg_Dian[10]))
set udg_jianzhu[4]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x6E65666D, udg_Dian[10], bj_UNIT_FACING)
call SetUnitLifeBJ(udg_jianzhu[4], 1.00)
call SetUnitInvulnerable(udg_jianzhu[4], true)
call UnitAddAbility(udg_jianzhu[4], 0x41304A53)
call UnitAddAbility(udg_jianzhu[4], 0x41304648)
call UnitRemoveAbility(udg_jianzhu[4], 0x41647473)
call SetUnitVertexColor(udg_jianzhu[4], 64, 64, 64, 150)
if ( ( GetUnitAbilityLevel(udg_jianzhu[2], 0x41304A53) == 1 ) ) then
set udg_dian2[0]=GetUnitLoc(udg_jianzhu[2])
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_jianzhu[2]), 0x65303745, udg_dian2[0], 0.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 45.00)
call SetUnitTimeScale(udg_danwei2[1], 0.70)
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
call StartTimerBJ(udg_Times[118], false, 45.00)
call DisplayTimedTextToForce(GetPlayersAll(), 15.00, "TRIGSTR_3145")
call UnitRemoveAbility(udg_jianzhu[2], 0x41304A53)
call UnitRemoveAbility(udg_jianzhu[2], 0x41304648)
call UnitAddAbility(udg_jianzhu[2], 0x41647473)
call UnitAddAbility(udg_jianzhu[2], 0x41304C57)
call SetUnitVertexColor(udg_jianzhu[2], 255, 255, 255, 255)
call SetUnitLifeBJ(udg_jianzhu[2], 1.00)
else
endif
else
if ( ( GetDyingUnit() == udg_jianzhu[5] ) ) then
call RemoveUnit(GetDyingUnit())
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl", udg_Dian[10]))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Human\\HCancelDeath\\HCancelDeath.mdl", udg_Dian[10]))
set udg_jianzhu[5]=CreateUnitAtLoc(s__baka_SPlayer(11), 0x6E65666D, udg_Dian[10], bj_UNIT_FACING)
call SetUnitLifeBJ(udg_jianzhu[5], 1.00)
call SetUnitInvulnerable(udg_jianzhu[5], true)
call UnitAddAbility(udg_jianzhu[5], 0x41304A53)
call UnitAddAbility(udg_jianzhu[5], 0x41304648)
call UnitRemoveAbility(udg_jianzhu[5], 0x41647473)
call SetUnitVertexColor(udg_jianzhu[5], 64, 64, 64, 150)
if ( ( GetUnitAbilityLevel(udg_jianzhu[3], 0x41304A53) == 1 ) ) then
set udg_dian2[0]=GetUnitLoc(udg_jianzhu[3])
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_jianzhu[3]), 0x65303745, udg_dian2[0], 0.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 45.00)
call SetUnitTimeScale(udg_danwei2[1], 0.70)
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
call StartTimerBJ(udg_Times[119], false, 45.00)
call DisplayTimedTextToForce(GetPlayersAll(), 15.00, "TRIGSTR_3152")
call UnitRemoveAbility(udg_jianzhu[3], 0x41304A53)
call UnitRemoveAbility(udg_jianzhu[3], 0x41304648)
call UnitAddAbility(udg_jianzhu[3], 0x41647473)
call UnitAddAbility(udg_jianzhu[3], 0x41304C57)
call SetUnitVertexColor(udg_jianzhu[3], 255, 255, 255, 255)
call SetUnitLifeBJ(udg_jianzhu[3], 1.00)
else
endif
else
endif
endif
endif
endif
call RemoveLocation(udg_Dian[10])
endfunction
function InitTrig_kill_ta takes nothing returns nothing
set gg_trg_kill_ta=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_kill_ta, EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gg_trg_kill_ta, Condition(function Trig_kill_taConditions))
call TriggerAddAction(gg_trg_kill_ta, function Trig_kill_taActions)
endfunction
function Trig_bingyin_1Actions takes nothing returns nothing
call UnitRemoveAbility(udg_jianzhu[4], 0x41304C57)
call SetUnitLifeBJ(udg_jianzhu[4], 1000.00)
call SetUnitInvulnerable(udg_jianzhu[4], false)
endfunction
function InitTrig_bingyin_1 takes nothing returns nothing
set gg_trg_bingyin_1=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_bingyin_1, udg_Times[116])
call TriggerAddAction(gg_trg_bingyin_1, function Trig_bingyin_1Actions)
endfunction
function Trig_bingyin_2Actions takes nothing returns nothing
call UnitRemoveAbility(udg_jianzhu[5], 0x41304C57)
call SetUnitLifeBJ(udg_jianzhu[5], 1000.00)
call SetUnitInvulnerable(udg_jianzhu[5], false)
endfunction
function InitTrig_bingyin_2 takes nothing returns nothing
set gg_trg_bingyin_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_bingyin_2, udg_Times[117])
call TriggerAddAction(gg_trg_bingyin_2, function Trig_bingyin_2Actions)
endfunction
function Trig_bingyin_3Actions takes nothing returns nothing
call UnitRemoveAbility(udg_jianzhu[2], 0x41304C57)
call SetUnitLifeBJ(udg_jianzhu[2], 1000.00)
call SetUnitInvulnerable(udg_jianzhu[2], false)
endfunction
function InitTrig_bingyin_3 takes nothing returns nothing
set gg_trg_bingyin_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_bingyin_3, udg_Times[118])
call TriggerAddAction(gg_trg_bingyin_3, function Trig_bingyin_3Actions)
endfunction
function Trig_bingyin_4Actions takes nothing returns nothing
call UnitRemoveAbility(udg_jianzhu[3], 0x41304C57)
call SetUnitLifeBJ(udg_jianzhu[3], 1000.00)
call SetUnitInvulnerable(udg_jianzhu[3], false)
endfunction
function InitTrig_bingyin_4 takes nothing returns nothing
set gg_trg_bingyin_4=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_bingyin_4, udg_Times[119])
call TriggerAddAction(gg_trg_bingyin_4, function Trig_bingyin_4Actions)
endfunction
function Trig_attackFunc003Func005A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == true ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(GetAttacker())) == true ) ) then
call s__baka_IssueTargetOrderById2(GetAttacker() , 851983 , udg_danwei2[1])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_attackActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
local integer ydl_localvar_step=LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76)
set ydl_localvar_step=ydl_localvar_step + 3
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76, ydl_localvar_step)
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xECE825E7, ydl_localvar_step)
if ( ( ( IsUnitType(GetAttacker(), UNIT_TYPE_HERO) == true ) or ( IsUnitIllusionBJ(GetAttacker()) == true ) or ( GetUnitTypeId(GetAttacker()) == 0x6E30304E ) ) and ( GetUnitTypeId(GetAttackedUnitBJ()) != 0x6530304F ) and ( ( GetUnitState(GetAttackedUnitBJ(), UNIT_STATE_LIFE) >= ( GetUnitState(GetAttackedUnitBJ(), UNIT_STATE_MAX_LIFE) * 0.50 ) ) and ( IsUnitAlly(GetAttacker(), GetOwningPlayer(GetAttackedUnitBJ())) == true ) ) and ( GetOwningPlayer(GetAttackedUnitBJ()) != s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE) ) ) then
call IssueImmediateOrder(GetAttacker(), "stop")
else
endif
if ( ( ( IsUnitType(GetAttacker(), UNIT_TYPE_HERO) == true ) or ( IsUnitIllusionBJ(GetAttacker()) == true ) or ( GetUnitTypeId(GetAttacker()) == 0x6E30304E ) ) and ( ( IsUnitType(GetAttackedUnitBJ(), UNIT_TYPE_HERO) == true ) or ( IsUnitType(GetAttackedUnitBJ(), UNIT_TYPE_STRUCTURE) == true ) ) and ( ( GetUnitLifePercent(GetAttackedUnitBJ()) >= 8.00 ) or ( GetUnitTypeId(GetAttackedUnitBJ()) == 0x68636173 ) or ( GetUnitTypeId(GetAttackedUnitBJ()) == 0x6E65666D ) ) and ( IsUnitAlly(GetAttacker(), GetOwningPlayer(GetAttackedUnitBJ())) == true ) ) then
call IssueImmediateOrder(GetAttacker(), "stop")
else
endif
if ( ( IsUnitType(GetAttackedUnitBJ(), UNIT_TYPE_STRUCTURE) == false ) and ( GetUnitTypeId(GetAttacker()) == 0x686D746D ) ) then
set udg_dian2[0]=GetUnitLoc(GetAttacker())
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(800.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_attackFunc003Func005A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[0])
else
endif
if ( ( GetUnitTypeId(GetAttacker()) == 0x65303156 ) ) then
set udg_dian2[0]=GetUnitLoc(GetAttacker())
set udg_dian2[1]=GetUnitLoc(GetAttackedUnitBJ())
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) >= 100.00 ) ) then
call SetUnitUserData(GetAttacker(), ( IMaxBJ(( R2I(DistanceBetweenPoints(udg_dian2[0], udg_dian2[1])) - 100 ), 0) / 40 ))
call GroupAddUnit(udg_danweizu2[155], GetAttacker())
else
endif
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
endif
if ( ( IsUnitType(GetAttackedUnitBJ(), UNIT_TYPE_STRUCTURE) == false ) and ( UnitHasBuffBJ(GetAttackedUnitBJ(), 0x4230314B) == false ) and ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetAttacker() , 0x49303146)) == true ) and ( IsUnitEnemy(GetAttackedUnitBJ(), GetOwningPlayer(GetAttacker())) == true ) ) then
if ( ( IsUnitType(GetAttackedUnitBJ(), UNIT_TYPE_HERO) == true ) and ( GetUnitTypeId(GetAttackedUnitBJ()) != 0x4F303030 ) ) then
if ( ( UnitHasBuffBJ(GetAttackedUnitBJ(), 0x42303043) == false ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\OrbCorruption\\OrbCorruptionMissile.mdl", GetAttackedUnitBJ(), "origin"))
set udg_aXUNHUAN[79]=0
loop
exitwhen udg_aXUNHUAN[79] > 11
call UnitRemoveAbility(GetAttackedUnitBJ(), udg_Defense[udg_aXUNHUAN[79]])
set udg_aXUNHUAN[79]=udg_aXUNHUAN[79] + 1
endloop
set udg_Shishu[68]=GetUnitState(GetAttackedUnitBJ(), UNIT_STATE_LIFE)
call UnitDamageTarget(GetAttackedUnitBJ(), GetAttackedUnitBJ(), 10.00, false, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)
set udg_Shishu[69]=( ( 1.00 - ( ( udg_Shishu[68] - GetUnitState(GetAttackedUnitBJ(), UNIT_STATE_LIFE) ) / 10.00 ) ) / ( 0.05 * ( ( udg_Shishu[68] - GetUnitState(GetAttackedUnitBJ(), UNIT_STATE_LIFE) ) / 10.00 ) ) )
call SetUnitLifeBJ(GetAttackedUnitBJ(), udg_Shishu[68])
set udg_Shishu[70]=0.00
set udg_Shishu[70]=( udg_Shishu[70] + ( udg_Shishu[69] * 0.40 ) )
set udg_shishu2ex[( 20 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetAttackedUnitBJ())) + 1 ) )]=udg_Shishu[70]
set udg_Shishu[70]=( udg_Shishu[70] + udg_shishu2ex[( 30 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetAttackedUnitBJ())) + 1 ) )] )
set udg_shishu2ex[( 30 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetAttackedUnitBJ())) + 1 ) )]=( udg_shishu2ex[( 30 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetAttackedUnitBJ())) + 1 ) )] + udg_shishu2ex[( 20 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetAttackedUnitBJ())) + 1 ) )] )
set udg_aXUNHUAN[78]=0
loop
exitwhen udg_aXUNHUAN[78] > 11
if ( ( udg_Shishu[70] >= ( 0.10 * Pow(2.00, ( 11.00 - I2R(udg_aXUNHUAN[78]) )) ) ) ) then
set udg_Shishu[70]=( udg_Shishu[70] - ( 0.10 * Pow(2.00, I2R(( 11 - udg_aXUNHUAN[78] ))) ) )
call UnitAddAbility(GetAttackedUnitBJ(), udg_Defense[( 11 - udg_aXUNHUAN[78] )])
else
endif
set udg_aXUNHUAN[78]=udg_aXUNHUAN[78] + 1
endloop
call UnitAddAbility(GetAttackedUnitBJ(), 0x41304A36)
else
endif
set udg_Zhengshu[( 70 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetAttackedUnitBJ())) + 1 ) )]=30
else
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\OrbCorruption\\OrbCorruptionMissile.mdl", GetAttackedUnitBJ(), "origin"))
set udg_dian2[0]=GetUnitLoc(GetAttackedUnitBJ())
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(GetAttacker()), 0x65303348, udg_dian2[0], 0.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 0.50)
call s__baka_IssueTargetOrderById2(udg_danwei2[1] , 852662 , GetAttackedUnitBJ())
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
endif
else
endif
if ( ( IsUnitType(GetAttackedUnitBJ(), UNIT_TYPE_HERO) == true ) and ( GetUnitTypeId(GetAttackedUnitBJ()) != 0x4F303030 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetAttackedUnitBJ())) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetAttackedUnitBJ())) + 1 ) <= 10 ) ) then
call SaveReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x648B01E1, 0.00)
call SaveReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x4A4AE990, 0.00)
call SaveReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x99126ED9, 1.00)
call SaveReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xD9E93643, 1.00)
if ( ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetAttackedUnitBJ() , 0x49303231)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetAttackedUnitBJ() , 0x49303158)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetAttackedUnitBJ() , 0x49303256)) == true ) ) ) then
call SaveReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x99126ED9, ( LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x99126ED9) * 1.15 ))
else
endif
if ( ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetAttacker() , 0x49303231)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetAttacker() , 0x49303158)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetAttacker() , 0x49303256)) == true ) ) ) then
call SaveReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xD9E93643, ( LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xD9E93643) * 1.15 ))
else
endif
if ( ( UnitHasBuffBJ(GetAttackedUnitBJ(), 0x4230324B) == false ) and ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetAttackedUnitBJ() , 0x49303359)) == true ) ) then
set udg_shishu2ex[( 50 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetAttackedUnitBJ())) + 1 ) )]=10.00
call UnitAddAbility(GetAttackedUnitBJ(), 0x41304A4D)
call UnitAddAbility(GetAttackedUnitBJ(), 0x41304B30)
else
endif
if ( ( ( UnitHasBuffBJ(GetAttackedUnitBJ(), 0x4230324C) == true ) ) ) then
call SaveReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x648B01E1, ( 1.00 - ( ( 1 - LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x648B01E1) ) * ( 1 - ( 0.70 * LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x99126ED9) ) ) ) ))
else
endif
if ( ( UnitHasBuffBJ(GetAttackedUnitBJ(), 0x42303158) == true ) ) then
call SaveReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x648B01E1, ( 1.00 - ( ( 1 - LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x648B01E1) ) * ( 1 - ( 0.50 * LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x99126ED9) ) ) ) ))
else
endif
if ( ( UnitHasBuffBJ(GetAttackedUnitBJ(), 0x42303031) == true ) ) then
call SaveReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x648B01E1, ( 1.00 - ( ( 1 - LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x648B01E1) ) * ( 1 - ( 0.50 * LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x99126ED9) ) ) ) ))
else
endif
set udg_aXUNHUAN[15]=1
loop
exitwhen udg_aXUNHUAN[15] > 6
if ( ( ( GetItemTypeId(UnitItemInSlotBJ(GetAttackedUnitBJ(), udg_aXUNHUAN[15])) == 0x4930344E ) or ( GetItemTypeId(UnitItemInSlotBJ(GetAttackedUnitBJ(), udg_aXUNHUAN[15])) == 0x49303158 ) or ( GetItemTypeId(UnitItemInSlotBJ(GetAttackedUnitBJ(), udg_aXUNHUAN[15])) == 0x4930324D ) or ( GetItemTypeId(UnitItemInSlotBJ(GetAttackedUnitBJ(), udg_aXUNHUAN[15])) == 0x4930324C ) ) ) then
call SaveReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x648B01E1, ( 1.00 - ( ( 1 - LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x648B01E1) ) * ( 1 - ( 0.25 * LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x99126ED9) ) ) ) ))
else
endif
set udg_aXUNHUAN[15]=udg_aXUNHUAN[15] + 1
endloop
set udg_aXUNHUAN[15]=1
loop
exitwhen udg_aXUNHUAN[15] > 6
if ( ( ( GetItemTypeId(UnitItemInSlotBJ(GetAttackedUnitBJ(), udg_aXUNHUAN[15])) == 0x49303139 ) or ( GetItemTypeId(UnitItemInSlotBJ(GetAttackedUnitBJ(), udg_aXUNHUAN[15])) == 0x4930344D ) or ( GetItemTypeId(UnitItemInSlotBJ(GetAttackedUnitBJ(), udg_aXUNHUAN[15])) == 0x49303049 ) ) ) then
call SaveReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x648B01E1, ( 1.00 - ( ( 1 - LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x648B01E1) ) * ( 1 - ( 0.20 * LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x99126ED9) ) ) ) ))
else
endif
set udg_aXUNHUAN[15]=udg_aXUNHUAN[15] + 1
endloop
set udg_aXUNHUAN[15]=1
loop
exitwhen udg_aXUNHUAN[15] > 6
if ( ( ( GetItemTypeId(UnitItemInSlotBJ(GetAttackedUnitBJ(), udg_aXUNHUAN[15])) == 0x49303439 ) ) ) then
call SaveReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x648B01E1, ( 1.00 - ( ( 1 - LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x648B01E1) ) * ( 1 - ( 0.15 * LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x99126ED9) ) ) ) ))
else
endif
set udg_aXUNHUAN[15]=udg_aXUNHUAN[15] + 1
endloop
if ( ( ( UnitHasBuffBJ(GetAttackedUnitBJ(), 0x42737065) == true ) or ( UnitHasBuffBJ(GetAttackedUnitBJ(), 0x42303134) == true ) ) ) then
call SaveReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x648B01E1, ( 1.00 - ( ( 1 - LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x648B01E1) ) * ( 1 - ( 0.15 * LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x99126ED9) ) ) ) ))
else
endif
set udg_aXUNHUAN[15]=1
loop
exitwhen udg_aXUNHUAN[15] > 6
if ( ( ( GetItemTypeId(UnitItemInSlotBJ(GetAttackedUnitBJ(), udg_aXUNHUAN[15])) == 0x4930344C ) or ( GetItemTypeId(UnitItemInSlotBJ(GetAttackedUnitBJ(), udg_aXUNHUAN[15])) == 0x72646532 ) or ( GetItemTypeId(UnitItemInSlotBJ(GetAttackedUnitBJ(), udg_aXUNHUAN[15])) == 0x49303146 ) or ( GetItemTypeId(UnitItemInSlotBJ(GetAttackedUnitBJ(), udg_aXUNHUAN[15])) == 0x4930324B ) ) ) then
call SaveReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x648B01E1, ( 1.00 - ( ( 1 - LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x648B01E1) ) * ( 1 - ( 0.10 * LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x99126ED9) ) ) ) ))
else
endif
set udg_aXUNHUAN[15]=udg_aXUNHUAN[15] + 1
endloop
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetAttackedUnitBJ() , 0x4930344A)) == true ) ) then
call SaveReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x648B01E1, ( 1.00 - ( ( 1 - LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x648B01E1) ) * ( 1 - ( 0.01 * ( I2R(GetHeroAgi(GetAttackedUnitBJ(), true)) * ( 0.10 * LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x99126ED9) ) ) ) ) ) ))
else
endif
if ( ( ( UnitHasBuffBJ(GetAttackedUnitBJ(), 0x42303336) == true ) ) ) then
call SaveReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x648B01E1, 1.25)
else
endif
if ( ( UnitHasBuffBJ(GetAttackedUnitBJ(), 0x42303345) == true ) ) then
call SaveReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x648B01E1, ( LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x648B01E1) * 0.50 ))
else
endif
if ( ( ( GetUnitTypeId(GetAttacker()) == 0x68677477 ) or ( UnitHasBuffBJ(GetAttackedUnitBJ(), 0x42303045) == true ) ) ) then
call SaveReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x648B01E1, 0.00)
else
endif
set udg_aXUNHUAN[15]=1
loop
exitwhen udg_aXUNHUAN[15] > 6
if ( ( GetItemTypeId(UnitItemInSlotBJ(GetAttacker(), udg_aXUNHUAN[15])) == 0x49303335 ) ) then
call SaveReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x4A4AE990, ( 1.00 - ( ( 1 - LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x4A4AE990) ) * ( 1 - ( 0.50 * LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xD9E93643) ) ) ) ))
else
endif
set udg_aXUNHUAN[15]=udg_aXUNHUAN[15] + 1
endloop
if ( ( UnitHasBuffBJ(GetAttacker(), 0x42303348) == true ) ) then
call SaveReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x4A4AE990, ( 1.00 - ( ( 1 - LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x4A4AE990) ) * ( 1 - ( 0.30 * LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xD9E93643) ) ) ) ))
else
endif
set udg_aXUNHUAN[15]=1
loop
exitwhen udg_aXUNHUAN[15] > 6
if ( ( GetItemTypeId(UnitItemInSlotBJ(GetAttacker(), udg_aXUNHUAN[15])) == 0x72617466 ) ) then
call SaveReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x4A4AE990, ( 1.00 - ( ( 1 - LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x4A4AE990) ) * ( 1 - ( 0.25 * LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xD9E93643) ) ) ) ))
else
endif
set udg_aXUNHUAN[15]=udg_aXUNHUAN[15] + 1
endloop
set udg_aXUNHUAN[15]=1
loop
exitwhen udg_aXUNHUAN[15] > 6
if ( ( GetItemTypeId(UnitItemInSlotBJ(GetAttacker(), udg_aXUNHUAN[15])) == 0x49303453 ) ) then
call SaveReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x4A4AE990, ( 1.00 - ( ( 1 - LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x4A4AE990) ) * ( 1 - ( 0.20 * LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xD9E93643) ) ) ) ))
else
endif
set udg_aXUNHUAN[15]=udg_aXUNHUAN[15] + 1
endloop
set udg_aXUNHUAN[15]=1
loop
exitwhen udg_aXUNHUAN[15] > 6
if ( ( ( GetItemTypeId(UnitItemInSlotBJ(GetAttacker(), udg_aXUNHUAN[15])) == 0x49303256 ) or ( GetItemTypeId(UnitItemInSlotBJ(GetAttacker(), udg_aXUNHUAN[15])) == 0x49303450 ) ) ) then
call SaveReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x4A4AE990, ( 1.00 - ( ( 1 - LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x4A4AE990) ) * ( 1 - ( 0.20 * LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xD9E93643) ) ) ) ))
else
endif
set udg_aXUNHUAN[15]=udg_aXUNHUAN[15] + 1
endloop
set udg_aXUNHUAN[15]=1
loop
exitwhen udg_aXUNHUAN[15] > 6
if ( ( ( GetItemTypeId(UnitItemInSlotBJ(GetAttacker(), udg_aXUNHUAN[15])) == 0x49303045 ) or ( GetItemTypeId(UnitItemInSlotBJ(GetAttacker(), udg_aXUNHUAN[15])) == 0x49303333 ) ) ) then
call SaveReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x4A4AE990, ( 1.00 - ( ( 1 - LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x4A4AE990) ) * ( 1 - ( 0.15 * LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xD9E93643) ) ) ) ))
else
endif
set udg_aXUNHUAN[15]=udg_aXUNHUAN[15] + 1
endloop
set udg_aXUNHUAN[15]=1
loop
exitwhen udg_aXUNHUAN[15] > 6
if ( ( ( GetItemTypeId(UnitItemInSlotBJ(GetAttacker(), udg_aXUNHUAN[15])) == 0x726E7370 ) or ( GetItemTypeId(UnitItemInSlotBJ(GetAttacker(), udg_aXUNHUAN[15])) == 0x66726764 ) ) ) then
call SaveReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x4A4AE990, ( 1.00 - ( ( 1 - LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x4A4AE990) ) * ( 1 - ( 0.10 * LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xD9E93643) ) ) ) ))
else
endif
set udg_aXUNHUAN[15]=udg_aXUNHUAN[15] + 1
endloop
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetAttacker() , 0x4930344A)) == true ) ) then
call SaveReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x4A4AE990, ( 1.00 - ( ( 1 - LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x4A4AE990) ) * ( 1 - ( 0.01 * ( I2R(GetHeroAgi(GetAttacker(), true)) * ( 0.10 * LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xD9E93643) ) ) ) ) ) ))
else
endif
call SaveReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x648B01E1, ( ( LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x648B01E1) * ( 1.00 - ( 0.25 * LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x4A4AE990) ) ) ) - ( 0.60 * LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x4A4AE990) ) ))
call UnitRemoveAbility(GetAttackedUnitBJ(), 0x4130374C)
if ( ( GetRandomReal(0, 100.00) < ( LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x648B01E1) * 100.00 ) ) ) then
call UnitAddAbility(GetAttackedUnitBJ(), 0x4130374C)
else
endif
else
endif
if ( ( IsUnitInGroup(GetAttacker(), udg_attack) == true ) ) then
if ( ( GetUnitAbilityLevel(GetAttacker(), 0x41304A53) == 1 ) ) then
call s__Unit_PauseUnitMU(GetAttacker() , true , "摧毁的兵营")
call SetUnitUserData(GetAttacker(), 10)
else
call UnitAddAbility(GetAttacker(), 0x41304A53)
endif
else
endif
call FlushChildHashtable(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_attack takes nothing returns nothing
set gg_trg_attack=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_attack, EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddAction(gg_trg_attack, function Trig_attackActions)
endfunction
function Trig_DefenseActions takes nothing returns nothing
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ( ( udg_Zhengshu[( 70 + bj_forLoopAIndex )] > 0 ) ) then
set udg_Zhengshu[( 70 + bj_forLoopAIndex )]=( udg_Zhengshu[( 70 + bj_forLoopAIndex )] - 1 )
if ( ( udg_Zhengshu[( 70 + bj_forLoopAIndex )] == 0 ) ) then
set udg_shishu2ex[( 30 + bj_forLoopAIndex )]=( udg_shishu2ex[( 30 + bj_forLoopAIndex )] - udg_shishu2ex[( 20 + bj_forLoopAIndex )] )
set udg_shishu2ex[( 20 + bj_forLoopAIndex )]=0.00
set udg_Shishu[70]=udg_shishu2ex[( 30 + bj_forLoopAIndex )]
set udg_aXUNHUAN[79]=0
loop
exitwhen udg_aXUNHUAN[79] > 11
call UnitRemoveAbility(udg_player[bj_forLoopAIndex], udg_Defense[udg_aXUNHUAN[79]])
set udg_aXUNHUAN[79]=udg_aXUNHUAN[79] + 1
endloop
set udg_aXUNHUAN[78]=0
loop
exitwhen udg_aXUNHUAN[78] > 11
if ( ( udg_Shishu[70] >= ( 0.10 * Pow(2.00, ( 11.00 - I2R(udg_aXUNHUAN[78]) )) ) ) ) then
set udg_Shishu[70]=( udg_Shishu[70] - ( 0.10 * Pow(2.00, I2R(( 11 - udg_aXUNHUAN[78] ))) ) )
call UnitAddAbility(udg_player[bj_forLoopAIndex], udg_Defense[( 11 - udg_aXUNHUAN[78] )])
else
endif
set udg_aXUNHUAN[78]=udg_aXUNHUAN[78] + 1
endloop
call UnitRemoveAbility(udg_player[bj_forLoopAIndex], 0x41304A36)
call UnitRemoveBuffBJ(0x42303043, udg_player[bj_forLoopAIndex])
else
endif
else
endif
if ( ( udg_shishu2ex[( 40 + bj_forLoopAIndex )] > 0.00 ) ) then
if ( ( UnitHasBuffBJ(udg_player[bj_forLoopAIndex], 0x42303248) == false ) ) then
set udg_shishu2ex[( 30 + bj_forLoopAIndex )]=( udg_shishu2ex[( 30 + bj_forLoopAIndex )] - udg_shishu2ex[( 40 + bj_forLoopAIndex )] )
set udg_shishu2ex[( 40 + bj_forLoopAIndex )]=0.00
set udg_Shishu[70]=udg_shishu2ex[( 30 + bj_forLoopAIndex )]
set udg_aXUNHUAN[79]=0
loop
exitwhen udg_aXUNHUAN[79] > 11
call UnitRemoveAbility(udg_player[bj_forLoopAIndex], udg_Defense[udg_aXUNHUAN[79]])
set udg_aXUNHUAN[79]=udg_aXUNHUAN[79] + 1
endloop
set udg_aXUNHUAN[78]=0
loop
exitwhen udg_aXUNHUAN[78] > 11
if ( ( udg_Shishu[70] >= ( 0.10 * Pow(2.00, ( 11.00 - I2R(udg_aXUNHUAN[78]) )) ) ) ) then
set udg_Shishu[70]=( udg_Shishu[70] - ( 0.10 * Pow(2.00, I2R(( 11 - udg_aXUNHUAN[78] ))) ) )
call UnitAddAbility(udg_player[bj_forLoopAIndex], udg_Defense[( 11 - udg_aXUNHUAN[78] )])
else
endif
set udg_aXUNHUAN[78]=udg_aXUNHUAN[78] + 1
endloop
else
endif
else
endif
if ( ( udg_shishu2ex[( 50 + bj_forLoopAIndex )] > 0.00 ) ) then
set udg_shishu2ex[( 50 + bj_forLoopAIndex )]=( udg_shishu2ex[( 50 + bj_forLoopAIndex )] - 0.10 )
if ( ( udg_shishu2ex[( 50 + bj_forLoopAIndex )] > 9.00 ) and ( GetUnitAbilityLevel(udg_player[bj_forLoopAIndex], 0x4130374C) == 1 ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\BansheeMissile\\BansheeMissile.mdl", udg_player[bj_forLoopAIndex], "origin"))
else
call UnitRemoveAbility(udg_player[bj_forLoopAIndex], 0x41304B30)
call UnitRemoveBuffBJ(0x4230324C, udg_player[bj_forLoopAIndex])
endif
else
call UnitRemoveAbility(udg_player[bj_forLoopAIndex], 0x41304A4D)
call UnitRemoveBuffBJ(0x4230324B, udg_player[bj_forLoopAIndex])
endif
if ( ( udg_player[bj_forLoopAIndex] != null ) ) then
set udg_dian2[0]=GetUnitLoc(udg_player[bj_forLoopAIndex])
call SetCameraQuickPositionLocForPlayer(s__baka_SPlayer(bj_forLoopAIndex - 1), udg_dian2[0])
call RemoveLocation(udg_dian2[0])
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
endfunction
function InitTrig_Defense takes nothing returns nothing
set gg_trg_Defense=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_Defense, 0.10)
call TriggerAddAction(gg_trg_Defense, function Trig_DefenseActions)
endfunction
function Trig_test_djcsConditions takes nothing returns boolean
return ( ( ( udg_Name[1] == "DotaAPTX4869" ) ) )
endfunction
function Trig_test_djcsActions takes nothing returns nothing
set udg_test=1
call DisableTrigger(GetTriggeringTrigger())
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, "TRIGSTR_7960")
endfunction
function InitTrig_test_djcs takes nothing returns nothing
set gg_trg_test_djcs=CreateTrigger()
call TriggerRegisterPlayerChatEvent(gg_trg_test_djcs, s__baka_SPlayer(0), "-test", true)
call TriggerAddCondition(gg_trg_test_djcs, Condition(function Trig_test_djcsConditions))
call TriggerAddAction(gg_trg_test_djcs, function Trig_test_djcsActions)
endfunction
function Trig_djcsActions takes nothing returns nothing
if ( ( ( udg_test == 1 ) or ( ( ( GetPlayerController(s__baka_SPlayer(1)) == MAP_CONTROL_COMPUTER ) or ( GetPlayerSlotState(s__baka_SPlayer(1)) == PLAYER_SLOT_STATE_EMPTY ) ) and ( ( GetPlayerController(s__baka_SPlayer(5)) == MAP_CONTROL_COMPUTER ) or ( GetPlayerSlotState(s__baka_SPlayer(5)) == PLAYER_SLOT_STATE_EMPTY ) ) and ( ( GetPlayerController(s__baka_SPlayer(6)) == MAP_CONTROL_COMPUTER ) or ( GetPlayerSlotState(s__baka_SPlayer(6)) == PLAYER_SLOT_STATE_EMPTY ) ) and ( ( GetPlayerController(s__baka_SPlayer(2)) == MAP_CONTROL_COMPUTER ) or ( GetPlayerSlotState(s__baka_SPlayer(2)) == PLAYER_SLOT_STATE_EMPTY ) ) and ( ( GetPlayerController(s__baka_SPlayer(3)) == MAP_CONTROL_COMPUTER ) or ( GetPlayerSlotState(s__baka_SPlayer(3)) == PLAYER_SLOT_STATE_EMPTY ) ) and ( ( GetPlayerController(s__baka_SPlayer(4)) == MAP_CONTROL_COMPUTER ) or ( GetPlayerSlotState(s__baka_SPlayer(4)) == PLAYER_SLOT_STATE_EMPTY ) ) and ( ( GetPlayerController(s__baka_SPlayer(7)) == MAP_CONTROL_COMPUTER ) or ( GetPlayerSlotState(s__baka_SPlayer(7)) == PLAYER_SLOT_STATE_EMPTY ) ) and ( ( GetPlayerController(s__baka_SPlayer(8)) == MAP_CONTROL_COMPUTER ) or ( GetPlayerSlotState(s__baka_SPlayer(8)) == PLAYER_SLOT_STATE_EMPTY ) ) and ( ( GetPlayerController(s__baka_SPlayer(9)) == MAP_CONTROL_COMPUTER ) or ( GetPlayerSlotState(s__baka_SPlayer(9)) == PLAYER_SLOT_STATE_EMPTY ) ) ) ) ) then
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_shengfupanding2))
call DestroyTrigger(gg_trg_shengfupanding2)
if ( ( GetTriggerExecCount(GetTriggeringTrigger()) == 1 ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, "TRIGSTR_3263")
else
call DisplayTimedTextToForce(GetPlayersAll(), 1.00, "TRIGSTR_2789")
endif
set udg_buer[8]=false
call SetUnitLifePercentBJ(udg_player[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )], 100)
call SetUnitManaPercentBJ(udg_player[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )], 100)
call UnitResetCooldown(udg_player[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )])
call SetHeroLevel(udg_player[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )], 30, false)
call SetPlayerStateBJ(GetTriggerPlayer(), PLAYER_STATE_RESOURCE_GOLD, 1000000)
else
endif
endfunction
function InitTrig_djcs takes nothing returns nothing
set gg_trg_djcs=CreateTrigger()
call TriggerRegisterPlayerChatEvent(gg_trg_djcs, s__baka_SPlayer(0), "-DJCS", true)
call TriggerRegisterPlayerChatEvent(gg_trg_djcs, s__baka_SPlayer(1), "-DJCS", true)
call TriggerRegisterPlayerChatEvent(gg_trg_djcs, s__baka_SPlayer(2), "-DJCS", true)
call TriggerRegisterPlayerChatEvent(gg_trg_djcs, s__baka_SPlayer(5), "-DJCS", true)
call TriggerRegisterPlayerChatEvent(gg_trg_djcs, s__baka_SPlayer(6), "-DJCS", true)
call TriggerRegisterPlayerChatEvent(gg_trg_djcs, s__baka_SPlayer(7), "-DJCS", true)
call TriggerAddAction(gg_trg_djcs, function Trig_djcsActions)
endfunction
function Trig_cxxrActions takes nothing returns nothing
if ( ( ( udg_test == 1 ) or ( ( ( GetPlayerController(s__baka_SPlayer(1)) == MAP_CONTROL_COMPUTER ) or ( GetPlayerSlotState(s__baka_SPlayer(1)) == PLAYER_SLOT_STATE_EMPTY ) ) and ( ( GetPlayerController(s__baka_SPlayer(5)) == MAP_CONTROL_COMPUTER ) or ( GetPlayerSlotState(s__baka_SPlayer(5)) == PLAYER_SLOT_STATE_EMPTY ) ) and ( ( GetPlayerController(s__baka_SPlayer(6)) == MAP_CONTROL_COMPUTER ) or ( GetPlayerSlotState(s__baka_SPlayer(6)) == PLAYER_SLOT_STATE_EMPTY ) ) and ( ( GetPlayerController(s__baka_SPlayer(2)) == MAP_CONTROL_COMPUTER ) or ( GetPlayerSlotState(s__baka_SPlayer(2)) == PLAYER_SLOT_STATE_EMPTY ) ) and ( ( GetPlayerController(s__baka_SPlayer(3)) == MAP_CONTROL_COMPUTER ) or ( GetPlayerSlotState(s__baka_SPlayer(3)) == PLAYER_SLOT_STATE_EMPTY ) ) and ( ( GetPlayerController(s__baka_SPlayer(4)) == MAP_CONTROL_COMPUTER ) or ( GetPlayerSlotState(s__baka_SPlayer(4)) == PLAYER_SLOT_STATE_EMPTY ) ) and ( ( GetPlayerController(s__baka_SPlayer(7)) == MAP_CONTROL_COMPUTER ) or ( GetPlayerSlotState(s__baka_SPlayer(7)) == PLAYER_SLOT_STATE_EMPTY ) ) and ( ( GetPlayerController(s__baka_SPlayer(8)) == MAP_CONTROL_COMPUTER ) or ( GetPlayerSlotState(s__baka_SPlayer(8)) == PLAYER_SLOT_STATE_EMPTY ) ) and ( ( GetPlayerController(s__baka_SPlayer(9)) == MAP_CONTROL_COMPUTER ) or ( GetPlayerSlotState(s__baka_SPlayer(9)) == PLAYER_SLOT_STATE_EMPTY ) ) ) ) ) then
call FlushChildHashtable(globalHashtable, GetHandleId(gg_trg_Delete_trigger))
call DestroyTrigger(gg_trg_Delete_trigger)
set udg_Dian[11]=Location(- 5775.00, 6225.00)
call PanCameraToTimedLocForPlayer(GetTriggerPlayer(), udg_Dian[11], 0)
call RemoveLocation(udg_Dian[11])
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, "TRIGSTR_3743")
call SetPlayerName(GetTriggerPlayer(), udg_Name[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )])
call DestroyTimerDialog(udg_chuangkou[0])
call PauseTimer(udg_jishiqi[0])
call RemoveUnit(udg_player[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )])
set udg_player[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )]=null
set udg_choose_ture[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )]=true
else
endif
endfunction
function InitTrig_cxxr takes nothing returns nothing
set gg_trg_cxxr=CreateTrigger()
call TriggerRegisterPlayerChatEvent(gg_trg_cxxr, s__baka_SPlayer(0), "-cxxr", true)
call TriggerRegisterPlayerChatEvent(gg_trg_cxxr, s__baka_SPlayer(1), "-cxxr", true)
call TriggerRegisterPlayerChatEvent(gg_trg_cxxr, s__baka_SPlayer(2), "-cxxr", true)
call TriggerRegisterPlayerChatEvent(gg_trg_cxxr, s__baka_SPlayer(5), "-cxxr", true)
call TriggerRegisterPlayerChatEvent(gg_trg_cxxr, s__baka_SPlayer(6), "-cxxr", true)
call TriggerRegisterPlayerChatEvent(gg_trg_cxxr, s__baka_SPlayer(7), "-cxxr", true)
call TriggerAddAction(gg_trg_cxxr, function Trig_cxxrActions)
endfunction
function Trig_jfcxActions takes nothing returns nothing
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ( ( udg_player[bj_forLoopAIndex] != null ) ) then
call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 30, ( ( udg_Color[bj_forLoopAIndex] + ( udg_Name[bj_forLoopAIndex] + ( "（" + GetHeroProperName(udg_player[bj_forLoopAIndex]) ) ) ) + ( "）|r的当前积分为：|cffffcc00" + ( I2S(udg_Score[bj_forLoopAIndex]) + "|r" ) ) ))
call DisplayTimedTextToPlayer(s__baka_SPlayer(10), 0, 0, 30, ( ( udg_Color[bj_forLoopAIndex] + ( udg_Name[bj_forLoopAIndex] + ( "（" + GetHeroProperName(udg_player[bj_forLoopAIndex]) ) ) ) + ( "）|r的当前积分为：|cffffcc00" + ( I2S(udg_Score[bj_forLoopAIndex]) + "|r" ) ) ))
call DisplayTimedTextToPlayer(s__baka_SPlayer(11), 0, 0, 30, ( ( udg_Color[bj_forLoopAIndex] + ( udg_Name[bj_forLoopAIndex] + ( "（" + GetHeroProperName(udg_player[bj_forLoopAIndex]) ) ) ) + ( "）|r的当前积分为：|cffffcc00" + ( I2S(udg_Score[bj_forLoopAIndex]) + "|r" ) ) ))
else
call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 30, ( ( udg_Color[bj_forLoopAIndex] + ( udg_Name[bj_forLoopAIndex] + ( "（没有英雄" ) ) ) + ( "）|r的当前积分为：|cffffcc00" + ( I2S(udg_Score[bj_forLoopAIndex]) + "|r" ) ) ))
call DisplayTimedTextToPlayer(s__baka_SPlayer(10), 0, 0, 30, ( ( udg_Color[bj_forLoopAIndex] + ( udg_Name[bj_forLoopAIndex] + ( "（没有英雄" ) ) ) + ( "）|r的当前积分为：|cffffcc00" + ( I2S(udg_Score[bj_forLoopAIndex]) + "|r" ) ) ))
call DisplayTimedTextToPlayer(s__baka_SPlayer(11), 0, 0, 30, ( ( udg_Color[bj_forLoopAIndex] + ( udg_Name[bj_forLoopAIndex] + ( "（没有英雄" ) ) ) + ( "）|r的当前积分为：|cffffcc00" + ( I2S(udg_Score[bj_forLoopAIndex]) + "|r" ) ) ))
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
endfunction
function InitTrig_jfcx takes nothing returns nothing
set gg_trg_jfcx=CreateTrigger()
call TriggerRegisterPlayerChatEvent(gg_trg_jfcx, s__baka_SPlayer(0), "-jf", true)
call TriggerRegisterPlayerChatEvent(gg_trg_jfcx, s__baka_SPlayer(1), "-jf", true)
call TriggerRegisterPlayerChatEvent(gg_trg_jfcx, s__baka_SPlayer(2), "-jf", true)
call TriggerRegisterPlayerChatEvent(gg_trg_jfcx, s__baka_SPlayer(3), "-jf", true)
call TriggerRegisterPlayerChatEvent(gg_trg_jfcx, s__baka_SPlayer(4), "-jf", true)
call TriggerRegisterPlayerChatEvent(gg_trg_jfcx, s__baka_SPlayer(5), "-jf", true)
call TriggerRegisterPlayerChatEvent(gg_trg_jfcx, s__baka_SPlayer(6), "-jf", true)
call TriggerRegisterPlayerChatEvent(gg_trg_jfcx, s__baka_SPlayer(7), "-jf", true)
call TriggerRegisterPlayerChatEvent(gg_trg_jfcx, s__baka_SPlayer(8), "-jf", true)
call TriggerRegisterPlayerChatEvent(gg_trg_jfcx, s__baka_SPlayer(9), "-jf", true)
call TriggerAddAction(gg_trg_jfcx, function Trig_jfcxActions)
endfunction
function Trig_zsActions takes nothing returns nothing
if ( ( IsUnitType(udg_player[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )], UNIT_TYPE_DEAD) == false ) ) then
set udg_buer[0]=false
call QuestMessageBJ(GetPlayersAll(), bj_QUESTMESSAGE_UPDATED, ( GetUnitName(udg_player[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )]) + "|cFFFF0000使用自杀命令，20秒后自杀|r" ))
call SetUnitInvulnerable(udg_player[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )], false)
call s__maphack_SetHeight(udg_player[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )] , 0.00 , 2000.00)
call StartTimerBJ(udg_jishiqi[93], false, 20.00)
set udg_zs[0]=udg_player[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )]
set udg_buer[0]=true
call DisableTrigger(GetTriggeringTrigger())
else
call DisplayTimedTextToPlayer(GetTriggerPlayer(), 0, 0, 10.00, "TRIGSTR_2294")
endif
endfunction
function InitTrig_zs takes nothing returns nothing
set gg_trg_zs=CreateTrigger()
call DisableTrigger(gg_trg_zs)
call TriggerAddAction(gg_trg_zs, function Trig_zsActions)
endfunction
function Trig_zs2Actions takes nothing returns nothing
call DisableTrigger(gg_trg_kill_hero)
set udg_buer[10]=false
call KillUnit(udg_zs[0])
set udg_zs[0]=null
set udg_buer[10]=true
call EnableTrigger(gg_trg_kill_hero)
call EnableTrigger(gg_trg_zs)
endfunction
function InitTrig_zs2 takes nothing returns nothing
set gg_trg_zs2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_zs2, udg_jishiqi[93])
call TriggerAddAction(gg_trg_zs2, function Trig_zs2Actions)
endfunction
function Trig_bugActions takes nothing returns nothing
if ( ( UnitHasBuffBJ(udg_player[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )], 0x4230334E) == true ) ) then
call UnitRemoveAbility(udg_player[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )], 0x4230334E)
else
endif
endfunction
function InitTrig_bug takes nothing returns nothing
set gg_trg_bug=CreateTrigger()
call TriggerAddAction(gg_trg_bug, function Trig_bugActions)
endfunction
function Trig_outActions takes nothing returns nothing
if ( ( ( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 ) <= 5 ) ) then
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 1 , ( ( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 ) + 1 ) , ( "|cff00ff00○|r" + ( ( udg_Color[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )] + udg_Name[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )] ) + "|r" ) ))
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 3 , ( ( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 ) + 1 ) , "TRIGSTR_5202")
call UnitRemoveAbility(udg_SmD[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )], 0x41304C58)
else
endif
if ( ( ( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 ) >= 6 ) and ( ( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 ) <= 10 ) ) then
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 1 , ( ( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 ) + 1 ) , ( "|cff00ffff○|r" + ( ( udg_Color[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )] + udg_Name[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )] ) + "|r" ) ))
call YDWEMultiboardSetItemValueBJNull(udg_duomianban[0] , 3 , ( ( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 ) + 1 ) , "TRIGSTR_1282")
call UnitRemoveAbility(udg_SmD[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )], 0x41304C58)
else
endif
if ( ( ( GetTriggerPlayer() == s__baka_SPlayer(10) ) or ( GetTriggerPlayer() == s__baka_SPlayer(11) ) ) ) then
else
call ShareEverythingWithTeam(GetTriggerPlayer())
endif
if ( ( GetTriggerPlayer() == s__baka_SPlayer(10) ) ) then
call QuestMessageBJ(GetPlayersAll(), bj_QUESTMESSAGE_UPDATED, ( "裁判1|cffff0000离开了游戏|r" ))
else
if ( ( GetTriggerPlayer() == s__baka_SPlayer(11) ) ) then
call QuestMessageBJ(GetPlayersAll(), bj_QUESTMESSAGE_UPDATED, ( "裁判2|cffff0000离开了游戏|r" ))
else
if ( ( udg_zhengshu[( ( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 ) - 1 )] >= 10 ) and ( udg_zhengshu[( ( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 ) - 1 )] >= ( 3 * udg_zhengshu[( ( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 ) + 19 )] ) ) ) then
call QuestMessageBJ(GetPlayersAll(), bj_QUESTMESSAGE_UPDATED, ( GetPlayerName(GetTriggerPlayer()) + "|cffff0000哭着跑了o(>_<)o|r" ))
call PlaySoundBJ(gg_snd_GoblinZeppelinPissed2)
else
call QuestMessageBJ(GetPlayersAll(), bj_QUESTMESSAGE_UPDATED, ( GetPlayerName(GetTriggerPlayer()) + "|cffff0000离开了游戏|r" ))
endif
endif
endif
call MultiboardDisplay(udg_duomianban[0], true)
endfunction
function InitTrig_out takes nothing returns nothing
set gg_trg_out=CreateTrigger()
call TriggerAddAction(gg_trg_out, function Trig_outActions)
endfunction
function Trig_guaji_1Conditions takes nothing returns boolean
return ( ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true ) )
endfunction
function Trig_guaji_1Actions takes nothing returns nothing
set udg_guaji[( s__baka_SGetPlayerId(GetOwningPlayer(GetTriggerUnit())) + 1 )]=0
endfunction
function InitTrig_guaji_1 takes nothing returns nothing
set gg_trg_guaji_1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_guaji_1, EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)
call TriggerRegisterAnyUnitEventBJ(gg_trg_guaji_1, EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(gg_trg_guaji_1, Condition(function Trig_guaji_1Conditions))
call TriggerAddAction(gg_trg_guaji_1, function Trig_guaji_1Actions)
endfunction
function Trig_DT_1Conditions takes nothing returns boolean
return ( ( udg_Points <= - 1 ) and ( IsUnitType(GetEnteringUnit(), UNIT_TYPE_HERO) == true ) and ( IsUnitType(GetEnteringUnit(), UNIT_TYPE_DEAD) == false ) and ( GetUnitTypeId(GetEnteringUnit()) != 0x4F303030 ) and ( GetUnitTypeId(GetEnteringUnit()) != 0x48303044 ) and ( GetUnitTypeId(GetEnteringUnit()) != 0x48303032 ) )
endfunction
function Trig_DT_1Func005A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_HERO) == true ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
else
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[1])
endif
set udg_danwei2[1]=null
endfunction
function Trig_DT_1Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnteringUnit()
set udg_dian2[0]=GetUnitLoc(gg_unit_n00F_0045)
set udg_xuanqu=YDWEGetUnitsInRectAllNull(gg_rct_DT_1)
call ForGroupBJ(udg_xuanqu, function Trig_DT_1Func005A)
if ( ( ( IsUnitGroupEmptyBJ(udg_xuanqu) == true ) or ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) >= 6 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) <= 10 ) ) ) and ( IsUnitEnemy(gg_unit_n00F_0045, GetOwningPlayer(udg_danwei2[0])) == true ) ) then
set udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )]=( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )] + 1 )
call SetUnitOwner(gg_unit_n00F_0045, GetOwningPlayer(udg_danwei2[0]), false)
call SetUnitOwner(gg_unit_n018_0117, GetOwningPlayer(udg_danwei2[0]), true)
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl", udg_dian2[0]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Items\\AIda\\AIdaCaster.mdl", udg_dian2[0]))
else
endif
call DestroyGroup(udg_xuanqu)
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_DT_1 takes nothing returns nothing
set gg_trg_DT_1=CreateTrigger()
call YDWETriggerRegisterEnterRectSimpleNull(gg_trg_DT_1 , gg_rct_DT_1)
call TriggerAddCondition(gg_trg_DT_1, Condition(function Trig_DT_1Conditions))
call TriggerAddAction(gg_trg_DT_1, function Trig_DT_1Actions)
endfunction
function Trig_DT_1_outConditions takes nothing returns boolean
return ( ( udg_Points <= - 1 ) and ( IsUnitType(GetLeavingUnit(), UNIT_TYPE_HERO) == true ) and ( IsUnitType(GetLeavingUnit(), UNIT_TYPE_DEAD) == false ) and ( GetUnitTypeId(GetLeavingUnit()) != 0x4F303030 ) and ( GetUnitTypeId(GetLeavingUnit()) != 0x48303044 ) and ( GetUnitTypeId(GetLeavingUnit()) != 0x48303032 ) )
endfunction
function Trig_DT_1_outFunc005A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_HERO) == true ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
else
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[1])
endif
set udg_danwei2[1]=null
endfunction
function Trig_DT_1_outFunc006A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_HERO) == true ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitAlly(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
else
call GroupRemoveUnit(udg_danweizu2[112], udg_danwei2[1])
endif
set udg_danwei2[1]=null
endfunction
function Trig_DT_1_outActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetLeavingUnit()
set udg_xuanqu=YDWEGetUnitsInRectAllNull(gg_rct_DT_1)
set udg_danweizu2[112]=YDWEGetUnitsInRectAllNull(gg_rct_DT_1)
call ForGroupBJ(udg_xuanqu, function Trig_DT_1_outFunc005A)
call ForGroupBJ(udg_danweizu2[112], function Trig_DT_1_outFunc006A)
if ( ( IsUnitGroupEmptyBJ(udg_danweizu2[112]) == true ) and ( IsUnitGroupEmptyBJ(udg_xuanqu) == false ) and ( IsUnitAlly(gg_unit_n00F_0045, GetOwningPlayer(udg_danwei2[0])) == true ) ) then
set udg_danwei2[1]=GroupPickRandomUnit(udg_xuanqu)
set udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 )]=( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 )] + 1 )
call SetUnitOwner(gg_unit_n00F_0045, GetOwningPlayer(udg_danwei2[1]), false)
call SetUnitOwner(gg_unit_n018_0117, GetOwningPlayer(udg_danwei2[1]), true)
set udg_dian2[0]=GetUnitLoc(gg_unit_n00F_0045)
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl", udg_dian2[0]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Items\\AIda\\AIdaCaster.mdl", udg_dian2[0]))
call RemoveLocation(udg_dian2[0])
set udg_danwei2[1]=null
else
endif
call DestroyGroup(udg_xuanqu)
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_DT_1_out takes nothing returns nothing
set gg_trg_DT_1_out=CreateTrigger()
call YDWETriggerRegisterLeaveRectSimpleNull(gg_trg_DT_1_out , gg_rct_DT_1)
call TriggerAddCondition(gg_trg_DT_1_out, Condition(function Trig_DT_1_outConditions))
call TriggerAddAction(gg_trg_DT_1_out, function Trig_DT_1_outActions)
endfunction
function Trig_DT_2Conditions takes nothing returns boolean
return ( ( IsUnitType(GetEnteringUnit(), UNIT_TYPE_HERO) == true ) and ( IsUnitType(GetEnteringUnit(), UNIT_TYPE_DEAD) == false ) and ( GetUnitTypeId(GetEnteringUnit()) != 0x4F303030 ) and ( GetUnitTypeId(GetEnteringUnit()) != 0x48303044 ) and ( GetUnitTypeId(GetEnteringUnit()) != 0x48303032 ) )
endfunction
function Trig_DT_2Func004A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_HERO) == true ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
else
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[1])
endif
set udg_danwei2[1]=null
endfunction
function Trig_DT_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnteringUnit()
set udg_dian2[0]=GetUnitLoc(gg_unit_n00F_0044)
set udg_xuanqu=YDWEGetUnitsInRectAllNull(gg_rct_DT_2)
call ForGroupBJ(udg_xuanqu, function Trig_DT_2Func004A)
if ( ( ( IsUnitGroupEmptyBJ(udg_xuanqu) == true ) or ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) <= 5 ) ) ) and ( IsUnitEnemy(gg_unit_n00F_0044, GetOwningPlayer(udg_danwei2[0])) == true ) ) then
set udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )]=( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )] + 1 )
call SetUnitOwner(gg_unit_n00F_0044, GetOwningPlayer(udg_danwei2[0]), false)
call SetUnitOwner(gg_unit_n018_0103, GetOwningPlayer(udg_danwei2[0]), true)
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl", udg_dian2[0]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Items\\AIda\\AIdaCaster.mdl", udg_dian2[0]))
else
endif
call DestroyGroup(udg_xuanqu)
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_DT_2 takes nothing returns nothing
set gg_trg_DT_2=CreateTrigger()
call YDWETriggerRegisterEnterRectSimpleNull(gg_trg_DT_2 , gg_rct_DT_2)
call TriggerAddCondition(gg_trg_DT_2, Condition(function Trig_DT_2Conditions))
call TriggerAddAction(gg_trg_DT_2, function Trig_DT_2Actions)
endfunction
function Trig_DT_2_outConditions takes nothing returns boolean
return ( ( IsUnitType(GetLeavingUnit(), UNIT_TYPE_HERO) == true ) and ( IsUnitType(GetLeavingUnit(), UNIT_TYPE_DEAD) == false ) and ( GetUnitTypeId(GetLeavingUnit()) != 0x4F303030 ) and ( GetUnitTypeId(GetLeavingUnit()) != 0x48303044 ) and ( GetUnitTypeId(GetLeavingUnit()) != 0x48303032 ) )
endfunction
function Trig_DT_2_outFunc004A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_HERO) == true ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
else
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[1])
endif
set udg_danwei2[1]=null
endfunction
function Trig_DT_2_outFunc005A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_HERO) == true ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitAlly(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
else
call GroupRemoveUnit(udg_danweizu2[112], udg_danwei2[1])
endif
set udg_danwei2[1]=null
endfunction
function Trig_DT_2_outActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetLeavingUnit()
set udg_xuanqu=YDWEGetUnitsInRectAllNull(gg_rct_DT_2)
set udg_danweizu2[112]=YDWEGetUnitsInRectAllNull(gg_rct_DT_2)
call ForGroupBJ(udg_xuanqu, function Trig_DT_2_outFunc004A)
call ForGroupBJ(udg_danweizu2[112], function Trig_DT_2_outFunc005A)
if ( ( IsUnitGroupEmptyBJ(udg_danweizu2[112]) == true ) and ( IsUnitGroupEmptyBJ(udg_xuanqu) == false ) and ( IsUnitAlly(gg_unit_n00F_0044, GetOwningPlayer(udg_danwei2[0])) == true ) ) then
set udg_danwei2[1]=GroupPickRandomUnit(udg_xuanqu)
set udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 )]=( udg_Score[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 )] + 1 )
call SetUnitOwner(gg_unit_n00F_0044, GetOwningPlayer(udg_danwei2[1]), false)
call SetUnitOwner(gg_unit_n018_0103, GetOwningPlayer(udg_danwei2[1]), true)
set udg_dian2[0]=GetUnitLoc(gg_unit_n00F_0044)
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl", udg_dian2[0]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Items\\AIda\\AIdaCaster.mdl", udg_dian2[0]))
call RemoveLocation(udg_dian2[0])
set udg_danwei2[1]=null
else
endif
call DestroyGroup(udg_xuanqu)
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_DT_2_out takes nothing returns nothing
set gg_trg_DT_2_out=CreateTrigger()
call YDWETriggerRegisterLeaveRectSimpleNull(gg_trg_DT_2_out , gg_rct_DT_2)
call TriggerAddCondition(gg_trg_DT_2_out, Condition(function Trig_DT_2_outConditions))
call TriggerAddAction(gg_trg_DT_2_out, function Trig_DT_2_outActions)
endfunction
function Trig_chuansong_1Conditions takes nothing returns boolean
return ( ( ( GetSpellAbilityId() == 0x4130464B ) or ( GetSpellAbilityId() == 0x4130464C ) ) )
endfunction
function Trig_chuansong_1Func004Func004Func006A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_HERO) == false ) and ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 ) == 11 ) or ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 ) == 12 ) ) and ( IsUnitAlly(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
else
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[1])
endif
set udg_danwei2[1]=null
endfunction
function Trig_chuansong_1Func004Func004Func007A takes nothing returns nothing
set udg_dian2[1]=GetUnitLoc(GetEnumUnit())
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) <= 3000.00 ) ) then
call GroupAddUnit(udg_xuanqu, GetEnumUnit())
else
endif
call RemoveLocation(udg_dian2[1])
endfunction
function Trig_chuansong_1Func004Func004Func017Func002A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
set udg_dian2[2]=GetUnitLoc(udg_danwei2[( 300 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) )])
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) < DistanceBetweenPoints(udg_dian2[0], udg_dian2[2]) ) ) then
set udg_danwei2[( 300 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) )]=GetEnumUnit()
set udg_shishu2ex[( 60 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) )]=AngleBetweenPoints(udg_dian2[1], udg_dian2[0])
else
endif
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
endfunction
function Trig_chuansong_1Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetTriggerUnit()
if ( ( GetTriggerUnit() == udg_danwei2[67] ) ) then
call UnitRemoveAbility(udg_danwei2[67], 0x41305041)
call UnitRemoveBuffBJ(0x42303353, udg_danwei2[67])
call SetUnitTurnSpeed(udg_danwei2[67], GetUnitDefaultTurnSpeed(udg_danwei2[67]))
call ResetUnitAnimation(udg_danwei2[67])
call PauseTimer(udg_times[67])
set udg_zhengshu2[68]=0
else
endif
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_HERO) == true ) ) then
if ( ( GetSpellTargetUnit() != null ) ) then
if ( ( GetUnitTypeId(GetSpellTargetUnit()) != 0x6E303131 ) and ( GetUnitTypeId(GetSpellTargetUnit()) != 0x6E303030 ) and ( GetUnitTypeId(GetSpellTargetUnit()) != 0x6E303133 ) and ( GetUnitTypeId(GetSpellTargetUnit()) != 0x6E303042 ) and ( GetUnitTypeId(GetSpellTargetUnit()) != 0x6E303130 ) and ( GetUnitTypeId(GetSpellTargetUnit()) != 0x6E303031 ) and ( GetUnitTypeId(GetSpellTargetUnit()) != 0x6E303134 ) and ( GetUnitTypeId(GetSpellTargetUnit()) != 0x6E303048 ) and ( GetUnitTypeId(GetSpellTargetUnit()) != 0x6E303033 ) and ( GetUnitTypeId(GetSpellTargetUnit()) != 0x6E303041 ) and ( GetUnitTypeId(GetSpellTargetUnit()) != 0x6E303032 ) and ( GetUnitTypeId(GetSpellTargetUnit()) != 0x6E676D65 ) ) then
set udg_danwei2[( 300 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) )]=GetSpellTargetUnit()
else
endif
set udg_shishu2ex[( 60 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) )]=360.00
else
set udg_dian2[0]=GetSpellTargetLoc()
set udg_shishu2ex[( 60 + bj_forLoopAIndex )]=AngleBetweenPoints(udg_dian2[1], udg_dian2[0])
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(3000.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_chuansong_1Func004Func004Func006A)
call ForGroupBJ(udg_Danweizu[166], function Trig_chuansong_1Func004Func004Func007A)
set udg_dian2[1]=GetUnitLoc(gg_unit_n00G_0048)
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) <= 3000.00 ) ) then
call GroupAddUnit(udg_xuanqu, gg_unit_n00G_0048)
else
endif
call RemoveLocation(udg_dian2[1])
set udg_dian2[1]=GetUnitLoc(gg_unit_n00F_0044)
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) <= 3000.00 ) and ( IsUnitAlly(gg_unit_n00F_0044, GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call GroupAddUnit(udg_xuanqu, gg_unit_n00F_0044)
else
endif
call RemoveLocation(udg_dian2[1])
set udg_dian2[1]=GetUnitLoc(gg_unit_n00F_0045)
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) <= 3000.00 ) and ( IsUnitAlly(gg_unit_n00F_0045, GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call GroupAddUnit(udg_xuanqu, gg_unit_n00F_0045)
else
endif
call RemoveLocation(udg_dian2[1])
if ( ( IsUnitGroupEmptyBJ(udg_xuanqu) == false ) ) then
set udg_danwei2[( 300 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) )]=FirstOfGroup(udg_xuanqu)
call ForGroupBJ(udg_xuanqu, function Trig_chuansong_1Func004Func004Func017Func002A)
else
endif
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[0])
endif
if ( ( udg_danwei2[( 300 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) )] != null ) ) then
if ( ( udg_danwei2[( 300 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) )] == gg_unit_n00F_0044 ) ) then
set udg_shishu2ex[( 60 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) )]=0.00
else
endif
if ( ( udg_danwei2[( 300 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) )] == gg_unit_n00F_0045 ) ) then
set udg_shishu2ex[( 60 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) )]=270.00
else
endif
if ( ( udg_danwei2[( 300 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) )] == gg_unit_hgtw_0012 ) ) then
set udg_shishu2ex[( 60 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) )]=45.00
else
endif
if ( ( udg_danwei2[( 300 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) )] == gg_unit_hgtw_0019 ) ) then
set udg_shishu2ex[( 60 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) )]=225.00
else
endif
set udg_dian2[2]=GetUnitLoc(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )])
set udg_dian2[1]=GetUnitLoc(udg_danwei2[( 300 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) )])
set udg_danwei2[( 310 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) )]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x6530355A, udg_dian2[1], 270.00)
call SetUnitAnimation(udg_danwei2[( 310 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) )], "birth")
set udg_danwei2[( 320 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) )]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x6530355A, udg_dian2[2], 270.00)
call SetUnitAnimation(udg_danwei2[( 320 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) )], "birth")
set udg_Danwei[37]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303649, udg_dian2[2], 270.00)
call SetUnitManaBJ(udg_Danwei[37], 255.00)
call SetUnitColor(udg_Danwei[37], PLAYER_COLOR_BLUE)
call GroupAddUnit(udg_Danweizu[38], udg_Danwei[37])
call s__maphack_SetHeight(udg_Danwei[37] , 375.00 , 0.00)
call SetUnitScale(udg_Danwei[37], 0.90, 0.90, 0.90)
if ( ( GetUnitTypeId(udg_danwei2[( 300 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) )]) == 0x65303845 ) ) then
call SetUnitUserData(udg_danwei2[( 300 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) )], IMaxBJ(GetUnitUserData(udg_danwei2[( 300 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[300])) + 1 ) )]), 10))
set udg_zhengshu2[( 300 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) )]=25
call SetUnitTimeScale(udg_Danwei[37], ( 1.00 / 1.00 ))
else
if ( ( GetSpellAbilityId() == 0x4130464B ) and ( GetUnitAbilityLevel(GetTriggerUnit(), 0x4130464B) == 2 ) ) then
set udg_zhengshu2[( 300 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) )]=75
call SetUnitTimeScale(udg_Danwei[37], ( 1.00 / 3.00 ))
else
if ( ( ( GetSpellAbilityId() == 0x4130464C ) or ( ( GetSpellAbilityId() == 0x4130464B ) and ( GetUnitAbilityLevel(GetTriggerUnit(), 0x4130464B) == 1 ) ) ) ) then
set udg_zhengshu2[( 300 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) )]=100
call SetUnitTimeScale(udg_Danwei[37], ( 1.00 / 4.00 ))
else
endif
endif
endif
set udg_Danwei[37]=null
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
else
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_595")
call SetUnitManaBJ(udg_danwei2[0], ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) + 75.00 ))
call IssueImmediateOrderById(udg_danwei2[0], 851972)
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_594")
call IssueImmediateOrderById(udg_danwei2[0], 851972)
endif
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_chuansong_1 takes nothing returns nothing
set gg_trg_chuansong_1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_chuansong_1, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_chuansong_1, Condition(function Trig_chuansong_1Conditions))
call TriggerAddAction(gg_trg_chuansong_1, function Trig_chuansong_1Actions)
endfunction
function Trig_chuansong_2Func002Func001Func001Func001A takes nothing returns nothing
set udg_Danwei[37]=GetEnumUnit()
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[37])) + 1 ) == ( s__baka_SGetPlayerId(GetOwningPlayer(udg_player[udg_Zhengshu[24]])) + 1 ) ) ) then
call SetUnitColor(udg_Danwei[37], PLAYER_COLOR_CYAN)
call SetUnitTimeScale(udg_Danwei[37], 0.00)
call SetUnitManaBJ(udg_Danwei[37], 250.00)
else
endif
set udg_Danwei[37]=null
endfunction
function Trig_chuansong_2Func002Func001Func002Func001A takes nothing returns nothing
set udg_Danwei[37]=GetEnumUnit()
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[37])) + 1 ) == ( s__baka_SGetPlayerId(GetOwningPlayer(udg_player[udg_Zhengshu[24]])) + 1 ) ) ) then
call SetUnitColor(udg_Danwei[37], PLAYER_COLOR_LIGHT_GRAY)
call SetUnitTimeScale(udg_Danwei[37], 0.00)
call SetUnitManaBJ(udg_Danwei[37], 250.00)
else
endif
set udg_Danwei[37]=null
endfunction
function Trig_chuansong_2Func002Func001Func002Func011Func001A takes nothing returns nothing
set udg_Danwei[37]=GetEnumUnit()
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[37])) + 1 ) == ( s__baka_SGetPlayerId(GetOwningPlayer(udg_player[udg_Zhengshu[24]])) + 1 ) ) ) then
call SetUnitColor(udg_Danwei[37], PLAYER_COLOR_CYAN)
call SetUnitTimeScale(udg_Danwei[37], 0.00)
call SetUnitManaBJ(udg_Danwei[37], 250.00)
else
endif
set udg_Danwei[37]=null
endfunction
function Trig_chuansong_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_Zhengshu[68]=0
set udg_Zhengshu[24]=1
loop
exitwhen udg_Zhengshu[24] > 10
if ( ( udg_zhengshu2[( 300 + udg_Zhengshu[24] )] > 0 ) ) then
if ( ( IsUnitType(udg_player[udg_Zhengshu[24]], UNIT_TYPE_DEAD) == false ) and ( IsUnitPausedBJ(udg_player[udg_Zhengshu[24]]) == false ) and ( IsUnitType(udg_danwei2[( 300 + udg_Zhengshu[24] )], UNIT_TYPE_DEAD) == false ) ) then
set udg_zhengshu2[( 300 + udg_Zhengshu[24] )]=( udg_zhengshu2[( 300 + udg_Zhengshu[24] )] - 1 )
set udg_dian2[0]=GetUnitLoc(udg_player[udg_Zhengshu[24]])
set udg_dian2[1]=GetUnitLoc(udg_danwei2[( 300 + udg_Zhengshu[24] )])
if ( ( udg_zhengshu2[( 300 + udg_Zhengshu[24] )] == 0 ) ) then
call ForGroupBJ(udg_Danweizu[38], function Trig_chuansong_2Func002Func001Func002Func011Func001A)
call KillUnit(udg_danwei2[( 310 + udg_Zhengshu[24] )])
call KillUnit(udg_danwei2[( 320 + udg_Zhengshu[24] )])
if ( ( udg_danwei2[( 300 + udg_Zhengshu[24] )] == gg_unit_n00G_0048 ) ) then
call SetUnitX(udg_player[udg_Zhengshu[24]], 125.00)
call SetUnitY(udg_player[udg_Zhengshu[24]], - 650.00)
else
set udg_Zhengshu[68]=1
if ( ( GetUnitTypeId(udg_danwei2[( 300 + udg_Zhengshu[24] )]) == 0x68636173 ) ) then
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], 250.00, udg_shishu2ex[( 60 + udg_Zhengshu[24] )])
else
if ( ( GetUnitTypeId(udg_danwei2[( 300 + udg_Zhengshu[24] )]) == 0x6E65666D ) ) then
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], 150.00, udg_shishu2ex[( 60 + udg_Zhengshu[24] )])
else
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], 100.00, udg_shishu2ex[( 60 + udg_Zhengshu[24] )])
endif
endif
call SetUnitX(udg_player[udg_Zhengshu[24]], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_player[udg_Zhengshu[24]], GetLocationY(udg_dian2[2]))
if ( ( GetUnitTypeId(udg_danwei2[( 300 + udg_Zhengshu[24] )]) == 0x65303845 ) ) then
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_player[udg_Zhengshu[24]]), 0x65303130, udg_dian2[2], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304F58)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_player[udg_Zhengshu[24]])
set udg_Danwei[92]=null
else
endif
call RemoveLocation(udg_dian2[2])
endif
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportCaster.mdl", udg_dian2[0]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl", udg_dian2[1]))
set udg_danwei2[( 300 + udg_Zhengshu[24] )]=null
set udg_danwei2[( 310 + udg_Zhengshu[24] )]=null
set udg_danwei2[( 320 + udg_Zhengshu[24] )]=null
else
call SetUnitX(udg_danwei2[( 310 + udg_Zhengshu[24] )], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[( 310 + udg_Zhengshu[24] )], GetLocationY(udg_dian2[1]))
call SetUnitX(udg_danwei2[( 320 + udg_Zhengshu[24] )], GetLocationX(udg_dian2[0]))
call SetUnitY(udg_danwei2[( 320 + udg_Zhengshu[24] )], GetLocationY(udg_dian2[0]))
endif
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
call ForGroupBJ(udg_Danweizu[38], function Trig_chuansong_2Func002Func001Func002Func001A)
set udg_zhengshu2[( 300 + udg_Zhengshu[24] )]=0
call KillUnit(udg_danwei2[( 310 + udg_Zhengshu[24] )])
call KillUnit(udg_danwei2[( 320 + udg_Zhengshu[24] )])
set udg_danwei2[( 300 + udg_Zhengshu[24] )]=null
set udg_danwei2[( 310 + udg_Zhengshu[24] )]=null
set udg_danwei2[( 320 + udg_Zhengshu[24] )]=null
endif
else
if ( ( udg_danwei2[( 310 + udg_Zhengshu[24] )] != null ) ) then
call ForGroupBJ(udg_Danweizu[38], function Trig_chuansong_2Func002Func001Func001Func001A)
set udg_zhengshu2[( 300 + udg_Zhengshu[24] )]=0
call KillUnit(udg_danwei2[( 310 + udg_Zhengshu[24] )])
call KillUnit(udg_danwei2[( 320 + udg_Zhengshu[24] )])
set udg_danwei2[( 300 + udg_Zhengshu[24] )]=null
set udg_danwei2[( 310 + udg_Zhengshu[24] )]=null
set udg_danwei2[( 320 + udg_Zhengshu[24] )]=null
else
endif
endif
set udg_Zhengshu[24]=udg_Zhengshu[24] + 1
endloop
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_chuansong_2 takes nothing returns nothing
set gg_trg_chuansong_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_chuansong_2, udg_Times[4])
call TriggerAddAction(gg_trg_chuansong_2, function Trig_chuansong_2Actions)
endfunction
function Trig_chuansong_3Conditions takes nothing returns boolean
return ( ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true ) and ( ( GetSpellAbilityId() == 0x4130464B ) or ( GetSpellAbilityId() == 0x4130464C ) ) )
endfunction
function Trig_chuansong_3Func004Func001A takes nothing returns nothing
set udg_Danwei[37]=GetEnumUnit()
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[37])) + 1 ) == ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) ) ) then
call SetUnitColor(udg_Danwei[37], PLAYER_COLOR_LIGHT_GRAY)
call SetUnitTimeScale(udg_Danwei[37], 0.00)
call SetUnitManaBJ(udg_Danwei[37], 250.00)
else
endif
set udg_Danwei[37]=null
endfunction
function Trig_chuansong_3Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetTriggerUnit()
if ( ( udg_zhengshu2[( 300 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) )] > 0 ) ) then
call ForGroupBJ(udg_Danweizu[38], function Trig_chuansong_3Func004Func001A)
set udg_zhengshu2[( 300 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) )]=0
call KillUnit(udg_danwei2[( 310 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) )])
call KillUnit(udg_danwei2[( 320 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) )])
set udg_danwei2[( 300 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) )]=null
set udg_danwei2[( 310 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) )]=null
set udg_danwei2[( 320 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) )]=null
else
endif
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_chuansong_3 takes nothing returns nothing
set gg_trg_chuansong_3=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_chuansong_3, EVENT_PLAYER_UNIT_SPELL_FINISH)
call TriggerRegisterAnyUnitEventBJ(gg_trg_chuansong_3, EVENT_PLAYER_UNIT_SPELL_ENDCAST)
call TriggerAddCondition(gg_trg_chuansong_3, Condition(function Trig_chuansong_3Conditions))
call TriggerAddAction(gg_trg_chuansong_3, function Trig_chuansong_3Actions)
endfunction
function Trig_GHConditions takes nothing returns boolean
return ( ( IsUnitType(GetEnteringUnit(), UNIT_TYPE_HERO) == true ) and ( IsUnitType(GetEnteringUnit(), UNIT_TYPE_DEAD) == false ) and ( GetUnitTypeId(GetEnteringUnit()) != 0x4F303030 ) and ( GetUnitTypeId(GetEnteringUnit()) != 0x48303044 ) and ( GetUnitTypeId(GetEnteringUnit()) != 0x48303042 ) and ( GetUnitTypeId(GetEnteringUnit()) != 0x4E303139 ) and ( GetUnitTypeId(GetEnteringUnit()) != 0x4830304D ) )
endfunction
function Trig_GHActions takes nothing returns nothing
set udg_danwei2[0]=GetEnteringUnit()
set udg_dian2[0]=GetUnitLoc(gg_unit_n00G_0048)
call DestroyFogModifier(udg_GH[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )])
set udg_GH[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )]=CreateFogModifierRadius(GetOwningPlayer(udg_danwei2[0]), FOG_OF_WAR_VISIBLE, GetLocationX(udg_dian2[0]), GetLocationY(udg_dian2[0]), 2000.00, true, true)
call FogModifierStart(udg_GH[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\Andt\\Andt.mdl", udg_dian2[0]))
call RemoveLocation(udg_dian2[0])
set udg_danwei2[0]=null
endfunction
function InitTrig_GH takes nothing returns nothing
set gg_trg_GH=CreateTrigger()
call YDWETriggerRegisterEnterRectSimpleNull(gg_trg_GH , gg_rct_GH)
call TriggerAddCondition(gg_trg_GH, Condition(function Trig_GHConditions))
call TriggerAddAction(gg_trg_GH, function Trig_GHActions)
endfunction
function Trig_GH_2Conditions takes nothing returns boolean
return ( ( IsUnitType(GetLeavingUnit(), UNIT_TYPE_HERO) == true ) and ( IsUnitType(GetLeavingUnit(), UNIT_TYPE_DEAD) == false ) and ( GetUnitTypeId(GetLeavingUnit()) != 0x4F303030 ) and ( GetUnitTypeId(GetLeavingUnit()) != 0x48303044 ) )
endfunction
function Trig_GH_2Actions takes nothing returns nothing
set udg_danwei2[0]=GetLeavingUnit()
call DestroyFogModifier(udg_GH[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )])
set udg_danwei2[0]=null
endfunction
function InitTrig_GH_2 takes nothing returns nothing
set gg_trg_GH_2=CreateTrigger()
call YDWETriggerRegisterLeaveRectSimpleNull(gg_trg_GH_2 , gg_rct_GH)
call TriggerAddCondition(gg_trg_GH_2, Condition(function Trig_GH_2Conditions))
call TriggerAddAction(gg_trg_GH_2, function Trig_GH_2Actions)
endfunction
function Trig_GH_3Conditions takes nothing returns boolean
return ( ( IsUnitType(GetDyingUnit(), UNIT_TYPE_HERO) == true ) and ( GetUnitTypeId(GetDyingUnit()) != 0x4F303030 ) and ( GetUnitTypeId(GetDyingUnit()) != 0x48303044 ) )
endfunction
function Trig_GH_3Actions takes nothing returns nothing
set udg_Danwei[10]=GetDyingUnit()
call DestroyFogModifier(udg_GH[( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[10])) + 1 )])
set udg_Danwei[10]=null
endfunction
function InitTrig_GH_3 takes nothing returns nothing
set gg_trg_GH_3=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_GH_3, EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gg_trg_GH_3, Condition(function Trig_GH_3Conditions))
call TriggerAddAction(gg_trg_GH_3, function Trig_GH_3Actions)
endfunction
function Trig_gangshao_1Conditions takes nothing returns boolean
return ( ( ( GetSpellAbilityId() == 0x41303730 ) or ( GetSpellAbilityId() == 0x41304646 ) ) )
endfunction
function Trig_gangshao_1Func006A takes nothing returns nothing
set udg_dian2[1]=GetDestructableLoc(GetEnumDestructable())
if ( ( GetDestructableTypeId(GetEnumDestructable()) != 0x5A546E63 ) and ( GetDestructableTypeId(GetEnumDestructable()) != 0x59543131 ) and ( IsDestructableDeadBJ(GetEnumDestructable()) == false ) and ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) <= 200.00 ) ) then
set udg_zhengshuex[0]=1
else
endif
call RemoveLocation(udg_dian2[1])
endfunction
function Trig_gangshao_1Func008Func004A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( ( GetUnitTypeId(udg_danwei2[1]) == 0x6F657965 ) or ( GetUnitTypeId(udg_danwei2[1]) == 0x6E776164 ) ) and ( IsUnitAlly(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call GroupAddUnit(udg_xuanqu, udg_danwei2[1])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_gangshao_1Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetTriggerUnit()
set udg_dian2[0]=GetSpellTargetLoc()
set udg_zhengshuex[0]=0
set udg_quyu[0]=RectFromCenterSizeBJ(udg_dian2[0], 200.00, 200.00)
call EnumDestructablesInRectAll(udg_quyu[0], function Trig_gangshao_1Func006A)
call RemoveRect(udg_quyu[0])
if ( ( udg_zhengshuex[0] == 0 ) ) then
set udg_xuanqu=CreateGroup()
call ForGroupBJ(udg_danweizu2[369], function Trig_gangshao_1Func008Func004A)
if ( ( IsTerrainPathableBJ(udg_dian2[0], PATHING_TYPE_WALKABILITY) == false ) and ( CountUnitsInGroup(udg_xuanqu) < 10 ) ) then
if ( ( GetSpellAbilityId() == 0x41303730 ) ) then
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x6F657965, udg_dian2[0], 270.00)
else
if ( ( GetSpellAbilityId() == 0x41304646 ) ) then
if ( ( udg_zhengshu2[377] < 100 ) ) then
set udg_zhengshu2[377]=( udg_zhengshu2[377] + 1 )
else
set udg_zhengshu2[377]=0
endif
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x6E776164, udg_dian2[0], 270.00)
call SetUnitUserData(udg_danwei2[1], udg_zhengshu2[377])
else
endif
endif
call UnitApplyTimedLife(udg_danwei2[1], 0x42544C46, 180.00)
call SetUnitAnimation(udg_danwei2[1], "birth")
call GroupAddUnit(udg_danweizu2[369], udg_danwei2[1])
set udg_danwei2[1]=null
else
call IssueImmediateOrderById(udg_danwei2[0], 851972)
if ( ( CountUnitsInGroup(udg_xuanqu) >= 10 ) ) then
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_5555")
else
if ( ( IsTerrainPathableBJ(udg_dian2[0], PATHING_TYPE_WALKABILITY) == true ) ) then
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_5449")
else
endif
endif
endif
call DestroyGroup(udg_xuanqu)
else
call IssueImmediateOrderById(udg_danwei2[0], 851972)
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_5556")
endif
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_gangshao_1 takes nothing returns nothing
set gg_trg_gangshao_1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_gangshao_1, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_gangshao_1, Condition(function Trig_gangshao_1Conditions))
call TriggerAddAction(gg_trg_gangshao_1, function Trig_gangshao_1Actions)
endfunction
function Trig_gangshao_2Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[369]) == false ) )
endfunction
function Trig_gangshao_2Func001Func002Func001Func002A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( udg_danwei2[0] != udg_danwei2[1] ) and ( GetUnitUserData(udg_danwei2[1]) == GetUnitUserData(udg_danwei2[0]) ) ) then
call GroupRemoveUnit(udg_danweizu2[369], udg_danwei2[1])
call RemoveUnit(udg_danwei2[1])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_gangshao_2Func001Func002Func002Func001Func001A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( GetUnitTypeId(udg_danwei2[1]) == 0x65303559 ) and ( GetUnitUserData(udg_danwei2[1]) == GetUnitUserData(udg_danwei2[0]) ) ) then
call GroupRemoveUnit(udg_danweizu2[369], udg_danwei2[1])
call RemoveUnit(udg_danwei2[1])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_gangshao_2Func001Func002Func002Func001Func003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( GetUnitTypeId(udg_danwei2[1]) == 0x65303559 ) and ( GetUnitUserData(udg_danwei2[1]) == GetUnitUserData(udg_danwei2[0]) ) ) then
call GroupAddUnit(udg_xuanqu, udg_danwei2[1])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_gangshao_2Func001Func002Func006A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
if ( ( udg_danwei2[0] != udg_danwei2[1] ) and ( ( ( GetUnitTypeId(udg_danwei2[0]) == 0x6E776164 ) and ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_HERO) == true ) or ( GetUnitTypeId(udg_danwei2[1]) == 0x6F657965 ) ) and ( GetUnitAbilityLevel(udg_danwei2[1], 0x41304648) != 1 ) ) or ( ( GetUnitTypeId(udg_danwei2[1]) == 0x6E776164 ) and ( GetUnitTypeId(udg_danwei2[0]) == 0x6F657965 ) and ( GetUnitAbilityLevel(udg_danwei2[0], 0x41304648) != 1 ) ) ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitAlly(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
if ( ( GetUnitAbilityLevel(udg_danwei2[0], 0x41304647) != 1 ) and ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) <= 200.00 ) ) then
call UnitAddAbility(udg_danwei2[0], 0x41304647)
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x6E776164 ) ) then
call UnitAddAbility(udg_danwei2[0], 0x4130464A)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl", udg_danwei2[0], "origin"))
else
endif
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x6F657965 ) ) then
call UnitAddAbility(udg_danwei2[0], 0x41304649)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl", udg_danwei2[0], "origin"))
else
endif
else
endif
else
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[1])
endif
call RemoveLocation(udg_dian2[1])
set udg_danwei2[1]=null
endfunction
function Trig_gangshao_2Func001Func002Func009Func002A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == true ) and ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 ) == 11 ) or ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 ) == 12 ) ) ) or ( ( udg_danwei2[0] != udg_danwei2[1] ) and ( GetUnitTypeId(udg_danwei2[1]) == 0x6F657965 ) and ( GetUnitAbilityLevel(udg_danwei2[1], 0x41647431) == 1 ) ) ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitAlly(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) and ( GetUnitAbilityLevel(udg_danwei2[0], 0x41304648) != 1 ) ) then
call UnitAddAbility(udg_danwei2[0], 0x41647431)
else
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[1])
endif
set udg_danwei2[1]=null
endfunction
function Trig_gangshao_2Func001Func002Func009Func006A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( GetUnitTypeId(udg_danwei2[1]) == 0x6E776164 ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call UnitAddAbility(udg_danwei2[0], 0x41304648)
call SetUnitVertexColor(udg_danwei2[0], 0, 0, 255, 255)
else
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[1])
endif
set udg_danwei2[1]=null
endfunction
function Trig_gangshao_2Func001A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_DEAD) == false ) ) then
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x6E776164 ) ) then
if ( ( GetUnitAbilityLevel(udg_danwei2[0], 0x4130464A) == 1 ) ) then
set udg_xuanqu=CreateGroup()
call ForGroupBJ(udg_danweizu2[369], function Trig_gangshao_2Func001Func002Func002Func001Func003A)
if ( ( IsUnitGroupEmptyBJ(udg_xuanqu) == true ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303559, udg_dian2[0], 270.00)
call SetUnitUserData(udg_danwei2[1], GetUnitUserData(udg_danwei2[0]))
call GroupAddUnit(udg_danweizu2[369], udg_danwei2[1])
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
else
endif
call DestroyGroup(udg_xuanqu)
else
call ForGroupBJ(udg_danweizu2[369], function Trig_gangshao_2Func001Func002Func002Func001Func001A)
endif
else
endif
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(500.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_gangshao_2Func001Func002Func006A)
if ( ( IsUnitGroupEmptyBJ(udg_xuanqu) == true ) ) then
call UnitRemoveAbility(udg_danwei2[0], 0x41304647)
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x6F657965 ) ) then
call UnitRemoveAbility(udg_danwei2[0], 0x41304649)
else
endif
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x6E776164 ) ) then
call UnitRemoveAbility(udg_danwei2[0], 0x4130464A)
else
endif
else
endif
call DestroyGroup(udg_xuanqu)
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x6F657965 ) ) then
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(1200.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_gangshao_2Func001Func002Func009Func002A)
if ( ( IsUnitGroupEmptyBJ(udg_xuanqu) == true ) ) then
call UnitRemoveAbility(udg_danwei2[0], 0x41647431)
else
endif
call DestroyGroup(udg_xuanqu)
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(1200.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_gangshao_2Func001Func002Func009Func006A)
if ( ( IsUnitGroupEmptyBJ(udg_xuanqu) == true ) ) then
call UnitRemoveAbility(udg_danwei2[0], 0x41304648)
call SetUnitVertexColor(udg_danwei2[0], 255, 255, 255, 255)
else
endif
call DestroyGroup(udg_xuanqu)
else
endif
call RemoveLocation(udg_dian2[0])
else
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x6E776164 ) ) then
call ForGroupBJ(udg_danweizu2[369], function Trig_gangshao_2Func001Func002Func001Func002A)
else
endif
call GroupRemoveUnit(udg_danweizu2[369], udg_danwei2[0])
endif
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_gangshao_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[369], function Trig_gangshao_2Func001A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_gangshao_2 takes nothing returns nothing
set gg_trg_gangshao_2=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_gangshao_2, 0.10)
call TriggerAddCondition(gg_trg_gangshao_2, Condition(function Trig_gangshao_2Conditions))
call TriggerAddAction(gg_trg_gangshao_2, function Trig_gangshao_2Actions)
endfunction
function Trig_chaichuConditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41304650 ) )
endfunction
function Trig_chaichuFunc004Func005A takes nothing returns nothing
set udg_danwei2[2]=GetEnumUnit()
if ( ( ( GetUnitTypeId(udg_danwei2[2]) == 0x6F657965 ) or ( GetUnitTypeId(udg_danwei2[2]) == 0x6E776164 ) ) and ( IsUnitEnemy(udg_danwei2[2], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call KillUnit(udg_danwei2[2])
else
endif
set udg_danwei2[2]=null
endfunction
function Trig_chaichuActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetTriggerUnit()
set udg_danwei2[1]=GetSpellTargetUnit()
if ( ( ( GetUnitTypeId(udg_danwei2[1]) == 0x6F657965 ) or ( GetUnitTypeId(udg_danwei2[1]) == 0x6E776164 ) ) ) then
call KillUnit(udg_danwei2[1])
set udg_dian2[0]=GetUnitLoc(udg_danwei2[1])
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(350.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_chaichuFunc004Func005A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[0])
else
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_3591")
endif
set udg_danwei2[0]=null
set udg_danwei2[1]=null
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_chaichu takes nothing returns nothing
set gg_trg_chaichu=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_chaichu, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_chaichu, Condition(function Trig_chaichuConditions))
call TriggerAddAction(gg_trg_chaichu, function Trig_chaichuActions)
endfunction
function Trig_OBActions takes nothing returns nothing
if ( ( udg_choose_ture[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )] == true ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 30.00, ( ( "|cffffcc00" + udg_Name[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )] ) + "成为了观看者(OB)|r" ))
call YDWEMakeUnitsPassiveForPlayerNull(GetTriggerPlayer())
call RemoveUnit(udg_player[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )])
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=12
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call SetPlayerAllianceStateBJ(s__baka_SPlayer(bj_forLoopAIndex - 1), GetTriggerPlayer(), bj_ALLIANCE_NEUTRAL_VISION)
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
set udg_choose_ture[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )]=false
call SetPlayerName(GetTriggerPlayer(), ( udg_Name[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )] + "（观看者）" ))
call SetPlayerAbilityAvailable(GetTriggerPlayer(), 0x41303646, false)
call SetPlayerAbilityAvailable(GetTriggerPlayer(), 0x41303648, false)
call SetPlayerAbilityAvailable(GetTriggerPlayer(), 0x41303645, false)
call SetPlayerAbilityAvailable(GetTriggerPlayer(), 0x41303644, false)
call SetPlayerAbilityAvailable(GetTriggerPlayer(), 0x41303050, false)
call SetPlayerStateBJ(GetTriggerPlayer(), PLAYER_STATE_RESOURCE_GOLD, 0)
call AddUnitAnimationPropertiesBJ(false, "alternate", udg_SmD[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )])
call s__Unit_PauseUnitMU(udg_SmD[( s__baka_SGetPlayerId(GetOwningPlayer(GetTriggerUnit())) + 1 )] , true , "成为OB")
else
endif
endfunction
function InitTrig_OB takes nothing returns nothing
set gg_trg_OB=CreateTrigger()
call DisableTrigger(gg_trg_OB)
call TriggerAddAction(gg_trg_OB, function Trig_OBActions)
endfunction
function Trig_SmD_swap_xxConditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41303645 ) )
endfunction
function Trig_SmD_swap_xxActions takes nothing returns nothing
set udg_danwei2[0]=GetSpellAbilityUnit()
set udg_danwei2[1]=GetSpellTargetUnit()
if ( ( GetOwningPlayer(udg_danwei2[0]) == GetOwningPlayer(udg_danwei2[1]) ) ) then
call DisplayTextToPlayer(s__baka_SPlayer(( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 ) - 1), 0, 0, "TRIGSTR_6853")
call IssueImmediateOrderById(udg_danwei2[0], 851972)
else
if ( ( GetUnitTypeId(udg_danwei2[1]) == 0x4F303030 ) ) then
call DisplayTextToPlayer(s__baka_SPlayer(( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 ) - 1), 0, 0, "TRIGSTR_7193")
call IssueImmediateOrderById(udg_danwei2[0], 851972)
else
endif
endif
set udg_danwei2[0]=null
set udg_danwei2[1]=null
endfunction
function InitTrig_SmD_swap_xx takes nothing returns nothing
set gg_trg_SmD_swap_xx=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_SmD_swap_xx, EVENT_PLAYER_UNIT_SPELL_CHANNEL)
call TriggerAddCondition(gg_trg_SmD_swap_xx, Condition(function Trig_SmD_swap_xxConditions))
call TriggerAddAction(gg_trg_SmD_swap_xx, function Trig_SmD_swap_xxActions)
endfunction
function Trig_SmD_swapConditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41303645 ) )
endfunction
function Trig_SmD_swapActions takes nothing returns nothing
set udg_danwei2[0]=GetSpellAbilityUnit()
set udg_danwei2[1]=GetSpellTargetUnit()
set udg_SWAP[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )]=( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 )
if ( ( udg_SWAP[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )] == ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 ) ) and ( udg_SWAP[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 )] == ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) ) ) then
call DisplayTextToPlayer(s__baka_SPlayer(( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) - 1), 0, 0, "TRIGSTR_6883")
call DisplayTextToPlayer(s__baka_SPlayer(( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 ) - 1), 0, 0, "TRIGSTR_6884")
call UnitRemoveAbility(udg_SmD[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )], 0x41303644)
call UnitAddAbility(udg_SmD[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )], 0x41303645)
call UnitRemoveAbility(udg_SmD[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 )], 0x41303644)
call UnitAddAbility(udg_SmD[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 )], 0x41303645)
set udg_danwei2[2]=udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )]
set udg_danwei2[3]=udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 )]
set udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )]=null
set udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 )]=null
set udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )]=udg_danwei2[3]
set udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 )]=udg_danwei2[2]
call SelectUnitForPlayerSingle(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )], GetOwningPlayer(udg_danwei2[0]))
call YDWEMultiboardSetItemIconBJNull(udg_duomianban[0] , 1 , ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) + 1 ) , udg_touxiang[GetUnitPointValue(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )])])
call YDWEMultiboardSetItemIconBJNull(udg_duomianban[0] , 1 , ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 ) + 1 ) , udg_touxiang[GetUnitPointValue(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 )])])
call SetPlayerName(GetOwningPlayer(udg_danwei2[0]), ( udg_Name[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )] + ( "（" + ( GetHeroProperName(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )]) + "）" ) ) ))
call SetPlayerName(GetOwningPlayer(udg_danwei2[1]), ( udg_Name[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 )] + ( "（" + ( GetHeroProperName(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 )]) + "）" ) ) ))
set udg_SWAP[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )]=0
set udg_SWAP[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 )]=0
call SetUnitOwner(udg_danwei2[2], GetOwningPlayer(udg_danwei2[1]), true)
call SetUnitOwner(udg_danwei2[3], GetOwningPlayer(udg_danwei2[0]), true)
call InitPlayerHero(udg_danwei2[2])
call InitPlayerHero(udg_danwei2[3])
call DisableTrigger(gg_trg_tognleidiejia)
set udg_zhengshuex[6]=1
set udg_zhengshu2[346]=1
loop
exitwhen udg_zhengshu2[346] > 6
if ( ( UnitItemInSlotBJ(udg_danwei2[2], udg_zhengshu2[346]) == null ) ) then
call UnitAddItemByIdSwapped(0x49303253, udg_danwei2[2])
else
endif
set udg_wupinfengyin[( ( - 10 + ( 10 * ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[2])) + 1 ) ) ) + udg_zhengshu2[346] )]=UnitItemInSlotBJ(udg_danwei2[2], udg_zhengshu2[346])
call SetItemUserData(udg_wupinfengyin[( - 10 + ( ( 10 * ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[2])) + 1 ) ) + udg_zhengshu2[346] ) )], ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[3])) + 1 ))
if ( ( UnitItemInSlotBJ(udg_danwei2[3], udg_zhengshu2[346]) == null ) ) then
call UnitAddItemByIdSwapped(0x49303253, udg_danwei2[3])
else
endif
set udg_wupinfengyin[( ( - 10 + ( 10 * ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[3])) + 1 ) ) ) + udg_zhengshu2[346] )]=UnitItemInSlotBJ(udg_danwei2[3], udg_zhengshu2[346])
call SetItemUserData(udg_wupinfengyin[( - 10 + ( ( 10 * ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[3])) + 1 ) ) + udg_zhengshu2[346] ) )], ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[2])) + 1 ))
set udg_zhengshu2[346]=udg_zhengshu2[346] + 1
endloop
set udg_zhengshu2[346]=1
loop
exitwhen udg_zhengshu2[346] > 6
call UnitAddItemSwapped(udg_wupinfengyin[( ( - 10 + ( 10 * ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[2])) + 1 ) ) ) + udg_zhengshu2[346] )], udg_wupinqiu[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[2])) + 1 )])
call UnitAddItemSwapped(udg_wupinfengyin[( ( - 10 + ( 10 * ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[3])) + 1 ) ) ) + udg_zhengshu2[346] )], udg_wupinqiu[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[3])) + 1 )])
call UnitAddItemSwapped(udg_wupinfengyin[( ( - 10 + ( 10 * ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[2])) + 1 ) ) ) + udg_zhengshu2[346] )], udg_danwei2[3])
call UnitAddItemSwapped(udg_wupinfengyin[( ( - 10 + ( 10 * ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[3])) + 1 ) ) ) + udg_zhengshu2[346] )], udg_danwei2[2])
set udg_wupinfengyin[( ( - 10 + ( 10 * ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[2])) + 1 ) ) ) + udg_zhengshu2[346] )]=null
set udg_wupinfengyin[( ( - 10 + ( 10 * ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[3])) + 1 ) ) ) + udg_zhengshu2[346] )]=null
set udg_zhengshu2[346]=udg_zhengshu2[346] + 1
endloop
set udg_zhengshu2[346]=1
loop
exitwhen udg_zhengshu2[346] > 6
if ( ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[2], udg_zhengshu2[346])) == 0x49303253 ) ) then
call RemoveItem(UnitItemInSlotBJ(udg_danwei2[2], udg_zhengshu2[346]))
else
endif
if ( ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[3], udg_zhengshu2[346])) == 0x49303253 ) ) then
call RemoveItem(UnitItemInSlotBJ(udg_danwei2[3], udg_zhengshu2[346]))
else
endif
set udg_zhengshu2[346]=udg_zhengshu2[346] + 1
endloop
call EnableTrigger(gg_trg_tognleidiejia)
set udg_zhengshuex[6]=0
set udg_danwei2[2]=null
set udg_danwei2[3]=null
else
call DisplayTextToPlayer(s__baka_SPlayer(( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 ) - 1), 0, 0, ( "|cffffcc00" + ( GetPlayerName(GetOwningPlayer(udg_danwei2[0])) + "申请向你交换英雄，如要接受请使用你的生命灯|r" ) ))
call UnitRemoveAbility(udg_danwei2[0], 0x41303645)
call UnitAddAbility(udg_danwei2[0], 0x41303644)
endif
set udg_danwei2[0]=null
set udg_danwei2[1]=null
endfunction
function InitTrig_SmD_swap takes nothing returns nothing
set gg_trg_SmD_swap=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_SmD_swap, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_SmD_swap, Condition(function Trig_SmD_swapConditions))
call TriggerAddAction(gg_trg_SmD_swap, function Trig_SmD_swapActions)
endfunction
function Trig_Smd_swap2Actions takes nothing returns nothing
if ( ( SubStringBJ(GetEventPlayerChatString(), 6, 6) == " " ) ) then
if ( ( ( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 ) <= 5 ) ) then
if ( ( S2I(SubStringBJ(GetEventPlayerChatString(), 7, 7)) >= 1 ) and ( S2I(SubStringBJ(GetEventPlayerChatString(), 7, 7)) <= 5 ) ) then
call s__baka_IssueTargetOrderById2(udg_SmD[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )] , 852095 , udg_player[S2I(SubStringBJ(GetEventPlayerChatString(), 7, 7))])
else
endif
else
endif
if ( ( ( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 ) >= 6 ) and ( ( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 ) <= 10 ) ) then
if ( ( S2I(SubStringBJ(GetEventPlayerChatString(), 7, 7)) >= 1 ) and ( S2I(SubStringBJ(GetEventPlayerChatString(), 7, 7)) <= 5 ) ) then
call s__baka_IssueTargetOrderById2(udg_SmD[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )] , 852095 , udg_player[( S2I(SubStringBJ(GetEventPlayerChatString(), 7, 7)) + 5 )])
else
if ( ( S2I(SubStringBJ(GetEventPlayerChatString(), 7, 7)) >= 6 ) and ( S2I(SubStringBJ(GetEventPlayerChatString(), 7, 7)) <= 10 ) ) then
call s__baka_IssueTargetOrderById2(udg_SmD[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )] , 852095 , udg_player[S2I(SubStringBJ(GetEventPlayerChatString(), 7, 7))])
else
endif
endif
else
endif
else
if ( ( ( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 ) <= 5 ) ) then
if ( ( S2I(SubStringBJ(GetEventPlayerChatString(), 6, 6)) >= 1 ) and ( S2I(SubStringBJ(GetEventPlayerChatString(), 6, 6)) <= 5 ) ) then
call s__baka_IssueTargetOrderById2(udg_SmD[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )] , 852095 , udg_player[S2I(SubStringBJ(GetEventPlayerChatString(), 6, 6))])
else
endif
else
endif
if ( ( ( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 ) >= 6 ) and ( ( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 ) <= 10 ) ) then
if ( ( S2I(SubStringBJ(GetEventPlayerChatString(), 6, 6)) >= 1 ) and ( S2I(SubStringBJ(GetEventPlayerChatString(), 6, 6)) <= 5 ) ) then
call s__baka_IssueTargetOrderById2(udg_SmD[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )] , 852095 , udg_player[( S2I(SubStringBJ(GetEventPlayerChatString(), 6, 6)) + 5 )])
else
if ( ( S2I(SubStringBJ(GetEventPlayerChatString(), 6, 6)) >= 6 ) and ( S2I(SubStringBJ(GetEventPlayerChatString(), 6, 6)) <= 10 ) ) then
call s__baka_IssueTargetOrderById2(udg_SmD[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )] , 852095 , udg_player[S2I(SubStringBJ(GetEventPlayerChatString(), 6, 6))])
else
endif
endif
else
endif
endif
endfunction
function InitTrig_Smd_swap2 takes nothing returns nothing
set gg_trg_Smd_swap2=CreateTrigger()
call TriggerRegisterPlayerChatEvent(gg_trg_Smd_swap2, s__baka_SPlayer(0), "-swap", false)
call TriggerRegisterPlayerChatEvent(gg_trg_Smd_swap2, s__baka_SPlayer(1), "-swap", false)
call TriggerRegisterPlayerChatEvent(gg_trg_Smd_swap2, s__baka_SPlayer(2), "-swap", false)
call TriggerRegisterPlayerChatEvent(gg_trg_Smd_swap2, s__baka_SPlayer(3), "-swap", false)
call TriggerRegisterPlayerChatEvent(gg_trg_Smd_swap2, s__baka_SPlayer(4), "-swap", false)
call TriggerRegisterPlayerChatEvent(gg_trg_Smd_swap2, s__baka_SPlayer(5), "-swap", false)
call TriggerRegisterPlayerChatEvent(gg_trg_Smd_swap2, s__baka_SPlayer(6), "-swap", false)
call TriggerRegisterPlayerChatEvent(gg_trg_Smd_swap2, s__baka_SPlayer(7), "-swap", false)
call TriggerRegisterPlayerChatEvent(gg_trg_Smd_swap2, s__baka_SPlayer(8), "-swap", false)
call TriggerRegisterPlayerChatEvent(gg_trg_Smd_swap2, s__baka_SPlayer(9), "-swap", false)
call TriggerAddAction(gg_trg_Smd_swap2, function Trig_Smd_swap2Actions)
endfunction
function Trig_SmD_swap_noConditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41303644 ) )
endfunction
function Trig_SmD_swap_noActions takes nothing returns nothing
set udg_danwei2[0]=GetSpellAbilityUnit()
call UnitRemoveAbility(udg_danwei2[0], 0x41303644)
call UnitAddAbility(udg_danwei2[0], 0x41303645)
call DisplayTextToPlayer(s__baka_SPlayer(udg_SWAP[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )] - 1), 0, 0, ( "|cffffcc00" + ( GetPlayerName(GetOwningPlayer(udg_danwei2[0])) + "取消向你申请交换英雄|r" ) ))
set udg_SWAP[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )]=0
set udg_danwei2[0]=null
endfunction
function InitTrig_SmD_swap_no takes nothing returns nothing
set gg_trg_SmD_swap_no=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_SmD_swap_no, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_SmD_swap_no, Condition(function Trig_SmD_swap_noConditions))
call TriggerAddAction(gg_trg_SmD_swap_no, function Trig_SmD_swap_noActions)
endfunction
function Trig_SmD_OBConditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41303646 ) )
endfunction
function Trig_SmD_OBActions takes nothing returns nothing
set udg_danwei2[0]=GetSpellAbilityUnit()
call DisplayTimedTextToForce(GetPlayersAll(), 30.00, ( ( "|cffffcc00" + udg_Name[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )] ) + "成为了观看者(OB)|r" ))
call RemoveUnit(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )])
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=12
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call SetPlayerAllianceStateBJ(s__baka_SPlayer(bj_forLoopAIndex - 1), GetOwningPlayer(udg_danwei2[0]), bj_ALLIANCE_NEUTRAL_VISION)
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
set udg_choose_ture[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )]=false
call SetPlayerName(GetOwningPlayer(udg_danwei2[0]), ( udg_Name[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )] + "（观看者）" ))
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41303646, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41303648, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41303645, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41303644, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41303050, false)
call SetPlayerStateBJ(GetOwningPlayer(udg_danwei2[0]), PLAYER_STATE_RESOURCE_GOLD, 0)
call s__Unit_PauseUnitMU(udg_danwei2[0] , true , "成为OB")
set udg_danwei2[0]=null
endfunction
function InitTrig_SmD_OB takes nothing returns nothing
set gg_trg_SmD_OB=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_SmD_OB, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_SmD_OB, Condition(function Trig_SmD_OBConditions))
call TriggerAddAction(gg_trg_SmD_OB, function Trig_SmD_OBActions)
endfunction
function Trig_SmD_gpkConditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41303647 ) )
endfunction
function Trig_SmD_gpkActions takes nothing returns nothing
if ( ( udg_buer[9] == true ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 20.00, "TRIGSTR_7235")
set udg_buer[9]=false
call SetPlayerAbilityAvailable(s__baka_SPlayer(0), 0x41303647, false)
call SetPlayerAbilityAvailable(s__baka_SPlayer(5), 0x41303647, false)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), 0x4130315A, false)
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
else
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, "TRIGSTR_7233")
endif
endfunction
function InitTrig_SmD_gpk takes nothing returns nothing
set gg_trg_SmD_gpk=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_SmD_gpk, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_SmD_gpk, Condition(function Trig_SmD_gpkConditions))
call TriggerAddAction(gg_trg_SmD_gpk, function Trig_SmD_gpkActions)
endfunction
function Trig_SmD_RandomConditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41303648 ) )
endfunction
function Trig_SmD_RandomActions takes nothing returns nothing
set udg_danwei2[1]=GetSpellAbilityUnit()
if ( ( udg_choose_ture[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 )] == true ) ) then
call StopSoundBJ(gg_snd_AutoCastButtonClick1, false)
call PlaySoundBJ(gg_snd_AutoCastButtonClick1)
set udg_danwei[0]=GroupPickRandomUnit(udg_danweizu[0])
set udg_danwei2[0]=udg_danwei[0]
call ModifyHeroSkillPoints(udg_danwei2[0], bj_MODIFYMETHOD_SET, 1)
call UnitRemoveAbility(udg_danwei2[0], 0x416E6532)
set udg_a[GetUnitPointValue(udg_danwei2[0])]=true
call TriggerExecute(gg_trg_All_skills)
set udg_danwei2[0]=null
set udg_suijixuanren[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 )]=udg_danwei[0]
set udg_point[8]=GetPlayerStartLocationLoc(GetOwningPlayer(udg_danwei2[1]))
call CreateNUnitsAtLoc(1, GetUnitTypeId(udg_danwei[0]), GetOwningPlayer(udg_danwei2[1]), udg_point[8], bj_UNIT_FACING)
call GroupRemoveUnit(udg_danweizu[0], udg_hero[GetUnitPointValue(udg_danwei[0])])
set udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 )]=bj_lastCreatedUnit
call InitPlayerHero(bj_lastCreatedUnit)
call TriggerRegisterUnitEvent(gg_trg_renyishanghai_hero, bj_lastCreatedUnit, EVENT_UNIT_DAMAGED)
call UnitAddItemByIdSwapped(0x49303148, udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 )])
call YDWEMultiboardSetItemIconBJNull(udg_duomianban[0] , 1 , ( ( s__baka_SGetPlayerId(GetOwningPlayer(bj_lastCreatedUnit)) + 1 ) + 1 ) , udg_touxiang[GetUnitPointValue(bj_lastCreatedUnit)])
call QuestMessageBJ(GetPlayersAll(), bj_QUESTMESSAGE_UPDATED, ( GetPlayerName(GetOwningPlayer(udg_danwei2[1])) + ( "|cFF33FF33随机了|r" + GetHeroProperName(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 )]) ) ))
call PanCameraToTimedLocForPlayer(GetOwningPlayer(udg_danwei2[1]), udg_point[8], 0)
call SelectUnitForPlayerSingle(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 )], GetOwningPlayer(udg_danwei2[1]))
call RemoveLocation(udg_point[8])
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 )]), 0x41303646, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 )]), 0x41303648, false)
call UnitAddAbility(udg_SmD[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 )], 0x41303034)
call SetPlayerName(GetOwningPlayer(udg_danwei2[1]), ( udg_Name[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 )] + ( "（" + ( GetHeroProperName(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 )]) + "）" ) ) ))
call AddUnitAnimationPropertiesBJ(true, "alternate", udg_SmD[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 )])
call SetUnitVertexColor(udg_SmD[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 )], 255, 255, 255, 255)
set udg_choose_ture[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 )]=false
call GroupRemoveUnit(udg_danweizu[0], udg_danwei[0])
call RemoveUnit(udg_danwei[0])
set udg_danwei[0]=null
else
endif
set udg_danwei2[1]=null
endfunction
function InitTrig_SmD_Random takes nothing returns nothing
set gg_trg_SmD_Random=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_SmD_Random, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_SmD_Random, Condition(function Trig_SmD_RandomConditions))
call TriggerAddAction(gg_trg_SmD_Random, function Trig_SmD_RandomActions)
endfunction
function Trig_SmD_repickConditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41303034 ) )
endfunction
function Trig_SmD_repickActions takes nothing returns nothing
set udg_danwei2[1]=GetSpellAbilityUnit()
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_player[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )] , 0x49303148)) == true ) ) then
if ( ( GetUnitLifePercent(udg_player[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )]) == 100.00 ) and ( GetUnitManaPercent(udg_player[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )]) == 100.00 ) and ( udg_zhengshu[( ( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 ) - 1 )] == 0 ) ) then
if ( ( ( RectContainsUnit(gg_rct_jidi, udg_player[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )]) == true ) or ( RectContainsUnit(gg_rct_jidi_2, udg_player[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )]) == true ) ) ) then
call SetPlayerName(GetTriggerPlayer(), udg_Name[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )])
call QuestMessageBJ(GetPlayersAll(), bj_QUESTMESSAGE_UPDATED, ( GetPlayerName(GetOwningPlayer(udg_danwei2[1])) + ( "|cFFffcc00放弃使用了|r" + GetHeroProperName(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 )]) ) ))
set udg_Dian[11]=GetUnitLoc(udg_danwei2[1])
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=6
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ( ( GetItemTypeId(UnitItemInSlotBJ(udg_player[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )], bj_forLoopAIndex)) == 0x49303148 ) ) then
call RemoveItem(UnitItemInSlotBJ(udg_player[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )], bj_forLoopAIndex))
else
call SetItemPositionLoc(UnitItemInSlotBJ(udg_player[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )], bj_forLoopAIndex), udg_Dian[11])
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call RemoveLocation(udg_Dian[11])
set udg_Dian[11]=Location(- 5775.00, 6225.00)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(udg_danwei2[1]), udg_Dian[11], 0)
call RemoveLocation(udg_Dian[11])
call RemoveUnit(udg_player[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )])
set udg_player[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )]=null
set udg_choose_ture[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )]=true
call UnitRemoveAbility(udg_danwei2[1], 0x41303034)
else
call DisplayTextToPlayer(s__baka_SPlayer(( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 ) - 1), 0, 0, "TRIGSTR_101")
call SetPlayerStateBJ(GetOwningPlayer(udg_danwei2[1]), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(udg_danwei2[1]), PLAYER_STATE_RESOURCE_GOLD) + 500 ))
endif
else
call DisplayTextToPlayer(s__baka_SPlayer(( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 ) - 1), 0, 0, "TRIGSTR_1984")
call SetPlayerStateBJ(GetOwningPlayer(udg_danwei2[1]), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(udg_danwei2[1]), PLAYER_STATE_RESOURCE_GOLD) + 500 ))
endif
else
call DisplayTextToPlayer(s__baka_SPlayer(( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 ) - 1), 0, 0, "TRIGSTR_1074")
call SetPlayerStateBJ(GetOwningPlayer(udg_danwei2[1]), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(udg_danwei2[1]), PLAYER_STATE_RESOURCE_GOLD) + 500 ))
endif
set udg_danwei2[1]=null
endfunction
function InitTrig_SmD_repick takes nothing returns nothing
set gg_trg_SmD_repick=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_SmD_repick, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_SmD_repick, Condition(function Trig_SmD_repickConditions))
call TriggerAddAction(gg_trg_SmD_repick, function Trig_SmD_repickActions)
endfunction
function Trig_SmD_VConditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41304130 ) )
endfunction
function Trig_SmD_VActions takes nothing returns nothing
set udg_danwei2[0]=GetSpellAbilityUnit()
if ( ( udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )] != null ) ) then
call DisplayTextToPlayer(s__baka_SPlayer(( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) - 1), 0, 0, ( "|cffffcc00你的英雄(" + ( ( GetHeroProperName(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )]) + ")移动速度：" ) + ( I2S(R2I(GetUnitMoveSpeed(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )]))) + "|r" ) ) ))
else
call DisplayTextToPlayer(s__baka_SPlayer(( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) - 1), 0, 0, "TRIGSTR_269")
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_SmD_V takes nothing returns nothing
set gg_trg_SmD_V=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_SmD_V, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_SmD_V, Condition(function Trig_SmD_VConditions))
call TriggerAddAction(gg_trg_SmD_V, function Trig_SmD_VActions)
endfunction
function Trig_SmD_SGConditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41303050 ) )
endfunction
function Trig_SmD_SGFunc014A takes nothing returns nothing
set udg_danwei2[2]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[2], UNIT_TYPE_STRUCTURE) == true ) and ( IsUnitType(udg_danwei2[2], UNIT_TYPE_DEAD) == false ) and ( GetUnitTypeId(udg_danwei2[2]) != 0x68636173 ) and ( GetUnitTypeId(udg_danwei2[2]) != 0x6E303046 ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[2])
if ( ( ( GetUnitTypeId(udg_danwei2[2]) == 0x68677477 ) or ( GetUnitTypeId(udg_danwei2[2]) == 0x6E65666D ) ) ) then
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[2]), 0x65303542, udg_dian2[0], 0.00)
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) >= 6 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) <= 10 ) ) then
call SetUnitVertexColor(udg_danwei2[1], 255, 255, 255, 255)
else
endif
call IssueImmediateOrderById(udg_danwei2[1], 852503)
else
call SetUnitInvulnerable(udg_danwei2[2], true)
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[2]), 0x65303541, udg_dian2[0], 0.00)
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) >= 6 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) <= 10 ) ) then
call SetUnitVertexColor(udg_danwei2[1], 255, 150, 150, 255)
else
endif
endif
if ( ( GetUnitTypeId(udg_danwei2[2]) == 0x6E627432 ) ) then
call s__maphack_SetHeight(udg_danwei2[1] , 175.00 , 0.00)
else
endif
if ( ( GetUnitTypeId(udg_danwei2[2]) == 0x68677477 ) ) then
call SetUnitScale(udg_danwei2[1], 3.00, 3.00, 3.00)
else
endif
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 5.00)
call SetUnitTimeScale(udg_danwei2[1], 0.70)
call SetUnitAnimation(udg_danwei2[1], "birth")
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
else
endif
set udg_danwei2[2]=null
endfunction
function Trig_SmD_SGActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call DisableTrigger(GetTriggeringTrigger())
set udg_danwei2[0]=GetSpellAbilityUnit()
set udg_quyu[100]=GetEntireMapRect()
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) <= 5 ) ) then
set udg_dian2[0]=GetRectCenter(gg_rct_shuabing6)
call PlaySoundBJ(gg_snd_DivineShield)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=5
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call IssueImmediateOrderById(udg_SmD[bj_forLoopAIndex], 852127)
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
set udg_xuanqu=YDWEGetUnitsInRectOfPlayerNull(udg_quyu[100] , s__baka_SPlayer(10))
call StartTimerBJ(udg_times[378], false, 5.00)
else
endif
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) >= 6 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) <= 10 ) ) then
set udg_dian2[0]=GetRectCenter(gg_rct_shuabign3)
call PlaySoundBJ(gg_snd_DivineShield)
set bj_forLoopAIndex=6
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call IssueImmediateOrderById(udg_SmD[bj_forLoopAIndex], 852127)
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
set udg_xuanqu=YDWEGetUnitsInRectOfPlayerNull(udg_quyu[100] , s__baka_SPlayer(11))
call StartTimerBJ(udg_times[379], false, 5.00)
else
endif
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303250, udg_dian2[0], 0.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 5.00)
call IssueImmediateOrderById(udg_danwei2[1], 852503)
call SetUnitTimeScale(udg_danwei2[1], 0.70)
call SetUnitAnimation(udg_danwei2[1], "birth")
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) >= 6 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) <= 10 ) ) then
call SetUnitVertexColor(udg_danwei2[1], 255, 150, 0, 255)
else
endif
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_SmD_SGFunc014A)
call DestroyGroup(udg_xuanqu)
call RemoveRect(udg_quyu[100])
set udg_danwei2[0]=null
call EnableTrigger(GetTriggeringTrigger())
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_SmD_SG takes nothing returns nothing
set gg_trg_SmD_SG=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_SmD_SG, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_SmD_SG, Condition(function Trig_SmD_SGConditions))
call TriggerAddAction(gg_trg_SmD_SG, function Trig_SmD_SGActions)
endfunction
function Trig_SG01Func003A takes nothing returns nothing
set udg_danwei2[2]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[2], UNIT_TYPE_STRUCTURE) == true ) and ( IsUnitType(udg_danwei2[2], UNIT_TYPE_DEAD) == false ) and ( GetUnitTypeId(udg_danwei2[2]) != 0x68636173 ) and ( GetUnitTypeId(udg_danwei2[2]) != 0x6E303046 ) ) then
if ( ( ( GetUnitTypeId(udg_danwei2[2]) == 0x68677477 ) or ( GetUnitTypeId(udg_danwei2[2]) == 0x6E65666D ) ) ) then
else
call SetUnitInvulnerable(udg_danwei2[2], false)
endif
else
endif
set udg_danwei2[2]=null
endfunction
function Trig_SG01Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_quyu[100]=GetEntireMapRect()
set udg_xuanqu=YDWEGetUnitsInRectOfPlayerNull(udg_quyu[100] , s__baka_SPlayer(10))
call ForGroupBJ(udg_xuanqu, function Trig_SG01Func003A)
call DestroyGroup(udg_xuanqu)
call RemoveRect(udg_quyu[100])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_SG01 takes nothing returns nothing
set gg_trg_SG01=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_SG01, udg_times[378])
call TriggerAddAction(gg_trg_SG01, function Trig_SG01Actions)
endfunction
function Trig_SG02Func003A takes nothing returns nothing
set udg_danwei2[2]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[2], UNIT_TYPE_STRUCTURE) == true ) and ( IsUnitType(udg_danwei2[2], UNIT_TYPE_DEAD) == false ) and ( GetUnitTypeId(udg_danwei2[2]) != 0x68636173 ) and ( GetUnitTypeId(udg_danwei2[2]) != 0x6E303046 ) ) then
if ( ( ( GetUnitTypeId(udg_danwei2[2]) == 0x68677477 ) or ( GetUnitTypeId(udg_danwei2[2]) == 0x6E65666D ) ) ) then
else
call SetUnitInvulnerable(udg_danwei2[2], false)
endif
else
endif
set udg_danwei2[2]=null
endfunction
function Trig_SG02Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_quyu[100]=GetEntireMapRect()
set udg_xuanqu=YDWEGetUnitsInRectOfPlayerNull(udg_quyu[100] , s__baka_SPlayer(11))
call ForGroupBJ(udg_xuanqu, function Trig_SG02Func003A)
call DestroyGroup(udg_xuanqu)
call RemoveRect(udg_quyu[100])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_SG02 takes nothing returns nothing
set gg_trg_SG02=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_SG02, udg_times[379])
call TriggerAddAction(gg_trg_SG02, function Trig_SG02Actions)
endfunction
function Trig_SmD_fuhuoConditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x4130424A ) )
endfunction
function Trig_SmD_fuhuoActions takes nothing returns nothing
set udg_danwei2[0]=GetSpellAbilityUnit()
if ( ( GetPlayerSlotState(GetOwningPlayer(udg_danwei2[0])) != PLAYER_SLOT_STATE_LEFT ) ) then
if ( ( IsUnitType(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )], UNIT_TYPE_DEAD) == true ) ) then
if ( ( GetUnitAbilityLevel(udg_danwei2[0], 0x4130424A) >= 6 ) and ( udg_zhengshu2[179] != 12 ) ) then
call UnitRemoveAbility(udg_danwei2[0], 0x4130424A)
call UnitAddAbility(udg_danwei2[0], 0x41304331)
call IssueImmediateOrderById(udg_danwei2[0], 852100)
call StartTimerBJ(udg_FH[( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) + 10 )], false, 180.00)
else
endif
call PauseTimer(udg_FH[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )])
set udg_danwei2[1]=udg_fuhuo[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )]
set udg_dian2[0]=GetPlayerStartLocationLoc(s__baka_SPlayer(( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 ) - 1))
call ReviveHeroLoc(udg_danwei2[1], udg_dian2[0], false)
call RemoveLocation(udg_dian2[0])
call SelectUnitForPlayerSingle(udg_danwei2[1], GetOwningPlayer(udg_danwei2[1]))
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) <= 5 ) ) then
call QuestMessageBJ(GetPlayersAll(), bj_QUESTMESSAGE_UPDATED, ( ( "|cff009900" + GetPlayerName(GetOwningPlayer(udg_danwei2[1])) ) + "|r复活了(买活！)" ))
else
call QuestMessageBJ(GetPlayersAll(), bj_QUESTMESSAGE_UPDATED, ( ( "|cff0075ff" + GetPlayerName(GetOwningPlayer(udg_danwei2[1])) ) + "|r复活了(买活！)" ))
endif
call SetUnitVertexColor(udg_danwei2[1], 255, 255, 255, 255)
call s__maphack_SetHeight(udg_danwei2[1] , 0.00 , 0.00)
call SetUnitTimeScale(udg_danwei2[1], 1)
call SetUnitManaPercentBJ(udg_danwei2[1], 100)
if ( ( GetUnitTypeId(udg_danwei2[1]) == 0x4E303043 ) ) then
call UnitAddAbility(udg_danwei2[1], 0x41305030)
call UnitRemoveAbility(udg_danwei2[1], 0x41305030)
else
endif
set udg_danwei2[1]=null
set udg_fuhuo[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )]=null
call DestroyTimerDialog(udg_fhck[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )])
call DestroyTimerDialog(udg_fhck2[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )])
call DestroyTimerDialog(udg_fhck3[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )])
else
call IssueImmediateOrderById(udg_danwei2[0], 851972)
if ( ( udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )] != null ) ) then
call DisplayTextToPlayer(s__baka_SPlayer(( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) - 1), 0, 0, "TRIGSTR_1059")
else
call DisplayTextToPlayer(s__baka_SPlayer(( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) - 1), 0, 0, "TRIGSTR_1038")
endif
if ( ( GetUnitAbilityLevel(udg_danwei2[0], 0x4130424A) == 1 ) ) then
call SetPlayerStateBJ(GetOwningPlayer(udg_danwei2[0]), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(udg_danwei2[0]), PLAYER_STATE_RESOURCE_GOLD) + 1000 ))
else
if ( ( GetUnitAbilityLevel(udg_danwei2[0], 0x4130424A) == 2 ) ) then
call SetPlayerStateBJ(GetOwningPlayer(udg_danwei2[0]), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(udg_danwei2[0]), PLAYER_STATE_RESOURCE_GOLD) + 1500 ))
else
if ( ( GetUnitAbilityLevel(udg_danwei2[0], 0x4130424A) == 3 ) ) then
call SetPlayerStateBJ(GetOwningPlayer(udg_danwei2[0]), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(udg_danwei2[0]), PLAYER_STATE_RESOURCE_GOLD) + 2000 ))
else
if ( ( GetUnitAbilityLevel(udg_danwei2[0], 0x4130424A) == 4 ) ) then
call SetPlayerStateBJ(GetOwningPlayer(udg_danwei2[0]), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(udg_danwei2[0]), PLAYER_STATE_RESOURCE_GOLD) + 2500 ))
else
if ( ( GetUnitAbilityLevel(udg_danwei2[0], 0x4130424A) == 5 ) ) then
call SetPlayerStateBJ(GetOwningPlayer(udg_danwei2[0]), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(udg_danwei2[0]), PLAYER_STATE_RESOURCE_GOLD) + 3000 ))
else
if ( ( GetUnitAbilityLevel(udg_danwei2[0], 0x4130424A) == 6 ) ) then
call SetPlayerStateBJ(GetOwningPlayer(udg_danwei2[0]), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(udg_danwei2[0]), PLAYER_STATE_RESOURCE_GOLD) + 1500 ))
else
if ( ( GetUnitAbilityLevel(udg_danwei2[0], 0x4130424A) == 7 ) ) then
call SetPlayerStateBJ(GetOwningPlayer(udg_danwei2[0]), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(udg_danwei2[0]), PLAYER_STATE_RESOURCE_GOLD) + 2500 ))
else
if ( ( GetUnitAbilityLevel(udg_danwei2[0], 0x4130424A) == 8 ) ) then
call SetPlayerStateBJ(GetOwningPlayer(udg_danwei2[0]), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(udg_danwei2[0]), PLAYER_STATE_RESOURCE_GOLD) + 3500 ))
else
if ( ( GetUnitAbilityLevel(udg_danwei2[0], 0x4130424A) == 9 ) ) then
call SetPlayerStateBJ(GetOwningPlayer(udg_danwei2[0]), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(udg_danwei2[0]), PLAYER_STATE_RESOURCE_GOLD) + 5000 ))
else
if ( ( GetUnitAbilityLevel(udg_danwei2[0], 0x4130424A) == 10 ) ) then
call SetPlayerStateBJ(GetOwningPlayer(udg_danwei2[0]), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(udg_danwei2[0]), PLAYER_STATE_RESOURCE_GOLD) + 7000 ))
else
if ( ( GetUnitAbilityLevel(udg_danwei2[0], 0x4130424A) == 11 ) ) then
call SetPlayerStateBJ(GetOwningPlayer(udg_danwei2[0]), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(udg_danwei2[0]), PLAYER_STATE_RESOURCE_GOLD) + 10000 ))
else
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
else
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_SmD_fuhuo takes nothing returns nothing
set gg_trg_SmD_fuhuo=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_SmD_fuhuo, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_SmD_fuhuo, Condition(function Trig_SmD_fuhuoConditions))
call TriggerAddAction(gg_trg_SmD_fuhuo, function Trig_SmD_fuhuoActions)
endfunction
function Trig_SmD_dengtaConditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41304C58 ) )
endfunction
function Trig_SmD_dengtaActions takes nothing returns nothing
set udg_danwei2[0]=GetSpellAbilityUnit()
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) <= 5 ) ) then
if ( ( ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(gg_unit_n00F_0045)) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(gg_unit_n00F_0045)) + 1 ) <= 5 ) ) or ( ( s__baka_SGetPlayerId(GetOwningPlayer(gg_unit_n00F_0045)) + 1 ) == 11 ) ) ) then
call DisplayTextToPlayer(s__baka_SPlayer(( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) - 1), 0, 0, "TRIGSTR_6521")
call SetPlayerStateBJ(GetOwningPlayer(udg_danwei2[0]), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(udg_danwei2[0]), PLAYER_STATE_RESOURCE_GOLD) + 2000 ))
else
call QuestMessageBJ(GetPlayersAll(), bj_QUESTMESSAGE_UPDATED, "TRIGSTR_6523")
call SetUnitOwner(gg_unit_n00F_0045, GetOwningPlayer(udg_danwei2[0]), false)
call SetUnitOwner(gg_unit_n018_0117, GetOwningPlayer(udg_danwei2[0]), true)
set udg_dian2[0]=GetUnitLoc(gg_unit_n00F_0045)
set udg_wanjiazu[0]=CreateForce()
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call ForceAddPlayer(udg_wanjiazu[0], s__baka_SPlayer(bj_forLoopAIndex - 1))
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call PingMinimapLocForForceEx(udg_wanjiazu[0], udg_dian2[0], 3.00, bj_MINIMAPPINGSTYLE_SIMPLE, 100, 100, 0.00)
call DestroyForce(udg_wanjiazu[0])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl", udg_dian2[0]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Items\\AIda\\AIdaCaster.mdl", udg_dian2[0]))
call RemoveLocation(udg_dian2[0])
endif
else
if ( ( ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(gg_unit_n00F_0044)) + 1 ) >= 6 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(gg_unit_n00F_0044)) + 1 ) <= 10 ) ) or ( ( s__baka_SGetPlayerId(GetOwningPlayer(gg_unit_n00F_0044)) + 1 ) == 12 ) ) ) then
call DisplayTextToPlayer(s__baka_SPlayer(( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) - 1), 0, 0, "TRIGSTR_6524")
call SetPlayerStateBJ(GetOwningPlayer(udg_danwei2[0]), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(udg_danwei2[0]), PLAYER_STATE_RESOURCE_GOLD) + 2000 ))
else
call QuestMessageBJ(GetPlayersAll(), bj_QUESTMESSAGE_UPDATED, "TRIGSTR_6525")
call SetUnitOwner(gg_unit_n00F_0044, GetOwningPlayer(udg_danwei2[0]), false)
call SetUnitOwner(gg_unit_n018_0103, GetOwningPlayer(udg_danwei2[0]), true)
set udg_dian2[0]=GetUnitLoc(gg_unit_n00F_0044)
set udg_wanjiazu[0]=CreateForce()
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call ForceAddPlayer(udg_wanjiazu[0], s__baka_SPlayer(bj_forLoopAIndex - 1))
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call PingMinimapLocForForceEx(udg_wanjiazu[0], udg_dian2[0], 3.00, bj_MINIMAPPINGSTYLE_SIMPLE, 100, 100, 0.00)
call DestroyForce(udg_wanjiazu[0])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl", udg_dian2[0]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Items\\AIda\\AIdaCaster.mdl", udg_dian2[0]))
call RemoveLocation(udg_dian2[0])
endif
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_SmD_dengta takes nothing returns nothing
set gg_trg_SmD_dengta=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_SmD_dengta, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_SmD_dengta, Condition(function Trig_SmD_dengtaConditions))
call TriggerAddAction(gg_trg_SmD_dengta, function Trig_SmD_dengtaActions)
endfunction
function Trig_SmD_xinshiConditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41305145 ) )
endfunction
function Trig_SmD_xinshiFunc002Func003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( ( GetUnitTypeId(udg_danwei2[1]) == 0x6E303038 ) or ( GetUnitTypeId(udg_danwei2[1]) == 0x6E303039 ) ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( GetUnitUserData(udg_danwei2[1]) == ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei[185])) + 1 ) ) ) then
set udg_zhengshuex[0]=1
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_SmD_xinshiActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei[185]=GetTriggerUnit()
if ( ( udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(GetTriggerUnit())) + 1 )] != null ) ) then
set udg_zhengshuex[0]=0
set udg_xuanqu=YDWEGetUnitsInRectAllNull(GetPlayableMapRect())
call ForGroupBJ(udg_xuanqu, function Trig_SmD_xinshiFunc002Func003A)
call DestroyGroup(udg_xuanqu)
if ( ( udg_zhengshuex[0] == 0 ) ) then
set udg_dian[242]=GetUnitLoc(udg_danwei[185])
set udg_dian[243]=PolarProjectionBJ(udg_dian[242], 75.00, 90.00)
set udg_danwei[328]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[185]), 0x6E303038, udg_dian[243], 0)
call PlaySoundOnUnitBJ(gg_snd_GoblinSapperReady1, 100, udg_danwei[328])
call SelectUnitForPlayerSingle(udg_danwei[328], GetOwningPlayer(GetTriggerUnit()))
call SetUnitUserData(udg_danwei[328], ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei[185])) + 1 ))
call GroupAddUnit(udg_danweizu2[293], udg_danwei[328])
call SetUnitAnimation(udg_danwei[328], "birth")
call RemoveLocation(udg_dian[242])
call RemoveLocation(udg_dian[243])
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, 10.00, "TRIGSTR_2099")
call SetPlayerStateBJ(GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_GOLD) + 300 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, 10.00, "TRIGSTR_2328")
call SetPlayerStateBJ(GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_GOLD) + 300 ))
endif
set udg_danwei[185]=null
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_SmD_xinshi takes nothing returns nothing
set gg_trg_SmD_xinshi=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_SmD_xinshi, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_SmD_xinshi, Condition(function Trig_SmD_xinshiConditions))
call TriggerAddAction(gg_trg_SmD_xinshi, function Trig_SmD_xinshiActions)
endfunction
function Trig_maihuoConditions takes nothing returns boolean
return ( ( udg_Points == - 1 ) and ( udg_zhengshu2[181] != 2 ) )
endfunction
function Trig_maihuoActions takes nothing returns nothing
set udg_zhengshu2[179]=( udg_zhengshu2[179] + 1 )
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call SetUnitAbilityLevel(udg_SmD[bj_forLoopAIndex], 0x4130424A, udg_zhengshu2[179])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call PlaySoundBJ(gg_snd_QuestLog)
if ( ( udg_zhengshu2[179] == 7 ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 20.00, "TRIGSTR_1298")
else
endif
if ( ( udg_zhengshu2[179] == 8 ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 20.00, "TRIGSTR_285")
else
endif
if ( ( udg_zhengshu2[179] == 9 ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 20.00, "TRIGSTR_1310")
else
endif
if ( ( udg_zhengshu2[179] == 10 ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 20.00, "TRIGSTR_1364")
else
endif
if ( ( udg_zhengshu2[179] == 11 ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 20.00, "TRIGSTR_1365")
else
endif
if ( ( udg_zhengshu2[179] < 11 ) ) then
call StartTimerBJ(udg_times[179], false, 600.00)
else
endif
endfunction
function InitTrig_maihuo takes nothing returns nothing
set gg_trg_maihuo=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_maihuo, udg_times[179])
call TriggerAddCondition(gg_trg_maihuo, Condition(function Trig_maihuoConditions))
call TriggerAddAction(gg_trg_maihuo, function Trig_maihuoActions)
endfunction
function Trig_shijiaoConditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41304332 ) )
endfunction
function Trig_shijiaoActions takes nothing returns nothing
set udg_danwei2[0]=GetSpellAbilityUnit()
if ( ( GetUnitAbilityLevel(udg_danwei2[0], 0x41304333) > 1 ) ) then
call DecUnitAbilityLevel(udg_danwei2[0], 0x41304333)
call DecUnitAbilityLevel(udg_danwei2[0], 0x41304332)
call SetCameraFieldForPlayer(GetOwningPlayer(udg_danwei2[0]), CAMERA_FIELD_FIELD_OF_VIEW, ( 40.00 + ( 10.00 * I2R(GetUnitAbilityLevel(udg_danwei2[0], 0x41304333)) ) ), 0.50)
else
call IssueImmediateOrderById(udg_danwei2[0], 851972)
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_shijiao takes nothing returns nothing
set gg_trg_shijiao=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_shijiao, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_shijiao, Condition(function Trig_shijiaoConditions))
call TriggerAddAction(gg_trg_shijiao, function Trig_shijiaoActions)
endfunction
function Trig_shijiao2Conditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41304333 ) )
endfunction
function Trig_shijiao2Actions takes nothing returns nothing
set udg_danwei2[0]=GetSpellAbilityUnit()
if ( ( GetUnitAbilityLevel(udg_danwei2[0], 0x41304333) < 6 ) ) then
call IncUnitAbilityLevel(udg_danwei2[0], 0x41304333)
call IncUnitAbilityLevel(udg_danwei2[0], 0x41304332)
call SetCameraFieldForPlayer(GetOwningPlayer(udg_danwei2[0]), CAMERA_FIELD_FIELD_OF_VIEW, ( 40.00 + ( 10.00 * I2R(GetUnitAbilityLevel(udg_danwei2[0], 0x41304333)) ) ), 0.50)
else
call IssueImmediateOrderById(udg_danwei2[0], 851972)
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_shijiao2 takes nothing returns nothing
set gg_trg_shijiao2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_shijiao2, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_shijiao2, Condition(function Trig_shijiao2Conditions))
call TriggerAddAction(gg_trg_shijiao2, function Trig_shijiao2Actions)
endfunction
function Trig_shijiao_timeActions takes nothing returns nothing
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ( ( udg_player[bj_forLoopAIndex] == null ) ) then
call SetCameraFieldForPlayer(s__baka_SPlayer(bj_forLoopAIndex - 1), CAMERA_FIELD_FIELD_OF_VIEW, 85.00, 0.50)
else
call SetCameraFieldForPlayer(s__baka_SPlayer(bj_forLoopAIndex - 1), CAMERA_FIELD_FIELD_OF_VIEW, ( 40.00 + ( 10.00 * I2R(GetUnitAbilityLevel(udg_SmD[bj_forLoopAIndex], 0x41304333)) ) ), 0.50)
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call SetCameraFieldForPlayer(s__baka_SPlayer(10), CAMERA_FIELD_FIELD_OF_VIEW, 85.00, 0.50)
call SetCameraFieldForPlayer(s__baka_SPlayer(11), CAMERA_FIELD_FIELD_OF_VIEW, 85.00, 0.50)
endfunction
function InitTrig_shijiao_time takes nothing returns nothing
set gg_trg_shijiao_time=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_shijiao_time, 0.30)
call TriggerAddAction(gg_trg_shijiao_time, function Trig_shijiao_timeActions)
endfunction
function Trig_money_balabalaActions takes nothing returns nothing
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=5
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ( ( GetPlayerController(s__baka_SPlayer(bj_forLoopAIndex - 1)) == MAP_CONTROL_USER ) and ( GetPlayerSlotState(s__baka_SPlayer(bj_forLoopAIndex - 1)) == PLAYER_SLOT_STATE_LEFT ) ) then
set udg_zhengshu2[296]=0
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=5
loop
exitwhen bj_forLoopBIndex > bj_forLoopBIndexEnd
if ( ( s__baka_SPlayer(bj_forLoopAIndex - 1) != s__baka_SPlayer(bj_forLoopBIndex - 1) ) and ( GetPlayerController(s__baka_SPlayer(bj_forLoopBIndex - 1)) == MAP_CONTROL_USER ) and ( GetPlayerSlotState(s__baka_SPlayer(bj_forLoopBIndex - 1)) == PLAYER_SLOT_STATE_PLAYING ) ) then
set udg_zhengshu2[296]=( udg_zhengshu2[296] + 1 )
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex + 1
endloop
if ( ( udg_zhengshu2[296] > 0 ) ) then
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=5
loop
exitwhen bj_forLoopBIndex > bj_forLoopBIndexEnd
if ( ( s__baka_SPlayer(bj_forLoopAIndex - 1) != s__baka_SPlayer(bj_forLoopBIndex - 1) ) and ( GetPlayerController(s__baka_SPlayer(bj_forLoopBIndex - 1)) == MAP_CONTROL_USER ) and ( GetPlayerSlotState(s__baka_SPlayer(bj_forLoopBIndex - 1)) == PLAYER_SLOT_STATE_PLAYING ) ) then
call AdjustPlayerStateBJ(( R2I(( I2R(GetPlayerState(s__baka_SPlayer(bj_forLoopAIndex - 1), PLAYER_STATE_RESOURCE_GOLD)) * 0.80 )) / udg_zhengshu2[296] ), s__baka_SPlayer(bj_forLoopBIndex - 1), PLAYER_STATE_RESOURCE_GOLD)
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex + 1
endloop
call SetPlayerStateBJ(s__baka_SPlayer(bj_forLoopAIndex - 1), PLAYER_STATE_RESOURCE_GOLD, 0)
else
endif
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
set bj_forLoopAIndex=6
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ( ( GetPlayerController(s__baka_SPlayer(bj_forLoopAIndex - 1)) == MAP_CONTROL_USER ) and ( GetPlayerSlotState(s__baka_SPlayer(bj_forLoopAIndex - 1)) == PLAYER_SLOT_STATE_LEFT ) ) then
set udg_zhengshu2[296]=0
set bj_forLoopBIndex=6
set bj_forLoopBIndexEnd=10
loop
exitwhen bj_forLoopBIndex > bj_forLoopBIndexEnd
if ( ( s__baka_SPlayer(bj_forLoopAIndex - 1) != s__baka_SPlayer(bj_forLoopBIndex - 1) ) and ( GetPlayerController(s__baka_SPlayer(bj_forLoopBIndex - 1)) == MAP_CONTROL_USER ) and ( GetPlayerSlotState(s__baka_SPlayer(bj_forLoopBIndex - 1)) == PLAYER_SLOT_STATE_PLAYING ) ) then
set udg_zhengshu2[296]=( udg_zhengshu2[296] + 1 )
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex + 1
endloop
if ( ( udg_zhengshu2[296] > 0 ) ) then
set bj_forLoopBIndex=6
set bj_forLoopBIndexEnd=10
loop
exitwhen bj_forLoopBIndex > bj_forLoopBIndexEnd
if ( ( s__baka_SPlayer(bj_forLoopAIndex - 1) != s__baka_SPlayer(bj_forLoopBIndex - 1) ) and ( GetPlayerController(s__baka_SPlayer(bj_forLoopBIndex - 1)) == MAP_CONTROL_USER ) and ( GetPlayerSlotState(s__baka_SPlayer(bj_forLoopBIndex - 1)) == PLAYER_SLOT_STATE_PLAYING ) ) then
call AdjustPlayerStateBJ(( R2I(( I2R(GetPlayerState(s__baka_SPlayer(bj_forLoopAIndex - 1), PLAYER_STATE_RESOURCE_GOLD)) * 0.80 )) / udg_zhengshu2[296] ), s__baka_SPlayer(bj_forLoopBIndex - 1), PLAYER_STATE_RESOURCE_GOLD)
else
endif
set bj_forLoopBIndex=bj_forLoopBIndex + 1
endloop
call SetPlayerStateBJ(s__baka_SPlayer(bj_forLoopAIndex - 1), PLAYER_STATE_RESOURCE_GOLD, 0)
else
endif
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
endfunction
function InitTrig_money_balabala takes nothing returns nothing
set gg_trg_money_balabala=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_money_balabala, 1.00)
call TriggerAddAction(gg_trg_money_balabala, function Trig_money_balabalaActions)
endfunction
function Trig_HeroSkillPointConditions takes nothing returns boolean
return ( ( GetHeroLevel(GetTriggerUnit()) > 18 ) and ( GetHeroLevel(GetTriggerUnit()) < 24 ) )
endfunction
function Trig_HeroSkillPointActions takes nothing returns nothing
call UnitModifySkillPoints(GetTriggerUnit(), - 1)
endfunction
function InitTrig_HeroSkillPoint takes nothing returns nothing
set gg_trg_HeroSkillPoint=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_HeroSkillPoint, EVENT_PLAYER_HERO_LEVEL)
call TriggerAddCondition(gg_trg_HeroSkillPoint, Condition(function Trig_HeroSkillPointConditions))
call TriggerAddAction(gg_trg_HeroSkillPoint, function Trig_HeroSkillPointActions)
endfunction
function Trig_StayHomeActions takes nothing returns nothing
if ( ( udg_GameStart == true ) ) then
call FlushChildHashtable(globalHashtable, GetHandleId(GetTriggeringTrigger()))
call DestroyTrigger(GetTriggeringTrigger())
else
if ( ( ( GetUnitTypeId(GetTriggerUnit()) == 0x6E303039 ) or ( GetUnitTypeId(GetTriggerUnit()) == 0x6E303038 ) ) ) then
call IssueImmediateOrderById(GetTriggerUnit(), 851972)
call s__Unit_Move(GetTriggerUnit() , GetUnitFacing(GetTriggerUnit()) , - 100.00)
call DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, 10.00, "TRIGSTR_8308")
else
endif
endif
endfunction
function InitTrig_StayHome takes nothing returns nothing
set gg_trg_StayHome=CreateTrigger()
call YDWETriggerRegisterLeaveRectSimpleNull(gg_trg_StayHome , gg_rct_jidi)
call YDWETriggerRegisterLeaveRectSimpleNull(gg_trg_StayHome , gg_rct_jidi_2)
call TriggerAddAction(gg_trg_StayHome, function Trig_StayHomeActions)
endfunction
function Trig_renyishanghaiConditions takes nothing returns boolean
return ( ( GetEventDamage() > 0.00 ) )
endfunction
function Trig_renyishanghaiFunc004Func006Func006A takes nothing returns nothing
if ( ( GetEnumUnit() != GetEventDamageSource() ) and ( IsUnitAlly(GetEnumUnit(), GetOwningPlayer(GetEventDamageSource())) == true ) ) then
if ( ( IsUnitType(GetEnumUnit(), UNIT_TYPE_HERO) == true ) ) then
if ( ( IsUnitType(GetEnumUnit(), UNIT_TYPE_DEAD) == false ) ) then
set udg_zhengshuex[11]=( udg_zhengshuex[11] + 1 )
else
endif
else
if ( ( ( GetOwningPlayer(GetEnumUnit()) == s__baka_SPlayer(10) ) or ( GetOwningPlayer(GetEnumUnit()) == s__baka_SPlayer(11) ) ) ) then
set udg_zhengshuex[12]=( udg_zhengshuex[12] + 1 )
else
endif
endif
else
endif
endfunction
function Trig_renyishanghaiFunc007Func004Func001Func003Func007T takes nothing returns nothing
if ( ( LoadInteger(YDHT, GetHandleId(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xDAA2C2DA)), 0x03383BCA) == 1 ) ) then
call SaveInteger(YDHT, GetHandleId(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xDAA2C2DA)), 0x03383BCA, 0)
call UnitDamageTarget(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x07D15ED5), LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xDAA2C2DA), 45.00, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
call UnitRemoveAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xDAA2C2DA), 0x41304E43)
call UnitRemoveAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xDAA2C2DA), 0x41304E42)
call UnitRemoveBuffBJ(0x42303341, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xDAA2C2DA))
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
endif
endfunction
function Trig_renyishanghaiFunc007Func004Func002Func003Func007T takes nothing returns nothing
if ( ( LoadInteger(YDHT, GetHandleId(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xDAA2C2DA)), 0x0E86BC06) > 0 ) ) then
call SaveInteger(YDHT, GetHandleId(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xDAA2C2DA)), 0x0E86BC06, ( LoadInteger(YDHT, GetHandleId(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xDAA2C2DA)), 0x0E86BC06) - 1 ))
call UnitDamageTarget(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x07D15ED5), LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xDAA2C2DA), 20.00, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
call UnitRemoveAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xDAA2C2DA), 0x41304E45)
call UnitRemoveAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xDAA2C2DA), 0x41304E44)
call UnitRemoveBuffBJ(0x42303342, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xDAA2C2DA))
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
endif
endfunction
function Trig_renyishanghaiFunc007Func004Func003Func003Func008T takes nothing returns nothing
if ( ( LoadInteger(YDHT, GetHandleId(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xDAA2C2DA)), 0x71BB96BD) == 1 ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl", LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xDAA2C2DA), "origin"))
call UnitDamageTarget(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x07D15ED5), LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xDAA2C2DA), 20.00, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call SaveInteger(YDHT, GetHandleId(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xDAA2C2DA)), 0x71BB96BD, 0)
else
call UnitRemoveAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xDAA2C2DA), 0x41304E46)
call UnitRemoveAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xDAA2C2DA), 0x41304E47)
call UnitRemoveBuffBJ(0x42303343, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xDAA2C2DA))
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
endif
endfunction
function Trig_renyishanghaiFunc007Func004Func006Func007T takes nothing returns nothing
if ( ( LoadInteger(YDHT, GetHandleId(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xDAA2C2DA)), 0x730DDB0B) == 1 ) ) then
call SaveInteger(YDHT, GetHandleId(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xDAA2C2DA)), 0x730DDB0B, 0)
call UnitDamageTarget(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x07D15ED5), LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xDAA2C2DA), 100.00, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
call UnitRemoveAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xDAA2C2DA), 0x41304E49)
call UnitRemoveAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xDAA2C2DA), 0x41304E48)
call UnitRemoveBuffBJ(0x42303344, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xDAA2C2DA))
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
endif
endfunction
function Trig_renyishanghaiFunc007Func005Func003Func007T takes nothing returns nothing
if ( ( LoadInteger(YDHT, GetHandleId(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xDAA2C2DA)), 0x0AB1D6D9) > 0 ) ) then
call SaveInteger(YDHT, GetHandleId(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xDAA2C2DA)), 0x0AB1D6D9, ( LoadInteger(YDHT, GetHandleId(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xDAA2C2DA)), 0x0AB1D6D9) - 1 ))
call UnitDamageTarget(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x07D15ED5), LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xDAA2C2DA), ( 5.00 + ( 15.00 * I2R(GetUnitAbilityLevel(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x07D15ED5), 0x41303549)) ) ), false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
call UnitRemoveAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xDAA2C2DA), 0x41304F47)
call UnitRemoveAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xDAA2C2DA), 0x41304F48)
call UnitRemoveBuffBJ(0x4230334B, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xDAA2C2DA))
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
endif
endfunction
function Trig_renyishanghaiFunc007Func007Func003Func005A takes nothing returns nothing
if ( ( GetEnumUnit() != GetTriggerUnit() ) and ( IsUnitType(GetEnumUnit(), UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(GetEnumUnit(), udg_danweizu2[369]) == false ) and ( IsUnitType(GetEnumUnit(), UNIT_TYPE_FLYING) == false ) and ( IsUnitType(GetEnumUnit(), UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(GetEnumUnit(), GetOwningPlayer(GetEventDamageSource())) == true ) ) then
call UnitDamageTarget(GetEventDamageSource(), GetEnumUnit(), ( ( I2R(GetHeroAgi(GetEventDamageSource(), true)) * 0.50 ) + ( GetEventDamage() * 0.50 ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
endfunction
function Trig_renyishanghaiFunc007Func010Func002Func011Func009A takes nothing returns nothing
if ( ( GetEnumUnit() != GetTriggerUnit() ) and ( IsUnitType(GetEnumUnit(), UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(GetEnumUnit(), UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(GetEnumUnit(), UNIT_TYPE_DEAD) == false ) and ( IsUnitInGroup(GetEnumUnit(), udg_Danweizu[161]) == false ) and ( IsUnitEnemy(GetEnumUnit(), GetOwningPlayer(GetEventDamageSource())) == true ) ) then
call UnitDamageTarget(GetEventDamageSource(), GetEnumUnit(), ( ( I2R(GetHeroAgi(GetEventDamageSource(), true)) * 0.80 ) + ( GetEventDamage() * 0.80 ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\GyroCopter\\GyroCopterImpact.mdl", GetEnumUnit(), "chest"))
call GroupAddUnit(udg_Danweizu[161], GetEnumUnit())
else
endif
endfunction
function Trig_renyishanghaiFunc007Func012Func005Func007T takes nothing returns nothing
call UnitRemoveAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xDAA2C2DA), 0x41304E4E)
call UnitRemoveAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xDAA2C2DA), 0x41304E4D)
call UnitRemoveBuffBJ(0x42303345, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xDAA2C2DA))
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
endfunction
function Trig_renyishanghaiFunc010Func005A takes nothing returns nothing
if ( ( GetEnumUnit() != GetTriggerUnit() ) and ( IsUnitType(GetEnumUnit(), UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(GetEnumUnit(), udg_danweizu2[369]) == false ) and ( IsUnitType(GetEnumUnit(), UNIT_TYPE_FLYING) == false ) and ( IsUnitType(GetEnumUnit(), UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(GetEnumUnit(), GetOwningPlayer(GetEventDamageSource())) == true ) ) then
call UnitDamageTarget(GetEventDamageSource(), GetEnumUnit(), ( GetEventDamage() * 0.50 ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_UNIVERSAL, WEAPON_TYPE_WHOKNOWS)
else
endif
endfunction
function Trig_renyishanghaiActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
local timer ydl_timer
local integer ydl_localvar_step=LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76)
set ydl_localvar_step=ydl_localvar_step + 3
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76, ydl_localvar_step)
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xECE825E7, ydl_localvar_step)
set udg_danwei[328]=GetEventDamageSource()
if ( ( IsUnitIllusionBJ(GetEventDamageSource()) == true ) and ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_STRUCTURE) == true ) and ( ( GetOwningPlayer(GetTriggerUnit()) == s__baka_SPlayer(10) ) or ( GetOwningPlayer(GetTriggerUnit()) == s__baka_SPlayer(11) ) ) ) then
call SetUnitLifeBJ(GetTriggerUnit(), ( GetUnitState(GetTriggerUnit(), UNIT_STATE_LIFE) + ( GetEventDamage() * 0.85 ) ))
else
endif
if ( ( IsUnitType(GetEventDamageSource(), UNIT_TYPE_HERO) == true ) and ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_STRUCTURE) == true ) and ( ( GetOwningPlayer(GetTriggerUnit()) == s__baka_SPlayer(10) ) or ( GetOwningPlayer(GetTriggerUnit()) == s__baka_SPlayer(11) ) ) ) then
set udg_zhengshuex[11]=0
set udg_zhengshuex[12]=0
set udg_jubuzs1=1
loop
exitwhen udg_jubuzs1 > 5
if ( ( udg_player[udg_jubuzs1] != null ) and ( IsUnitType(udg_player[udg_jubuzs1], UNIT_TYPE_DEAD) == false ) ) then
set udg_zhengshuex[11]=( udg_zhengshuex[11] + 1 )
else
endif
set udg_jubuzs1=udg_jubuzs1 + 1
endloop
set udg_jubuzs1=6
loop
exitwhen udg_jubuzs1 > 10
if ( ( udg_player[udg_jubuzs1] != null ) and ( IsUnitType(udg_player[udg_jubuzs1], UNIT_TYPE_DEAD) == false ) ) then
set udg_zhengshuex[12]=( udg_zhengshuex[12] + 1 )
else
endif
set udg_jubuzs1=udg_jubuzs1 + 1
endloop
if ( ( ( ( udg_zhengshuex[12] >= udg_zhengshuex[11] ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1 ) <= 5 ) ) or ( ( udg_zhengshuex[11] >= udg_zhengshuex[12] ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1 ) >= 6 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1 ) <= 10 ) ) ) ) then
set udg_zhengshuex[11]=0
set udg_zhengshuex[12]=0
set udg_Dian[75]=GetUnitLoc(GetTriggerUnit())
set udg_Danweizu[76]=YDWEGetUnitsInRangeOfLocAllNull(700.00 , udg_Dian[75])
call ForGroupBJ(udg_Danweizu[76], function Trig_renyishanghaiFunc004Func006Func006A)
call DestroyGroup(udg_Danweizu[76])
if ( ( udg_zhengshuex[11] == 0 ) and ( udg_zhengshuex[12] == 0 ) ) then
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Items\\AIlm\\AIlmTarget.mdl", udg_Dian[75]))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\LightningBolt\\LightningBoltMissile.mdl", GetEventDamageSource(), "origin"))
call SetUnitLifeBJ(GetTriggerUnit(), ( GetUnitState(GetTriggerUnit(), UNIT_STATE_LIFE) + ( GetEventDamage() * 0.25 ) ))
call UnitDamageTarget(GetTriggerUnit(), GetEventDamageSource(), ( GetEventDamage() * 0.25 ), true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_UNIVERSAL, WEAPON_TYPE_WHOKNOWS)
else
endif
call RemoveLocation(udg_Dian[75])
else
endif
else
endif
if ( ( GetTriggerUnit() == udg_danwei[242] ) and ( GetEventDamage() >= GetUnitState(GetTriggerUnit(), UNIT_STATE_LIFE) ) ) then
call UnitDamageTarget(GetEventDamageSource(), udg_danwei[240], GetEventDamage(), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
else
endif
if ( ( IsUnitInGroup(udg_danwei[328], udg_attack) == true ) and ( GetUnitUserData(udg_danwei[328]) < 10 ) ) then
call s__Unit_PauseUnitMU(udg_danwei[328] , true , "彩焰射击")
call SetUnitUserData(udg_danwei[328], 10)
if ( ( GetUnitTypeId(udg_danwei[328]) == 0x4830304D ) and ( GetUnitState(GetTriggerUnit(), UNIT_STATE_MAX_MANA) > 0.00 ) and ( GetUnitAbilityLevel(GetEventDamageSource(), 0x41304A54) != 1 ) ) then
call UnitDamageTarget(GetEventDamageSource(), GetTriggerUnit(), ( I2R(GetHeroInt(GetEventDamageSource(), true)) * 0.30 ), true, false, ATTACK_TYPE_MAGIC, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\BlackKeeperMissile\\BlackKeeperMissile.mdl", GetTriggerUnit(), "chest"))
else
endif
else
endif
if ( ( ( UnitHasBuffBJ(GetTriggerUnit(), 0x42303339) == true ) or ( GetUnitAbilityLevel(GetTriggerUnit(), 0x41304F42) == 1 ) ) ) then
call UnitRemoveBuffBJ(0x42303339, GetTriggerUnit())
call UnitRemoveAbility(GetTriggerUnit(), 0x41304F42)
if ( ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_STRUCTURE) == false ) and ( ( YDWEUnitHasItemOfTypeBJNull(GetEventDamageSource() , 0x72617466) == true ) or ( YDWEUnitHasItemOfTypeBJNull(GetEventDamageSource() , 0x49303453) == true ) ) ) then
if ( ( UnitHasBuffBJ(GetTriggerUnit(), 0x42303344) == false ) ) then
call UnitDamageTarget(GetEventDamageSource(), GetTriggerUnit(), 100.00, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call UnitAddAbility(GetTriggerUnit(), 0x41304E49)
call UnitAddAbility(GetTriggerUnit(), 0x41304E48)
call SaveInteger(YDHT, GetHandleId(GetTriggerUnit()), 0x730DDB0B, 0)
set ydl_timer=CreateTimer()
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x07D15ED5, GetEventDamageSource())
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0xDAA2C2DA, GetTriggerUnit())
call TimerStart(ydl_timer, 1.00, true, function Trig_renyishanghaiFunc007Func004Func006Func007T)
else
call SaveInteger(YDHT, GetHandleId(GetTriggerUnit()), 0x730DDB0B, 1)
endif
else
if ( ( GetUnitAbilityLevel(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1 )], 0x41304F32) == 1 ) and ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_STRUCTURE) == false ) ) then
if ( ( UnitHasBuffBJ(GetTriggerUnit(), 0x42303341) == false ) ) then
call UnitDamageTarget(GetEventDamageSource(), GetTriggerUnit(), 45.00, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call UnitAddAbility(GetTriggerUnit(), 0x41304E43)
call UnitAddAbility(GetTriggerUnit(), 0x41304E42)
call SaveInteger(YDHT, GetHandleId(GetTriggerUnit()), 0x03383BCA, 0)
set ydl_timer=CreateTimer()
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x07D15ED5, GetEventDamageSource())
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0xDAA2C2DA, GetTriggerUnit())
call TimerStart(ydl_timer, 1.00, true, function Trig_renyishanghaiFunc007Func004Func001Func003Func007T)
else
call SaveInteger(YDHT, GetHandleId(GetTriggerUnit()), 0x03383BCA, 1)
endif
else
endif
if ( ( GetUnitAbilityLevel(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1 )], 0x41304F31) == 1 ) and ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_STRUCTURE) == false ) ) then
if ( ( UnitHasBuffBJ(GetTriggerUnit(), 0x42303342) == false ) ) then
call UnitAddAbility(GetTriggerUnit(), 0x41304E45)
call UnitAddAbility(GetTriggerUnit(), 0x41304E44)
call SaveInteger(YDHT, GetHandleId(GetTriggerUnit()), 0x0E86BC06, 4)
set ydl_timer=CreateTimer()
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x07D15ED5, GetEventDamageSource())
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0xDAA2C2DA, GetTriggerUnit())
call TimerStart(ydl_timer, 1.00, true, function Trig_renyishanghaiFunc007Func004Func002Func003Func007T)
else
call UnitDamageTarget(GetEventDamageSource(), GetTriggerUnit(), 20.00, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call SaveInteger(YDHT, GetHandleId(GetTriggerUnit()), 0x0E86BC06, 4)
endif
else
endif
if ( ( GetUnitAbilityLevel(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1 )], 0x41304F33) == 1 ) and ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_STRUCTURE) == false ) ) then
if ( ( UnitHasBuffBJ(GetTriggerUnit(), 0x42303343) == false ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl", GetTriggerUnit(), "origin"))
call UnitDamageTarget(GetEventDamageSource(), GetTriggerUnit(), 20.00, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call UnitAddAbility(GetTriggerUnit(), 0x41304E46)
call UnitAddAbility(GetTriggerUnit(), 0x41304E47)
call SaveInteger(YDHT, GetHandleId(GetTriggerUnit()), 0x71BB96BD, 0)
set ydl_timer=CreateTimer()
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x07D15ED5, GetEventDamageSource())
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0xDAA2C2DA, GetTriggerUnit())
call TimerStart(ydl_timer, 1.00, true, function Trig_renyishanghaiFunc007Func004Func003Func003Func008T)
else
call SaveInteger(YDHT, GetHandleId(GetTriggerUnit()), 0x71BB96BD, 1)
endif
else
endif
endif
if ( ( GetUnitAbilityLevel(GetEventDamageSource(), 0x41303549) >= 1 ) and ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_STRUCTURE) == false ) ) then
if ( ( UnitHasBuffBJ(GetTriggerUnit(), 0x4230334B) == false ) ) then
call UnitDamageTarget(GetEventDamageSource(), GetTriggerUnit(), ( 5.00 + ( 15.00 * I2R(GetUnitAbilityLevel(GetEventDamageSource(), 0x41303549)) ) ), false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call UnitAddAbility(GetTriggerUnit(), 0x41304F47)
call UnitAddAbility(GetTriggerUnit(), 0x41304F48)
call SaveInteger(YDHT, GetHandleId(GetTriggerUnit()), 0x0AB1D6D9, 2)
set ydl_timer=CreateTimer()
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x07D15ED5, GetEventDamageSource())
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0xDAA2C2DA, GetTriggerUnit())
call TimerStart(ydl_timer, 1.00, true, function Trig_renyishanghaiFunc007Func005Func003Func007T)
else
call SaveInteger(YDHT, GetHandleId(GetTriggerUnit()), 0x0AB1D6D9, 3)
endif
else
endif
if ( ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetEventDamageSource() , 0x49303053)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetEventDamageSource() , 0x49303051)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetEventDamageSource() , 0x49303232)) == true ) ) and ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_STRUCTURE) == false ) ) then
if ( ( GetUnitState(GetTriggerUnit(), UNIT_STATE_MAX_MANA) > 0.00 ) ) then
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetEventDamageSource() , 0x49303232)) == true ) ) then
call UnitDamageTarget(GetEventDamageSource(), GetTriggerUnit(), 50.00, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call SetUnitManaBJ(GetTriggerUnit(), ( GetUnitState(GetTriggerUnit(), UNIT_STATE_MANA) - 50.00 ))
else
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetEventDamageSource() , 0x49303051)) == true ) ) then
call UnitDamageTarget(GetEventDamageSource(), GetTriggerUnit(), 30.00, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call SetUnitManaBJ(GetTriggerUnit(), ( GetUnitState(GetTriggerUnit(), UNIT_STATE_MANA) - 30.00 ))
else
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetEventDamageSource() , 0x49303053)) == true ) ) then
call UnitDamageTarget(GetEventDamageSource(), GetTriggerUnit(), 20.00, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call SetUnitManaBJ(GetTriggerUnit(), ( GetUnitState(GetTriggerUnit(), UNIT_STATE_MANA) - 20.00 ))
else
endif
endif
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Feedback\\ArcaneTowerAttack.mdl", GetTriggerUnit(), "origin"))
else
endif
else
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetEventDamageSource() , 0x4930324C)) == true ) and ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_STRUCTURE) == false ) ) then
if ( ( GetRandomInt(1, 100) <= 15 ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\ChimaeraLightningMissile\\ChimaeraLightningMissile.mdl", GetTriggerUnit(), "origin"))
call UnitDamageTarget(GetEventDamageSource(), GetTriggerUnit(), ( I2R(GetHeroAgi(GetEventDamageSource(), true)) * 1 ), false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
set udg_Dian[75]=GetUnitLoc(GetTriggerUnit())
set udg_Danweizu[76]=YDWEGetUnitsInRangeOfLocAllNull(400.00 , udg_Dian[75])
call ForGroupBJ(udg_Danweizu[76], function Trig_renyishanghaiFunc007Func007Func003Func005A)
call DestroyGroup(udg_Danweizu[76])
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\A6_zisepili.mdx", udg_Dian[75]))
set udg_jubuzs1=1
loop
exitwhen udg_jubuzs1 > 9
set udg_Dian[76]=PolarProjectionBJ(udg_Dian[75], 100.00, ( 40.00 * I2R(udg_jubuzs1) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", udg_Dian[76]))
call RemoveLocation(udg_Dian[76])
set udg_jubuzs1=udg_jubuzs1 + 1
endloop
call RemoveLocation(udg_Dian[75])
else
endif
else
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetEventDamageSource() , 0x4930324D)) == true ) and ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_STRUCTURE) == false ) ) then
if ( ( GetRandomInt(1, 100) <= 15 ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\WingedSerpentMissile\\WingedSerpentMissile.mdl", GetTriggerUnit(), "chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\GreenDragonMissile\\GreenDragonMissile.mdl", GetTriggerUnit(), "chest"))
call UnitDamageTarget(GetEventDamageSource(), GetTriggerUnit(), ( I2R(GetHeroAgi(GetEventDamageSource(), true)) * 0.50 ), false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
else
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetEventDamageSource() , 0x49303335)) == true ) and ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_STRUCTURE) == false ) ) then
if ( ( ( ( GetUnitTypeId(GetEventDamageSource()) != 0x48303044 ) and ( GetUnitTypeId(GetEventDamageSource()) != 0x4E303139 ) and ( GetUnitTypeId(GetEventDamageSource()) != 0x4830304D ) and ( GetRandomInt(1, 100) <= 15 ) ) or ( ( ( GetUnitTypeId(GetEventDamageSource()) == 0x48303044 ) or ( GetUnitTypeId(GetEventDamageSource()) == 0x4E303139 ) or ( GetUnitTypeId(GetEventDamageSource()) == 0x4830304D ) ) and ( GetRandomInt(1, 100) <= 5 ) ) ) ) then
set udg_Dian[75]=GetUnitLoc(GetEventDamageSource())
set udg_Dian[76]=GetUnitLoc(GetTriggerUnit())
set udg_Danwei[75]=CreateUnitAtLoc(GetOwningPlayer(GetEventDamageSource()), 0x65303755, udg_Dian[75], AngleBetweenPoints(udg_Dian[75], udg_Dian[76]))
call SetUnitUserData(udg_Danwei[75], R2I(( ( DistanceBetweenPoints(udg_Dian[75], udg_Dian[76]) / 60.00 ) + 1 )))
call GroupAddUnit(udg_DAZE[0], udg_Danwei[75])
call GroupAddUnit(udg_DAZE[1], udg_Danwei[75])
call GroupAddUnit(udg_Danweizu[143], udg_Danwei[75])
set udg_Danwei[75]=null
call StopSoundBJ(gg_snd_PhaseShift1, false)
call PlaySoundOnUnitBJ(gg_snd_PhaseShift1, 100, GetTriggerUnit())
call RemoveLocation(udg_Dian[75])
call RemoveLocation(udg_Dian[76])
else
endif
else
endif
if ( ( GetUnitTypeId(GetEventDamageSource()) == 0x4830304E ) ) then
if ( ( GetUnitAbilityLevel(GetEventDamageSource(), 0x41304F4D) >= 1 ) ) then
call UnitRemoveAbility(GetEventDamageSource(), 0x41304F4D)
call UnitRemoveAbility(GetEventDamageSource(), 0x41304F56)
call StopSoundBJ(gg_snd_RIFLE3HD, false)
call PlaySoundOnUnitBJ(gg_snd_RIFLE3HD, 100, GetEventDamageSource())
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\GyroCopter\\GyroCopterImpact.mdl", GetTriggerUnit(), "chest"))
if ( ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_STRUCTURE) == false ) ) then
call UnitDamageTarget(GetEventDamageSource(), GetTriggerUnit(), ( I2R(GetHeroAgi(GetEventDamageSource(), true)) * 1 ), false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
call UnitDamageTarget(GetEventDamageSource(), GetTriggerUnit(), ( I2R(GetHeroAgi(GetEventDamageSource(), true)) * 0.50 ), false, false, ATTACK_TYPE_MAGIC, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
endif
set udg_Dian[75]=GetUnitLoc(GetTriggerUnit())
set udg_Dian[76]=GetUnitLoc(GetEventDamageSource())
call GroupClear(udg_Danweizu[161])
set udg_jubuzs1=1
loop
exitwhen udg_jubuzs1 > 4
set udg_Dian[161]=PolarProjectionBJ(udg_Dian[75], ( 40.00 * I2R(udg_jubuzs1) ), AngleBetweenPoints(udg_Dian[76], udg_Dian[75]))
call CreateNUnitsAtLoc(1, 0x65303831, GetOwningPlayer(GetEventDamageSource()), udg_Dian[161], AngleBetweenPoints(udg_Dian[76], udg_Dian[75]))
call UnitApplyTimedLife(bj_lastCreatedUnit, 0x42487765, 2.00)
call SetUnitScale(bj_lastCreatedUnit, ( 0.40 + ( 0.40 * I2R(udg_jubuzs1) ) ), ( 0.40 + ( 0.40 * I2R(udg_jubuzs1) ) ), ( 0.40 + ( 0.40 * I2R(udg_jubuzs1) ) ))
call SetUnitTimeScale(bj_lastCreatedUnit, ( 3.00 - ( 0.50 * I2R(udg_jubuzs1) ) ))
call RemoveLocation(udg_Dian[161])
set udg_Dian[161]=PolarProjectionBJ(udg_Dian[75], ( 40.00 + ( 40.00 * I2R(udg_jubuzs1) ) ), AngleBetweenPoints(udg_Dian[76], udg_Dian[75]))
set udg_Danweizu[76]=YDWEGetUnitsInRangeOfLocAllNull(( 100.00 + ( 25.00 * I2R(udg_jubuzs1) ) ) , udg_Dian[161])
call ForGroupBJ(udg_Danweizu[76], function Trig_renyishanghaiFunc007Func010Func002Func011Func009A)
call DestroyGroup(udg_Danweizu[76])
call RemoveLocation(udg_Dian[161])
set udg_jubuzs1=udg_jubuzs1 + 1
endloop
call RemoveLocation(udg_Dian[75])
call RemoveLocation(udg_Dian[76])
else
endif
else
endif
if ( ( GetUnitAbilityLevel(GetEventDamageSource(), 0x41304A54) == 1 ) ) then
if ( ( GetUnitTypeId(GetEventDamageSource()) != 0x48303042 ) and ( GetUnitTypeId(GetEventDamageSource()) != 0x4E303139 ) and ( GetUnitTypeId(GetEventDamageSource()) != 0x4830304D ) ) then
call StartTimerBJ(udg_jishiqi[( 159 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1 ) )], false, 1.00)
else
endif
call UnitRemoveAbility(GetEventDamageSource(), 0x41304A54)
if ( ( ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_STRUCTURE) == true ) or ( GetUnitTypeId(GetTriggerUnit()) == 0x686D7474 ) ) ) then
set udg_zhengshuex[0]=R2I(( I2R(GetHeroInt(GetEventDamageSource(), true)) * GetRandomReal(0.20, 0.30) ))
else
set udg_zhengshuex[0]=R2I(( I2R(GetHeroInt(GetEventDamageSource(), true)) * GetRandomReal(0.40, 0.60) ))
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SpiritOfVengeanceMissile\\SpiritOfVengeanceMissile.mdl", GetTriggerUnit(), "chest"))
if ( ( GetHeroInt(GetEventDamageSource(), true) > GetHeroStr(GetEventDamageSource(), true) ) and ( GetHeroInt(GetEventDamageSource(), true) > GetHeroAgi(GetEventDamageSource(), true) ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\DragonHawkMissile\\DragonHawkMissile.mdl", GetTriggerUnit(), "chest"))
call UnitDamageTarget(GetEventDamageSource(), GetTriggerUnit(), I2R(udg_zhengshuex[0]), true, true, ATTACK_TYPE_MAGIC, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
call UnitDamageTarget(GetEventDamageSource(), GetTriggerUnit(), ( I2R(udg_zhengshuex[0]) * 0.50 ), true, true, ATTACK_TYPE_MAGIC, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
endif
else
endif
if ( ( GetUnitAbilityLevel(GetEventDamageSource(), 0x41304E4C) == 1 ) and ( UnitHasBuffBJ(GetTriggerUnit(), 0x42303345) == false ) and ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_STRUCTURE) == false ) ) then
call UnitRemoveAbility(GetEventDamageSource(), 0x41304E4C)
if ( ( GetUnitState(GetEventDamageSource(), UNIT_STATE_MANA) >= 200.00 ) ) then
call SetUnitManaBJ(GetEventDamageSource(), ( GetUnitState(GetEventDamageSource(), UNIT_STATE_MANA) - 200.00 ))
call UnitDamageTarget(GetEventDamageSource(), GetTriggerUnit(), 200.00, false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\lianzhanbo.mdx", GetTriggerUnit(), "chest"))
call UnitAddAbility(GetTriggerUnit(), 0x41304E4E)
call UnitAddAbility(GetTriggerUnit(), 0x41304E4D)
set ydl_timer=CreateTimer()
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0xDAA2C2DA, GetTriggerUnit())
call TimerStart(ydl_timer, 2.00, false, function Trig_renyishanghaiFunc007Func012Func005Func007T)
else
endif
else
endif
if ( ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_STRUCTURE) == false ) ) then
set udg_jubuss1=0.00
set udg_jubuzs1=( GetHeroAgi(GetEventDamageSource(), true) / 15 )
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetEventDamageSource() , 0x4930344A)) == true ) and ( GetRandomInt(1, 100) <= udg_jubuzs1 ) ) then
set udg_jubuss1=RMaxBJ(udg_jubuss1, 1.00)
else
endif
set udg_jubuzs1=15
if ( ( UnitHasBuffBJ(GetEventDamageSource(), 0x42303348) == true ) and ( GetRandomInt(1, 100) <= udg_jubuzs1 ) ) then
set udg_jubuss1=RMaxBJ(udg_jubuss1, 1.00)
else
endif
set udg_jubuzs1=0
set udg_jubuzs2=1
loop
exitwhen udg_jubuzs2 > 6
if ( ( ( GetItemTypeId(UnitItemInSlotBJ(GetEventDamageSource(), udg_jubuzs2)) == 0x7372746C ) or ( GetItemTypeId(UnitItemInSlotBJ(GetEventDamageSource(), udg_jubuzs2)) == 0x73726264 ) ) ) then
set udg_jubuzs1=( udg_jubuzs1 + 1 )
else
endif
set udg_jubuzs2=udg_jubuzs2 + 1
endloop
set udg_jubuzs1=R2I(( Pow(0.85, I2R(udg_jubuzs1)) * 100.00 ))
if ( ( GetRandomInt(1, 100) > udg_jubuzs1 ) ) then
set udg_jubuss1=RMaxBJ(udg_jubuss1, 0.50)
else
endif
set udg_jubuzs1=0
set udg_jubuzs2=1
loop
exitwhen udg_jubuzs2 > 6
if ( ( GetItemTypeId(UnitItemInSlotBJ(GetEventDamageSource(), udg_jubuzs2)) == 0x74656C73 ) ) then
set udg_jubuzs1=( udg_jubuzs1 + 1 )
else
endif
set udg_jubuzs2=udg_jubuzs2 + 1
endloop
set udg_jubuzs1=R2I(( Pow(0.80, I2R(udg_jubuzs1)) * 100.00 ))
if ( ( GetRandomInt(1, 100) > udg_jubuzs1 ) ) then
set udg_jubuss1=RMaxBJ(udg_jubuss1, 1.00)
else
endif
set udg_jubuzs1=0
set udg_jubuzs2=1
loop
exitwhen udg_jubuzs2 > 6
if ( ( ( GetItemTypeId(UnitItemInSlotBJ(GetEventDamageSource(), udg_jubuzs2)) == 0x72617466 ) or ( GetItemTypeId(UnitItemInSlotBJ(GetEventDamageSource(), udg_jubuzs2)) == 0x49303453 ) ) ) then
set udg_jubuzs1=( udg_jubuzs1 + 1 )
else
endif
set udg_jubuzs2=udg_jubuzs2 + 1
endloop
set udg_jubuzs1=R2I(( Pow(0.85, I2R(udg_jubuzs1)) * 100.00 ))
if ( ( GetRandomInt(1, 100) > udg_jubuzs1 ) ) then
set udg_jubuss1=RMaxBJ(udg_jubuss1, 1.50)
set udg_Dian[75]=GetUnitLoc(GetTriggerUnit())
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(GetTriggerUnit()), 0x65303130, udg_Dian[75], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41303551)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , GetTriggerUnit())
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[75])
else
endif
set udg_jubuzs1=0
set udg_jubuzs2=1
loop
exitwhen udg_jubuzs2 > 6
if ( ( GetItemTypeId(UnitItemInSlotBJ(GetEventDamageSource(), udg_jubuzs2)) == 0x49303239 ) ) then
set udg_jubuzs1=( udg_jubuzs1 + 1 )
else
endif
set udg_jubuzs2=udg_jubuzs2 + 1
endloop
set udg_jubuzs1=R2I(( Pow(0.80, I2R(udg_jubuzs1)) * 100.00 ))
if ( ( GetRandomInt(1, 100) > udg_jubuzs1 ) ) then
set udg_jubuss1=RMaxBJ(udg_jubuss1, 0.80)
set udg_Dian[75]=GetUnitLoc(GetTriggerUnit())
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(GetTriggerUnit()), 0x65303130, udg_Dian[75], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41303551)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , GetTriggerUnit())
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[75])
else
endif
if ( ( UnitHasBuffBJ(GetTriggerUnit(), 0x42303045) == true ) ) then
set udg_jubuss1=RMaxBJ(udg_jubuss1, 1.00)
call UnitRemoveBuffBJ(0x42303045, GetTriggerUnit())
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FaerieDragonMissile\\FaerieDragonMissile.mdl", GetTriggerUnit(), "chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\StaffOfPurification\\PurificationTarget.mdl", GetTriggerUnit(), "chest"))
call UnitDamageTarget(GetEventDamageSource(), GetTriggerUnit(), ( GetUnitState(GetTriggerUnit(), UNIT_STATE_MAX_LIFE) * 0.05 ), false, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
else
endif
if ( ( ( GetUnitState(GetTriggerUnit(), UNIT_STATE_LIFE) > GetEventDamage() ) or ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true ) ) and ( GetUnitAbilityLevel(GetEventDamageSource(), 0x41303251) == 1 ) ) then
set udg_jubuss1=( udg_jubuss1 + 1 )
set udg_danwei[278]=GetEventDamageSource()
call UnitDamageTarget(GetEventDamageSource(), GetTriggerUnit(), ( I2R(GetUnitAbilityLevel(GetEventDamageSource(), 0x41556373)) * 25.00 ), false, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
call StartTimerBJ(udg_jishiqi[80], false, 8.00)
call UnitRemoveAbility(udg_danwei[278], 0x41303251)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\LordofFlameMissile\\LordofFlameMissile.mdl", GetTriggerUnit(), "chest"))
set udg_Dian[75]=GetUnitLoc(GetTriggerUnit())
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(GetTriggerUnit()), 0x65303130, udg_Dian[75], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304236)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , GetTriggerUnit())
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[75])
else
endif
if ( ( udg_jubuss1 > 0.00 ) ) then
call UnitDamageTarget(GetEventDamageSource(), GetTriggerUnit(), ( GetEventDamage() * udg_jubuss1 ), false, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\jianqibo.mdx", GetTriggerUnit(), "chest"))
set udg_Dian[75]=GetUnitLoc(GetTriggerUnit())
if ( ( ( udg_jubuss1 / 10.00 ) == ( I2R(R2I(udg_jubuss1)) / 10.00 ) ) ) then
call CreateTextTagLocBJ(( I2S(R2I(( GetEventDamage() * ( 1.00 + udg_jubuss1 ) ))) + ( "（" + ( I2S(R2I(( udg_jubuss1 + 1 ))) + "×）" ) ) ), udg_Dian[75], 0, 9.00, 100.00, 0.00, 0.00, 0.00)
else
call CreateTextTagLocBJ(( I2S(R2I(( GetEventDamage() * ( 1.00 + udg_jubuss1 ) ))) + ( "（" + ( R2SW(( udg_jubuss1 + 1.00 ), 1, 1) + "×）" ) ) ), udg_Dian[75], 0, 9.00, 100.00, 0.00, 0.00, 0.00)
endif
call SetTextTagVelocity(bj_lastCreatedTextTag, 0.00, 0.03)
call SetTextTagPermanent(bj_lastCreatedTextTag, false)
call SetTextTagFadepoint(bj_lastCreatedTextTag, 1.50)
call SetTextTagLifespan(bj_lastCreatedTextTag, 4.00)
call SetTextTagVisibility(bj_lastCreatedTextTag, false)
set udg_wanjiazu[0]=CreateForce()
set udg_jubuzs1=1
loop
exitwhen udg_jubuzs1 > 10
if ( ( IsUnitVisible(GetTriggerUnit(), s__baka_SPlayer(udg_jubuzs1 - 1)) == true ) ) then
call ForceAddPlayer(udg_wanjiazu[0], s__baka_SPlayer(udg_jubuzs1 - 1))
else
endif
set udg_jubuzs1=udg_jubuzs1 + 1
endloop
call ShowTextTagForceBJ(true, bj_lastCreatedTextTag, udg_wanjiazu[0])
call DestroyForce(udg_wanjiazu[0])
call RemoveLocation(udg_Dian[75])
else
endif
if ( ( GetUnitAbilityLevel(GetEventDamageSource(), 0x4130354A) == 4 ) ) then
call SetUnitLifeBJ(GetEventDamageSource(), ( GetUnitState(GetEventDamageSource(), UNIT_STATE_LIFE) + ( ( GetEventDamage() * ( 1.00 + udg_jubuss1 ) ) * 0.35 ) ))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl", GetEventDamageSource(), "origin"))
else
if ( ( GetUnitAbilityLevel(GetEventDamageSource(), 0x4130354A) == 3 ) ) then
call SetUnitLifeBJ(GetEventDamageSource(), ( GetUnitState(GetEventDamageSource(), UNIT_STATE_LIFE) + ( ( GetEventDamage() * ( 1.00 + udg_jubuss1 ) ) * 0.30 ) ))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl", GetEventDamageSource(), "origin"))
else
if ( ( GetUnitAbilityLevel(GetEventDamageSource(), 0x4130354A) == 2 ) ) then
call SetUnitLifeBJ(GetEventDamageSource(), ( GetUnitState(GetEventDamageSource(), UNIT_STATE_LIFE) + ( ( GetEventDamage() * ( 1.00 + udg_jubuss1 ) ) * 0.25 ) ))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl", GetEventDamageSource(), "origin"))
else
if ( ( GetUnitAbilityLevel(GetEventDamageSource(), 0x4130354A) == 1 ) ) then
call SetUnitLifeBJ(GetEventDamageSource(), ( GetUnitState(GetEventDamageSource(), UNIT_STATE_LIFE) + ( ( GetEventDamage() * ( 1.00 + udg_jubuss1 ) ) * 0.20 ) ))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl", GetEventDamageSource(), "origin"))
else
endif
endif
endif
endif
if ( ( UnitHasBuffBJ(GetEventDamageSource(), 0x42303349) == true ) ) then
call SetUnitLifeBJ(GetEventDamageSource(), ( GetUnitState(GetEventDamageSource(), UNIT_STATE_LIFE) + ( ( GetEventDamage() * ( 1.00 + udg_jubuss1 ) ) * 0.15 ) ))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl", GetEventDamageSource(), "origin"))
else
if ( ( UnitHasBuffBJ(GetEventDamageSource(), 0x4230334A) == true ) ) then
call SetUnitLifeBJ(GetEventDamageSource(), ( GetUnitState(GetEventDamageSource(), UNIT_STATE_LIFE) + ( ( GetEventDamage() * ( 1.00 + udg_jubuss1 ) ) * 0.10 ) ))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl", GetEventDamageSource(), "origin"))
else
endif
endif
else
endif
else
endif
if ( ( udg_zhengshu[36] <= 0 ) and ( udg_Zhengshu[82] != 1 ) and ( GetEventDamage() > 0.00 ) and ( UnitHasBuffBJ(GetEventDamageSource(), 0x42303137) == true ) and ( UnitHasBuffBJ(GetTriggerUnit(), 0x42303034) == false ) and ( UnitHasBuffBJ(GetTriggerUnit(), 0x42303037) == false ) and ( UnitHasBuffBJ(GetTriggerUnit(), 0x42303334) == false ) and ( ( GetTriggerUnit() != udg_Danwei[161] ) or ( udg_Zhengshu[170] != 1 ) ) ) then
set udg_danwei[329]=GetTriggerUnit()
call SetUnitLifeBJ(udg_danwei[329], RMaxBJ(( GetUnitState(udg_danwei[329], UNIT_STATE_LIFE) - ( GetEventDamage() * ( 0.15 + ( 0.05 * I2R(GetUnitAbilityLevel(GetEventDamageSource(), 0x41304E52)) ) ) ) ), 1.00))
set udg_danwei[329]=null
else
endif
if ( ( GetUnitTypeId(udg_danwei[328]) == 0x68677477 ) ) then
set udg_danwei2[0]=GetTriggerUnit()
call DisableTrigger(GetTriggeringTrigger())
call UnitDamageTarget(udg_danwei[328], udg_danwei2[0], ( 1001.00 - GetEventDamage() ), true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_UNIVERSAL, WEAPON_TYPE_WHOKNOWS)
call EnableTrigger(GetTriggeringTrigger())
set udg_danwei2[0]=null
else
endif
if ( ( GetUnitTypeId(udg_danwei[328]) == 0x686D7474 ) and ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_STRUCTURE) == false ) and ( UnitHasBuffBJ(GetTriggerUnit(), 0x4230324A) == true ) ) then
call DisableTrigger(GetTriggeringTrigger())
call UnitRemoveBuffBJ(0x4230324A, GetTriggerUnit())
set udg_Dian[75]=GetUnitLoc(GetTriggerUnit())
set udg_Danweizu[76]=YDWEGetUnitsInRangeOfLocAllNull(180.00 , udg_Dian[75])
call ForGroupBJ(udg_Danweizu[76], function Trig_renyishanghaiFunc010Func005A)
call DestroyGroup(udg_Danweizu[76])
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=9
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_Dian[76]=PolarProjectionBJ(udg_Dian[75], 150.00, ( 40.00 * I2R(bj_forLoopAIndex) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\SteamTank\\SteamTankImpact.mdl", udg_Dian[76]))
call RemoveLocation(udg_Dian[76])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call StopSoundBJ(gg_snd_CannonTowerMissile201, false)
call PlaySoundAtPointBJ(gg_snd_CannonTowerMissile201, 100, udg_Dian[75], 0)
call RemoveLocation(udg_Dian[75])
call EnableTrigger(GetTriggeringTrigger())
else
endif
if ( ( GetUnitTypeId(udg_danwei[328]) == 0x686D7474 ) and ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_STRUCTURE) == true ) ) then
set udg_Dian[75]=GetUnitLoc(GetTriggerUnit())
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\Volcano\\VolcanoDeath.mdl", udg_Dian[75]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\BallsOfFireMissile\\BallsOfFireMissile.mdl", udg_Dian[75]))
call StopSoundBJ(gg_snd_CatapultMissile201, false)
call PlaySoundAtPointBJ(gg_snd_CatapultMissile201, 100, udg_Dian[75], 0)
call RemoveLocation(udg_Dian[75])
else
endif
if ( ( ( UnitHasBuffBJ(GetEventDamageSource(), 0x42303033) == true ) or ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1 ) <= 10 ) and ( ( UnitHasBuffBJ(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1 )], 0x42303033) == true ) ) ) ) ) then
set udg_Danwei[43]=GetTriggerUnit()
call SetUnitLifeBJ(udg_Danwei[43], ( GetUnitState(udg_Danwei[43], UNIT_STATE_LIFE) + ( GetEventDamage() * 1.00 ) ))
set udg_Danwei[43]=null
else
if ( ( GetEventDamage() >= GetUnitState(GetTriggerUnit(), UNIT_STATE_LIFE) ) and ( ( UnitHasBuffBJ(GetTriggerUnit(), 0x42303334) == true ) or ( ( GetTriggerUnit() == udg_Danwei[161] ) and ( udg_Zhengshu[170] == 1 ) ) ) ) then
set udg_Danwei[43]=GetTriggerUnit()
call SetUnitLifeBJ(udg_Danwei[43], ( GetUnitState(udg_Danwei[43], UNIT_STATE_LIFE) + ( GetEventDamage() * 1.00 ) ))
set udg_Danwei[43]=null
else
if ( ( UnitHasBuffBJ(GetEventDamageSource(), 0x42303333) == true ) and ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1 ) <= 10 ) and ( ( UnitHasBuffBJ(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1 )], 0x42303333) == true ) ) ) ) then
set udg_Danwei[43]=GetTriggerUnit()
call SetUnitLifeBJ(udg_Danwei[43], ( GetUnitState(udg_Danwei[43], UNIT_STATE_LIFE) + ( GetEventDamage() * ( 0.10 + ( 0.05 * I2R(GetUnitAbilityLevel(udg_Danwei[132], 0x41304D43)) ) ) ) ))
set udg_Danwei[43]=null
else
endif
endif
endif
if ( ( UnitHasBuffBJ(GetTriggerUnit(), 0x42303249) == true ) and ( GetEventDamage() < 10000.00 ) ) then
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1 ) == ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei[197])) + 1 ) ) ) then
set udg_Shishu[72]=( udg_Shishu[72] + ( GetEventDamage() * 0.20 ) )
call SetUnitLifeBJ(udg_danwei[197], ( GetUnitState(udg_danwei[197], UNIT_STATE_LIFE) + ( GetEventDamage() * 0.20 ) ))
else
endif
else
endif
if ( ( UnitHasBuffBJ(GetEventDamageSource(), 0x42303256) == true ) and ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_STRUCTURE) == false ) and ( GetEventDamage() > 0.00 ) and ( GetEventDamage() < 10000.00 ) ) then
call SetUnitLifeBJ(GetEventDamageSource(), ( GetUnitState(GetEventDamageSource(), UNIT_STATE_LIFE) + ( GetEventDamage() * 0.10 ) ))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl", GetEventDamageSource(), "origin"))
else
endif
set udg_danwei[328]=null
call FlushChildHashtable(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step)
set ydl_group=null
set ydl_unit=null
set ydl_timer=null
endfunction
function InitTrig_renyishanghai takes nothing returns nothing
set gg_trg_renyishanghai=CreateTrigger()
call YDWESyStemAnyUnitDamagedRegistTrigger(gg_trg_renyishanghai)
call TriggerAddCondition(gg_trg_renyishanghai, Condition(function Trig_renyishanghaiConditions))
call TriggerAddAction(gg_trg_renyishanghai, function Trig_renyishanghaiActions)
endfunction
function Trig_renyishanghai_heroConditions takes nothing returns boolean
return ( ( GetEventDamage() > 0.00 ) )
endfunction
function Trig_renyishanghai_heroActions takes nothing returns nothing
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1 ) <= 10 ) and ( GetEventDamage() < 100000.00 ) ) then
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1 ) <= 5 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetTriggerUnit())) + 1 ) >= 6 ) ) then
set udg_zhugong[( ( 5 * ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1 ) - 1 ) ) + ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetTriggerUnit())) + 1 ) - 5 ) )]=15
set udg_shuju[( ( 5 * ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1 ) - 1 ) ) + ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetTriggerUnit())) + 1 ) - 5 ) )]=( udg_shuju[( ( 5 * ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1 ) - 1 ) ) + ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetTriggerUnit())) + 1 ) - 5 ) )] + GetEventDamage() )
else
endif
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1 ) >= 6 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetTriggerUnit())) + 1 ) <= 5 ) ) then
set udg_zhugong[( ( 5 * ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1 ) - 1 ) ) + ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetTriggerUnit())) + 1 ) - 0 ) )]=15
set udg_shuju[( ( 5 * ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1 ) - 1 ) ) + ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetTriggerUnit())) + 1 ) - 0 ) )]=( udg_shuju[( ( 5 * ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1 ) - 1 ) ) + ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetTriggerUnit())) + 1 ) - 0 ) )] + GetEventDamage() )
else
endif
set udg_shuju[( 50 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1 ) )]=( udg_shuju[( 50 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1 ) )] + GetEventDamage() )
set udg_shuju[( 60 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetTriggerUnit())) + 1 ) )]=( udg_shuju[( 60 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetTriggerUnit())) + 1 ) )] + GetEventDamage() )
else
endif
if ( ( GetEventDamage() >= 1.00 ) and ( GetUnitState(GetTriggerUnit(), UNIT_STATE_MAX_MANA) > 0.00 ) and ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1 )] , 0x49303232)) == true ) ) then
set udg_danwei[331]=GetTriggerUnit()
set udg_zhengshu2[( 352 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei[331])) + 1 ) )]=10
set udg_shishu2[( 352 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei[331])) + 1 ) )]=( udg_shishu2[( 352 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei[331])) + 1 ) )] + ( GetEventDamage() * 0.25 ) )
set udg_danwei[331]=null
else
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetTriggerUnit() , 0x49303332)) == true ) and ( ( UnitHasBuffBJ(GetTriggerUnit(), 0x4253544E) == true ) or ( UnitHasBuffBJ(GetTriggerUnit(), 0x42505345) == true ) or ( UnitHasBuffBJ(GetTriggerUnit(), 0x4230324E) == true ) or ( UnitHasBuffBJ(GetTriggerUnit(), 0x4230324F) == true ) or ( IsUnitPausedBJ(GetTriggerUnit()) == true ) ) ) then
set udg_Danwei[44]=GetTriggerUnit()
if ( ( GetHeroStr(udg_Danwei[44], true) > GetHeroAgi(udg_Danwei[44], true) ) and ( GetHeroStr(udg_Danwei[44], true) > GetHeroInt(udg_Danwei[44], true) ) ) then
call SetUnitLifeBJ(udg_Danwei[44], ( GetUnitState(udg_Danwei[44], UNIT_STATE_LIFE) + ( GetEventDamage() * 0.25 ) ))
else
if ( ( GetHeroAgi(udg_Danwei[44], true) > GetHeroStr(udg_Danwei[44], true) ) and ( GetHeroAgi(udg_Danwei[44], true) > GetHeroInt(udg_Danwei[44], true) ) ) then
call SetUnitLifeBJ(udg_Danwei[44], ( GetUnitState(udg_Danwei[44], UNIT_STATE_LIFE) + ( GetEventDamage() * 0.20 ) ))
else
if ( ( GetHeroInt(udg_Danwei[44], true) > GetHeroStr(udg_Danwei[44], true) ) and ( GetHeroInt(udg_Danwei[44], true) > GetHeroAgi(udg_Danwei[44], true) ) ) then
call SetUnitLifeBJ(udg_Danwei[44], ( GetUnitState(udg_Danwei[44], UNIT_STATE_LIFE) + ( GetEventDamage() * 0.15 ) ))
else
endif
endif
endif
set udg_Danwei[44]=null
else
endif
if ( ( ( GetUnitLifePercent(GetTriggerUnit()) <= 15.00 ) or ( GetEventDamage() >= GetUnitState(GetTriggerUnit(), UNIT_STATE_LIFE) ) ) and ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetTriggerUnit() , 0x49303158)) == true ) and ( GetEventDamage() >= 10 ) ) then
set udg_danwei[331]=GetTriggerUnit()
call UnitUseItem(udg_danwei[331], YDWEGetItemOfTypeFromUnitBJNull(udg_danwei[331] , 0x49303158))
set udg_danwei[331]=null
else
endif
if ( ( GetEventDamage() >= 1.00 ) and ( GetTriggerUnit() == udg_danwei2[100] ) ) then
if ( ( udg_Shishu[10] > 0.00 ) ) then
if ( ( udg_Shishu[11] == 0.00 ) ) then
call StartTimerBJ(udg_Times[10], false, 0.00)
call PauseTimer(udg_jishiqi[95])
call StartTimerBJ(udg_jishiqi[95], false, ( 17.50 - ( 1.50 * I2R(GetUnitAbilityLevel(udg_danwei2[100], 0x41304E4F)) ) ))
set udg_Shishu[13]=GetUnitState(udg_danwei2[100], UNIT_STATE_LIFE)
call SetUnitLifePercentBJ(udg_danwei2[100], 100)
else
endif
set udg_Shishu[11]=( udg_Shishu[11] + RMinBJ(udg_Shishu[10], GetEventDamage()) )
set udg_Shishu[12]=RMinBJ(udg_Shishu[10], GetEventDamage())
if ( ( udg_Shishu[10] <= GetEventDamage() ) ) then
set udg_Shishu[13]=( udg_Shishu[13] - ( GetEventDamage() - udg_Shishu[10] ) )
call UnitRemoveAbility(udg_danwei2[100], 0x41303338)
set udg_aXUNHUAN[55]=1
loop
exitwhen udg_aXUNHUAN[55] > 5
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Transmute\\GoldBottleMissile.mdl", udg_danwei2[100], "chest"))
set udg_aXUNHUAN[55]=udg_aXUNHUAN[55] + 1
endloop
else
endif
set udg_Shishu[10]=( udg_Shishu[10] - GetEventDamage() )
set udg_danwei2[396]=null
else
call PauseTimer(udg_jishiqi[95])
call StartTimerBJ(udg_jishiqi[95], false, ( 17.50 - ( 1.50 * I2R(GetUnitAbilityLevel(udg_danwei2[100], 0x41304E4F)) ) ))
endif
else
endif
if ( ( GetEventDamage() > 1.00 ) and ( udg_Zhengshu[177] != 1 ) and ( GetTriggerUnit() == udg_danwei2[67] ) and ( ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1 ) <= 10 ) ) or ( IsUnitType(GetEventDamageSource(), UNIT_TYPE_STRUCTURE) == true ) or ( GetUnitTypeId(GetEventDamageSource()) == 0x68303035 ) or ( GetUnitTypeId(GetEventDamageSource()) == 0x68303033 ) or ( GetUnitTypeId(GetEventDamageSource()) == 0x68303034 ) or ( GetUnitTypeId(GetEventDamageSource()) == 0x68303031 ) or ( GetUnitTypeId(GetEventDamageSource()) == 0x68303039 ) or ( GetUnitTypeId(GetEventDamageSource()) == 0x68303041 ) or ( udg_Points >= 0 ) ) ) then
set udg_zhengshu2[68]=20
set udg_Zhengshu[177]=- 1
call PauseTimer(udg_Times[177])
call StartTimerBJ(udg_Times[177], false, 1.00)
else
endif
if ( ( GetTriggerUnit() == udg_PK[3] ) and ( udg_Shishu[68] == 0.00 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1 ) != ( s__baka_SGetPlayerId(GetOwningPlayer(udg_PK[1])) + 1 ) ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1 ) != ( s__baka_SGetPlayerId(GetOwningPlayer(udg_PK[2])) + 1 ) ) ) then
set udg_Shishu[68]=GetUnitState(GetTriggerUnit(), UNIT_STATE_LIFE)
call SetUnitLifePercentBJ(udg_PK[1], 100)
call StartTimerBJ(udg_Times[68], false, 0.00)
else
endif
if ( ( GetTriggerUnit() == udg_PK[4] ) and ( udg_Shishu[69] == 0.00 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1 ) != ( s__baka_SGetPlayerId(GetOwningPlayer(udg_PK[1])) + 1 ) ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1 ) != ( s__baka_SGetPlayerId(GetOwningPlayer(udg_PK[2])) + 1 ) ) ) then
set udg_Shishu[69]=GetUnitState(GetTriggerUnit(), UNIT_STATE_LIFE)
call SetUnitLifePercentBJ(udg_PK[2], 100)
call StartTimerBJ(udg_Times[69], false, 0.00)
else
endif
if ( ( GetTriggerUnit() == udg_Danwei[73] ) and ( udg_Shishu[73] > 0.00 ) and ( udg_Shishu[74] == 0.00 ) ) then
set udg_Danwei[74]=GetTriggerUnit()
set udg_Shishu[74]=GetUnitState(GetTriggerUnit(), UNIT_STATE_LIFE)
call SetUnitLifePercentBJ(udg_Danwei[74], 100)
call StartTimerBJ(udg_Times[74], false, 0.00)
else
endif
if ( ( GetTriggerUnit() == udg_danwei[100] ) ) then
call UnitDamageTarget(udg_danwei[100], udg_danwei[101], ( GetEventDamage() * 0.25 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
if ( ( UnitHasBuffBJ(GetTriggerUnit(), 0x42303256) == true ) ) then
call SetUnitLifeBJ(GetTriggerUnit(), ( GetUnitState(GetTriggerUnit(), UNIT_STATE_LIFE) + ( GetEventDamage() * 0.30 ) ))
set udg_Shishu[99]=( udg_Shishu[99] + ( GetEventDamage() * 0.10 ) )
else
endif
if ( ( UnitHasBuffBJ(GetEventDamageSource(), 0x42303256) == true ) ) then
set udg_Shishu[99]=( udg_Shishu[99] + ( GetEventDamage() * 0.10 ) )
else
endif
endfunction
function InitTrig_renyishanghai_hero takes nothing returns nothing
set gg_trg_renyishanghai_hero=CreateTrigger()
call TriggerAddCondition(gg_trg_renyishanghai_hero, Condition(function Trig_renyishanghai_heroConditions))
call TriggerAddAction(gg_trg_renyishanghai_hero, function Trig_renyishanghai_heroActions)
endfunction
function Trig_gongxiangwupinActions takes nothing returns nothing
set udg_dian2[0]=GetItemLoc(GetManipulatedItem())
set udg_danwei2[0]=GetManipulatingUnit()
if ( ( GetItemTypeId(GetManipulatedItem()) != 0x49303253 ) and ( GetItemTypeId(GetManipulatedItem()) != 0x73747770 ) and ( GetItemTypeId(GetManipulatedItem()) != 0x68736C76 ) and ( GetItemTypeId(GetManipulatedItem()) != 0x70636C72 ) and ( GetItemTypeId(GetManipulatedItem()) != 0x77737764 ) and ( GetItemTypeId(GetManipulatedItem()) != 0x49303344 ) and ( GetItemTypeId(GetManipulatedItem()) != 0x49303343 ) and ( GetItemTypeId(GetManipulatedItem()) != 0x73726567 ) and ( GetItemTypeId(GetManipulatedItem()) != 0x49303132 ) and ( GetItemTypeId(GetManipulatedItem()) != 0x49303148 ) and ( GetItemTypeId(GetManipulatedItem()) != 0x49303133 ) and ( GetItemTypeId(GetManipulatedItem()) != 0x4930314B ) and ( GetItemTypeId(GetManipulatedItem()) != 0x4930314C ) and ( GetItemTypeId(GetManipulatedItem()) != 0x4930314F ) and ( GetItemTypeId(GetManipulatedItem()) != 0x4930305A ) and ( GetItemTypeId(GetManipulatedItem()) != 0x49303058 ) and ( GetItemTypeId(GetManipulatedItem()) != 0x49303131 ) and ( GetItemTypeId(GetManipulatedItem()) != 0x49303130 ) and ( GetItemTypeId(GetManipulatedItem()) != 0x49303147 ) and ( GetPlayerSlotState(GetOwningPlayer(udg_danwei2[0])) == PLAYER_SLOT_STATE_PLAYING ) and ( ( GetItemUserData(GetManipulatedItem()) < 1 ) or ( GetItemUserData(GetManipulatedItem()) > 10 ) or ( GetPlayerSlotState(s__baka_SPlayer(GetItemUserData(GetManipulatedItem()) - 1)) == PLAYER_SLOT_STATE_PLAYING ) ) ) then
if ( ( GetItemUserData(GetManipulatedItem()) >= 1 ) and ( GetItemUserData(GetManipulatedItem()) <= 10 ) ) then
if ( ( GetUnitTypeId(udg_danwei2[0]) != 0x6E303038 ) and ( GetUnitTypeId(udg_danwei2[0]) != 0x6E303039 ) ) then
if ( ( GetItemTypeId(GetManipulatedItem()) == 0x74656C73 ) ) then
if ( ( GetHeroStr(udg_danwei2[0], false) > GetHeroAgi(udg_danwei2[0], false) ) and ( GetHeroStr(udg_danwei2[0], false) > GetHeroInt(udg_danwei2[0], false) ) ) then
call UnitAddAbility(udg_danwei2[0], 0x41303849)
call UnitMakeAbilityPermanent(udg_danwei2[0], true, 0x41303849)
else
endif
if ( ( GetHeroAgi(udg_danwei2[0], false) > GetHeroStr(udg_danwei2[0], false) ) and ( GetHeroAgi(udg_danwei2[0], false) > GetHeroInt(udg_danwei2[0], false) ) ) then
call UnitAddAbility(udg_danwei2[0], 0x4130384B)
call UnitMakeAbilityPermanent(udg_danwei2[0], true, 0x4130384B)
else
endif
if ( ( GetHeroInt(udg_danwei2[0], false) > GetHeroStr(udg_danwei2[0], false) ) and ( GetHeroInt(udg_danwei2[0], false) > GetHeroAgi(udg_danwei2[0], false) ) ) then
call UnitAddAbility(udg_danwei2[0], 0x4130384A)
call UnitMakeAbilityPermanent(udg_danwei2[0], true, 0x4130384A)
else
endif
else
endif
if ( ( GetItemTypeId(GetManipulatedItem()) == 0x49303256 ) ) then
if ( ( GetHeroStr(udg_danwei2[0], false) > GetHeroAgi(udg_danwei2[0], false) ) and ( GetHeroStr(udg_danwei2[0], false) > GetHeroInt(udg_danwei2[0], false) ) ) then
call UnitAddAbility(udg_danwei2[0], 0x41304A59)
call UnitMakeAbilityPermanent(udg_danwei2[0], true, 0x41304A59)
else
endif
if ( ( GetHeroAgi(udg_danwei2[0], false) > GetHeroStr(udg_danwei2[0], false) ) and ( GetHeroAgi(udg_danwei2[0], false) > GetHeroInt(udg_danwei2[0], false) ) ) then
call UnitAddAbility(udg_danwei2[0], 0x41304A58)
call UnitMakeAbilityPermanent(udg_danwei2[0], true, 0x41304A58)
else
endif
if ( ( GetHeroInt(udg_danwei2[0], false) > GetHeroStr(udg_danwei2[0], false) ) and ( GetHeroInt(udg_danwei2[0], false) > GetHeroAgi(udg_danwei2[0], false) ) ) then
call UnitAddAbility(udg_danwei2[0], 0x41304A57)
call UnitMakeAbilityPermanent(udg_danwei2[0], true, 0x41304A57)
else
endif
else
endif
if ( ( ( GetItemTypeId(GetManipulatedItem()) == 0x49303351 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x49303353 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x49303352 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x4930335A ) or ( GetItemTypeId(GetManipulatedItem()) == 0x49303431 ) ) ) then
call UnitAddAbility(udg_danwei2[0], 0x41304A54)
call UnitMakeAbilityPermanent(udg_danwei2[0], true, 0x41304A54)
call UnitAddAbility(udg_danwei2[0], 0x41304845)
call UnitMakeAbilityPermanent(udg_danwei2[0], true, 0x41304845)
else
endif
if ( ( ( GetItemTypeId(GetManipulatedItem()) == 0x4930344A ) or ( GetItemTypeId(GetManipulatedItem()) == 0x49303448 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x49303335 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x49303443 ) ) ) then
call UnitAddAbility(udg_danwei2[0], 0x41304D54)
call UnitMakeAbilityPermanent(udg_danwei2[0], true, 0x41304D54)
else
endif
if ( ( ( GetItemTypeId(GetManipulatedItem()) == 0x49303237 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x49303244 ) ) ) then
call UnitAddAbility(udg_danwei2[0], 0x4130394E)
call UnitMakeAbilityPermanent(udg_danwei2[0], true, 0x4130394E)
else
endif
if ( ( GetItemTypeId(GetManipulatedItem()) == 0x49303047 ) ) then
call UnitAddAbility(udg_danwei2[0], 0x41303231)
call UnitMakeAbilityPermanent(udg_danwei2[0], true, 0x41303231)
else
endif
if ( ( ( GetItemTypeId(GetManipulatedItem()) == 0x72617466 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x49303453 ) ) ) then
call UnitRemoveAbility(udg_danwei2[0], 0x41304F32)
call UnitRemoveAbility(udg_danwei2[0], 0x41304F31)
call UnitRemoveAbility(udg_danwei2[0], 0x41304F33)
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_MELEE_ATTACKER) == true ) ) then
if ( ( GetItemTypeId(GetManipulatedItem()) == 0x49303453 ) ) then
call DisableTrigger(GetTriggeringTrigger())
call RemoveItem(GetManipulatedItem())
call UnitAddItemByIdSwapped(0x72617466, GetTriggerUnit())
call EnableTrigger(GetTriggeringTrigger())
else
endif
else
if ( ( GetItemTypeId(GetManipulatedItem()) == 0x72617466 ) ) then
call DisableTrigger(GetTriggeringTrigger())
call RemoveItem(GetManipulatedItem())
call UnitAddItemByIdSwapped(0x49303453, GetTriggerUnit())
call EnableTrigger(GetTriggeringTrigger())
else
endif
endif
else
endif
if ( ( ( GetItemTypeId(GetManipulatedItem()) == 0x72646534 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x73726264 ) ) and ( GetUnitAbilityLevel(udg_danwei2[0], 0x41304F33) == 0 ) and ( GetUnitAbilityLevel(udg_danwei2[0], 0x41304F32) == 0 ) and ( GetUnitAbilityLevel(udg_danwei2[0], 0x41304F31) == 0 ) and ( YDWEUnitHasItemOfTypeBJNull(udg_danwei2[0] , 0x72617466) == false ) and ( YDWEUnitHasItemOfTypeBJNull(udg_danwei2[0] , 0x49303453) == false ) ) then
call UnitAddAbility(udg_danwei2[0], 0x41304F32)
call UnitMakeAbilityPermanent(udg_danwei2[0], true, 0x41304F32)
else
endif
if ( ( ( GetItemTypeId(GetManipulatedItem()) == 0x6F76656E ) or ( GetItemTypeId(GetManipulatedItem()) == 0x726E7370 ) ) and ( GetUnitAbilityLevel(udg_danwei2[0], 0x41304F33) == 0 ) and ( GetUnitAbilityLevel(udg_danwei2[0], 0x41304F32) == 0 ) and ( GetUnitAbilityLevel(udg_danwei2[0], 0x41304F31) == 0 ) and ( YDWEUnitHasItemOfTypeBJNull(udg_danwei2[0] , 0x72617466) == false ) and ( YDWEUnitHasItemOfTypeBJNull(udg_danwei2[0] , 0x49303453) == false ) ) then
call UnitAddAbility(udg_danwei2[0], 0x41304F31)
call UnitMakeAbilityPermanent(udg_danwei2[0], true, 0x41304F31)
else
endif
if ( ( ( GetItemTypeId(GetManipulatedItem()) == 0x73666F67 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x66726764 ) ) and ( GetUnitAbilityLevel(udg_danwei2[0], 0x41304F33) == 0 ) and ( GetUnitAbilityLevel(udg_danwei2[0], 0x41304F32) == 0 ) and ( GetUnitAbilityLevel(udg_danwei2[0], 0x41304F31) == 0 ) and ( YDWEUnitHasItemOfTypeBJNull(udg_danwei2[0] , 0x72617466) == false ) and ( YDWEUnitHasItemOfTypeBJNull(udg_danwei2[0] , 0x49303453) == false ) ) then
call UnitAddAbility(udg_danwei2[0], 0x41304F33)
call UnitMakeAbilityPermanent(udg_danwei2[0], true, 0x41304F33)
else
endif
else
endif
else
call SetItemUserData(GetManipulatedItem(), ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ))
endif
if ( ( GetUnitTypeId(udg_danwei2[0]) != 0x6E303038 ) and ( GetUnitTypeId(udg_danwei2[0]) != 0x6E303039 ) ) then
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) != GetItemUserData(GetManipulatedItem()) ) ) then
call UnitRemoveItemSwapped(GetManipulatedItem(), udg_danwei2[0])
call SetItemPositionLoc(GetManipulatedItem(), udg_dian2[0])
if ( ( GetItemUserData(GetManipulatedItem()) >= 1 ) and ( GetItemUserData(GetManipulatedItem()) <= 5 ) and ( udg_zhengshuex[6] != 1 ) ) then
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, ( "|cffffcc00这件装备不是你的，它属于|r|cff009900" + ( GetPlayerName(s__baka_SPlayer(GetItemUserData(GetManipulatedItem()) - 1)) + "|r" ) ))
else
endif
if ( ( GetItemUserData(GetManipulatedItem()) >= 6 ) and ( GetItemUserData(GetManipulatedItem()) <= 10 ) and ( udg_zhengshuex[6] != 1 ) ) then
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, ( "|cffffcc00这件装备不是你的，它属于|r|cff0075ff" + ( GetPlayerName(s__baka_SPlayer(GetItemUserData(GetManipulatedItem()) - 1)) + "|r" ) ))
else
endif
else
if ( ( GetItemTypeId(GetManipulatedItem()) == 0x74656C73 ) ) then
if ( ( GetHeroStr(udg_danwei2[0], false) > GetHeroAgi(udg_danwei2[0], false) ) and ( GetHeroStr(udg_danwei2[0], false) > GetHeroInt(udg_danwei2[0], false) ) ) then
call UnitAddAbility(udg_danwei2[0], 0x41303849)
call UnitMakeAbilityPermanent(udg_danwei2[0], true, 0x41303849)
else
endif
if ( ( GetHeroAgi(udg_danwei2[0], false) > GetHeroStr(udg_danwei2[0], false) ) and ( GetHeroAgi(udg_danwei2[0], false) > GetHeroInt(udg_danwei2[0], false) ) ) then
call UnitAddAbility(udg_danwei2[0], 0x4130384B)
call UnitMakeAbilityPermanent(udg_danwei2[0], true, 0x4130384B)
else
endif
if ( ( GetHeroInt(udg_danwei2[0], false) > GetHeroStr(udg_danwei2[0], false) ) and ( GetHeroInt(udg_danwei2[0], false) > GetHeroAgi(udg_danwei2[0], false) ) ) then
call UnitAddAbility(udg_danwei2[0], 0x4130384A)
call UnitMakeAbilityPermanent(udg_danwei2[0], true, 0x4130384A)
else
endif
else
endif
if ( ( GetItemTypeId(GetManipulatedItem()) == 0x49303256 ) ) then
if ( ( GetHeroStr(udg_danwei2[0], false) > GetHeroAgi(udg_danwei2[0], false) ) and ( GetHeroStr(udg_danwei2[0], false) > GetHeroInt(udg_danwei2[0], false) ) ) then
call UnitAddAbility(udg_danwei2[0], 0x41304A59)
call UnitMakeAbilityPermanent(udg_danwei2[0], true, 0x41304A59)
else
endif
if ( ( GetHeroAgi(udg_danwei2[0], false) > GetHeroStr(udg_danwei2[0], false) ) and ( GetHeroAgi(udg_danwei2[0], false) > GetHeroInt(udg_danwei2[0], false) ) ) then
call UnitAddAbility(udg_danwei2[0], 0x41304A58)
call UnitMakeAbilityPermanent(udg_danwei2[0], true, 0x41304A58)
else
endif
if ( ( GetHeroInt(udg_danwei2[0], false) > GetHeroStr(udg_danwei2[0], false) ) and ( GetHeroInt(udg_danwei2[0], false) > GetHeroAgi(udg_danwei2[0], false) ) ) then
call UnitAddAbility(udg_danwei2[0], 0x41304A57)
call UnitMakeAbilityPermanent(udg_danwei2[0], true, 0x41304A57)
else
endif
else
endif
if ( ( ( GetItemTypeId(GetManipulatedItem()) == 0x49303351 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x49303353 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x49303352 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x4930335A ) or ( GetItemTypeId(GetManipulatedItem()) == 0x49303431 ) ) ) then
call UnitAddAbility(udg_danwei2[0], 0x41304A54)
call UnitMakeAbilityPermanent(udg_danwei2[0], true, 0x41304A54)
call UnitAddAbility(udg_danwei2[0], 0x41304845)
call UnitMakeAbilityPermanent(udg_danwei2[0], true, 0x41304845)
else
endif
if ( ( ( GetItemTypeId(GetManipulatedItem()) == 0x4930344A ) or ( GetItemTypeId(GetManipulatedItem()) == 0x49303448 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x49303335 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x49303443 ) ) ) then
call UnitAddAbility(udg_danwei2[0], 0x41304D54)
call UnitMakeAbilityPermanent(udg_danwei2[0], true, 0x41304D54)
else
endif
if ( ( ( GetItemTypeId(GetManipulatedItem()) == 0x49303237 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x49303244 ) ) ) then
call UnitAddAbility(udg_danwei2[0], 0x4130394E)
call UnitMakeAbilityPermanent(udg_danwei2[0], true, 0x4130394E)
else
endif
if ( ( GetItemTypeId(GetManipulatedItem()) == 0x49303047 ) ) then
call UnitAddAbility(udg_danwei2[0], 0x41303231)
call UnitMakeAbilityPermanent(udg_danwei2[0], true, 0x41303231)
else
endif
if ( ( ( GetItemTypeId(GetManipulatedItem()) == 0x72617466 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x49303453 ) ) ) then
call UnitRemoveAbility(udg_danwei2[0], 0x41304F32)
call UnitRemoveAbility(udg_danwei2[0], 0x41304F31)
call UnitRemoveAbility(udg_danwei2[0], 0x41304F33)
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_MELEE_ATTACKER) == true ) ) then
if ( ( GetItemTypeId(GetManipulatedItem()) == 0x49303453 ) ) then
call DisableTrigger(GetTriggeringTrigger())
call RemoveItem(GetManipulatedItem())
call UnitAddItemByIdSwapped(0x72617466, GetTriggerUnit())
call EnableTrigger(GetTriggeringTrigger())
else
endif
else
if ( ( GetItemTypeId(GetManipulatedItem()) == 0x72617466 ) ) then
call DisableTrigger(GetTriggeringTrigger())
call RemoveItem(GetManipulatedItem())
call UnitAddItemByIdSwapped(0x49303453, GetTriggerUnit())
call EnableTrigger(GetTriggeringTrigger())
else
endif
endif
else
endif
if ( ( ( GetItemTypeId(GetManipulatedItem()) == 0x72646534 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x73726264 ) ) and ( GetUnitAbilityLevel(udg_danwei2[0], 0x41304F33) == 0 ) and ( GetUnitAbilityLevel(udg_danwei2[0], 0x41304F32) == 0 ) and ( GetUnitAbilityLevel(udg_danwei2[0], 0x41304F31) == 0 ) and ( YDWEUnitHasItemOfTypeBJNull(udg_danwei2[0] , 0x72617466) == false ) and ( YDWEUnitHasItemOfTypeBJNull(udg_danwei2[0] , 0x49303453) == false ) ) then
call UnitAddAbility(udg_danwei2[0], 0x41304F32)
call UnitMakeAbilityPermanent(udg_danwei2[0], true, 0x41304F32)
else
endif
if ( ( ( GetItemTypeId(GetManipulatedItem()) == 0x6F76656E ) or ( GetItemTypeId(GetManipulatedItem()) == 0x726E7370 ) ) and ( GetUnitAbilityLevel(udg_danwei2[0], 0x41304F33) == 0 ) and ( GetUnitAbilityLevel(udg_danwei2[0], 0x41304F32) == 0 ) and ( GetUnitAbilityLevel(udg_danwei2[0], 0x41304F31) == 0 ) and ( YDWEUnitHasItemOfTypeBJNull(udg_danwei2[0] , 0x72617466) == false ) and ( YDWEUnitHasItemOfTypeBJNull(udg_danwei2[0] , 0x49303453) == false ) ) then
call UnitAddAbility(udg_danwei2[0], 0x41304F31)
call UnitMakeAbilityPermanent(udg_danwei2[0], true, 0x41304F31)
else
endif
if ( ( ( GetItemTypeId(GetManipulatedItem()) == 0x73666F67 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x66726764 ) ) and ( GetUnitAbilityLevel(udg_danwei2[0], 0x41304F33) == 0 ) and ( GetUnitAbilityLevel(udg_danwei2[0], 0x41304F32) == 0 ) and ( GetUnitAbilityLevel(udg_danwei2[0], 0x41304F31) == 0 ) and ( YDWEUnitHasItemOfTypeBJNull(udg_danwei2[0] , 0x72617466) == false ) and ( YDWEUnitHasItemOfTypeBJNull(udg_danwei2[0] , 0x49303453) == false ) ) then
call UnitAddAbility(udg_danwei2[0], 0x41304F33)
call UnitMakeAbilityPermanent(udg_danwei2[0], true, 0x41304F33)
else
endif
endif
else
endif
else
endif
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
endfunction
function InitTrig_gongxiangwupin takes nothing returns nothing
set gg_trg_gongxiangwupin=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_gongxiangwupin, EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddAction(gg_trg_gongxiangwupin, function Trig_gongxiangwupinActions)
endfunction
function Trig_zhuangbei_newActions takes nothing returns nothing
if ( ( GetItemTypeId(GetSoldItem()) == 0x72686533 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x66726764)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 5500 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x726E7370)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 5500 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x73726264)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 5500 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x66726764))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x726E7370))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x73726264))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
if ( ( IsUnitType(GetBuyingUnit(), UNIT_TYPE_MELEE_ATTACKER) == true ) ) then
call UnitAddItemByIdSwapped(0x72617466, GetBuyingUnit())
else
call UnitAddItemByIdSwapped(0x49303453, GetBuyingUnit())
endif
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5360")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 3500 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 3500 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x72726532 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x6F76656E)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 2000 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x75666C67)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 1500 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x6F76656E))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x75666C67))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x726E7370, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5362")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 2000 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 2000 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303031 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x72646534)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 2000 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x75666C67)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 1500 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x72646534))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x75666C67))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x73726264, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5365")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 2000 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 2000 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x6D616E68 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x73666F67)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 2000 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x75666C67)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 1500 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x73666F67))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x75666C67))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x66726764, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5376")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 2000 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 2000 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303041 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x62737064)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 500 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303231)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 5000 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x62737064))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303231))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x49303037, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5378")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 2500 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 2500 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x74737432 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x656E6773)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 2000 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x72756D70)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 1000 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x656E6773))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x72756D70))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x6D6E7366, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5380")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 1000 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 1000 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303449 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x726C6966)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 600 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x656E6773)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 2000 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x726C6966))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x656E6773))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x49303435, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_7158")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 2400 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 2400 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303446 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303435)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 5000 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303443)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 4000 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303435))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303443))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x4930344A, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_7187")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 4500 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 4500 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x726D6132 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x616D7263)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 600 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x72756D70)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 1000 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x616D7263))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x72756D70))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x6A64726E, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5382")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 900 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 900 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303438 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x4930314D)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 3000 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x72646532)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 2500 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x4930314D))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x72646532))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x49303439, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_7333")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 2500 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 2500 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303442 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303046)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 2500 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x6D636F75)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 2000 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303046))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x6D636F75))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x49303441, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5384")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 1500 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 1500 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x72726531 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x61727368)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 3000 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x72696E31)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 3000 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x61727368))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x72696E31))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x72617463, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5388")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 4000 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 4000 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x74706F77 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x6B336D31)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 1000 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x726C6966)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 600 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x726C6966))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x6B336D31))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x61727368, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5390")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 1400 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 1400 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x74646578 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x72696E31)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 3000 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x63697269)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 3000 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x72696E31))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x63697269))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x636B6E67, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5392")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 6000 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 6000 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x74696E74 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x6D6C7374)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 800 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x73747761)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 1000 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x73747761))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x6D6C7374))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x7372746C, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5394")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 1800 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 1800 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x74647832 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x776F6C67)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 800 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x6173626C)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 1000 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x776F6C67))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x6173626C))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x64757374, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5396")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 1500 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 1500 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303042 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x62737064)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 500 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x6D636F75)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 2000 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x62737064))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x6D636F75))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x49303038, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5398")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 1500 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 1500 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303043 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x62737064)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 500 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x72687468)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 400 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x62737064))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x72687468))
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303148)) == true ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303148))
set udg_zhengshuex[1]=1
else
endif
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
if ( ( udg_zhengshuex[1] == 1 ) ) then
call UnitAddItemByIdSwapped(0x49303235, GetBuyingUnit())
set udg_zhengshuex[1]=0
else
call UnitAddItemByIdSwapped(0x49303039, GetBuyingUnit())
endif
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5400")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 600 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 600 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303044 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x73747761)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 1000 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303036)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 1000 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x73747761))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303036))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x49303035, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5402")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 1000 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 1000 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303034 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303035)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 3000 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x6D6F6474)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 3000 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303035))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x6D6F6474))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x49303032, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5407")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 4000 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 4000 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303048 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x64757374)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 3300 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303441)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 6000 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x64757374))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303441))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x49303047, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5409")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 2700 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 2700 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x4930304A ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x6D6E7366)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 4000 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x72616D31)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 3000 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x6D6E7366))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x72616D31))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x49303049, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5411")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 4500 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 4500 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x74737472 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303137)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 2000 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x6A64726E)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 2500 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303137))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x6A64726E))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x49303030, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5413")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 2500 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 2500 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x74696E32 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x64757374)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 3300 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x7372746C)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 3600 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x6D6E7366)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 4000 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x6D6E7366))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x7372746C))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x64757374))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x74656C73, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5415")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 5500 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 5500 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303257 ) ) then
set udg_zhengshuex[0]=0
set udg_zhengshu2[3]=0
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=6
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ( ( GetItemTypeId(UnitItemInSlotBJ(GetBuyingUnit(), bj_forLoopAIndex)) == 0x49303045 ) ) then
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
if ( ( udg_zhengshu2[3] >= 2 ) ) then
else
if ( ( udg_zhengshu2[3] == 1 ) ) then
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 2000 )
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 4000 )
endif
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303443)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 4000 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303441)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 6000 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303045))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303045))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303443))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303441))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x49303335, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5786")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 3500 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 3500 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303447 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303443)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 4000 )
endif
set udg_zhengshu2[3]=0
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=6
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ( ( GetItemTypeId(UnitItemInSlotBJ(GetBuyingUnit(), bj_forLoopAIndex)) == 0x72696E31 ) ) then
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
if ( ( udg_zhengshu2[3] >= 2 ) ) then
else
if ( ( udg_zhengshu2[3] == 1 ) ) then
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 3000 )
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 6000 )
endif
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x72696E31))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x72696E31))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303443))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x49303448, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_3932")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 3500 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 3500 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x4930304D ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x4930304E)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 1000 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x6A64726E)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 2500 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x4930304E))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x6A64726E))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x4930304C, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5417")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 500 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 500 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x4930304F ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303036)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 1000 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x4930304B)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 1000 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303036))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x4930304B))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x6F666C67, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5419")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 4000 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 4000 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303052 ) ) then
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303053)) == true ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303053))
call UnitAddItemByIdSwapped(0x49303051, GetBuyingUnit())
else
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303050)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 1700 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x64757374)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 3300 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303050))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x64757374))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x49303053, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5422")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 2500 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 2500 ))
endif
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303056 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303035)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 3000 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x7372746C)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 3600 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303035))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x7372746C))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x49303055, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_3706")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 2400 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 2400 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303141 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x72687468)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 400 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x706D6E61)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 400 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x72687468))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x706D6E61))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x49303137, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_3929")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 1200 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 1200 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x4930314A ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x4930304E)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 1000 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x4930304B)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 1000 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x4930304E))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x4930304B))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x4930314D, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_4779")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 1000 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 1000 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303144 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303050)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 1700 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x72646532)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 2500 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x6D6F6474)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 3000 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303050))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x72646532))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x6D6F6474))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x49303146, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_4795")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 2800 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 2800 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303153 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x61727368)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 3000 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x61727368))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x49303155, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_4801")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 4500 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 4500 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303152 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x6D636F75)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 2000 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x6D636F75))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x49303157, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_4843")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 1000 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 1000 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303154 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303038)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 4000 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303157)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 3000 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303038))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303157))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x49303156, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_4984")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 3000 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 3000 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303145 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x4930304E)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 1000 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x72616D31)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 3000 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x4930304E))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x72616D31))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x49303143, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_4732")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 3000 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 3000 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x4930315A ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x72616D31)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 3000 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x63697269)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 3000 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x4930314D)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 3000 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x72616D31))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x63697269))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x4930314D))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x49303159, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_4994")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 6000 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 6000 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303230 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303231)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 5000 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x6D636F75)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 2000 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303231))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x6D636F75))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x49303158, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5114")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 6500 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 6500 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303236 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303051)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 10000 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303046)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 2500 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303051))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303046))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x49303232, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5290")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 5000 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 5000 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303238 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x64757374)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 3300 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303035)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 3000 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x64757374))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303035))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
if ( ( udg_Points >= 0 ) ) then
call UnitAddItemByIdSwapped(0x49303244, GetBuyingUnit())
else
call UnitAddItemByIdSwapped(0x49303237, GetBuyingUnit())
endif
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5291")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 6500 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 6500 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303234 ) ) then
if ( ( udg_Points <= - 1 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x63697269)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 3000 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x63697269))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x49303250, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5292")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 2000 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 2000 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5294")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 2000 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303242 ) ) then
if ( ( udg_Points <= - 1 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303250)) == true ) ) then
set udg_zhengshuex[1]=GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303250))
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 5000 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303251)) == true ) ) then
else
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x72646533)) == true ) ) then
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 1000 )
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 3000 )
endif
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303250))
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303251)) == true ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303251))
else
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x72646533))
endif
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x49303233, GetBuyingUnit())
call SetItemCharges(GetLastCreatedItem(), udg_zhengshuex[1])
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5295")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 3000 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 3000 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5296")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 3000 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303452 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x4930344D)) == true ) ) then
else
set udg_zhengshu2[3]=0
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=6
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ( ( GetItemTypeId(UnitItemInSlotBJ(GetBuyingUnit(), bj_forLoopAIndex)) == 0x4930344C ) ) then
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
if ( ( udg_zhengshu2[3] >= 2 ) ) then
else
if ( ( udg_zhengshu2[3] == 1 ) ) then
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 2500 )
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 5000 )
endif
endif
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x4930344D)) == true ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x4930344D))
else
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x4930344C))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x4930344C))
endif
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x4930344E, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_8418")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 5000 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 5000 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x4930344B ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x4930314D)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 3000 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x4930344D)) == true ) ) then
else
set udg_zhengshu2[3]=0
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=6
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ( ( GetItemTypeId(UnitItemInSlotBJ(GetBuyingUnit(), bj_forLoopAIndex)) == 0x4930344C ) ) then
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
if ( ( udg_zhengshu2[3] >= 2 ) ) then
else
if ( ( udg_zhengshu2[3] == 1 ) ) then
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 2500 )
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 5000 )
endif
endif
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x4930344D)) == true ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x4930344D))
else
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x4930344C))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x4930344C))
endif
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x4930314D))
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x49303139, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_8420")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 4000 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 4000 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303249 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x64757374)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 3300 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x6D636F75)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 2000 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x64757374))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x6D636F75))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x4930324B, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5349")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 1700 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 1700 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303247 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x4930324B)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 7000 )
endif
if ( ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x4930344C)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x4930344D)) == true ) ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 2500 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x4930344C)) == true ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x4930344C))
else
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x4930344D)) == true ) ) then
set udg_zhengshu2[3]=YDWEGetInventoryIndexOfItemTypeBJNull(GetBuyingUnit() , 0x4930344D)
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x4930344D))
call UnitAddItemByIdSwapped(0x4930344C, GetBuyingUnit())
call UnitDropItemSlotBJ(GetBuyingUnit(), bj_lastCreatedItem, udg_zhengshu2[3])
else
endif
endif
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x4930324B))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x4930324D, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5350")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 2500 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 2500 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303248 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x4930324D)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 12000 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303251)) == true ) ) then
else
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x72646533)) == true ) ) then
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 1000 )
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 3000 )
endif
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x4930324D))
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303251)) == true ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303251))
else
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x72646533))
endif
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x4930324C, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5351")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 3000 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 3000 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303241 ) ) then
set udg_zhengshuex[0]=0
set udg_zhengshu2[3]=0
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=6
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ( ( GetItemTypeId(UnitItemInSlotBJ(GetBuyingUnit(), bj_forLoopAIndex)) == 0x7372746C ) ) then
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
if ( ( udg_zhengshu2[3] >= 2 ) ) then
else
if ( ( udg_zhengshu2[3] == 1 ) ) then
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 3600 )
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 7200 )
endif
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x7372746C))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x7372746C))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x49303239, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5412")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 4800 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 4800 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303255 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x62737064)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 500 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303157)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 3000 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x62737064))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303157))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x49303254, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5414")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 1500 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 1500 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303334 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x62737064)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 500 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303251)) == true ) ) then
else
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x72646533)) == true ) ) then
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 1000 )
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 3000 )
endif
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x62737064))
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303251)) == true ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303251))
else
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x72646533))
endif
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x49303333, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5416")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 2500 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 2500 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303451 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303333)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 6000 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303333))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x49303450, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_8343")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 4000 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 4000 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303339 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303231)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 5000 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x75666C67)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 1500 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303231))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x75666C67))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x49303256, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5418")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 5500 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 5500 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x4930334A ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303046)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 2500 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303035)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 3000 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303046))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303035))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x4930334B, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5420")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 3000 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 3000 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303345 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x62737064)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 500 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303338)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 2500 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x62737064))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303338))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x49303348, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5421")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 2000 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 2000 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303346 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x62737064)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 500 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303338)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 2500 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x62737064))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303338))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x49303349, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5425")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 2000 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 2000 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x4930334C ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x4930304E)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 1000 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x4930304E))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x49303351, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5426")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 1000 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 1000 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x4930334D ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303351)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 2000 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x6A64726E)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 2500 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303351))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x6A64726E))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x49303353, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5428")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 2500 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 2500 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303350 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303351)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 2000 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x6D6E7366)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 4000 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303351))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x6D6E7366))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x49303352, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5429")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 2000 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 2000 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x4930334E ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303353)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 7000 )
endif
set udg_zhengshu2[3]=0
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=6
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ( ( GetItemTypeId(UnitItemInSlotBJ(GetBuyingUnit(), bj_forLoopAIndex)) == 0x656E6773 ) ) then
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
if ( ( udg_zhengshu2[3] >= 2 ) ) then
else
if ( ( udg_zhengshu2[3] == 1 ) ) then
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 2000 )
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 4000 )
endif
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x656E6773))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x656E6773))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303353))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x4930335A, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5430")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 4000 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 4000 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x4930334F ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303352)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 8000 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x63697269)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 3000 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303352))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x63697269))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x49303431, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5432")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 4000 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 4000 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303136 ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x656E6773)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 2000 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303057)) == true ) and ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303057))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x656E6773))
call UnitAddItemByIdSwapped(0x49303134, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x656E6773)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 2000 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303135)) == true ) and ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303135))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x656E6773))
call UnitAddItemByIdSwapped(0x49303057, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303137)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 2000 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x656E6773)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 2000 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303137))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x656E6773))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x49303135, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5434")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 2000 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 2000 ))
endif
endif
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303430 ) ) then
set udg_zhengshuex[0]=0
if ( ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303039)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303235)) == true ) ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 1500 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x4930304C)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 4000 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303039)) == true ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303039))
else
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303235))
endif
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x4930304C))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x49303359, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5629")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 4500 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 4500 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x4930344F ) ) then
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x4930344C)) == true ) ) then
set udg_zhengshu2[3]=YDWEGetInventoryIndexOfItemTypeBJNull(GetBuyingUnit() , 0x4930344C)
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x4930344C))
call UnitAddItemByIdSwapped(0x4930344D, GetBuyingUnit())
call UnitDropItemSlotBJ(GetBuyingUnit(), bj_lastCreatedItem, udg_zhengshu2[3])
else
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x4930344C, GetBuyingUnit())
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_1467")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 2500 ))
endif
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303354 ) ) then
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x68736C76)) == true ) ) then
call SetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x68736C76), ( GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x68736C76)) + 1 ))
else
if ( ( UnitInventoryCount(GetBuyingUnit()) < 6 ) ) then
call UnitAddItemByIdSwapped(0x68736C76, GetBuyingUnit())
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5435")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 100 ))
endif
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303355 ) ) then
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x70636C72)) == true ) ) then
call SetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x70636C72), ( GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x70636C72)) + 1 ))
else
if ( ( UnitInventoryCount(GetBuyingUnit()) < 6 ) ) then
call UnitAddItemByIdSwapped(0x70636C72, GetBuyingUnit())
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5436")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 100 ))
endif
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303356 ) ) then
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x73747770)) == true ) ) then
call SetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x73747770), ( GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x73747770)) + 1 ))
else
if ( ( ( GetUnitAbilityLevel(GetBuyingUnit(), 0x41303150) > 0 ) or ( GetUnitAbilityLevel(GetBuyingUnit(), 0x41303444) > 0 ) ) ) then
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_4290")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 150 ))
else
if ( ( UnitInventoryCount(GetBuyingUnit()) < 6 ) ) then
call UnitAddItemByIdSwapped(0x73747770, GetBuyingUnit())
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5437")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 150 ))
endif
endif
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303358 ) ) then
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303343)) == true ) ) then
call SetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303343), ( GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303343)) + 1 ))
else
if ( ( UnitInventoryCount(GetBuyingUnit()) < 6 ) ) then
call UnitAddItemByIdSwapped(0x49303343, GetBuyingUnit())
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5438")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 150 ))
endif
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303357 ) ) then
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303344)) == true ) ) then
call SetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303344), ( GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303344)) + 1 ))
else
if ( ( UnitInventoryCount(GetBuyingUnit()) < 6 ) ) then
call UnitAddItemByIdSwapped(0x49303344, GetBuyingUnit())
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5439")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 300 ))
endif
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x4930325A ) ) then
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x72617463)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 4000 )
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x61727368)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 3000 )
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x72696E31)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 3000 )
endif
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x72617463)) == true ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x72617463))
else
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x61727368))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x72696E31))
endif
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x49303332, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5446")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 5000 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00缺少合成所需的材料/没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 5000 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303341 ) ) then
if ( ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x72646533)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303054)) == true ) ) ) then
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x72646533)) == true ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x72646533))
else
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303054)) == true ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303054))
else
endif
endif
call UnitAddItemByIdSwapped(0x49303251, GetBuyingUnit())
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5447")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 1000 ))
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303059 ) ) then
if ( ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303131)) == true ) and ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303130)) == true ) and ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303058)) == true ) and ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x4930305A)) == true ) ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303131))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303130))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303058))
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x4930305A))
set udg_dian2[41]=GetUnitLoc(GetSellingUnit())
set udg_bossSMR=CreateUnitAtLoc(s__baka_SPlayer(PLAYER_NEUTRAL_AGGRESSIVE), 0x48303032, udg_dian2[41], 270.00)
call PlaySoundOnUnitBJ(gg_snd_BloodElfMageReady1, 100, udg_bossSMR)
call SetHeroLevelBJ(udg_bossSMR, 30, false)
call EnableTrigger(gg_trg_smr1)
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5448")
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x72776174 ) ) then
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x72646533)) == true ) ) then
if ( ( GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x72646533)) <= 1 ) ) then
call SetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x72646533), 2)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Purge\\PurgeBuffTarget.mdl", GetBuyingUnit(), "origin"))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_2856")
endif
else
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303054)) == true ) ) then
set udg_zhengshu2[30]=YDWEGetInventoryIndexOfItemTypeBJNull(GetBuyingUnit() , 0x49303054)
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303054))
call UnitAddItemByIdSwapped(0x72646533, GetBuyingUnit())
call UnitDropItemSlot(GetBuyingUnit(), bj_lastCreatedItem, ( udg_zhengshu2[30] - 1 ))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Purge\\PurgeBuffTarget.mdl", GetBuyingUnit(), "origin"))
else
set udg_zhengshuex[0]=0
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303251)) == true ) ) then
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 3000 )
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x49303251))
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[191]=1
loop
exitwhen udg_aXUNHUAN[191] > 6
if ( ( IsItemOwned(UnitItemInSlotBJ(GetBuyingUnit(), udg_aXUNHUAN[191])) == true ) ) then
else
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
endif
set udg_aXUNHUAN[191]=udg_aXUNHUAN[191] + 1
endloop
if ( ( udg_zhengshu2[3] >= 1 ) ) then
call UnitAddItemByIdSwapped(0x72646533, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5456")
endif
else
endif
endif
endif
else
endif
endfunction
function InitTrig_zhuangbei_new takes nothing returns nothing
set gg_trg_zhuangbei_new=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_zhuangbei_new, EVENT_PLAYER_UNIT_SELL_ITEM)
call TriggerAddAction(gg_trg_zhuangbei_new, function Trig_zhuangbei_newActions)
endfunction
function Trig_fuwenActions takes nothing returns nothing
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303434 ) ) then
if ( ( IsUnitType(GetBuyingUnit(), UNIT_TYPE_HERO) == true ) ) then
if ( ( GetUnitAbilityLevel(GetBuyingUnit(), 0x41303444) == 0 ) ) then
set udg_zhengshuex[0]=0
if ( ( GetUnitAbilityLevel(GetBuyingUnit(), 0x41303150) == 0 ) ) then
if ( ( udg_fuwen[( 0 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetBuyingUnit())) + 1 ) )] == 0 ) ) then
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x73747770)) == true ) ) then
set udg_zhengshuex[0]=( udg_zhengshuex[0] + ( 2500 - ( 150 * GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x73747770)) ) ) )
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 2500 )
endif
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 0 )
endif
else
if ( ( udg_fuwen[( 0 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetBuyingUnit())) + 1 ) )] == 1 ) ) then
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x73747770)) == true ) ) then
set udg_zhengshuex[0]=( udg_zhengshuex[0] + ( 3500 - ( 150 * GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x73747770)) ) ) )
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 3500 )
endif
else
endif
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call UnitRemoveAbility(GetBuyingUnit(), 0x41304D46)
call UnitRemoveBuffBJ(0x42303331, GetBuyingUnit())
call UnitRemoveAbility(GetBuyingUnit(), 0x41304D47)
call UnitRemoveBuffBJ(0x42303332, GetBuyingUnit())
call UnitRemoveAbility(GetBuyingUnit(), 0x41304E59)
call UnitRemoveBuffBJ(0x4230334A, GetBuyingUnit())
call UnitRemoveAbility(GetBuyingUnit(), 0x41304E5A)
call UnitRemoveBuffBJ(0x42303349, GetBuyingUnit())
call SetPlayerAbilityAvailable(GetOwningPlayer(GetBuyingUnit()), 0x4130464B, true)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetBuyingUnit()), 0x41304D45, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetBuyingUnit()), 0x41304D4F, false)
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
if ( ( ( GetUnitAbilityLevel(GetBuyingUnit(), 0x41303150) == 1 ) or ( udg_fuwen[( 0 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetBuyingUnit())) + 1 ) )] == 2 ) ) ) then
if ( ( udg_fuwen[( 0 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetBuyingUnit())) + 1 ) )] == 2 ) ) then
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_6905")
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_6906")
endif
call SetUnitAbilityLevel(GetBuyingUnit(), 0x4130464B, 2)
call UnitRemoveAbility(GetBuyingUnit(), 0x41303150)
call UnitRemoveBuffBJ(0x42303251, GetBuyingUnit())
call UnitAddAbility(GetBuyingUnit(), 0x41303444)
call UnitMakeAbilityPermanent(GetBuyingUnit(), true, 0x41303444)
set udg_fuwen[( 0 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetBuyingUnit())) + 1 ) )]=2
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x73747770)) == true ) ) then
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_6837")
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x73747770))
else
endif
else
if ( ( udg_fuwen[( 0 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetBuyingUnit())) + 1 ) )] == 1 ) ) then
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_6903")
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_6902")
endif
call UnitAddAbility(GetBuyingUnit(), 0x4130464B)
call UnitMakeAbilityPermanent(GetBuyingUnit(), true, 0x4130464B)
call UnitAddAbility(GetBuyingUnit(), 0x41303150)
call UnitMakeAbilityPermanent(GetBuyingUnit(), true, 0x41303150)
set udg_fuwen[( 0 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetBuyingUnit())) + 1 ) )]=1
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x73747770)) == true ) ) then
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5878")
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(GetBuyingUnit() , 0x73747770))
else
endif
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_1318")
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_5910")
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303436 ) ) then
if ( ( IsUnitType(GetBuyingUnit(), UNIT_TYPE_HERO) == true ) ) then
if ( ( GetUnitAbilityLevel(GetBuyingUnit(), 0x41304D47) == 0 ) ) then
set udg_zhengshuex[0]=0
if ( ( GetUnitAbilityLevel(GetBuyingUnit(), 0x41304D46) == 0 ) ) then
if ( ( udg_fuwen[( 10 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetBuyingUnit())) + 1 ) )] == 0 ) ) then
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 3000 )
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 0 )
endif
else
if ( ( udg_fuwen[( 10 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetBuyingUnit())) + 1 ) )] == 1 ) ) then
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 3000 )
else
endif
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call UnitRemoveAbility(GetBuyingUnit(), 0x41303150)
call UnitRemoveBuffBJ(0x42303251, GetBuyingUnit())
call UnitRemoveAbility(GetBuyingUnit(), 0x41303444)
call UnitRemoveBuffBJ(0x42303252, GetBuyingUnit())
call UnitRemoveAbility(GetBuyingUnit(), 0x41304E59)
call UnitRemoveBuffBJ(0x4230334A, GetBuyingUnit())
call UnitRemoveAbility(GetBuyingUnit(), 0x41304E5A)
call UnitRemoveBuffBJ(0x42303349, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
call SetPlayerAbilityAvailable(GetOwningPlayer(GetBuyingUnit()), 0x4130464B, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetBuyingUnit()), 0x41304D45, true)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetBuyingUnit()), 0x41304D4F, false)
if ( ( ( GetUnitAbilityLevel(GetBuyingUnit(), 0x41304D46) == 1 ) or ( udg_fuwen[( 10 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetBuyingUnit())) + 1 ) )] == 2 ) ) ) then
if ( ( udg_fuwen[( 10 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetBuyingUnit())) + 1 ) )] == 2 ) ) then
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_6900")
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_6901")
endif
call SetUnitAbilityLevel(GetBuyingUnit(), 0x41304D45, 2)
call UnitRemoveAbility(GetBuyingUnit(), 0x41304D46)
call UnitRemoveBuffBJ(0x42303331, GetBuyingUnit())
call UnitAddAbility(GetBuyingUnit(), 0x41304D47)
call UnitMakeAbilityPermanent(GetBuyingUnit(), true, 0x41304D47)
set udg_fuwen[( 10 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetBuyingUnit())) + 1 ) )]=2
else
if ( ( udg_fuwen[( 10 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetBuyingUnit())) + 1 ) )] == 1 ) ) then
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_6899")
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_4490")
endif
call UnitAddAbility(GetBuyingUnit(), 0x41304D45)
call UnitMakeAbilityPermanent(GetBuyingUnit(), true, 0x41304D45)
call UnitAddAbility(GetBuyingUnit(), 0x41304D46)
call UnitMakeAbilityPermanent(GetBuyingUnit(), true, 0x41304D46)
set udg_fuwen[( 10 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetBuyingUnit())) + 1 ) )]=1
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_6907")
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_3317")
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303444 ) ) then
if ( ( IsUnitType(GetBuyingUnit(), UNIT_TYPE_HERO) == true ) ) then
if ( ( GetUnitAbilityLevel(GetBuyingUnit(), 0x41304E5A) == 0 ) ) then
set udg_zhengshuex[0]=0
if ( ( GetUnitAbilityLevel(GetBuyingUnit(), 0x41304E59) == 0 ) ) then
if ( ( udg_fuwen[( 20 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetBuyingUnit())) + 1 ) )] == 0 ) ) then
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 3000 )
else
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 0 )
endif
else
if ( ( udg_fuwen[( 20 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetBuyingUnit())) + 1 ) )] == 1 ) ) then
set udg_zhengshuex[0]=( udg_zhengshuex[0] + 3000 )
else
endif
endif
if ( ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) >= udg_zhengshuex[0] ) ) then
call UnitRemoveAbility(GetBuyingUnit(), 0x41303150)
call UnitRemoveBuffBJ(0x42303251, GetBuyingUnit())
call UnitRemoveAbility(GetBuyingUnit(), 0x41303444)
call UnitRemoveBuffBJ(0x42303252, GetBuyingUnit())
call UnitRemoveAbility(GetBuyingUnit(), 0x41304D46)
call UnitRemoveBuffBJ(0x42303331, GetBuyingUnit())
call UnitRemoveAbility(GetBuyingUnit(), 0x41304D47)
call UnitRemoveBuffBJ(0x42303332, GetBuyingUnit())
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) - udg_zhengshuex[0] ))
call SetPlayerAbilityAvailable(GetOwningPlayer(GetBuyingUnit()), 0x4130464B, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetBuyingUnit()), 0x41304D45, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(GetBuyingUnit()), 0x41304D4F, true)
if ( ( ( GetUnitAbilityLevel(GetBuyingUnit(), 0x41304E59) == 1 ) or ( udg_fuwen[( 20 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetBuyingUnit())) + 1 ) )] == 2 ) ) ) then
if ( ( udg_fuwen[( 20 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetBuyingUnit())) + 1 ) )] == 2 ) ) then
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_3066")
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_3067")
endif
call SetUnitAbilityLevel(GetBuyingUnit(), 0x41304D4F, 2)
call UnitRemoveAbility(GetBuyingUnit(), 0x41304E59)
call UnitRemoveBuffBJ(0x4230334A, GetBuyingUnit())
call UnitAddAbility(GetBuyingUnit(), 0x41304E5A)
call UnitMakeAbilityPermanent(GetBuyingUnit(), true, 0x41304E5A)
set udg_fuwen[( 20 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetBuyingUnit())) + 1 ) )]=2
else
if ( ( udg_fuwen[( 20 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetBuyingUnit())) + 1 ) )] == 1 ) ) then
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_3622")
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_3621")
endif
call UnitAddAbility(GetBuyingUnit(), 0x41304D4F)
call UnitMakeAbilityPermanent(GetBuyingUnit(), true, 0x41304D4F)
call UnitAddAbility(GetBuyingUnit(), 0x41304E59)
call UnitMakeAbilityPermanent(GetBuyingUnit(), true, 0x41304E59)
set udg_fuwen[( 20 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetBuyingUnit())) + 1 ) )]=1
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffffcc00没有足够的钱购买，还差|r|cffffdd00" + ( I2S(( udg_zhengshuex[0] - GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) )) + "|r|cffffcc00金币|r" ) ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_3623")
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_2505")
endif
else
endif
if ( ( GetItemTypeId(GetSoldItem()) == 0x49303437 ) ) then
if ( ( udg_fuwen[( 0 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetBuyingUnit())) + 1 ) )] > 0 ) ) then
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cff75aaff灵动|r符文：|cffffcc00 " + ( I2S(udg_fuwen[( 0 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetBuyingUnit())) + 1 ) )]) + " |r级" ) ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cff75aaff灵动|r符文：|cff757575未拥有|r" ))
endif
if ( ( udg_fuwen[( 10 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetBuyingUnit())) + 1 ) )] > 0 ) ) then
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cff00ff00恢复|r符文：|cffffcc00 " + ( I2S(udg_fuwen[( 10 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetBuyingUnit())) + 1 ) )]) + " |r级" ) ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cff00ff00恢复|r符文：|cff757575未拥有|r" ))
endif
if ( ( udg_fuwen[( 20 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetBuyingUnit())) + 1 ) )] > 0 ) ) then
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffff1500疯狂|r符文：|cffffcc00 " + ( I2S(udg_fuwen[( 20 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetBuyingUnit())) + 1 ) )]) + " |r级" ) ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, ( "|cffff1500疯狂|r符文：|cff757575未拥有|r" ))
endif
else
endif
if ( ( GetItemType(GetSoldItem()) == ITEM_TYPE_POWERUP ) ) then
call RemoveItem(GetSoldItem())
else
endif
endfunction
function InitTrig_fuwen takes nothing returns nothing
set gg_trg_fuwen=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_fuwen, EVENT_PLAYER_UNIT_SELL_ITEM)
call TriggerAddAction(gg_trg_fuwen, function Trig_fuwenActions)
endfunction
function Trig_aoshufaqiu_2Conditions takes nothing returns boolean
return ( ( ( GetItemTypeId(GetManipulatedItem()) == 0x49303351 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x49303353 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x49303352 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x4930335A ) or ( GetItemTypeId(GetManipulatedItem()) == 0x49303431 ) ) )
endfunction
function Trig_aoshufaqiu_2Actions takes nothing returns nothing
set udg_danwei2[0]=GetManipulatingUnit()
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[0]=1
loop
exitwhen udg_aXUNHUAN[0] > 6
if ( ( ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[0])) == 0x49303353 ) or ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[0])) == 0x49303352 ) or ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[0])) == 0x4930335A ) or ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[0])) == 0x49303431 ) or ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[0])) == 0x49303351 ) ) ) then
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
else
endif
set udg_aXUNHUAN[0]=udg_aXUNHUAN[0] + 1
endloop
if ( ( udg_zhengshu2[3] <= 1 ) ) then
call UnitRemoveAbility(udg_danwei2[0], 0x41304845)
call UnitRemoveAbility(udg_danwei2[0], 0x41304A54)
else
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_aoshufaqiu_2 takes nothing returns nothing
set gg_trg_aoshufaqiu_2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_aoshufaqiu_2, EVENT_PLAYER_UNIT_DROP_ITEM)
call TriggerAddCondition(gg_trg_aoshufaqiu_2, Condition(function Trig_aoshufaqiu_2Conditions))
call TriggerAddAction(gg_trg_aoshufaqiu_2, function Trig_aoshufaqiu_2Actions)
endfunction
function Trig_aoshufaqiu_3Actions takes nothing returns nothing
if ( ( GetExpiredTimer() == udg_jishiqi[160] ) and ( GetUnitAbilityLevel(udg_player[1], 0x41304845) == 1 ) ) then
call UnitAddAbility(udg_player[1], 0x41304A54)
call UnitMakeAbilityPermanent(udg_player[1], true, 0x41304A54)
else
if ( ( GetExpiredTimer() == udg_jishiqi[161] ) and ( GetUnitAbilityLevel(udg_player[2], 0x41304845) == 1 ) ) then
call UnitAddAbility(udg_player[2], 0x41304A54)
call UnitMakeAbilityPermanent(udg_player[2], true, 0x41304A54)
else
if ( ( GetExpiredTimer() == udg_jishiqi[162] ) and ( GetUnitAbilityLevel(udg_player[3], 0x41304845) == 1 ) ) then
call UnitAddAbility(udg_player[3], 0x41304A54)
call UnitMakeAbilityPermanent(udg_player[3], true, 0x41304A54)
else
if ( ( GetExpiredTimer() == udg_jishiqi[163] ) and ( GetUnitAbilityLevel(udg_player[4], 0x41304845) == 1 ) ) then
call UnitAddAbility(udg_player[4], 0x41304A54)
call UnitMakeAbilityPermanent(udg_player[4], true, 0x41304A54)
else
if ( ( GetExpiredTimer() == udg_jishiqi[164] ) and ( GetUnitAbilityLevel(udg_player[5], 0x41304845) == 1 ) ) then
call UnitAddAbility(udg_player[5], 0x41304A54)
call UnitMakeAbilityPermanent(udg_player[5], true, 0x41304A54)
else
if ( ( GetExpiredTimer() == udg_jishiqi[165] ) and ( GetUnitAbilityLevel(udg_player[6], 0x41304845) == 1 ) ) then
call UnitAddAbility(udg_player[6], 0x41304A54)
call UnitMakeAbilityPermanent(udg_player[6], true, 0x41304A54)
else
if ( ( GetExpiredTimer() == udg_jishiqi[166] ) and ( GetUnitAbilityLevel(udg_player[7], 0x41304845) == 1 ) ) then
call UnitAddAbility(udg_player[7], 0x41304A54)
call UnitMakeAbilityPermanent(udg_player[7], true, 0x41304A54)
else
if ( ( GetExpiredTimer() == udg_jishiqi[167] ) and ( GetUnitAbilityLevel(udg_player[8], 0x41304845) == 1 ) ) then
call UnitAddAbility(udg_player[8], 0x41304A54)
call UnitMakeAbilityPermanent(udg_player[8], true, 0x41304A54)
else
if ( ( GetExpiredTimer() == udg_jishiqi[168] ) and ( GetUnitAbilityLevel(udg_player[9], 0x41304845) == 1 ) ) then
call UnitAddAbility(udg_player[9], 0x41304A54)
call UnitMakeAbilityPermanent(udg_player[9], true, 0x41304A54)
else
if ( ( GetExpiredTimer() == udg_jishiqi[169] ) and ( GetUnitAbilityLevel(udg_player[10], 0x41304845) == 1 ) ) then
call UnitAddAbility(udg_player[10], 0x41304A54)
call UnitMakeAbilityPermanent(udg_player[10], true, 0x41304A54)
else
endif
endif
endif
endif
endif
endif
endif
endif
endif
endif
endfunction
function InitTrig_aoshufaqiu_3 takes nothing returns nothing
set gg_trg_aoshufaqiu_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_aoshufaqiu_3, udg_jishiqi[160])
call TriggerRegisterTimerExpireEvent(gg_trg_aoshufaqiu_3, udg_jishiqi[161])
call TriggerRegisterTimerExpireEvent(gg_trg_aoshufaqiu_3, udg_jishiqi[162])
call TriggerRegisterTimerExpireEvent(gg_trg_aoshufaqiu_3, udg_jishiqi[163])
call TriggerRegisterTimerExpireEvent(gg_trg_aoshufaqiu_3, udg_jishiqi[164])
call TriggerRegisterTimerExpireEvent(gg_trg_aoshufaqiu_3, udg_jishiqi[165])
call TriggerRegisterTimerExpireEvent(gg_trg_aoshufaqiu_3, udg_jishiqi[166])
call TriggerRegisterTimerExpireEvent(gg_trg_aoshufaqiu_3, udg_jishiqi[167])
call TriggerRegisterTimerExpireEvent(gg_trg_aoshufaqiu_3, udg_jishiqi[168])
call TriggerRegisterTimerExpireEvent(gg_trg_aoshufaqiu_3, udg_jishiqi[169])
call TriggerAddAction(gg_trg_aoshufaqiu_3, function Trig_aoshufaqiu_3Actions)
endfunction
function Trig_xuanfengzhanfu_2Conditions takes nothing returns boolean
return ( ( ( GetItemTypeId(GetManipulatedItem()) == 0x49303237 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x49303244 ) ) )
endfunction
function Trig_xuanfengzhanfu_2Actions takes nothing returns nothing
set udg_danwei2[0]=GetManipulatingUnit()
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[1]=1
loop
exitwhen udg_aXUNHUAN[1] > 6
if ( ( ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[1])) == 0x49303237 ) or ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[1])) == 0x49303244 ) ) ) then
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
else
endif
set udg_aXUNHUAN[1]=udg_aXUNHUAN[1] + 1
endloop
if ( ( udg_zhengshu2[3] <= 1 ) ) then
call UnitRemoveAbility(udg_danwei2[0], 0x4130394E)
else
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_xuanfengzhanfu_2 takes nothing returns nothing
set gg_trg_xuanfengzhanfu_2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_xuanfengzhanfu_2, EVENT_PLAYER_UNIT_DROP_ITEM)
call TriggerAddCondition(gg_trg_xuanfengzhanfu_2, Condition(function Trig_xuanfengzhanfu_2Conditions))
call TriggerAddAction(gg_trg_xuanfengzhanfu_2, function Trig_xuanfengzhanfu_2Actions)
endfunction
function Trig_xuanfengzhanfu_attActions takes nothing returns nothing
set udg_danwei2[0]=GetAttacker()
set udg_danwei2[1]=GetAttackedUnitBJ()
if ( ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303237)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303244)) == true ) ) and ( GetUnitAbilityLevel(udg_danwei2[0], 0x4130394E) < 11 ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call IncUnitAbilityLevel(udg_danwei2[0], 0x4130394E)
else
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303047)) == true ) and ( GetUnitAbilityLevel(udg_danwei2[0], 0x41303231) > 0 ) ) then
if ( ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) and ( GetRandomReal(0, 100.00) <= 20.00 ) ) then
call SetUnitAbilityLevel(udg_danwei2[0], 0x41303231, 2)
else
call SetUnitAbilityLevel(udg_danwei2[0], 0x41303231, 1)
endif
else
endif
set udg_danwei2[0]=null
set udg_danwei2[1]=null
endfunction
function InitTrig_xuanfengzhanfu_att takes nothing returns nothing
set gg_trg_xuanfengzhanfu_att=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_xuanfengzhanfu_att, EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddAction(gg_trg_xuanfengzhanfu_att, function Trig_xuanfengzhanfu_attActions)
endfunction
function Trig_xuanfengzhanfu_downActions takes nothing returns nothing
set udg_aXUNHUAN[2]=1
loop
exitwhen udg_aXUNHUAN[2] > 10
if ( ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_player[udg_aXUNHUAN[2]] , 0x49303237)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_player[udg_aXUNHUAN[2]] , 0x49303244)) == true ) ) and ( GetUnitAbilityLevel(udg_player[udg_aXUNHUAN[2]], 0x4130394E) > 1 ) ) then
call DecUnitAbilityLevel(udg_player[udg_aXUNHUAN[2]], 0x4130394E)
else
endif
set udg_aXUNHUAN[2]=udg_aXUNHUAN[2] + 1
endloop
endfunction
function InitTrig_xuanfengzhanfu_down takes nothing returns nothing
set gg_trg_xuanfengzhanfu_down=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_xuanfengzhanfu_down, 2)
call TriggerAddAction(gg_trg_xuanfengzhanfu_down, function Trig_xuanfengzhanfu_downActions)
endfunction
function Trig_rexuebiaoqiang_2Conditions takes nothing returns boolean
return ( ( GetItemTypeId(GetManipulatedItem()) == 0x49303047 ) )
endfunction
function Trig_rexuebiaoqiang_2Actions takes nothing returns nothing
set udg_danwei2[0]=GetManipulatingUnit()
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[3]=1
loop
exitwhen udg_aXUNHUAN[3] > 6
if ( ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[3])) == 0x49303047 ) ) then
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
else
endif
set udg_aXUNHUAN[3]=udg_aXUNHUAN[3] + 1
endloop
if ( ( udg_zhengshu2[3] <= 1 ) ) then
call UnitRemoveAbility(udg_danwei2[0], 0x41303231)
else
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_rexuebiaoqiang_2 takes nothing returns nothing
set gg_trg_rexuebiaoqiang_2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_rexuebiaoqiang_2, EVENT_PLAYER_UNIT_DROP_ITEM)
call TriggerAddCondition(gg_trg_rexuebiaoqiang_2, Condition(function Trig_rexuebiaoqiang_2Conditions))
call TriggerAddAction(gg_trg_rexuebiaoqiang_2, function Trig_rexuebiaoqiang_2Actions)
endfunction
function Trig_shengshisuipianConditions takes nothing returns boolean
return ( ( ( GetItemTypeId(GetManipulatedItem()) == 0x4930344A ) or ( GetItemTypeId(GetManipulatedItem()) == 0x49303448 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x49303443 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x49303335 ) ) )
endfunction
function Trig_shengshisuipianActions takes nothing returns nothing
set udg_danwei2[0]=GetManipulatingUnit()
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[1]=1
loop
exitwhen udg_aXUNHUAN[1] > 6
if ( ( ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[1])) == 0x4930344A ) or ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[1])) == 0x49303448 ) or ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[1])) == 0x49303335 ) or ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[1])) == 0x49303443 ) ) ) then
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
else
endif
set udg_aXUNHUAN[1]=udg_aXUNHUAN[1] + 1
endloop
if ( ( udg_zhengshu2[3] <= 1 ) ) then
call UnitRemoveAbility(udg_danwei2[0], 0x41304D54)
call UnitRemoveBuffBJ(0x42303039, udg_danwei2[0])
else
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_shengshisuipian takes nothing returns nothing
set gg_trg_shengshisuipian=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_shengshisuipian, EVENT_PLAYER_UNIT_DROP_ITEM)
call TriggerAddCondition(gg_trg_shengshisuipian, Condition(function Trig_shengshisuipianConditions))
call TriggerAddAction(gg_trg_shengshisuipian, function Trig_shengshisuipianActions)
endfunction
function Trig_faqiufumoConditions takes nothing returns boolean
return ( ( ( GetItemTypeId(GetManipulatedItem()) == 0x72646534 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x73726264 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x6F76656E ) or ( GetItemTypeId(GetManipulatedItem()) == 0x726E7370 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x73666F67 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x66726764 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x72617466 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x49303453 ) ) )
endfunction
function Trig_faqiufumoActions takes nothing returns nothing
set udg_danwei2[0]=GetManipulatingUnit()
set udg_zhengshu2[3]=0
if ( ( ( GetItemTypeId(GetManipulatedItem()) == 0x72617466 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x49303453 ) ) ) then
if ( ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x72646534)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x73726264)) == true ) ) ) then
call UnitAddAbility(udg_danwei2[0], 0x41304F32)
call UnitMakeAbilityPermanent(udg_danwei2[0], true, 0x41304F32)
else
if ( ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x6F76656E)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x726E7370)) == true ) ) ) then
call UnitAddAbility(udg_danwei2[0], 0x41304F31)
call UnitMakeAbilityPermanent(udg_danwei2[0], true, 0x41304F31)
else
if ( ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x73666F67)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x66726764)) == true ) ) ) then
call UnitAddAbility(udg_danwei2[0], 0x41304F33)
call UnitMakeAbilityPermanent(udg_danwei2[0], true, 0x41304F33)
else
endif
endif
endif
else
if ( ( ( GetItemTypeId(GetManipulatedItem()) == 0x72646534 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x73726264 ) ) ) then
set udg_aXUNHUAN[1]=1
loop
exitwhen udg_aXUNHUAN[1] > 6
if ( ( ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[1])) == 0x72646534 ) or ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[1])) == 0x73726264 ) ) ) then
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
else
endif
set udg_aXUNHUAN[1]=udg_aXUNHUAN[1] + 1
endloop
if ( ( udg_zhengshu2[3] <= 1 ) ) then
call UnitRemoveAbility(udg_danwei2[0], 0x41304F32)
if ( ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x6F76656E)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x726E7370)) == true ) ) ) then
call UnitAddAbility(udg_danwei2[0], 0x41304F31)
call UnitMakeAbilityPermanent(udg_danwei2[0], true, 0x41304F31)
else
if ( ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x73666F67)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x66726764)) == true ) ) ) then
call UnitAddAbility(udg_danwei2[0], 0x41304F33)
call UnitMakeAbilityPermanent(udg_danwei2[0], true, 0x41304F33)
else
endif
endif
else
endif
else
endif
if ( ( ( GetItemTypeId(GetManipulatedItem()) == 0x6F76656E ) or ( GetItemTypeId(GetManipulatedItem()) == 0x726E7370 ) ) ) then
set udg_aXUNHUAN[1]=1
loop
exitwhen udg_aXUNHUAN[1] > 6
if ( ( ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[1])) == 0x6F76656E ) or ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[1])) == 0x72726532 ) ) ) then
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
else
endif
set udg_aXUNHUAN[1]=udg_aXUNHUAN[1] + 1
endloop
if ( ( udg_zhengshu2[3] <= 1 ) ) then
call UnitRemoveAbility(udg_danwei2[0], 0x41304F31)
if ( ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x72646534)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x73726264)) == true ) ) ) then
call UnitAddAbility(udg_danwei2[0], 0x41304F32)
call UnitMakeAbilityPermanent(udg_danwei2[0], true, 0x41304F32)
else
if ( ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x73666F67)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x66726764)) == true ) ) ) then
call UnitAddAbility(udg_danwei2[0], 0x41304F33)
call UnitMakeAbilityPermanent(udg_danwei2[0], true, 0x41304F33)
else
endif
endif
else
endif
else
endif
if ( ( ( GetItemTypeId(GetManipulatedItem()) == 0x73666F67 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x66726764 ) ) ) then
set udg_aXUNHUAN[1]=1
loop
exitwhen udg_aXUNHUAN[1] > 6
if ( ( ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[1])) == 0x73666F67 ) or ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[1])) == 0x6D616E68 ) ) ) then
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
else
endif
set udg_aXUNHUAN[1]=udg_aXUNHUAN[1] + 1
endloop
if ( ( udg_zhengshu2[3] <= 1 ) ) then
call UnitRemoveAbility(udg_danwei2[0], 0x41304F33)
if ( ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x72646534)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x73726264)) == true ) ) ) then
call UnitAddAbility(udg_danwei2[0], 0x41304F32)
call UnitMakeAbilityPermanent(udg_danwei2[0], true, 0x41304F32)
else
if ( ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x6F76656E)) == true ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x726E7370)) == true ) ) ) then
call UnitAddAbility(udg_danwei2[0], 0x41304F31)
call UnitMakeAbilityPermanent(udg_danwei2[0], true, 0x41304F31)
else
endif
endif
else
endif
else
endif
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_faqiufumo takes nothing returns nothing
set gg_trg_faqiufumo=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_faqiufumo, EVENT_PLAYER_UNIT_DROP_ITEM)
call TriggerAddCondition(gg_trg_faqiufumo, Condition(function Trig_faqiufumoConditions))
call TriggerAddAction(gg_trg_faqiufumo, function Trig_faqiufumoActions)
endfunction
function Trig_faqiufumo_huoqiuActions takes nothing returns nothing
set udg_danwei2[0]=GetSpellAbilityUnit()
if ( ( YDWEUnitHasItemOfTypeBJNull(udg_danwei2[0] , 0x72617466) == false ) and ( YDWEUnitHasItemOfTypeBJNull(udg_danwei2[0] , 0x49303453) == false ) ) then
call UnitRemoveAbility(udg_danwei2[0], 0x41304F31)
call UnitRemoveAbility(udg_danwei2[0], 0x41304F33)
call UnitAddAbility(udg_danwei2[0], 0x41304F32)
call UnitMakeAbilityPermanent(udg_danwei2[0], true, 0x41304F32)
else
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_faqiufumo_huoqiu takes nothing returns nothing
set gg_trg_faqiufumo_huoqiu=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_faqiufumo_huoqiu , 3 , 0x41304F34)
call TriggerAddAction(gg_trg_faqiufumo_huoqiu, function Trig_faqiufumo_huoqiuActions)
endfunction
function Trig_faqiufumo_duqiuActions takes nothing returns nothing
set udg_danwei2[0]=GetSpellAbilityUnit()
if ( ( YDWEUnitHasItemOfTypeBJNull(udg_danwei2[0] , 0x72617466) == false ) and ( YDWEUnitHasItemOfTypeBJNull(udg_danwei2[0] , 0x49303453) == false ) ) then
call UnitRemoveAbility(udg_danwei2[0], 0x41304F32)
call UnitRemoveAbility(udg_danwei2[0], 0x41304F33)
call UnitAddAbility(udg_danwei2[0], 0x41304F31)
call UnitMakeAbilityPermanent(udg_danwei2[0], true, 0x41304F31)
else
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_faqiufumo_duqiu takes nothing returns nothing
set gg_trg_faqiufumo_duqiu=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_faqiufumo_duqiu , 3 , 0x41304F35)
call TriggerAddAction(gg_trg_faqiufumo_duqiu, function Trig_faqiufumo_duqiuActions)
endfunction
function Trig_faqiufumo_bingqiuActions takes nothing returns nothing
set udg_danwei2[0]=GetSpellAbilityUnit()
if ( ( YDWEUnitHasItemOfTypeBJNull(udg_danwei2[0] , 0x72617466) == false ) and ( YDWEUnitHasItemOfTypeBJNull(udg_danwei2[0] , 0x49303453) == false ) ) then
call UnitRemoveAbility(udg_danwei2[0], 0x41304F32)
call UnitRemoveAbility(udg_danwei2[0], 0x41304F31)
call UnitAddAbility(udg_danwei2[0], 0x41304F33)
call UnitMakeAbilityPermanent(udg_danwei2[0], true, 0x41304F33)
else
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_faqiufumo_bingqiu takes nothing returns nothing
set gg_trg_faqiufumo_bingqiu=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_faqiufumo_bingqiu , 3 , 0x41304F36)
call TriggerAddAction(gg_trg_faqiufumo_bingqiu, function Trig_faqiufumo_bingqiuActions)
endfunction
function Trig_longchaActions takes nothing returns nothing
set udg_aXUNHUAN[4]=1
loop
exitwhen udg_aXUNHUAN[4] > 10
if ( ( udg_zhengshu2[( 352 + udg_aXUNHUAN[4] )] > 0 ) ) then
call SetUnitManaBJ(udg_player[udg_aXUNHUAN[4]], ( GetUnitState(udg_player[udg_aXUNHUAN[4]], UNIT_STATE_MANA) - ( udg_shishu2[( 352 + udg_aXUNHUAN[4] )] / I2R(udg_zhengshu2[( 352 + udg_aXUNHUAN[4] )]) ) ))
if ( ( ( udg_shishu2[( 352 + udg_aXUNHUAN[4] )] / I2R(udg_zhengshu2[( 352 + udg_aXUNHUAN[4] )]) ) >= 5.00 ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Feedback\\ArcaneTowerAttack.mdl", udg_player[udg_aXUNHUAN[4]], "origin"))
if ( ( ( udg_shishu2[( 352 + udg_aXUNHUAN[4] )] / I2R(udg_zhengshu2[( 352 + udg_aXUNHUAN[4] )]) ) >= 20.00 ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FreezingBreath\\FreezingBreathMissile.mdl", udg_player[udg_aXUNHUAN[4]], "origin"))
else
endif
else
endif
set udg_shishu2[( 352 + udg_aXUNHUAN[4] )]=( udg_shishu2[( 352 + udg_aXUNHUAN[4] )] * ( ( I2R(udg_zhengshu2[( 352 + udg_aXUNHUAN[4] )]) - 1.00 ) / ( I2R(udg_zhengshu2[( 352 + udg_aXUNHUAN[4] )]) - 0.00 ) ) )
set udg_zhengshu2[( 352 + udg_aXUNHUAN[4] )]=( udg_zhengshu2[( 352 + udg_aXUNHUAN[4] )] - 1 )
if ( ( IsUnitType(udg_player[udg_aXUNHUAN[4]], UNIT_TYPE_DEAD) == true ) ) then
set udg_shishu2[( 352 + udg_aXUNHUAN[4] )]=0.00
set udg_zhengshu2[( 352 + udg_aXUNHUAN[4] )]=0
else
endif
else
endif
set udg_aXUNHUAN[4]=udg_aXUNHUAN[4] + 1
endloop
endfunction
function InitTrig_longcha takes nothing returns nothing
set gg_trg_longcha=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_longcha, 0.60)
call TriggerAddAction(gg_trg_longcha, function Trig_longchaActions)
endfunction
function Trig_nengliangzhirenFunc003Func004T takes nothing returns nothing
call UnitRemoveAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xC58841DE), 0x41304E4C)
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
endfunction
function Trig_nengliangzhirenActions takes nothing returns nothing
local timer ydl_timer
local integer ydl_localvar_step=LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76)
set ydl_localvar_step=ydl_localvar_step + 3
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76, ydl_localvar_step)
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xECE825E7, ydl_localvar_step)
set udg_danwei2[0]=GetSpellAbilityUnit()
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_HERO) == true ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
call SetUnitManaBJ(udg_danwei2[0], ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) + 200.00 ))
call UnitAddAbility(udg_danwei2[0], 0x41304E4C)
set ydl_timer=CreateTimer()
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0xC58841DE, GetTriggerUnit())
call TimerStart(ydl_timer, 5.00, false, function Trig_nengliangzhirenFunc003Func004T)
call RemoveLocation(udg_dian2[0])
else
call IssueImmediateOrderById(udg_danwei2[0], 851972)
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_7124")
endif
set udg_danwei2[0]=null
call FlushChildHashtable(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step)
set ydl_timer=null
endfunction
function InitTrig_nengliangzhiren takes nothing returns nothing
set gg_trg_nengliangzhiren=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_nengliangzhiren , 3 , 0x41304E4B)
call TriggerAddAction(gg_trg_nengliangzhiren, function Trig_nengliangzhirenActions)
endfunction
function Trig_chongji_1Conditions takes nothing returns boolean
return ( ( ( GetSpellAbilityId() == 0x41304634 ) or ( GetSpellAbilityId() == 0x41305052 ) ) )
endfunction
function Trig_chongji_1Actions takes nothing returns nothing
set udg_danwei2[0]=GetSpellAbilityUnit()
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_HERO) == true ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosDone.mdl", udg_dian2[0]))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x6530354F, udg_dian2[0], 270.00)
if ( ( GetHeroStr(udg_danwei2[0], true) > GetHeroAgi(udg_danwei2[0], true) ) and ( GetHeroStr(udg_danwei2[0], true) > GetHeroInt(udg_danwei2[0], true) ) ) then
if ( ( GetSpellAbilityId() == 0x41305052 ) ) then
call SetUnitAbilityLevel(udg_danwei2[1], 0x41304637, 4)
else
call SetUnitAbilityLevel(udg_danwei2[1], 0x41304637, 2)
endif
else
if ( ( GetSpellAbilityId() == 0x41305052 ) ) then
call SetUnitAbilityLevel(udg_danwei2[1], 0x41304637, 3)
else
endif
endif
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 4.00)
call IssueImmediateOrderById(udg_danwei2[1], 852526)
call SetUnitTimeScale(udg_danwei2[1], 0.00)
call SetUnitAnimation(udg_danwei2[1], "birth")
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
else
call IssueImmediateOrderById(udg_danwei2[0], 851972)
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_1997")
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_chongji_1 takes nothing returns nothing
set gg_trg_chongji_1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_chongji_1, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_chongji_1, Condition(function Trig_chongji_1Conditions))
call TriggerAddAction(gg_trg_chongji_1, function Trig_chongji_1Actions)
endfunction
function Trig_chongji_2Conditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41304636 ) )
endfunction
function Trig_chongji_2Func012A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
call UnitRemoveBuffBJ(0x42637963, udg_danwei2[1])
call UnitRemoveBuffBJ(0x42637932, udg_danwei2[1])
call GroupAddUnit(udg_danweizu2[351], udg_danwei2[1])
set udg_danwei2[1]=null
endfunction
function Trig_chongji_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[350]=GetSpellAbilityUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[350])
call SetUnitTimeScale(udg_danwei2[350], 1.50)
if ( ( ( GetUnitAbilityLevel(udg_danwei2[350], 0x41304637) == 2 ) or ( GetUnitAbilityLevel(udg_danwei2[350], 0x41304637) == 4 ) ) ) then
call SetUnitUserData(udg_danwei2[350], 62)
else
call SetUnitUserData(udg_danwei2[350], 25)
endif
call GroupAddUnit(udg_danweizu2[351], udg_danwei2[350])
call StopSoundBJ(gg_snd_PandarenUltimate, false)
call PlaySoundOnUnitBJ(gg_snd_PandarenUltimate, 100, udg_danwei2[350])
if ( ( GetUnitAbilityLevel(udg_danwei2[350], 0x41304637) > 2 ) ) then
set udg_aXUNHUAN[5]=1
loop
exitwhen udg_aXUNHUAN[5] > 15
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[350]), 0x6530354F, udg_dian2[0], 270.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 0.80)
call SetUnitTimeScale(udg_danwei2[1], 1.50)
call s__maphack_SetHeight(udg_danwei2[1] , 15.00 , 0.00)
call SetUnitScale(udg_danwei2[1], ( 0.50 + ( 0.10 * I2R(udg_aXUNHUAN[5]) ) ), ( 0.50 + ( 0.10 * I2R(udg_aXUNHUAN[5]) ) ), ( 0.50 + ( 0.10 * I2R(udg_aXUNHUAN[5]) ) ))
call SetUnitAnimation(udg_danwei2[1], "birth")
set udg_danwei2[1]=null
set udg_aXUNHUAN[5]=udg_aXUNHUAN[5] + 1
endloop
else
set udg_aXUNHUAN[5]=1
loop
exitwhen udg_aXUNHUAN[5] > 10
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[350]), 0x6530354F, udg_dian2[0], 270.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 0.80)
call SetUnitTimeScale(udg_danwei2[1], 1.50)
call SetUnitScale(udg_danwei2[1], ( 0.40 + ( 0.10 * I2R(udg_aXUNHUAN[5]) ) ), ( 0.40 + ( 0.10 * I2R(udg_aXUNHUAN[5]) ) ), ( 0.40 + ( 0.10 * I2R(udg_aXUNHUAN[5]) ) ))
call SetUnitAnimation(udg_danwei2[1], "birth")
set udg_danwei2[1]=null
set udg_aXUNHUAN[5]=udg_aXUNHUAN[5] + 1
endloop
endif
if ( ( GetUnitAbilityLevel(udg_danwei2[350], 0x41304637) > 2 ) ) then
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(425.00 , udg_dian2[0])
else
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(325.00 , udg_dian2[0])
endif
call ForGroupBJ(udg_xuanqu, function Trig_chongji_2Func012A)
call DestroyGroup(udg_xuanqu)
call IssueImmediateOrderById(udg_danwei2[350], 852096)
set udg_danwei2[350]=null
call RemoveLocation(udg_dian2[0])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_chongji_2 takes nothing returns nothing
set gg_trg_chongji_2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_chongji_2, EVENT_PLAYER_UNIT_SPELL_FINISH)
call TriggerAddCondition(gg_trg_chongji_2, Condition(function Trig_chongji_2Conditions))
call TriggerAddAction(gg_trg_chongji_2, function Trig_chongji_2Actions)
endfunction
function Trig_chongji_3Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[351]) == false ) )
endfunction
function Trig_chongji_3Func001Func002Func001Func007A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( UnitHasBuffBJ(udg_danwei2[1], 0x42303232) == true ) ) then
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], 3.00, AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
if ( ( IsTerrainPathableBJ(udg_dian2[2], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[2]))
else
endif
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_chongji_3Func001A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x6530354F ) ) then
if ( ( GetUnitUserData(udg_danwei2[0]) > 0 ) ) then
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(600.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_chongji_3Func001Func002Func001Func007A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[0])
else
call KillUnit(udg_danwei2[0])
call GroupRemoveUnit(udg_danweizu2[351], udg_danwei2[0])
endif
else
if ( ( UnitHasBuffBJ(udg_danwei2[0], 0x42303232) == true ) ) then
call UnitRemoveBuffBJ(0x42637963, udg_danwei2[0])
call UnitRemoveBuffBJ(0x42637932, udg_danwei2[0])
if ( ( IsUnitPausedBJ(udg_danwei2[0]) == false ) ) then
call UnitAddAbility(udg_danwei2[0], 0x41726176)
if ( ( s__maphack_GetHeight(udg_danwei2[0]) == 60.00 ) ) then
call s__maphack_SetHeight(udg_danwei2[0] , 15.00 , 0.00)
else
if ( ( s__maphack_GetHeight(udg_danwei2[0]) == 15.00 ) ) then
call s__maphack_SetHeight(udg_danwei2[0] , 30.00 , 0.00)
else
if ( ( s__maphack_GetHeight(udg_danwei2[0]) == 30.00 ) ) then
call s__maphack_SetHeight(udg_danwei2[0] , 0.00 , 0.00)
else
call s__maphack_SetHeight(udg_danwei2[0] , 60.00 , 0.00)
endif
endif
endif
call UnitRemoveAbility(udg_danwei2[0], 0x41726176)
else
endif
else
call UnitAddAbility(udg_danwei2[0], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[0] , 0.00 , 0.00)
call UnitRemoveAbility(udg_danwei2[0], 0x41726176)
call GroupRemoveUnit(udg_danweizu2[351], udg_danwei2[0])
endif
endif
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_chongji_3Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[351], function Trig_chongji_3Func001A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_chongji_3 takes nothing returns nothing
set gg_trg_chongji_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_chongji_3, udg_Times[4])
call TriggerAddCondition(gg_trg_chongji_3, Condition(function Trig_chongji_3Conditions))
call TriggerAddAction(gg_trg_chongji_3, function Trig_chongji_3Actions)
endfunction
function Trig_yinshenxie_0Conditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x4130464F ) )
endfunction
function Trig_yinshenxie_0Actions takes nothing returns nothing
set udg_danwei2[0]=GetSpellAbilityUnit()
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_HERO) == true ) ) then
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) <= 5 ) ) then
if ( ( IsUnitInvisible(udg_danwei2[0], s__baka_SPlayer(11)) == true ) ) then
call StopSoundBJ(gg_snd_SacrificeUnit, false)
call PlaySoundOnUnitBJ(gg_snd_SacrificeUnit, 100, udg_danwei2[0])
else
endif
else
endif
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) >= 6 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) <= 10 ) ) then
if ( ( IsUnitInvisible(udg_danwei2[0], s__baka_SPlayer(10)) == true ) ) then
call StopSoundBJ(gg_snd_SacrificeUnit, false)
call PlaySoundOnUnitBJ(gg_snd_SacrificeUnit, 100, udg_danwei2[0])
else
endif
else
endif
set udg_zhengshu2[( 310 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) )]=375
else
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_3562")
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_yinshenxie_0 takes nothing returns nothing
set gg_trg_yinshenxie_0=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_yinshenxie_0, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_yinshenxie_0, Condition(function Trig_yinshenxie_0Conditions))
call TriggerAddAction(gg_trg_yinshenxie_0, function Trig_yinshenxie_0Actions)
endfunction
function Trig_yinshenxie_1Func001Func003Func004A takes nothing returns nothing
set udg_dian2[1]=GetDestructableLoc(GetEnumDestructable())
if ( ( IsDestructableDeadBJ(GetEnumDestructable()) == false ) and ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) <= 350.00 ) ) then
set udg_zhengshuex[0]=1
else
endif
call RemoveLocation(udg_dian2[1])
endfunction
function Trig_yinshenxie_1Func001Func003Func006Func002A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
if ( ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_HERO) == true ) ) and ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) <= 150.00 ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[1] , 0x49303347)) == true ) ) and ( IsLocationVisibleToPlayer(udg_dian2[0], GetOwningPlayer(udg_danwei2[1])) == true ) and ( IsUnitEnemy(udg_danwei2[1], s__baka_SPlayer(udg_aXUNHUAN[6] - 1)) == true ) ) then
set udg_zhengshuex[0]=0
else
endif
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[1])
endfunction
function Trig_yinshenxie_1Func001Func003Func006Func004A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
if ( ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_HERO) == true ) ) and ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) <= 500.00 ) or ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[1] , 0x49303347)) == true ) ) and ( IsLocationVisibleToPlayer(udg_dian2[0], GetOwningPlayer(udg_danwei2[1])) == true ) and ( IsUnitEnemy(udg_danwei2[1], s__baka_SPlayer(udg_aXUNHUAN[6] - 1)) == true ) ) then
set udg_zhengshuex[0]=0
else
endif
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[1])
endfunction
function Trig_yinshenxie_1Func001Func004Func003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_HERO) == true ) and ( IsUnitEnemy(udg_danwei2[1], s__baka_SPlayer(udg_aXUNHUAN[6] - 1)) == true ) ) then
set udg_zhengshuex[0]=1
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_yinshenxie_1Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_aXUNHUAN[6]=1
loop
exitwhen udg_aXUNHUAN[6] > 10
set udg_dian2[0]=GetUnitLoc(udg_player[udg_aXUNHUAN[6]])
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[( 300 + udg_aXUNHUAN[6] )]) >= 1.00 ) ) then
set udg_zhengshu2[( 320 + udg_aXUNHUAN[6] )]=( udg_zhengshu2[( 320 + udg_aXUNHUAN[6] )] + 1 )
else
set udg_zhengshu2[( 320 + udg_aXUNHUAN[6] )]=IMaxBJ(( udg_zhengshu2[( 320 + udg_aXUNHUAN[6] )] - 1 ), 0)
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_player[udg_aXUNHUAN[6]] , 0x49303348)) == true ) ) then
set udg_zhengshuex[0]=0
set udg_quyu[0]=RectFromCenterSizeBJ(udg_dian2[0], 600.00, 600.00)
call EnumDestructablesInRectAll(udg_quyu[0], function Trig_yinshenxie_1Func001Func003Func004A)
call RemoveRect(udg_quyu[0])
if ( ( udg_zhengshu2[( 320 + udg_aXUNHUAN[6] )] >= 13 ) ) then
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(700.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_yinshenxie_1Func001Func003Func006Func004A)
else
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(500.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_yinshenxie_1Func001Func003Func006Func002A)
endif
call DestroyGroup(udg_xuanqu)
if ( ( udg_zhengshuex[0] == 1 ) ) then
call UnitAddAbility(udg_player[udg_aXUNHUAN[6]], 0x4130464D)
else
call UnitRemoveAbility(udg_player[udg_aXUNHUAN[6]], 0x4130464D)
endif
else
call UnitRemoveAbility(udg_player[udg_aXUNHUAN[6]], 0x4130464D)
endif
if ( ( udg_zhengshu2[( 310 + udg_aXUNHUAN[6] )] > 0 ) ) then
set udg_zhengshuex[0]=0
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(800.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_yinshenxie_1Func001Func004Func003A)
call DestroyGroup(udg_xuanqu)
if ( ( udg_zhengshuex[0] == 0 ) ) then
set udg_zhengshu2[( 310 + udg_aXUNHUAN[6] )]=( udg_zhengshu2[( 310 + udg_aXUNHUAN[6] )] - 1 )
else
set udg_zhengshu2[( 310 + udg_aXUNHUAN[6] )]=( udg_zhengshu2[( 310 + udg_aXUNHUAN[6] )] - 3 )
endif
if ( ( udg_aXUNHUAN[6] >= 1 ) and ( udg_aXUNHUAN[6] <= 5 ) ) then
if ( ( IsUnitInvisible(udg_player[udg_aXUNHUAN[6]], s__baka_SPlayer(11)) == true ) ) then
call UnitAddAbility(udg_player[udg_aXUNHUAN[6]], 0x4167686F)
call UnitAddAbility(udg_player[udg_aXUNHUAN[6]], 0x4130464E)
call SetUnitMoveSpeed(udg_player[udg_aXUNHUAN[6]], GetUnitDefaultMoveSpeed(udg_player[udg_aXUNHUAN[6]]))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Devour\\DevourEffectArt.mdl", udg_player[udg_aXUNHUAN[6]], "origin"))
else
call UnitRemoveAbility(udg_player[udg_aXUNHUAN[6]], 0x4167686F)
call UnitRemoveAbility(udg_player[udg_aXUNHUAN[6]], 0x4130464E)
call SetUnitMoveSpeed(udg_player[udg_aXUNHUAN[6]], GetUnitDefaultMoveSpeed(udg_player[udg_aXUNHUAN[6]]))
endif
else
endif
if ( ( udg_aXUNHUAN[6] >= 6 ) and ( udg_aXUNHUAN[6] <= 10 ) ) then
if ( ( IsUnitInvisible(udg_player[udg_aXUNHUAN[6]], s__baka_SPlayer(10)) == true ) ) then
call UnitAddAbility(udg_player[udg_aXUNHUAN[6]], 0x4167686F)
call UnitAddAbility(udg_player[udg_aXUNHUAN[6]], 0x4130464E)
call SetUnitMoveSpeed(udg_player[udg_aXUNHUAN[6]], GetUnitDefaultMoveSpeed(udg_player[udg_aXUNHUAN[6]]))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Devour\\DevourEffectArt.mdl", udg_player[udg_aXUNHUAN[6]], "origin"))
else
call UnitRemoveAbility(udg_player[udg_aXUNHUAN[6]], 0x4167686F)
call UnitRemoveAbility(udg_player[udg_aXUNHUAN[6]], 0x4130464E)
call SetUnitMoveSpeed(udg_player[udg_aXUNHUAN[6]], GetUnitDefaultMoveSpeed(udg_player[udg_aXUNHUAN[6]]))
endif
else
endif
else
call UnitRemoveAbility(udg_player[udg_aXUNHUAN[6]], 0x4167686F)
call UnitRemoveAbility(udg_player[udg_aXUNHUAN[6]], 0x4130464E)
call SetUnitMoveSpeed(udg_player[udg_aXUNHUAN[6]], GetUnitDefaultMoveSpeed(udg_player[udg_aXUNHUAN[6]]))
endif
call RemoveLocation(udg_dian2[( 300 + udg_aXUNHUAN[6] )])
call RemoveLocation(udg_dian2[0])
set udg_dian2[( 300 + udg_aXUNHUAN[6] )]=GetUnitLoc(udg_player[udg_aXUNHUAN[6]])
set udg_aXUNHUAN[6]=udg_aXUNHUAN[6] + 1
endloop
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_yinshenxie_1 takes nothing returns nothing
set gg_trg_yinshenxie_1=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_yinshenxie_1, 0.04)
call TriggerAddAction(gg_trg_yinshenxie_1, function Trig_yinshenxie_1Actions)
endfunction
function Trig_yuanzhihuo_1Conditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41304557 ) )
endfunction
function Trig_yuanzhihuo_1Actions takes nothing returns nothing
set udg_danwei2[0]=GetSpellAbilityUnit()
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_HERO) == true ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303436, udg_dian2[0], 135.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 2.00)
call SetUnitUserData(udg_danwei2[1], R2I(( I2R(GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303330))) / 15.00 )))
call SetUnitManaBJ(udg_danwei2[1], 1.00)
call GroupAddUnit(udg_danweizu2[342], udg_danwei2[1])
call SetUnitScale(udg_danwei2[1], ( GetUnitState(udg_danwei2[1], UNIT_STATE_MANA) + 2.00 ), ( GetUnitState(udg_danwei2[1], UNIT_STATE_MANA) + 2.00 ), ( GetUnitState(udg_danwei2[1], UNIT_STATE_MANA) + 2.00 ))
set udg_aXUNHUAN[7]=1
loop
exitwhen udg_aXUNHUAN[7] > 10
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 200.00, ( ( 360.00 / 10.00 ) * I2R(udg_aXUNHUAN[7]) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\AvengerMissile\\AvengerMissile.mdl", udg_dian2[1]))
call RemoveLocation(udg_dian2[1])
set udg_aXUNHUAN[7]=udg_aXUNHUAN[7] + 1
endloop
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
else
call IssueImmediateOrderById(udg_danwei2[0], 851972)
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_2818")
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_yuanzhihuo_1 takes nothing returns nothing
set gg_trg_yuanzhihuo_1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_yuanzhihuo_1, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_yuanzhihuo_1, Condition(function Trig_yuanzhihuo_1Conditions))
call TriggerAddAction(gg_trg_yuanzhihuo_1, function Trig_yuanzhihuo_1Actions)
endfunction
function Trig_yuanzhihuo_2Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[342]) == false ) )
endfunction
function Trig_yuanzhihuo_2Func001Func003Func010A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) or ( ( GetOwningPlayer(udg_danwei2[0]) == GetOwningPlayer(udg_danwei2[1]) ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_HERO) == true ) ) ) ) then
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_yuanzhihuo_2Func001A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
call SetUnitManaBJ(udg_danwei2[0], ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) + 1 ))
if ( ( R2I(GetUnitState(udg_danwei2[0], UNIT_STATE_MANA)) <= GetUnitUserData(udg_danwei2[0]) ) and ( IsUnitType(udg_danwei2[0], UNIT_TYPE_DEAD) == false ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303436, udg_dian2[0], 135.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 2.00)
call SetUnitScale(udg_danwei2[1], ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) + 2.00 ), ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) + 2.00 ), ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) + 2.00 ))
set udg_danwei2[1]=null
set udg_aXUNHUAN[8]=1
loop
exitwhen udg_aXUNHUAN[8] > ( 10 + ( 4 * R2I(GetUnitState(udg_danwei2[0], UNIT_STATE_MANA)) ) )
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], ( 135.00 + ( 65.00 * GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) ) ), ( ( 360.00 / ( 10.00 + ( 4.00 * GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) ) ) ) * I2R(udg_aXUNHUAN[8]) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\AvengerMissile\\AvengerMissile.mdl", udg_dian2[1]))
call RemoveLocation(udg_dian2[1])
set udg_aXUNHUAN[8]=udg_aXUNHUAN[8] + 1
endloop
call SetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303330), 0)
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(( 200.00 + ( 65.00 * GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) ) ) , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_yuanzhihuo_2Func001Func003Func010A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[0])
else
call GroupRemoveUnit(udg_danweizu2[342], udg_danwei2[0])
endif
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_yuanzhihuo_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[342], function Trig_yuanzhihuo_2Func001A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_yuanzhihuo_2 takes nothing returns nothing
set gg_trg_yuanzhihuo_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_yuanzhihuo_2, udg_Times[4])
call TriggerAddCondition(gg_trg_yuanzhihuo_2, Condition(function Trig_yuanzhihuo_2Conditions))
call TriggerAddAction(gg_trg_yuanzhihuo_2, function Trig_yuanzhihuo_2Actions)
endfunction
function Trig_baowufengyin_1Conditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41304555 ) )
endfunction
function Trig_baowufengyin_1Func004T takes nothing returns nothing
if ( ( UnitHasBuffBJ(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x2E1BF0CA), 0x42303230) == false ) ) then
call SetUnitAbilityLevel(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x2E1BF0CA), 0x41304635, 1)
call SelectUnitAddForPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x2E1BF0CA), GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x2E1BF0CA)))
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
else
endif
endfunction
function Trig_baowufengyin_1Actions takes nothing returns nothing
local timer ydl_timer
call SetUnitAbilityLevel(GetSpellTargetUnit(), 0x41304635, 2)
call SelectUnitAddForPlayer(GetSpellTargetUnit(), GetOwningPlayer(GetSpellTargetUnit()))
set ydl_timer=CreateTimer()
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x2E1BF0CA, GetSpellTargetUnit())
call TimerStart(ydl_timer, 0.10, true, function Trig_baowufengyin_1Func004T)
set ydl_timer=null
endfunction
function InitTrig_baowufengyin_1 takes nothing returns nothing
set gg_trg_baowufengyin_1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_baowufengyin_1, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_baowufengyin_1, Condition(function Trig_baowufengyin_1Conditions))
call TriggerAddAction(gg_trg_baowufengyin_1, function Trig_baowufengyin_1Actions)
endfunction
function Trig_huihuangConditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41303156 ) )
endfunction
function Trig_huihuangActions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_HERO) == true ) ) then
call SetUnitManaBJ(udg_danwei2[0], ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) + 3000.00 ))
call SetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303139), 51)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\TomeOfRetraining\\TomeOfRetrainingCaster.mdl", udg_danwei2[0], "origin"))
else
call IssueImmediateOrderById(udg_danwei2[0], 851972)
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_2022")
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_huihuang takes nothing returns nothing
set gg_trg_huihuang=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_huihuang, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_huihuang, Condition(function Trig_huihuangConditions))
call TriggerAddAction(gg_trg_huihuang, function Trig_huihuangActions)
endfunction
function Trig_yuexiConditions takes nothing returns boolean
return ( ( GetSpellTargetUnit() != GetSpellAbilityUnit() ) and ( GetSpellTargetUnit() != null ) and ( IsUnitType(GetSpellAbilityUnit(), UNIT_TYPE_HERO) == true ) and ( IsUnitEnemy(GetSpellTargetUnit(), GetOwningPlayer(GetTriggerUnit())) == true ) )
endfunction
function Trig_yuexiFunc001Func001Func002Func003Func004Func015T takes nothing returns nothing
call UnitRemoveAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF), 0x41304551)
call UnitRemoveAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF), 0x41305138)
call UnitRemoveAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF), 0x41305139)
call UnitRemoveAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF), 0x41305141)
call UnitRemoveAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF), 0x41305142)
call UnitRemoveAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF), 0x41305143)
call UnitRemoveAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF), 0x41305144)
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
endfunction
function Trig_yuexiFunc001Func001Func002Func003Func004Func016T takes nothing returns nothing
if ( ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x2A37F621) > 0 ) ) then
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x2A37F621, ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x2A37F621) - 1 ))
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x61E1A70B, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59)))
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x4D6303C9, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF)))
call MoveLightningEx(LoadLightningHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x748ACBAC), true, GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x61E1A70B)), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x61E1A70B)), ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x61E1A70B)) + ( s__maphack_GetHeight(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59)) + 100.00 ) ), GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x4D6303C9)), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x4D6303C9)), ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x4D6303C9)) + ( s__maphack_GetHeight(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF)) + 100.00 ) ))
call SetUnitX(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x41F5BFF0), GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x4D6303C9)))
call SetUnitY(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x41F5BFF0), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x4D6303C9)))
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x61E1A70B))
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x4D6303C9))
call SetLightningColor(LoadLightningHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x748ACBAC), 0.00, 0.50, 1, ( 0.05 * I2R(LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x2A37F621)) ))
if ( ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x2A37F621) == 10 ) ) then
call KillUnit(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x41F5BFF0))
call SetUnitTimeScale(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x41F5BFF0), 5.00)
else
endif
else
call RemoveUnit(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x41F5BFF0))
call DestroyLightning(LoadLightningHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x748ACBAC))
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
endif
endfunction
function Trig_yuexiFunc001Func001Func002T takes nothing returns nothing
local integer ydul_exxh1
local timer ydl_timer
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x61E1A70B, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59)))
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x4D6303C9, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF)))
if ( ( DistanceBetweenPoints(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x61E1A70B), LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x4D6303C9)) <= 1500.00 ) ) then
call SetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59) , 0x49303139), ( GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59) , 0x49303139)) - 30 ))
if ( ( UnitHasBuffBJ(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF), 0x4230304D) == false ) and ( UnitHasBuffBJ(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF), 0x42303046) == false ) and ( UnitHasBuffBJ(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF), 0x42303033) == false ) ) then
call SaveUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x41F5BFF0, CreateUnitAtLoc(GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59)), 0x65303130, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x4D6303C9), 0.00))
call UnitAddAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x41F5BFF0), 0x41305135)
call s__baka_IssueTargetOrderById2(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x41F5BFF0) , 852668 , LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF))
call UnitApplyTimedLife(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x41F5BFF0), 0x42487765, 0.50)
else
endif
if ( ( GetUnitAbilityLevel(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF), 0x41305144) == 0 ) ) then
call SaveLightningHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x748ACBAC, AddLightningEx("FORK", true, GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x61E1A70B)), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x61E1A70B)), ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x61E1A70B)) + ( LoadReal(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59) + 100.00 ) ), GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x4D6303C9)), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x4D6303C9)), ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x4D6303C9)) + ( s__maphack_GetHeight(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF)) + 100.00 ) )))
call SetLightningColor(LoadLightningHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x748ACBAC), 0.00, 0.50, 1, 1)
call SaveUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x41F5BFF0, CreateUnitAtLoc(GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59)), 0x65303853, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x4D6303C9), AngleBetweenPoints(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x61E1A70B), LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x4D6303C9))))
call SetUnitAnimation(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x41F5BFF0), "death")
call SetUnitTimeScale(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x41F5BFF0), 0.00)
call UnitAddAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF), 0x41305144)
call UnitAddAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF), 0x41305143)
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x2A37F621, 0)
set ydul_exxh1=1
loop
exitwhen ydul_exxh1 > 6
if ( ( GetItemTypeId(UnitItemInSlotBJ(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF), ydul_exxh1)) == 0x72617463 ) ) then
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x2A37F621, ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x2A37F621) + 1 ))
else
endif
set ydul_exxh1=ydul_exxh1 + 1
endloop
if ( ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x2A37F621) == 2 ) ) then
call UnitAddAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF), 0x41305138)
else
if ( ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x2A37F621) == 1 ) ) then
call UnitAddAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF), 0x41304551)
else
endif
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF) , 0x636B6E67)) == true ) ) then
call UnitAddAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF), 0x41305141)
else
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF) , 0x49303448)) == true ) ) then
call UnitAddAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF), 0x41305142)
else
endif
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF) , 0x72696E31)) == true ) ) then
call UnitAddAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF), 0x41305139)
else
endif
set ydl_timer=CreateTimer()
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x9CB980BF, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x9CB980BF, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF))
call TimerStart(ydl_timer, 10.00, false, function Trig_yuexiFunc001Func001Func002Func003Func004Func015T)
set ydl_timer=CreateTimer()
call SaveInteger(YDHT, GetHandleId(ydl_timer), 0x2A37F621, 20)
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x60D54C59, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x9CB980BF, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x41F5BFF0, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x41F5BFF0))
call SaveLightningHandle(YDHT, GetHandleId(ydl_timer), 0x748ACBAC, LoadLightningHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x748ACBAC))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0x61E1A70B, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x61E1A70B))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0x4D6303C9, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x4D6303C9))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x60D54C59, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x9CB980BF, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x41F5BFF0, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x41F5BFF0))
call SaveLightningHandle(YDHT, GetHandleId(ydl_timer), 0x748ACBAC, LoadLightningHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x748ACBAC))
call TimerStart(ydl_timer, 0.03, true, function Trig_yuexiFunc001Func001Func002Func003Func004Func016T)
else
endif
else
endif
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x61E1A70B))
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x4D6303C9))
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
set ydl_timer=null
endfunction
function Trig_yuexiActions takes nothing returns nothing
local timer ydl_timer
local integer ydl_localvar_step=LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76)
set ydl_localvar_step=ydl_localvar_step + 3
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76, ydl_localvar_step)
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xECE825E7, ydl_localvar_step)
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetTriggerUnit() , 0x49303139)) == true ) ) then
if ( ( GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(GetTriggerUnit() , 0x49303139)) >= 30 ) ) then
set ydl_timer=CreateTimer()
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x60D54C59, GetTriggerUnit())
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x9CB980BF, GetSpellTargetUnit())
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0x61E1A70B, LoadLocationHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x61E1A70B))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0x4D6303C9, LoadLocationHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x4D6303C9))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x41F5BFF0, LoadUnitHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x41F5BFF0))
call SaveLightningHandle(YDHT, GetHandleId(ydl_timer), 0x748ACBAC, LoadLightningHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x748ACBAC))
call SaveInteger(YDHT, GetHandleId(ydl_timer), 0x2A37F621, LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x2A37F621))
call TimerStart(ydl_timer, 0.00, false, function Trig_yuexiFunc001Func001Func002T)
else
endif
else
endif
call FlushChildHashtable(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step)
set ydl_timer=null
endfunction
function InitTrig_yuexi takes nothing returns nothing
set gg_trg_yuexi=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_yuexi, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_yuexi, Condition(function Trig_yuexiConditions))
call TriggerAddAction(gg_trg_yuexi, function Trig_yuexiActions)
endfunction
function Trig_yueyaohuandunConditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41304559 ) )
endfunction
function Trig_yueyaohuandunFunc001T takes nothing returns nothing
local integer ydul_exxh1
if ( ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xEFC9FB31) > 0 ) and ( GetUnitManaPercent(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59)) >= 25.00 ) ) then
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xEFC9FB31, ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xEFC9FB31) - 1 ))
else
if ( ( IsUnitType(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59), UNIT_TYPE_DEAD) == false ) ) then
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x61E1A70B, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59)))
call SaveItemHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6DEAD1F6, YDWEGetItemOfTypeFromUnitBJNull(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59) , 0x4930344E))
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x2A37F621, YDWEGetInventoryIndexOfItemTypeBJNull(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59) , 0x4930344E))
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xEFC9FB31, 0)
if ( ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x2A37F621) > 1 ) ) then
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x2A37F621, ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x2A37F621) - 1 ))
set ydul_exxh1=1
loop
exitwhen ydul_exxh1 > LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x2A37F621)
if ( ( IsItemOwned(UnitItemInSlotBJ(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59), ydul_exxh1)) == true ) ) then
else
call UnitAddItemByIdSwapped(0x49303253, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59))
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xEFC9FB31, ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xEFC9FB31) + 1 ))
endif
set ydul_exxh1=ydul_exxh1 + 1
endloop
else
endif
call SetItemPositionLoc(LoadItemHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6DEAD1F6), LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x61E1A70B))
call UnitAddItem(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59), LoadItemHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6DEAD1F6))
if ( ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x2A37F621) > 1 ) ) then
set ydul_exxh1=1
loop
exitwhen ydul_exxh1 > LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xEFC9FB31)
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59) , 0x49303253))
set ydul_exxh1=ydul_exxh1 + 1
endloop
else
endif
else
endif
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
endif
endfunction
function Trig_yueyaohuandunActions takes nothing returns nothing
local timer ydl_timer
local integer ydl_localvar_step=LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76)
set ydl_localvar_step=ydl_localvar_step + 3
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76, ydl_localvar_step)
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xECE825E7, ydl_localvar_step)
set ydl_timer=CreateTimer()
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x60D54C59, GetTriggerUnit())
call SaveInteger(YDHT, GetHandleId(ydl_timer), 0xEFC9FB31, 50)
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0x61E1A70B, LoadLocationHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x61E1A70B))
call SaveItemHandle(YDHT, GetHandleId(ydl_timer), 0x6DEAD1F6, LoadItemHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x6DEAD1F6))
call SaveInteger(YDHT, GetHandleId(ydl_timer), 0x2A37F621, LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x2A37F621))
call TimerStart(ydl_timer, 0.10, true, function Trig_yueyaohuandunFunc001T)
call FlushChildHashtable(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step)
set ydl_timer=null
endfunction
function InitTrig_yueyaohuandun takes nothing returns nothing
set gg_trg_yueyaohuandun=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_yueyaohuandun, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_yueyaohuandun, Condition(function Trig_yueyaohuandunConditions))
call TriggerAddAction(gg_trg_yueyaohuandun, function Trig_yueyaohuandunActions)
endfunction
function Trig_xiangchichongjiConditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41304532 ) )
endfunction
function Trig_xiangchichongjiActions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
set udg_danwei2[1]=GetSpellTargetUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
call StopSoundBJ(gg_snd_Shockwave, false)
call PlaySoundOnUnitBJ(gg_snd_Shockwave, 100, udg_danwei2[0])
set udg_danwei2[2]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x6530334D, udg_dian2[0], AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
call SetUnitUserData(udg_danwei2[2], 6)
call SetUnitScale(udg_danwei2[2], 1, 1, 1)
call GroupAddUnit(udg_danweizu2[350], udg_danwei2[2])
set udg_danwei2[3]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[1]), 0x6530334D, udg_dian2[1], AngleBetweenPoints(udg_dian2[1], udg_dian2[0]))
call SetUnitUserData(udg_danwei2[3], 6)
call SetUnitScale(udg_danwei2[3], 1, 1, 1)
call GroupAddUnit(udg_danweizu2[350], udg_danwei2[3])
call UnitDamageTarget(udg_danwei2[2], udg_danwei2[1], ( I2R(GetHeroStr(udg_danwei2[0], true)) * 3.00 ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_HEAVY_BASH)
call UnitDamageTarget(udg_danwei2[3], udg_danwei2[0], ( I2R(GetHeroStr(udg_danwei2[1], true)) * 3.00 ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_HEAVY_BASH)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\RockBoltMissile\\RockBoltMissile.mdl", udg_danwei2[0], "chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\RockBoltMissile\\RockBoltMissile.mdl", udg_danwei2[1], "chest"))
set udg_danwei2[0]=null
set udg_danwei2[1]=null
set udg_danwei2[2]=null
set udg_danwei2[3]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
endfunction
function InitTrig_xiangchichongji takes nothing returns nothing
set gg_trg_xiangchichongji=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_xiangchichongji, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_xiangchichongji, Condition(function Trig_xiangchichongjiConditions))
call TriggerAddAction(gg_trg_xiangchichongji, function Trig_xiangchichongjiActions)
endfunction
function Trig_xiangchichongji_2Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[350]) == false ) )
endfunction
function Trig_xiangchichongji_2Func001Func003Func010A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_HERO) == true ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitPausedBJ(udg_danwei2[1]) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
set udg_dian2[2]=GetUnitLoc(udg_danwei2[1])
set udg_dian2[3]=PolarProjectionBJ(udg_dian2[2], 40.00, GetUnitFacing(udg_danwei2[0]))
if ( ( IsTerrainPathableBJ(udg_dian2[3], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[3]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[3]))
else
endif
call RemoveLocation(udg_dian2[2])
call RemoveLocation(udg_dian2[3])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_xiangchichongji_2Func001A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
if ( ( GetUnitUserData(udg_danwei2[0]) > 0 ) and ( IsTerrainPathableBJ(udg_dian2[0], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 50.00, GetUnitFacing(udg_danwei2[0]))
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(100.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_xiangchichongji_2Func001Func003Func010A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[1])
else
call KillUnit(udg_danwei2[0])
call GroupRemoveUnit(udg_danweizu2[350], udg_danwei2[0])
endif
call RemoveLocation(udg_dian2[0])
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_xiangchichongji_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[350], function Trig_xiangchichongji_2Func001A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_xiangchichongji_2 takes nothing returns nothing
set gg_trg_xiangchichongji_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_xiangchichongji_2, udg_Times[4])
call TriggerAddCondition(gg_trg_xiangchichongji_2, Condition(function Trig_xiangchichongji_2Conditions))
call TriggerAddAction(gg_trg_xiangchichongji_2, function Trig_xiangchichongji_2Actions)
endfunction
function Trig_xuehongzhanfu_1Conditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41303351 ) )
endfunction
function Trig_xuehongzhanfu_1Func003Func005A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) == ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 ) ) ) then
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_xuehongzhanfu_1Func003Func006Func002A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) == ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 ) ) ) then
if ( ( GetUnitState(udg_danwei2[1], UNIT_STATE_LIFE) == 1.00 ) ) then
call SetUnitLifeBJ(udg_danwei2[1], 2.00)
else
call SetUnitLifeBJ(udg_danwei2[1], 1.00)
endif
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_xuehongzhanfu_1Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetTriggerUnit()
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_HERO) == true ) ) then
set udg_zhengshu2[3]=0
call ForGroupBJ(udg_Danweizu[10], function Trig_xuehongzhanfu_1Func003Func005A)
if ( ( udg_zhengshu2[3] == 0 ) ) then
call UnitAddAbility(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )], 0x41304837)
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303639, udg_dian2[0], GetUnitFacing(udg_danwei2[0]))
call SetUnitTimeScale(udg_danwei2[1], 2.00)
call SetUnitLifeBJ(udg_danwei2[1], 1.00)
call SetUnitManaBJ(udg_danwei2[1], ( GetUnitFacing(udg_danwei2[0]) + 500.00 ))
call SetUnitUserData(udg_danwei2[1], 1)
call GroupAddUnit(udg_Danweizu[10], udg_danwei2[1])
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
else
call ForGroupBJ(udg_Danweizu[10], function Trig_xuehongzhanfu_1Func003Func006Func002A)
endif
else
call IssueImmediateOrderById(udg_danwei2[0], 851972)
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_395")
endif
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_xuehongzhanfu_1 takes nothing returns nothing
set gg_trg_xuehongzhanfu_1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_xuehongzhanfu_1, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_xuehongzhanfu_1, Condition(function Trig_xuehongzhanfu_1Conditions))
call TriggerAddAction(gg_trg_xuehongzhanfu_1, function Trig_xuehongzhanfu_1Actions)
endfunction
function Trig_xuehongzhanfu_2Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_Danweizu[10]) == false ) )
endfunction
function Trig_xuehongzhanfu_2Func001Func002Func008Func017A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) and ( IsUnitInGroup(udg_danwei2[1], udg_Danweizu[( 10 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) )]) == false ) ) then
call UnitDamageTarget(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )], udg_danwei2[1], 75.00, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_HEAVY_SLICE)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl", udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )], "origin"))
call SetUnitLifeBJ(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )], ( GetUnitState(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )], UNIT_STATE_LIFE) + 15.00 ))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl", udg_danwei2[1], "chest"))
call GroupAddUnit(udg_Danweizu[( 10 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) )], udg_danwei2[1])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_xuehongzhanfu_2Func001A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
if ( ( IsUnitPausedBJ(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )]) == false ) ) then
call SetUnitTimeScale(udg_danwei2[0], 2.00)
set udg_dian2[0]=GetUnitLoc(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )])
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[9]=1
loop
exitwhen udg_aXUNHUAN[9] > 6
if ( ( GetItemTypeId(UnitItemInSlotBJ(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )], udg_aXUNHUAN[9])) == 0x49303032 ) ) then
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
else
endif
set udg_aXUNHUAN[9]=udg_aXUNHUAN[9] + 1
endloop
if ( ( udg_zhengshu2[3] == 0 ) ) then
call SetUnitUserData(udg_danwei2[0], 0)
else
endif
if ( ( GetUnitUserData(udg_danwei2[0]) > 0 ) and ( IsTerrainPathableBJ(udg_dian2[0], PATHING_TYPE_FLYABILITY) == false ) and ( IsUnitType(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )], UNIT_TYPE_DEAD) == false ) ) then
call SetUnitLifeBJ(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )], RMaxBJ(( GetUnitState(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )], UNIT_STATE_LIFE) - 2.00 ), 1.00))
if ( ( GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE) == 1.00 ) ) then
if ( ( GetUnitUserData(udg_danwei2[0]) < 24 ) ) then
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) + 1 ))
else
endif
else
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
endif
call SetUnitManaBJ(udg_danwei2[0], ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) - 21.60 ))
call SetUnitFacing(udg_danwei2[0], ( GetUnitFacing(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )]) + 0.00 ))
if ( ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) < 500.00 ) ) then
call SetUnitManaBJ(udg_danwei2[0], ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) + 360.00 ))
call GroupClear(udg_Danweizu[( 10 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) )])
else
endif
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], ( I2R(GetUnitUserData(udg_danwei2[0])) * 8.00 ), ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) - 500.00 ))
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
if ( ( IsUnitType(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )], UNIT_TYPE_SAPPER) == true ) ) then
call UnitAddAbility(udg_danwei2[0], 0x4167686F)
else
call UnitRemoveAbility(udg_danwei2[0], 0x4167686F)
endif
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(125.00 , udg_dian2[1])
call ForGroupBJ(udg_xuanqu, function Trig_xuehongzhanfu_2Func001Func002Func008Func017A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[1])
else
call UnitRemoveAbility(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )], 0x41304837)
call KillUnit(udg_danwei2[0])
call GroupRemoveUnit(udg_Danweizu[10], udg_danwei2[0])
endif
call RemoveLocation(udg_dian2[0])
else
call SetUnitTimeScale(udg_danwei2[0], 0.00)
endif
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_xuehongzhanfu_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_Danweizu[10], function Trig_xuehongzhanfu_2Func001A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_xuehongzhanfu_2 takes nothing returns nothing
set gg_trg_xuehongzhanfu_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_xuehongzhanfu_2, udg_Times[4])
call TriggerAddCondition(gg_trg_xuehongzhanfu_2, Condition(function Trig_xuehongzhanfu_2Conditions))
call TriggerAddAction(gg_trg_xuehongzhanfu_2, function Trig_xuehongzhanfu_2Actions)
endfunction
function Trig_tuxizhirenConditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41304656 ) )
endfunction
function Trig_tuxizhirenActions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_HERO) == true ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[1]=GetSpellTargetLoc()
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], 60.00, AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303630, udg_dian2[0], ( AngleBetweenPoints(udg_dian2[0], udg_dian2[1]) + 75.00 ))
call SetUnitUserData(udg_danwei2[1], ( ( R2I(RMinBJ(DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]), 1200.00)) / 80 ) * 1 ))
call SetUnitLifeBJ(udg_danwei2[1], ( AngleBetweenPoints(udg_dian2[0], udg_dian2[1]) + 360.00 ))
call SetUnitManaBJ(udg_danwei2[1], 0.00)
call GroupAddUnit(udg_DAZE[0], udg_danwei2[1])
call GroupAddUnit(udg_DAZE[1], udg_danwei2[1])
call GroupAddUnit(udg_danweizu2[376], udg_danwei2[1])
set udg_danwei2[1]=null
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303630, udg_dian2[0], ( AngleBetweenPoints(udg_dian2[0], udg_dian2[1]) - 75.00 ))
call SetUnitUserData(udg_danwei2[1], ( ( R2I(RMinBJ(DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]), 1200.00)) / 80 ) * 1 ))
call SetUnitLifeBJ(udg_danwei2[1], ( AngleBetweenPoints(udg_dian2[0], udg_dian2[1]) + 360.00 ))
call SetUnitManaBJ(udg_danwei2[1], 0.00)
call GroupAddUnit(udg_DAZE[0], udg_danwei2[1])
call GroupAddUnit(udg_DAZE[1], udg_danwei2[1])
call GroupAddUnit(udg_danweizu2[376], udg_danwei2[1])
set udg_danwei2[1]=null
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303630, udg_dian2[2], AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
call SetUnitUserData(udg_danwei2[1], ( ( R2I(RMinBJ(DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]), 1200.00)) / 80 ) * 1 ))
call SetUnitLifeBJ(udg_danwei2[1], ( AngleBetweenPoints(udg_dian2[0], udg_dian2[1]) + 360.00 ))
call SetUnitManaBJ(udg_danwei2[1], 1.00)
call GroupAddUnit(udg_DAZE[0], udg_danwei2[1])
call GroupAddUnit(udg_DAZE[1], udg_danwei2[1])
call GroupAddUnit(udg_danweizu2[376], udg_danwei2[1])
call StopSoundBJ(gg_snd_Disenchant, false)
call PlaySoundOnUnitBJ(gg_snd_Disenchant, 100, udg_danwei2[0])
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
else
call IssueImmediateOrderById(udg_danwei2[0], 851972)
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_935")
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_tuxizhiren takes nothing returns nothing
set gg_trg_tuxizhiren=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_tuxizhiren, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_tuxizhiren, Condition(function Trig_tuxizhirenConditions))
call TriggerAddAction(gg_trg_tuxizhiren, function Trig_tuxizhirenActions)
endfunction
function Trig_tuxizhiren_2Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[376]) == false ) )
endfunction
function Trig_tuxizhiren_2Func001Func004Func001Func002A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
else
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[1])
endif
set udg_danwei2[1]=null
endfunction
function Trig_tuxizhiren_2Func001Func004Func011A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_HERO) == true ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
else
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[1])
endif
set udg_danwei2[1]=null
endfunction
function Trig_tuxizhiren_2Func001A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
if ( ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) == 1.00 ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], - 60.00, GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\BansheeMissile\\BansheeMissile.mdl", udg_dian2[0]))
else
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 0.00, GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE))
endif
if ( ( GetUnitUserData(udg_danwei2[0]) > 0 ) and ( IsTerrainPathableBJ(udg_dian2[0], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], 80.00, GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE))
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[2]))
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(150.00 , udg_dian2[1])
call ForGroupBJ(udg_xuanqu, function Trig_tuxizhiren_2Func001Func004Func011A)
if ( ( IsUnitGroupEmptyBJ(udg_xuanqu) == false ) ) then
if ( ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) == 1.00 ) ) then
call SetUnitX(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )], GetLocationY(udg_dian2[1]))
call StopSoundBJ(gg_snd_Shockwave, false)
call PlaySoundOnUnitBJ(gg_snd_Shockwave, 100, udg_danwei2[0])
else
endif
call KillUnit(udg_danwei2[0])
call GroupRemoveUnit(udg_danweizu2[376], udg_danwei2[0])
else
endif
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[2])
else
if ( ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) == 1.00 ) ) then
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(500.00 , udg_dian2[1])
call ForGroupBJ(udg_xuanqu, function Trig_tuxizhiren_2Func001Func004Func001Func002A)
if ( ( IsUnitGroupEmptyBJ(udg_xuanqu) == false ) ) then
set udg_danwei2[1]=GroupPickRandomUnit(udg_xuanqu)
set udg_dian2[2]=GetUnitLoc(udg_danwei2[1])
set udg_danwei2[2]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303630, udg_dian2[0], AngleBetweenPoints(udg_dian2[0], udg_dian2[2]))
call SetUnitUserData(udg_danwei2[2], ( ( R2I(DistanceBetweenPoints(udg_dian2[0], udg_dian2[2])) / 80 ) * 1 ))
call SetUnitLifeBJ(udg_danwei2[2], ( AngleBetweenPoints(udg_dian2[0], udg_dian2[2]) + 360.00 ))
call SetUnitManaBJ(udg_danwei2[2], 0.00)
call GroupAddUnit(udg_danweizu2[376], udg_danwei2[2])
call GroupRemoveUnit(udg_danweizu2[376], udg_danwei2[0])
call SetUnitX(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )], GetLocationY(udg_dian2[1]))
call StopSoundBJ(gg_snd_Shockwave, false)
call PlaySoundOnUnitBJ(gg_snd_Shockwave, 100, udg_danwei2[2])
set udg_danwei2[2]=null
call RemoveLocation(udg_dian2[2])
else
endif
call DestroyGroup(udg_xuanqu)
else
endif
call KillUnit(udg_danwei2[0])
call GroupRemoveUnit(udg_danweizu2[376], udg_danwei2[0])
endif
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_tuxizhiren_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[376], function Trig_tuxizhiren_2Func001A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_tuxizhiren_2 takes nothing returns nothing
set gg_trg_tuxizhiren_2=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_tuxizhiren_2, 0.01)
call TriggerAddCondition(gg_trg_tuxizhiren_2, Condition(function Trig_tuxizhiren_2Conditions))
call TriggerAddAction(gg_trg_tuxizhiren_2, function Trig_tuxizhiren_2Actions)
endfunction
function Trig_guangshi_1Actions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_HERO) == true ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[1]=GetSpellTargetLoc()
set udg_danwei2[2]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303755, udg_dian2[0], AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
call SetUnitUserData(udg_danwei2[2], 17)
call GroupAddUnit(udg_DAZE[0], udg_danwei2[2])
call GroupAddUnit(udg_DAZE[1], udg_danwei2[2])
call GroupAddUnit(udg_Danweizu[143], udg_danwei2[2])
set udg_danwei2[2]=null
call StopSoundBJ(gg_snd_PhaseShift1, false)
call PlaySoundOnUnitBJ(gg_snd_PhaseShift1, 100, udg_danwei2[0])
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
call IssueImmediateOrderById(udg_danwei2[0], 851972)
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_1172")
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_guangshi_1 takes nothing returns nothing
set gg_trg_guangshi_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_guangshi_1 , 3 , 0x41304D56)
call TriggerAddAction(gg_trg_guangshi_1, function Trig_guangshi_1Actions)
endfunction
function Trig_guangshi_2Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_Danweizu[143]) == false ) )
endfunction
function Trig_guangshi_2Func001Func003Func006A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "cripple" , udg_danwei2[1])
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\StaffOfPurification\\PurificationTarget.mdl", udg_danwei2[1], "origin"))
call GroupAddUnit(udg_Danweizu[144], udg_danwei2[1])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_guangshi_2Func001Func003Func018A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
else
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[1])
endif
set udg_danwei2[1]=null
endfunction
function Trig_guangshi_2Func001Func003Func019Func007A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "cripple" , udg_danwei2[1])
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\StaffOfPurification\\PurificationTarget.mdl", udg_danwei2[1], "origin"))
call GroupAddUnit(udg_Danweizu[144], udg_danwei2[1])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_guangshi_2Func001A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
if ( ( GetUnitUserData(udg_danwei2[0]) > 0 ) and ( IsTerrainPathableBJ(udg_dian2[0], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 60.00, GetUnitFacing(udg_danwei2[0]))
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(120.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_guangshi_2Func001Func003Func018A)
if ( ( IsUnitGroupEmptyBJ(udg_xuanqu) == false ) ) then
call DestroyGroup(udg_xuanqu)
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Items\\StaffOfPurification\\PurificationCaster.mdl", udg_dian2[0]))
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303130, udg_dian2[0], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304D55)
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(250.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_guangshi_2Func001Func003Func019Func007A)
set udg_Danwei[92]=null
call DestroyGroup(udg_xuanqu)
call GroupRemoveUnit(udg_Danweizu[143], udg_danwei2[0])
call KillUnit(udg_danwei2[0])
else
call DestroyGroup(udg_xuanqu)
endif
call RemoveLocation(udg_dian2[1])
else
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Items\\StaffOfPurification\\PurificationCaster.mdl", udg_dian2[0]))
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303130, udg_dian2[0], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304D55)
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(250.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_guangshi_2Func001Func003Func006A)
set udg_Danwei[92]=null
call DestroyGroup(udg_xuanqu)
call GroupRemoveUnit(udg_Danweizu[143], udg_danwei2[0])
call KillUnit(udg_danwei2[0])
endif
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_guangshi_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_Danweizu[143], function Trig_guangshi_2Func001A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_guangshi_2 takes nothing returns nothing
set gg_trg_guangshi_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_guangshi_2, udg_Times[3])
call TriggerAddCondition(gg_trg_guangshi_2, Condition(function Trig_guangshi_2Conditions))
call TriggerAddAction(gg_trg_guangshi_2, function Trig_guangshi_2Actions)
endfunction
function Trig_guangshi_3Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_Danweizu[144]) == false ) )
endfunction
function Trig_guangshi_3Func001A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
if ( ( UnitHasBuffBJ(udg_danwei2[0], 0x42303045) == true ) and ( IsUnitType(udg_danwei2[0], UNIT_TYPE_DEAD) == false ) ) then
else
call GroupRemoveUnit(udg_Danweizu[144], udg_danwei2[0])
endif
set udg_danwei2[0]=null
endfunction
function Trig_guangshi_3Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_Danweizu[144], function Trig_guangshi_3Func001A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_guangshi_3 takes nothing returns nothing
set gg_trg_guangshi_3=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_guangshi_3, 0.10)
call TriggerAddCondition(gg_trg_guangshi_3, Condition(function Trig_guangshi_3Conditions))
call TriggerAddAction(gg_trg_guangshi_3, function Trig_guangshi_3Actions)
endfunction
function Trig_yingyan_1Func006T takes nothing returns nothing
call UnitRemoveAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xC58841DE), 0x41304E57)
call UnitRemoveBuffBJ(0x42303348, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xC58841DE))
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
endfunction
function Trig_yingyan_1Actions takes nothing returns nothing
local timer ydl_timer
local integer ydl_localvar_step=LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76)
set ydl_localvar_step=ydl_localvar_step + 3
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76, ydl_localvar_step)
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xECE825E7, ydl_localvar_step)
set udg_danwei2[0]=GetTriggerUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303758, udg_dian2[0], 270.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 3.00)
call UnitAddAbility(udg_danwei2[0], 0x41304E57)
set ydl_timer=CreateTimer()
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0xC58841DE, GetTriggerUnit())
call TimerStart(ydl_timer, 15.00, false, function Trig_yingyan_1Func006T)
set udg_danwei2[0]=null
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
call FlushChildHashtable(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step)
set ydl_timer=null
endfunction
function InitTrig_yingyan_1 takes nothing returns nothing
set gg_trg_yingyan_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_yingyan_1 , 3 , 0x41304E55)
call TriggerAddAction(gg_trg_yingyan_1, function Trig_yingyan_1Actions)
endfunction
function Trig_qidi_1Actions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
set udg_dian2[0]=GetSpellTargetLoc()
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303759, udg_dian2[0], 270.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 5.00)
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
endfunction
function InitTrig_qidi_1 takes nothing returns nothing
set gg_trg_qidi_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_qidi_1 , 3 , 0x41304E56)
call TriggerAddAction(gg_trg_qidi_1, function Trig_qidi_1Actions)
endfunction
function Trig_fengkiangliliang_1Conditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41304454 ) )
endfunction
function Trig_fengkiangliliang_1Actions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
set udg_zhengshu2[3]=0
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=6
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ( ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], bj_forLoopAIndex)) == 0x49303055 ) ) then
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
if ( ( udg_zhengshu2[3] == 2 ) ) then
call UnitAddAbility(udg_danwei2[0], 0x4130454F)
else
if ( ( udg_zhengshu2[3] == 1 ) ) then
call UnitAddAbility(udg_danwei2[0], 0x41304458)
else
endif
endif
call GroupAddUnit(udg_danweizu2[267], udg_danwei2[0])
set udg_danwei2[0]=null
endfunction
function InitTrig_fengkiangliliang_1 takes nothing returns nothing
set gg_trg_fengkiangliliang_1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_fengkiangliliang_1, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_fengkiangliliang_1, Condition(function Trig_fengkiangliliang_1Conditions))
call TriggerAddAction(gg_trg_fengkiangliliang_1, function Trig_fengkiangliliang_1Actions)
endfunction
function Trig_fengkiangliliang_2Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[267]) == false ) )
endfunction
function Trig_fengkiangliliang_2Func001A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
if ( ( UnitHasBuffBJ(udg_danwei2[0], 0x42303155) == true ) and ( IsUnitType(udg_danwei2[0], UNIT_TYPE_DEAD) == false ) ) then
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[10]=1
loop
exitwhen udg_aXUNHUAN[10] > 6
if ( ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[10])) == 0x49303055 ) ) then
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
else
endif
set udg_aXUNHUAN[10]=udg_aXUNHUAN[10] + 1
endloop
if ( ( udg_zhengshu2[3] == 2 ) ) then
call UnitRemoveAbility(udg_danwei2[0], 0x41304458)
call UnitAddAbility(udg_danwei2[0], 0x4130454F)
else
if ( ( udg_zhengshu2[3] == 1 ) ) then
call UnitRemoveAbility(udg_danwei2[0], 0x4130454F)
call UnitAddAbility(udg_danwei2[0], 0x41304458)
else
call UnitRemoveAbility(udg_danwei2[0], 0x41304458)
call UnitRemoveAbility(udg_danwei2[0], 0x4130454F)
endif
endif
else
call UnitRemoveAbility(udg_danwei2[0], 0x41304458)
call UnitRemoveAbility(udg_danwei2[0], 0x4130454F)
call GroupRemoveUnit(udg_danweizu2[267], udg_danwei2[0])
endif
set udg_danwei2[0]=null
endfunction
function Trig_fengkiangliliang_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[267], function Trig_fengkiangliliang_2Func001A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_fengkiangliliang_2 takes nothing returns nothing
set gg_trg_fengkiangliliang_2=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_fengkiangliliang_2, 0.10)
call TriggerAddCondition(gg_trg_fengkiangliliang_2, Condition(function Trig_fengkiangliliang_2Conditions))
call TriggerAddAction(gg_trg_fengkiangliliang_2, function Trig_fengkiangliliang_2Actions)
endfunction
function Trig_yuyi_1Conditions takes nothing returns boolean
return ( ( GetKillingUnitBJ() != null ) )
endfunction
function Trig_yuyi_1Func001Func002Func002Func001Func010T takes nothing returns nothing
call UnitRemoveAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x41305147)
call UnitRemoveAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x41305146)
call UnitRemoveBuffBJ(0x42303356, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))
if ( ( s__sys_isIn11() == true ) ) then
call SetUnitRescueRange(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), - 4)
else
endif
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
endfunction
function Trig_yuyi_1Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
local timer ydl_timer
local integer ydl_localvar_step=LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76)
set ydl_localvar_step=ydl_localvar_step + 3
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76, ydl_localvar_step)
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xECE825E7, ydl_localvar_step)
if ( ( IsUnitType(GetDyingUnit(), UNIT_TYPE_HERO) == true ) and ( GetUnitTypeId(GetDyingUnit()) != 0x4F303030 ) ) then
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(GetDyingUnit() , 0x49303448)) == true ) ) then
set udg_Dian[10]=GetUnitLoc(GetDyingUnit())
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl", udg_Dian[10]))
set udg_Danwei[10]=CreateUnitAtLoc(GetOwningPlayer(GetDyingUnit()), 0x65303845, udg_Dian[10], 270.00)
call SetUnitAnimation(udg_Danwei[10], "death")
call SetUnitTimeScale(udg_Danwei[10], 0.00)
call SetUnitUserData(udg_Danwei[10], 100)
call GroupAddUnit(udg_Danweizu[166], udg_Danwei[10])
set udg_Danwei[10]=null
set udg_Danwei[10]=CreateUnitAtLoc(GetOwningPlayer(GetDyingUnit()), 0x65303839, udg_Dian[10], 270.00)
call UnitApplyTimedLife(udg_Danwei[10], 0x42487765, 10.00)
set udg_Danwei[10]=null
call RemoveLocation(udg_Dian[10])
else
endif
if ( ( IsUnitEnemy(GetKillingUnitBJ(), GetOwningPlayer(GetDyingUnit())) == true ) ) then
set udg_Dian[10]=GetUnitLoc(GetDyingUnit())
set ydl_group=CreateGroup()
call GroupEnumUnitsInRange(ydl_group, GetLocationX(udg_Dian[10]), GetLocationY(udg_Dian[10]), 1500.00, null)
loop
set ydl_unit=FirstOfGroup(ydl_group)
exitwhen ydl_unit == null
call GroupRemoveUnit(ydl_group, ydl_unit)
if ( ( GetUnitTypeId(ydl_unit) == 0x4830304F ) and ( UnitHasBuffBJ(ydl_unit, 0x42303356) == false ) and ( IsUnitType(ydl_unit, UNIT_TYPE_DEAD) == false ) and ( IsUnitAlly(ydl_unit, GetOwningPlayer(GetDyingUnit())) == true ) ) then
call UnitAddAbility(ydl_unit, 0x41305147)
call UnitAddAbility(ydl_unit, 0x41305146)
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xAF4CC8D0, GetUnitAbilityLevel(ydl_unit, 0x4130505A))
if ( ( LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xAF4CC8D0) > 0 ) ) then
call UnitRemoveAbility(ydl_unit, 0x4130505A)
call UnitAddAbility(ydl_unit, 0x4130505A)
call SetUnitAbilityLevel(ydl_unit, 0x4130505A, LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xAF4CC8D0))
else
endif
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xAF4CC8D0, GetUnitAbilityLevel(ydl_unit, 0x41305130))
if ( ( LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xAF4CC8D0) > 0 ) ) then
call UnitRemoveAbility(ydl_unit, 0x41305130)
call UnitAddAbility(ydl_unit, 0x41305130)
call SetUnitAbilityLevel(ydl_unit, 0x41305130, LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xAF4CC8D0))
else
endif
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xAF4CC8D0, GetUnitAbilityLevel(ydl_unit, 0x41305131))
if ( ( LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xAF4CC8D0) > 0 ) ) then
call UnitRemoveAbility(ydl_unit, 0x41305131)
call UnitAddAbility(ydl_unit, 0x41305131)
call SetUnitAbilityLevel(ydl_unit, 0x41305131, LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xAF4CC8D0))
else
endif
if ( ( s__sys_isIn11() == true ) ) then
call SetUnitRescueRange(ydl_unit, - 3)
else
endif
set ydl_timer=CreateTimer()
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x6CD84461, ydl_unit)
call TimerStart(ydl_timer, 10.00, false, function Trig_yuyi_1Func001Func002Func002Func001Func010T)
else
endif
endloop
call DestroyGroup(ydl_group)
call RemoveLocation(udg_Dian[10])
else
endif
else
endif
if ( ( IsUnitEnemy(GetKillingUnitBJ(), GetOwningPlayer(GetDyingUnit())) == true ) ) then
if ( ( ( ( GetUnitTypeId(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )]) == 0x4830304E ) and ( GetUnitAbilityLevel(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(GetKillingUnitBJ())) + 1 )], 0x41304F50) >= 1 ) ) or ( GetUnitAbilityLevel(GetDyingUnit(), 0x41304F54) == 1 ) or ( GetUnitAbilityLevel(GetDyingUnit(), 0x41304F53) == 1 ) ) and ( IsUnitType(GetDyingUnit(), UNIT_TYPE_STRUCTURE) == false ) ) then
set udg_Dian[10]=GetUnitLoc(GetDyingUnit())
set udg_Dian[11]=GetUnitLoc(udg_Danwei[161])
if ( ( IsUnitType(GetDyingUnit(), UNIT_TYPE_HERO) == true ) ) then
set udg_zhengshuex[5]=1
loop
exitwhen udg_zhengshuex[5] > 5
set udg_Danwei[10]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[161]), 0x6530375A, udg_Dian[10], AngleBetweenPoints(udg_Dian[10], udg_Dian[11]))
call SetUnitLifeBJ(udg_Danwei[10], ( GetUnitState(GetDyingUnit(), UNIT_STATE_MAX_LIFE) * 0.10 ))
call SetUnitUserData(udg_Danwei[10], 20)
call SetUnitManaBJ(udg_Danwei[10], ( GetRandomReal(500.00, 545.00) + ( 72.00 * I2R(udg_zhengshuex[5]) ) ))
call GroupAddUnit(udg_Danweizu[159], udg_Danwei[10])
set udg_Danwei[10]=null
set udg_zhengshuex[5]=udg_zhengshuex[5] + 1
endloop
else
set udg_Danwei[10]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[161]), 0x6530375A, udg_Dian[10], AngleBetweenPoints(udg_Dian[10], udg_Dian[11]))
call SetUnitLifeBJ(udg_Danwei[10], ( GetUnitState(GetDyingUnit(), UNIT_STATE_MAX_LIFE) * 0.10 ))
call SetUnitManaBJ(udg_Danwei[10], ( ( DistanceBetweenPoints(udg_Dian[10], udg_Dian[11]) * 0.50 ) * 0.01 ))
call GroupAddUnit(udg_Danweizu[159], udg_Danwei[10])
set udg_Danwei[10]=null
endif
call RemoveLocation(udg_Dian[10])
call RemoveLocation(udg_Dian[11])
else
endif
else
endif
set udg_Danwei[10]=GetDyingUnit()
set udg_Danwei[11]=GetKillingUnitBJ()
if ( ( IsUnitEnemy(udg_Danwei[11], GetOwningPlayer(udg_Danwei[10])) == true ) ) then
if ( ( IsUnitType(udg_Danwei[10], UNIT_TYPE_HERO) == true ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[11])) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[11])) + 1 ) <= 12 ) ) then
set udg_Dian[10]=GetUnitLoc(udg_Danwei[10])
set udg_aXUNHUAN[11]=1
loop
exitwhen udg_aXUNHUAN[11] > 10
set udg_Dian[11]=GetUnitLoc(udg_player[udg_aXUNHUAN[11]])
if ( ( IsUnitEnemy(udg_player[udg_aXUNHUAN[11]], GetOwningPlayer(udg_Danwei[10])) == true ) and ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_player[udg_aXUNHUAN[11]] , 0x49303250)) == true ) and ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[11])) + 1 ) == udg_aXUNHUAN[11] ) or ( DistanceBetweenPoints(udg_Dian[10], udg_Dian[11]) <= 1500.00 ) ) ) then
call SetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_player[udg_aXUNHUAN[11]] , 0x49303250), IMinBJ(( GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_player[udg_aXUNHUAN[11]] , 0x49303250)) + 1 ), 4))
else
endif
if ( ( IsUnitEnemy(udg_player[udg_aXUNHUAN[11]], GetOwningPlayer(udg_Danwei[10])) == true ) and ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_player[udg_aXUNHUAN[11]] , 0x49303233)) == true ) and ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[11])) + 1 ) == udg_aXUNHUAN[11] ) or ( DistanceBetweenPoints(udg_Dian[10], udg_Dian[11]) <= 1800.00 ) ) ) then
call SetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_player[udg_aXUNHUAN[11]] , 0x49303233), IMinBJ(( GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_player[udg_aXUNHUAN[11]] , 0x49303233)) + 1 ), 6))
else
endif
call RemoveLocation(udg_Dian[11])
set udg_aXUNHUAN[11]=udg_aXUNHUAN[11] + 1
endloop
call RemoveLocation(udg_Dian[10])
else
endif
else
endif
set udg_Danwei[10]=null
set udg_Danwei[11]=null
call FlushChildHashtable(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step)
set ydl_group=null
set ydl_unit=null
set ydl_timer=null
endfunction
function InitTrig_yuyi_1 takes nothing returns nothing
set gg_trg_yuyi_1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_yuyi_1, EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gg_trg_yuyi_1, Condition(function Trig_yuyi_1Conditions))
call TriggerAddAction(gg_trg_yuyi_1, function Trig_yuyi_1Actions)
endfunction
function Trig_xuezhou_1Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_Danweizu[159]) == false ) )
endfunction
function Trig_xuezhou_1Func001A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
if ( ( IsUnitType(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )], UNIT_TYPE_DEAD) == false ) ) then
if ( ( GetUnitUserData(udg_danwei2[0]) > 0 ) ) then
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
if ( ( IsTerrainPathableBJ(udg_dian2[0], PATHING_TYPE_FLYABILITY) == false ) ) then
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], ( I2R(GetUnitUserData(udg_danwei2[0])) * 1 ), ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) - 0.00 ))
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[2]))
call RemoveLocation(udg_dian2[2])
else
endif
if ( ( GetUnitUserData(udg_danwei2[0]) == 0 ) ) then
set udg_dian2[1]=GetUnitLoc(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )])
call SetUnitManaBJ(udg_danwei2[0], RMinBJ(( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) * 0.50 ) * 0.01 ), 80.00))
call RemoveLocation(udg_dian2[1])
else
endif
call RemoveLocation(udg_dian2[0])
else
if ( ( GetUnitUserData(udg_danwei2[0]) == 0 ) ) then
call SetUnitManaBJ(udg_danwei2[0], RMinBJ(( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) + 1 ), 80.00))
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[1]=GetUnitLoc(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )])
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) > 80.00 ) ) then
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], GetUnitState(udg_danwei2[0], UNIT_STATE_MANA), AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[2]))
call RemoveLocation(udg_dian2[2])
else
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
call SetUnitLifeBJ(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )], ( GetUnitState(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )], UNIT_STATE_LIFE) + ( I2R(GetHeroAgi(udg_Danwei[161], true)) * 0.50 ) ))
call SetUnitManaBJ(udg_Danwei[161], ( GetUnitState(udg_Danwei[161], UNIT_STATE_MANA) + ( 5.00 + ( 1 * I2R(IMaxBJ(GetUnitAbilityLevel(udg_Danwei[161], 0x41304F50), GetUnitAbilityLevel(udg_Danwei[161], 0x41304F55))) ) ) ))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl", udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )], "origin"))
call UnitApplyTimedLife(udg_danwei2[0], 0x42487765, 1.00)
call SetUnitAnimation(udg_danwei2[0], "birth")
call SetUnitUserData(udg_danwei2[0], - 1)
endif
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_DEAD) == false ) ) then
set udg_dian2[1]=GetUnitLoc(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )])
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
call RemoveLocation(udg_dian2[1])
else
call GroupRemoveUnit(udg_Danweizu[159], udg_danwei2[0])
endif
endif
endif
else
call GroupRemoveUnit(udg_Danweizu[159], udg_danwei2[0])
call RemoveUnit(udg_danwei2[0])
endif
set udg_danwei2[0]=null
endfunction
function Trig_xuezhou_1Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_Danweizu[159], function Trig_xuezhou_1Func001A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_xuezhou_1 takes nothing returns nothing
set gg_trg_xuezhou_1=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_xuezhou_1, udg_Times[3])
call TriggerAddCondition(gg_trg_xuezhou_1, Condition(function Trig_xuezhou_1Conditions))
call TriggerAddAction(gg_trg_xuezhou_1, function Trig_xuezhou_1Actions)
endfunction
function Trig_xingcanpifengConditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_Danweizu[166]) == false ) )
endfunction
function Trig_xingcanpifengFunc001A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
if ( ( GetUnitUserData(udg_danwei2[0]) > 0 ) ) then
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
else
call GroupRemoveUnit(udg_Danweizu[166], udg_danwei2[0])
call SetUnitTimeScale(udg_danwei2[0], 1.00)
call KillUnit(udg_danwei2[0])
endif
set udg_danwei2[0]=null
endfunction
function Trig_xingcanpifengActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_Danweizu[166], function Trig_xingcanpifengFunc001A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_xingcanpifeng takes nothing returns nothing
set gg_trg_xingcanpifeng=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_xingcanpifeng, 0.10)
call TriggerAddCondition(gg_trg_xingcanpifeng, Condition(function Trig_xingcanpifengConditions))
call TriggerAddAction(gg_trg_xingcanpifeng, function Trig_xingcanpifengActions)
endfunction
function Trig_yuyi_3Conditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x4130364C ) )
endfunction
function Trig_yuyi_3Actions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
if ( ( ( GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303250)) > 0 ) or ( GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303233)) > 0 ) ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303233)) == true ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Purge\\PurgeBuffTarget.mdl", udg_danwei2[0], "origin"))
call UnitRemoveBuffsEx(udg_danwei2[0], false, true, false, false, false, false, true)
call SetUnitLifePercentBJ(udg_danwei2[0], ( GetUnitLifePercent(udg_danwei2[0]) + ( ( 5.00 / 3.00 ) * I2R(GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303233))) ) ))
call SetUnitManaPercentBJ(udg_danwei2[0], ( GetUnitManaPercent(udg_danwei2[0]) + ( ( 5.00 / 3.00 ) * I2R(GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303233))) ) ))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303347, udg_dian2[0], GetUnitFacing(udg_danwei2[0]))
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 1.50)
call SetUnitVertexColor(udg_danwei2[1], ( 55 + ( 40 * GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303233)) ) ), ( 55 + ( 40 * GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303233)) ) ), ( 55 + ( 40 * GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303233)) ) ), 255)
set udg_danwei2[1]=null
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303134, udg_dian2[0], GetUnitFacing(udg_danwei2[0]))
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 1.50)
call SetUnitVertexColor(udg_danwei2[1], ( 55 + ( 40 * GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303233)) ) ), ( 55 + ( 40 * GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303233)) ) ), ( 55 + ( 40 * GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303233)) ) ), 255)
set udg_danwei2[1]=null
else
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303250)) == true ) ) then
call SetUnitLifePercentBJ(udg_danwei2[0], ( GetUnitLifePercent(udg_danwei2[0]) + ( ( 5.00 / 3.00 ) * I2R(GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303250))) ) ))
call SetUnitManaPercentBJ(udg_danwei2[0], ( GetUnitManaPercent(udg_danwei2[0]) + ( ( 5.00 / 3.00 ) * I2R(GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303250))) ) ))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303347, udg_dian2[0], GetUnitFacing(udg_danwei2[0]))
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 1.50)
call SetUnitVertexColor(udg_danwei2[1], ( 55 + ( 40 * GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303250)) ) ), ( 55 + ( 40 * GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303250)) ) ), ( 55 + ( 40 * GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303250)) ) ), 255)
set udg_danwei2[1]=null
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303134, udg_dian2[0], GetUnitFacing(udg_danwei2[0]))
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 1.50)
call SetUnitVertexColor(udg_danwei2[1], ( 55 + ( 40 * GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303250)) ) ), ( 55 + ( 40 * GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303250)) ) ), ( 55 + ( 40 * GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303250)) ) ), 255)
set udg_danwei2[1]=null
else
endif
endif
call RemoveLocation(udg_dian2[0])
call GroupAddUnit(udg_danweizu2[104], udg_danwei2[0])
else
call IssueImmediateOrderById(udg_danwei2[0], 851972)
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_yuyi_3 takes nothing returns nothing
set gg_trg_yuyi_3=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_yuyi_3, EVENT_PLAYER_UNIT_SPELL_CHANNEL)
call TriggerAddCondition(gg_trg_yuyi_3, Condition(function Trig_yuyi_3Conditions))
call TriggerAddAction(gg_trg_yuyi_3, function Trig_yuyi_3Actions)
endfunction
function Trig_yuyi_4Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[104]) == false ) )
endfunction
function Trig_yuyi_4Func002A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
if ( ( ( GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303250)) > 0 ) or ( GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303233)) > 0 ) ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303233)) == true ) ) then
call SetUnitLifePercentBJ(udg_danwei2[0], ( GetUnitLifePercent(udg_danwei2[0]) + ( ( 5.00 / 3.00 ) * I2R(GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303233))) ) ))
call SetUnitManaPercentBJ(udg_danwei2[0], ( GetUnitManaPercent(udg_danwei2[0]) + ( ( 5.00 / 3.00 ) * I2R(GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303233))) ) ))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303347, udg_dian2[0], GetUnitFacing(udg_danwei2[0]))
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 1.50)
call SetUnitVertexColor(udg_danwei2[1], ( 55 + ( 40 * GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303233)) ) ), ( 55 + ( 40 * GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303233)) ) ), ( 55 + ( 40 * GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303233)) ) ), 255)
set udg_danwei2[1]=null
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303134, udg_dian2[0], GetUnitFacing(udg_danwei2[0]))
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 1.50)
call SetUnitVertexColor(udg_danwei2[1], ( 55 + ( 40 * GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303233)) ) ), ( 55 + ( 40 * GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303233)) ) ), ( 55 + ( 40 * GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303233)) ) ), 255)
set udg_danwei2[1]=null
else
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303250)) == true ) ) then
call SetUnitLifePercentBJ(udg_danwei2[0], ( GetUnitLifePercent(udg_danwei2[0]) + ( ( 5.00 / 3.00 ) * I2R(GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303250))) ) ))
call SetUnitManaPercentBJ(udg_danwei2[0], ( GetUnitManaPercent(udg_danwei2[0]) + ( ( 5.00 / 3.00 ) * I2R(GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303250))) ) ))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303347, udg_dian2[0], GetUnitFacing(udg_danwei2[0]))
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 1.50)
call SetUnitVertexColor(udg_danwei2[1], ( 55 + ( 40 * GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303250)) ) ), ( 55 + ( 40 * GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303250)) ) ), ( 55 + ( 40 * GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303250)) ) ), 255)
set udg_danwei2[1]=null
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303134, udg_dian2[0], GetUnitFacing(udg_danwei2[0]))
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 1.50)
call SetUnitVertexColor(udg_danwei2[1], ( 55 + ( 40 * GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303250)) ) ), ( 55 + ( 40 * GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303250)) ) ), ( 55 + ( 40 * GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303250)) ) ), 255)
set udg_danwei2[1]=null
else
endif
endif
call RemoveLocation(udg_dian2[0])
else
call GroupRemoveUnit(udg_danweizu2[104], udg_danwei2[0])
call IssueImmediateOrderById(udg_danwei2[0], 851972)
endif
set udg_danwei2[0]=null
endfunction
function Trig_yuyi_4Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[104], function Trig_yuyi_4Func002A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_yuyi_4 takes nothing returns nothing
set gg_trg_yuyi_4=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_yuyi_4, 0.50)
call TriggerAddCondition(gg_trg_yuyi_4, Condition(function Trig_yuyi_4Conditions))
call TriggerAddAction(gg_trg_yuyi_4, function Trig_yuyi_4Actions)
endfunction
function Trig_yuyi_5Conditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x4130364C ) )
endfunction
function Trig_yuyi_5Actions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
call SetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303250), 0)
call SetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303233), 0)
call GroupRemoveUnit(udg_danweizu2[104], udg_danwei2[0])
set udg_danwei2[0]=null
endfunction
function InitTrig_yuyi_5 takes nothing returns nothing
set gg_trg_yuyi_5=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_yuyi_5, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerRegisterAnyUnitEventBJ(gg_trg_yuyi_5, EVENT_PLAYER_UNIT_SPELL_ENDCAST)
call TriggerAddCondition(gg_trg_yuyi_5, Condition(function Trig_yuyi_5Conditions))
call TriggerAddAction(gg_trg_yuyi_5, function Trig_yuyi_5Actions)
endfunction
function Trig_yuyi_6Conditions takes nothing returns boolean
return ( ( IsUnitType(GetAttacker(), UNIT_TYPE_HERO) == true ) and ( IsUnitInGroup(GetAttackedUnitBJ(), udg_danweizu2[104]) == true ) )
endfunction
function Trig_yuyi_6Func005Func013A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call s__baka_IssueTargetOrderById2(udg_danwei2[2] , 852111 , udg_danwei2[1])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_yuyi_6Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetAttackedUnitBJ()
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303233)) == true ) ) then
set udg_danwei2[3]=GetAttacker()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
call StopSoundBJ(gg_snd_LightningShieldTarget, false)
call PlaySoundOnUnitBJ(gg_snd_LightningShieldTarget, 100, udg_danwei2[0])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", udg_dian2[0]))
set udg_danwei2[2]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x6530344F, udg_dian2[0], 270.00)
call GroupAddUnit(udg_danweizu2[87], udg_danwei2[2])
call SetUnitTimeScale(udg_danwei2[2], 1.50)
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[3], ( ( I2R(( ( GetHeroStr(udg_danwei2[0], true) + GetHeroAgi(udg_danwei2[0], true) ) + GetHeroInt(udg_danwei2[0], true) )) / 4.00 ) * I2R(GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303233))) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call UnitApplyTimedLife(udg_danwei2[2], 0x42487765, 0.50)
call s__baka_IssueTargetOrderById2(udg_danwei2[2] , 852111 , udg_danwei2[3])
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(400.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_yuyi_6Func005Func013A)
call DestroyGroup(udg_xuanqu)
set udg_danwei2[2]=null
set udg_danwei2[3]=null
call RemoveLocation(udg_dian2[0])
else
endif
call IssueImmediateOrderById(udg_danwei2[0], 851972)
call GroupRemoveUnit(udg_danweizu2[104], udg_danwei2[0])
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_yuyi_6 takes nothing returns nothing
set gg_trg_yuyi_6=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_yuyi_6, EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(gg_trg_yuyi_6, Condition(function Trig_yuyi_6Conditions))
call TriggerAddAction(gg_trg_yuyi_6, function Trig_yuyi_6Actions)
endfunction
function Trig_lichang_1Conditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x4130384D ) )
endfunction
function Trig_lichang_1Actions takes nothing returns nothing
set udg_danwei2[0]=GetSpellAbilityUnit()
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_HERO) == true ) ) then
if ( ( GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303159)) > 0 ) ) then
set udg_dian2[0]=GetSpellTargetLoc()
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303331, udg_dian2[0], 0)
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) <= 5 ) ) then
call SetUnitVertexColor(udg_danwei2[1], 0, 255, 100, 255)
set udg_aXUNHUAN[12]=1
loop
exitwhen udg_aXUNHUAN[12] > 5
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_player[udg_aXUNHUAN[12]] , 0x49303159)) == true ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) != udg_aXUNHUAN[12] ) ) then
call SetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_player[udg_aXUNHUAN[12]] , 0x49303159), ( GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303159)) - 1 ))
else
endif
set udg_aXUNHUAN[12]=udg_aXUNHUAN[12] + 1
endloop
else
endif
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) >= 6 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) <= 10 ) ) then
call SetUnitVertexColor(udg_danwei2[1], 0, 150, 255, 255)
set udg_aXUNHUAN[13]=6
loop
exitwhen udg_aXUNHUAN[13] > 10
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_player[udg_aXUNHUAN[13]] , 0x49303159)) == true ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) != udg_aXUNHUAN[13] ) ) then
call SetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_player[udg_aXUNHUAN[13]] , 0x49303159), ( GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303159)) - 1 ))
else
endif
set udg_aXUNHUAN[13]=udg_aXUNHUAN[13] + 1
endloop
else
endif
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 15.00)
call GroupAddUnit(udg_danweizu2[76], udg_danwei2[1])
call SetUnitAnimation(udg_danwei2[1], "birth")
call StopSoundBJ(gg_snd_DevourMagic, false)
call PlaySoundOnUnitBJ(gg_snd_DevourMagic, 100, udg_danwei2[1])
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
else
call IssueImmediateOrderById(udg_danwei2[0], 851972)
call SetUnitManaBJ(udg_danwei2[0], ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) + 100.00 ))
endif
else
call IssueImmediateOrderById(udg_danwei2[0], 851972)
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_8847")
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_lichang_1 takes nothing returns nothing
set gg_trg_lichang_1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_lichang_1, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_lichang_1, Condition(function Trig_lichang_1Conditions))
call TriggerAddAction(gg_trg_lichang_1, function Trig_lichang_1Actions)
endfunction
function Trig_lichang_2Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[76]) == false ) )
endfunction
function Trig_lichang_2Func001Func002Func003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
call UnitRemoveAbility(udg_danwei2[1], 0x41304651)
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) <= 175.00 ) ) then
call GroupAddUnit(udg_xuanqu, udg_danwei2[1])
else
endif
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[1])
endfunction
function Trig_lichang_2Func001Func002Func004A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( ( IsUnitInGroup(udg_danwei2[1], udg_DAZE[0]) == true ) or ( ( GetUnitDefaultMoveSpeed(udg_danwei2[1]) > 0.00 ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) ) ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
if ( ( UnitHasBuffBJ(udg_danwei2[1], 0x4230304B) == false ) and ( GetUnitTypeId(udg_danwei2[1]) != 0x75303035 ) and ( GetUnitTypeId(udg_danwei2[1]) != 0x7530304B ) and ( GetUnitTypeId(udg_danwei2[1]) != 0x75303039 ) and ( GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE) >= 10 ) and ( GetUnitAbilityLevel(udg_danwei2[1], 0x41304651) == 0 ) ) then
if ( ( IsUnitInGroup(udg_danwei2[1], udg_DAZE[1]) == true ) ) then
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], ( I2R(GetUnitPointValueByType(GetUnitTypeId(udg_danwei2[1]))) * ( 0.04 * 0.92 ) ), ( GetUnitFacing(udg_danwei2[1]) + 180.00 ))
call UnitAddAbility(udg_danwei2[1], 0x41304651)
else
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], 175.00, AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
endif
if ( ( IsTerrainPathableBJ(udg_dian2[2], PATHING_TYPE_WALKABILITY) == false ) and ( ( s__maphack_GetHeight(udg_danwei2[1]) <= 100.00 ) or ( IsUnitType(udg_danwei2[1], UNIT_TYPE_HERO) == false ) ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[2]))
else
endif
call RemoveLocation(udg_dian2[2])
else
call StopSoundBJ(gg_snd_FlakCannon, false)
call PlaySoundOnUnitBJ(gg_snd_FlakCannon, 100, udg_danwei2[1])
call SetUnitTimeScale(udg_danwei2[0], 0.30)
call KillUnit(udg_danwei2[0])
endif
if ( ( ( udg_Points > - 1 ) or ( IsUnitType(udg_danwei2[1], UNIT_TYPE_HERO) == true ) ) ) then
call SetUnitLifeBJ(udg_danwei2[0], ( GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE) - 4.00 ))
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) <= 5 ) ) then
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\GargoyleMissile\\GargoyleMissile.mdl", udg_dian2[1]))
else
endif
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) >= 6 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) <= 10 ) ) then
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\WingedSerpentMissile\\WingedSerpentMissile.mdl", udg_dian2[1]))
else
endif
else
endif
call RemoveLocation(udg_dian2[1])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_lichang_2Func001Func002Func006A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
if ( ( udg_danwei2[0] != udg_danwei2[1] ) and ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) < 175.00 ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) ) then
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], RMinBJ(( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) + 20.00 ), 175.00), AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[2]))
call RemoveLocation(udg_dian2[2])
else
endif
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[1])
endfunction
function Trig_lichang_2Func001A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_DEAD) == false ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(175.00 , udg_dian2[0])
call ForGroupBJ(udg_DAZE[0], function Trig_lichang_2Func001Func002Func003A)
call ForGroupBJ(udg_xuanqu, function Trig_lichang_2Func001Func002Func004A)
call DestroyGroup(udg_xuanqu)
call ForGroupBJ(udg_danweizu2[76], function Trig_lichang_2Func001Func002Func006A)
call RemoveLocation(udg_dian2[0])
else
call GroupRemoveUnit(udg_danweizu2[76], udg_danwei2[0])
endif
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_lichang_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[76], function Trig_lichang_2Func001A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_lichang_2 takes nothing returns nothing
set gg_trg_lichang_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_lichang_2, udg_Times[4])
call TriggerAddCondition(gg_trg_lichang_2, Condition(function Trig_lichang_2Conditions))
call TriggerAddAction(gg_trg_lichang_2, function Trig_lichang_2Actions)
endfunction
function Trig_lichang_3Actions takes nothing returns nothing
set udg_aXUNHUAN[14]=1
loop
exitwhen udg_aXUNHUAN[14] > 10
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_player[udg_aXUNHUAN[14]] , 0x49303159)) == true ) ) then
call SetUnitManaBJ(udg_player[udg_aXUNHUAN[14]], ( GetUnitState(udg_player[udg_aXUNHUAN[14]], UNIT_STATE_MANA) + 100.00 ))
call SetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_player[udg_aXUNHUAN[14]] , 0x49303159), IMinBJ(( GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_player[udg_aXUNHUAN[14]] , 0x49303159)) + 1 ), 5))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIma\\AImaTarget.mdl", udg_player[udg_aXUNHUAN[14]], "chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\SpiritTouchTarget.mdl", udg_player[udg_aXUNHUAN[14]], "chest"))
else
endif
set udg_aXUNHUAN[14]=udg_aXUNHUAN[14] + 1
endloop
endfunction
function InitTrig_lichang_3 takes nothing returns nothing
set gg_trg_lichang_3=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_lichang_3, 10.00)
call TriggerAddAction(gg_trg_lichang_3, function Trig_lichang_3Actions)
endfunction
function Trig_lingji_1Conditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41303937 ) )
endfunction
function Trig_lingji_1Actions takes nothing returns nothing
set udg_danwei2[0]=GetSpellAbilityUnit()
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_HERO) == true ) ) then
call UnitRemoveBuffsEx(udg_danwei2[0], false, true, false, false, false, false, true)
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\NightElf\\NEDeathSmall\\NEDeathSmall.mdl", udg_dian2[0]))
if ( ( GetUnitLifePercent(udg_danwei2[0]) <= 20.00 ) ) then
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\Resurrect\\ResurrectTarget.mdl", udg_dian2[0]))
call SetUnitLifePercentBJ(udg_danwei2[0], 20.00)
call UnitRemoveBuffsEx(udg_danwei2[0], false, true, false, false, false, false, true)
else
endif
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303339, udg_dian2[0], 0)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 0.50)
call GroupAddUnit(udg_danweizu2[87], udg_danwei2[1])
call SetUnitTimeScale(udg_danwei2[1], 0.70)
call SetUnitAnimation(udg_danwei2[1], "birth")
call StopSoundBJ(gg_snd_HolyBolt, false)
call PlaySoundOnUnitBJ(gg_snd_HolyBolt, 100, udg_danwei2[0])
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
else
call IssueImmediateOrderById(udg_danwei2[0], 851972)
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_9151")
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_lingji_1 takes nothing returns nothing
set gg_trg_lingji_1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_lingji_1, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_lingji_1, Condition(function Trig_lingji_1Conditions))
call TriggerAddAction(gg_trg_lingji_1, function Trig_lingji_1Actions)
endfunction
function Trig_lingji_2Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[87]) == false ) )
endfunction
function Trig_lingji_2Func001Func002Func003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) and ( GetUnitDefaultMoveSpeed(udg_danwei2[1]) > 0.00 ) ) then
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], 36.00, AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
if ( ( IsTerrainPathableBJ(udg_dian2[2], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[2]))
else
endif
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_lingji_2Func001A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_DEAD) == false ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x65303339 ) ) then
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(600.00 , udg_dian2[0])
else
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(400.00 , udg_dian2[0])
endif
call ForGroupBJ(udg_xuanqu, function Trig_lingji_2Func001Func002Func003A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[0])
else
call GroupRemoveUnit(udg_danweizu2[87], udg_danwei2[0])
endif
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_lingji_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[87], function Trig_lingji_2Func001A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_lingji_2 takes nothing returns nothing
set gg_trg_lingji_2=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_lingji_2, 0.03)
call TriggerAddCondition(gg_trg_lingji_2, Condition(function Trig_lingji_2Conditions))
call TriggerAddAction(gg_trg_lingji_2, function Trig_lingji_2Actions)
endfunction
function Trig_lingji_3Conditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41303937 ) )
endfunction
function Trig_lingji_3Actions takes nothing returns nothing
set udg_danwei2[0]=GetSpellAbilityUnit()
if ( ( GetUnitLifePercent(udg_danwei2[0]) > 20.00 ) ) then
call UnitRemoveAbility(udg_danwei2[0], 0x4276756C)
else
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_lingji_3 takes nothing returns nothing
set gg_trg_lingji_3=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_lingji_3, EVENT_PLAYER_UNIT_SPELL_FINISH)
call TriggerAddCondition(gg_trg_lingji_3, Condition(function Trig_lingji_3Conditions))
call TriggerAddAction(gg_trg_lingji_3, function Trig_lingji_3Actions)
endfunction
function Trig_Hf_Yx_LzActions takes nothing returns nothing
set udg_dian2[0]=GetItemLoc(GetManipulatedItem())
set udg_danwei2[0]=GetManipulatingUnit()
if ( ( GetItemTypeId(GetManipulatedItem()) == 0x49303055 ) ) then
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[15]=1
loop
exitwhen udg_aXUNHUAN[15] > 6
if ( ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[15])) == 0x49303055 ) ) then
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
else
endif
set udg_aXUNHUAN[15]=udg_aXUNHUAN[15] + 1
endloop
if ( ( udg_zhengshu2[3] > 2 ) ) then
call UnitRemoveItemSwapped(GetManipulatedItem(), udg_danwei2[0])
call SetItemPositionLoc(GetManipulatedItem(), udg_dian2[0])
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_7851")
else
endif
else
endif
if ( ( GetItemTypeId(GetManipulatedItem()) == 0x49303049 ) ) then
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[16]=1
loop
exitwhen udg_aXUNHUAN[16] > 6
if ( ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[16])) == 0x49303049 ) ) then
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
else
endif
set udg_aXUNHUAN[16]=udg_aXUNHUAN[16] + 1
endloop
if ( ( udg_zhengshu2[3] > 2 ) ) then
call UnitRemoveItemSwapped(GetManipulatedItem(), udg_danwei2[0])
call SetItemPositionLoc(GetManipulatedItem(), udg_dian2[0])
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_7853")
else
endif
else
endif
if ( ( ( GetItemTypeId(GetManipulatedItem()) == 0x49303232 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x49303051 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x49303053 ) ) ) then
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[17]=1
loop
exitwhen udg_aXUNHUAN[17] > 6
if ( ( ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[17])) == 0x49303053 ) or ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[17])) == 0x49303051 ) or ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[17])) == 0x49303232 ) ) ) then
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
else
endif
set udg_aXUNHUAN[17]=udg_aXUNHUAN[17] + 1
endloop
if ( ( udg_zhengshu2[3] > 2 ) ) then
call UnitRemoveItemSwapped(GetManipulatedItem(), udg_danwei2[0])
call SetItemPositionLoc(GetManipulatedItem(), udg_dian2[0])
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_7852")
else
endif
else
endif
if ( ( ( GetItemTypeId(GetManipulatedItem()) == 0x72617466 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x49303453 ) ) ) then
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[18]=1
loop
exitwhen udg_aXUNHUAN[18] > 6
if ( ( ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[18])) == 0x72617466 ) or ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[18])) == 0x49303453 ) ) ) then
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
else
endif
set udg_aXUNHUAN[18]=udg_aXUNHUAN[18] + 1
endloop
if ( ( udg_zhengshu2[3] > 1 ) ) then
call UnitRemoveItemSwapped(GetManipulatedItem(), udg_danwei2[0])
call SetItemPositionLoc(GetManipulatedItem(), udg_dian2[0])
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_7858")
else
endif
else
endif
if ( ( GetItemTypeId(GetManipulatedItem()) == 0x49303159 ) ) then
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[19]=1
loop
exitwhen udg_aXUNHUAN[19] > 6
if ( ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[19])) == 0x49303159 ) ) then
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
else
endif
set udg_aXUNHUAN[19]=udg_aXUNHUAN[19] + 1
endloop
if ( ( udg_zhengshu2[3] > 1 ) ) then
call UnitRemoveItemSwapped(GetManipulatedItem(), udg_danwei2[0])
call SetItemPositionLoc(GetManipulatedItem(), udg_dian2[0])
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_8846")
else
endif
else
endif
if ( ( ( GetItemTypeId(GetManipulatedItem()) == 0x62737064 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x49303348 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x49303349 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x49303038 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x49303156 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x49303333 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x49303450 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x49303359 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x49303254 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x49303039 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x49303235 ) ) ) then
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[20]=1
loop
exitwhen udg_aXUNHUAN[20] > 6
if ( ( ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[20])) == 0x62737064 ) or ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[20])) == 0x49303349 ) or ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[20])) == 0x49303348 ) or ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[20])) == 0x49303038 ) or ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[20])) == 0x49303156 ) or ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[20])) == 0x49303333 ) or ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[20])) == 0x49303450 ) or ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[20])) == 0x49303359 ) or ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[20])) == 0x49303254 ) or ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[20])) == 0x49303039 ) or ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[20])) == 0x49303235 ) ) ) then
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
else
endif
set udg_aXUNHUAN[20]=udg_aXUNHUAN[20] + 1
endloop
if ( ( udg_zhengshu2[3] > 2 ) ) then
call UnitRemoveItemSwapped(GetManipulatedItem(), udg_danwei2[0])
call SetItemPositionLoc(GetManipulatedItem(), udg_dian2[0])
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_9478")
else
endif
else
endif
if ( ( GetItemTypeId(GetManipulatedItem()) == 0x72617463 ) ) then
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[21]=1
loop
exitwhen udg_aXUNHUAN[21] > 6
if ( ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[21])) == 0x72617463 ) ) then
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
else
endif
set udg_aXUNHUAN[21]=udg_aXUNHUAN[21] + 1
endloop
if ( ( udg_zhengshu2[3] > 2 ) ) then
call UnitRemoveItemSwapped(GetManipulatedItem(), udg_danwei2[0])
call SetItemPositionLoc(GetManipulatedItem(), udg_dian2[0])
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_2155")
else
endif
else
endif
if ( ( ( GetItemTypeId(GetManipulatedItem()) == 0x49303250 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x49303233 ) ) ) then
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[22]=1
loop
exitwhen udg_aXUNHUAN[22] > 6
if ( ( ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[22])) == 0x49303250 ) or ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[22])) == 0x49303233 ) ) ) then
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
else
endif
set udg_aXUNHUAN[22]=udg_aXUNHUAN[22] + 1
endloop
if ( ( udg_zhengshu2[3] > 1 ) ) then
call UnitRemoveItemSwapped(GetManipulatedItem(), udg_danwei2[0])
call SetItemPositionLoc(GetManipulatedItem(), udg_dian2[0])
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_390")
else
endif
else
endif
if ( ( ( GetItemTypeId(GetManipulatedItem()) == 0x49303332 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x72617463 ) ) ) then
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[23]=1
loop
exitwhen udg_aXUNHUAN[23] > 6
if ( ( ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[23])) == 0x49303332 ) or ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[23])) == 0x72617463 ) ) ) then
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
else
endif
set udg_aXUNHUAN[23]=udg_aXUNHUAN[23] + 1
endloop
if ( ( udg_zhengshu2[3] > 2 ) ) then
call UnitRemoveItemSwapped(GetManipulatedItem(), udg_danwei2[0])
call SetItemPositionLoc(GetManipulatedItem(), udg_dian2[0])
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_3043")
else
endif
else
endif
if ( ( GetItemTypeId(GetManipulatedItem()) == 0x73747770 ) ) then
if ( ( ( GetUnitAbilityLevel(udg_danwei2[0], 0x41303150) > 0 ) or ( GetUnitAbilityLevel(udg_danwei2[0], 0x41303444) > 0 ) ) ) then
call UnitRemoveItemSwapped(GetManipulatedItem(), udg_danwei2[0])
call SetItemPositionLoc(GetManipulatedItem(), udg_dian2[0])
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_5766")
else
endif
else
endif
if ( ( GetItemTypeId(GetManipulatedItem()) == 0x49303332 ) ) then
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[24]=1
loop
exitwhen udg_aXUNHUAN[24] > 6
if ( ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[24])) == 0x49303332 ) ) then
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
else
endif
set udg_aXUNHUAN[24]=udg_aXUNHUAN[24] + 1
endloop
if ( ( udg_zhengshu2[3] > 1 ) ) then
call UnitRemoveItemSwapped(GetManipulatedItem(), udg_danwei2[0])
call SetItemPositionLoc(GetManipulatedItem(), udg_dian2[0])
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_2847")
else
endif
else
endif
if ( ( GetItemTypeId(GetManipulatedItem()) == 0x49303448 ) ) then
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[24]=1
loop
exitwhen udg_aXUNHUAN[24] > 6
if ( ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[24])) == 0x49303448 ) ) then
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
else
endif
set udg_aXUNHUAN[24]=udg_aXUNHUAN[24] + 1
endloop
if ( ( udg_zhengshu2[3] > 1 ) ) then
call UnitRemoveItemSwapped(GetManipulatedItem(), udg_danwei2[0])
call SetItemPositionLoc(GetManipulatedItem(), udg_dian2[0])
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_7790")
else
endif
else
endif
if ( ( ( GetItemTypeId(GetManipulatedItem()) == 0x72646533 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x49303054 ) ) ) then
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[24]=1
loop
exitwhen udg_aXUNHUAN[24] > 6
if ( ( ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[24])) == 0x72646533 ) or ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[24])) == 0x49303054 ) ) ) then
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
else
endif
set udg_aXUNHUAN[24]=udg_aXUNHUAN[24] + 1
endloop
if ( ( udg_zhengshu2[3] > 1 ) ) then
call UnitRemoveItemSwapped(GetManipulatedItem(), udg_danwei2[0])
call SetItemPositionLoc(GetManipulatedItem(), udg_dian2[0])
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_2887")
else
endif
else
endif
if ( ( ( GetItemTypeId(GetManipulatedItem()) == 0x4930324B ) or ( GetItemTypeId(GetManipulatedItem()) == 0x4930324D ) or ( GetItemTypeId(GetManipulatedItem()) == 0x4930324C ) ) ) then
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[25]=1
loop
exitwhen udg_aXUNHUAN[25] > 6
if ( ( ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[25])) == 0x4930324B ) or ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[25])) == 0x4930324D ) or ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[25])) == 0x4930324C ) ) ) then
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
else
endif
set udg_aXUNHUAN[25]=udg_aXUNHUAN[25] + 1
endloop
if ( ( udg_zhengshu2[3] > 1 ) ) then
call UnitRemoveItemSwapped(GetManipulatedItem(), udg_danwei2[0])
call SetItemPositionLoc(GetManipulatedItem(), udg_dian2[0])
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_1233")
else
endif
else
endif
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
endfunction
function InitTrig_Hf_Yx_Lz takes nothing returns nothing
set gg_trg_Hf_Yx_Lz=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Hf_Yx_Lz, EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddAction(gg_trg_Hf_Yx_Lz, function Trig_Hf_Yx_LzActions)
endfunction
function Trig_shanshuoConditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41304746 ) )
endfunction
function Trig_shanshuoActions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[1]=GetSpellTargetLoc()
if ( ( GetHeroInt(udg_danwei2[0], true) > GetHeroStr(udg_danwei2[0], true) ) and ( GetHeroInt(udg_danwei2[0], true) > GetHeroAgi(udg_danwei2[0], true) ) ) then
if ( ( UnitHasBuffBJ(udg_danwei2[0], 0x42303232) == false ) and ( UnitHasBuffBJ(udg_danwei2[0], 0x42303345) == false ) ) then
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], RMinBJ(DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]), 1100.00), AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
else
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], RMinBJ(DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]), 350.00), AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
endif
else
if ( ( GetHeroAgi(udg_danwei2[0], true) >= GetHeroStr(udg_danwei2[0], true) ) and ( GetHeroAgi(udg_danwei2[0], true) >= GetHeroInt(udg_danwei2[0], true) ) ) then
if ( ( UnitHasBuffBJ(udg_danwei2[0], 0x42303232) == false ) and ( UnitHasBuffBJ(udg_danwei2[0], 0x42303345) == false ) ) then
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], RMinBJ(DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]), 950.00), AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
else
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], RMinBJ(DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]), 300.00), AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
endif
else
if ( ( GetHeroStr(udg_danwei2[0], true) > GetHeroAgi(udg_danwei2[0], true) ) and ( GetHeroStr(udg_danwei2[0], true) > GetHeroInt(udg_danwei2[0], true) ) ) then
if ( ( UnitHasBuffBJ(udg_danwei2[0], 0x42303232) == false ) and ( UnitHasBuffBJ(udg_danwei2[0], 0x42303345) == false ) ) then
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], RMinBJ(DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]), 650.00), AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
else
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], RMinBJ(DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]), 250.00), AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
endif
else
endif
endif
endif
if ( ( IsTerrainPathableBJ(udg_dian2[2], PATHING_TYPE_WALKABILITY) == false ) ) then
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\NightElf\\Blink\\BlinkTarget.mdl", udg_dian2[0]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\NightElf\\Blink\\BlinkCaster.mdl", udg_dian2[2]))
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[2]))
else
call IssueImmediateOrderById(udg_danwei2[0], 851972)
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_2451")
endif
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
endfunction
function InitTrig_shanshuo takes nothing returns nothing
set gg_trg_shanshuo=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_shanshuo, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_shanshuo, Condition(function Trig_shanshuoConditions))
call TriggerAddAction(gg_trg_shanshuo, function Trig_shanshuoActions)
endfunction
function Trig_jushe_1Conditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41304D53 ) )
endfunction
function Trig_jushe_1Actions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_HERO) == true ) ) then
set udg_danwei2[1]=GetSpellTargetUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
set udg_danwei2[2]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303754, udg_dian2[0], AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
call SaveUnitHandle(YDHT, GetHandleId(udg_danwei2[2]), 0x83A69DD3, udg_danwei2[1])
call SetUnitUserData(udg_danwei2[2], 28)
call SetUnitLifeBJ(udg_danwei2[2], ( AngleBetweenPoints(udg_dian2[0], udg_dian2[1]) + 360.00 ))
call SetUnitManaBJ(udg_danwei2[2], ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) + 400.00 ))
call SetUnitScale(udg_danwei2[2], 0.00, 0.00, 0.00)
call GroupAddUnit(udg_DAZE[0], udg_danwei2[2])
call GroupAddUnit(udg_DAZE[1], udg_danwei2[2])
call GroupAddUnit(udg_Danweizu[142], udg_danwei2[2])
set udg_danwei2[1]=null
set udg_danwei2[2]=null
call StopSoundBJ(gg_snd_FrostArrowLaunch101, false)
call PlaySoundOnUnitBJ(gg_snd_FrostArrowLaunch101, 100, udg_danwei2[0])
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
call IssueImmediateOrderById(udg_danwei2[0], 851972)
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_1171")
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_jushe_1 takes nothing returns nothing
set gg_trg_jushe_1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_jushe_1, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_jushe_1, Condition(function Trig_jushe_1Conditions))
call TriggerAddAction(gg_trg_jushe_1, function Trig_jushe_1Actions)
endfunction
function Trig_jushe_2Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_Danweizu[142]) == false ) )
endfunction
function Trig_jushe_2Func001A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
if ( ( GetUnitUserData(udg_danwei2[0]) > 0 ) ) then
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
if ( ( GetUnitUserData(udg_danwei2[0]) >= 20 ) ) then
set udg_dian2[2]=GetUnitLoc(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )])
if ( ( UnitHasBuffBJ(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )], 0x42303232) == false ) and ( UnitHasBuffBJ(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )], 0x42303345) == false ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[2], ( ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) - 1000.00 ) / 8.00 ), GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE))
else
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[2], ( ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) - 1000.00 ) / 40.00 ), GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE))
endif
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )], GetLocationY(udg_dian2[1]))
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
else
endif
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl", udg_dian2[1]))
if ( ( GetUnitUserData(udg_danwei2[0]) == 20 ) ) then
call SetUnitScale(udg_danwei2[0], 1.50, 1.50, 1.50)
else
endif
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
else
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[1]=GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(udg_danwei2[0]), 0x83A69DD3))
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) >= 80.00 ) ) then
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], 60.00, AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
if ( ( IsTerrainPathableBJ(udg_dian2[2], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitFacing(udg_danwei2[0], AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[2]))
else
endif
call RemoveLocation(udg_dian2[2])
else
call DestroyEffect(AddSpecialEffectTarget("abilities\\weapons\\WyvernSpear\\WyvernSpearMissile.mdl", LoadUnitHandle(YDHT, GetHandleId(udg_danwei2[0]), 0x83A69DD3), "chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile.mdl", LoadUnitHandle(YDHT, GetHandleId(udg_danwei2[0]), 0x83A69DD3), "chest"))
call UnitDamageTarget(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )], LoadUnitHandle(YDHT, GetHandleId(udg_danwei2[0]), 0x83A69DD3), ( I2R(GetHeroAgi(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )], true)) * 2.00 ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
call GroupRemoveUnit(udg_Danweizu[142], udg_danwei2[0])
call s__Unit_CreateNUnitsAtLocMU(1 , 0x65303130 , GetOwningPlayer(udg_danwei2[0]) , GetUnitLoc(udg_danwei2[0]) , bj_UNIT_FACING)
call UnitApplyTimedLife(bj_lastCreatedUnit, 0x42487765, 0.50)
call UnitAddAbility(bj_lastCreatedUnit, 0x41303551)
call s__baka_IssueTargetOrder2(bj_lastCreatedUnit , "thunderbolt" , LoadUnitHandle(YDHT, GetHandleId(udg_danwei2[0]), 0x83A69DD3))
call RemoveSavedHandle(YDHT, GetHandleId(udg_danwei2[0]), 0x83A69DD3)
call KillUnit(udg_danwei2[0])
endif
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
endif
else
call RemoveSavedHandle(YDHT, GetHandleId(udg_danwei2[0]), 0x83A69DD3)
call GroupRemoveUnit(udg_Danweizu[142], udg_danwei2[0])
call KillUnit(udg_danwei2[0])
endif
set udg_danwei2[0]=null
endfunction
function Trig_jushe_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_Danweizu[142], function Trig_jushe_2Func001A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_jushe_2 takes nothing returns nothing
set gg_trg_jushe_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_jushe_2, udg_Times[3])
call TriggerAddCondition(gg_trg_jushe_2, Condition(function Trig_jushe_2Conditions))
call TriggerAddAction(gg_trg_jushe_2, function Trig_jushe_2Actions)
endfunction
function Trig_fengxing_1Conditions takes nothing returns boolean
return ( ( ( GetSpellAbilityId() == 0x41303354 ) or ( GetSpellAbilityId() == 0x41303752 ) ) )
endfunction
function Trig_fengxing_1Actions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_HERO) == true ) ) then
set udg_zhengshu2[( 270 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) )]=10
set udg_Shishu[( 159 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) )]=GetUnitFacing(udg_danwei2[0])
else
call IssueImmediateOrderById(udg_danwei2[0], 851972)
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_2364")
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_fengxing_1 takes nothing returns nothing
set gg_trg_fengxing_1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_fengxing_1, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_fengxing_1, Condition(function Trig_fengxing_1Conditions))
call TriggerAddAction(gg_trg_fengxing_1, function Trig_fengxing_1Actions)
endfunction
function Trig_fengxing_2Actions takes nothing returns nothing
set udg_aXUNHUAN[27]=1
loop
exitwhen udg_aXUNHUAN[27] > 10
set udg_danwei2[0]=udg_player[udg_aXUNHUAN[27]]
if ( ( udg_zhengshu2[( 270 + udg_aXUNHUAN[27] )] >= 0 ) and ( IsUnitType(udg_danwei2[0], UNIT_TYPE_DEAD) == false ) ) then
set udg_zhengshu2[( 270 + udg_aXUNHUAN[27] )]=( udg_zhengshu2[( 270 + udg_aXUNHUAN[27] )] - 1 )
if ( ( IsUnitPausedBJ(udg_danwei2[0]) == false ) and ( IsUnitInGroup(udg_danwei2[0], udg_danweizu[60]) == false ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
if ( ( UnitHasBuffBJ(udg_danwei2[0], 0x42303232) == false ) and ( UnitHasBuffBJ(udg_danwei2[0], 0x42303345) == false ) ) then
if ( ( GetHeroAgi(udg_danwei2[0], true) > GetHeroStr(udg_danwei2[0], true) ) and ( GetHeroAgi(udg_danwei2[0], true) > GetHeroInt(udg_danwei2[0], true) ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 50.00, udg_Shishu[( 159 + udg_aXUNHUAN[27] )])
else
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 25.00, udg_Shishu[( 159 + udg_aXUNHUAN[27] )])
endif
else
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 10.00, udg_Shishu[( 159 + udg_aXUNHUAN[27] )])
endif
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
else
endif
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl", udg_dian2[0]))
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
endif
else
endif
set udg_danwei2[0]=null
set udg_aXUNHUAN[27]=udg_aXUNHUAN[27] + 1
endloop
endfunction
function InitTrig_fengxing_2 takes nothing returns nothing
set gg_trg_fengxing_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_fengxing_2, udg_Times[3])
call TriggerAddAction(gg_trg_fengxing_2, function Trig_fengxing_2Actions)
endfunction
function Trig_fengbao_1Conditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41303752 ) )
endfunction
function Trig_fengbao_1Actions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_HERO) == true ) ) then
call StopSoundBJ(gg_snd_PandarenUltimate, false)
call PlaySoundOnUnitBJ(gg_snd_PandarenUltimate, 100, udg_danwei2[0])
set udg_shishu2[( 270 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) )]=10.00
else
call IssueImmediateOrderById(udg_danwei2[0], 851972)
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_3156")
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_fengbao_1 takes nothing returns nothing
set gg_trg_fengbao_1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_fengbao_1, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_fengbao_1, Condition(function Trig_fengbao_1Conditions))
call TriggerAddAction(gg_trg_fengbao_1, function Trig_fengbao_1Actions)
endfunction
function Trig_fengbao_2Func001Func002Func002Func003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
if ( ( GetHeroAgi(udg_danwei2[0], true) > GetHeroStr(udg_danwei2[0], true) ) and ( GetHeroAgi(udg_danwei2[0], true) > GetHeroInt(udg_danwei2[0], true) ) and ( UnitHasBuffBJ(udg_danwei2[0], 0x42303232) == false ) and ( UnitHasBuffBJ(udg_danwei2[0], 0x42303345) == false ) ) then
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], 15.00, udg_Shishu[( 159 + udg_aXUNHUAN[28] )])
else
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], 7.50, udg_Shishu[( 159 + udg_aXUNHUAN[28] )])
endif
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( GetUnitDefaultMoveSpeed(udg_danwei2[1]) > 0.00 ) ) then
if ( ( IsTerrainPathableBJ(udg_dian2[2], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[2]))
else
endif
else
endif
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
set udg_danwei2[1]=null
endfunction
function Trig_fengbao_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_aXUNHUAN[28]=1
loop
exitwhen udg_aXUNHUAN[28] > 10
set udg_danwei2[0]=udg_player[udg_aXUNHUAN[28]]
if ( ( udg_shishu2[( 270 + udg_aXUNHUAN[28] )] >= 0.00 ) and ( IsUnitType(udg_danwei2[0], UNIT_TYPE_DEAD) == false ) ) then
set udg_shishu2[( 270 + udg_aXUNHUAN[28] )]=( udg_shishu2[( 270 + udg_aXUNHUAN[28] )] - 1 )
if ( ( IsUnitPausedBJ(udg_danwei2[0]) == false ) and ( IsUnitInGroup(udg_danwei2[0], udg_danweizu[60]) == false ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(300.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_fengbao_2Func001Func002Func002Func003A)
call DestroyGroup(udg_xuanqu)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=12
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], 275.00, ( GetRandomReal(0, 30.00) + ( 30.00 * I2R(bj_forLoopAIndex) ) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl", udg_dian2[2]))
call RemoveLocation(udg_dian2[2])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call RemoveLocation(udg_dian2[0])
else
endif
else
endif
set udg_danwei2[0]=null
set udg_aXUNHUAN[28]=udg_aXUNHUAN[28] + 1
endloop
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_fengbao_2 takes nothing returns nothing
set gg_trg_fengbao_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_fengbao_2, udg_Times[3])
call TriggerAddAction(gg_trg_fengbao_2, function Trig_fengbao_2Actions)
endfunction
function Trig_xingchenzhiren_1Conditions takes nothing returns boolean
return ( ( ( GetSpellAbilityId() == 0x41305055 ) or ( GetSpellAbilityId() == 0x41305056 ) ) )
endfunction
function Trig_xingchenzhiren_1Func002Func008T takes nothing returns nothing
if ( ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x2A37F621) > 0 ) ) then
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x2A37F621, ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x2A37F621) - 1 ))
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x61E1A70B, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59)))
if ( ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x2A37F621) > 5 ) ) then
call SetUnitX(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF), GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x61E1A70B)))
call SetUnitY(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x61E1A70B)))
call SetUnitScale(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF), ( - 0.50 + ( 0.10 * I2R(LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x2A37F621)) ) ), ( - 0.50 + ( 0.10 * I2R(LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x2A37F621)) ) ), ( - 0.50 + ( 0.10 * I2R(LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x2A37F621)) ) ))
if ( ( UnitHasBuffBJ(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59), 0x42637963) == false ) and ( UnitHasBuffBJ(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59), 0x42637932) == false ) and ( UnitHasBuffBJ(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59), 0x42505345) == false ) and ( UnitHasBuffBJ(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59), 0x42303230) == false ) ) then
else
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x2A37F621, 0)
endif
else
call SaveUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x41F5BFF0, CreateUnitAtLoc(GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59)), 0x65303851, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x61E1A70B), ( GetUnitFacing(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF)) + 0.00 )))
call SetUnitTimeScale(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x41F5BFF0), 5.00)
call UnitApplyTimedLife(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x41F5BFF0), 0x42487765, 0.50)
if ( ( UnitHasBuffBJ(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59), 0x42303232) == false ) and ( UnitHasBuffBJ(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59), 0x42303345) == false ) ) then
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xEE2C4E9D, PolarProjectionBJ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x61E1A70B), 100.00, GetUnitFacing(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF))))
else
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xEE2C4E9D, PolarProjectionBJ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x61E1A70B), 20.00, GetUnitFacing(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF))))
endif
if ( ( IsTerrainPathableBJ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xEE2C4E9D), PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59), GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xEE2C4E9D)))
call SetUnitY(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xEE2C4E9D)))
else
endif
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xEE2C4E9D))
endif
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x61E1A70B))
else
call RemoveUnit(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF))
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
endif
endfunction
function Trig_xingchenzhiren_1Func002T takes nothing returns nothing
local timer ydl_timer
call IssuePointOrderByIdLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59), 851986, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x4D6303C9))
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x61E1A70B, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59)))
call SaveUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF, CreateUnitAtLoc(GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59)), 0x65303852, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x61E1A70B), AngleBetweenPoints(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x61E1A70B), LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x4D6303C9))))
call SetUnitTimeScale(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF), 1.25)
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x61E1A70B))
set ydl_timer=CreateTimer()
call SaveInteger(YDHT, GetHandleId(ydl_timer), 0x2A37F621, 30)
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x60D54C59, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x9CB980BF, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0x61E1A70B, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x61E1A70B))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0xEE2C4E9D, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xEE2C4E9D))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x60D54C59, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x9CB980BF, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x41F5BFF0, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x41F5BFF0))
call TimerStart(ydl_timer, 0.03, true, function Trig_xingchenzhiren_1Func002Func008T)
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
set ydl_timer=null
endfunction
function Trig_xingchenzhiren_1Actions takes nothing returns nothing
local timer ydl_timer
local integer ydl_localvar_step=LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76)
set ydl_localvar_step=ydl_localvar_step + 3
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76, ydl_localvar_step)
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xECE825E7, ydl_localvar_step)
set ydl_timer=CreateTimer()
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x60D54C59, GetTriggerUnit())
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0x4D6303C9, GetSpellTargetLoc())
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0x61E1A70B, LoadLocationHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x61E1A70B))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0xEE2C4E9D, LoadLocationHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xEE2C4E9D))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x9CB980BF, LoadUnitHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x9CB980BF))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x41F5BFF0, LoadUnitHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x41F5BFF0))
call TimerStart(ydl_timer, 0.00, false, function Trig_xingchenzhiren_1Func002T)
call FlushChildHashtable(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step)
set ydl_timer=null
endfunction
function InitTrig_xingchenzhiren_1 takes nothing returns nothing
set gg_trg_xingchenzhiren_1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_xingchenzhiren_1, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_xingchenzhiren_1, Condition(function Trig_xingchenzhiren_1Conditions))
call TriggerAddAction(gg_trg_xingchenzhiren_1, function Trig_xingchenzhiren_1Actions)
endfunction
function Trig_xingchenzhiren_2Conditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41305057 ) )
endfunction
function Trig_xingchenzhiren_2Func001Func008T takes nothing returns nothing
if ( ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x2A37F621) > 0 ) ) then
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x2A37F621, ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x2A37F621) - 1 ))
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x61E1A70B, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59)))
if ( ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x2A37F621) > 5 ) ) then
call SetUnitX(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF), GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x61E1A70B)))
call SetUnitY(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x61E1A70B)))
call SetUnitScale(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF), ( - 0.50 + ( 0.10 * I2R(LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x2A37F621)) ) ), ( - 0.50 + ( 0.10 * I2R(LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x2A37F621)) ) ), ( - 0.50 + ( 0.10 * I2R(LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x2A37F621)) ) ))
if ( ( UnitHasBuffBJ(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59), 0x42637963) == false ) and ( UnitHasBuffBJ(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59), 0x42637932) == false ) and ( UnitHasBuffBJ(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59), 0x42505345) == false ) and ( UnitHasBuffBJ(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59), 0x42303230) == false ) ) then
else
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x2A37F621, 0)
endif
else
call SaveUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x41F5BFF0, CreateUnitAtLoc(GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59)), 0x65303851, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x61E1A70B), ( GetUnitFacing(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF)) + 0.00 )))
call SetUnitTimeScale(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x41F5BFF0), 5.00)
call UnitApplyTimedLife(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x41F5BFF0), 0x42487765, 0.50)
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Orc\\LightningBolt\\LightningBoltMissile.mdl", LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x61E1A70B)))
if ( ( UnitHasBuffBJ(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59), 0x42303232) == false ) and ( UnitHasBuffBJ(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59), 0x42303345) == false ) ) then
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xEE2C4E9D, PolarProjectionBJ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x61E1A70B), 120.00, GetUnitFacing(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF))))
else
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xEE2C4E9D, PolarProjectionBJ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x61E1A70B), 20.00, GetUnitFacing(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF))))
endif
if ( ( IsTerrainPathableBJ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xEE2C4E9D), PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59), GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xEE2C4E9D)))
call SetUnitY(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xEE2C4E9D)))
else
endif
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xEE2C4E9D))
endif
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x61E1A70B))
else
call RemoveUnit(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF))
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
endif
endfunction
function Trig_xingchenzhiren_2Func001T takes nothing returns nothing
local timer ydl_timer
call IssuePointOrderByIdLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59), 851986, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x4D6303C9))
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x61E1A70B, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59)))
call SaveUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF, CreateUnitAtLoc(GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59)), 0x65303852, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x61E1A70B), AngleBetweenPoints(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x61E1A70B), LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x4D6303C9))))
call SetUnitTimeScale(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF), 1.25)
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x61E1A70B))
set ydl_timer=CreateTimer()
call SaveInteger(YDHT, GetHandleId(ydl_timer), 0x2A37F621, 30)
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x60D54C59, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x9CB980BF, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0x61E1A70B, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x61E1A70B))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0xEE2C4E9D, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xEE2C4E9D))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x60D54C59, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60D54C59))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x9CB980BF, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x9CB980BF))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x41F5BFF0, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x41F5BFF0))
call TimerStart(ydl_timer, 0.03, true, function Trig_xingchenzhiren_2Func001Func008T)
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
set ydl_timer=null
endfunction
function Trig_xingchenzhiren_2Actions takes nothing returns nothing
local timer ydl_timer
local integer ydl_localvar_step=LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76)
set ydl_localvar_step=ydl_localvar_step + 3
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76, ydl_localvar_step)
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xECE825E7, ydl_localvar_step)
set ydl_timer=CreateTimer()
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x60D54C59, GetTriggerUnit())
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0x4D6303C9, GetSpellTargetLoc())
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0x61E1A70B, LoadLocationHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x61E1A70B))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0xEE2C4E9D, LoadLocationHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xEE2C4E9D))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x9CB980BF, LoadUnitHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x9CB980BF))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x41F5BFF0, LoadUnitHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x41F5BFF0))
call TimerStart(ydl_timer, 0.00, false, function Trig_xingchenzhiren_2Func001T)
call FlushChildHashtable(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step)
set ydl_timer=null
endfunction
function InitTrig_xingchenzhiren_2 takes nothing returns nothing
set gg_trg_xingchenzhiren_2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_xingchenzhiren_2, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_xingchenzhiren_2, Condition(function Trig_xingchenzhiren_2Conditions))
call TriggerAddAction(gg_trg_xingchenzhiren_2, function Trig_xingchenzhiren_2Actions)
endfunction
function Trig_jixing_1Conditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41303838 ) )
endfunction
function Trig_jixing_1Actions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
call GroupAddUnit(udg_danweizu2[336], udg_danwei2[0])
call UnitRemoveAbility(udg_danwei2[0], 0x4130464D)
set udg_danwei2[0]=null
endfunction
function InitTrig_jixing_1 takes nothing returns nothing
set gg_trg_jixing_1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_jixing_1, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_jixing_1, Condition(function Trig_jixing_1Conditions))
call TriggerAddAction(gg_trg_jixing_1, function Trig_jixing_1Actions)
endfunction
function Trig_jixing_2Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[336]) == false ) )
endfunction
function Trig_jixing_2Func001Func002Func007A takes nothing returns nothing
set udg_danwei2[2]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[2], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[2], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[2], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[2], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[2], GetOwningPlayer(udg_danwei2[0])) == true ) and ( UnitHasBuffBJ(udg_danwei2[2], 0x42303159) == false ) ) then
call s__baka_IssueTargetOrder2(udg_danwei2[1] , "slow" , udg_danwei2[2])
else
endif
set udg_danwei2[2]=null
endfunction
function Trig_jixing_2Func001A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
if ( ( UnitHasBuffBJ(udg_danwei2[0], 0x42303158) == true ) and ( IsUnitType(udg_danwei2[0], UNIT_TYPE_DEAD) == false ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x6530354B, udg_dian2[0], 0)
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_SAPPER) == true ) ) then
call UnitAddAbility(udg_danwei2[1], 0x4167686F)
else
call UnitRemoveAbility(udg_danwei2[1], 0x4167686F)
endif
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 0.25)
call SetUnitTimeScale(udg_danwei2[1], 2.00)
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(225.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_jixing_2Func001Func002Func007A)
call DestroyGroup(udg_xuanqu)
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
else
call GroupRemoveUnit(udg_danweizu2[336], udg_danwei2[0])
endif
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_jixing_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[336], function Trig_jixing_2Func001A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_jixing_2 takes nothing returns nothing
set gg_trg_jixing_2=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_jixing_2, 0.08)
call TriggerAddCondition(gg_trg_jixing_2, Condition(function Trig_jixing_2Conditions))
call TriggerAddAction(gg_trg_jixing_2, function Trig_jixing_2Actions)
endfunction
function Trig_jufengConditions takes nothing returns boolean
return ( ( ( GetSpellAbilityId() == 0x41496379 ) or ( GetSpellAbilityId() == 0x41304A4F ) ) )
endfunction
function Trig_jufengActions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
set udg_danwei2[1]=null
set udg_danwei2[1]=GetSpellTargetUnit()
if ( ( GetSpellAbilityId() == 0x41304A4F ) and ( udg_danwei2[1] == null ) ) then
call IssueImmediateOrderById(udg_danwei2[0], 851972)
call SetUnitManaBJ(udg_danwei2[0], ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) + 100.00 ))
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_5678")
else
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_HERO) == true ) ) then
if ( ( ( GetHeroInt(udg_danwei2[0], true) < GetHeroStr(udg_danwei2[0], true) ) or ( GetHeroInt(udg_danwei2[0], true) < GetHeroAgi(udg_danwei2[0], true) ) ) ) then
call IssueImmediateOrderById(udg_danwei2[0], 851972)
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_8118")
else
if ( ( ( GetUnitTypeId(udg_danwei2[1]) == 0x75303035 ) or ( GetUnitTypeId(udg_danwei2[1]) == 0x48303032 ) ) ) then
call IssueImmediateOrderById(udg_danwei2[0], 851972)
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_738")
else
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_HERO) == true ) and ( GetUnitTypeId(udg_danwei2[1]) != 0x4F303030 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 ) <= 10 ) and ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[1] , 0x49303359)) == true ) ) then
set udg_shishu2ex[( 50 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 ) )]=10.00
call UnitAddAbility(udg_danwei2[1], 0x41304A4D)
else
endif
endif
endif
else
call IssueImmediateOrderById(udg_danwei2[0], 851972)
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_9156")
endif
endif
set udg_danwei2[0]=null
set udg_danwei2[1]=null
endfunction
function InitTrig_jufeng takes nothing returns nothing
set gg_trg_jufeng=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_jufeng, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_jufeng, Condition(function Trig_jufengConditions))
call TriggerAddAction(gg_trg_jufeng, function Trig_jufengActions)
endfunction
function Trig_shenlanemengConditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41303430 ) )
endfunction
function Trig_shenlanemengActions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_HERO) == true ) ) then
set udg_danwei2[1]=GetSpellTargetUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[1])
set udg_danwei2[2]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303231, udg_dian2[0], 0.00)
call PlaySoundOnUnitBJ(gg_snd_CharmTarget1, 100, udg_danwei2[1])
call SetUnitAnimation(udg_danwei2[2], "birth")
call s__baka_IssueTargetOrderById2(udg_danwei2[2] , 852668 , udg_danwei2[1])
call UnitApplyTimedLife(udg_danwei2[2], 0x42487765, 2.00)
call SetUnitManaBJ(udg_danwei2[1], ( GetUnitState(udg_danwei2[1], UNIT_STATE_MANA) - 300.00 ))
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[1], ( ( 100.00 - GetUnitManaPercent(udg_danwei2[1]) ) * 5.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MIND, WEAPON_TYPE_WHOKNOWS)
call CreateTextTagUnitBJ(( "-" + I2S(( ( 100 - R2I(GetUnitManaPercent(udg_danwei2[1])) ) * 5 )) ), udg_danwei2[1], 0, 12.00, 0.00, 100, 100, 0)
call SetTextTagPermanent(GetLastCreatedTextTag(), false)
call SetTextTagLifespan(GetLastCreatedTextTag(), 3.00)
call SetTextTagFadepoint(GetLastCreatedTextTag(), 1.00)
call SetTextTagVelocity(bj_lastCreatedTextTag, 0.00, 0.05)
if ( ( UnitHasBuffBJ(udg_danwei2[1], 0x42303132) == true ) ) then
call UnitRemoveBuffBJ(0x42303132, udg_danwei2[1])
else
endif
set udg_danwei2[1]=null
set udg_danwei2[2]=null
call RemoveLocation(udg_dian2[0])
else
call IssueImmediateOrderById(udg_danwei2[0], 851972)
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_297")
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_shenlanemeng takes nothing returns nothing
set gg_trg_shenlanemeng=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_shenlanemeng, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_shenlanemeng, Condition(function Trig_shenlanemengConditions))
call TriggerAddAction(gg_trg_shenlanemeng, function Trig_shenlanemengActions)
endfunction
function Trig_shanxiConditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41303435 ) )
endfunction
function Trig_shanxiActions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
set udg_danwei2[1]=GetSpellTargetUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[1])
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 50.00, ( GetUnitFacing(udg_danwei2[1]) + 180.00 ))
call PlaySoundOnUnitBJ(gg_snd_TinkerMissileLaunch1, 100, udg_danwei2[1])
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
if ( ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[1], ( 3.00 * I2R(GetHeroAgi(udg_danwei2[0], true)) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_METAL_HEAVY_SLICE)
call s__baka_IssueTargetOrderById2(udg_danwei2[0] , 851983 , udg_danwei2[1])
else
endif
set udg_danwei2[0]=null
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
endfunction
function InitTrig_shanxi takes nothing returns nothing
set gg_trg_shanxi=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_shanxi, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_shanxi, Condition(function Trig_shanxiConditions))
call TriggerAddAction(gg_trg_shanxi, function Trig_shanxiActions)
endfunction
function Trig_xuanyuanjian_20Conditions takes nothing returns boolean
return ( ( GetItemTypeId(GetManipulatedItem()) == 0x74656C73 ) )
endfunction
function Trig_xuanyuanjian_20Actions takes nothing returns nothing
set udg_danwei2[0]=GetManipulatingUnit()
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[29]=1
loop
exitwhen udg_aXUNHUAN[29] > 6
if ( ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[29])) == 0x74656C73 ) ) then
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
else
endif
set udg_aXUNHUAN[29]=udg_aXUNHUAN[29] + 1
endloop
if ( ( udg_zhengshu2[3] <= 1 ) ) then
call UnitRemoveAbility(udg_danwei2[0], 0x41303849)
call UnitRemoveAbility(udg_danwei2[0], 0x4130384B)
call UnitRemoveAbility(udg_danwei2[0], 0x4130384A)
else
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_xuanyuanjian_20 takes nothing returns nothing
set gg_trg_xuanyuanjian_20=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_xuanyuanjian_20, EVENT_PLAYER_UNIT_DROP_ITEM)
call TriggerAddCondition(gg_trg_xuanyuanjian_20, Condition(function Trig_xuanyuanjian_20Conditions))
call TriggerAddAction(gg_trg_xuanyuanjian_20, function Trig_xuanyuanjian_20Actions)
endfunction
function Trig_guangzhang_15Conditions takes nothing returns boolean
return ( ( GetItemTypeId(GetManipulatedItem()) == 0x49303256 ) )
endfunction
function Trig_guangzhang_15Actions takes nothing returns nothing
set udg_danwei2[0]=GetManipulatingUnit()
set udg_zhengshu2[3]=0
set udg_aXUNHUAN[29]=1
loop
exitwhen udg_aXUNHUAN[29] > 6
if ( ( GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[29])) == 0x49303256 ) ) then
set udg_zhengshu2[3]=( udg_zhengshu2[3] + 1 )
else
endif
set udg_aXUNHUAN[29]=udg_aXUNHUAN[29] + 1
endloop
if ( ( udg_zhengshu2[3] <= 1 ) ) then
call UnitRemoveAbility(udg_danwei2[0], 0x41304A59)
call UnitRemoveAbility(udg_danwei2[0], 0x41304A58)
call UnitRemoveAbility(udg_danwei2[0], 0x41304A57)
else
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_guangzhang_15 takes nothing returns nothing
set gg_trg_guangzhang_15=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_guangzhang_15, EVENT_PLAYER_UNIT_DROP_ITEM)
call TriggerAddCondition(gg_trg_guangzhang_15, Condition(function Trig_guangzhang_15Conditions))
call TriggerAddAction(gg_trg_guangzhang_15, function Trig_guangzhang_15Actions)
endfunction
function Trig_jinghuaConditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41496C70 ) )
endfunction
function Trig_jinghuaActions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
set udg_danwei2[1]=GetSpellTargetUnit()
if ( ( ( RectContainsUnit(gg_rct_xuechi_1, udg_danwei2[0]) == true ) or ( RectContainsUnit(gg_rct_xuechi_2, udg_danwei2[0]) == true ) ) ) then
call SetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x72646533), 3)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Purge\\PurgeBuffTarget.mdl", udg_danwei2[0], "origin"))
else
if ( ( GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x72646533)) == 1 ) ) then
set udg_zhengshu2[30]=YDWEGetInventoryIndexOfItemTypeBJNull(udg_danwei2[0] , 0x72646533)
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x72646533))
call UnitAddItemToSlotById(udg_danwei2[0], 0x49303054, ( udg_zhengshu2[30] - 1 ))
else
endif
endif
set udg_danwei2[0]=null
set udg_danwei2[1]=null
endfunction
function InitTrig_jinghua takes nothing returns nothing
set gg_trg_jinghua=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_jinghua, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_jinghua, Condition(function Trig_jinghuaConditions))
call TriggerAddAction(gg_trg_jinghua, function Trig_jinghuaActions)
endfunction
function Trig_jinghua_2Actions takes nothing returns nothing
set udg_danwei2[0]=GetEnteringUnit()
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x72646533)) == true ) and ( GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x72646533)) == 1 ) ) then
call SetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x72646533), 2)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Purge\\PurgeBuffTarget.mdl", udg_danwei2[0], "origin"))
else
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303054)) == true ) ) then
set udg_zhengshu2[30]=YDWEGetInventoryIndexOfItemTypeBJNull(udg_danwei2[0] , 0x49303054)
call RemoveItem(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303054))
call UnitAddItemToSlotById(udg_danwei2[0], 0x72646533, ( udg_zhengshu2[30] - 1 ))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Purge\\PurgeBuffTarget.mdl", udg_danwei2[0], "origin"))
else
endif
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_jinghua_2 takes nothing returns nothing
set gg_trg_jinghua_2=CreateTrigger()
call YDWETriggerRegisterEnterRectSimpleNull(gg_trg_jinghua_2 , gg_rct_xuechi_1)
call YDWETriggerRegisterEnterRectSimpleNull(gg_trg_jinghua_2 , gg_rct_xuechi_2)
call TriggerAddAction(gg_trg_jinghua_2, function Trig_jinghua_2Actions)
endfunction
function Trig_zinengliang_1Conditions takes nothing returns boolean
return ( ( ( GetSpellAbilityId() == 0x41304D5A ) or ( GetSpellAbilityId() == 0x41304E30 ) or ( GetSpellAbilityId() == 0x41304E31 ) ) )
endfunction
function Trig_zinengliang_1Actions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_HERO) == true ) ) then
call SaveReal(YDHT, GetHandleId(udg_danwei2[0]), 0x2A607BA5, TimerGetElapsed(s__sys_timeTimer))
set udg_dian2[0]=GetSpellTargetLoc()
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303251, udg_dian2[0], 0.00)
call PlaySoundOnUnitBJ(gg_snd_BreathOfFrost1, 100, udg_danwei2[1])
if ( ( GetSpellAbilityId() == 0x41304D5A ) ) then
call SetUnitUserData(udg_danwei2[1], 30)
else
if ( ( GetSpellAbilityId() == 0x41304E30 ) ) then
call SetUnitUserData(udg_danwei2[1], 40)
else
call SetUnitUserData(udg_danwei2[1], 50)
endif
endif
call SetUnitVertexColor(udg_danwei2[1], ( 3 * GetUnitUserData(udg_danwei2[1]) ), 0, ( 5 * GetUnitUserData(udg_danwei2[1]) ), 255)
call GroupAddUnit(udg_danweizu2[51], udg_danwei2[1])
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
else
call IssueImmediateOrderById(udg_danwei2[0], 851972)
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_299")
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_zinengliang_1 takes nothing returns nothing
set gg_trg_zinengliang_1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_zinengliang_1, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_zinengliang_1, Condition(function Trig_zinengliang_1Conditions))
call TriggerAddAction(gg_trg_zinengliang_1, function Trig_zinengliang_1Actions)
endfunction
function Trig_zinengliang_2Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[51]) == false ) )
endfunction
function Trig_zinengliang_2Func001Func002Func002Func007A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitAlly(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call SetUnitLifePercentBJ(udg_danwei2[1], ( GetUnitLifePercent(udg_danwei2[1]) + ( ( I2R(GetUnitUserData(udg_danwei2[0])) + 10.00 ) / 7.50 ) ))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\OrbOfDeath\\OrbOfDeathMissile.mdl", udg_danwei2[1], "chest"))
call UnitAddAbility(udg_danwei2[1], 0x41303656)
call GroupAddUnit(udg_Danweizu[145], udg_danwei2[1])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_zinengliang_2Func001A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
if ( ( GetUnitUserData(udg_danwei2[0]) > 0 ) ) then
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
if ( ( I2R(( GetUnitUserData(udg_danwei2[0]) / 10 )) == ( I2R(GetUnitUserData(udg_danwei2[0])) / 10.00 ) ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303043, udg_dian2[0], 0.00)
call SetUnitAnimation(udg_danwei2[1], "death")
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 1.00)
set udg_danwei2[1]=null
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(500.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_zinengliang_2Func001Func002Func002Func007A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[0])
else
endif
call SetUnitVertexColor(udg_danwei2[0], ( 3 * GetUnitUserData(udg_danwei2[0]) ), 0, ( 5 * GetUnitUserData(udg_danwei2[0]) ), 255)
else
call KillUnit(udg_danwei2[0])
call GroupRemoveUnit(udg_danweizu2[51], udg_danwei2[0])
endif
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_zinengliang_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[51], function Trig_zinengliang_2Func001A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_zinengliang_2 takes nothing returns nothing
set gg_trg_zinengliang_2=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_zinengliang_2, 0.10)
call TriggerAddCondition(gg_trg_zinengliang_2, Condition(function Trig_zinengliang_2Conditions))
call TriggerAddAction(gg_trg_zinengliang_2, function Trig_zinengliang_2Actions)
endfunction
function Trig_zinengliang_3Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_Danweizu[145]) == false ) )
endfunction
function Trig_zinengliang_3Func001Func004A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) <= 500.00 ) ) then
set udg_zhengshuex[0]=1
else
endif
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
endfunction
function Trig_zinengliang_3Func001A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[1]=GetEnumUnit()
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
set udg_zhengshuex[0]=0
call ForGroupBJ(udg_danweizu2[51], function Trig_zinengliang_3Func001Func004A)
if ( ( udg_zhengshuex[0] == 1 ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) ) then
else
call UnitRemoveAbility(udg_danwei2[1], 0x41303656)
call UnitRemoveBuffBJ(0x42303336, udg_danwei2[1])
call GroupRemoveUnit(udg_Danweizu[145], udg_danwei2[1])
endif
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[1])
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_zinengliang_3Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_Danweizu[145], function Trig_zinengliang_3Func001A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_zinengliang_3 takes nothing returns nothing
set gg_trg_zinengliang_3=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_zinengliang_3, 0.20)
call TriggerAddCondition(gg_trg_zinengliang_3, Condition(function Trig_zinengliang_3Conditions))
call TriggerAddAction(gg_trg_zinengliang_3, function Trig_zinengliang_3Actions)
endfunction
function Trig_zinengliang_4Conditions takes nothing returns boolean
return ( ( ( GetItemTypeId(GetManipulatedItem()) == 0x49303135 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x49303057 ) or ( GetItemTypeId(GetManipulatedItem()) == 0x49303134 ) ) and ( HaveSavedHandle(YDHT, StringHash("绫叁紫月"), 0xF0CAF2FC) == false ) )
endfunction
function Trig_zinengliang_4Func002T takes nothing returns nothing
local integer ydul_i
call SaveBoolean(YDHT, GetHandleId(GetExpiredTimer()), 0xA3319111, false)
set ydul_i=1
loop
exitwhen ydul_i > 10
if ( ( ( YDWEUnitHasItemOfTypeBJNull(udg_player[ydul_i] , 0x49303135) == true ) or ( YDWEUnitHasItemOfTypeBJNull(udg_player[ydul_i] , 0x49303057) == true ) or ( YDWEUnitHasItemOfTypeBJNull(udg_player[ydul_i] , 0x49303134) == true ) ) ) then
call SaveBoolean(YDHT, GetHandleId(GetExpiredTimer()), 0xA3319111, true)
if ( ( ( TimerGetElapsed(s__sys_timeTimer) - LoadReal(YDHT, GetHandleId(udg_player[ydul_i]), 0x2A607BA5) ) > 60.00 ) and ( IsUnitType(udg_player[ydul_i], UNIT_TYPE_DEAD) == false ) ) then
call UnitAddAbility(udg_player[ydul_i], 0x4130514D)
call SetPlayerAbilityAvailable(s__baka_SPlayer(ydul_i - 1), 0x4130514D, false)
if ( ( YDWEUnitHasItemOfTypeBJNull(udg_player[ydul_i] , 0x49303134) == true ) ) then
call SetUnitAbilityLevel(udg_player[ydul_i], 0x4130514C, 3)
else
if ( ( YDWEUnitHasItemOfTypeBJNull(udg_player[ydul_i] , 0x49303057) == true ) ) then
call SetUnitAbilityLevel(udg_player[ydul_i], 0x4130514C, 2)
else
endif
endif
else
call UnitRemoveAbility(udg_player[ydul_i], 0x4130514D)
endif
else
call UnitRemoveAbility(udg_player[ydul_i], 0x4130514D)
endif
if ( ( UnitHasBuffBJ(udg_player[ydul_i], 0x42303357) == true ) ) then
call UnitAddAbility(udg_player[ydul_i], 0x4130514E)
call SetPlayerAbilityAvailable(s__baka_SPlayer(ydul_i - 1), 0x4130514E, false)
else
call UnitRemoveAbility(udg_player[ydul_i], 0x4130514E)
endif
set ydul_i=ydul_i + 1
endloop
if ( ( LoadBoolean(YDHT, GetHandleId(GetExpiredTimer()), 0xA3319111) == false ) ) then
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
call RemoveSavedHandle(YDHT, StringHash("绫叁紫月"), 0xF0CAF2FC)
else
endif
endfunction
function Trig_zinengliang_4Actions takes nothing returns nothing
local timer ydl_timer
call SaveTimerHandle(YDHT, StringHash("绫叁紫月"), 0xF0CAF2FC, CreateTimer())
set ydl_timer=LoadTimerHandle(YDHT, StringHash("绫叁紫月"), 0xF0CAF2FC)
call SaveBoolean(YDHT, GetHandleId(ydl_timer), 0xA3319111, LoadBoolean(YDHT, GetHandleId(GetTriggeringTrigger()) * LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xECE825E7), 0xA3319111))
call TimerStart(ydl_timer, 0.50, true, function Trig_zinengliang_4Func002T)
set ydl_timer=null
endfunction
function InitTrig_zinengliang_4 takes nothing returns nothing
set gg_trg_zinengliang_4=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_zinengliang_4, EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_zinengliang_4, Condition(function Trig_zinengliang_4Conditions))
call TriggerAddAction(gg_trg_zinengliang_4, function Trig_zinengliang_4Actions)
endfunction
function Trig_xianzuquanzhang_1Conditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41303737 ) )
endfunction
function Trig_xianzuquanzhang_1Actions takes nothing returns nothing
local integer ydl_localvar_step=LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76)
set ydl_localvar_step=ydl_localvar_step + 3
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76, ydl_localvar_step)
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xECE825E7, ydl_localvar_step)
set udg_danwei2[0]=GetTriggerUnit()
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_HERO) == true ) ) then
set udg_danwei2[1]=GetSpellTargetUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[1])
set udg_danwei2[2]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303256, udg_dian2[0], 0.00)
call s__baka_IssueTargetOrderById2(udg_danwei2[2] , 852119 , udg_danwei2[1])
call UnitApplyTimedLife(udg_danwei2[2], 0x42487765, 0.50)
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xD5D95160, GetHeroLevel(udg_danwei2[0]))
if ( ( IsUnitIllusionBJ(udg_danwei2[1]) == false ) ) then
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x247C5123, GetHeroLevel(udg_danwei2[1]))
else
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x247C5123, GetHeroLevel(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 )]))
endif
call SaveReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x9375D887, I2R(( 25 * LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x247C5123) )))
if ( ( LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xD5D95160) > LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x247C5123) ) ) then
call SaveReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x9375D887, ( LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x9375D887) - ( 50.00 * I2R(( LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xD5D95160) - LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x247C5123) )) ) ))
else
call SaveReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x9375D887, ( LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x9375D887) - ( 25.00 * I2R(( LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xD5D95160) - LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x247C5123) )) ) ))
endif
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[1], RMaxBJ(0.00, LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x9375D887)), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_UNIVERSAL, WEAPON_TYPE_WHOKNOWS)
set udg_danwei2[1]=null
set udg_danwei2[2]=null
call RemoveLocation(udg_dian2[0])
else
call IssueImmediateOrderById(udg_danwei2[0], 851972)
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_9074")
endif
set udg_danwei2[0]=null
call FlushChildHashtable(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step)
endfunction
function InitTrig_xianzuquanzhang_1 takes nothing returns nothing
set gg_trg_xianzuquanzhang_1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_xianzuquanzhang_1, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_xianzuquanzhang_1, Condition(function Trig_xianzuquanzhang_1Conditions))
call TriggerAddAction(gg_trg_xianzuquanzhang_1, function Trig_xianzuquanzhang_1Actions)
endfunction
function Trig_xuhuachongjiConditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x4130474C ) )
endfunction
function Trig_xuhuachongjiActions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_HERO) == true ) ) then
set udg_danwei2[1]=GetSpellTargetUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[1])
set udg_zhengshuex[0]=R2I(RMinBJ(RMaxBJ(( I2R(GetHeroInt(udg_danwei2[0], true)) * 1.50 ), 250.00), GetUnitState(udg_danwei2[1], UNIT_STATE_MANA)))
call CreateTextTagLocBJ(( "-" + I2S(udg_zhengshuex[0]) ), udg_dian2[0], 0, 10.00, 32.00, 32.00, 100.00, 0.00)
call SetTextTagVelocity(bj_lastCreatedTextTag, 0.00, 0.04)
call SetTextTagPermanent(bj_lastCreatedTextTag, false)
call SetTextTagFadepoint(bj_lastCreatedTextTag, 2.00)
call SetTextTagLifespan(bj_lastCreatedTextTag, 5.00)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\ManaBurn\\ManaBurnTarget.mdl", udg_danwei2[1], "origin"))
call SetUnitManaBJ(udg_danwei2[1], ( GetUnitState(udg_danwei2[1], UNIT_STATE_MANA) - I2R(udg_zhengshuex[0]) ))
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[1], I2R(udg_zhengshuex[0]), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call PlaySoundOnUnitBJ(gg_snd_ZigguratMissileLaunch3, 100, udg_danwei2[1])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Undead\\Possession\\PossessionMissile.mdl", udg_dian2[0]))
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
else
call IssueImmediateOrderById(udg_danwei2[0], 851972)
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_4814")
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_xuhuachongji takes nothing returns nothing
set gg_trg_xuhuachongji=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_xuhuachongji, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_xuhuachongji, Condition(function Trig_xuhuachongjiConditions))
call TriggerAddAction(gg_trg_xuhuachongji, function Trig_xuhuachongjiActions)
endfunction
function Trig_xuhuachongji_2Conditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41304850 ) )
endfunction
function Trig_xuhuachongji_2Func002Func005Func020A takes nothing returns nothing
set udg_danwei2[2]=GetEnumUnit()
if ( ( udg_danwei2[2] != udg_danwei2[1] ) and ( IsUnitType(udg_danwei2[2], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[2], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[2], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[2], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[2], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBoltImpact.mdl", udg_danwei2[2], "origin"))
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[2], ( I2R(udg_zhengshuex[2]) * 0.60 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei2[2]=null
endfunction
function Trig_xuhuachongji_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetTriggerUnit()
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_HERO) == true ) ) then
set udg_danwei2[1]=GetSpellTargetUnit()
if ( ( udg_danwei2[1] != null ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[1])
set udg_zhengshuex[2]=R2I(( ( 2.00 * ( RMaxBJ(( 1.50 * I2R(GetHeroInt(udg_danwei2[0], true)) ), 250.00) + ( 3.00 * I2R(GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303431))) ) ) ) - RMinBJ(( ( 1.50 * I2R(GetHeroInt(udg_danwei2[0], true)) ) + ( 3.00 * I2R(GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303431))) ) ), GetUnitState(udg_danwei2[1], UNIT_STATE_MANA)) ))
call SetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[0] , 0x49303431), 0)
call CreateTextTagLocBJ(( "-" + I2S(udg_zhengshuex[2]) ), udg_dian2[0], 0, 11.00, 10.00, 60.00, 70.00, 0.00)
call SetTextTagVelocity(bj_lastCreatedTextTag, 0.00, 0.04)
call SetTextTagPermanent(bj_lastCreatedTextTag, false)
call SetTextTagFadepoint(bj_lastCreatedTextTag, 2.00)
call SetTextTagLifespan(bj_lastCreatedTextTag, 5.00)
call SetUnitManaBJ(udg_danwei2[1], ( GetUnitState(udg_danwei2[1], UNIT_STATE_MANA) - I2R(udg_zhengshuex[2]) ))
set udg_danwei2[2]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303647, udg_dian2[0], 270.00)
call UnitApplyTimedLife(udg_danwei2[2], 0x42487765, 1.00)
set udg_danwei2[2]=null
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBoltImpact.mdl", udg_danwei2[1], "origin"))
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[1], I2R(udg_zhengshuex[2]), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(350.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_xuhuachongji_2Func002Func005Func020A)
call DestroyGroup(udg_xuanqu)
call PlaySoundOnUnitBJ(gg_snd_ZigguratMissileLaunch3, 100, udg_danwei2[1])
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
else
call SetUnitManaBJ(udg_danwei2[0], ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) + 800.00 ))
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_4809")
call IssueImmediateOrderById(udg_danwei2[0], 851972)
endif
else
call IssueImmediateOrderById(udg_danwei2[0], 851972)
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_183")
endif
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_xuhuachongji_2 takes nothing returns nothing
set gg_trg_xuhuachongji_2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_xuhuachongji_2, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_xuhuachongji_2, Condition(function Trig_xuhuachongji_2Conditions))
call TriggerAddAction(gg_trg_xuhuachongji_2, function Trig_xuhuachongji_2Actions)
endfunction
function Trig_mofaxishouFunc002Func001Func001Func004A takes nothing returns nothing
set udg_danwei2[2]=GetEnumUnit()
if ( ( IsUnitVisible(udg_danwei2[2], GetOwningPlayer(udg_player[udg_aXUNHUAN[36]])) == true ) and ( IsUnitType(udg_danwei2[2], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[2], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[2], UNIT_TYPE_DEAD) == false ) and ( GetUnitState(udg_danwei2[2], UNIT_STATE_MAX_MANA) > 0.00 ) and ( IsUnitEnemy(udg_danwei2[2], GetOwningPlayer(udg_player[udg_aXUNHUAN[36]])) == true ) ) then
if ( ( IsUnitInGroup(udg_danwei2[2], udg_Danweizu[11]) == false ) ) then
if ( ( GetUnitState(udg_danwei2[2], UNIT_STATE_MANA) >= RMaxBJ(( GetUnitState(udg_danwei2[2], UNIT_STATE_MAX_MANA) * 0.01 ), 20.00) ) ) then
call SetUnitManaBJ(udg_danwei2[2], ( GetUnitState(udg_danwei2[2], UNIT_STATE_MANA) - RMaxBJ(( GetUnitState(udg_danwei2[2], UNIT_STATE_MAX_MANA) * 0.01 ), 15.00) ))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl", udg_danwei2[2], "chest"))
call SetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_player[udg_aXUNHUAN[36]] , 0x49303431), ( IMinBJ(( GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_player[udg_aXUNHUAN[36]] , 0x49303431)) + 1 ), 100) + 0 ))
else
call SetUnitManaBJ(udg_danwei2[2], 0.00)
endif
call GroupAddUnit(udg_Danweizu[11], udg_danwei2[2])
else
if ( ( GetUnitState(udg_danwei2[2], UNIT_STATE_MANA) >= RMaxBJ(( GetUnitState(udg_danwei2[2], UNIT_STATE_MAX_MANA) * 0.01 ), 20.00) ) ) then
call SetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_player[udg_aXUNHUAN[36]] , 0x49303431), ( IMinBJ(( GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_player[udg_aXUNHUAN[36]] , 0x49303431)) + 1 ), 100) + 0 ))
else
endif
endif
else
endif
set udg_danwei2[2]=null
endfunction
function Trig_mofaxishouActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call GroupClear(udg_Danweizu[11])
set udg_aXUNHUAN[36]=1
loop
exitwhen udg_aXUNHUAN[36] > 10
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_player[udg_aXUNHUAN[36]] , 0x49303431)) == true ) and ( IsUnitType(udg_player[udg_aXUNHUAN[36]], UNIT_TYPE_DEAD) == false ) ) then
if ( ( GetItemCharges(YDWEGetItemOfTypeFromUnitBJNull(udg_player[udg_aXUNHUAN[36]] , 0x49303431)) < 100 ) ) then
set udg_dian2[0]=GetUnitLoc(udg_player[udg_aXUNHUAN[36]])
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(1000.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_mofaxishouFunc002Func001Func001Func004A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[0])
else
endif
else
endif
set udg_aXUNHUAN[36]=udg_aXUNHUAN[36] + 1
endloop
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_mofaxishou takes nothing returns nothing
set gg_trg_mofaxishou=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_mofaxishou, 1.00)
call TriggerAddAction(gg_trg_mofaxishou, function Trig_mofaxishouActions)
endfunction
function Trig_aoshujian_1Conditions takes nothing returns boolean
return ( ( ( GetSpellAbilityId() == 0x4130474E ) or ( GetSpellAbilityId() == 0x41304834 ) ) )
endfunction
function Trig_aoshujian_1Actions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
set udg_danwei2[1]=GetSpellTargetUnit()
set udg_danwei2[( 380 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) )]=GetSpellTargetUnit()
if ( ( udg_danwei2[1] != null ) ) then
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_HERO) == true ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[1]=GetUnitLoc(udg_danwei2[( 380 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) )])
set udg_danwei2[2]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303632, udg_dian2[0], AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
call SetUnitUserData(udg_danwei2[2], ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 ))
if ( ( GetSpellAbilityId() == 0x4130474E ) ) then
call SetUnitManaBJ(udg_danwei2[2], 0.00)
call SetUnitLifeBJ(udg_danwei2[2], ( ( 100.00 + ( GetUnitState(udg_danwei2[0], UNIT_STATE_MAX_MANA) * 0.05 ) ) * GetRandomReal(0.80, 1.20) ))
else
if ( ( GetSpellAbilityId() == 0x41304834 ) ) then
call SetUnitManaBJ(udg_danwei2[2], 1.00)
call SetUnitLifeBJ(udg_danwei2[2], ( ( 100.00 + ( GetUnitState(udg_danwei2[0], UNIT_STATE_MAX_MANA) * 0.05 ) ) * GetRandomReal(1.00, 1.20) ))
else
endif
endif
call GroupAddUnit(udg_danweizu2[381], udg_danwei2[2])
set udg_danwei2[2]=null
call StopSoundBJ(gg_snd_OrbOfCorruptionMissile, false)
call PlaySoundOnUnitBJ(gg_snd_OrbOfCorruptionMissile, 100, udg_danwei2[0])
call SetUnitManaBJ(udg_danwei2[0], ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) - ( GetUnitState(udg_danwei2[0], UNIT_STATE_MAX_MANA) * 0.05 ) ))
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
call IssueImmediateOrderById(udg_danwei2[0], 851972)
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_2292")
endif
else
call IssueImmediateOrderById(udg_danwei2[0], 851972)
call SetUnitManaBJ(udg_danwei2[0], ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) + 125.00 ))
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_4813")
endif
set udg_danwei2[1]=null
set udg_danwei2[0]=null
endfunction
function InitTrig_aoshujian_1 takes nothing returns nothing
set gg_trg_aoshujian_1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_aoshujian_1, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_aoshujian_1, Condition(function Trig_aoshujian_1Conditions))
call TriggerAddAction(gg_trg_aoshujian_1, function Trig_aoshujian_1Actions)
endfunction
function Trig_aoshujian_2Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[381]) == false ) )
endfunction
function Trig_aoshujian_2Func001Func005Func002A takes nothing returns nothing
set udg_danwei2[2]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[2], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[2], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[2], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[2], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[2], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[2], ( GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE) * 0.50 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei2[2]=null
endfunction
function Trig_aoshujian_2Func001A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[1]=GetUnitLoc(udg_danwei2[( 380 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) )])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl", udg_dian2[0]))
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) >= 80.00 ) and ( udg_danwei2[( 380 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) )] != null ) ) then
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], 60.00, AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
call SetUnitFacing(udg_danwei2[0], AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[2]))
call RemoveLocation(udg_dian2[2])
else
if ( ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) == 1.00 ) ) then
set udg_aXUNHUAN[30]=1
loop
exitwhen udg_aXUNHUAN[30] > 4
set udg_aXUNHUAN[31]=1
loop
exitwhen udg_aXUNHUAN[31] > 4
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], ( 40.00 * I2R(udg_aXUNHUAN[31]) ), ( ( 90.00 * I2R(udg_aXUNHUAN[30]) ) + GetUnitFacing(udg_danwei2[0]) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\DragonHawkMissile\\DragonHawkMissile.mdl", udg_dian2[2]))
call RemoveLocation(udg_dian2[2])
set udg_aXUNHUAN[31]=udg_aXUNHUAN[31] + 1
endloop
set udg_aXUNHUAN[30]=udg_aXUNHUAN[30] + 1
endloop
set udg_aXUNHUAN[32]=1
loop
exitwhen udg_aXUNHUAN[32] > 24
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], 200.00, ( I2R(udg_aXUNHUAN[32]) * 15.00 ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\DragonHawkMissile\\DragonHawkMissile.mdl", udg_dian2[2]))
call RemoveLocation(udg_dian2[2])
set udg_aXUNHUAN[32]=udg_aXUNHUAN[32] + 1
endloop
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(250.00 , udg_dian2[0])
else
set udg_aXUNHUAN[33]=1
loop
exitwhen udg_aXUNHUAN[33] > 6
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], GetRandomReal(60.00, 70.00), ( ( 60.00 * I2R(udg_aXUNHUAN[33]) ) + GetRandomReal(0, 45.00) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\SpiritOfVengeanceMissile\\SpiritOfVengeanceMissile.mdl", udg_dian2[2]))
call RemoveLocation(udg_dian2[2])
set udg_aXUNHUAN[33]=udg_aXUNHUAN[33] + 1
endloop
set udg_aXUNHUAN[34]=1
loop
exitwhen udg_aXUNHUAN[34] > 9
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], GetRandomReal(110.00, 130.00), ( ( 45.00 * I2R(udg_aXUNHUAN[34]) ) + GetRandomReal(0, 30.00) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\SpiritOfVengeanceMissile\\SpiritOfVengeanceMissile.mdl", udg_dian2[2]))
call RemoveLocation(udg_dian2[2])
set udg_aXUNHUAN[34]=udg_aXUNHUAN[34] + 1
endloop
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(160.00 , udg_dian2[0])
endif
call ForGroupBJ(udg_xuanqu, function Trig_aoshujian_2Func001Func005Func002A)
call DestroyGroup(udg_xuanqu)
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[( 380 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) )], ( GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE) * 0.50 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call StopSoundBJ(gg_snd_WindSerpentMissile, false)
call PlaySoundOnUnitBJ(gg_snd_WindSerpentMissile, 100, udg_danwei2[0])
call GroupRemoveUnit(udg_danweizu2[381], udg_danwei2[0])
call KillUnit(udg_danwei2[0])
endif
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_aoshujian_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[381], function Trig_aoshujian_2Func001A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_aoshujian_2 takes nothing returns nothing
set gg_trg_aoshujian_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_aoshujian_2, udg_Times[4])
call TriggerAddCondition(gg_trg_aoshujian_2, Condition(function Trig_aoshujian_2Conditions))
call TriggerAddAction(gg_trg_aoshujian_2, function Trig_aoshujian_2Actions)
endfunction
function Trig_cangqiong_1Conditions takes nothing returns boolean
return ( ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetTriggerUnit())) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetTriggerUnit())) + 1 ) <= 10 ) )
endfunction
function Trig_cangqiong_1Actions takes nothing returns nothing
if ( ( udg_Shishu[( 20 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetTriggerUnit())) + 1 ) )] == 0.00 ) ) then
set udg_Shishu[( 20 + ( s__baka_SGetPlayerId(GetOwningPlayer(GetTriggerUnit())) + 1 ) )]=GetUnitState(GetTriggerUnit(), UNIT_STATE_MANA)
call StartTimerBJ(udg_Times[25], false, 0.00)
else
endif
endfunction
function InitTrig_cangqiong_1 takes nothing returns nothing
set gg_trg_cangqiong_1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_cangqiong_1, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_cangqiong_1, Condition(function Trig_cangqiong_1Conditions))
call TriggerAddAction(gg_trg_cangqiong_1, function Trig_cangqiong_1Actions)
endfunction
function Trig_cangqiong_2Func001Func001Func003A takes nothing returns nothing
set udg_danwei2[2]=GetEnumUnit()
if ( ( IsUnitVisible(udg_player[udg_Zhengshu[25]], GetOwningPlayer(udg_danwei2[2])) == true ) and ( IsUnitType(udg_danwei2[2], UNIT_TYPE_HERO) == true ) and ( IsUnitType(udg_danwei2[2], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[2], GetOwningPlayer(udg_player[udg_Zhengshu[25]])) == true ) and ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[2] , 0x4930335A)) == true ) ) then
else
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[2])
endif
set udg_danwei2[2]=null
endfunction
function Trig_cangqiong_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_Zhengshu[25]=1
loop
exitwhen udg_Zhengshu[25] > 10
if ( ( ( udg_Shishu[( 20 + udg_Zhengshu[25] )] - GetUnitState(udg_player[udg_Zhengshu[25]], UNIT_STATE_MANA) ) > 0.00 ) ) then
set udg_dian2[0]=GetUnitLoc(udg_player[udg_Zhengshu[25]])
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(1000.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_cangqiong_2Func001Func001Func003A)
if ( ( IsUnitGroupEmptyBJ(udg_xuanqu) == false ) ) then
call SetUnitManaBJ(udg_player[udg_Zhengshu[25]], ( GetUnitState(udg_player[udg_Zhengshu[25]], UNIT_STATE_MANA) - ( 0.20 * ( udg_Shishu[( 20 + udg_Zhengshu[25] )] - GetUnitState(udg_player[udg_Zhengshu[25]], UNIT_STATE_MANA) ) ) ))
set udg_danwei2[1]=GroupPickRandomUnit(udg_xuanqu)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\ManaBurn\\ManaBurnTarget.mdl", udg_player[udg_Zhengshu[25]], "origin"))
call UnitDamageTarget(udg_danwei2[1], udg_player[udg_Zhengshu[25]], ( ( udg_Shishu[( 20 + udg_Zhengshu[25] )] - GetUnitState(udg_player[udg_Zhengshu[25]], UNIT_STATE_MANA) ) * 1.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
set udg_danwei2[1]=null
else
endif
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[0])
else
endif
set udg_Shishu[( 20 + udg_Zhengshu[25] )]=0.00
set udg_Zhengshu[25]=udg_Zhengshu[25] + 1
endloop
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_cangqiong_2 takes nothing returns nothing
set gg_trg_cangqiong_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_cangqiong_2, udg_Times[25])
call TriggerAddAction(gg_trg_cangqiong_2, function Trig_cangqiong_2Actions)
endfunction
function Trig_shengmingzhishiConditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41304D45 ) )
endfunction
function Trig_shengmingzhishiActions takes nothing returns nothing
set udg_danwei[226]=GetTriggerUnit()
set udg_dian[190]=GetUnitLoc(udg_danwei[226])
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\ancientexplode.mdx", udg_dian[190]))
if ( ( GetUnitAbilityLevel(udg_danwei[226], 0x41304D45) == 2 ) ) then
call CreateTextTagUnitBJ(( "+" + I2S(R2I(( ( GetUnitState(udg_danwei[226], UNIT_STATE_MAX_LIFE) - GetUnitState(udg_danwei[226], UNIT_STATE_LIFE) ) * ( 0.30 * 1.20 ) ))) ), udg_danwei[226], 75.00, 10.00, 0.00, 100, 0.00, 0)
call SetUnitLifeBJ(udg_danwei[226], ( GetUnitState(udg_danwei[226], UNIT_STATE_LIFE) + ( ( GetUnitState(udg_danwei[226], UNIT_STATE_MAX_LIFE) - GetUnitState(udg_danwei[226], UNIT_STATE_LIFE) ) * 0.30 ) ))
else
call CreateTextTagUnitBJ(( "+" + I2S(R2I(( ( GetUnitState(udg_danwei[226], UNIT_STATE_MAX_LIFE) - GetUnitState(udg_danwei[226], UNIT_STATE_LIFE) ) * ( 0.25 * 1.10 ) ))) ), udg_danwei[226], 75.00, 10.00, 0.00, 100, 0.00, 0)
call SetUnitLifeBJ(udg_danwei[226], ( GetUnitState(udg_danwei[226], UNIT_STATE_LIFE) + ( ( GetUnitState(udg_danwei[226], UNIT_STATE_MAX_LIFE) - GetUnitState(udg_danwei[226], UNIT_STATE_LIFE) ) * 0.25 ) ))
endif
call SetTextTagPermanent(GetLastCreatedTextTag(), false)
call SetTextTagLifespan(GetLastCreatedTextTag(), 3.00)
call SetTextTagFadepoint(GetLastCreatedTextTag(), 1.00)
call SetTextTagVelocity(bj_lastCreatedTextTag, 0.00, 0.04)
set udg_danwei[226]=null
call RemoveLocation(udg_dian[190])
endfunction
function InitTrig_shengmingzhishi takes nothing returns nothing
set gg_trg_shengmingzhishi=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_shengmingzhishi, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_shengmingzhishi, Condition(function Trig_shengmingzhishiConditions))
call TriggerAddAction(gg_trg_shengmingzhishi, function Trig_shengmingzhishiActions)
endfunction
function Trig_huanxianxuwuConditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41303743 ) )
endfunction
function Trig_huanxianxuwuActions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_HERO) == true ) ) then
set udg_danwei2[1]=GetSpellTargetUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[1])
set udg_danwei2[2]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303258, udg_dian2[0], 0.00)
call s__baka_IssueTargetOrderById2(udg_danwei2[2] , 852119 , udg_danwei2[0])
call UnitApplyTimedLife(udg_danwei2[2], 0x42487765, 3.00)
call SetUnitLifeBJ(udg_danwei2[2], ( ( I2R(( GetHeroAgi(udg_danwei2[0], true) + GetHeroInt(udg_danwei2[0], true) )) * 3.00 ) + ( GetUnitState(udg_danwei2[1], UNIT_STATE_LIFE) * 0.20 ) ))
call SetUnitManaBJ(udg_danwei2[2], ( ( GetUnitState(udg_danwei2[1], UNIT_STATE_MANA) * 0.20 ) + 200.00 ))
if ( ( GetUnitTypeId(udg_danwei2[1]) != 0x75303035 ) and ( GetUnitTypeId(udg_danwei2[1]) != 0x75303039 ) and ( GetUnitTypeId(udg_danwei2[1]) != 0x48303032 ) ) then
call SetUnitLifeBJ(udg_danwei2[1], ( GetUnitState(udg_danwei2[1], UNIT_STATE_LIFE) * 0.80 ))
else
endif
call SetUnitManaBJ(udg_danwei2[1], ( GetUnitState(udg_danwei2[1], UNIT_STATE_MANA) * 0.80 ))
call PlaySoundOnUnitBJ(gg_snd_ZigguratMissileLaunch3, 100, udg_danwei2[1])
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\earthnova.mdx", udg_dian2[0]))
if ( ( UnitHasBuffBJ(udg_danwei2[1], 0x4230304A) == true ) ) then
call UnitRemoveBuffBJ(0x4230304A, udg_danwei2[1])
else
endif
set udg_danwei2[1]=null
set udg_danwei2[2]=null
call RemoveLocation(udg_dian2[0])
else
call IssueImmediateOrderById(udg_danwei2[0], 851972)
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[0]), 0, 0, 10.00, "TRIGSTR_298")
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_huanxianxuwu takes nothing returns nothing
set gg_trg_huanxianxuwu=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_huanxianxuwu, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_huanxianxuwu, Condition(function Trig_huanxianxuwuConditions))
call TriggerAddAction(gg_trg_huanxianxuwu, function Trig_huanxianxuwuActions)
endfunction
function Trig_xuwulinghunConditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41303744 ) )
endfunction
function Trig_xuwulinghunActions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
set udg_danwei2[1]=GetSpellTargetUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[1])
call SetUnitLifeBJ(udg_danwei2[1], ( GetUnitState(udg_danwei2[1], UNIT_STATE_LIFE) + GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE) ))
call SetUnitManaBJ(udg_danwei2[1], ( GetUnitState(udg_danwei2[1], UNIT_STATE_LIFE) + GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) ))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIre\\AIreTarget.mdl", udg_danwei2[1], "origin"))
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\ancientexplode.mdx", udg_dian2[0]))
if ( ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) > 0.00 ) ) then
call CreateTextTagUnitBJ(( "+" + I2S(R2I(GetUnitState(udg_danwei2[0], UNIT_STATE_MANA))) ), udg_danwei2[1], 0.00, 11.00, 0.00, 25.00, 100.00, 0)
call SetTextTagPermanent(GetLastCreatedTextTag(), false)
call SetTextTagLifespan(GetLastCreatedTextTag(), 3.00)
call SetTextTagFadepoint(GetLastCreatedTextTag(), 1.00)
call SetTextTagVelocity(bj_lastCreatedTextTag, 0.00, 0.05)
else
endif
call CreateTextTagUnitBJ(( "+" + I2S(R2I(GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE))) ), udg_danwei2[1], 50.00, 11.00, 0.00, 100, 0.00, 0)
call SetTextTagPermanent(GetLastCreatedTextTag(), false)
call SetTextTagLifespan(GetLastCreatedTextTag(), 3.00)
call SetTextTagFadepoint(GetLastCreatedTextTag(), 1.00)
call SetTextTagVelocity(bj_lastCreatedTextTag, 0.00, 0.05)
call KillUnit(udg_danwei2[0])
set udg_danwei2[0]=null
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
endfunction
function InitTrig_xuwulinghun takes nothing returns nothing
set gg_trg_xuwulinghun=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_xuwulinghun, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_xuwulinghun, Condition(function Trig_xuwulinghunConditions))
call TriggerAddAction(gg_trg_xuwulinghun, function Trig_xuwulinghunActions)
endfunction
function Trig_smr1Actions takes nothing returns nothing
call PlaySoundBJ(gg_snd_Credits)
call UnitRemoveBuffsBJ(bj_REMOVEBUFFS_ALL, udg_bossSMR)
set udg_dian2[0]=GetUnitLoc(udg_bossSMR)
call IssuePointOrderByIdLoc(udg_bossSMR, 851983, udg_dian2[0])
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[41]) >= 1800.00 ) ) then
call SetUnitX(udg_bossSMR, GetLocationX(udg_dian2[41]))
call SetUnitY(udg_bossSMR, GetLocationY(udg_dian2[41]))
else
endif
call RemoveLocation(udg_dian2[0])
endfunction
function InitTrig_smr1 takes nothing returns nothing
set gg_trg_smr1=CreateTrigger()
call DisableTrigger(gg_trg_smr1)
call TriggerRegisterTimerEventPeriodic(gg_trg_smr1, 2.00)
call TriggerAddAction(gg_trg_smr1, function Trig_smr1Actions)
endfunction
function Trig_smr2Actions takes nothing returns nothing
set udg_danwei2[0]=GetAttacker()
set udg_danwei2[1]=GetAttackedUnitBJ()
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x48303032 ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[1])
call IssuePointOrderByIdLoc(udg_bossSMR, 852125, udg_dian2[0])
if ( ( GetRandomInt(1, 5) == 1 ) ) then
call IssueImmediateOrderById(udg_bossSMR, 852526)
else
endif
if ( ( GetRandomInt(1, 8) == 1 ) ) then
call IssueImmediateOrderById(udg_bossSMR, 852096)
else
endif
call RemoveLocation(udg_dian2[0])
else
endif
if ( ( GetUnitTypeId(udg_danwei2[1]) == 0x48303032 ) ) then
call IssueImmediateOrderById(udg_bossSMR, 852097)
else
endif
set udg_danwei2[1]=null
set udg_danwei2[0]=null
endfunction
function InitTrig_smr2 takes nothing returns nothing
set gg_trg_smr2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_smr2, EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddAction(gg_trg_smr2, function Trig_smr2Actions)
endfunction
function Trig_smr3Conditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41303559 ) )
endfunction
function Trig_smr3Actions takes nothing returns nothing
call PlaySoundOnUnitBJ(gg_snd_BloodElfMageYes3, 100, udg_bossSMR)
set udg_zhengshu2[40]=0
call StartTimerBJ(udg_times[40], true, 0.05)
endfunction
function InitTrig_smr3 takes nothing returns nothing
set gg_trg_smr3=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_smr3, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_smr3, Condition(function Trig_smr3Conditions))
call TriggerAddAction(gg_trg_smr3, function Trig_smr3Actions)
endfunction
function Trig_smr4Func004Func013A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_bossSMR)) == true ) ) then
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], 30.00, AngleBetweenPoints(udg_dian2[1], udg_dian2[0]))
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[2]))
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_smr4Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu2[40]=( udg_zhengshu2[40] + 1 )
set udg_dian2[0]=GetUnitLoc(udg_bossSMR)
if ( ( udg_zhengshu2[40] <= 20 ) and ( IsUnitType(udg_bossSMR, UNIT_TYPE_DEAD) == false ) ) then
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(700.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_smr4Func004Func013A)
call DestroyGroup(udg_xuanqu)
else
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=6
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 150.00, ( 60.00 * I2R(bj_forLoopAIndex) ))
call DestroyEffect(AddSpecialEffectLoc("Units\\NightElf\\Wisp\\WispExplode.mdl", udg_dian2[1]))
call RemoveLocation(udg_dian2[1])
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 275.00, ( ( 60.00 * I2R(bj_forLoopAIndex) ) + 30.00 ))
call DestroyEffect(AddSpecialEffectLoc("Units\\NightElf\\Wisp\\WispExplode.mdl", udg_dian2[1]))
call RemoveLocation(udg_dian2[1])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call PlaySoundOnUnitBJ(gg_snd_StasisTotem, 100, udg_bossSMR)
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_bossSMR), 0x6530324D, udg_dian2[0], 0.00)
call UnitApplyTimedLife(udg_danwei2[0], 0x42487765, 0.50)
call IssueImmediateOrderById(udg_danwei2[0], 852127)
call SetUnitAnimation(udg_danwei2[0], "death")
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
call PauseTimer(udg_times[40])
endif
call RemoveLocation(udg_dian2[0])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_smr4 takes nothing returns nothing
set gg_trg_smr4=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_smr4, udg_times[40])
call TriggerAddAction(gg_trg_smr4, function Trig_smr4Actions)
endfunction
function Trig_smr5Actions takes nothing returns nothing
set udg_Danwei[10]=GetDyingUnit()
if ( ( GetUnitTypeId(udg_Danwei[10]) == 0x48303032 ) ) then
set udg_dian2[0]=GetUnitLoc(udg_Danwei[10])
call DisableTrigger(gg_trg_smr1)
call CreateItemLoc(0x49303132, udg_dian2[0])
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=20
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], GetRandomReal(0, 300.00), GetRandomReal(0, 360.00))
call CreateItemLoc(0x49303150, udg_dian2[1])
call RemoveLocation(udg_dian2[1])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call CreateItemLoc(0x49303133, udg_dian2[0])
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=6
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_danwei2[0]=CreateUnitAtLoc(s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE), 0x6E303132, udg_dian2[0], ( 100.00 + ( 10.00 * I2R(bj_forLoopAIndex) ) ))
call UnitApplyTimedLife(udg_danwei2[0], 0x42487765, 90.00)
call GroupAddUnit(udg_sheep, udg_danwei2[0])
set udg_danwei2[0]=null
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call PlaySoundBJ(gg_snd_BloodElfMagePissed6)
call StopSoundBJ(gg_snd_Credits, false)
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[41])
else
endif
set udg_Danwei[10]=null
endfunction
function InitTrig_smr5 takes nothing returns nothing
set gg_trg_smr5=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_smr5, EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(gg_trg_smr5, function Trig_smr5Actions)
endfunction
function Trig_smrII_3Conditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x4130444F ) )
endfunction
function Trig_smrII_3Actions takes nothing returns nothing
set udg_zhengshu2[53]=0
call StartTimerBJ(udg_times[53], true, 0.20)
endfunction
function InitTrig_smrII_3 takes nothing returns nothing
set gg_trg_smrII_3=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_smrII_3, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_smrII_3, Condition(function Trig_smrII_3Conditions))
call TriggerAddAction(gg_trg_smrII_3, function Trig_smrII_3Actions)
endfunction
function Trig_smrII_4Actions takes nothing returns nothing
set udg_zhengshu2[53]=( udg_zhengshu2[53] + 1 )
set udg_dian2[0]=GetUnitLoc(udg_bossSMR)
if ( ( udg_zhengshu2[53] <= 7 ) and ( IsUnitType(udg_bossSMR, UNIT_TYPE_DEAD) == false ) ) then
call StopSoundBJ(gg_snd_Shockwave, false)
call PlaySoundOnUnitBJ(gg_snd_Shockwave, 100, udg_bossSMR)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=2
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_bossSMR), 0x65303257, udg_dian2[0], ( 51.40 * I2R(udg_zhengshu2[53]) ))
call IssueImmediateOrderById(udg_danwei2[0], 852526)
call UnitApplyTimedLife(udg_danwei2[0], 0x42487765, 3.00)
call SetUnitAnimation(udg_danwei2[0], "birth")
call YDWEJumpTimer(udg_danwei2[0] , ( 51.40 * I2R(udg_zhengshu2[53]) ) , 400.00 , 0.50 , 0.04 , 0.00)
if ( ( udg_zhengshu2[53] == 1 ) ) then
call SetUnitVertexColor(udg_danwei2[0], 255, 50, 50, 255)
else
if ( ( udg_zhengshu2[53] == 2 ) ) then
call SetUnitVertexColor(udg_danwei2[0], 255, 100, 0, 255)
else
if ( ( udg_zhengshu2[53] == 3 ) ) then
call SetUnitVertexColor(udg_danwei2[0], 255, 255, 0, 255)
else
if ( ( udg_zhengshu2[53] == 4 ) ) then
call SetUnitVertexColor(udg_danwei2[0], 25, 255, 75, 255)
else
if ( ( udg_zhengshu2[53] == 5 ) ) then
call SetUnitVertexColor(udg_danwei2[0], 0, 255, 255, 255)
else
if ( ( udg_zhengshu2[53] == 6 ) ) then
call SetUnitVertexColor(udg_danwei2[0], 0, 100, 255, 255)
else
if ( ( udg_zhengshu2[53] == 7 ) ) then
call SetUnitVertexColor(udg_danwei2[0], 255, 75, 255, 255)
else
endif
endif
endif
endif
endif
endif
endif
set udg_danwei2[0]=null
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
else
call PauseTimer(udg_times[53])
endif
call RemoveLocation(udg_dian2[0])
endfunction
function InitTrig_smrII_4 takes nothing returns nothing
set gg_trg_smrII_4=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_smrII_4, udg_times[53])
call TriggerAddAction(gg_trg_smrII_4, function Trig_smrII_4Actions)
endfunction
function Trig_smrII_4_5Conditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x4130334B ) )
endfunction
function Trig_smrII_4_5Actions takes nothing returns nothing
set udg_danwei2[0]=GetSpellAbilityUnit()
set udg_dian2[0]=GetUnitLoc(udg_bossSMR)
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 700.00, GetUnitFacing(udg_bossSMR))
call GroupAddUnit(udg_danweizu2[53], udg_danwei2[0])
call IssuePointOrderByIdLoc(udg_danwei2[0], 851983, udg_dian2[1])
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
endfunction
function InitTrig_smrII_4_5 takes nothing returns nothing
set gg_trg_smrII_4_5=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_smrII_4_5, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_smrII_4_5, Condition(function Trig_smrII_4_5Conditions))
call TriggerAddAction(gg_trg_smrII_4_5, function Trig_smrII_4_5Actions)
endfunction
function Trig_smrII_5Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[53]) == false ) )
endfunction
function Trig_smrII_5Func001Func003Func012A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call s__baka_IssueTargetOrderById2(udg_danwei2[0] , 852095 , udg_danwei2[1])
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[2]))
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_smrII_5Func001A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_DEAD) == false ) and ( IsTerrainPathableBJ(udg_dian2[0], PATHING_TYPE_FLYABILITY) == false ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 50.00, GetUnitFacing(udg_danwei2[0]))
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], 80.00, GetUnitFacing(udg_danwei2[0]))
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(300.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_smrII_5Func001Func003Func012A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
else
call StopSoundBJ(gg_snd_FlakCannon, false)
call PlaySoundOnUnitBJ(gg_snd_FlakCannon, 100, udg_bossSMR)
call KillUnit(udg_danwei2[0])
call GroupRemoveUnit(udg_danweizu2[53], udg_danwei2[0])
endif
call RemoveLocation(udg_dian2[0])
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_smrII_5Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[53], function Trig_smrII_5Func001A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_smrII_5 takes nothing returns nothing
set gg_trg_smrII_5=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_smrII_5, udg_Times[4])
call TriggerAddCondition(gg_trg_smrII_5, Condition(function Trig_smrII_5Conditions))
call TriggerAddAction(gg_trg_smrII_5, function Trig_smrII_5Actions)
endfunction
function Trig_CTZYActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
local integer ydl_localvar_step=LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76)
set ydl_localvar_step=ydl_localvar_step + 3
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76, ydl_localvar_step)
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xECE825E7, ydl_localvar_step)
call SaveUnitHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x62DD4FAA, CreateUnit(GetOwningPlayer(GetTriggerUnit()), 0x65303130, 0.00, 0, 0))
call UnitAddAbility(LoadUnitHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x62DD4FAA), 0x4130514B)
set ydl_group=CreateGroup()
call GroupEnumUnitsInRange(ydl_group, GetUnitX(GetTriggerUnit()), GetUnitY(GetTriggerUnit()), 450.00, null)
loop
set ydl_unit=FirstOfGroup(ydl_group)
exitwhen ydl_unit == null
call GroupRemoveUnit(ydl_group, ydl_unit)
if ( ( IsUnitType(ydl_unit, UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(ydl_unit, UNIT_TYPE_DEAD) == false ) and ( IsUnitType(ydl_unit, UNIT_TYPE_ANCIENT) == false ) and ( IsUnitEnemy(ydl_unit, GetOwningPlayer(GetTriggerUnit())) == true ) ) then
call s__baka_IssueTargetOrderById2(LoadUnitHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x62DD4FAA) , 852149 , ydl_unit)
else
endif
endloop
call DestroyGroup(ydl_group)
call KillUnit(LoadUnitHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x62DD4FAA))
call FlushChildHashtable(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_CTZY takes nothing returns nothing
set gg_trg_CTZY=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_CTZY , 3 , 0x41497462)
call TriggerAddAction(gg_trg_CTZY, function Trig_CTZYActions)
endfunction
function Trig_xiaoxinshiConditions takes nothing returns boolean
return ( ( GetItemTypeId(GetSoldItem()) == 0x49303033 ) )
endfunction
function Trig_xiaoxinshiFunc002Func003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( ( GetUnitTypeId(udg_danwei2[1]) == 0x6E303038 ) or ( GetUnitTypeId(udg_danwei2[1]) == 0x6E303039 ) ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( GetUnitUserData(udg_danwei2[1]) == ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei[185])) + 1 ) ) ) then
set udg_zhengshuex[0]=1
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_xiaoxinshiActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei[185]=GetBuyingUnit()
if ( ( udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(GetBuyingUnit())) + 1 )] != null ) ) then
set udg_zhengshuex[0]=0
set udg_xuanqu=YDWEGetUnitsInRectAllNull(GetPlayableMapRect())
call ForGroupBJ(udg_xuanqu, function Trig_xiaoxinshiFunc002Func003A)
call DestroyGroup(udg_xuanqu)
if ( ( udg_zhengshuex[0] == 0 ) ) then
set udg_dian[242]=GetUnitLoc(udg_danwei[185])
set udg_dian[243]=PolarProjectionBJ(udg_dian[242], 75.00, GetUnitFacing(udg_danwei[185]))
set udg_danwei[328]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[185]), 0x6E303038, udg_dian[243], 0)
call PlaySoundOnUnitBJ(gg_snd_GoblinSapperReady1, 100, udg_danwei[328])
call SetUnitUserData(udg_danwei[328], ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei[185])) + 1 ))
call GroupAddUnit(udg_danweizu2[293], udg_danwei[328])
call SetUnitAnimation(udg_danwei[328], "birth")
call AddUnitAnimationProperties(udg_danwei[328], "work", true)
call DisplayTimedTextToForce(YDWEGetPlayersAlliesNull(GetOwningPlayer(udg_danwei[185])), 10.00, ( GetPlayerName(GetOwningPlayer(GetBuyingUnit())) + " 购买了一只可爱又实用的小信使~" ))
call RemoveLocation(udg_dian[242])
call RemoveLocation(udg_dian[243])
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_3619")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 300 ))
endif
else
call DisplayTimedTextToPlayer(GetOwningPlayer(GetBuyingUnit()), 0, 0, 10.00, "TRIGSTR_8659")
call SetPlayerStateBJ(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD, ( GetPlayerState(GetOwningPlayer(GetBuyingUnit()), PLAYER_STATE_RESOURCE_GOLD) + 300 ))
endif
set udg_danwei[185]=null
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_xiaoxinshi takes nothing returns nothing
set gg_trg_xiaoxinshi=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_xiaoxinshi, EVENT_PLAYER_UNIT_SELL_ITEM)
call TriggerAddCondition(gg_trg_xiaoxinshi, Condition(function Trig_xiaoxinshiConditions))
call TriggerAddAction(gg_trg_xiaoxinshi, function Trig_xiaoxinshiActions)
endfunction
function Trig_gongxiang_1Conditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41303341 ) )
endfunction
function Trig_gongxiang_1Actions takes nothing returns nothing
set udg_danwei[185]=GetTriggerUnit()
if ( ( GetOwningPlayer(udg_danwei[185]) == s__baka_SPlayer(GetUnitUserData(udg_danwei[185]) - 1) ) ) then
call UnitRemoveAbility(udg_danwei[185], 0x41303341)
call UnitAddAbility(udg_danwei[185], 0x41303342)
call AddUnitAnimationProperties(udg_danwei[185], "work", true)
else
endif
set udg_danwei[185]=null
endfunction
function InitTrig_gongxiang_1 takes nothing returns nothing
set gg_trg_gongxiang_1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_gongxiang_1, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_gongxiang_1, Condition(function Trig_gongxiang_1Conditions))
call TriggerAddAction(gg_trg_gongxiang_1, function Trig_gongxiang_1Actions)
endfunction
function Trig_gongxiang_2Conditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41303342 ) )
endfunction
function Trig_gongxiang_2Actions takes nothing returns nothing
set udg_danwei[185]=GetTriggerUnit()
if ( ( GetOwningPlayer(udg_danwei[185]) == s__baka_SPlayer(GetUnitUserData(udg_danwei[185]) - 1) ) ) then
call UnitAddAbility(udg_danwei[185], 0x41303341)
call UnitRemoveAbility(udg_danwei[185], 0x41303342)
call AddUnitAnimationProperties(udg_danwei[185], "work", false)
else
endif
set udg_danwei[185]=null
endfunction
function InitTrig_gongxiang_2 takes nothing returns nothing
set gg_trg_gongxiang_2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_gongxiang_2, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_gongxiang_2, Condition(function Trig_gongxiang_2Conditions))
call TriggerAddAction(gg_trg_gongxiang_2, function Trig_gongxiang_2Actions)
endfunction
function Trig_gongxiang_3Func003Func001A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
if ( ( GetOwningPlayer(udg_danwei2[0]) == GetTriggerPlayer() ) and ( ( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 ) != GetUnitUserData(udg_danwei2[0]) ) ) then
call SetUnitOwner(udg_danwei2[0], s__baka_SPlayer(GetUnitUserData(udg_danwei2[0]) - 1), false)
else
endif
set udg_danwei2[0]=null
endfunction
function Trig_gongxiang_3Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei[185]=GetTriggerUnit()
if ( ( ( GetUnitTypeId(GetTriggerUnit()) == 0x6E303038 ) or ( GetUnitTypeId(GetTriggerUnit()) == 0x6E303039 ) ) and ( GetUnitAbilityLevel(udg_danwei[185], 0x41303342) == 1 ) and ( IsUnitAlly(udg_danwei[185], GetTriggerPlayer()) == true ) and ( udg_player[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )] != null ) ) then
call SetUnitOwner(udg_danwei[185], GetTriggerPlayer(), false)
else
endif
if ( ( GetOwningPlayer(GetTriggerUnit()) != s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE) ) and ( GetUnitTypeId(GetTriggerUnit()) != 0x6E303038 ) and ( GetUnitTypeId(GetTriggerUnit()) != 0x6E303039 ) ) then
call ForGroupBJ(udg_danweizu2[293], function Trig_gongxiang_3Func003Func001A)
else
endif
set udg_danwei[185]=null
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_gongxiang_3 takes nothing returns nothing
set gg_trg_gongxiang_3=CreateTrigger()
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_gongxiang_3, s__baka_SPlayer(0), true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_gongxiang_3, s__baka_SPlayer(1), true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_gongxiang_3, s__baka_SPlayer(2), true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_gongxiang_3, s__baka_SPlayer(3), true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_gongxiang_3, s__baka_SPlayer(4), true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_gongxiang_3, s__baka_SPlayer(5), true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_gongxiang_3, s__baka_SPlayer(6), true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_gongxiang_3, s__baka_SPlayer(7), true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_gongxiang_3, s__baka_SPlayer(8), true)
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_gongxiang_3, s__baka_SPlayer(9), true)
call TriggerAddAction(gg_trg_gongxiang_3, function Trig_gongxiang_3Actions)
endfunction
function Trig_diuqi_allConditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41304542 ) )
endfunction
function Trig_diuqi_allActions takes nothing returns nothing
set udg_danwei[185]=GetTriggerUnit()
set udg_aXUNHUAN[39]=1
loop
exitwhen udg_aXUNHUAN[39] > 6
call UnitRemoveItemFromSlotSwapped(udg_aXUNHUAN[39], udg_danwei[185])
set udg_aXUNHUAN[39]=udg_aXUNHUAN[39] + 1
endloop
set udg_danwei[185]=null
endfunction
function InitTrig_diuqi_all takes nothing returns nothing
set gg_trg_diuqi_all=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_diuqi_all, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_diuqi_all, Condition(function Trig_diuqi_allConditions))
call TriggerAddAction(gg_trg_diuqi_all, function Trig_diuqi_allActions)
endfunction
function Trig_jiyuConditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41303931 ) )
endfunction
function Trig_jiyuActions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
set udg_danwei2[1]=GetSpellTargetUnit()
set udg_aXUNHUAN[37]=1
loop
exitwhen udg_aXUNHUAN[37] > 6
call UnitAddItem(udg_danwei2[1], UnitItemInSlotBJ(udg_danwei2[0], udg_aXUNHUAN[37]))
set udg_aXUNHUAN[37]=udg_aXUNHUAN[37] + 1
endloop
set udg_danwei2[0]=null
set udg_danwei2[1]=null
endfunction
function InitTrig_jiyu takes nothing returns nothing
set gg_trg_jiyu=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_jiyu, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_jiyu, Condition(function Trig_jiyuConditions))
call TriggerAddAction(gg_trg_jiyu, function Trig_jiyuActions)
endfunction
function Trig_huijiaConditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41304838 ) )
endfunction
function Trig_huijiaActions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) <= 5 ) ) then
call IssuePointOrderById(udg_danwei2[0], 851986, - 6490.00, - 6740.00)
else
endif
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) >= 6 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) <= 10 ) ) then
call IssuePointOrderById(udg_danwei2[0], 851986, 6211.00, 6220.00)
else
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_huijia takes nothing returns nothing
set gg_trg_huijia=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_huijia, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_huijia, Condition(function Trig_huijiaConditions))
call TriggerAddAction(gg_trg_huijia, function Trig_huijiaActions)
endfunction
function Trig_xuanqu_xinshiConditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41303930 ) )
endfunction
function Trig_xuanqu_xinshiFunc007A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == true ) and ( GetOwningPlayer(udg_danwei2[1]) == s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE) ) ) then
call IssueNeutralTargetOrderById(GetOwningPlayer(udg_danwei2[0]), udg_danwei2[1], 852566, udg_danwei2[0])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_xuanqu_xinshiActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetTriggerUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\Silence\\SilenceAreaBirth.mdl", udg_dian2[0]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\DispelMagic\\DispelMagicTarget.mdl", udg_dian2[0]))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Aneu\\AneuTarget.mdl", udg_danwei2[0], "overhead"))
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(1200.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_xuanqu_xinshiFunc007A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[0])
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_xuanqu_xinshi takes nothing returns nothing
set gg_trg_xuanqu_xinshi=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_xuanqu_xinshi, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_xuanqu_xinshi, Condition(function Trig_xuanqu_xinshiConditions))
call TriggerAddAction(gg_trg_xuanqu_xinshi, function Trig_xuanqu_xinshiActions)
endfunction
function Trig_xuanqu_heroConditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41303343 ) )
endfunction
function Trig_xuanqu_heroFunc009A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == true ) and ( GetOwningPlayer(udg_danwei2[1]) == s__baka_SPlayer(PLAYER_NEUTRAL_PASSIVE) ) ) then
call IssueNeutralTargetOrderById(GetOwningPlayer(udg_danwei2[0]), udg_danwei2[1], 852566, udg_danwei2[0])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_xuanqu_heroActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[1]=GetTriggerUnit()
set udg_danwei2[0]=udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 )]
set udg_danwei2[1]=null
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\Silence\\SilenceAreaBirth.mdl", udg_dian2[0]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\DispelMagic\\DispelMagicTarget.mdl", udg_dian2[0]))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Aneu\\AneuTarget.mdl", udg_danwei2[0], "overhead"))
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(1200.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_xuanqu_heroFunc009A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[0])
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_xuanqu_hero takes nothing returns nothing
set gg_trg_xuanqu_hero=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_xuanqu_hero, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_xuanqu_hero, Condition(function Trig_xuanqu_heroConditions))
call TriggerAddAction(gg_trg_xuanqu_hero, function Trig_xuanqu_heroActions)
endfunction
function Trig_PK_start_0Conditions takes nothing returns boolean
return ( ( ( SubStringBJ(GetEventPlayerChatString(), 4, 4) == "1" ) or ( SubStringBJ(GetEventPlayerChatString(), 4, 4) == "2" ) or ( SubStringBJ(GetEventPlayerChatString(), 4, 4) == "3" ) or ( SubStringBJ(GetEventPlayerChatString(), 4, 4) == "4" ) or ( SubStringBJ(GetEventPlayerChatString(), 4, 4) == "5" ) or ( SubStringBJ(GetEventPlayerChatString(), 4, 4) == "6" ) or ( SubStringBJ(GetEventPlayerChatString(), 4, 4) == "7" ) or ( SubStringBJ(GetEventPlayerChatString(), 4, 4) == "8" ) or ( SubStringBJ(GetEventPlayerChatString(), 4, 4) == "9" ) or ( ( SubStringBJ(GetEventPlayerChatString(), 4, 4) == "1" ) and ( SubStringBJ(GetEventPlayerChatString(), 5, 5) == "0" ) ) ) )
endfunction
function Trig_PK_start_0Actions takes nothing returns nothing
set udg_zhengshuex[0]=S2I(SubStringBJ(GetEventPlayerChatString(), 4, 5))
set udg_PK[1]=udg_player[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )]
if ( ( udg_zhengshuex[0] >= 1 ) and ( udg_zhengshuex[0] <= 10 ) and ( udg_PK[1] != udg_player[udg_zhengshuex[0]] ) and ( IsUnitEnemy(udg_PK[1], GetOwningPlayer(udg_player[udg_zhengshuex[0]])) == true ) and ( GetPlayerSlotState(GetOwningPlayer(udg_player[udg_zhengshuex[0]])) != PLAYER_SLOT_STATE_LEFT ) and ( GetPlayerController(GetOwningPlayer(udg_player[udg_zhengshuex[0]])) == MAP_CONTROL_USER ) and ( udg_PK[1] != null ) and ( udg_player[udg_zhengshuex[0]] != null ) and ( IsUnitType(udg_PK[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitType(udg_player[udg_zhengshuex[0]], UNIT_TYPE_DEAD) == false ) ) then
set udg_PK[2]=udg_player[udg_zhengshuex[0]]
if ( ( ( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 ) <= 5 ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 20.00, ( ( ( "|cFF009900" + GetHeroProperName(udg_PK[1]) ) + "|r对|cff0075ff" ) + ( GetHeroProperName(udg_PK[2]) + "|r发起了|cffffff00单挑！|r接受请输入 |cffffff00-J|r ！20秒内不输入则放弃单挑！|r" ) ))
else
call DisplayTimedTextToForce(GetPlayersAll(), 20.00, ( ( ( "|cFF0075ff" + GetHeroProperName(udg_PK[1]) ) + "|r对|cff009900" ) + ( GetHeroProperName(udg_PK[2]) + "|r发起了|cffffff00单挑！|r接受请输入 |cffffff00-J|r ！20秒内不输入则放弃单挑！|r" ) ))
endif
call StartTimerBJ(udg_jishiqi[69], false, 20.00)
call CreateTimerDialogBJ(GetLastCreatedTimerBJ(), "TRIGSTR_074")
set udg_PKchuangkou[1]=GetLastCreatedTimerDialogBJ()
call EnableTrigger(gg_trg_PK_start_1)
call DisableTrigger(gg_trg_PK_start_0)
set udg_Zhengshu[44]=0
else
endif
endfunction
function InitTrig_PK_start_0 takes nothing returns nothing
set gg_trg_PK_start_0=CreateTrigger()
call TriggerAddCondition(gg_trg_PK_start_0, Condition(function Trig_PK_start_0Conditions))
call TriggerAddAction(gg_trg_PK_start_0, function Trig_PK_start_0Actions)
endfunction
function Trig_PK_start_1Actions takes nothing returns nothing
if ( ( udg_player[( s__baka_SGetPlayerId(GetTriggerPlayer()) + 1 )] == udg_PK[2] ) and ( IsUnitType(udg_PK[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitType(udg_PK[2], UNIT_TYPE_DEAD) == false ) ) then
call DestroyTimerDialog(udg_PKchuangkou[1])
call PauseTimer(udg_jishiqi[69])
call CreateFogModifierRectBJ(true, GetOwningPlayer(udg_PK[1]), FOG_OF_WAR_VISIBLE, gg_rct_yaoqingjuedou)
set udg_kejiandu[2]=GetLastCreatedFogModifier()
call CreateFogModifierRectBJ(true, GetOwningPlayer(udg_PK[2]), FOG_OF_WAR_VISIBLE, gg_rct_yaoqingjuedou)
set udg_kejiandu[3]=GetLastCreatedFogModifier()
set udg_dian[191]=GetRectCenter(gg_rct_PK1)
set udg_dian[192]=GetRectCenter(gg_rct_PK2)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(udg_PK[1]), udg_dian[191], 0)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(udg_PK[2]), udg_dian[192], 0)
call SetUnitPositionLoc(udg_PK[1], udg_dian[191])
call SetUnitPositionLoc(udg_PK[2], udg_dian[192])
call SetUnitLifePercentBJ(udg_PK[1], 100)
call SetUnitLifePercentBJ(udg_PK[2], 100)
call SetUnitManaPercentBJ(udg_PK[1], 100)
call SetUnitManaPercentBJ(udg_PK[2], 100)
call UnitRemoveBuffsBJ(bj_REMOVEBUFFS_ALL, udg_PK[1])
call UnitRemoveBuffsBJ(bj_REMOVEBUFFS_ALL, udg_PK[2])
call StartTimerBJ(udg_jishiqi[137], false, 120.00)
call CreateTimerDialogBJ(GetLastCreatedTimerBJ(), "TRIGSTR_922")
call StartTimerBJ(udg_Times[44], true, 0.10)
set udg_PKchuangkou[0]=GetLastCreatedTimerDialogBJ()
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( GetHeroProperName(udg_PK[2]) + "|cFFFF0000接受了单挑！|r" ))
call EnableTrigger(gg_trg_PK_time_3)
set udg_PK[3]=udg_PK[1]
set udg_PK[4]=udg_PK[2]
set udg_Shishu[68]=0.00
set udg_Shishu[69]=0.00
else
endif
endfunction
function InitTrig_PK_start_1 takes nothing returns nothing
set gg_trg_PK_start_1=CreateTrigger()
call TriggerRegisterPlayerChatEvent(gg_trg_PK_start_1, s__baka_SPlayer(0), "-J", true)
call TriggerRegisterPlayerChatEvent(gg_trg_PK_start_1, s__baka_SPlayer(1), "-J", true)
call TriggerRegisterPlayerChatEvent(gg_trg_PK_start_1, s__baka_SPlayer(2), "-J", true)
call TriggerRegisterPlayerChatEvent(gg_trg_PK_start_1, s__baka_SPlayer(3), "-J", true)
call TriggerRegisterPlayerChatEvent(gg_trg_PK_start_1, s__baka_SPlayer(4), "-J", true)
call TriggerRegisterPlayerChatEvent(gg_trg_PK_start_1, s__baka_SPlayer(5), "-J", true)
call TriggerRegisterPlayerChatEvent(gg_trg_PK_start_1, s__baka_SPlayer(6), "-J", true)
call TriggerRegisterPlayerChatEvent(gg_trg_PK_start_1, s__baka_SPlayer(7), "-J", true)
call TriggerRegisterPlayerChatEvent(gg_trg_PK_start_1, s__baka_SPlayer(8), "-J", true)
call TriggerRegisterPlayerChatEvent(gg_trg_PK_start_1, s__baka_SPlayer(9), "-J", true)
call TriggerAddAction(gg_trg_PK_start_1, function Trig_PK_start_1Actions)
endfunction
function Trig_PK_start_2Actions takes nothing returns nothing
call EnableTrigger(gg_trg_PK_start_0)
call DisableTrigger(gg_trg_PK_start_1)
call DestroyTimerDialog(udg_PKchuangkou[1])
endfunction
function InitTrig_PK_start_2 takes nothing returns nothing
set gg_trg_PK_start_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_PK_start_2, udg_jishiqi[69])
call TriggerAddAction(gg_trg_PK_start_2, function Trig_PK_start_2Actions)
endfunction
function Trig_PK_timeActions takes nothing returns nothing
call EnableTrigger(gg_trg_PK_start_0)
call DestroyTimerDialog(udg_PKchuangkou[0])
call PauseTimer(udg_Times[44])
call UnitRemoveBuffsBJ(bj_REMOVEBUFFS_ALL, udg_PK[1])
call UnitRemoveBuffsBJ(bj_REMOVEBUFFS_ALL, udg_PK[2])
call SetUnitPositionLoc(udg_PK[1], GetPlayerStartLocationLoc(GetOwningPlayer(udg_PK[1])))
call SetUnitPositionLoc(udg_PK[2], GetPlayerStartLocationLoc(GetOwningPlayer(udg_PK[2])))
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( " |cFF3366FF平局！|r" ))
call FogModifierStop(udg_kejiandu[2])
call FogModifierStop(udg_kejiandu[3])
call DestroyFogModifier(udg_kejiandu[2])
call DestroyFogModifier(udg_kejiandu[3])
set udg_PK[1]=null
set udg_PK[2]=null
set udg_PK[3]=null
set udg_PK[4]=null
call RemoveLocation(udg_dian[191])
call RemoveLocation(udg_dian[192])
endfunction
function InitTrig_PK_time takes nothing returns nothing
set gg_trg_PK_time=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_PK_time, udg_jishiqi[137])
call TriggerAddAction(gg_trg_PK_time, function Trig_PK_timeActions)
endfunction
function Trig_PK_time_2Actions takes nothing returns nothing
set udg_Dian[44]=GetUnitLoc(udg_PK[1])
call SetUnitX(udg_PK[1], RMinBJ(GetLocationX(udg_Dian[44]), - 4250.00))
call SetUnitY(udg_PK[1], RMaxBJ(GetLocationY(udg_Dian[44]), 5250.00))
call RemoveLocation(udg_Dian[44])
set udg_Dian[44]=GetUnitLoc(udg_PK[2])
call SetUnitX(udg_PK[2], RMinBJ(GetLocationX(udg_Dian[44]), - 4250.00))
call SetUnitY(udg_PK[2], RMaxBJ(GetLocationY(udg_Dian[44]), 5250.00))
call RemoveLocation(udg_Dian[44])
endfunction
function InitTrig_PK_time_2 takes nothing returns nothing
set gg_trg_PK_time_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_PK_time_2, udg_Times[44])
call TriggerAddAction(gg_trg_PK_time_2, function Trig_PK_time_2Actions)
endfunction
function Trig_PK_time_3Actions takes nothing returns nothing
if ( ( IsUnitDeadBJ(udg_PK[1]) == true ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( GetHeroProperName(udg_PK[2]) + "|cFFFF0000获胜！5秒后退出单挑场|r" ))
call PauseTimer(udg_jishiqi[137])
call DestroyTimerDialog(udg_PKchuangkou[0])
call StartTimerBJ(udg_jishiqi[105], false, 5.00)
call PauseTimer(udg_Times[44])
call DisableTrigger(GetTriggeringTrigger())
else
if ( ( IsUnitDeadBJ(udg_PK[2]) == true ) ) then
call DisplayTimedTextToForce(GetPlayersAll(), 10.00, ( GetHeroProperName(udg_PK[1]) + "|cFFFF0000获胜！5秒后退出单挑场|r" ))
call PauseTimer(udg_jishiqi[137])
call DestroyTimerDialog(udg_PKchuangkou[0])
call StartTimerBJ(udg_jishiqi[105], false, 5.00)
call PauseTimer(udg_Times[44])
call DisableTrigger(GetTriggeringTrigger())
else
endif
endif
endfunction
function InitTrig_PK_time_3 takes nothing returns nothing
set gg_trg_PK_time_3=CreateTrigger()
call DisableTrigger(gg_trg_PK_time_3)
call TriggerRegisterAnyUnitEventBJ(gg_trg_PK_time_3, EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(gg_trg_PK_time_3, function Trig_PK_time_3Actions)
endfunction
function Trig_PK_leaveFunc001Func001Func001Func005T takes nothing returns nothing
if ( ( RectContainsUnit(gg_rct_yaoqingjuedou, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x458B7DE9)) == true ) ) then
call UnitDamageTarget(gg_unit_n00Y_0109, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x458B7DE9), 100000.00, true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call UnitDamageTarget(gg_unit_n00Y_0109, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x458B7DE9), 100000.00, true, false, ATTACK_TYPE_MELEE, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)
call KillUnit(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x458B7DE9))
else
endif
endfunction
function Trig_PK_leaveActions takes nothing returns nothing
local timer ydl_timer
if ( ( ( GetUnitTypeId(GetTriggerUnit()) == 0x4830304D ) or ( GetUnitTypeId(GetTriggerUnit()) == 0x48303044 ) or ( GetUnitTypeId(GetTriggerUnit()) == 0x4F303030 ) or ( GetUnitTypeId(GetTriggerUnit()) == 0x48303042 ) or ( GetUnitTypeId(GetTriggerUnit()) == 0x4E303139 ) or ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == false ) or ( GetTriggerUnit() == udg_PK[3] ) or ( GetTriggerUnit() == udg_PK[4] ) or ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetTriggerUnit())) + 1 ) > 10 ) ) ) then
else
if ( ( udg_Zhengshu[68] != 1 ) ) then
if ( ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true ) ) then
if ( ( HaveSavedHandle(YDHT, GetHandleId(GetTriggerUnit()), 0xDFB79FC3) == false ) ) then
call SaveTimerHandle(YDHT, GetHandleId(GetTriggerUnit()), 0xDFB79FC3, CreateTimer())
else
endif
set ydl_timer=LoadTimerHandle(YDHT, GetHandleId(GetTriggerUnit()), 0xDFB79FC3)
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x458B7DE9, GetTriggerUnit())
call TimerStart(ydl_timer, 1.00, false, function Trig_PK_leaveFunc001Func001Func001Func005T)
else
call UnitDamageTarget(gg_unit_n00Y_0109, GetTriggerUnit(), 100000.00, true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call UnitDamageTarget(gg_unit_n00Y_0109, GetTriggerUnit(), 100000.00, true, false, ATTACK_TYPE_MELEE, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)
call KillUnit(GetTriggerUnit())
endif
else
endif
endif
set ydl_timer=null
endfunction
function InitTrig_PK_leave takes nothing returns nothing
set gg_trg_PK_leave=CreateTrigger()
call YDWETriggerRegisterEnterRectSimpleNull(gg_trg_PK_leave , gg_rct_yaoqingjuedou)
call TriggerAddAction(gg_trg_PK_leave, function Trig_PK_leaveActions)
endfunction
function Trig_PK_be_homeActions takes nothing returns nothing
call EnableTrigger(gg_trg_PK_start_0)
call SetUnitPositionLoc(udg_PK[2], GetPlayerStartLocationLoc(GetOwningPlayer(udg_PK[2])))
call SetUnitPositionLoc(udg_PK[1], GetPlayerStartLocationLoc(GetOwningPlayer(udg_PK[1])))
call PanCameraToTimedLocForPlayer(GetOwningPlayer(udg_PK[1]), GetPlayerStartLocationLoc(GetOwningPlayer(udg_PK[1])), 0)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(udg_PK[2]), GetPlayerStartLocationLoc(GetOwningPlayer(udg_PK[2])), 0)
call FogModifierStop(udg_kejiandu[2])
call FogModifierStop(udg_kejiandu[3])
call DestroyFogModifier(udg_kejiandu[2])
call DestroyFogModifier(udg_kejiandu[3])
set udg_PK[1]=null
set udg_PK[2]=null
set udg_PK[3]=null
set udg_PK[4]=null
call RemoveLocation(udg_dian[191])
call RemoveLocation(udg_dian[192])
endfunction
function InitTrig_PK_be_home takes nothing returns nothing
set gg_trg_PK_be_home=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_PK_be_home, udg_jishiqi[105])
call TriggerAddAction(gg_trg_PK_be_home, function Trig_PK_be_homeActions)
endfunction
function Trig_pk_shanghai_1Actions takes nothing returns nothing
call SetUnitLifeBJ(udg_PK[3], udg_Shishu[68])
set udg_Shishu[68]=0.00
endfunction
function InitTrig_pk_shanghai_1 takes nothing returns nothing
set gg_trg_pk_shanghai_1=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_pk_shanghai_1, udg_Times[68])
call TriggerAddAction(gg_trg_pk_shanghai_1, function Trig_pk_shanghai_1Actions)
endfunction
function Trig_pk_shanghai_2Actions takes nothing returns nothing
call SetUnitLifeBJ(udg_PK[4], udg_Shishu[69])
set udg_Shishu[69]=0.00
endfunction
function InitTrig_pk_shanghai_2 takes nothing returns nothing
set gg_trg_pk_shanghai_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_pk_shanghai_2, udg_Times[69])
call TriggerAddAction(gg_trg_pk_shanghai_2, function Trig_pk_shanghai_2Actions)
endfunction
function Trig_zhizhu_1Func002A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
if ( ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_DEAD) == true ) or ( GetUnitTypeId(udg_danwei2[0]) == 0x6E303039 ) or ( GetUnitTypeId(udg_danwei2[0]) == 0x6E303038 ) or ( GetUnitTypeId(udg_danwei2[0]) == 0x6E776164 ) ) ) then
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[0])
else
endif
set udg_danwei2[0]=null
endfunction
function Trig_zhizhu_1Func006A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
if ( ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_DEAD) == true ) or ( GetUnitTypeId(udg_danwei2[0]) == 0x6E303039 ) or ( GetUnitTypeId(udg_danwei2[0]) == 0x6E303038 ) or ( GetUnitTypeId(udg_danwei2[0]) == 0x6E776164 ) ) ) then
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[0])
else
endif
set udg_danwei2[0]=null
endfunction
function Trig_zhizhu_1Func010A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
if ( ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_DEAD) == true ) or ( GetUnitTypeId(udg_danwei2[0]) == 0x6E303039 ) or ( GetUnitTypeId(udg_danwei2[0]) == 0x6E303038 ) or ( GetUnitTypeId(udg_danwei2[0]) == 0x6E776164 ) ) ) then
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[0])
else
endif
set udg_danwei2[0]=null
endfunction
function Trig_zhizhu_1Func014A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
if ( ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_DEAD) == true ) or ( GetUnitTypeId(udg_danwei2[0]) == 0x6E303039 ) or ( GetUnitTypeId(udg_danwei2[0]) == 0x6E303038 ) or ( GetUnitTypeId(udg_danwei2[0]) == 0x6E776164 ) ) ) then
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[0])
else
endif
set udg_danwei2[0]=null
endfunction
function Trig_zhizhu_1Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_xuanqu=YDWEGetUnitsInRectAllNull(gg_rct_YG2)
call ForGroupBJ(udg_xuanqu, function Trig_zhizhu_1Func002A)
if ( ( IsUnitGroupEmptyBJ(udg_xuanqu) == true ) ) then
set udg_dian2[0]=GetRectCenter(gg_rct_YG2)
set udg_danwei2[0]=CreateUnit(s__baka_SPlayer(PLAYER_NEUTRAL_AGGRESSIVE), 0x6E303034, GetLocationX(udg_dian2[0]), GetLocationY(udg_dian2[0]), 120.00)
call s__maphack_InitHero(udg_danwei2[0])
set udg_danwei2[0]=null
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=2
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], ( ( 150.00 * I2R(bj_forLoopAIndex) ) - 225.00 ), 30.00)
set udg_danwei2[0]=CreateUnit(s__baka_SPlayer(PLAYER_NEUTRAL_AGGRESSIVE), 0x6E303143, GetLocationX(udg_dian2[1]), GetLocationY(udg_dian2[1]), 95.00)
call s__maphack_InitHero(udg_danwei2[0])
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[1])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call RemoveLocation(udg_dian2[0])
else
endif
call DestroyGroup(udg_xuanqu)
set udg_xuanqu=YDWEGetUnitsInRectAllNull(gg_rct_YG3)
call ForGroupBJ(udg_xuanqu, function Trig_zhizhu_1Func006A)
if ( ( IsUnitGroupEmptyBJ(udg_xuanqu) == true ) ) then
set udg_dian2[0]=GetRectCenter(gg_rct_YG3)
set udg_danwei2[0]=CreateUnit(s__baka_SPlayer(PLAYER_NEUTRAL_AGGRESSIVE), 0x6E303034, GetLocationX(udg_dian2[0]), GetLocationY(udg_dian2[0]), 90.00)
call s__maphack_InitHero(udg_danwei2[0])
set udg_danwei2[0]=null
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=2
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], ( ( 150.00 * I2R(bj_forLoopAIndex) ) - 225.00 ), 0.00)
set udg_danwei2[0]=CreateUnit(s__baka_SPlayer(PLAYER_NEUTRAL_AGGRESSIVE), 0x6E303143, GetLocationX(udg_dian2[1]), GetLocationY(udg_dian2[1]), 90.00)
call s__maphack_InitHero(udg_danwei2[0])
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[1])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call RemoveLocation(udg_dian2[0])
else
endif
call DestroyGroup(udg_xuanqu)
set udg_xuanqu=YDWEGetUnitsInRectAllNull(gg_rct_YG8)
call ForGroupBJ(udg_xuanqu, function Trig_zhizhu_1Func010A)
if ( ( IsUnitGroupEmptyBJ(udg_xuanqu) == true ) ) then
set udg_dian2[0]=GetRectCenter(gg_rct_YG8)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=4
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], ( ( 40.00 * I2R(bj_forLoopAIndex) ) - 100.00 ), 120.00)
set udg_danwei2[0]=CreateUnit(s__baka_SPlayer(PLAYER_NEUTRAL_AGGRESSIVE), 0x6E303142, GetLocationX(udg_dian2[1]), GetLocationY(udg_dian2[1]), 30.00)
call s__maphack_InitHero(udg_danwei2[0])
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[1])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call RemoveLocation(udg_dian2[0])
else
endif
call DestroyGroup(udg_xuanqu)
set udg_xuanqu=YDWEGetUnitsInRectAllNull(gg_rct_YG9)
call ForGroupBJ(udg_xuanqu, function Trig_zhizhu_1Func014A)
if ( ( IsUnitGroupEmptyBJ(udg_xuanqu) == true ) ) then
set udg_dian2[0]=GetRectCenter(gg_rct_YG9)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=4
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], ( ( 40.00 * I2R(bj_forLoopAIndex) ) - 100.00 ), 315.00)
set udg_danwei2[0]=CreateUnit(s__baka_SPlayer(PLAYER_NEUTRAL_AGGRESSIVE), 0x6E303142, GetLocationX(udg_dian2[1]), GetLocationY(udg_dian2[1]), 225.00)
call s__maphack_InitHero(udg_danwei2[0])
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[1])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call RemoveLocation(udg_dian2[0])
else
endif
call DestroyGroup(udg_xuanqu)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_zhizhu_1 takes nothing returns nothing
set gg_trg_zhizhu_1=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_zhizhu_1, udg_youxixitong[3])
call TriggerAddAction(gg_trg_zhizhu_1, function Trig_zhizhu_1Actions)
endfunction
function Trig_juxiongFunc002A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
if ( ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_DEAD) == true ) or ( GetUnitTypeId(udg_danwei2[0]) == 0x6E303039 ) or ( GetUnitTypeId(udg_danwei2[0]) == 0x6E303038 ) or ( GetUnitTypeId(udg_danwei2[0]) == 0x6E776164 ) ) ) then
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[0])
else
endif
set udg_danwei2[0]=null
endfunction
function Trig_juxiongFunc006A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
if ( ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_DEAD) == true ) or ( GetUnitTypeId(udg_danwei2[0]) == 0x6E303039 ) or ( GetUnitTypeId(udg_danwei2[0]) == 0x6E303038 ) or ( GetUnitTypeId(udg_danwei2[0]) == 0x6E776164 ) ) ) then
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[0])
else
endif
set udg_danwei2[0]=null
endfunction
function Trig_juxiongFunc010A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
if ( ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_DEAD) == true ) or ( GetUnitTypeId(udg_danwei2[0]) == 0x6E303039 ) or ( GetUnitTypeId(udg_danwei2[0]) == 0x6E303038 ) or ( GetUnitTypeId(udg_danwei2[0]) == 0x6E776164 ) ) ) then
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[0])
else
endif
set udg_danwei2[0]=null
endfunction
function Trig_juxiongActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_xuanqu=YDWEGetUnitsInRectAllNull(gg_rct_YG5)
call ForGroupBJ(udg_xuanqu, function Trig_juxiongFunc002A)
if ( ( IsUnitGroupEmptyBJ(udg_xuanqu) == true ) ) then
set udg_dian2[0]=GetRectCenter(gg_rct_YG5)
set udg_danwei2[0]=CreateUnit(s__baka_SPlayer(PLAYER_NEUTRAL_AGGRESSIVE), 0x6E706C67, GetLocationX(udg_dian2[0]), GetLocationY(udg_dian2[0]), 315.00)
call s__maphack_InitHero(udg_danwei2[0])
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
else
endif
call DestroyGroup(udg_xuanqu)
set udg_xuanqu=YDWEGetUnitsInRectAllNull(gg_rct_YG6)
call ForGroupBJ(udg_xuanqu, function Trig_juxiongFunc006A)
if ( ( IsUnitGroupEmptyBJ(udg_xuanqu) == true ) ) then
set udg_dian2[0]=GetRectCenter(gg_rct_YG6)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=2
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_danwei2[0]=CreateUnit(s__baka_SPlayer(PLAYER_NEUTRAL_AGGRESSIVE), 0x6E706C67, GetLocationX(udg_dian2[0]), GetLocationY(udg_dian2[0]), 135.00)
call s__maphack_InitHero(udg_danwei2[0])
set udg_danwei2[0]=null
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call RemoveLocation(udg_dian2[0])
else
endif
call DestroyGroup(udg_xuanqu)
set udg_xuanqu=YDWEGetUnitsInRectAllNull(gg_rct_YG7)
call ForGroupBJ(udg_xuanqu, function Trig_juxiongFunc010A)
if ( ( IsUnitGroupEmptyBJ(udg_xuanqu) == true ) ) then
set udg_dian2[0]=GetRectCenter(gg_rct_YG7)
set udg_danwei2[0]=CreateUnit(s__baka_SPlayer(PLAYER_NEUTRAL_AGGRESSIVE), 0x6E706C67, GetLocationX(udg_dian2[0]), GetLocationY(udg_dian2[0]), 0.00)
call s__maphack_InitHero(udg_danwei2[0])
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
else
endif
call DestroyGroup(udg_xuanqu)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_juxiong takes nothing returns nothing
set gg_trg_juxiong=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_juxiong, udg_youxixitong[4])
call TriggerAddAction(gg_trg_juxiong, function Trig_juxiongActions)
endfunction
function Trig_jumoActions takes nothing returns nothing
call QuestMessageBJ(GetPlayersAll(), bj_QUESTMESSAGE_UPDATED, "TRIGSTR_2260")
set udg_dian2[0]=GetRectCenter(gg_rct_YG1)
set udg_danwei2[0]=CreateUnit(s__baka_SPlayer(PLAYER_NEUTRAL_AGGRESSIVE), 0x6E303044, GetLocationX(udg_dian2[0]), GetLocationY(udg_dian2[0]), 0)
set udg_danwei2[1]=CreateUnit(s__baka_SPlayer(PLAYER_NEUTRAL_AGGRESSIVE), 0x6E303045, GetLocationX(udg_dian2[0]), GetLocationY(udg_dian2[0]), 0)
set udg_danwei2[2]=CreateUnit(s__baka_SPlayer(PLAYER_NEUTRAL_AGGRESSIVE), 0x6E303045, GetLocationX(udg_dian2[0]), GetLocationY(udg_dian2[0]), 0)
call s__maphack_InitHero(udg_danwei2[0])
call s__maphack_InitHero(udg_danwei2[1])
call s__maphack_InitHero(udg_danwei2[2])
set udg_danwei2[0]=null
set udg_danwei2[1]=null
set udg_danwei2[2]=null
set udg_dian2[0]=GetRectCenter(gg_rct_YG4)
set udg_danwei2[0]=CreateUnit(s__baka_SPlayer(PLAYER_NEUTRAL_AGGRESSIVE), 0x6E303044, GetLocationX(udg_dian2[0]), GetLocationY(udg_dian2[0]), 225.00)
set udg_danwei2[1]=CreateUnit(s__baka_SPlayer(PLAYER_NEUTRAL_AGGRESSIVE), 0x6E303045, GetLocationX(udg_dian2[0]), GetLocationY(udg_dian2[0]), 225.00)
set udg_danwei2[2]=CreateUnit(s__baka_SPlayer(PLAYER_NEUTRAL_AGGRESSIVE), 0x6E303045, GetLocationX(udg_dian2[0]), GetLocationY(udg_dian2[0]), 225.00)
call s__maphack_InitHero(udg_danwei2[0])
call s__maphack_InitHero(udg_danwei2[1])
call s__maphack_InitHero(udg_danwei2[2])
set udg_danwei2[0]=null
set udg_danwei2[1]=null
set udg_danwei2[2]=null
call EnableTrigger(gg_trg_jumo_2)
endfunction
function InitTrig_jumo takes nothing returns nothing
set gg_trg_jumo=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_jumo, udg_youxixitong[5])
call TriggerAddAction(gg_trg_jumo, function Trig_jumoActions)
endfunction
function Trig_jumo_2Func002A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
if ( ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_DEAD) == true ) or ( GetUnitTypeId(udg_danwei2[0]) == 0x6E303039 ) or ( GetUnitTypeId(udg_danwei2[0]) == 0x6E303038 ) or ( GetUnitTypeId(udg_danwei2[0]) == 0x6E776164 ) ) ) then
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[0])
else
endif
set udg_danwei2[0]=null
endfunction
function Trig_jumo_2Func006A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
if ( ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_DEAD) == true ) or ( GetUnitTypeId(udg_danwei2[0]) == 0x6E303039 ) or ( GetUnitTypeId(udg_danwei2[0]) == 0x6E303038 ) or ( GetUnitTypeId(udg_danwei2[0]) == 0x6E776164 ) ) ) then
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[0])
else
endif
set udg_danwei2[0]=null
endfunction
function Trig_jumo_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_xuanqu=YDWEGetUnitsInRectAllNull(gg_rct_YG1)
call ForGroupBJ(udg_xuanqu, function Trig_jumo_2Func002A)
if ( ( IsUnitGroupEmptyBJ(udg_xuanqu) == true ) ) then
set udg_dian2[0]=GetRectCenter(gg_rct_YG1)
set udg_danwei2[0]=CreateUnit(s__baka_SPlayer(PLAYER_NEUTRAL_AGGRESSIVE), 0x6E303044, GetLocationX(udg_dian2[0]), GetLocationY(udg_dian2[0]), 0.00)
call s__maphack_InitHero(udg_danwei2[0])
set udg_danwei2[0]=null
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=2
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_danwei2[0]=CreateUnit(s__baka_SPlayer(PLAYER_NEUTRAL_AGGRESSIVE), 0x6E303045, GetLocationX(udg_dian2[0]), GetLocationY(udg_dian2[0]), 0.00)
call s__maphack_InitHero(udg_danwei2[0])
set udg_danwei2[0]=null
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call RemoveLocation(udg_dian2[0])
else
endif
call DestroyGroup(udg_xuanqu)
set udg_xuanqu=YDWEGetUnitsInRectAllNull(gg_rct_YG4)
call ForGroupBJ(udg_xuanqu, function Trig_jumo_2Func006A)
if ( ( IsUnitGroupEmptyBJ(udg_xuanqu) == true ) ) then
set udg_dian2[0]=GetRectCenter(gg_rct_YG4)
set udg_danwei2[0]=CreateUnit(s__baka_SPlayer(PLAYER_NEUTRAL_AGGRESSIVE), 0x6E303044, GetLocationX(udg_dian2[0]), GetLocationY(udg_dian2[0]), 225.00)
call s__maphack_InitHero(udg_danwei2[0])
set udg_danwei2[0]=null
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=2
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_danwei2[0]=CreateUnit(s__baka_SPlayer(PLAYER_NEUTRAL_AGGRESSIVE), 0x6E303045, GetLocationX(udg_dian2[0]), GetLocationY(udg_dian2[0]), 225.00)
call s__maphack_InitHero(udg_danwei2[0])
set udg_danwei2[0]=null
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call RemoveLocation(udg_dian2[0])
else
endif
call DestroyGroup(udg_xuanqu)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_jumo_2 takes nothing returns nothing
set gg_trg_jumo_2=CreateTrigger()
call DisableTrigger(gg_trg_jumo_2)
call TriggerRegisterTimerExpireEvent(gg_trg_jumo_2, udg_youxixitong[3])
call TriggerAddAction(gg_trg_jumo_2, function Trig_jumo_2Actions)
endfunction
function Trig_FMHFunc001A takes nothing returns nothing
call s__maphack_InitHero(GetEnumUnit())
endfunction
function Trig_FMHActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(YDWEGetUnitsOfPlayerAndTypeIdNull(s__baka_SPlayer(PLAYER_NEUTRAL_AGGRESSIVE) , 0x6E62616E), function Trig_FMHFunc001A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_FMH takes nothing returns nothing
set gg_trg_FMH=CreateTrigger()
call TriggerRegisterTimerEventSingle(gg_trg_FMH, 1.00)
call TriggerAddAction(gg_trg_FMH, function Trig_FMHActions)
endfunction
function Trig_zhiyu_1Actions takes nothing returns nothing
set udg_danwei[3]=GetTriggerUnit()
set udg_danwei[4]=GetSpellTargetUnit()
call PlaySoundOnUnitBJ(gg_snd_ManaPotion, 100, udg_danwei[4])
if ( ( udg_danwei[3] != udg_danwei[4] ) ) then
set udg_shishu2[0]=GetRandomReal(0.90, 1.10)
else
set udg_shishu2[0]=GetRandomReal(0.45, 0.55)
endif
call SetUnitLifeBJ(udg_danwei[4], ( GetUnitState(udg_danwei[4], UNIT_STATE_LIFE) + ( udg_shishu2[0] * ( I2R(GetHeroInt(udg_danwei[3], true)) * 0.50 ) ) ))
if ( ( UnitHasBuffBJ(udg_danwei[4], 0x42303332) == true ) ) then
set udg_shishu2[0]=( udg_shishu2[0] * 1.20 )
else
if ( ( UnitHasBuffBJ(udg_danwei[4], 0x42303331) == true ) ) then
set udg_shishu2[0]=( udg_shishu2[0] * 1.10 )
else
endif
endif
call CreateTextTagUnitBJ(( "+" + I2S(R2I(( ( ( 20.00 + ( 20.00 * I2R(GetUnitAbilityLevel(udg_danwei[3], 0x41303348)) ) ) + ( I2R(GetHeroInt(udg_danwei[3], true)) * 0.50 ) ) * udg_shishu2[0] ))) ), udg_danwei[4], 0, 10, 25.00, 100, 25.00, 0)
call SetTextTagVisibility(bj_lastCreatedTextTag, false)
call SetTextTagVelocity(bj_lastCreatedTextTag, 0.00, 0.04)
call SetTextTagPermanent(bj_lastCreatedTextTag, false)
call SetTextTagFadepoint(bj_lastCreatedTextTag, 1.00)
call SetTextTagLifespan(bj_lastCreatedTextTag, 2.00)
set udg_wanjiazu[0]=CreateForce()
set udg_aXUNHUAN[38]=1
loop
exitwhen udg_aXUNHUAN[38] > 10
if ( ( IsUnitVisible(udg_danwei[4], s__baka_SPlayer(udg_aXUNHUAN[38] - 1)) == true ) ) then
call ForceAddPlayer(udg_wanjiazu[0], s__baka_SPlayer(udg_aXUNHUAN[38] - 1))
else
endif
set udg_aXUNHUAN[38]=udg_aXUNHUAN[38] + 1
endloop
call ShowTextTagForceBJ(true, bj_lastCreatedTextTag, udg_wanjiazu[0])
call DestroyForce(udg_wanjiazu[0])
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishHealth\\ReplenishHealthCasterOverhead.mdl", udg_danwei[4], "overhead"))
set udg_danwei[3]=null
set udg_danwei[4]=null
endfunction
function InitTrig_zhiyu_1 takes nothing returns nothing
set gg_trg_zhiyu_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_zhiyu_1 , 3 , 0x41303348)
call TriggerAddAction(gg_trg_zhiyu_1, function Trig_zhiyu_1Actions)
endfunction
function Trig_zhiyu_2Func009A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitDeadBJ(udg_danwei2[1]) == false ) and ( IsUnitAlly(udg_danwei2[1], GetOwningPlayer(udg_Danwei[141])) == true ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Demon\\ReviveDemon\\ReviveDemon.mdl", udg_danwei2[1], "origin"))
if ( ( GetUnitAbilityLevel(udg_Danwei[141], 0x41304D50) > 0 ) and ( GetUnitLifePercent(udg_danwei2[1]) < 100.00 ) ) then
set udg_shishu2[0]=GetRandomReal(0.90, 1.10)
call SetUnitLifeBJ(udg_danwei2[1], ( GetUnitState(udg_danwei2[1], UNIT_STATE_LIFE) + ( ( ( 25.00 + ( 45.00 * I2R(GetUnitAbilityLevel(udg_Danwei[141], 0x41304D50)) ) ) + ( 1.50 * I2R(GetHeroInt(udg_Danwei[141], true)) ) ) * udg_shishu2[0] ) ))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishHealth\\ReplenishHealthCasterOverhead.mdl", udg_danwei2[1], "overhead"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Heal\\HealTarget.mdl", udg_danwei2[1], "origin"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Heal\\HealTarget.mdl", udg_danwei2[1], "origin"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Heal\\HealTarget.mdl", udg_danwei2[1], "origin"))
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_HERO) == true ) ) then
if ( ( UnitHasBuffBJ(udg_danwei2[1], 0x42303332) == true ) ) then
set udg_shishu2[0]=( udg_shishu2[0] * 1.20 )
else
if ( ( UnitHasBuffBJ(udg_danwei2[1], 0x42303331) == true ) ) then
set udg_shishu2[0]=( udg_shishu2[0] * 1.10 )
else
endif
endif
call CreateTextTagUnitBJ(( "+" + I2S(R2I(( ( ( 25.00 + ( 45.00 * I2R(GetUnitAbilityLevel(udg_Danwei[141], 0x41304D50)) ) ) + ( 1.50 * I2R(GetHeroInt(udg_Danwei[141], true)) ) ) * udg_shishu2[0] ))) ), udg_danwei2[1], 0, 10, 25.00, 100, 25.00, 0)
call SetTextTagVisibility(bj_lastCreatedTextTag, false)
call SetTextTagVelocity(bj_lastCreatedTextTag, 0.00, 0.04)
call SetTextTagPermanent(bj_lastCreatedTextTag, false)
call SetTextTagFadepoint(bj_lastCreatedTextTag, 1.00)
call SetTextTagLifespan(bj_lastCreatedTextTag, 2.00)
set udg_wanjiazu[0]=CreateForce()
set udg_aXUNHUAN[38]=1
loop
exitwhen udg_aXUNHUAN[38] > 10
if ( ( IsUnitVisible(udg_danwei2[1], s__baka_SPlayer(udg_aXUNHUAN[38] - 1)) == true ) ) then
call ForceAddPlayer(udg_wanjiazu[0], s__baka_SPlayer(udg_aXUNHUAN[38] - 1))
else
endif
set udg_aXUNHUAN[38]=udg_aXUNHUAN[38] + 1
endloop
call ShowTextTagForceBJ(true, bj_lastCreatedTextTag, udg_wanjiazu[0])
call DestroyForce(udg_wanjiazu[0])
else
endif
else
call GroupRemoveUnit(udg_Danweizu[141], udg_danwei2[1])
endif
else
call GroupRemoveUnit(udg_Danweizu[141], udg_danwei2[1])
endif
set udg_danwei2[1]=null
endfunction
function Trig_zhiyu_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_Danwei[141]=GetTriggerUnit()
set udg_Dian[141]=GetUnitLoc(udg_Danwei[141])
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_Danwei[141]), 0x41304851, false)
call UnitAddAbility(udg_Danwei[141], 0x41303348)
call SetUnitAbilityLevel(udg_Danwei[141], 0x41303348, GetUnitAbilityLevel(udg_Danwei[141], 0x41304851))
call StartTimerBJ(udg_Times[141], false, 12.00)
set udg_Danweizu[141]=YDWEGetUnitsInRangeOfLocAllNull(832.00 , udg_Dian[141])
call ForGroupBJ(udg_Danweizu[141], function Trig_zhiyu_2Func009A)
if ( ( IsUnitGroupEmptyBJ(udg_Danweizu[141]) == false ) ) then
call PlaySoundOnUnitBJ(gg_snd_ManaPotion, 100, udg_Danwei[141])
else
endif
call DestroyGroup(udg_Danweizu[141])
call RemoveLocation(udg_Dian[141])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_zhiyu_2 takes nothing returns nothing
set gg_trg_zhiyu_2=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_zhiyu_2 , 3 , 0x41304851)
call TriggerAddAction(gg_trg_zhiyu_2, function Trig_zhiyu_2Actions)
endfunction
function Trig_zhiyu_3Actions takes nothing returns nothing
call UnitRemoveAbility(udg_Danwei[141], 0x41303348)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_Danwei[141]), 0x41304851, true)
endfunction
function InitTrig_zhiyu_3 takes nothing returns nothing
set gg_trg_zhiyu_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_zhiyu_3, udg_Times[141])
call TriggerAddAction(gg_trg_zhiyu_3, function Trig_zhiyu_3Actions)
endfunction
function Trig_yuhuasongge_1Actions takes nothing returns nothing
set udg_Danwei[141]=GetTriggerUnit()
set udg_dian[16]=GetSpellTargetLoc()
set udg_danwei[10]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[141]), 0x65303752, udg_dian[16], 270.00)
call SetUnitAnimation(udg_danwei[10], "birth")
set udg_zhengshu[31]=100
call StartTimerBJ(udg_jishiqi[4], true, 0.05)
call PlaySoundOnUnitBJ(gg_snd_ResurrectTarget, 100, udg_danwei[10])
endfunction
function InitTrig_yuhuasongge_1 takes nothing returns nothing
set gg_trg_yuhuasongge_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_yuhuasongge_1 , 3 , 0x41304D51)
call TriggerAddAction(gg_trg_yuhuasongge_1, function Trig_yuhuasongge_1Actions)
endfunction
function Trig_yuhuasongge_2Func001Func002A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
call GroupRemoveUnit(udg_danweizu[3], udg_danwei2[1])
call UnitRemoveAbility(udg_danwei2[1], 0x41304D52)
call UnitRemoveBuffBJ(0x42303031, udg_danwei2[1])
set udg_danwei2[1]=null
endfunction
function Trig_yuhuasongge_2Func001Func008A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitDeadBJ(udg_danwei2[1]) == false ) and ( IsUnitAlly(udg_danwei2[1], GetOwningPlayer(udg_Danwei[141])) == true ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu[3]) == false ) ) then
call GroupAddUnit(udg_danweizu[3], udg_danwei2[1])
call UnitAddAbility(udg_danwei2[1], 0x41304D52)
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_yuhuasongge_2Func001Func010A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
set udg_Dian[141]=GetUnitLoc(udg_danwei2[1])
if ( ( DistanceBetweenPoints(udg_Dian[141], udg_dian[16]) <= 500.00 ) ) then
call SetUnitLifeBJ(udg_danwei2[1], ( GetUnitState(udg_danwei2[1], UNIT_STATE_LIFE) + ( ( ( 150.00 * ( 1.00 + ( ( 100.00 - GetUnitLifePercent(udg_danwei2[1]) ) / 100.00 ) ) ) + ( GetUnitState(udg_danwei2[1], UNIT_STATE_MAX_LIFE) * 0.05 ) ) * 0.05 ) ))
else
call GroupRemoveUnit(udg_danweizu[3], udg_danwei2[1])
call UnitRemoveAbility(udg_danwei2[1], 0x41304D52)
call UnitRemoveBuffBJ(0x42303031, udg_danwei2[1])
endif
call RemoveLocation(udg_Dian[141])
set udg_danwei2[1]=null
endfunction
function Trig_yuhuasongge_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_zhengshu[31] > 0 ) ) then
set udg_zhengshu[31]=( udg_zhengshu[31] - 1 )
set udg_Danweizu[141]=YDWEGetUnitsInRangeOfLocAllNull(500.00 , udg_dian[16])
call ForGroupBJ(udg_Danweizu[141], function Trig_yuhuasongge_2Func001Func008A)
call DestroyGroup(udg_Danweizu[141])
call ForGroupBJ(udg_danweizu[3], function Trig_yuhuasongge_2Func001Func010A)
else
call KillUnit(udg_danwei[10])
call ForGroupBJ(udg_danweizu[3], function Trig_yuhuasongge_2Func001Func002A)
call GroupClear(udg_danweizu[3])
call PauseTimerBJ(true, udg_jishiqi[4])
call RemoveLocation(udg_dian[16])
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_yuhuasongge_2 takes nothing returns nothing
set gg_trg_yuhuasongge_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_yuhuasongge_2, udg_jishiqi[4])
call TriggerAddAction(gg_trg_yuhuasongge_2, function Trig_yuhuasongge_2Actions)
endfunction
function Trig_kongjianyuesong_0Actions takes nothing returns nothing
set udg_dian2[1]=GetSpellTargetLoc()
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_WALKABILITY) == true ) ) then
call IssueImmediateOrderById(GetTriggerUnit(), 851972)
call DisplayTextToPlayer(s__baka_SPlayer(( s__baka_SGetPlayerId(GetOwningPlayer(GetTriggerUnit())) + 1 ) - 1), 0, 0, "TRIGSTR_1133")
else
endif
call RemoveLocation(udg_dian2[1])
endfunction
function InitTrig_kongjianyuesong_0 takes nothing returns nothing
set gg_trg_kongjianyuesong_0=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_kongjianyuesong_0 , 1 , 0x41304D50)
call TriggerAddAction(gg_trg_kongjianyuesong_0, function Trig_kongjianyuesong_0Actions)
endfunction
function Trig_kongjianyuesong_1Actions takes nothing returns nothing
set udg_Danwei[141]=GetTriggerUnit()
set udg_Dian[141]=GetUnitLoc(udg_Danwei[141])
set udg_Dian[142]=GetSpellTargetLoc()
set udg_Danwei[142]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[141]), 0x65303753, udg_Dian[141], 270.00)
call SetUnitTimeScale(udg_Danwei[142], ( 1 / ( 3.00 - ( 0.20 * I2R(GetUnitAbilityLevel(udg_Danwei[141], 0x41304D50)) ) ) ))
set udg_Danwei[37]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[141]), 0x65303649, udg_Dian[141], 270.00)
call SetUnitManaBJ(udg_Danwei[37], 255.00)
call SetUnitColor(udg_Danwei[37], PLAYER_COLOR_YELLOW)
call SetUnitTimeScale(udg_Danwei[37], ( 1 / ( 3.00 - ( 0.30 * I2R(GetUnitAbilityLevel(udg_Danwei[141], 0x41304D50)) ) ) ))
call GroupAddUnit(udg_Danweizu[37], udg_Danwei[37])
set udg_Danwei[37]=null
call StartTimerBJ(udg_Times[142], false, ( 3.00 - ( 0.30 * I2R(GetUnitAbilityLevel(udg_Danwei[141], 0x41304D50)) ) ))
set udg_Zhengshu[142]=0
call RemoveLocation(udg_Dian[141])
endfunction
function InitTrig_kongjianyuesong_1 takes nothing returns nothing
set gg_trg_kongjianyuesong_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_kongjianyuesong_1 , 3 , 0x41304D50)
call TriggerAddAction(gg_trg_kongjianyuesong_1, function Trig_kongjianyuesong_1Actions)
endfunction
function Trig_kongjianyuesong_2Actions takes nothing returns nothing
set udg_Zhengshu[142]=1
call SetUnitX(udg_Danwei[141], GetLocationX(udg_Dian[142]))
call SetUnitY(udg_Danwei[141], GetLocationY(udg_Dian[142]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl", udg_Dian[142]))
endfunction
function InitTrig_kongjianyuesong_2 takes nothing returns nothing
set gg_trg_kongjianyuesong_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_kongjianyuesong_2, udg_Times[142])
call TriggerAddAction(gg_trg_kongjianyuesong_2, function Trig_kongjianyuesong_2Actions)
endfunction
function Trig_kongjianyuesong_3Func005A takes nothing returns nothing
set udg_Danwei[37]=GetEnumUnit()
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[37])) + 1 ) == ( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[141])) + 1 ) ) ) then
if ( ( udg_Zhengshu[142] == 0 ) ) then
call SetUnitColor(udg_Danwei[37], PLAYER_COLOR_LIGHT_GRAY)
else
call SetUnitColor(udg_Danwei[37], PLAYER_COLOR_CYAN)
endif
call SetUnitTimeScale(udg_Danwei[37], 0.00)
call SetUnitManaBJ(udg_Danwei[37], 250.00)
else
endif
set udg_Danwei[37]=null
endfunction
function Trig_kongjianyuesong_3Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call PauseTimer(udg_Times[142])
call RemoveUnit(udg_Danwei[142])
call ForGroupBJ(udg_Danweizu[37], function Trig_kongjianyuesong_3Func005A)
call RemoveLocation(udg_Dian[142])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_kongjianyuesong_3 takes nothing returns nothing
set gg_trg_kongjianyuesong_3=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_kongjianyuesong_3 , 4 , 0x41304D50)
call s__Event_AnyUnitSkill(gg_trg_kongjianyuesong_3 , 5 , 0x41304D50)
call TriggerAddAction(gg_trg_kongjianyuesong_3, function Trig_kongjianyuesong_3Actions)
endfunction
function Trig_sstcActions takes nothing returns nothing
set udg_danwei[5]=GetTriggerUnit()
set udg_danwei[6]=GetSpellTargetUnit()
set udg_dian[10]=GetUnitLoc(udg_danwei[6])
set udg_dian[11]=GetUnitLoc(udg_danwei[5])
set udg_dian[12]=PolarProjectionBJ(udg_dian[11], 50.00, AngleBetweenPoints(udg_dian[11], udg_dian[10]))
call PlaySoundOnUnitBJ(gg_snd_SpellStealMissile, 100, udg_danwei[5])
call CreateNUnitsAtLocFacingLocBJ(1, 0x65303031, GetOwningPlayer(udg_danwei[5]), udg_dian[12], GetUnitLoc(udg_danwei[6]))
set udg_danwei[7]=bj_lastCreatedUnit
call UnitAddAbility(udg_danwei[7], 0x41726176)
call s__maphack_SetHeight(udg_danwei[7] , 50.00 , 0.00)
call SetUnitColor(udg_danwei[7], PLAYER_COLOR_YELLOW)
call UnitApplyTimedLife(udg_danwei[7], 0x42487765, 3.00)
call SetUnitPathing(udg_danwei[7], false)
call EnableTrigger(gg_trg_sstc2)
endfunction
function InitTrig_sstc takes nothing returns nothing
set gg_trg_sstc=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_sstc , 3 , 0x41303349)
call TriggerAddAction(gg_trg_sstc, function Trig_sstcActions)
endfunction
function Trig_sstc2Func003Func010A takes nothing returns nothing
set udg_danwei[137]=GetEnumUnit()
if ( ( udg_danwei[137] != udg_danwei[6] ) and ( IsUnitType(udg_danwei[137], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitAliveBJ(udg_danwei[137]) == true ) and ( IsUnitInGroup(udg_danwei[137], udg_danweizu2[369]) == false ) and ( IsUnitEnemy(udg_danwei[5], GetOwningPlayer(udg_danwei[137])) == true ) ) then
call UnitDamageTarget(udg_danwei[5], udg_danwei[137], ( 50.00 + ( 50.00 * I2R(GetUnitAbilityLevel(udg_danwei[5], 0x41303349)) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei[137]=null
endfunction
function Trig_sstc2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_dian[13]=GetUnitLoc(udg_danwei[7])
set udg_dian[14]=GetUnitLoc(udg_danwei[6])
if ( ( DistanceBetweenPoints(udg_dian[13], udg_dian[14]) >= 80.00 ) ) then
set udg_dian[15]=PolarProjectionBJ(udg_dian[13], 50.00, AngleBetweenPoints(udg_dian[13], udg_dian[14]))
call SetUnitPositionLocFacingLocBJ(udg_danwei[7], udg_dian[15], udg_dian[14])
call RemoveLocation(udg_dian[15])
else
call RemoveUnit(udg_danwei[7])
call CreateNUnitsAtLoc(1, 0x65303030, GetOwningPlayer(udg_danwei[5]), udg_dian[14], 0.00)
set udg_danwei[8]=bj_lastCreatedUnit
call GroupAddUnit(udg_DAZE[0], udg_danwei[8])
call UnitAddAbility(udg_danwei[8], 0x41726176)
call s__maphack_SetHeight(udg_danwei[8] , 150.00 , 0.00)
call SetUnitAnimation(bj_lastCreatedUnit, "birth")
call UnitApplyTimedLife(udg_danwei[8], 0x42487765, 1.00)
set udg_danweizu[2]=YDWEGetUnitsInRangeOfLocAllNull(300.00 , udg_dian[10])
call ForGroupBJ(udg_danweizu[2], function Trig_sstc2Func003Func010A)
call UnitDamageTarget(udg_danwei[5], udg_danwei[6], ( ( 50.00 + ( I2R(GetHeroInt(udg_danwei[5], true)) * 1.00 ) ) + ( 50.00 * I2R(GetUnitAbilityLevel(udg_danwei[5], 0x41303349)) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call PlaySoundOnUnitBJ(gg_snd_HolyBolt, 100, udg_danwei[6])
set udg_dian[14]=GetUnitLoc(udg_danwei[6])
call CreateNUnitsAtLoc(1, 0x65303130, GetOwningPlayer(udg_danwei[5]), udg_dian[14], bj_UNIT_FACING)
set udg_danwei[9]=bj_lastCreatedUnit
call UnitAddAbility(udg_danwei[9], 0x41303037)
call IssueImmediateOrder(udg_danwei[9], "thunderclap")
call UnitApplyTimedLife(udg_danwei[9], 0x42487765, 0.50)
call RemoveLocation(udg_dian[10])
call RemoveLocation(udg_dian[11])
call RemoveLocation(udg_dian[12])
set udg_danwei[5]=null
set udg_danwei[6]=null
set udg_danwei[7]=null
set udg_danwei[8]=null
set udg_danwei[9]=null
call DestroyGroup(udg_danweizu[2])
call DisableTrigger(gg_trg_sstc2)
endif
call RemoveLocation(udg_dian[13])
call RemoveLocation(udg_dian[14])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_sstc2 takes nothing returns nothing
set gg_trg_sstc2=CreateTrigger()
call DisableTrigger(gg_trg_sstc2)
call TriggerRegisterTimerExpireEvent(gg_trg_sstc2, udg_Times[4])
call TriggerAddAction(gg_trg_sstc2, function Trig_sstc2Actions)
endfunction
function Trig_star_1Actions takes nothing returns nothing
set udg_danwei2[10]=GetSpellAbilityUnit()
set udg_danwei2[11]=GetSpellTargetUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[10])
set udg_dian2[1]=GetUnitLoc(udg_danwei2[11])
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], 50.00, AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
set udg_aXUNHUAN[40]=12
loop
exitwhen udg_aXUNHUAN[40] > 14
set udg_danwei2[udg_aXUNHUAN[40]]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[10]), 0x65303230, udg_dian2[2], AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
call GroupAddUnit(udg_DAZE[0], udg_danwei2[udg_aXUNHUAN[40]])
call GroupAddUnit(udg_DAZE[2], udg_danwei2[udg_aXUNHUAN[40]])
call UnitAddAbility(udg_danwei2[udg_aXUNHUAN[40]], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[udg_aXUNHUAN[40]] , 75.00 , 0.00)
set udg_aXUNHUAN[40]=udg_aXUNHUAN[40] + 1
endloop
set udg_Danwei[37]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[10]), 0x65303649, udg_dian2[0], 270.00)
call SetUnitManaBJ(udg_Danwei[37], 255.00)
call SetUnitColor(udg_Danwei[37], PLAYER_COLOR_YELLOW)
call SetUnitTimeScale(udg_Danwei[37], 1)
call GroupAddUnit(udg_Danweizu[37], udg_Danwei[37])
set udg_Danwei[37]=null
set udg_zhengshu2[0]=1
set udg_zhengshu2[1]=0
call StartTimerBJ(udg_times[0], true, 0.10)
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
endfunction
function InitTrig_star_1 takes nothing returns nothing
set gg_trg_star_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_star_1 , 3 , 0x41303035)
call TriggerAddAction(gg_trg_star_1, function Trig_star_1Actions)
endfunction
function Trig_star_2Actions takes nothing returns nothing
set udg_zhengshu2[0]=IMinBJ(( udg_zhengshu2[0] + 1 ), 10)
set udg_aXUNHUAN[41]=12
loop
exitwhen udg_aXUNHUAN[41] > 14
call SetUnitScale(udg_danwei2[udg_aXUNHUAN[41]], ( 1.00 + ( 0.20 * I2R(udg_zhengshu2[0]) ) ), ( 1 + ( 0.20 * I2R(udg_zhengshu2[0]) ) ), ( 1 + ( 0.20 * I2R(udg_zhengshu2[0]) ) ))
set udg_aXUNHUAN[41]=udg_aXUNHUAN[41] + 1
endloop
endfunction
function InitTrig_star_2 takes nothing returns nothing
set gg_trg_star_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_star_2, udg_times[0])
call TriggerAddAction(gg_trg_star_2, function Trig_star_2Actions)
endfunction
function Trig_star_3Conditions takes nothing returns boolean
return ( ( udg_zhengshu2[0] > 0 ) )
endfunction
function Trig_star_3Func007A takes nothing returns nothing
set udg_Danwei[37]=GetEnumUnit()
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[37])) + 1 ) == ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[10])) + 1 ) ) ) then
if ( ( udg_zhengshu2[0] < 10 ) ) then
call SetUnitColor(udg_Danwei[37], PLAYER_COLOR_LIGHT_GRAY)
else
endif
call SetUnitTimeScale(udg_Danwei[37], 0.00)
call SetUnitManaBJ(udg_Danwei[37], 250.00)
else
endif
set udg_Danwei[37]=null
endfunction
function Trig_star_3Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call PlaySoundOnUnitBJ(gg_snd_HealingSprayBirth1, 100, udg_danwei2[12])
call PauseTimer(udg_times[0])
call StartTimerBJ(udg_times[1], true, 0.02)
call ForGroupBJ(udg_Danweizu[37], function Trig_star_3Func007A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_star_3 takes nothing returns nothing
set gg_trg_star_3=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_star_3 , 4 , 0x41303035)
call s__Event_AnyUnitSkill(gg_trg_star_3 , 5 , 0x41303035)
call TriggerAddCondition(gg_trg_star_3, Condition(function Trig_star_3Conditions))
call TriggerAddAction(gg_trg_star_3, function Trig_star_3Actions)
endfunction
function Trig_star_4Func005Func003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( udg_danwei2[1] != udg_danwei2[11] ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[10])) == true ) ) then
if ( ( GetUnitAbilityLevel(udg_danwei2[10], 0x41303035) == 1 ) ) then
call UnitDamageTarget(udg_danwei2[10], udg_danwei2[1], ( ( I2R(udg_zhengshu2[0]) * 0.05 ) * ( 150.00 + ( 3.00 * I2R(GetHeroInt(udg_danwei2[10], true)) ) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
if ( ( GetUnitAbilityLevel(udg_danwei2[10], 0x41303035) == 2 ) ) then
call UnitDamageTarget(udg_danwei2[10], udg_danwei2[1], ( ( I2R(udg_zhengshu2[0]) * 0.05 ) * ( 300.00 + ( 3.00 * I2R(GetHeroInt(udg_danwei2[10], true)) ) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
call UnitDamageTarget(udg_danwei2[10], udg_danwei2[1], ( ( I2R(udg_zhengshu2[0]) * 0.05 ) * ( 500.00 + ( 3.00 * I2R(GetHeroInt(udg_danwei2[10], true)) ) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
endif
endif
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_star_4Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_dian2[0]=GetUnitLoc(udg_danwei2[12])
set udg_dian2[1]=GetUnitLoc(udg_danwei2[11])
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], RMinBJ(I2R(udg_zhengshu2[1]), 50.00), AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
set udg_zhengshu2[1]=( udg_zhengshu2[1] + 2 )
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) >= 80.00 ) ) then
set udg_aXUNHUAN[42]=12
loop
exitwhen udg_aXUNHUAN[42] > 14
call SetUnitX(udg_danwei2[udg_aXUNHUAN[42]], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[udg_aXUNHUAN[42]], GetLocationY(udg_dian2[2]))
set udg_aXUNHUAN[42]=udg_aXUNHUAN[42] + 1
endloop
else
call PlaySoundOnUnitBJ(gg_snd_HolyBolt, 100, udg_danwei2[11])
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(300.00 , udg_dian2[1])
call ForGroupBJ(udg_xuanqu, function Trig_star_4Func005Func003A)
call DestroyGroup(udg_xuanqu)
if ( ( GetUnitAbilityLevel(udg_danwei2[10], 0x41303035) == 1 ) ) then
call UnitDamageTarget(udg_danwei2[10], udg_danwei2[11], ( ( I2R(udg_zhengshu2[0]) * 0.10 ) * ( 150.00 + ( 3.00 * I2R(GetHeroInt(udg_danwei2[10], true)) ) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
if ( ( GetUnitAbilityLevel(udg_danwei2[10], 0x41303035) == 2 ) ) then
call UnitDamageTarget(udg_danwei2[10], udg_danwei2[11], ( ( I2R(udg_zhengshu2[0]) * 0.10 ) * ( 300.00 + ( 3.00 * I2R(GetHeroInt(udg_danwei2[10], true)) ) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
call UnitDamageTarget(udg_danwei2[10], udg_danwei2[11], ( ( I2R(udg_zhengshu2[0]) * 0.10 ) * ( 500.00 + ( 3.00 * I2R(GetHeroInt(udg_danwei2[10], true)) ) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
endif
endif
set udg_danwei2[10]=null
set udg_danwei2[11]=null
set udg_aXUNHUAN[43]=12
loop
exitwhen udg_aXUNHUAN[43] > 14
call KillUnit(udg_danwei2[udg_aXUNHUAN[43]])
set udg_danwei2[udg_aXUNHUAN[43]]=null
set udg_aXUNHUAN[43]=udg_aXUNHUAN[43] + 1
endloop
call PauseTimer(udg_times[1])
set udg_zhengshu2[0]=0
endif
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_star_4 takes nothing returns nothing
set gg_trg_star_4=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_star_4, udg_times[1])
call TriggerAddAction(gg_trg_star_4, function Trig_star_4Actions)
endfunction
function Trig_qyzsgActions takes nothing returns nothing
set udg_danwei[10]=GetTriggerUnit()
call PlaySoundOnUnitBJ(gg_snd_ReviveHuman, 100, udg_danwei[10])
set udg_dian[16]=GetUnitLoc(udg_danwei[10])
set udg_zhengshu[31]=0
call StartTimerBJ(udg_jishiqi[4], true, 0.15)
endfunction
function InitTrig_qyzsg takes nothing returns nothing
set gg_trg_qyzsg=CreateTrigger()
call DisableTrigger(gg_trg_qyzsg)
call TriggerAddAction(gg_trg_qyzsg, function Trig_qyzsgActions)
endfunction
function Trig_qyzsg2Func002Func002A takes nothing returns nothing
set udg_danwei[138]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[138], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitAliveBJ(udg_danwei[138]) == true ) and ( IsUnitEnemy(udg_danwei[138], GetOwningPlayer(udg_danwei[10])) == false ) ) then
call SetUnitLifeBJ(udg_danwei[138], ( GetUnitState(udg_danwei[138], UNIT_STATE_LIFE) + 350.00 ))
else
endif
endfunction
function Trig_qyzsg2Func003Func001A takes nothing returns nothing
set udg_danwei[138]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[138], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitAliveBJ(udg_danwei[138]) == true ) and ( IsUnitEnemy(udg_danwei[138], GetOwningPlayer(udg_danwei[10])) == false ) ) then
call SetUnitLifeBJ(udg_danwei[138], ( GetUnitState(udg_danwei[138], UNIT_STATE_LIFE) + 350.00 ))
else
endif
endfunction
function Trig_qyzsg2Func004Func004A takes nothing returns nothing
set udg_danwei[138]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[138], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitAliveBJ(udg_danwei[138]) == true ) and ( IsUnitEnemy(udg_danwei[138], GetOwningPlayer(udg_danwei[10])) == false ) ) then
call SetUnitLifeBJ(udg_danwei[138], ( GetUnitState(udg_danwei[138], UNIT_STATE_LIFE) + 350.00 ))
else
endif
endfunction
function Trig_qyzsg2Func005Func004A takes nothing returns nothing
set udg_danwei[138]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[138], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitAliveBJ(udg_danwei[138]) == true ) and ( IsUnitEnemy(udg_danwei[138], GetOwningPlayer(udg_danwei[10])) == false ) ) then
call SetUnitLifeBJ(udg_danwei[138], ( GetUnitState(udg_danwei[138], UNIT_STATE_LIFE) + 350.00 ))
else
endif
endfunction
function Trig_qyzsg2Func006Func003A takes nothing returns nothing
set udg_danwei[138]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[138], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitAliveBJ(udg_danwei[138]) == true ) and ( IsUnitEnemy(udg_danwei[138], GetOwningPlayer(udg_danwei[10])) == false ) ) then
call SetUnitLifeBJ(udg_danwei[138], ( GetUnitState(udg_danwei[138], UNIT_STATE_LIFE) + 350.00 ))
else
endif
set udg_danwei[138]=null
endfunction
function Trig_qyzsg2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu[31]=( udg_zhengshu[31] + 1 )
if ( ( udg_zhengshu[31] == 1 ) ) then
set udg_danweizu[3]=YDWEGetUnitsInRangeOfLocAllNull(512 , udg_dian[16])
call ForGroupBJ(udg_danweizu[3], function Trig_qyzsg2Func002Func002A)
set udg_danwei[11]=bj_lastCreatedUnit
call UnitApplyTimedLife(udg_danwei[11], 0x42487765, 2.00)
set udg_danwei[11]=null
else
endif
if ( ( udg_zhengshu[31] == 3 ) ) then
call ForGroupBJ(udg_danweizu[3], function Trig_qyzsg2Func003Func001A)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=6
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_dian[17]=PolarProjectionBJ(udg_dian[16], 500.00, ( I2R(bj_forLoopAIndex) * 60.00 ))
call UnitApplyTimedLife(bj_lastCreatedUnit, 0x42487765, 2.00)
call RemoveLocation(udg_dian[17])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
else
endif
if ( ( udg_zhengshu[31] == 5 ) ) then
set udg_danwei[14]=bj_lastCreatedUnit
call UnitApplyTimedLife(udg_danwei[14], 0x42487765, 2.00)
set udg_danwei[14]=null
call ForGroupBJ(udg_danweizu[3], function Trig_qyzsg2Func004Func004A)
else
endif
if ( ( udg_zhengshu[31] == 7 ) ) then
set udg_danwei[15]=bj_lastCreatedUnit
call UnitApplyTimedLife(udg_danwei[15], 0x42487765, 2.00)
set udg_danwei[15]=null
call ForGroupBJ(udg_danweizu[3], function Trig_qyzsg2Func005Func004A)
else
endif
if ( ( udg_zhengshu[31] == 9 ) ) then
set udg_danwei[16]=bj_lastCreatedUnit
call UnitApplyTimedLife(udg_danwei[16], 0x42487765, 2.00)
call ForGroupBJ(udg_danweizu[3], function Trig_qyzsg2Func006Func003A)
set udg_danwei[16]=null
set udg_danwei[10]=null
call RemoveLocation(udg_dian[16])
call DestroyGroup(udg_danweizu[3])
call PauseTimerBJ(true, udg_jishiqi[4])
else
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_qyzsg2 takes nothing returns nothing
set gg_trg_qyzsg2=CreateTrigger()
call TriggerAddAction(gg_trg_qyzsg2, function Trig_qyzsg2Actions)
endfunction
function Trig_chifuActions takes nothing returns nothing
set udg_aXUNHUAN[44]=1
loop
exitwhen udg_aXUNHUAN[44] > 10
if ( ( udg_player[udg_aXUNHUAN[44]] != null ) ) then
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_player[udg_aXUNHUAN[44]] , 0x49303158)) == true ) and ( ( GetUnitLifePercent(udg_player[udg_aXUNHUAN[44]]) + 15.00 ) < udg_shishu2[( 310 + udg_aXUNHUAN[44] )] ) and ( udg_shishu2[( 310 + udg_aXUNHUAN[44] )] > 0.00 ) ) then
call SetUnitLifeBJ(udg_player[udg_aXUNHUAN[44]], RMinBJ(( GetUnitState(udg_player[udg_aXUNHUAN[44]], UNIT_STATE_LIFE) + 250.00 ), udg_shishu2[( 300 + udg_aXUNHUAN[44] )]))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl", udg_player[udg_aXUNHUAN[44]], "origin"))
else
endif
if ( ( GetUnitLifePercent(udg_player[udg_aXUNHUAN[44]]) > udg_shishu2[( 310 + udg_aXUNHUAN[44] )] ) and ( udg_shishu2[( 310 + udg_aXUNHUAN[44] )] > 0.00 ) ) then
if ( ( UnitHasBuffBJ(udg_player[udg_aXUNHUAN[44]], 0x42303332) == true ) ) then
call SetUnitLifeBJ(udg_player[udg_aXUNHUAN[44]], ( GetUnitState(udg_player[udg_aXUNHUAN[44]], UNIT_STATE_LIFE) + ( ( GetUnitState(udg_player[udg_aXUNHUAN[44]], UNIT_STATE_LIFE) - udg_shishu2[( 300 + udg_aXUNHUAN[44] )] ) * 0.20 ) ))
else
if ( ( UnitHasBuffBJ(udg_player[udg_aXUNHUAN[44]], 0x42303331) == true ) ) then
call SetUnitLifeBJ(udg_player[udg_aXUNHUAN[44]], ( GetUnitState(udg_player[udg_aXUNHUAN[44]], UNIT_STATE_LIFE) + ( ( GetUnitState(udg_player[udg_aXUNHUAN[44]], UNIT_STATE_LIFE) - udg_shishu2[( 300 + udg_aXUNHUAN[44] )] ) * 0.10 ) ))
else
endif
endif
else
endif
if ( ( GetUnitLifePercent(udg_player[udg_aXUNHUAN[44]]) > udg_shishu2[( 310 + udg_aXUNHUAN[44] )] ) and ( udg_shishu2[( 310 + udg_aXUNHUAN[44] )] > 0.00 ) and ( UnitHasBuffBJ(udg_player[udg_aXUNHUAN[44]], 0x42303235) == true ) ) then
call SetUnitLifeBJ(udg_player[udg_aXUNHUAN[44]], udg_shishu2[( 300 + udg_aXUNHUAN[44] )])
else
endif
if ( ( UnitHasBuffBJ(udg_player[udg_aXUNHUAN[44]], 0x42303236) == true ) ) then
if ( ( GetUnitLifePercent(udg_player[udg_aXUNHUAN[44]]) < udg_shishu2[( 310 + udg_aXUNHUAN[44] )] ) and ( udg_shishu2[( 310 + udg_aXUNHUAN[44] )] > 0.00 ) ) then
call SetUnitLifeBJ(udg_player[udg_aXUNHUAN[44]], RMaxBJ(( GetUnitState(udg_player[udg_aXUNHUAN[44]], UNIT_STATE_LIFE) - ( ( udg_shishu2[( 300 + udg_aXUNHUAN[44] )] - GetUnitState(udg_player[udg_aXUNHUAN[44]], UNIT_STATE_LIFE) ) * 0.20 ) ), 1.00))
else
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\BlackArrow\\BlackArrowMissile.mdl", udg_player[udg_aXUNHUAN[44]], "chest"))
else
endif
set udg_shishu2[( 300 + udg_aXUNHUAN[44] )]=GetUnitState(udg_player[udg_aXUNHUAN[44]], UNIT_STATE_LIFE)
set udg_shishu2[( 310 + udg_aXUNHUAN[44] )]=GetUnitLifePercent(udg_player[udg_aXUNHUAN[44]])
else
endif
set udg_aXUNHUAN[44]=udg_aXUNHUAN[44] + 1
endloop
endfunction
function InitTrig_chifu takes nothing returns nothing
set gg_trg_chifu=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_chifu, 0.10)
call TriggerAddAction(gg_trg_chifu, function Trig_chifuActions)
endfunction
function Trig_chifu2Actions takes nothing returns nothing
if ( ( GetUnitAbilityLevel(udg_jianzhu[2], 0x41304A53) != 1 ) ) then
call SetUnitLifeBJ(udg_jianzhu[2], ( GetUnitState(udg_jianzhu[2], UNIT_STATE_LIFE) + 2.00 ))
else
endif
if ( ( GetUnitAbilityLevel(udg_jianzhu[3], 0x41304A53) != 1 ) ) then
call SetUnitLifeBJ(udg_jianzhu[3], ( GetUnitState(udg_jianzhu[3], UNIT_STATE_LIFE) + 2.00 ))
else
endif
if ( ( GetUnitAbilityLevel(udg_jianzhu[4], 0x41304A53) != 1 ) ) then
call SetUnitLifeBJ(udg_jianzhu[4], ( GetUnitState(udg_jianzhu[4], UNIT_STATE_LIFE) + 2.00 ))
else
endif
if ( ( GetUnitAbilityLevel(udg_jianzhu[5], 0x41304A53) != 1 ) ) then
call SetUnitLifeBJ(udg_jianzhu[5], ( GetUnitState(udg_jianzhu[5], UNIT_STATE_LIFE) + 2.00 ))
else
endif
set udg_aXUNHUAN[45]=1
loop
exitwhen udg_aXUNHUAN[45] > 10
if ( ( udg_player[udg_aXUNHUAN[45]] != null ) ) then
set udg_Shishu[0]=0.00
set udg_aXUNHUAN[46]=1
loop
exitwhen udg_aXUNHUAN[46] > 10
if ( ( GetItemTypeId(UnitItemInSlotBJ(udg_player[udg_aXUNHUAN[45]], udg_aXUNHUAN[46])) == 0x726C6966 ) ) then
set udg_Shishu[0]=( udg_Shishu[0] + 4.00 )
else
endif
set udg_aXUNHUAN[46]=udg_aXUNHUAN[46] + 1
endloop
set udg_aXUNHUAN[46]=1
loop
exitwhen udg_aXUNHUAN[46] > 10
if ( ( GetItemTypeId(UnitItemInSlotBJ(udg_player[udg_aXUNHUAN[45]], udg_aXUNHUAN[46])) == 0x49303435 ) ) then
set udg_Shishu[0]=( udg_Shishu[0] + 5.00 )
else
endif
set udg_aXUNHUAN[46]=udg_aXUNHUAN[46] + 1
endloop
set udg_aXUNHUAN[46]=1
loop
exitwhen udg_aXUNHUAN[46] > 10
if ( ( GetItemTypeId(UnitItemInSlotBJ(udg_player[udg_aXUNHUAN[45]], udg_aXUNHUAN[46])) == 0x4930344A ) ) then
set udg_Shishu[0]=( udg_Shishu[0] + 5.00 )
else
endif
set udg_aXUNHUAN[46]=udg_aXUNHUAN[46] + 1
endloop
set udg_aXUNHUAN[46]=1
loop
exitwhen udg_aXUNHUAN[46] > 6
if ( ( GetItemTypeId(UnitItemInSlotBJ(udg_player[udg_aXUNHUAN[45]], udg_aXUNHUAN[46])) == 0x49303036 ) ) then
set udg_Shishu[0]=( udg_Shishu[0] + 6.00 )
else
endif
set udg_aXUNHUAN[46]=udg_aXUNHUAN[46] + 1
endloop
set udg_aXUNHUAN[46]=1
loop
exitwhen udg_aXUNHUAN[46] > 6
if ( ( GetItemTypeId(UnitItemInSlotBJ(udg_player[udg_aXUNHUAN[45]], udg_aXUNHUAN[46])) == 0x49303035 ) ) then
set udg_Shishu[0]=( udg_Shishu[0] + 7.00 )
else
endif
set udg_aXUNHUAN[46]=udg_aXUNHUAN[46] + 1
endloop
set udg_aXUNHUAN[46]=1
loop
exitwhen udg_aXUNHUAN[46] > 6
if ( ( GetItemTypeId(UnitItemInSlotBJ(udg_player[udg_aXUNHUAN[45]], udg_aXUNHUAN[46])) == 0x4930334B ) ) then
set udg_Shishu[0]=( udg_Shishu[0] + 8.00 )
else
endif
set udg_aXUNHUAN[46]=udg_aXUNHUAN[46] + 1
endloop
set udg_aXUNHUAN[46]=1
loop
exitwhen udg_aXUNHUAN[46] > 6
if ( ( GetItemTypeId(UnitItemInSlotBJ(udg_player[udg_aXUNHUAN[45]], udg_aXUNHUAN[46])) == 0x49303055 ) ) then
set udg_Shishu[0]=( udg_Shishu[0] + 8.00 )
else
endif
set udg_aXUNHUAN[46]=udg_aXUNHUAN[46] + 1
endloop
set udg_aXUNHUAN[46]=1
loop
exitwhen udg_aXUNHUAN[46] > 6
if ( ( GetItemTypeId(UnitItemInSlotBJ(udg_player[udg_aXUNHUAN[45]], udg_aXUNHUAN[46])) == 0x49303237 ) ) then
set udg_Shishu[0]=( udg_Shishu[0] + 7.50 )
else
endif
set udg_aXUNHUAN[46]=udg_aXUNHUAN[46] + 1
endloop
set udg_aXUNHUAN[46]=1
loop
exitwhen udg_aXUNHUAN[46] > 6
if ( ( GetItemTypeId(UnitItemInSlotBJ(udg_player[udg_aXUNHUAN[45]], udg_aXUNHUAN[46])) == 0x49303244 ) ) then
set udg_Shishu[0]=( udg_Shishu[0] + 7.50 )
else
endif
set udg_aXUNHUAN[46]=udg_aXUNHUAN[46] + 1
endloop
set udg_aXUNHUAN[46]=1
loop
exitwhen udg_aXUNHUAN[46] > 6
if ( ( GetItemTypeId(UnitItemInSlotBJ(udg_player[udg_aXUNHUAN[45]], udg_aXUNHUAN[46])) == 0x49303032 ) ) then
set udg_Shishu[0]=( udg_Shishu[0] + 10.00 )
else
endif
set udg_aXUNHUAN[46]=udg_aXUNHUAN[46] + 1
endloop
set udg_aXUNHUAN[46]=1
loop
exitwhen udg_aXUNHUAN[46] > 6
if ( ( GetItemTypeId(UnitItemInSlotBJ(udg_player[udg_aXUNHUAN[45]], udg_aXUNHUAN[46])) == 0x61727368 ) ) then
set udg_Shishu[0]=( udg_Shishu[0] + 5.00 )
else
endif
set udg_aXUNHUAN[46]=udg_aXUNHUAN[46] + 1
endloop
set udg_aXUNHUAN[46]=1
loop
exitwhen udg_aXUNHUAN[46] > 6
if ( ( GetItemTypeId(UnitItemInSlotBJ(udg_player[udg_aXUNHUAN[45]], udg_aXUNHUAN[46])) == 0x49303155 ) ) then
set udg_Shishu[0]=( udg_Shishu[0] + 10.00 )
else
endif
set udg_aXUNHUAN[46]=udg_aXUNHUAN[46] + 1
endloop
set udg_aXUNHUAN[46]=1
loop
exitwhen udg_aXUNHUAN[46] > 6
if ( ( GetItemTypeId(UnitItemInSlotBJ(udg_player[udg_aXUNHUAN[45]], udg_aXUNHUAN[46])) == 0x72617463 ) ) then
set udg_Shishu[0]=( udg_Shishu[0] + 12.00 )
else
endif
set udg_aXUNHUAN[46]=udg_aXUNHUAN[46] + 1
endloop
set udg_aXUNHUAN[46]=1
loop
exitwhen udg_aXUNHUAN[46] > 6
if ( ( GetItemTypeId(UnitItemInSlotBJ(udg_player[udg_aXUNHUAN[45]], udg_aXUNHUAN[46])) == 0x49303332 ) ) then
set udg_Shishu[0]=( udg_Shishu[0] + 12.00 )
else
endif
set udg_aXUNHUAN[46]=udg_aXUNHUAN[46] + 1
endloop
set udg_aXUNHUAN[46]=1
loop
exitwhen udg_aXUNHUAN[46] > 6
if ( ( GetItemTypeId(UnitItemInSlotBJ(udg_player[udg_aXUNHUAN[45]], udg_aXUNHUAN[46])) == 0x6F666C67 ) ) then
set udg_Shishu[0]=( udg_Shishu[0] + 15.00 )
else
endif
set udg_aXUNHUAN[46]=udg_aXUNHUAN[46] + 1
endloop
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_player[udg_aXUNHUAN[45]] , 0x49303448)) == true ) and ( GetUnitLifePercent(udg_player[udg_aXUNHUAN[45]]) <= 25.00 ) ) then
set udg_Shishu[0]=( udg_Shishu[0] + ( GetUnitState(udg_player[udg_aXUNHUAN[45]], UNIT_STATE_MAX_LIFE) * 0.01 ) )
else
endif
if ( ( UnitHasBuffBJ(udg_player[udg_aXUNHUAN[45]], 0x42303332) == true ) ) then
set udg_Shishu[0]=( udg_Shishu[0] + ( GetUnitState(udg_player[udg_aXUNHUAN[45]], UNIT_STATE_MAX_MANA) / 200.00 ) )
else
if ( ( UnitHasBuffBJ(udg_player[udg_aXUNHUAN[45]], 0x42303331) == true ) ) then
set udg_Shishu[0]=( udg_Shishu[0] + ( GetUnitState(udg_player[udg_aXUNHUAN[45]], UNIT_STATE_MAX_MANA) / 250.00 ) )
else
endif
endif
if ( ( UnitHasBuffBJ(udg_player[udg_aXUNHUAN[45]], 0x42303347) == true ) ) then
set udg_Shishu[0]=0.00
set udg_Shishu[0]=( udg_Shishu[0] - 0.25 )
set udg_Shishu[0]=( udg_Shishu[0] - ( I2R(GetHeroStr(udg_player[udg_aXUNHUAN[45]], true)) * 0.05 ) )
else
endif
call SetUnitLifeBJ(udg_player[udg_aXUNHUAN[45]], RMaxBJ(( GetUnitState(udg_player[udg_aXUNHUAN[45]], UNIT_STATE_LIFE) + ( udg_Shishu[0] * 0.20 ) ), 1.00))
set udg_Shishu[0]=0.00
set udg_aXUNHUAN[46]=1
loop
exitwhen udg_aXUNHUAN[46] > 6
if ( ( GetItemTypeId(UnitItemInSlotBJ(udg_player[udg_aXUNHUAN[45]], udg_aXUNHUAN[46])) == 0x616D7263 ) ) then
set udg_Shishu[0]=( udg_Shishu[0] + 0.60 )
else
endif
set udg_aXUNHUAN[46]=udg_aXUNHUAN[46] + 1
endloop
set udg_aXUNHUAN[46]=1
loop
exitwhen udg_aXUNHUAN[46] > 6
if ( ( GetItemTypeId(UnitItemInSlotBJ(udg_player[udg_aXUNHUAN[45]], udg_aXUNHUAN[46])) == 0x4930304B ) ) then
set udg_Shishu[0]=( udg_Shishu[0] + 0.90 )
else
endif
set udg_aXUNHUAN[46]=udg_aXUNHUAN[46] + 1
endloop
set udg_aXUNHUAN[46]=1
loop
exitwhen udg_aXUNHUAN[46] > 6
if ( ( GetItemTypeId(UnitItemInSlotBJ(udg_player[udg_aXUNHUAN[45]], udg_aXUNHUAN[46])) == 0x4930314D ) ) then
set udg_Shishu[0]=( udg_Shishu[0] + 1.00 )
else
endif
set udg_aXUNHUAN[46]=udg_aXUNHUAN[46] + 1
endloop
set udg_aXUNHUAN[46]=1
loop
exitwhen udg_aXUNHUAN[46] > 6
if ( ( GetItemTypeId(UnitItemInSlotBJ(udg_player[udg_aXUNHUAN[45]], udg_aXUNHUAN[46])) == 0x49303439 ) ) then
set udg_Shishu[0]=( udg_Shishu[0] + 1.00 )
else
endif
set udg_aXUNHUAN[46]=udg_aXUNHUAN[46] + 1
endloop
set udg_aXUNHUAN[46]=1
loop
exitwhen udg_aXUNHUAN[46] > 6
if ( ( GetItemTypeId(UnitItemInSlotBJ(udg_player[udg_aXUNHUAN[45]], udg_aXUNHUAN[46])) == 0x49303159 ) ) then
set udg_Shishu[0]=( udg_Shishu[0] + 2.00 )
else
endif
set udg_aXUNHUAN[46]=udg_aXUNHUAN[46] + 1
endloop
set udg_aXUNHUAN[46]=1
loop
exitwhen udg_aXUNHUAN[46] > 6
if ( ( GetItemTypeId(UnitItemInSlotBJ(udg_player[udg_aXUNHUAN[45]], udg_aXUNHUAN[46])) == 0x6A64726E ) ) then
set udg_Shishu[0]=( udg_Shishu[0] + 1.00 )
else
endif
set udg_aXUNHUAN[46]=udg_aXUNHUAN[46] + 1
endloop
set udg_aXUNHUAN[46]=1
loop
exitwhen udg_aXUNHUAN[46] > 6
if ( ( GetItemTypeId(UnitItemInSlotBJ(udg_player[udg_aXUNHUAN[45]], udg_aXUNHUAN[46])) == 0x4930304C ) ) then
set udg_Shishu[0]=( udg_Shishu[0] + 1.00 )
else
endif
set udg_aXUNHUAN[46]=udg_aXUNHUAN[46] + 1
endloop
set udg_aXUNHUAN[46]=1
loop
exitwhen udg_aXUNHUAN[46] > 6
if ( ( GetItemTypeId(UnitItemInSlotBJ(udg_player[udg_aXUNHUAN[45]], udg_aXUNHUAN[46])) == 0x49303359 ) ) then
set udg_Shishu[0]=( udg_Shishu[0] + 1.00 )
else
endif
set udg_aXUNHUAN[46]=udg_aXUNHUAN[46] + 1
endloop
set udg_aXUNHUAN[46]=1
loop
exitwhen udg_aXUNHUAN[46] > 6
if ( ( GetItemTypeId(UnitItemInSlotBJ(udg_player[udg_aXUNHUAN[45]], udg_aXUNHUAN[46])) == 0x6F666C67 ) ) then
set udg_Shishu[0]=( udg_Shishu[0] + 2.00 )
else
endif
set udg_aXUNHUAN[46]=udg_aXUNHUAN[46] + 1
endloop
if ( ( UnitHasBuffBJ(udg_player[udg_aXUNHUAN[45]], 0x42303332) == true ) ) then
set udg_Shishu[0]=( udg_Shishu[0] + ( GetUnitState(udg_player[udg_aXUNHUAN[45]], UNIT_STATE_MAX_LIFE) / 500.00 ) )
else
if ( ( UnitHasBuffBJ(udg_player[udg_aXUNHUAN[45]], 0x42303331) == true ) ) then
set udg_Shishu[0]=( udg_Shishu[0] + ( GetUnitState(udg_player[udg_aXUNHUAN[45]], UNIT_STATE_MAX_LIFE) / 600.00 ) )
else
endif
endif
set udg_aXUNHUAN[46]=1
loop
exitwhen udg_aXUNHUAN[46] > 6
if ( ( GetItemTypeId(UnitItemInSlotBJ(udg_player[udg_aXUNHUAN[45]], udg_aXUNHUAN[46])) == 0x49303353 ) ) then
set udg_Shishu[0]=( udg_Shishu[0] + 2.00 )
else
endif
set udg_aXUNHUAN[46]=udg_aXUNHUAN[46] + 1
endloop
set udg_aXUNHUAN[46]=1
loop
exitwhen udg_aXUNHUAN[46] > 6
if ( ( GetItemTypeId(UnitItemInSlotBJ(udg_player[udg_aXUNHUAN[45]], udg_aXUNHUAN[46])) == 0x4930335A ) ) then
set udg_Shishu[0]=( udg_Shishu[0] + 3.00 )
else
endif
set udg_aXUNHUAN[46]=udg_aXUNHUAN[46] + 1
endloop
if ( ( UnitHasBuffBJ(udg_player[udg_aXUNHUAN[45]], 0x42303347) == true ) ) then
set udg_Shishu[0]=0.00
set udg_Shishu[0]=( udg_Shishu[0] - 0.50 )
set udg_Shishu[0]=( udg_Shishu[0] - ( I2R(GetHeroInt(udg_player[udg_aXUNHUAN[45]], true)) * 0.02 ) )
else
endif
call SetUnitManaBJ(udg_player[udg_aXUNHUAN[45]], ( GetUnitState(udg_player[udg_aXUNHUAN[45]], UNIT_STATE_MANA) + ( udg_Shishu[0] * 0.20 ) ))
else
endif
set udg_aXUNHUAN[45]=udg_aXUNHUAN[45] + 1
endloop
endfunction
function InitTrig_chifu2 takes nothing returns nothing
set gg_trg_chifu2=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_chifu2, 0.20)
call TriggerAddAction(gg_trg_chifu2, function Trig_chifu2Actions)
endfunction
function Trig_syslzjConditions takes nothing returns boolean
return ( ( ( GetSpellAbilityId() == 0x41303344 ) or ( GetSpellAbilityId() == 0x41304930 ) ) )
endfunction
function Trig_syslzjActions takes nothing returns nothing
set udg_danwei[18]=GetTriggerUnit()
set udg_dian[19]=GetUnitLoc(udg_danwei[18])
set udg_dian[18]=GetSpellTargetLoc()
set udg_zhengshu[32]=0
if ( ( GetUnitAbilityLevel(udg_danwei[18], 0x41304535) == 1 ) and ( udg_Zhengshu[41] == 0 ) ) then
set udg_zhengshu2[282]=500
else
endif
call SetSoundPosition(gg_snd_Excalibur, GetLocationX(udg_dian[19]), GetLocationY(udg_dian[19]), 500.00)
call PlaySoundBJ(gg_snd_Excalibur)
call StartTimerBJ(udg_jishiqi[5], true, 0.04)
call SetUnitAnimationByIndex(udg_danwei[18], 15)
set udg_Danwei[37]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[18]), 0x65303649, udg_dian[19], 270.00)
call SetUnitManaBJ(udg_Danwei[37], 255.00)
call SetUnitColor(udg_Danwei[37], PLAYER_COLOR_YELLOW)
call SetUnitTimeScale(udg_Danwei[37], ( 1.00 / 1.60 ))
call GroupAddUnit(udg_Danweizu[37], udg_Danwei[37])
set udg_Danwei[37]=null
call StartTimerBJ(udg_jishiqi[145], false, 0.00)
endfunction
function InitTrig_syslzj takes nothing returns nothing
set gg_trg_syslzj=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_syslzj, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_syslzj, Condition(function Trig_syslzjConditions))
call TriggerAddAction(gg_trg_syslzj, function Trig_syslzjActions)
endfunction
function Trig_syslzj2Func003Func001A takes nothing returns nothing
set udg_Danwei[37]=GetEnumUnit()
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[37])) + 1 ) == ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei[18])) + 1 ) ) ) then
call SetUnitTimeScale(udg_Danwei[37], 0.00)
call SetUnitManaBJ(udg_Danwei[37], 250.00)
else
endif
set udg_Danwei[37]=null
endfunction
function Trig_syslzj2Func003Func005Func003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei[18])) == true ) ) then
call GroupAddUnit(udg_danweizu[5], udg_danwei2[1])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_syslzj2Func003Func006A takes nothing returns nothing
set udg_danwei[139]=GetEnumUnit()
if ( ( ( YDWEUnitHasItemOfTypeBJNull(udg_danwei2[18] , 0x72617466) == true ) or ( YDWEUnitHasItemOfTypeBJNull(udg_danwei2[18] , 0x49303453) == true ) ) ) then
call UnitDamageTargetBJ(udg_danwei[18], udg_danwei[139], ( ( - 100.00 + ( 200.00 * I2R(IMaxBJ(GetUnitAbilityLevel(udg_danwei[18], 0x41303344), GetUnitAbilityLevel(udg_danwei[18], 0x41304930))) ) ) + ( 5.00 * I2R(GetHeroAgi(udg_danwei[18], true)) ) ), ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED)
else
call UnitDamageTargetBJ(udg_danwei[18], udg_danwei[139], ( ( - 100.00 + ( 200.00 * I2R(IMaxBJ(GetUnitAbilityLevel(udg_danwei[18], 0x41303344), GetUnitAbilityLevel(udg_danwei[18], 0x41304930))) ) ) + ( 5.00 * I2R(GetHeroAgi(udg_danwei[18], true)) ) ), ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC)
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SteamTank\\SteamTankImpact.mdl", udg_danwei[139], "chest"))
set udg_danwei[139]=null
endfunction
function Trig_syslzj2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu[32]=( udg_zhengshu[32] + 1 )
if ( ( udg_zhengshu[32] <= 30 ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei[18])
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=2
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_zhengshuex[0]=GetRandomInt(- 90, 90)
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], ( 150.00 * CosBJ(I2R(udg_zhengshuex[0])) ), GetRandomReal(0, 360.00))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[18]), 0x65303633, udg_dian2[1], AngleBetweenPoints(udg_dian2[1], udg_dian2[0]))
call s__maphack_SetHeight(udg_danwei2[1] , ( ( 150.00 + ( 150.00 * SinBJ(I2R(udg_zhengshuex[0])) ) ) * 1.00 ) , 0.00)
call GroupAddUnit(udg_danweizu2[393], udg_danwei2[1])
call SetUnitManaBJ(udg_danwei2[1], ( 100.00 + I2R(udg_zhengshuex[0]) ))
call SetUnitUserData(udg_danwei2[1], 10)
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[1])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call RemoveLocation(udg_dian2[0])
if ( ( udg_zhengshu[32] == 2 ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Invisibility\\InvisibilityTarget.mdl", udg_danwei[18], "hand"))
else
endif
if ( ( udg_zhengshu[32] == 30 ) ) then
call StopSoundBJ(gg_snd_ZigguratMissileLaunch301, false)
call PlaySoundAtPointBJ(gg_snd_ZigguratMissileLaunch301, 100, udg_dian[19], 400.00)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=3
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_dian2[1]=PolarProjectionBJ(udg_dian[19], ( 100.00 * I2R(bj_forLoopAIndex) ), AngleBetweenPoints(udg_dian[19], udg_dian[18]))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[18]), 0x65303036, udg_dian2[1], AngleBetweenPoints(udg_dian[19], udg_dian[18]))
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 3.00)
set udg_danwei2[1]=null
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[18]), 0x65303634, udg_dian2[1], AngleBetweenPoints(udg_dian[19], udg_dian[18]))
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 3.00)
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[1])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call SetUnitAnimationByIndex(udg_danwei[18], 16)
else
endif
else
endif
if ( ( udg_zhengshu[32] == 40 ) ) then
call ForGroupBJ(udg_Danweizu[37], function Trig_syslzj2Func003Func001A)
call StopSoundBJ(gg_snd_NightElfBuildingDeathSmall1, false)
call PlaySoundAtPointBJ(gg_snd_NightElfBuildingDeathSmall1, 100, udg_dian[19], 400.00)
set udg_danweizu[5]=CreateGroup()
set udg_aXUNHUAN[47]=1
loop
exitwhen udg_aXUNHUAN[47] > 20
set udg_dian2[1]=PolarProjectionBJ(udg_dian[19], ( 150.00 + ( 100.00 * I2R(udg_aXUNHUAN[47]) ) ), AngleBetweenPoints(udg_dian[19], udg_dian[18]))
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(RMaxBJ(( 500.00 - ( 40.00 * I2R(udg_aXUNHUAN[47]) ) ), 200.00) , udg_dian2[1])
call ForGroupBJ(udg_xuanqu, function Trig_syslzj2Func003Func005Func003A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[1])
set udg_aXUNHUAN[47]=udg_aXUNHUAN[47] + 1
endloop
call ForGroupBJ(udg_danweizu[5], function Trig_syslzj2Func003Func006A)
call DestroyGroup(udg_danweizu[5])
else
endif
if ( ( udg_zhengshu[32] == 40 ) ) then
call PauseTimer(udg_jishiqi[5])
set udg_danwei[18]=null
call RemoveLocation(udg_dian[18])
call RemoveLocation(udg_dian[19])
set udg_zhengshu[32]=0
else
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_syslzj2 takes nothing returns nothing
set gg_trg_syslzj2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_syslzj2, udg_jishiqi[5])
call TriggerAddAction(gg_trg_syslzj2, function Trig_syslzj2Actions)
endfunction
function Trig_syslzj_3Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[393]) == false ) )
endfunction
function Trig_syslzj_3Func001A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
if ( ( GetUnitUserData(udg_danwei2[0]) > 0 ) and ( IsTerrainPathableBJ(udg_dian2[0], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
call s__maphack_SetHeight(udg_danwei2[0] , ( s__maphack_GetHeight(udg_danwei2[0]) - ( 15.00 * SinBJ(( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) - 100.00 )) ) ) , 0.00)
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], ( 15.00 * CosBJ(( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) - 100.00 )) ), GetUnitFacing(udg_danwei2[0]))
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
call RemoveLocation(udg_dian2[1])
else
call KillUnit(udg_danwei2[0])
call GroupRemoveUnit(udg_danweizu2[393], udg_danwei2[0])
endif
call RemoveLocation(udg_dian2[0])
set udg_danwei2[0]=null
endfunction
function Trig_syslzj_3Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[393], function Trig_syslzj_3Func001A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_syslzj_3 takes nothing returns nothing
set gg_trg_syslzj_3=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_syslzj_3, 0.04)
call TriggerAddCondition(gg_trg_syslzj_3, Condition(function Trig_syslzj_3Conditions))
call TriggerAddAction(gg_trg_syslzj_3, function Trig_syslzj_3Actions)
endfunction
function Trig_syslzj_4Actions takes nothing returns nothing
set udg_Dian[89]=GetUnitLoc(udg_danwei[18])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[18]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304B57)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_danwei[18])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
call SetUnitAnimationByIndex(udg_danwei[18], 15)
endfunction
function InitTrig_syslzj_4 takes nothing returns nothing
set gg_trg_syslzj_4=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_syslzj_4, udg_jishiqi[145])
call TriggerAddAction(gg_trg_syslzj_4, function Trig_syslzj_4Actions)
endfunction
function Trig_fwjjConditions takes nothing returns boolean
return ( ( ( GetSpellAbilityId() == 0x41303141 ) or ( GetSpellAbilityId() == 0x41304534 ) ) )
endfunction
function Trig_fwjjActions takes nothing returns nothing
set udg_danwei[22]=GetTriggerUnit()
set udg_dian[21]=GetSpellTargetLoc()
set udg_dian[22]=GetUnitLoc(GetTriggerUnit())
set udg_dian[142]=PolarProjectionBJ(udg_dian[21], 256, 0.00)
set udg_dian[143]=PolarProjectionBJ(udg_dian[21], 256, 90.00)
set udg_dian[144]=PolarProjectionBJ(udg_dian[21], 256, 180.00)
set udg_dian[145]=PolarProjectionBJ(udg_dian[21], 256, 270.00)
call StartTimerBJ(udg_jishiqi[7], false, 0.00)
set udg_zhengshu2[350]=21
endfunction
function InitTrig_fwjj takes nothing returns nothing
set gg_trg_fwjj=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_fwjj, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_fwjj, Condition(function Trig_fwjjConditions))
call TriggerAddAction(gg_trg_fwjj, function Trig_fwjjActions)
endfunction
function Trig_fwjj2Actions takes nothing returns nothing
if ( ( udg_zhengshu2[350] > 0 ) and ( IsUnitType(udg_danwei[22], UNIT_TYPE_DEAD) == false ) ) then
if ( ( udg_zhengshu2[350] == 21 ) ) then
set udg_Dian[89]=GetUnitLoc(udg_danwei[22])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[22]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304B4F)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_danwei[22])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
call SetUnitAnimationByIndex(udg_danwei[22], 9)
call StartTimerBJ(udg_jishiqi[7], true, 0.03)
set udg_zhengshu2[350]=( udg_zhengshu2[350] - 1 )
else
if ( ( IsUnitPausedBJ(udg_danwei[22]) == false ) ) then
if ( ( udg_zhengshu2[350] > 10 ) ) then
set udg_dian[23]=GetUnitLoc(udg_danwei[22])
set udg_dian[24]=PolarProjectionBJ(udg_dian[23], ( ( DistanceBetweenPoints(udg_dian[22], udg_dian[21]) - 150.00 ) / 10.00 ), AngleBetweenPoints(udg_dian[22], udg_dian[21]))
call SetUnitX(udg_danwei[22], GetLocationX(udg_dian[24]))
call SetUnitY(udg_danwei[22], GetLocationY(udg_dian[24]))
call RemoveLocation(udg_dian[23])
call RemoveLocation(udg_dian[24])
call UnitAddAbility(udg_danwei[22], 0x41726176)
call s__maphack_SetHeight(udg_danwei[22] , ( s__maphack_GetHeight(udg_danwei[22]) + ( I2R(( 21 - udg_zhengshu2[350] )) * ( 400.00 / 55.00 ) ) ) , 0.00)
call UnitRemoveAbility(udg_danwei[22], 0x41726176)
set udg_zhengshu2[350]=( udg_zhengshu2[350] - 1 )
else
if ( ( udg_zhengshu2[350] > 5 ) ) then
else
set udg_dian[23]=GetUnitLoc(udg_danwei[22])
set udg_dian[24]=PolarProjectionBJ(udg_dian[23], 20.00, AngleBetweenPoints(udg_dian[22], udg_dian[21]))
call SetUnitX(udg_danwei[22], GetLocationX(udg_dian[24]))
call SetUnitY(udg_danwei[22], GetLocationY(udg_dian[24]))
call RemoveLocation(udg_dian[23])
call RemoveLocation(udg_dian[24])
call UnitAddAbility(udg_danwei[22], 0x41726176)
call s__maphack_SetHeight(udg_danwei[22] , ( s__maphack_GetHeight(udg_danwei[22]) - 80.00 ) , 0.00)
call UnitRemoveAbility(udg_danwei[22], 0x41726176)
endif
set udg_zhengshu2[350]=( udg_zhengshu2[350] - 1 )
endif
else
endif
endif
else
call PauseTimerBJ(true, udg_jishiqi[7])
call StartTimerBJ(udg_jishiqi[6], false, 0.00)
endif
endfunction
function InitTrig_fwjj2 takes nothing returns nothing
set gg_trg_fwjj2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_fwjj2, udg_jishiqi[7])
call TriggerAddAction(gg_trg_fwjj2, function Trig_fwjj2Actions)
endfunction
function Trig_fwjj3Func001Func021A takes nothing returns nothing
set udg_danwei[140]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[140], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei[140], udg_danweizu2[369]) == false ) and ( IsUnitAliveBJ(udg_danwei[140]) == true ) and ( IsUnitEnemy(udg_danwei[140], GetOwningPlayer(udg_danwei[22])) == true ) ) then
call s__baka_IssueTargetOrder2(udg_danwei[183] , "thunderbolt" , udg_danwei[140])
if ( ( GetUnitAbilityLevel(udg_danwei[22], 0x41304535) == 1 ) ) then
call UnitDamageTarget(udg_danwei[22], udg_danwei[140], ( ( ( 40.00 * I2R(IMaxBJ(GetUnitAbilityLevel(udg_danwei[22], 0x41303141), GetUnitAbilityLevel(udg_danwei[22], 0x41304534))) ) + ( 25.00 * I2R(GetUnitAbilityLevel(udg_danwei[22], 0x41304758)) ) ) + ( ( I2R(GetHeroAgi(udg_danwei[22], true)) * 2.50 ) + 25.00 ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
call UnitDamageTarget(udg_danwei[22], udg_danwei[140], ( ( ( 40.00 * I2R(IMaxBJ(GetUnitAbilityLevel(udg_danwei[22], 0x41303141), GetUnitAbilityLevel(udg_danwei[22], 0x41304534))) ) + 25.00 ) + ( I2R(GetHeroAgi(udg_danwei[22], true)) * 2.00 ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
endif
else
endif
set udg_danwei[140]=null
endfunction
function Trig_fwjj3Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( IsUnitType(udg_danwei[22], UNIT_TYPE_DEAD) == false ) ) then
set udg_danwei[23]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[22]), 0x65303037, PolarProjectionBJ(udg_dian[21], 0.00, 0), 0)
call UnitApplyTimedLife(udg_danwei[23], 0x42487765, 0.30)
set udg_danwei[24]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[22]), 0x65303037, PolarProjectionBJ(udg_dian[21], 0.00, 90.00), 0)
call UnitApplyTimedLife(udg_danwei[24], 0x42487765, 0.30)
set udg_danwei[25]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[22]), 0x65303037, PolarProjectionBJ(udg_dian[21], 0.00, 180.00), 0)
call UnitApplyTimedLife(udg_danwei[25], 0x42487765, 0.30)
set udg_danwei[26]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[22]), 0x65303037, PolarProjectionBJ(udg_dian[21], 0.00, 270.00), 0)
call UnitApplyTimedLife(udg_danwei[26], 0x42487765, 0.30)
call YDWEJumpTimer(udg_danwei[23] , AngleBetweenPoints(udg_dian[21], udg_dian[142]) , ( DistanceBetweenPoints(udg_dian[21], udg_dian[142]) + 256.00 ) , 0.25 , 0.05 , 0.00)
call YDWEJumpTimer(udg_danwei[24] , AngleBetweenPoints(udg_dian[21], udg_dian[143]) , ( DistanceBetweenPoints(udg_dian[21], udg_dian[143]) + 256.00 ) , 0.25 , 0.05 , 0.00)
call YDWEJumpTimer(udg_danwei[25] , AngleBetweenPoints(udg_dian[21], udg_dian[144]) , ( DistanceBetweenPoints(udg_dian[21], udg_dian[144]) + 256.00 ) , 0.25 , 0.05 , 0.00)
call YDWEJumpTimer(udg_danwei[26] , AngleBetweenPoints(udg_dian[21], udg_dian[145]) , ( DistanceBetweenPoints(udg_dian[21], udg_dian[145]) + 256.00 ) , 0.25 , 0.05 , 0.00)
call CreateNUnitsAtLoc(1, 0x65303038, GetOwningPlayer(udg_danwei[22]), udg_dian[21], bj_UNIT_FACING)
set udg_danwei[28]=bj_lastCreatedUnit
call UnitApplyTimedLife(udg_danwei[28], 0x42487765, 3.00)
set udg_danwei[183]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[22]), 0x65303130, udg_dian[21], 0)
call UnitApplyTimedLife(udg_danwei[183], 0x42487765, 0.50)
if ( ( GetUnitAbilityLevel(udg_danwei[22], 0x41304535) == 1 ) ) then
set udg_zhengshu2[282]=500
call UnitAddAbility(udg_danwei[183], 0x41303033)
else
call UnitAddAbility(udg_danwei[183], 0x41304449)
endif
set udg_danweizu[6]=YDWEGetUnitsInRangeOfLocAllNull(300.00 , udg_dian[21])
call ForGroupBJ(udg_danweizu[6], function Trig_fwjj3Func001Func021A)
set udg_danwei[183]=null
call PauseTimerBJ(true, udg_jishiqi[6])
set udg_aXUNHUAN[48]=1
loop
exitwhen udg_aXUNHUAN[48] > 3
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[22]), 0x65303550, udg_dian[21], ( 120.00 * I2R(udg_aXUNHUAN[48]) ))
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 3.00)
call SetUnitVertexColor(udg_danwei2[1], 255, 255, 255, 64)
call SetUnitAnimation(udg_danwei2[1], "stand")
call SetUnitTimeScale(udg_danwei2[1], ( 1.00 - 2.00 ))
set udg_danwei2[1]=null
set udg_aXUNHUAN[48]=udg_aXUNHUAN[48] + 1
endloop
call StartTimerBJ(udg_times[350], true, 0.04)
set udg_zhengshu2[350]=75
call DestroyGroup(udg_danweizu[6])
set udg_danwei[23]=null
set udg_danwei[24]=null
set udg_danwei[25]=null
set udg_danwei[26]=null
else
endif
set udg_danwei[28]=null
call RemoveLocation(udg_dian[22])
call RemoveLocation(udg_dian[142])
call RemoveLocation(udg_dian[143])
call RemoveLocation(udg_dian[144])
call RemoveLocation(udg_dian[145])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_fwjj3 takes nothing returns nothing
set gg_trg_fwjj3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_fwjj3, udg_jishiqi[6])
call TriggerAddAction(gg_trg_fwjj3, function Trig_fwjj3Actions)
endfunction
function Trig_fwjj4Func002Func003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei[22])) == true ) and ( DistanceBetweenPoints(udg_dian[21], udg_dian2[1]) >= 300.00 ) ) then
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], ( ( 460.00 - DistanceBetweenPoints(udg_dian[21], udg_dian2[1]) ) * 0.10 ), AngleBetweenPoints(udg_dian[21], udg_dian2[1]))
if ( ( IsTerrainPathableBJ(udg_dian2[2], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[2]))
else
endif
call RemoveLocation(udg_dian2[2])
else
endif
call RemoveLocation(udg_dian2[1])
set udg_danwei2[1]=null
endfunction
function Trig_fwjj4Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu2[350]=( udg_zhengshu2[350] - 1 )
if ( ( udg_zhengshu2[350] >= 0 ) ) then
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(450.00 , udg_dian[21])
call ForGroupBJ(udg_xuanqu, function Trig_fwjj4Func002Func003A)
call DestroyGroup(udg_xuanqu)
else
call ResetUnitAnimation(udg_danwei[22])
call PauseTimer(udg_times[350])
set udg_danwei[22]=null
call RemoveLocation(udg_dian[21])
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_fwjj4 takes nothing returns nothing
set gg_trg_fwjj4=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_fwjj4, udg_times[350])
call TriggerAddAction(gg_trg_fwjj4, function Trig_fwjj4Actions)
endfunction
function Trig_zjFunc003002003 takes nothing returns boolean
return ( ( ( IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == true ) and ( ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(udg_danwei[29])) == true ) and ( IsUnitAliveBJ(GetFilterUnit()) == true ) ) ) )
endfunction
function Trig_zjFunc004A takes nothing returns nothing
set udg_dian[24]=GetUnitLoc(GetEnumUnit())
set udg_danwei[182]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[29]), 0x65303130, udg_dian[24], 0)
call UnitApplyTimedLife(udg_danwei[182], 0x42487765, 3.00)
set udg_danwei[182]=null
call PingMinimapLocForForce(YDWEGetPlayersAlliesNull(GetOwningPlayer(udg_danwei[29])), udg_dian[24], 3.00)
call RemoveLocation(udg_dian[24])
endfunction
function Trig_zjActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei[29]=GetTriggerUnit()
set udg_dian[23]=GetUnitLoc(udg_danwei[29])
set udg_danweizu[7]=YDWEGetUnitsInRangeOfLocMatchingNull(( 750.00 + ( 450.00 * I2R(GetUnitAbilityLevel(udg_danwei[29], 0x41487463)) ) ) , udg_dian[23] , Condition(function Trig_zjFunc003002003))
call ForGroupBJ(udg_danweizu[7], function Trig_zjFunc004A)
call DestroyGroup(udg_danweizu[7])
call RemoveLocation(udg_dian[23])
set udg_danwei[29]=null
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_zj takes nothing returns nothing
set gg_trg_zj=CreateTrigger()
call TriggerAddAction(gg_trg_zj, function Trig_zjActions)
endfunction
function Trig_yylxxActions takes nothing returns nothing
set udg_danwei[30]=GetTriggerUnit()
set udg_dian[25]=GetUnitLoc(udg_danwei[30])
call PlaySoundOnUnitBJ(gg_snd_InvisibilityTarget, 100, udg_danwei[30])
set udg_danwei[31]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[30]), 0x6530304B, udg_dian[25], GetUnitFacing(udg_danwei[30]))
call StartTimerBJ(udg_jishiqi[8], true, 0.03)
call UnitAddAbility(udg_danwei[30], 0x41304630)
call UnitAddAbility(udg_danwei[30], 0x41304931)
set udg_Zhengshu[41]=0
call RemoveLocation(udg_dian[25])
set udg_piaofuwenzi[6]=CreateTextTag()
call SetTextTagTextBJ(udg_piaofuwenzi[6], ( "理想乡：" + R2SW(( ( 234.00 - I2R(udg_Zhengshu[41]) ) * 0.03 ), 1, 1) ), 11.00)
call SetTextTagPos(udg_piaofuwenzi[6], ( GetUnitX(udg_danwei[30]) - 45.00 ), GetUnitY(udg_danwei[30]), ( s__maphack_GetHeight(udg_danwei[30]) + 200.00 ))
call SetTextTagColor(udg_piaofuwenzi[6], 255, 255, 0, 255)
call SetTextTagVisibility(udg_piaofuwenzi[6], false)
set udg_wanjiazu[0]=CreateForce()
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ( ( IsUnitAlly(udg_danwei[30], s__baka_SPlayer(bj_forLoopAIndex - 1)) == true ) ) then
call ForceAddPlayer(udg_wanjiazu[0], s__baka_SPlayer(bj_forLoopAIndex - 1))
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call ShowTextTagForceBJ(true, udg_piaofuwenzi[6], udg_wanjiazu[0])
call DestroyForce(udg_wanjiazu[0])
endfunction
function InitTrig_yylxx takes nothing returns nothing
set gg_trg_yylxx=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_yylxx , 3 , 0x414F7732)
call TriggerAddAction(gg_trg_yylxx, function Trig_yylxxActions)
endfunction
function Trig_yylxx2Actions takes nothing returns nothing
if ( ( udg_Zhengshu[41] <= 233 ) and ( IsUnitType(udg_danwei[30], UNIT_TYPE_DEAD) == false ) ) then
if ( ( IsUnitPausedBJ(udg_danwei[30]) == false ) ) then
set udg_Zhengshu[41]=( udg_Zhengshu[41] + 1 )
call SetTextTagTextBJ(udg_piaofuwenzi[6], ( "理想乡：" + R2SW(( ( 234.00 - I2R(udg_Zhengshu[41]) ) * 0.03 ), 1, 1) ), 11.00)
call SetTextTagPos(udg_piaofuwenzi[6], ( GetUnitX(udg_danwei[30]) - 45.00 ), GetUnitY(udg_danwei[30]), ( s__maphack_GetHeight(udg_danwei[30]) + 200.00 ))
call SetUnitLifeBJ(udg_danwei[30], RMaxBJ(( GetUnitState(udg_danwei[30], UNIT_STATE_LIFE) + ( GetUnitState(udg_danwei[30], UNIT_STATE_MAX_LIFE) * ( 0.05 * 0.03 ) ) ), ( GetUnitState(udg_danwei[30], UNIT_STATE_MAX_LIFE) * 0.30 )))
call SetUnitManaBJ(udg_danwei[30], RMaxBJ(( GetUnitState(udg_danwei[30], UNIT_STATE_MANA) + ( GetUnitState(udg_danwei[30], UNIT_STATE_MAX_MANA) * ( 0.05 * 0.03 ) ) ), ( GetUnitState(udg_danwei[30], UNIT_STATE_MAX_MANA) * 0.30 )))
else
call SetUnitLifeBJ(udg_danwei[30], RMaxBJ(( GetUnitState(udg_danwei[30], UNIT_STATE_LIFE) + ( GetUnitState(udg_danwei[30], UNIT_STATE_MAX_LIFE) * ( 0.05 * 0.03 ) ) ), ( GetUnitState(udg_danwei[30], UNIT_STATE_MAX_LIFE) * 0.30 )))
call SetUnitManaBJ(udg_danwei[30], RMaxBJ(( GetUnitState(udg_danwei[30], UNIT_STATE_MANA) + ( GetUnitState(udg_danwei[30], UNIT_STATE_MAX_MANA) * ( 0.05 * 0.03 ) ) ), ( GetUnitState(udg_danwei[30], UNIT_STATE_MAX_MANA) * 0.30 )))
endif
set udg_dian[25]=GetUnitLoc(udg_danwei[30])
call SetUnitX(udg_danwei[31], GetLocationX(udg_dian[25]))
call SetUnitY(udg_danwei[31], GetLocationY(udg_dian[25]))
call RemoveLocation(udg_dian[25])
else
call SetTextTagPermanent(udg_piaofuwenzi[6], false)
call SetTextTagAge(udg_piaofuwenzi[6], 0)
call SetTextTagLifespan(udg_piaofuwenzi[6], 0.25)
call SetTextTagFadepoint(udg_piaofuwenzi[6], 0.10)
call PauseTimer(udg_jishiqi[8])
set udg_Zhengshu[41]=0
if ( ( udg_zhengshu2[282] == 0 ) ) then
call UnitRemoveAbility(udg_danwei[30], 0x41304931)
else
endif
if ( ( GetUnitAbilityLevel(udg_danwei[30], 0x41304859) == 1 ) ) then
else
endif
call UnitRemoveAbility(udg_danwei[30], 0x41304630)
call KillUnit(udg_danwei[31])
set udg_danwei[30]=null
set udg_danwei[31]=null
endif
endfunction
function InitTrig_yylxx2 takes nothing returns nothing
set gg_trg_yylxx2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_yylxx2, udg_jishiqi[8])
call TriggerAddAction(gg_trg_yylxx2, function Trig_yylxx2Actions)
endfunction
function Trig_yylxx3Actions takes nothing returns nothing
set udg_Danwei[40]=GetTriggerUnit()
set udg_Danwei[41]=GetSpellTargetUnit()
call StartTimerBJ(udg_Times[40], true, 0.03)
set udg_Zhengshu[40]=- 16
set udg_Dian[40]=GetUnitLoc(udg_Danwei[40])
set udg_Dian[41]=GetUnitLoc(udg_Danwei[41])
set udg_Dian[169]=GetUnitLoc(udg_Danwei[41])
set udg_Shishu[40]=( DistanceBetweenPoints(udg_Dian[40], udg_Dian[41]) - 100.00 )
set udg_Shishu[41]=AngleBetweenPoints(udg_Dian[40], udg_Dian[41])
call RemoveLocation(udg_Dian[40])
call RemoveLocation(udg_Dian[41])
call UnitAddAbility(udg_Danwei[40], 0x41304F43)
endfunction
function InitTrig_yylxx3 takes nothing returns nothing
set gg_trg_yylxx3=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_yylxx3 , 3 , 0x41304F44)
call TriggerAddAction(gg_trg_yylxx3, function Trig_yylxx3Actions)
endfunction
function Trig_yylxx4Func001Func011Func002Func016A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_Danweizu[42]) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_Danwei[40])) == true ) ) then
call GroupAddUnit(udg_Danweizu[42], udg_danwei2[1])
if ( ( ( YDWEUnitHasItemOfTypeBJNull(udg_Danwei[40] , 0x72617466) == true ) or ( YDWEUnitHasItemOfTypeBJNull(udg_Danwei[40] , 0x49303453) == true ) ) ) then
call UnitDamageTarget(udg_Danwei[40], udg_danwei2[1], ( 300.00 + ( 2.50 * I2R(GetHeroAgi(udg_Danwei[40], true)) ) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
else
call UnitDamageTarget(udg_Danwei[40], udg_danwei2[1], ( 300.00 + ( 2.50 * I2R(GetHeroAgi(udg_Danwei[40], true)) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
endif
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_yylxx4Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_Zhengshu[40] == - 16 ) ) then
set udg_Zhengshu[40]=( udg_Zhengshu[40] + 1 )
set udg_Dian[89]=GetUnitLoc(udg_Danwei[40])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[40]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304B4F)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_Danwei[40])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
call SetUnitAnimationByIndex(udg_Danwei[40], 7)
else
if ( ( udg_Zhengshu[40] <= 0 ) and ( IsUnitType(udg_Danwei[40], UNIT_TYPE_DEAD) == false ) ) then
if ( ( IsUnitPausedBJ(udg_Danwei[40]) == false ) ) then
set udg_Dian[40]=GetUnitLoc(udg_Danwei[40])
set udg_Dian[41]=GetUnitLoc(udg_Danwei[41])
if ( ( udg_Zhengshu[40] < 0 ) ) then
if ( ( udg_Zhengshu[41] > 0 ) and ( udg_Zhengshu[41] < 233 ) ) then
if ( ( udg_Zhengshu[40] < - 5 ) ) then
set udg_Dian[42]=PolarProjectionBJ(udg_Dian[40], ( udg_Shishu[40] / 10.00 ), AngleBetweenPoints(udg_Dian[40], udg_Dian[41]))
else
set udg_Dian[42]=PolarProjectionBJ(udg_Dian[40], 10.00, AngleBetweenPoints(udg_Dian[40], udg_Dian[41]))
endif
else
if ( ( udg_Zhengshu[40] < - 5 ) ) then
set udg_Dian[42]=PolarProjectionBJ(udg_Dian[40], ( udg_Shishu[40] / 10.00 ), udg_Shishu[41])
else
set udg_Dian[42]=PolarProjectionBJ(udg_Dian[40], 10.00, udg_Shishu[41])
endif
endif
call SetUnitX(udg_Danwei[40], GetLocationX(udg_Dian[42]))
call SetUnitY(udg_Danwei[40], GetLocationY(udg_Dian[42]))
call SetUnitFacing(udg_Danwei[40], AngleBetweenPoints(udg_Dian[40], udg_Dian[41]))
call RemoveLocation(udg_Dian[40])
call RemoveLocation(udg_Dian[41])
call RemoveLocation(udg_Dian[42])
else
call UnitRemoveAbility(udg_Danwei[40], 0x41304F43)
call PauseTimer(udg_Times[40])
if ( ( udg_Zhengshu[41] > 0 ) and ( udg_Zhengshu[41] < 233 ) ) then
call StartTimerBJ(udg_Times[40], true, 0.01)
call UnitDamageTarget(udg_Danwei[40], udg_Danwei[41], ( 300.00 + ( 2.50 * I2R(GetHeroAgi(udg_Danwei[40], true)) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_SLICE)
set udg_Danwei[85]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[40]), 0x65303130, udg_Dian[41], 0)
call UnitApplyTimedLife(udg_Danwei[85], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[85], 0x41304236)
call s__baka_IssueTargetOrder2(udg_Danwei[85] , "thunderbolt" , udg_Danwei[41])
set udg_Danwei[85]=null
call GroupAddUnit(udg_Danweizu[42], udg_Danwei[41])
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\NightElf\\NEDeathSmall\\NEDeathSmall.mdl", udg_Dian[41]))
else
if ( ( DistanceBetweenPoints(udg_Dian[41], udg_Dian[169]) <= 350.00 ) ) then
set udg_Danwei[85]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[40]), 0x65303130, udg_Dian[41], 0)
call UnitApplyTimedLife(udg_Danwei[85], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[85], 0x41304236)
call s__baka_IssueTargetOrder2(udg_Danwei[85] , "thunderbolt" , udg_Danwei[41])
set udg_Danwei[85]=null
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\NightElf\\NEDeathSmall\\NEDeathSmall.mdl", udg_Dian[41]))
if ( ( ( YDWEUnitHasItemOfTypeBJNull(udg_Danwei[40] , 0x72617466) == true ) or ( YDWEUnitHasItemOfTypeBJNull(udg_Danwei[40] , 0x49303453) == true ) ) ) then
call UnitDamageTarget(udg_Danwei[40], udg_Danwei[41], ( ( 25.00 + ( 35.00 * I2R(GetUnitAbilityLevel(udg_Danwei[40], 0x41304F44)) ) ) + ( 1.50 * I2R(GetHeroAgi(udg_Danwei[40], true)) ) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_HEAVY_SLICE)
else
call UnitDamageTarget(udg_Danwei[40], udg_Danwei[41], ( ( 25.00 + ( 35.00 * I2R(GetUnitAbilityLevel(udg_Danwei[40], 0x41304F44)) ) ) + ( 1.50 * I2R(GetHeroAgi(udg_Danwei[40], true)) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_SLICE)
endif
else
endif
call GroupClear(udg_Danweizu[42])
set udg_Danwei[40]=null
set udg_Danwei[41]=null
call RemoveLocation(udg_Dian[40])
call RemoveLocation(udg_Dian[41])
call RemoveLocation(udg_Dian[169])
endif
endif
set udg_Zhengshu[40]=( udg_Zhengshu[40] + 1 )
else
endif
else
if ( ( udg_Zhengshu[40] <= 20 ) and ( IsUnitType(udg_Danwei[40], UNIT_TYPE_DEAD) == false ) ) then
set udg_Dian[42]=PolarProjectionBJ(udg_Dian[40], ( 50.00 + ( 30.00 * I2R(udg_Zhengshu[40]) ) ), udg_Shishu[41])
set udg_Danwei[42]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[40]), 0x6530364B, udg_Dian[42], udg_Shishu[41])
call UnitApplyTimedLife(udg_Danwei[42], 0x42487765, 1.00)
call SetUnitScale(udg_Danwei[42], ( 0.30 + ( 0.10 * I2R(udg_Zhengshu[40]) ) ), ( 0.30 + ( 0.10 * I2R(udg_Zhengshu[40]) ) ), ( 0.30 + ( 0.10 * I2R(udg_Zhengshu[40]) ) ))
call SetUnitTimeScale(udg_Danwei[42], 0.00)
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\Incinerate\\FireLordDeathExplode.mdl", udg_Dian[42]))
set udg_Danwei[42]=null
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(250.00 , udg_Dian[42])
call ForGroupBJ(udg_xuanqu, function Trig_yylxx4Func001Func011Func002Func016A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_Dian[42])
set udg_Zhengshu[40]=( udg_Zhengshu[40] + 1 )
else
call GroupClear(udg_Danweizu[42])
call PauseTimer(udg_Times[40])
set udg_Danwei[40]=null
set udg_Danwei[41]=null
call RemoveLocation(udg_Dian[40])
call RemoveLocation(udg_Dian[41])
call RemoveLocation(udg_Dian[169])
endif
endif
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_yylxx4 takes nothing returns nothing
set gg_trg_yylxx4=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_yylxx4, udg_Times[40])
call TriggerAddAction(gg_trg_yylxx4, function Trig_yylxx4Actions)
endfunction
function Trig_molifangchu_1Actions takes nothing returns nothing
set udg_danwei2[282]=GetTriggerUnit()
set udg_zhengshu2[282]=0
set udg_dian2[0]=GetUnitLoc(udg_danwei2[282])
set udg_danwei2[283]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[282]), 0x65303535, udg_dian2[0], 0.00)
call UnitAddAbility(udg_danwei2[282], 0x41304535)
call UnitAddAbility(udg_danwei2[282], 0x41304931)
call SetUnitAbilityLevel(udg_danwei2[282], 0x4130485A, GetUnitAbilityLevel(udg_danwei2[282], 0x41304758))
call StartTimerBJ(udg_times[282], true, 0.03)
call RemoveLocation(udg_dian2[0])
endfunction
function InitTrig_molifangchu_1 takes nothing returns nothing
set gg_trg_molifangchu_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_molifangchu_1 , 3 , 0x41304758)
call TriggerAddAction(gg_trg_molifangchu_1, function Trig_molifangchu_1Actions)
endfunction
function Trig_molifangchu_2Actions takes nothing returns nothing
set udg_zhengshu2[282]=( udg_zhengshu2[282] + 1 )
if ( ( udg_zhengshu2[282] < ( 125 + ( 25 * GetUnitAbilityLevel(udg_danwei2[282], 0x41304758) ) ) ) and ( IsUnitType(udg_danwei2[282], UNIT_TYPE_DEAD) == false ) ) then
call s__maphack_SetHeight(udg_danwei2[283] , ( s__maphack_GetHeight(udg_danwei2[282]) + 100.00 ) , 0.00)
set udg_dian2[0]=GetUnitLoc(udg_danwei2[282])
call SetUnitX(udg_danwei2[283], GetLocationX(udg_dian2[0]))
call SetUnitY(udg_danwei2[283], GetLocationY(udg_dian2[0]))
if ( ( IsUnitType(udg_danwei2[282], UNIT_TYPE_SAPPER) == true ) ) then
call UnitAddAbility(udg_danwei2[283], 0x4167686F)
else
call UnitRemoveAbility(udg_danwei2[283], 0x4167686F)
endif
call RemoveLocation(udg_dian2[0])
else
set udg_zhengshu2[282]=0
call UnitRemoveAbility(udg_danwei2[282], 0x41304535)
if ( ( udg_Zhengshu[41] == 0 ) ) then
call UnitRemoveAbility(udg_danwei2[282], 0x41304931)
else
endif
set udg_aXUNHUAN[49]=1
loop
exitwhen udg_aXUNHUAN[49] > 10
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl", udg_danwei2[282], "chest"))
set udg_aXUNHUAN[49]=udg_aXUNHUAN[49] + 1
endloop
call PauseTimer(udg_times[282])
call RemoveUnit(udg_danwei2[283])
set udg_danwei2[282]=null
set udg_danwei2[283]=null
endif
endfunction
function InitTrig_molifangchu_2 takes nothing returns nothing
set gg_trg_molifangchu_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_molifangchu_2, udg_times[282])
call TriggerAddAction(gg_trg_molifangchu_2, function Trig_molifangchu_2Actions)
endfunction
function Trig_trpsActions takes nothing returns nothing
set udg_danwei[33]=GetTriggerUnit()
set udg_dian[26]=GetUnitLoc(udg_danwei[33])
call SetSoundPosition(gg_snd_tr, GetLocationX(udg_dian[26]), GetLocationY(udg_dian[26]), 0.00)
call PlaySoundBJ(gg_snd_tr)
call StartTimerBJ(udg_jishiqi[12], false, 0.50)
endfunction
function InitTrig_trps takes nothing returns nothing
set gg_trg_trps=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_trps , 3 , 0x41303036)
call TriggerAddAction(gg_trg_trps, function Trig_trpsActions)
endfunction
function Trig_trps2Func009A takes nothing returns nothing
set udg_danwei[141]=GetEnumUnit()
if ( ( IsUnitAliveBJ(udg_danwei[141]) == true ) and ( IsUnitType(udg_danwei[141], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei[141], udg_danweizu2[369]) == false ) and ( IsUnitEnemy(udg_danwei[141], GetOwningPlayer(udg_danwei[33])) == true ) ) then
call UnitDamageTarget(udg_danwei[33], udg_danwei[141], ( ( ( 250.00 + ( 2.00 * I2R(GetHeroAgi(udg_danwei[33], true)) ) ) * 1.00 ) * 1.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei[141]=null
endfunction
function Trig_trps2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call CreateNUnitsAtLoc(1, 0x65303041, GetOwningPlayer(udg_danwei[33]), udg_dian[26], bj_UNIT_FACING)
set udg_danwei[34]=bj_lastCreatedUnit
call SetUnitAnimation(udg_danwei[34], "birth")
call SetUnitTimeScale(udg_danwei[34], 0.20)
call UnitApplyTimedLife(udg_danwei[34], 0x42487765, 1.50)
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\firestomp.mdx", udg_dian[26]))
set udg_danweizu[9]=YDWEGetUnitsInRangeOfLocAllNull(600.00 , udg_dian[26])
call ForGroupBJ(udg_danweizu[9], function Trig_trps2Func009A)
call DestroyGroup(udg_danweizu[9])
set udg_zhengshu2[78]=0
call StartTimerBJ(udg_times[78], true, 0.15)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_trps2 takes nothing returns nothing
set gg_trg_trps2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_trps2, udg_jishiqi[12])
call TriggerAddAction(gg_trg_trps2, function Trig_trps2Actions)
endfunction
function Trig_tianporangsuiFunc002Func003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei[33])) == true ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) ) then
call UnitDamageTarget(udg_danwei[33], udg_danwei2[1], ( ( ( 50.00 + ( 0.10 * I2R(GetHeroAgi(udg_danwei[33], true)) ) ) * ( 1.00 + ( 0.75 * ( ( 100.00 - GetUnitLifePercent(udg_danwei[33]) ) / 100.00 ) ) ) ) * 1.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_tianporangsuiActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu2[78]=( udg_zhengshu2[78] + 1 )
if ( ( udg_zhengshu2[78] <= 10 ) ) then
set udg_aXUNHUAN[50]=1
loop
exitwhen udg_aXUNHUAN[50] > 6
set udg_dian2[0]=PolarProjectionBJ(udg_dian[26], ( 150.00 + ( 50.00 * I2R(udg_zhengshu2[78]) ) ), ( ( 60.00 * I2R(udg_aXUNHUAN[50]) ) - ( 25.00 * I2R(udg_zhengshu2[78]) ) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl", udg_dian2[0]))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl", udg_dian2[0]))
call RemoveLocation(udg_dian2[0])
set udg_aXUNHUAN[50]=udg_aXUNHUAN[50] + 1
endloop
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(( 500.00 + ( 50.00 * I2R(udg_zhengshu2[78]) ) ) , udg_dian[26])
call ForGroupBJ(udg_xuanqu, function Trig_tianporangsuiFunc002Func003A)
call DestroyGroup(udg_xuanqu)
else
call PauseTimer(udg_times[78])
set udg_danwei[33]=null
set udg_danwei[34]=null
call RemoveLocation(udg_dian[26])
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_tianporangsui takes nothing returns nothing
set gg_trg_tianporangsui=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_tianporangsui, udg_times[78])
call TriggerAddAction(gg_trg_tianporangsui, function Trig_tianporangsuiActions)
endfunction
function Trig_hwzsActions takes nothing returns nothing
call AddSpecialEffectTargetUnitBJ("hand left", udg_danwei[36], "Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile.mdl")
set udg_texiao[8]=bj_lastCreatedEffect
call AddSpecialEffectTargetUnitBJ("hand right", udg_danwei[37], "Abilities\\Spells\\Other\\Incinerate\\IncinerateBuff.mdl")
set udg_texiao[9]=bj_lastCreatedEffect
set udg_quyu[2]=RectFromCenterSizeBJ(udg_dian[30], 400.00, 400.00)
set udg_dian[33]=GetUnitLoc(udg_danwei[37])
call EnableTrigger(gg_trg_hwzs3)
set udg_Zhengshu[37]=0
endfunction
function InitTrig_hwzs takes nothing returns nothing
set gg_trg_hwzs=CreateTrigger()
call TriggerAddAction(gg_trg_hwzs, function Trig_hwzsActions)
endfunction
function Trig_hwzs2Actions takes nothing returns nothing
call SetUnitTimeScale(udg_danwei[36], 8.00)
call StartTimerBJ(udg_jishiqi[13], true, 0.10)
endfunction
function InitTrig_hwzs2 takes nothing returns nothing
set gg_trg_hwzs2=CreateTrigger()
call TriggerAddAction(gg_trg_hwzs2, function Trig_hwzs2Actions)
endfunction
function Trig_hwzs3Actions takes nothing returns nothing
if ( ( ( IsUnitPausedBJ(udg_danwei[36]) == false ) or ( IsUnitType(udg_danwei[37], UNIT_TYPE_DEAD) == true ) ) ) then
set udg_zhengshu[33]=( udg_zhengshu[33] + 1 )
if ( ( udg_zhengshu[33] <= 15 ) and ( IsUnitType(udg_danwei[36], UNIT_TYPE_DEAD) == false ) and ( IsUnitType(udg_danwei[37], UNIT_TYPE_DEAD) == false ) and ( udg_danwei[37] != null ) ) then
set udg_dian[31]=GetRandomLocInRect(udg_quyu[2])
call SetUnitAnimation(udg_danwei[36], "attack")
call YDWESetUnitFacingToFaceUnitTimedNull(udg_danwei[36] , udg_danwei[37] , 0)
call SetUnitPositionLoc(udg_danwei[36], udg_dian[31])
call UnitDamageTarget(udg_danwei[36], udg_danwei[37], ( 0.40 * I2R(GetHeroAgi(udg_danwei[36], true)) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_HEAVY_SLICE)
call CreateNUnitsAtLoc(1, 0x65303049, GetOwningPlayer(udg_danwei[36]), udg_dian[31], AngleBetweenPoints(udg_dian[31], udg_dian[33]))
set udg_danwei[53]=bj_lastCreatedUnit
call UnitApplyTimedLife(udg_danwei[53], 0x42487765, 0.50)
call SetUnitTimeScale(udg_danwei[53], 2.50)
set udg_danwei[53]=null
call RemoveLocation(udg_dian[31])
else
set udg_Zhengshu[37]=1
call DisableTrigger(GetTriggeringTrigger())
set udg_dian[32]=PolarProjectionBJ(udg_dian[30], 256, AngleBetweenPoints(udg_dian[30], udg_dian[33]))
call SetUnitTimeScale(udg_danwei[36], 1.00)
call AddSpecialEffectTargetUnitBJ("head", udg_danwei[37], "Objects\\Spawnmodels\\Human\\HumanBlood\\HeroBloodElfBlood.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
set udg_texiao[10]=bj_lastCreatedEffect
call DestroyEffect(udg_texiao[8])
call DestroyEffect(udg_texiao[9])
call SetUnitPositionLoc(udg_danwei[36], udg_dian[32])
set udg_danwei[36]=null
set udg_danwei[37]=null
call RemoveLocation(udg_dian[30])
call RemoveLocation(udg_dian[31])
call RemoveLocation(udg_dian[32])
call RemoveLocation(udg_dian[33])
endif
else
endif
endfunction
function InitTrig_hwzs3 takes nothing returns nothing
set gg_trg_hwzs3=CreateTrigger()
call TriggerAddAction(gg_trg_hwzs3, function Trig_hwzs3Actions)
endfunction
function Trig_duanzui_1Actions takes nothing returns nothing
set udg_Danwei[170]=GetTriggerUnit()
set udg_Danwei[171]=GetSpellTargetUnit()
set udg_Dian[170]=GetUnitLoc(udg_Danwei[170])
call StartTimerBJ(udg_jishiqi[170], false, 0.00)
call PlaySoundAtPointBJ(gg_snd_duanzui, 100, udg_Dian[170], 500.00)
set udg_Zhengshu[178]=- 2
set udg_Zhengshu[171]=1
endfunction
function InitTrig_duanzui_1 takes nothing returns nothing
set gg_trg_duanzui_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_duanzui_1 , 3 , 0x41305033)
call TriggerAddAction(gg_trg_duanzui_1, function Trig_duanzui_1Actions)
endfunction
function Trig_duanzui_2Func003Func002Func005A takes nothing returns nothing
set udg_Danwei[162]=GetEnumUnit()
if ( ( IsUnitType(udg_Danwei[162], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_Danwei[162], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_Danwei[162], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_Danwei[162], GetOwningPlayer(udg_Danwei[170])) == true ) and ( IsUnitInGroup(udg_Danwei[162], udg_Danweizu[177]) == false ) ) then
call UnitDamageTarget(udg_Danwei[170], udg_Danwei[162], ( ( ( ( - 20.00 + ( 40.00 * I2R(GetUnitAbilityLevel(udg_Danwei[170], 0x41305033)) ) ) + ( 2.00 * I2R(GetHeroAgi(udg_Danwei[170], true)) ) ) * 1.00 ) * 1.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call GroupAddUnit(udg_Danweizu[177], udg_Danwei[162])
else
endif
set udg_Danwei[162]=null
endfunction
function Trig_duanzui_2Func003Func002Func007Func001Func006A takes nothing returns nothing
set udg_Danwei[162]=GetEnumUnit()
if ( ( IsUnitType(udg_Danwei[162], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_Danwei[162], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_Danwei[162], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_Danwei[162], GetOwningPlayer(udg_Danwei[170])) == true ) ) then
call UnitDamageTarget(udg_Danwei[170], udg_Danwei[162], ( ( ( ( - 20.00 + ( 40.00 * I2R(GetUnitAbilityLevel(udg_Danwei[170], 0x41305033)) ) ) + ( 2.00 * I2R(GetHeroAgi(udg_Danwei[170], true)) ) ) * 1.00 ) * 1.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_Danwei[162])
else
endif
set udg_Danwei[162]=null
endfunction
function Trig_duanzui_2Func003Func002A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_Danwei[173]=GetEnumUnit()
set udg_Dian[174]=GetUnitLoc(udg_Danwei[173])
call SetUnitScale(udg_Danwei[173], ( 1 + ( 0.07 * I2R(GetUnitUserData(udg_Danwei[173])) ) ), ( 1 + ( 0.07 * I2R(GetUnitUserData(udg_Danwei[173])) ) ), ( 1 + ( 0.07 * I2R(GetUnitUserData(udg_Danwei[173])) ) ))
set udg_Danweizu[162]=YDWEGetUnitsInRangeOfLocAllNull(150.00 , udg_Dian[174])
call ForGroupBJ(udg_Danweizu[162], function Trig_duanzui_2Func003Func002Func005A)
call DestroyGroup(udg_Danweizu[162])
if ( ( DistanceBetweenPoints(udg_Dian[174], udg_Dian[175]) <= 150.00 ) and ( GetUnitState(udg_Danwei[173], UNIT_STATE_MANA) == 1.00 ) ) then
if ( ( udg_Zhengshu[171] == 1 ) ) then
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[171]), 0x65303130, udg_Dian[174], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 1.00)
call UnitAddAbility(udg_Danwei[92], 0x41304236)
set udg_Danweizu[162]=YDWEGetUnitsInRangeOfLocAllNull(250.00 , udg_Dian[174])
call ForGroupBJ(udg_Danweizu[162], function Trig_duanzui_2Func003Func002Func007Func001Func006A)
call DestroyGroup(udg_Danweizu[162])
set udg_Danwei[92]=null
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl", udg_Dian[175]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl", udg_Dian[175]))
set udg_Zhengshu[171]=0
else
if ( ( UnitHasBuffBJ(udg_Danwei[171], 0x42303354) == true ) ) then
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\Incinerate\\FireLordDeathExplode.mdl", udg_Dian[175]))
call UnitDamageTarget(udg_Danwei[170], udg_Danwei[171], ( ( ( ( - 20.00 + ( 40.00 * I2R(GetUnitAbilityLevel(udg_Danwei[170], 0x41305033)) ) ) + ( 2.00 * I2R(GetHeroAgi(udg_Danwei[170], true)) ) ) / 8.00 ) * 1.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
endif
call SetUnitManaBJ(udg_Danwei[173], 0.00)
else
if ( ( GetUnitUserData(udg_Danwei[173]) < 20 ) and ( IsTerrainPathableBJ(udg_Dian[174], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitUserData(udg_Danwei[173], ( GetUnitUserData(udg_Danwei[173]) + 1 ))
set udg_Dian[173]=PolarProjectionBJ(udg_Dian[174], 60.00, GetUnitFacing(udg_Danwei[173]))
call SetUnitX(udg_Danwei[173], GetLocationX(udg_Dian[173]))
call SetUnitY(udg_Danwei[173], GetLocationY(udg_Dian[173]))
call RemoveLocation(udg_Dian[173])
else
call GroupRemoveUnit(udg_Danweizu[170], udg_Danwei[173])
call KillUnit(udg_Danwei[173])
endif
endif
call RemoveLocation(udg_Dian[174])
set udg_Danwei[173]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_duanzui_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_Zhengshu[178] == - 2 ) ) then
set udg_Zhengshu[178]=( udg_Zhengshu[178] + 1 )
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[170]), 0x65303130, udg_Dian[170], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 1.00)
call UnitAddAbility(udg_Danwei[92], 0x41304B58)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_Danwei[170])
set udg_Danwei[92]=null
call StartTimerBJ(udg_jishiqi[170], false, 0.45)
call SetUnitAnimationByIndex(udg_Danwei[170], 7)
call SetUnitTimeScale(udg_Danwei[170], 1.50)
else
if ( ( udg_Zhengshu[178] == - 1 ) ) then
set udg_Zhengshu[178]=( udg_Zhengshu[178] + 1 )
call StartTimerBJ(udg_jishiqi[170], true, 0.03)
call RemoveLocation(udg_Dian[170])
set udg_Dian[170]=GetUnitLoc(udg_Danwei[170])
set udg_Dian[171]=GetUnitLoc(udg_Danwei[171])
set udg_Dian[172]=PolarProjectionBJ(udg_Dian[170], 100.00, AngleBetweenPoints(udg_Dian[170], udg_Dian[171]))
else
if ( ( udg_Zhengshu[178] < 25 ) ) then
set udg_Zhengshu[178]=( udg_Zhengshu[178] + 1 )
if ( ( ( I2R(udg_Zhengshu[178]) / 2.00 ) == I2R(( udg_Zhengshu[178] / 2 )) ) and ( udg_Zhengshu[178] < 20 ) ) then
set udg_Danwei[173]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[170]), 0x65303844, udg_Dian[172], AngleBetweenPoints(udg_Dian[170], udg_Dian[171]))
call SetUnitManaBJ(udg_Danwei[173], 1.00)
call SetUnitUserData(udg_Danwei[173], 0)
call GroupAddUnit(udg_Danweizu[170], udg_Danwei[173])
set udg_Danwei[173]=null
else
endif
else
if ( ( IsUnitGroupEmptyBJ(udg_Danweizu[170]) == true ) ) then
call RemoveLocation(udg_Dian[170])
call RemoveLocation(udg_Dian[171])
call RemoveLocation(udg_Dian[172])
call PauseTimer(udg_jishiqi[170])
call GroupClear(udg_Danweizu[177])
else
endif
endif
endif
endif
set udg_Dian[175]=GetUnitLoc(udg_Danwei[171])
if ( ( IsUnitGroupEmptyBJ(udg_Danweizu[170]) == false ) ) then
call ForGroupBJ(udg_Danweizu[170], function Trig_duanzui_2Func003Func002A)
else
endif
call RemoveLocation(udg_Dian[175])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_duanzui_2 takes nothing returns nothing
set gg_trg_duanzui_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_duanzui_2, udg_jishiqi[170])
call TriggerAddAction(gg_trg_duanzui_2, function Trig_duanzui_2Actions)
endfunction
function Trig_zhenhong_1Actions takes nothing returns nothing
set udg_Danwei[170]=GetTriggerUnit()
set udg_Zhengshu[172]=- 18
set udg_Shishu[170]=GetUnitFacing(udg_Danwei[170])
set udg_Dian[176]=GetUnitLoc(udg_Danwei[170])
set udg_Danwei[174]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[170]), 0x65303847, udg_Dian[176], ( GetUnitFacing(udg_Danwei[170]) - 0.00 ))
call PlaySoundAtPointBJ(gg_snd_zhenhong, 100, udg_Dian[176], 500.00)
call StartTimerBJ(udg_jishiqi[171], false, 0.00)
call SetUnitTimeScale(udg_Danwei[170], 0.50)
call SetUnitTimeScale(udg_Danwei[174], 1.50)
call RemoveLocation(udg_Dian[176])
endfunction
function InitTrig_zhenhong_1 takes nothing returns nothing
set gg_trg_zhenhong_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_zhenhong_1 , 3 , 0x41305034)
call TriggerAddAction(gg_trg_zhenhong_1, function Trig_zhenhong_1Actions)
endfunction
function Trig_zhenhong_2Func001Func015Func001Func001Func001A takes nothing returns nothing
if ( ( IsUnitInGroup(GetEnumUnit(), udg_Danweizu[176]) == false ) ) then
call UnitRemoveAbility(GetEnumUnit(), 0x41305048)
call UnitRemoveAbility(GetEnumUnit(), 0x41305049)
call UnitRemoveBuffBJ(0x42303354, GetEnumUnit())
else
endif
endfunction
function Trig_zhenhong_2Func001Func015Func001Func008Func008A takes nothing returns nothing
set udg_Danwei[162]=GetEnumUnit()
if ( ( IsUnitType(udg_Danwei[162], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_Danwei[162], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_Danwei[162], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_Danwei[162], GetOwningPlayer(udg_Danwei[170])) == true ) ) then
set udg_Dian[173]=GetUnitLoc(GetEnumUnit())
if ( ( IsUnitInGroup(udg_Danwei[162], udg_Danweizu[174]) == false ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\BallsOfFireMissile\\BallsOfFireMissile.mdl", udg_Danwei[162], "chest"))
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[162]), 0x65303130, udg_Dian[173], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41303551)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_Danwei[162])
set udg_Danwei[92]=null
call UnitDamageTarget(udg_Danwei[170], udg_Danwei[162], ( ( ( ( 50.00 + ( 20.00 * I2R(GetUnitAbilityLevel(udg_Danwei[170], 0x41305034)) ) ) + ( 1.50 * I2R(GetHeroAgi(udg_Danwei[170], true)) ) ) * 1.00 ) * 1.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call GroupAddUnit(udg_Danweizu[174], udg_Danwei[162])
call UnitAddAbility(udg_Danwei[162], 0x41305048)
call UnitAddAbility(udg_Danwei[162], 0x41305049)
else
endif
set udg_Dian[174]=PolarProjectionBJ(udg_Dian[173], 30.00, AngleBetweenPoints(udg_Dian[176], udg_Dian[173]))
if ( ( IsTerrainPathableBJ(udg_Dian[174], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(GetEnumUnit(), GetLocationX(udg_Dian[174]))
call SetUnitY(GetEnumUnit(), GetLocationY(udg_Dian[174]))
else
endif
call RemoveLocation(udg_Dian[173])
call RemoveLocation(udg_Dian[174])
else
endif
set udg_Danwei[162]=null
endfunction
function Trig_zhenhong_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_Zhengshu[172] == - 18 ) ) then
set udg_Zhengshu[172]=( udg_Zhengshu[172] + 1 )
set udg_Dian[176]=GetUnitLoc(udg_Danwei[170])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[170]), 0x65303130, udg_Dian[176], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 1.00)
call UnitAddAbility(udg_Danwei[92], 0x4130504A)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_Danwei[170])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[176])
call StartTimerBJ(udg_jishiqi[171], true, 0.03)
call SetUnitTimeScale(udg_Danwei[170], 1.60)
call SetUnitAnimationByIndex(udg_Danwei[170], 1)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_Danwei[170]), 0x41305034, false)
call UnitAddAbility(udg_Danwei[170], 0x41305047)
else
if ( ( udg_Zhengshu[172] <= 0 ) ) then
set udg_Zhengshu[172]=( udg_Zhengshu[172] + 1 )
set udg_Dian[176]=GetUnitLoc(udg_Danwei[170])
call SetUnitX(udg_Danwei[174], GetLocationX(udg_Dian[176]))
call SetUnitY(udg_Danwei[174], GetLocationY(udg_Dian[176]))
if ( ( udg_Zhengshu[172] == 0 ) ) then
call PlaySoundAtPointBJ(gg_snd_DemonHunterMissileHit3, 100, udg_Dian[176], 500.00)
call SetUnitTimeScale(udg_Danwei[170], 1.00)
call PauseTimer(udg_jishiqi[171])
call StartTimerBJ(udg_jishiqi[171], true, ( 0.05 / 2.00 ))
else
endif
call RemoveLocation(udg_Dian[176])
else
if ( ( udg_Zhengshu[172] < 30 ) ) then
set udg_Zhengshu[172]=( udg_Zhengshu[172] + 1 )
if ( ( udg_Zhengshu[172] < 20 ) ) then
set udg_Dian[176]=GetUnitLoc(udg_Danwei[170])
call SetUnitX(udg_Danwei[174], GetLocationX(udg_Dian[176]))
call SetUnitY(udg_Danwei[174], GetLocationY(udg_Dian[176]))
set udg_Dian[174]=PolarProjectionBJ(udg_Dian[176], 200.00, ( udg_Shishu[170] + ( 75.00 - ( 7.50 * I2R(udg_Zhengshu[172]) ) ) ))
set udg_Danweizu[162]=YDWEGetUnitsInRangeOfLocAllNull(225.00 , udg_Dian[174])
call RemoveLocation(udg_Dian[174])
call ForGroupBJ(udg_Danweizu[162], function Trig_zhenhong_2Func001Func015Func001Func008Func008A)
call DestroyGroup(udg_Danweizu[162])
call RemoveLocation(udg_Dian[176])
else
if ( ( udg_Zhengshu[172] == 20 ) ) then
call KillUnit(udg_Danwei[174])
call PauseTimer(udg_jishiqi[171])
call StartTimerBJ(udg_jishiqi[171], true, 0.20)
else
endif
endif
else
if ( ( IsUnitGroupEmptyBJ(udg_Danweizu[174]) == false ) ) then
call ForGroupBJ(udg_Danweizu[174], function Trig_zhenhong_2Func001Func015Func001Func001Func001A)
else
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_Danwei[170]), 0x41305034, true)
call UnitRemoveAbility(udg_Danwei[170], 0x41305047)
call GroupClear(udg_Danweizu[174])
call PauseTimer(udg_jishiqi[171])
endif
endif
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_zhenhong_2 takes nothing returns nothing
set gg_trg_zhenhong_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_zhenhong_2, udg_jishiqi[171])
call TriggerAddAction(gg_trg_zhenhong_2, function Trig_zhenhong_2Actions)
endfunction
function Trig_feiyan_1Actions takes nothing returns nothing
set udg_Danwei[170]=GetTriggerUnit()
set udg_dian[30]=GetSpellTargetLoc()
set udg_Dian[176]=GetUnitLoc(udg_Danwei[170])
call PlaySoundAtPointBJ(gg_snd_feiyan, 100, udg_Dian[176], 500.00)
call RemoveLocation(udg_Dian[176])
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_Danwei[170]), 0x41305034, true)
call UnitRemoveAbility(udg_Danwei[170], 0x41305047)
set udg_zhengshu[33]=- 2
call StartTimerBJ(udg_jishiqi[14], false, 0.00)
endfunction
function InitTrig_feiyan_1 takes nothing returns nothing
set gg_trg_feiyan_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_feiyan_1 , 3 , 0x41305047)
call TriggerAddAction(gg_trg_feiyan_1, function Trig_feiyan_1Actions)
endfunction
function Trig_feiyan_2Func001Func013Func001Func001Func001A takes nothing returns nothing
call UnitRemoveAbility(GetEnumUnit(), 0x41305048)
call UnitRemoveAbility(GetEnumUnit(), 0x41305049)
call UnitRemoveBuffBJ(0x42303354, GetEnumUnit())
endfunction
function Trig_feiyan_2Func001Func013Func001Func004Func001Func003Func002A takes nothing returns nothing
set udg_Danwei[162]=GetEnumUnit()
if ( ( IsUnitType(udg_Danwei[162], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_Danwei[162], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_Danwei[162], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_Danwei[162], GetOwningPlayer(udg_Danwei[170])) == true ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FireBallMissile\\FireBallMissile.mdl", udg_Danwei[162], "chest"))
call UnitDamageTarget(udg_Danwei[170], udg_Danwei[162], ( ( ( ( 50.00 + ( 30.00 * I2R(GetUnitAbilityLevel(udg_Danwei[170], 0x41305034)) ) ) + ( 1.00 * I2R(GetHeroAgi(udg_Danwei[170], true)) ) ) * 0.30 ) * 1.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_Danwei[162]=null
endfunction
function Trig_feiyan_2Func001Func013Func001Func004Func001Func003Func010Func002A takes nothing returns nothing
set udg_Danwei[162]=GetEnumUnit()
if ( ( IsUnitType(udg_Danwei[162], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_Danwei[162], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_Danwei[162], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_Danwei[162], GetOwningPlayer(udg_Danwei[170])) == true ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FireBallMissile\\FireBallMissile.mdl", udg_Danwei[162], "chest"))
call UnitDamageTarget(udg_Danwei[170], udg_Danwei[162], ( ( ( ( 50.00 + ( 30.00 * I2R(GetUnitAbilityLevel(udg_Danwei[170], 0x41305034)) ) ) + ( 1.00 * I2R(GetHeroAgi(udg_Danwei[170], true)) ) ) * 0.30 ) * 1.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_Danwei[162]=null
endfunction
function Trig_feiyan_2Func001Func013Func001Func004Func001Func003Func010Func008A takes nothing returns nothing
set udg_Danwei[162]=GetEnumUnit()
if ( ( IsUnitType(udg_Danwei[162], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_Danwei[162], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_Danwei[162], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_Danwei[162], GetOwningPlayer(udg_Danwei[170])) == true ) and ( IsUnitInGroup(udg_Danwei[162], udg_Danweizu[176]) == false ) ) then
call GroupAddUnit(udg_Danweizu[176], udg_Danwei[162])
else
call GroupRemoveUnit(udg_Danweizu[162], udg_Danwei[162])
endif
set udg_Danwei[162]=null
endfunction
function Trig_feiyan_2Func001Func013Func001Func004Func001Func003Func010Func009Func007A takes nothing returns nothing
set udg_Danwei[162]=GetEnumUnit()
if ( ( udg_Danwei[162] != udg_danwei[37] ) and ( IsUnitType(udg_Danwei[162], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_Danwei[162], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_Danwei[162], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_Danwei[162], GetOwningPlayer(udg_Danwei[170])) == true ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FireBallMissile\\FireBallMissile.mdl", udg_Danwei[162], "chest"))
call UnitDamageTarget(udg_Danwei[170], udg_Danwei[162], ( ( ( ( 50.00 + ( 30.00 * I2R(GetUnitAbilityLevel(udg_Danwei[170], 0x41305034)) ) ) + ( 1.00 * I2R(GetHeroAgi(udg_Danwei[170], true)) ) ) * 0.30 ) * 1.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_Danwei[162]=null
endfunction
function Trig_feiyan_2Func001Func013Func001Func004Func001A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei[36]=GetEnumUnit()
set udg_Dian[173]=GetUnitLoc(udg_danwei[36])
if ( ( GetUnitUserData(udg_danwei[36]) <= 20 ) ) then
call SetUnitUserData(udg_danwei[36], ( GetUnitUserData(udg_danwei[36]) + 1 ))
set udg_Dian[174]=PolarProjectionBJ(udg_Dian[173], 60.00, GetUnitFacing(udg_danwei[36]))
if ( ( IsTerrainPathableBJ(udg_Dian[174], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_danwei[36], GetLocationX(udg_Dian[174]))
call SetUnitY(udg_danwei[36], GetLocationY(udg_Dian[174]))
set udg_Danweizu[162]=YDWEGetUnitsInRangeOfLocAllNull(115.00 , udg_Dian[173])
call ForGroupBJ(udg_Danweizu[162], function Trig_feiyan_2Func001Func013Func001Func004Func001Func003Func010Func008A)
if ( ( IsUnitGroupEmptyBJ(udg_Danweizu[162]) == false ) ) then
set udg_danwei[37]=GroupPickRandomUnit(udg_Danweizu[162])
if ( ( UnitHasBuffBJ(udg_danwei[37], 0x42303354) == true ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Incinerate\\FireLordDeathExplode.mdl", udg_danwei[37], "chest"))
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[37]), 0x65303130, udg_Dian[173], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 1.00)
call UnitAddAbility(udg_Danwei[92], 0x41304236)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_danwei[37])
set udg_Danwei[92]=null
else
endif
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\fireblast.mdl", udg_danwei[37], "chest"))
call UnitDamageTarget(udg_Danwei[170], udg_danwei[37], ( ( ( ( 50.00 + ( 30.00 * I2R(GetUnitAbilityLevel(udg_Danwei[170], 0x41305034)) ) ) + ( 1.00 * I2R(GetHeroAgi(udg_Danwei[170], true)) ) ) * 1.00 ) * 1.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call DestroyGroup(udg_Danweizu[162])
set udg_Danweizu[162]=YDWEGetUnitsInRangeOfLocAllNull(250.00 , udg_Dian[173])
call ForGroupBJ(udg_Danweizu[162], function Trig_feiyan_2Func001Func013Func001Func004Func001Func003Func010Func009Func007A)
call DestroyGroup(udg_Danweizu[162])
set udg_danwei[37]=null
call GroupRemoveUnit(udg_Danweizu[175], udg_danwei[36])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile.mdl", udg_Dian[173]))
call KillUnit(udg_danwei[36])
else
call DestroyGroup(udg_Danweizu[162])
endif
else
set udg_Danweizu[162]=YDWEGetUnitsInRangeOfLocAllNull(250.00 , udg_Dian[173])
call ForGroupBJ(udg_Danweizu[162], function Trig_feiyan_2Func001Func013Func001Func004Func001Func003Func010Func002A)
call DestroyGroup(udg_Danweizu[162])
call GroupRemoveUnit(udg_Danweizu[175], udg_danwei[36])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile.mdl", udg_Dian[173]))
call KillUnit(udg_danwei[36])
endif
call RemoveLocation(udg_Dian[174])
else
set udg_Danweizu[162]=YDWEGetUnitsInRangeOfLocAllNull(250.00 , udg_Dian[173])
call ForGroupBJ(udg_Danweizu[162], function Trig_feiyan_2Func001Func013Func001Func004Func001Func003Func002A)
call DestroyGroup(udg_Danweizu[162])
call GroupRemoveUnit(udg_Danweizu[175], udg_danwei[36])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile.mdl", udg_Dian[173]))
call KillUnit(udg_danwei[36])
endif
call RemoveLocation(udg_Dian[173])
set udg_danwei[36]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_feiyan_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_zhengshu[33] == - 2 ) ) then
set udg_zhengshu[33]=( udg_zhengshu[33] + 1 )
set udg_Dian[176]=GetUnitLoc(udg_Danwei[170])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[170]), 0x65303130, udg_Dian[176], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 1.00)
call UnitAddAbility(udg_Danwei[92], 0x41304B4F)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_Danwei[170])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[176])
call StartTimerBJ(udg_jishiqi[14], false, 0.40)
call SetUnitAnimationByIndex(udg_Danwei[170], 8)
call SetUnitTimeScale(udg_Danwei[170], 1.50)
else
if ( ( udg_zhengshu[33] == - 1 ) ) then
set udg_zhengshu[33]=( udg_zhengshu[33] + 1 )
set udg_Dian[176]=GetUnitLoc(udg_Danwei[170])
call StopSoundBJ(gg_snd_CrushingWaveTarget1, false)
call PlaySoundAtPointBJ(gg_snd_CrushingWaveTarget1, 100, udg_Dian[176], 500.00)
set udg_danwei[36]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[170]), 0x65303843, udg_Dian[176], ( GetUnitFacing(udg_Danwei[170]) - 0.00 ))
call SetUnitUserData(udg_danwei[36], 0)
call GroupAddUnit(udg_Danweizu[175], udg_danwei[36])
set udg_danwei[36]=null
call RemoveLocation(udg_Dian[176])
call SetUnitTimeScale(udg_Danwei[170], 1.00)
call StartTimerBJ(udg_jishiqi[14], true, 0.03)
else
if ( ( udg_zhengshu[33] < 30 ) ) then
set udg_zhengshu[33]=( udg_zhengshu[33] + 1 )
if ( ( udg_zhengshu[33] <= 8 ) and ( ( I2R(udg_zhengshu[33]) / 2.00 ) == I2R(( udg_zhengshu[33] / 2 )) ) ) then
set udg_Dian[176]=GetUnitLoc(udg_Danwei[170])
call StopSoundBJ(gg_snd_CrushingWaveTarget1, false)
call PlaySoundAtPointBJ(gg_snd_CrushingWaveTarget1, 100, udg_Dian[176], 500.00)
if ( ( ( I2R(udg_zhengshu[33]) / 4.00 ) == I2R(( udg_zhengshu[33] / 4 )) ) ) then
set udg_danwei[36]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[170]), 0x65303843, udg_Dian[176], ( GetUnitFacing(udg_Danwei[170]) + GetRandomReal(5.00, 10.00) ))
else
set udg_danwei[36]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[170]), 0x65303843, udg_Dian[176], ( GetUnitFacing(udg_Danwei[170]) - GetRandomReal(5.00, 10.00) ))
endif
call SetUnitUserData(udg_danwei[36], 0)
call GroupAddUnit(udg_Danweizu[175], udg_danwei[36])
set udg_danwei[36]=null
call RemoveLocation(udg_Dian[176])
else
endif
if ( ( IsUnitGroupEmptyBJ(udg_Danweizu[175]) == false ) ) then
call ForGroupBJ(udg_Danweizu[175], function Trig_feiyan_2Func001Func013Func001Func004Func001A)
else
endif
else
if ( ( udg_zhengshu[33] == 30 ) ) then
set udg_zhengshu[33]=( udg_zhengshu[33] + 1 )
call PauseTimer(udg_jishiqi[14])
call StartTimerBJ(udg_jishiqi[14], false, 3.00)
else
call ForGroupBJ(udg_Danweizu[176], function Trig_feiyan_2Func001Func013Func001Func001Func001A)
call GroupClear(udg_Danweizu[175])
call GroupClear(udg_Danweizu[176])
call PauseTimer(udg_jishiqi[14])
endif
endif
endif
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_feiyan_2 takes nothing returns nothing
set gg_trg_feiyan_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_feiyan_2, udg_jishiqi[14])
call TriggerAddAction(gg_trg_feiyan_2, function Trig_feiyan_2Actions)
endfunction
function Trig_hwxjActions takes nothing returns nothing
set udg_danwei[38]=GetTriggerUnit()
call PlaySoundOnUnitBJ(gg_snd_HeroBladeMasterAttack1, 100, udg_danwei[38])
set udg_dian[204]=GetUnitLoc(udg_danwei[38])
set udg_dian[205]=GetSpellTargetLoc()
set udg_dian[34]=PolarProjectionBJ(udg_dian[204], RMinBJ(( DistanceBetweenPoints(udg_dian[204], udg_dian[205]) + 100.00 ), 850.00), AngleBetweenPoints(udg_dian[204], udg_dian[205]))
set udg_dian[47]=GetUnitLoc(udg_danwei[38])
call RemoveLocation(udg_dian[204])
call RemoveLocation(udg_dian[205])
set udg_aXUNHUAN[87]=- 2
call StartTimerBJ(udg_jishiqi[15], false, 0.00)
endfunction
function InitTrig_hwxj takes nothing returns nothing
set gg_trg_hwxj=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_hwxj , 3 , 0x41556373)
call TriggerAddAction(gg_trg_hwxj, function Trig_hwxjActions)
endfunction
function Trig_hwxj2Func001Func001Func014Func007Func014Func003Func003A takes nothing returns nothing
set udg_danwei[39]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[39], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei[39], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei[39], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei[39], GetOwningPlayer(udg_danwei[38])) == true ) ) then
if ( ( IsUnitType(udg_danwei[39], UNIT_TYPE_HERO) == false ) ) then
call UnitDamageTarget(udg_danwei[38], udg_danwei[39], ( ( 2.25 * I2R(GetHeroAgi(udg_danwei[38], true)) ) + ( 45.00 * I2R(GetUnitAbilityLevel(udg_danwei[38], 0x41556373)) ) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_HEAVY_SLICE)
else
call UnitDamageTarget(udg_danwei[38], udg_danwei[39], ( ( 1.50 * I2R(GetHeroAgi(udg_danwei[38], true)) ) + ( 30.00 * I2R(GetUnitAbilityLevel(udg_danwei[38], 0x41556373)) ) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_HEAVY_SLICE)
endif
else
endif
set udg_danwei[39]=null
endfunction
function Trig_hwxj2Func001Func001Func014Func007Func014A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei[142]=GetEnumUnit()
set udg_dian2[1]=GetUnitLoc(udg_danwei[142])
if ( ( IsUnitType(udg_danwei[142], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei[142], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitAliveBJ(udg_danwei[142]) == true ) and ( IsUnitEnemy(udg_danwei[142], GetOwningPlayer(udg_danwei[38])) == true ) and ( IsUnitType(udg_danwei[142], UNIT_TYPE_ANCIENT) == false ) ) then
call PauseTimer(udg_jishiqi[15])
set udg_danweizu[12]=YDWEGetUnitsInRangeOfLocAllNull(300.00 , udg_dian[205])
call ForGroupBJ(udg_danweizu[12], function Trig_hwxj2Func001Func001Func014Func007Func014Func003Func003A)
call DestroyGroup(udg_danweizu[12])
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile.mdl", udg_danwei[38], "weapon"))
call UnitRemoveBuffBJ(0x4230324F, udg_danwei[38])
call UnitRemoveAbility(udg_danwei[38], 0x41303254)
set udg_danwei[38]=null
call RemoveLocation(udg_dian[34])
call RemoveLocation(udg_dian[47])
else
endif
call RemoveLocation(udg_dian2[1])
set udg_danwei[142]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_hwxj2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( ( IsUnitPausedBJ(udg_danwei[38]) == false ) or ( IsUnitType(udg_danwei[38], UNIT_TYPE_DEAD) == true ) ) ) then
if ( ( udg_aXUNHUAN[87] == - 2 ) ) then
set udg_aXUNHUAN[87]=( udg_aXUNHUAN[87] + 1 )
set udg_dian[35]=GetUnitLoc(udg_danwei[38])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[38]), 0x65303130, udg_dian[35], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 1.00)
call UnitAddAbility(udg_Danwei[92], 0x4130475A)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_danwei[38])
set udg_Danwei[92]=null
call RemoveLocation(udg_dian[35])
call SetUnitTimeScale(udg_danwei[38], 2.00)
call SetUnitAnimationByIndex(udg_danwei[38], 4)
call UnitAddAbility(udg_danwei[38], 0x41303254)
call StartTimerBJ(udg_jishiqi[15], false, 0.30)
else
if ( ( udg_aXUNHUAN[87] == - 1 ) ) then
call SetUnitTimeScale(udg_danwei[38], 1.00)
set udg_aXUNHUAN[87]=( udg_aXUNHUAN[87] + 1 )
call StartTimerBJ(udg_jishiqi[15], true, 0.02)
else
set udg_aXUNHUAN[87]=( udg_aXUNHUAN[87] + 1 )
set udg_dian[35]=GetUnitLoc(udg_danwei[38])
if ( ( udg_aXUNHUAN[87] <= 30 ) and ( DistanceBetweenPoints(udg_dian[34], udg_dian[35]) >= 80.00 ) and ( IsTerrainPathableBJ(udg_dian[35], PATHING_TYPE_FLYABILITY) == false ) ) then
set udg_dian[205]=PolarProjectionBJ(udg_dian[35], 60.00, AngleBetweenPoints(udg_dian[35], udg_dian[34]))
call SetUnitX(udg_danwei[38], GetLocationX(udg_dian[205]))
call SetUnitY(udg_danwei[38], GetLocationY(udg_dian[205]))
set udg_danweizu[11]=YDWEGetUnitsInRangeOfLocAllNull(150.00 , udg_dian[205])
call ForGroupBJ(udg_danweizu[11], function Trig_hwxj2Func001Func001Func014Func007Func014A)
call DestroyGroup(udg_danweizu[11])
call RemoveLocation(udg_dian[205])
else
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile.mdl", udg_danwei[38], "weapon"))
call PauseTimer(udg_jishiqi[15])
call ResetUnitAnimation(udg_danwei[38])
call UnitRemoveBuffBJ(0x4230324F, udg_danwei[38])
call UnitRemoveAbility(udg_danwei[38], 0x41303254)
set udg_danwei[38]=null
call RemoveLocation(udg_dian[34])
call RemoveLocation(udg_dian[47])
endif
call RemoveLocation(udg_dian[35])
endif
endif
else
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_hwxj2 takes nothing returns nothing
set gg_trg_hwxj2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_hwxj2, udg_jishiqi[15])
call TriggerAddAction(gg_trg_hwxj2, function Trig_hwxj2Actions)
endfunction
function Trig_baka_1Func007A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_MAGIC_IMMUNE) == false ) and ( IsUnitType(udg_danwei2[0], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[0], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[0], UNIT_TYPE_DEAD) == false ) and ( GetUnitTypeId(udg_danwei2[0]) != 0x48757468 ) and ( GetUnitTypeId(udg_danwei2[0]) != 0x68677477 ) ) then
call GroupAddUnit(udg_danweizu2[246], udg_danwei2[0])
if ( ( udg_Points <= 0 ) and ( IsUnitType(udg_danwei2[0], UNIT_TYPE_HERO) == false ) ) then
call SetUnitTimeScale(udg_danwei2[0], 0.00)
call s__Unit_PauseUnitMU(udg_danwei2[0] , true , "封绝")
else
endif
else
endif
set udg_danwei2[0]=null
endfunction
function Trig_baka_1Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( GetTriggerExecCount(GetTriggeringTrigger()) == 1 ) ) then
set udg_danwei2[246]=GetSpellAbilityUnit()
call TriggerRegisterUnitEvent(gg_trg_baka_5, udg_danwei2[246], EVENT_UNIT_ISSUED_TARGET_ORDER)
call TriggerRegisterUnitEvent(gg_trg_baka_6, udg_danwei2[246], EVENT_UNIT_ISSUED_POINT_ORDER)
call TriggerRegisterUnitEvent(gg_trg_baka_6, udg_danwei2[246], EVENT_UNIT_ISSUED_ORDER)
set udg_danweizu2[246]=CreateGroup()
else
call GroupClear(udg_danweizu2[246])
endif
call PlaySoundOnUnitBJ(gg_snd_fengjue, 100, udg_danwei2[246])
set udg_dian2[0]=GetSpellTargetLoc()
set udg_aXUNHUAN[51]=1
loop
exitwhen udg_aXUNHUAN[51] > 5
call CreateNUnitsAtLoc(1, 0x65303042, GetOwningPlayer(udg_danwei2[246]), udg_dian2[0], 0.00)
set udg_danwei[40]=bj_lastCreatedUnit
call UnitApplyTimedLife(udg_danwei[40], 0x42487765, ( 0.99 * ( 3.00 + I2R(GetUnitAbilityLevel(udg_danwei2[246], 0x41303248)) ) ))
call SetUnitTimeScale(udg_danwei[40], 0.00)
set udg_aXUNHUAN[51]=udg_aXUNHUAN[51] + 1
endloop
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(425.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_baka_1Func007A)
call DestroyGroup(udg_xuanqu)
set udg_dian2[247]=GetUnitLoc(udg_danwei2[246])
set udg_zhengshu2[246]=0
set udg_zhengshu2[247]=0
call StartTimerBJ(udg_times[246], true, 0.03)
call RemoveLocation(udg_dian[0])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_baka_1 takes nothing returns nothing
set gg_trg_baka_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_baka_1 , 3 , 0x41303248)
call TriggerAddAction(gg_trg_baka_1, function Trig_baka_1Actions)
endfunction
function Trig_baka_2Func001Func001A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
call SetUnitTimeScale(udg_danwei2[0], 1.00)
call s__Unit_PauseUnitMU(udg_danwei2[0] , false , "封绝")
set udg_danwei2[0]=null
endfunction
function Trig_baka_2Func001Func010A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[0], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[0], UNIT_TYPE_DEAD) == false ) and ( GetUnitTypeId(udg_danwei2[0]) != 0x48757468 ) and ( GetUnitTypeId(udg_danwei2[0]) != 0x65303253 ) and ( GetUnitTypeId(udg_danwei2[0]) != 0x68677477 ) ) then
set udg_dian2[4]=GetUnitLoc(udg_danwei2[0])
if ( ( IsUnitInGroup(udg_danwei2[0], udg_danweizu2[246]) == false ) ) then
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_HERO) == false ) and ( IsUnitIllusionBJ(udg_danwei2[0]) == false ) ) then
if ( ( udg_Points <= 0 ) ) then
call SetUnitTimeScale(udg_danwei2[0], 0.00)
call s__Unit_PauseUnitMU(udg_danwei2[0] , true , "封绝")
else
endif
else
if ( ( IsUnitEnemy(udg_danwei2[0], GetOwningPlayer(udg_danwei2[246])) == true ) and ( DistanceBetweenPoints(udg_dian2[4], udg_dian2[0]) > 375.00 ) ) then
call s__baka_IssueTargetOrderById2(udg_danwei[40] , 852095 , udg_danwei2[0])
else
endif
endif
call GroupAddUnit(udg_danweizu2[246], udg_danwei2[0])
else
endif
call RemoveLocation(udg_dian2[4])
else
endif
set udg_danwei2[0]=null
endfunction
function Trig_baka_2Func001Func011A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[4]=GetUnitLoc(udg_danwei2[0])
if ( ( DistanceBetweenPoints(udg_dian2[4], udg_dian2[0]) > 425.00 ) ) then
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_HERO) == false ) and ( IsUnitIllusionBJ(udg_danwei2[0]) == false ) ) then
if ( ( udg_Points <= 0 ) ) then
call SetUnitTimeScale(udg_danwei2[0], 1.00)
call s__Unit_PauseUnitMU(udg_danwei2[0] , false , "封绝")
else
endif
else
if ( ( IsUnitEnemy(udg_danwei2[0], GetOwningPlayer(udg_danwei2[246])) == true ) and ( DistanceBetweenPoints(udg_dian2[4], udg_dian2[0]) < 450.00 ) ) then
call s__baka_IssueTargetOrderById2(udg_danwei[40] , 852095 , udg_danwei2[0])
else
endif
endif
call GroupRemoveUnit(udg_danweizu2[246], udg_danwei2[0])
else
endif
call RemoveLocation(udg_dian2[4])
set udg_danwei2[0]=null
endfunction
function Trig_baka_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_zhengshu2[246] <= ( 33 * ( GetUnitAbilityLevel(udg_danwei2[246], 0x41303248) + 3 ) ) ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei[40])
set udg_zhengshu2[246]=( udg_zhengshu2[246] + 1 )
set udg_zhengshu2[247]=IMaxBJ(( udg_zhengshu2[247] - 1 ), 0)
set udg_dian2[246]=GetUnitLoc(udg_danwei2[246])
if ( ( udg_dian2[2] != null ) and ( udg_danwei2[248] != null ) and ( GetUnitTypeId(udg_danwei2[248]) != 0 ) and ( IsUnitType(udg_danwei2[248], UNIT_TYPE_DEAD) == false ) ) then
set udg_dian2[2]=GetUnitLoc(udg_danwei2[248])
if ( ( udg_zhengshu2[247] == 0 ) and ( udg_zhengshu2[248] == 0 ) and ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[246]) <= 425.00 ) and ( DistanceBetweenPoints(udg_dian2[2], udg_dian2[246]) <= 800.00 ) ) then
set udg_zhengshu2[248]=1
set udg_dian2[248]=GetUnitLoc(udg_danwei2[246])
call SaveLocationHandle(YDHT, GetHandleId(udg_danwei2[246]), 0xE98FFDB6, GetUnitLoc(udg_danwei2[248]))
call SetUnitVertexColor(udg_danwei2[246], 255, 255, 255, 0)
set udg_aXUNHUAN[54]=249
loop
exitwhen udg_aXUNHUAN[54] > 255
set udg_danwei2[udg_aXUNHUAN[54]]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[246]), 0x6530304A, udg_dian2[246], AngleBetweenPoints(udg_dian2[246], udg_dian2[2]))
call SetUnitTimeScale(udg_danwei2[udg_aXUNHUAN[54]], 0.85)
call SetUnitVertexColor(udg_danwei2[udg_aXUNHUAN[54]], ( 110 - ( ( udg_aXUNHUAN[54] - 248 ) * 15 ) ), ( 110 - ( ( udg_aXUNHUAN[54] - 248 ) * 15 ) ), ( 110 - ( ( udg_aXUNHUAN[54] - 248 ) * 15 ) ), ( 110 - ( ( udg_aXUNHUAN[54] - 248 ) * 15 ) ))
call SetUnitAnimationByIndex(udg_danwei2[udg_aXUNHUAN[54]], 4)
set udg_aXUNHUAN[54]=udg_aXUNHUAN[54] + 1
endloop
call SetUnitVertexColor(udg_danwei2[249], 150, 150, 150, 255)
call StopSoundBJ(gg_snd_SearingArrowTarget2, false)
call PlaySoundAtPointBJ(gg_snd_SearingArrowTarget2, 100, udg_dian2[246], GetLocationZ(udg_dian2[246]))
else
endif
call RemoveLocation(udg_dian[2])
else
endif
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(425.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_baka_2Func001Func010A)
call ForGroupBJ(udg_danweizu2[246], function Trig_baka_2Func001Func011A)
if ( ( udg_zhengshu2[248] == 0 ) ) then
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[246]) <= 425.00 ) and ( DistanceBetweenPoints(udg_dian2[246], udg_dian2[247]) >= ( GetUnitMoveSpeed(udg_danwei2[246]) * ( 0.03 * 0.90 ) ) ) and ( DistanceBetweenPoints(udg_dian2[246], udg_dian2[247]) <= ( GetUnitMoveSpeed(udg_danwei2[246]) * ( 0.03 * 1.10 ) ) ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[246], 10.00, AngleBetweenPoints(udg_dian2[247], udg_dian2[246]))
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[246], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[246], GetLocationY(udg_dian2[1]))
else
endif
call RemoveLocation(udg_dian2[1])
else
endif
else
endif
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[246])
call RemoveLocation(udg_dian2[247])
call RemoveLocation(udg_dian[0])
set udg_dian2[247]=GetUnitLoc(udg_danwei2[246])
else
call ForGroupBJ(udg_danweizu2[246], function Trig_baka_2Func001Func001A)
call RemoveLocation(udg_dian2[247])
endif
if ( ( udg_zhengshu2[248] != 0 ) ) then
if ( ( udg_zhengshu2[248] < 25 ) ) then
set udg_dian2[2]=GetUnitLoc(udg_danwei2[248])
if ( ( udg_dian2[2] == null ) ) then
set udg_dian2[2]=Location(0, 0)
else
endif
if ( ( udg_danwei2[248] != null ) and ( GetUnitTypeId(udg_danwei2[248]) != 0 ) and ( IsUnitType(udg_danwei2[248], UNIT_TYPE_DEAD) == false ) and ( YDWEDistanceBetweenUnits(udg_danwei2[246] , udg_danwei2[248]) < 2000.00 ) ) then
call MoveLocation(LoadLocationHandle(YDHT, GetHandleId(udg_danwei2[246]), 0xE98FFDB6), GetLocationX(udg_dian2[2]), GetLocationY(udg_dian2[2]))
else
call MoveLocation(udg_dian2[2], GetLocationX(LoadLocationHandle(YDHT, GetHandleId(udg_danwei2[246]), 0xE98FFDB6)), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(udg_danwei2[246]), 0xE98FFDB6)))
endif
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[248], ( ( ( DistanceBetweenPoints(udg_dian2[248], udg_dian2[2]) - 100.00 ) / 25.00 ) * I2R(udg_zhengshu2[248]) ), AngleBetweenPoints(udg_dian2[248], udg_dian2[2]))
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[246], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[246], GetLocationY(udg_dian2[1]))
else
endif
set udg_aXUNHUAN[53]=249
loop
exitwhen udg_aXUNHUAN[53] > 255
set udg_dian2[3]=PolarProjectionBJ(udg_dian2[1], ( ( ( ( DistanceBetweenPoints(udg_dian2[2], udg_dian2[248]) - 100.00 ) / 400.00 ) * I2R(udg_zhengshu2[248]) ) * I2R(( udg_aXUNHUAN[53] - 248 )) ), AngleBetweenPoints(udg_dian2[2], udg_dian2[248]))
call SetUnitX(udg_danwei2[udg_aXUNHUAN[53]], GetLocationX(udg_dian2[3]))
call SetUnitY(udg_danwei2[udg_aXUNHUAN[53]], GetLocationY(udg_dian2[3]))
if ( ( ( ( 249 - udg_aXUNHUAN[53] ) + udg_zhengshu2[248] ) > 0 ) ) then
call s__maphack_SetHeight(udg_danwei2[udg_aXUNHUAN[53]] , ( s__maphack_GetHeight(udg_danwei2[udg_aXUNHUAN[53]]) + ( 5.00 * ( ( 12.00 + ( I2R(udg_aXUNHUAN[53]) - 249.00 ) ) - I2R(udg_zhengshu2[248]) ) ) ) , 0.00)
else
endif
call RemoveLocation(udg_dian2[3])
set udg_aXUNHUAN[53]=udg_aXUNHUAN[53] + 1
endloop
set udg_zhengshu2[248]=( udg_zhengshu2[248] + 1 )
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
else
set udg_zhengshu2[247]=100
set udg_zhengshu2[248]=0
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl", udg_danwei2[248], "chest"))
call UnitRemoveBuffBJ(0x4253544E, udg_danwei2[246])
call UnitRemoveBuffBJ(0x42505345, udg_danwei2[246])
if ( ( IsUnitType(udg_danwei2[248], UNIT_TYPE_ANCIENT) == false ) ) then
call UnitDamageTarget(udg_danwei2[246], udg_danwei2[248], ( I2R(GetHeroAgi(udg_danwei2[246], true)) * 2.00 ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_METAL_HEAVY_SLICE)
else
endif
call SetUnitVertexColor(udg_danwei2[246], 255, 255, 255, 255)
call SelectUnitForPlayerSingle(udg_danwei2[246], GetOwningPlayer(udg_danwei2[246]))
set udg_aXUNHUAN[52]=249
loop
exitwhen udg_aXUNHUAN[52] > 255
call RemoveUnit(udg_danwei2[udg_aXUNHUAN[52]])
set udg_danwei2[udg_aXUNHUAN[52]]=null
set udg_aXUNHUAN[52]=udg_aXUNHUAN[52] + 1
endloop
set udg_danwei2[248]=null
call RemoveLocation(udg_dian2[248])
endif
else
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_baka_2 takes nothing returns nothing
set gg_trg_baka_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_baka_2, udg_times[246])
call TriggerAddAction(gg_trg_baka_2, function Trig_baka_2Actions)
endfunction
function Trig_baka_5Conditions takes nothing returns boolean
return ( ( GetIssuedOrderIdBJ() == String2OrderIdBJ("attack") ) and ( IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(GetOrderTargetUnit())) == true ) and ( udg_zhengshu2[248] == 0 ) )
endfunction
function Trig_baka_5Actions takes nothing returns nothing
set udg_danwei2[248]=GetOrderTargetUnit()
endfunction
function InitTrig_baka_5 takes nothing returns nothing
set gg_trg_baka_5=CreateTrigger()
call TriggerAddCondition(gg_trg_baka_5, Condition(function Trig_baka_5Conditions))
call TriggerAddAction(gg_trg_baka_5, function Trig_baka_5Actions)
endfunction
function Trig_baka_6Conditions takes nothing returns boolean
return ( ( udg_zhengshu2[248] == 0 ) )
endfunction
function Trig_baka_6Actions takes nothing returns nothing
set udg_danwei2[248]=null
endfunction
function InitTrig_baka_6 takes nothing returns nothing
set gg_trg_baka_6=CreateTrigger()
call TriggerAddCondition(gg_trg_baka_6, Condition(function Trig_baka_6Conditions))
call TriggerAddAction(gg_trg_baka_6, function Trig_baka_6Actions)
endfunction
function Trig_zhidianzhena_1Conditions takes nothing returns boolean
return ( ( GetLearnedSkill() == 0x41556373 ) and ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true ) )
endfunction
function Trig_zhidianzhena_1Actions takes nothing returns nothing
set udg_danwei[185]=GetTriggerUnit()
if ( ( GetUnitAbilityLevel(udg_danwei[185], 0x41556373) == 1 ) ) then
call UnitAddAbility(udg_danwei[185], 0x41303251)
set udg_Zhengshu[37]=1
else
endif
set udg_danwei[185]=null
endfunction
function InitTrig_zhidianzhena_1 takes nothing returns nothing
set gg_trg_zhidianzhena_1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_zhidianzhena_1, EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(gg_trg_zhidianzhena_1, Condition(function Trig_zhidianzhena_1Conditions))
call TriggerAddAction(gg_trg_zhidianzhena_1, function Trig_zhidianzhena_1Actions)
endfunction
function Trig_zhidianzhena_3Actions takes nothing returns nothing
call UnitAddAbility(udg_danwei[278], 0x41303251)
set udg_Zhengshu[37]=1
set udg_danwei[278]=null
endfunction
function InitTrig_zhidianzhena_3 takes nothing returns nothing
set gg_trg_zhidianzhena_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_zhidianzhena_3, udg_jishiqi[80])
call TriggerAddAction(gg_trg_zhidianzhena_3, function Trig_zhidianzhena_3Actions)
endfunction
function Trig_zhuizongdaodan_1Actions takes nothing returns nothing
set udg_danwei2[48]=GetSpellAbilityUnit()
set udg_danwei2[49]=GetSpellTargetUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[48])
set udg_dian2[1]=GetUnitLoc(udg_danwei2[49])
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], 50.00, AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
set udg_danwei2[50]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[48]), 0x65303253, udg_dian2[2], AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
call GroupAddUnit(udg_DAZE[0], udg_danwei2[50])
call GroupAddUnit(udg_DAZE[1], udg_danwei2[50])
call GroupAddUnit(udg_DAZE[2], udg_danwei2[50])
call s__maphack_SetHeight(udg_danwei2[50] , 50.00 , 0.00)
call SetUnitTimeScale(udg_danwei2[50], 0.00)
call SetUnitColor(udg_danwei2[50], ConvertPlayerColor(12))
set udg_zhengshu2[50]=- 50
call StartTimerBJ(udg_times[50], true, 0.04)
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
endfunction
function InitTrig_zhuizongdaodan_1 takes nothing returns nothing
set gg_trg_zhuizongdaodan_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_zhuizongdaodan_1 , 3 , 0x4130364F)
call TriggerAddAction(gg_trg_zhuizongdaodan_1, function Trig_zhuizongdaodan_1Actions)
endfunction
function Trig_zhuizongdaodan_2Func001Func005Func011Func007A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( udg_danwei2[1] != udg_danwei2[49] ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitAliveBJ(udg_danwei2[1]) == true ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[48])) == true ) ) then
call UnitDamageTarget(udg_danwei2[48], udg_danwei2[1], ( ( 25.00 + ( I2R(GetHeroInt(udg_danwei2[48], true)) * 0.50 ) ) + ( 25.00 * I2R(GetUnitAbilityLevel(udg_danwei2[48], 0x4130364F)) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_zhuizongdaodan_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( IsUnitPausedBJ(udg_danwei2[50]) == false ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[50])
set udg_dian2[1]=GetUnitLoc(udg_danwei2[49])
set udg_zhengshu2[50]=( udg_zhengshu2[50] + 1 )
if ( ( IsUnitType(udg_danwei2[49], UNIT_TYPE_DEAD) == false ) and ( IsUnitType(udg_danwei2[50], UNIT_TYPE_DEAD) == false ) and ( udg_zhengshu2[50] < 125 ) and ( IsTerrainPathableBJ(udg_dian2[0], PATHING_TYPE_FLYABILITY) == false ) ) then
if ( ( udg_zhengshu2[50] == 0 ) ) then
call SetUnitTimeScale(udg_danwei2[50], 1.00)
call PlaySoundOnUnitBJ(gg_snd_DruidOfTheTalonMissileHit2, 100, udg_danwei2[50])
call PlaySoundOnUnitBJ(gg_snd_DruidOfTheTalonMissileLaunch1, 100, udg_danwei2[50])
else
endif
if ( ( udg_zhengshu2[50] > 0 ) ) then
if ( ( UnitHasBuffBJ(udg_danwei2[49], 0x42303058) == true ) ) then
call s__baka_IssueTargetOrderById2(udg_danwei2[50] , 851986 , udg_danwei2[49])
call SetUnitFacing(udg_danwei2[50], AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], Pow(I2R(IMinBJ(udg_zhengshu2[50], 25)), 1.40), AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
else
call IssueImmediateOrderById(udg_danwei2[50], 851972)
if ( ( GetRandomInt(1, 2) == 1 ) ) then
call SetUnitFacing(udg_danwei2[50], ( AngleBetweenPoints(udg_dian2[0], udg_dian2[1]) + GetRandomReal(- 60.00, 60.00) ))
else
call SetUnitFacing(udg_danwei2[50], ( GetUnitFacing(udg_danwei2[50]) + GetRandomReal(- 60.00, 60.00) ))
endif
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], Pow(RMinBJ(I2R(udg_zhengshu2[50]), 25.00), 1.40), GetUnitFacing(udg_danwei2[50]))
endif
call SetUnitX(udg_danwei2[50], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[50], GetLocationY(udg_dian2[2]))
call RemoveLocation(udg_dian2[2])
else
call s__baka_IssueTargetOrderById2(udg_danwei2[50] , 851986 , udg_danwei2[49])
call SetUnitFacing(udg_danwei2[50], AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
endif
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) <= 70.00 ) ) then
set udg_zhengshu2[50]=125
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Volcano\\VolcanoMissile.mdl", udg_danwei2[49], "chest"))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\Incinerate\\FireLordDeathExplode.mdl", udg_dian2[0]))
call IssueImmediateOrderById(udg_danwei2[50], 852127)
call UnitDamageTarget(udg_danwei2[48], udg_danwei2[49], ( ( 50.00 + I2R(GetHeroInt(udg_danwei2[48], true)) ) + ( 50.00 * I2R(GetUnitAbilityLevel(udg_danwei2[48], 0x4130364F)) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(225.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_zhuizongdaodan_2Func001Func005Func011Func007A)
call DestroyGroup(udg_xuanqu)
else
endif
else
call UnitRemoveBuffBJ(0x42303058, udg_danwei2[49])
call KillUnit(udg_danwei2[50])
call PauseTimer(udg_times[50])
set udg_danwei2[48]=null
set udg_danwei2[49]=null
set udg_danwei2[50]=null
endif
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_zhuizongdaodan_2 takes nothing returns nothing
set gg_trg_zhuizongdaodan_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_zhuizongdaodan_2, udg_times[50])
call TriggerAddAction(gg_trg_zhuizongdaodan_2, function Trig_zhuizongdaodan_2Actions)
endfunction
function Trig_danmu_1Conditions takes nothing returns boolean
return ( ( GetLearnedSkill() == 0x41616D6B ) and ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true ) )
endfunction
function Trig_danmu_1Actions takes nothing returns nothing
set udg_danwei[185]=GetTriggerUnit()
if ( ( GetUnitAbilityLevel(udg_danwei[185], 0x41616D6B) == 1 ) ) then
call TriggerRegisterUnitEvent(gg_trg_danmu_3, udg_danwei[185], EVENT_UNIT_ISSUED_ORDER)
call TriggerRegisterUnitEvent(gg_trg_danmu_3, udg_danwei[185], EVENT_UNIT_ISSUED_POINT_ORDER)
call TriggerRegisterUnitEvent(gg_trg_danmu_3, udg_danwei[185], EVENT_UNIT_ISSUED_TARGET_ORDER)
else
endif
set udg_danwei[185]=null
endfunction
function InitTrig_danmu_1 takes nothing returns nothing
set gg_trg_danmu_1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_danmu_1, EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(gg_trg_danmu_1, Condition(function Trig_danmu_1Conditions))
call TriggerAddAction(gg_trg_danmu_1, function Trig_danmu_1Actions)
endfunction
function Trig_danmu_2Func001Func004Func004A takes nothing returns nothing
set udg_Danwei[79]=GetEnumUnit()
if ( ( udg_Danwei[79] != udg_Danwei[78] ) and ( IsUnitType(udg_Danwei[79], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_Danwei[79], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_Danwei[79], UNIT_TYPE_DEAD) == false ) and ( IsUnitVisible(udg_Danwei[79], GetOwningPlayer(udg_Danwei[77])) == true ) and ( IsUnitEnemy(udg_Danwei[79], GetOwningPlayer(udg_Danwei[77])) == true ) ) then
set udg_Dian[79]=GetUnitLoc(udg_Danwei[79])
set udg_Danwei[80]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[77]), 0x4E303139, udg_Dian[77], AngleBetweenPoints(udg_Dian[77], udg_Dian[79]))
call SetHeroLevelBJ(udg_Danwei[80], 30, false)
call SetHeroAgi(udg_Danwei[80], ( GetHeroAgi(udg_Danwei[77], false) + ( 3 * GetUnitAbilityLevel(udg_Danwei[77], 0x41616D6B) ) ), true)
call SetHeroInt(udg_Danwei[80], ( GetHeroInt(udg_Danwei[77], false) + ( 3 * GetUnitAbilityLevel(udg_Danwei[77], 0x41616D6B) ) ), true)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=6
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ( ( GetItemTypeId(UnitItemInSlotBJ(udg_Danwei[77], bj_forLoopAIndex)) == 0x726E7370 ) ) then
else
if ( ( GetItemTypeId(UnitItemInSlotBJ(udg_Danwei[77], bj_forLoopAIndex)) == 0x6F76656E ) ) then
else
call UnitAddItemByIdSwapped(GetItemTypeId(UnitItemInSlotBJ(udg_Danwei[77], bj_forLoopAIndex)), udg_Danwei[80])
endif
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call SetUnitX(udg_Danwei[80], GetLocationX(udg_Dian[77]))
call SetUnitY(udg_Danwei[80], GetLocationY(udg_Dian[77]))
call UnitAddAbility(udg_Danwei[80], 0x416C6F63)
call s__baka_IssueTargetOrderById2(udg_Danwei[80] , 851983 , udg_Danwei[79])
call GroupAddUnit(udg_attack, udg_Danwei[80])
call ShowUnitHide(udg_Danwei[80])
set udg_Danwei[80]=null
call RemoveLocation(udg_Dian[79])
else
endif
set udg_Danwei[79]=null
endfunction
function Trig_danmu_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( GetUnitAbilityLevel(GetAttacker(), 0x41616D6B) > 0 ) ) then
set udg_Danwei[77]=GetAttacker()
set udg_Danwei[78]=GetAttackedUnitBJ()
set udg_zhengshu2[3]=GetRandomInt(1, 10)
if ( ( udg_zhengshu2[3] <= GetUnitAbilityLevel(udg_Danwei[77], 0x41616D6B) ) ) then
set udg_Dian[77]=GetUnitLoc(udg_Danwei[77])
set udg_Dian[78]=GetUnitLoc(udg_Danwei[78])
set udg_Danweizu[77]=YDWEGetUnitsInRangeOfLocAllNull(500.00 , udg_Dian[78])
call ForGroupBJ(udg_Danweizu[77], function Trig_danmu_2Func001Func004Func004A)
call DestroyGroup(udg_Danweizu[77])
call RemoveLocation(udg_Dian[77])
call RemoveLocation(udg_Dian[78])
else
endif
else
endif
set udg_Danwei[77]=null
set udg_Danwei[78]=null
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_danmu_2 takes nothing returns nothing
set gg_trg_danmu_2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_danmu_2, EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddAction(gg_trg_danmu_2, function Trig_danmu_2Actions)
endfunction
function Trig_danmu_3Func001A takes nothing returns nothing
set udg_danwei[185]=GetEnumUnit()
if ( ( GetUnitUserData(udg_danwei[185]) < 10 ) and ( GetUnitTypeId(udg_danwei[185]) == 0x4E303139 ) ) then
if ( ( GetUnitAbilityLevel(udg_danwei[185], 0x41304A54) == 1 ) ) then
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=6
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call RemoveItem(UnitItemInSlotBJ(udg_danwei[185], bj_forLoopAIndex))
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call UnitAddAbility(udg_danwei[185], 0x41304845)
call UnitAddAbility(udg_danwei[185], 0x41304A54)
else
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=6
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call RemoveItem(UnitItemInSlotBJ(udg_danwei[185], bj_forLoopAIndex))
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
endif
call s__Unit_PauseUnitMU(udg_danwei[185] , true , "地精弹幕攻击")
call SetUnitUserData(udg_danwei[185], 10)
else
endif
set udg_danwei[185]=null
endfunction
function Trig_danmu_3Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_attack, function Trig_danmu_3Func001A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_danmu_3 takes nothing returns nothing
set gg_trg_danmu_3=CreateTrigger()
call TriggerAddAction(gg_trg_danmu_3, function Trig_danmu_3Actions)
endfunction
function Trig_majiagongjiFunc001A takes nothing returns nothing
set udg_danwei[185]=GetEnumUnit()
if ( ( GetUnitUserData(udg_danwei[185]) >= 10 ) ) then
if ( ( ( ( GetUnitUserData(udg_danwei[185]) < 70 ) and ( GetUnitTypeId(udg_danwei[185]) == 0x4830304D ) ) or ( GetUnitUserData(udg_danwei[185]) < 20 ) ) ) then
call SetUnitUserData(udg_danwei[185], ( GetUnitUserData(udg_danwei[185]) + 1 ))
else
call RemoveUnit(udg_danwei[185])
endif
else
endif
set udg_danwei[185]=null
endfunction
function Trig_majiagongjiActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_attack, function Trig_majiagongjiFunc001A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_majiagongji takes nothing returns nothing
set gg_trg_majiagongji=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_majiagongji, 0.20)
call TriggerAddAction(gg_trg_majiagongji, function Trig_majiagongjiActions)
endfunction
function Trig_daodanqishe_1Actions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
set udg_danwei2[2]=GetSpellTargetUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
if ( ( udg_danwei2[2] == null ) ) then
set udg_dian2[1]=GetSpellTargetLoc()
else
set udg_dian2[1]=GetUnitLoc(udg_danwei2[2])
endif
set udg_aXUNHUAN[56]=1
loop
exitwhen udg_aXUNHUAN[56] > ( 3 + GetUnitAbilityLevel(udg_danwei2[0], 0x41303047) )
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303252, udg_dian2[0], ( AngleBetweenPoints(udg_dian2[1], udg_dian2[0]) + ( ( 20.00 + ( 5.00 * I2R(GetUnitAbilityLevel(udg_danwei2[0], 0x41303047)) ) ) - ( 10.00 * I2R(udg_aXUNHUAN[56]) ) ) ))
call GroupAddUnit(udg_DAZE[0], udg_danwei2[1])
call GroupAddUnit(udg_DAZE[1], udg_danwei2[1])
call SetUnitLifeBJ(udg_danwei2[1], ( ( I2R(GetHeroInt(udg_danwei2[0], true)) * 0.40 ) + ( 10.00 + ( 3.00 * I2R(GetUnitAbilityLevel(udg_danwei2[0], 0x41303047)) ) ) ))
call SetUnitUserData(udg_danwei2[1], ( ( R2I(DistanceBetweenPoints(udg_dian2[0], udg_dian2[1])) / 50 ) + 30 ))
call SetUnitAnimation(udg_danwei2[1], "birth")
call GroupAddUnit(udg_danweizu2[46], udg_danwei2[1])
if ( ( udg_danwei2[2] == null ) ) then
call IssuePointOrderByIdLoc(udg_danwei2[1], 851983, udg_dian2[1])
else
call s__baka_IssueTargetOrderById2(udg_danwei2[1] , 851983 , udg_danwei2[2])
endif
set udg_danwei2[1]=null
set udg_aXUNHUAN[56]=udg_aXUNHUAN[56] + 1
endloop
set udg_danwei2[0]=null
set udg_danwei2[2]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
endfunction
function InitTrig_daodanqishe_1 takes nothing returns nothing
set gg_trg_daodanqishe_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_daodanqishe_1 , 3 , 0x41303047)
call TriggerAddAction(gg_trg_daodanqishe_1, function Trig_daodanqishe_1Actions)
endfunction
function Trig_daodanqishe_2Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[46]) == false ) )
endfunction
function Trig_daodanqishe_2Func001Func003Func002A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[1], GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_daodanqishe_2Func001Func003Func014A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
set udg_dian2[2]=GetUnitLoc(udg_danwei2[1])
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_HERO) == false ) ) then
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[1])
else
endif
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[2]) <= 150.00 ) ) then
call SetUnitUserData(udg_danwei2[0], - 100)
call GroupClear(udg_xuanqu)
else
endif
call RemoveLocation(udg_dian2[2])
else
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[1])
endif
set udg_danwei2[1]=null
endfunction
function Trig_daodanqishe_2Func001A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
if ( ( GetUnitUserData(udg_danwei2[0]) > 0 ) and ( IsTerrainPathableBJ(udg_dian2[0], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 40.00, GetUnitFacing(udg_danwei2[0]))
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(500.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_daodanqishe_2Func001Func003Func014A)
if ( ( IsUnitGroupEmptyBJ(udg_xuanqu) == false ) ) then
set udg_danwei2[1]=FirstOfGroup(udg_xuanqu)
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
call SetUnitFacing(udg_danwei2[0], AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) + 1 ))
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[2])
else
endif
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[1])
else
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(300.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_daodanqishe_2Func001Func003Func002A)
call DestroyGroup(udg_xuanqu)
call KillUnit(udg_danwei2[0])
call GroupRemoveUnit(udg_danweizu2[46], udg_danwei2[0])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\Mortar\\MortarMissile.mdl", udg_dian2[0]))
endif
call RemoveLocation(udg_dian2[0])
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_daodanqishe_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[46], function Trig_daodanqishe_2Func001A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_daodanqishe_2 takes nothing returns nothing
set gg_trg_daodanqishe_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_daodanqishe_2, udg_Times[3])
call TriggerAddCondition(gg_trg_daodanqishe_2, Condition(function Trig_daodanqishe_2Conditions))
call TriggerAddAction(gg_trg_daodanqishe_2, function Trig_daodanqishe_2Actions)
endfunction
function Trig_ddActions takes nothing returns nothing
set udg_danwei[46]=GetTriggerUnit()
set udg_dian[43]=GetUnitLoc(udg_danwei[46])
set udg_dian[44]=PolarProjectionBJ(udg_dian[43], 200.00, AngleBetweenPoints(udg_dian[43], udg_dian[42]))
set udg_dian[42]=GetSpellTargetLoc()
call PlaySoundOnUnitBJ(gg_snd_MortarImpact, 100, udg_danwei[46])
call CreateNUnitsAtLoc(1, 0x65303044, GetOwningPlayer(udg_danwei[46]), udg_dian[43], 0.00)
set udg_danwei[47]=bj_lastCreatedUnit
call CreateNUnitsAtLoc(1, 0x65303046, GetOwningPlayer(udg_danwei[46]), udg_dian[42], bj_UNIT_FACING)
set udg_danwei[49]=bj_lastCreatedUnit
call SetUnitVertexColor(udg_danwei[49], 255, 255, 255, 100)
call StartTimerBJ(udg_jishiqi[18], true, 0.02)
set udg_zhengshu2[31]=0
endfunction
function InitTrig_dd takes nothing returns nothing
set gg_trg_dd=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_dd , 3 , 0x41303042)
call TriggerAddAction(gg_trg_dd, function Trig_ddActions)
endfunction
function Trig_dd2Func001Func004Func019A takes nothing returns nothing
set udg_danwei[144]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[144], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei[144], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitAliveBJ(udg_danwei[144]) == true ) and ( IsUnitEnemy(udg_danwei[144], GetOwningPlayer(udg_danwei[46])) == true ) ) then
call UnitDamageTarget(udg_danwei[46], udg_danwei[144], ( ( 100.00 + ( I2R(GetHeroInt(udg_danwei[46], true)) * 1.50 ) ) + ( 200.00 * I2R(GetUnitAbilityLevel(udg_danwei[46], 0x41303042)) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei[144]=null
endfunction
function Trig_dd2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_zhengshu2[31] <= 40 ) ) then
set udg_zhengshu2[31]=( udg_zhengshu2[31] + 1 )
if ( ( udg_zhengshu2[31] < 40 ) ) then
call s__maphack_SetHeight(udg_danwei[47] , ( s__maphack_GetHeight(udg_danwei[47]) + I2R(udg_zhengshu2[31]) ) , 0.00)
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[46]), 0x65303246, udg_dian[43], GetRandomReal(0, 360.00))
call UnitApplyTimedLife(udg_danwei2[0], 0x42487765, 0.10)
call s__maphack_SetHeight(udg_danwei2[0] , s__maphack_GetHeight(udg_danwei[47]) , 0.00)
call SetUnitScale(udg_danwei2[0], ( 2.00 + ( I2R(udg_zhengshu2[31]) * 0.05 ) ), ( 2.00 + ( I2R(udg_zhengshu2[31]) * 0.05 ) ), ( 2.00 + ( I2R(udg_zhengshu2[31]) * 0.05 ) ))
set udg_danwei2[0]=null
else
if ( ( udg_zhengshu2[31] == 40 ) ) then
call RemoveUnit(udg_danwei[47])
set udg_danwei2[31]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[46]), 0x65303245, udg_dian[42], 0.00)
call s__maphack_SetHeight(udg_danwei2[31] , 1500.00 , 0.00)
else
endif
endif
else
if ( ( s__maphack_GetHeight(udg_danwei2[31]) >= 10.00 ) ) then
call s__maphack_SetHeight(udg_danwei2[31] , ( s__maphack_GetHeight(udg_danwei2[31]) - 75.00 ) , 0.00)
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[46]), 0x65303246, udg_dian[42], GetRandomReal(0, 360.00))
call UnitApplyTimedLife(udg_danwei2[0], 0x42487765, 0.10)
call s__maphack_SetHeight(udg_danwei2[0] , s__maphack_GetHeight(udg_danwei2[31]) , 0.00)
call SetUnitScale(udg_danwei2[0], 2.25, 2.25, 2.25)
set udg_danwei2[0]=null
else
call CreateNUnitsAtLoc(1, 0x65303045, GetOwningPlayer(udg_danwei[46]), udg_dian[42], bj_UNIT_FACING)
set udg_danwei[48]=bj_lastCreatedUnit
call SetUnitAnimation(udg_danwei[48], "death")
call SetUnitTimeScale(udg_danwei[48], 0.50)
call UnitApplyTimedLife(udg_danwei[48], 0x42487765, 3.20)
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl", udg_dian[42]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\Incinerate\\FireLordDeathExplode.mdl", udg_dian[42]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\Volcano\\VolcanoMissile.mdl", udg_dian[42]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\Volcano\\VolcanoDeath.mdl", udg_dian[42]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl", udg_dian[42]))
set udg_danweizu[14]=YDWEGetUnitsInRangeOfLocAllNull(450.00 , udg_dian[42])
call ForGroupBJ(udg_danweizu[14], function Trig_dd2Func001Func004Func019A)
call RemoveUnit(udg_danwei[49])
call KillUnit(udg_danwei2[31])
set udg_danwei[46]=null
set udg_danwei[47]=null
set udg_danwei[48]=null
set udg_danwei[49]=null
set udg_danwei2[31]=null
call RemoveLocation(udg_dian[42])
call RemoveLocation(udg_dian[43])
call RemoveLocation(udg_dian[44])
call PauseTimer(udg_jishiqi[18])
call DestroyGroup(udg_danweizu[14])
endif
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_dd2 takes nothing returns nothing
set gg_trg_dd2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_dd2, udg_jishiqi[18])
call TriggerAddAction(gg_trg_dd2, function Trig_dd2Actions)
endfunction
function Trig_weixingshexian_0Conditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x4130364E ) )
endfunction
function Trig_weixingshexian_0Actions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
set udg_dian2[0]=GetSpellTargetLoc()
if ( ( IsLocationVisibleToPlayer(udg_dian2[0], GetOwningPlayer(udg_danwei2[0])) == false ) ) then
call IssueImmediateOrderById(udg_danwei2[0], 851972)
call DisplayTextToPlayer(s__baka_SPlayer(( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 ) - 1), 0, 0, "TRIGSTR_6952")
else
endif
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
endfunction
function InitTrig_weixingshexian_0 takes nothing returns nothing
set gg_trg_weixingshexian_0=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_weixingshexian_0 , 1 , 0x4130364E)
call TriggerAddCondition(gg_trg_weixingshexian_0, Condition(function Trig_weixingshexian_0Conditions))
call TriggerAddAction(gg_trg_weixingshexian_0, function Trig_weixingshexian_0Actions)
endfunction
function Trig_weixingshexian_1Actions takes nothing returns nothing
set udg_danwei[50]=GetTriggerUnit()
set udg_dian[46]=GetSpellTargetLoc()
set udg_danwei2[47]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[50]), 0x65303255, udg_dian[46], 0.00)
call StartTimerBJ(udg_jishiqi[19], true, 0.10)
set udg_zhengshu2[47]=0
endfunction
function InitTrig_weixingshexian_1 takes nothing returns nothing
set gg_trg_weixingshexian_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_weixingshexian_1 , 3 , 0x4130364E)
call TriggerAddAction(gg_trg_weixingshexian_1, function Trig_weixingshexian_1Actions)
endfunction
function Trig_weixingshexian_2Func002Func003Func002A takes nothing returns nothing
set udg_danwei[145]=GetEnumUnit()
if ( ( IsUnitAliveBJ(udg_danwei[145]) == true ) and ( IsUnitType(udg_danwei[145], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei[145], udg_danweizu2[369]) == false ) and ( IsUnitEnemy(udg_danwei[145], GetOwningPlayer(udg_danwei[50])) == true ) ) then
call UnitDamageTarget(udg_danwei[50], udg_danwei[145], ( I2R(GetHeroInt(udg_danwei[50], true)) * 0.50 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei[145]=null
endfunction
function Trig_weixingshexian_2Func002Func003Func005Func007A takes nothing returns nothing
set udg_danwei[145]=GetEnumUnit()
if ( ( IsUnitAliveBJ(udg_danwei[145]) == true ) and ( IsUnitType(udg_danwei[145], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei[145], udg_danweizu2[369]) == false ) and ( IsUnitEnemy(udg_danwei[145], GetOwningPlayer(udg_danwei[50])) == true ) ) then
call UnitDamageTarget(udg_danwei[50], udg_danwei[145], ( I2R(GetHeroInt(udg_danwei[50], true)) * 5.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei[145]=null
endfunction
function Trig_weixingshexian_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu2[47]=( udg_zhengshu2[47] + 1 )
if ( ( udg_zhengshu2[47] <= 10 ) ) then
call SetUnitFacing(udg_danwei2[47], ( GetUnitFacing(udg_danwei2[47]) - 30.00 ))
call SetUnitScale(udg_danwei2[47], ( 8.00 - ( 0.50 * I2R(udg_zhengshu2[47]) ) ), ( 8.00 - ( 0.50 * I2R(udg_zhengshu2[47]) ) ), ( 8.00 - ( 0.50 * I2R(udg_zhengshu2[47]) ) ))
if ( ( udg_zhengshu2[47] == 10 ) ) then
call RemoveUnit(udg_danwei2[47])
set udg_danwei2[47]=null
call PlaySoundAtPointBJ(gg_snd_DarkSummoningLaunch1, 100, udg_dian[46], GetLocationZ(udg_dian[46]))
set udg_aXUNHUAN[58]=1
loop
exitwhen udg_aXUNHUAN[58] > 4
call CreateNUnitsAtLoc(1, 0x65303254, GetOwningPlayer(udg_danwei[50]), udg_dian[46], GetRandomReal(0, 360.00))
set udg_danwei[52]=bj_lastCreatedUnit
call UnitApplyTimedLife(udg_danwei[52], 0x42487765, 0.80)
set udg_danwei[52]=null
set udg_aXUNHUAN[58]=udg_aXUNHUAN[58] + 1
endloop
else
endif
else
if ( ( udg_zhengshu2[47] < 17 ) ) then
set udg_danweizu[16]=YDWEGetUnitsInRangeOfLocAllNull(300.00 , udg_dian[46])
call ForGroupBJ(udg_danweizu[16], function Trig_weixingshexian_2Func002Func003Func002A)
call DestroyGroup(udg_danweizu[16])
else
if ( ( udg_zhengshu2[47] == 17 ) ) then
call StopSoundBJ(gg_snd_BuildingDeathLargeHuman, false)
call PlaySoundAtPointBJ(gg_snd_BuildingDeathLargeHuman, 100, udg_dian[46], GetLocationZ(udg_dian[46]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl", udg_dian[46]))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl", udg_dian[46]))
set udg_aXUNHUAN[59]=1
loop
exitwhen udg_aXUNHUAN[59] > 4
call CreateNUnitsAtLoc(1, 0x65303048, GetOwningPlayer(udg_danwei[50]), udg_dian[46], GetRandomReal(0, 360.00))
set udg_danwei[52]=bj_lastCreatedUnit
call UnitApplyTimedLife(udg_danwei[52], 0x42487765, 0.80)
set udg_danwei[52]=null
set udg_aXUNHUAN[59]=udg_aXUNHUAN[59] + 1
endloop
set udg_danweizu[16]=YDWEGetUnitsInRangeOfLocAllNull(400.00 , udg_dian[46])
call ForGroupBJ(udg_danweizu[16], function Trig_weixingshexian_2Func002Func003Func005Func007A)
call DestroyGroup(udg_danweizu[16])
set udg_danwei[50]=null
call RemoveLocation(udg_dian[46])
call PauseTimer(udg_jishiqi[19])
else
endif
endif
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_weixingshexian_2 takes nothing returns nothing
set gg_trg_weixingshexian_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_weixingshexian_2, udg_jishiqi[19])
call TriggerAddAction(gg_trg_weixingshexian_2, function Trig_weixingshexian_2Actions)
endfunction
function Trig_lzActions takes nothing returns nothing
set udg_danwei[54]=GetTriggerUnit()
set udg_danwei[55]=GetSpellTargetUnit()
set udg_zhengshu[36]=0
call EnableTrigger(gg_trg_lz2)
endfunction
function InitTrig_lz takes nothing returns nothing
set gg_trg_lz=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_lz , 3 , 0x41303044)
call TriggerAddAction(gg_trg_lz, function Trig_lzActions)
endfunction
function Trig_lz2Actions takes nothing returns nothing
if ( ( ( IsUnitPausedBJ(udg_danwei[54]) == false ) or ( IsUnitType(udg_danwei[55], UNIT_TYPE_DEAD) == true ) ) ) then
set udg_dian[50]=GetUnitLoc(udg_danwei[54])
set udg_dian[51]=GetUnitLoc(udg_danwei[55])
if ( ( DistanceBetweenPoints(udg_dian[50], udg_dian[51]) >= 125.00 ) and ( IsUnitType(udg_danwei[54], UNIT_TYPE_DEAD) == false ) and ( IsUnitType(udg_danwei[55], UNIT_TYPE_DEAD) == false ) ) then
set udg_dian[52]=PolarProjectionBJ(udg_dian[50], 60.00, AngleBetweenPoints(udg_dian[50], udg_dian[51]))
call SetUnitX(udg_danwei[54], GetLocationX(udg_dian[52]))
call SetUnitY(udg_danwei[54], GetLocationY(udg_dian[52]))
set udg_danwei[56]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[54]), 0x6530304C, udg_dian[50], AngleBetweenPoints(udg_dian[52], udg_dian[51]))
call UnitApplyTimedLife(udg_danwei[56], 0x42487765, 0.15)
call SetUnitVertexColor(udg_danwei[56], 255, 255, 255, 128)
call SetUnitAnimation(udg_danwei[56], "walk")
set udg_danwei[56]=null
call RemoveLocation(udg_dian[52])
else
call DisableTrigger(GetTriggeringTrigger())
call StartTimerBJ(udg_jishiqi[20], true, 0.15)
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[54]), 0x65303130, udg_dian[50], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304F39)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_danwei[54])
set udg_Danwei[92]=null
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[55]), 0x65303130, udg_dian[51], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304F4E)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_danwei[55])
set udg_Danwei[92]=null
endif
call RemoveLocation(udg_dian[50])
call RemoveLocation(udg_dian[51])
else
endif
endfunction
function InitTrig_lz2 takes nothing returns nothing
set gg_trg_lz2=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_lz2, 0.01)
call TriggerAddAction(gg_trg_lz2, function Trig_lz2Actions)
endfunction
function Trig_lz3Actions takes nothing returns nothing
set udg_zhengshu[36]=( udg_zhengshu[36] + 1 )
if ( ( udg_zhengshu[36] == 1 ) ) then
call SetUnitTimeScale(udg_danwei[54], 6.00)
call SetUnitAnimation(udg_danwei[54], "attack")
if ( ( UnitHasBuffBJ(udg_danwei[54], 0x42303137) == true ) ) then
call UnitDamageTarget(udg_danwei[54], udg_danwei[55], ( I2R(GetHeroAgi(udg_danwei[54], true)) * 0.50 ), true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_SLICE)
else
call UnitDamageTarget(udg_danwei[54], udg_danwei[55], ( I2R(GetHeroAgi(udg_danwei[54], true)) * 0.38 ), true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_SLICE)
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl", udg_danwei[54], "weapon"))
else
endif
if ( ( udg_zhengshu[36] == 2 ) ) then
call SetUnitAnimation(udg_danwei[54], "attack 2")
if ( ( UnitHasBuffBJ(udg_danwei[54], 0x42303137) == true ) ) then
call UnitDamageTarget(udg_danwei[54], udg_danwei[55], ( I2R(GetHeroAgi(udg_danwei[54], true)) * 0.50 ), true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_SLICE)
else
call UnitDamageTarget(udg_danwei[54], udg_danwei[55], ( I2R(GetHeroAgi(udg_danwei[54], true)) * 0.37 ), true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_SLICE)
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl", udg_danwei[54], "weapon"))
else
endif
if ( ( udg_zhengshu[36] == 3 ) ) then
call SetUnitAnimation(udg_danwei[54], "attack slam")
if ( ( UnitHasBuffBJ(udg_danwei[54], 0x42303137) == true ) ) then
call UnitDamageTarget(udg_danwei[54], udg_danwei[55], ( I2R(GetHeroAgi(udg_danwei[54], true)) * 0.50 ), true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_SLICE)
else
call UnitDamageTarget(udg_danwei[54], udg_danwei[55], ( I2R(GetHeroAgi(udg_danwei[54], true)) * 0.38 ), true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_SLICE)
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl", udg_danwei[54], "weapon"))
else
endif
if ( ( udg_zhengshu[36] == 4 ) ) then
call SetUnitAnimation(udg_danwei[54], "spell")
if ( ( UnitHasBuffBJ(udg_danwei[54], 0x42303137) == true ) ) then
call UnitDamageTarget(udg_danwei[54], udg_danwei[55], ( I2R(GetHeroAgi(udg_danwei[54], true)) * 0.50 ), true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_SLICE)
else
call UnitDamageTarget(udg_danwei[54], udg_danwei[55], ( I2R(GetHeroAgi(udg_danwei[54], true)) * 0.37 ), true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_SLICE)
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl", udg_danwei[54], "weapon"))
else
endif
if ( ( udg_zhengshu[36] == 5 ) ) then
call SetUnitAnimation(udg_danwei[54], "attack")
if ( ( UnitHasBuffBJ(udg_danwei[54], 0x42303137) == true ) ) then
call UnitDamageTarget(udg_danwei[54], udg_danwei[55], ( I2R(GetHeroAgi(udg_danwei[54], true)) * 0.50 ), true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_SLICE)
else
call UnitDamageTarget(udg_danwei[54], udg_danwei[55], ( I2R(GetHeroAgi(udg_danwei[54], true)) * 0.38 ), true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_SLICE)
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl", udg_danwei[54], "weapon"))
else
endif
if ( ( udg_zhengshu[36] == 6 ) ) then
call SetUnitAnimation(udg_danwei[54], "attack 2")
if ( ( UnitHasBuffBJ(udg_danwei[54], 0x42303137) == true ) ) then
call UnitDamageTarget(udg_danwei[54], udg_danwei[55], ( I2R(GetHeroAgi(udg_danwei[54], true)) * 0.50 ), true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_SLICE)
else
call UnitDamageTarget(udg_danwei[54], udg_danwei[55], ( I2R(GetHeroAgi(udg_danwei[54], true)) * 0.37 ), true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_SLICE)
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl", udg_danwei[54], "weapon"))
else
endif
if ( ( udg_zhengshu[36] == 7 ) ) then
call SetUnitAnimation(udg_danwei[54], "attack slam")
if ( ( UnitHasBuffBJ(udg_danwei[54], 0x42303137) == true ) ) then
call UnitDamageTarget(udg_danwei[54], udg_danwei[55], ( I2R(GetHeroAgi(udg_danwei[54], true)) * 0.50 ), true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_SLICE)
else
call UnitDamageTarget(udg_danwei[54], udg_danwei[55], ( I2R(GetHeroAgi(udg_danwei[54], true)) * 0.38 ), true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_SLICE)
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl", udg_danwei[54], "weapon"))
else
endif
if ( ( udg_zhengshu[36] == 8 ) ) then
call SetUnitAnimation(udg_danwei[54], "spell")
if ( ( UnitHasBuffBJ(udg_danwei[54], 0x42303137) == true ) ) then
call UnitDamageTarget(udg_danwei[54], udg_danwei[55], ( I2R(GetHeroAgi(udg_danwei[54], true)) * 0.50 ), true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_SLICE)
else
call UnitDamageTarget(udg_danwei[54], udg_danwei[55], ( I2R(GetHeroAgi(udg_danwei[54], true)) * 0.37 ), true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_SLICE)
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl", udg_danwei[54], "weapon"))
else
endif
if ( ( udg_zhengshu[36] == 9 ) ) then
call SetUnitAnimation(udg_danwei[54], "attack")
if ( ( UnitHasBuffBJ(udg_danwei[54], 0x42303137) == true ) ) then
call UnitDamageTarget(udg_danwei[54], udg_danwei[55], ( I2R(GetHeroAgi(udg_danwei[54], true)) * 0.50 ), true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_SLICE)
else
call UnitDamageTarget(udg_danwei[54], udg_danwei[55], ( I2R(GetHeroAgi(udg_danwei[54], true)) * 0.38 ), true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_SLICE)
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl", udg_danwei[54], "weapon"))
else
endif
if ( ( udg_zhengshu[36] == 10 ) ) then
call SetUnitAnimation(udg_danwei[54], "attack 2")
if ( ( UnitHasBuffBJ(udg_danwei[54], 0x42303137) == true ) ) then
call UnitDamageTarget(udg_danwei[54], udg_danwei[55], ( I2R(GetHeroAgi(udg_danwei[54], true)) * 0.50 ), true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_SLICE)
else
call UnitDamageTarget(udg_danwei[54], udg_danwei[55], ( I2R(GetHeroAgi(udg_danwei[54], true)) * 0.37 ), true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_SLICE)
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl", udg_danwei[54], "weapon"))
else
endif
if ( ( udg_zhengshu[36] == 11 ) ) then
call SetUnitAnimation(udg_danwei[54], "attack slam")
if ( ( UnitHasBuffBJ(udg_danwei[54], 0x42303137) == true ) ) then
call UnitDamageTarget(udg_danwei[54], udg_danwei[55], ( I2R(GetHeroAgi(udg_danwei[54], true)) * 0.50 ), true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_SLICE)
else
call UnitDamageTarget(udg_danwei[54], udg_danwei[55], ( I2R(GetHeroAgi(udg_danwei[54], true)) * 0.38 ), true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_SLICE)
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl", udg_danwei[54], "weapon"))
else
endif
if ( ( udg_zhengshu[36] == 12 ) ) then
call SetUnitAnimation(udg_danwei[54], "spell")
if ( ( UnitHasBuffBJ(udg_danwei[54], 0x42303137) == true ) ) then
call UnitDamageTarget(udg_danwei[54], udg_danwei[55], ( I2R(GetHeroAgi(udg_danwei[54], true)) * 0.50 ), true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_SLICE)
else
call UnitDamageTarget(udg_danwei[54], udg_danwei[55], ( I2R(GetHeroAgi(udg_danwei[54], true)) * 0.37 ), true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_SLICE)
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl", udg_danwei[54], "weapon"))
else
endif
if ( ( udg_zhengshu[36] == 13 ) ) then
call SetUnitAnimation(udg_danwei[54], "attack")
if ( ( UnitHasBuffBJ(udg_danwei[54], 0x42303137) == true ) ) then
call UnitDamageTarget(udg_danwei[54], udg_danwei[55], ( I2R(GetHeroAgi(udg_danwei[54], true)) * 0.50 ), true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_SLICE)
else
call UnitDamageTarget(udg_danwei[54], udg_danwei[55], ( I2R(GetHeroAgi(udg_danwei[54], true)) * 0.38 ), true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_SLICE)
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl", udg_danwei[54], "weapon"))
else
endif
if ( ( udg_zhengshu[36] == 14 ) ) then
call SetUnitAnimation(udg_danwei[54], "attack 2")
if ( ( UnitHasBuffBJ(udg_danwei[54], 0x42303137) == true ) ) then
call UnitDamageTarget(udg_danwei[54], udg_danwei[55], ( I2R(GetHeroAgi(udg_danwei[54], true)) * 0.50 ), true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_SLICE)
else
call UnitDamageTarget(udg_danwei[54], udg_danwei[55], ( I2R(GetHeroAgi(udg_danwei[54], true)) * 0.37 ), true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_SLICE)
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl", udg_danwei[54], "weapon"))
else
endif
if ( ( udg_zhengshu[36] == 15 ) ) then
call SetUnitAnimation(udg_danwei[54], "attack slam")
if ( ( UnitHasBuffBJ(udg_danwei[54], 0x42303137) == true ) ) then
call UnitDamageTarget(udg_danwei[54], udg_danwei[55], ( I2R(GetHeroAgi(udg_danwei[54], true)) * 0.50 ), true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_SLICE)
else
call UnitDamageTarget(udg_danwei[54], udg_danwei[55], ( I2R(GetHeroAgi(udg_danwei[54], true)) * 0.38 ), true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_SLICE)
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl", udg_danwei[54], "weapon"))
else
endif
if ( ( udg_zhengshu[36] == 16 ) ) then
call SetUnitAnimation(udg_danwei[54], "spell")
if ( ( UnitHasBuffBJ(udg_danwei[54], 0x42303137) == true ) ) then
call UnitDamageTarget(udg_danwei[54], udg_danwei[55], ( I2R(GetHeroAgi(udg_danwei[54], true)) * 0.50 ), true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_SLICE)
else
call UnitDamageTarget(udg_danwei[54], udg_danwei[55], ( I2R(GetHeroAgi(udg_danwei[54], true)) * 0.37 ), true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_SLICE)
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl", udg_danwei[54], "weapon"))
else
endif
if ( ( ( udg_zhengshu[36] == 17 ) or ( IsUnitType(udg_danwei[54], UNIT_TYPE_DEAD) == true ) or ( IsUnitType(udg_danwei[55], UNIT_TYPE_DEAD) == true ) ) ) then
call UnitRemoveBuffBJ(0x4230324F, udg_danwei[54])
set udg_zhengshu[36]=0
call PauseTimer(udg_jishiqi[20])
call SetUnitTimeScale(udg_danwei[54], 1.00)
set udg_danwei[54]=null
set udg_danwei[55]=null
else
endif
endfunction
function InitTrig_lz3 takes nothing returns nothing
set gg_trg_lz3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_lz3, udg_jishiqi[20])
call TriggerAddAction(gg_trg_lz3, function Trig_lz3Actions)
endfunction
function Trig_wuyun_1Actions takes nothing returns nothing
set udg_danwei[173]=GetTriggerUnit()
set udg_dian2[0]=GetSpellTargetLoc()
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[173]), 0x65303158, udg_dian2[0], 0.00)
call GroupAddUnit(udg_danweizu2[106], udg_danwei2[0])
call SetUnitUserData(udg_danwei2[0], 80)
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
endfunction
function InitTrig_wuyun_1 takes nothing returns nothing
set gg_trg_wuyun_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_wuyun_1 , 3 , 0x41303045)
call TriggerAddAction(gg_trg_wuyun_1, function Trig_wuyun_1Actions)
endfunction
function Trig_wuyun_2Func001Func001Func002Func006A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) ) then
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_HERO) == false ) ) then
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], 20.00, AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
else
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], 12.00, AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
endif
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[2]))
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) >= 325.00 ) and ( UnitHasBuffBJ(udg_danwei2[1], 0x4261736C) == false ) ) then
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[1])
else
endif
call RemoveLocation(udg_dian2[2])
else
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[1])
endif
call RemoveLocation(udg_dian2[1])
set udg_danwei2[1]=null
endfunction
function Trig_wuyun_2Func001Func001Func002Func010Func002Func008A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) ) then
set udg_Zhengshu[82]=1
call UnitDamageTarget(udg_danwei[173], udg_danwei2[1], ( 5.00 + ( 3.00 * I2R(GetUnitAbilityLevel(udg_danwei[173], 0x41303045)) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
set udg_Zhengshu[82]=0
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_wuyun_2Func001Func001A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
if ( ( GetUnitUserData(udg_danwei2[0]) >= 0 ) and ( UnitHasBuffBJ(udg_danwei[173], 0x42303137) == false ) ) then
call PlaySoundOnUnitBJ(gg_snd_CloudOfFogLoop1, 100, udg_danwei2[0])
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(800.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_wuyun_2Func001Func001Func002Func006A)
if ( ( GetRandomInt(1, 5) <= 2 ) ) then
if ( ( IsUnitGroupEmptyBJ(udg_xuanqu) == false ) ) then
set udg_danwei2[2]=GroupPickRandomUnit(udg_xuanqu)
set udg_dian2[2]=GetUnitLoc(udg_danwei2[2])
set udg_danwei2[3]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303332, udg_dian2[2], 0.00)
call UnitApplyTimedLife(udg_danwei2[3], 0x42487765, 0.50)
call s__baka_IssueTargetOrderById2(udg_danwei2[3] , 852587 , udg_danwei2[2])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", udg_dian2[2]))
set udg_danweizu2[105]=YDWEGetUnitsInRangeOfLocAllNull(250.00 , udg_dian2[2])
call ForGroupBJ(udg_danweizu2[105], function Trig_wuyun_2Func001Func001Func002Func010Func002Func008A)
call DestroyGroup(udg_danweizu2[105])
set udg_danwei2[2]=null
set udg_danwei2[3]=null
call RemoveLocation(udg_dian2[2])
else
endif
else
endif
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[0])
else
call KillUnit(udg_danwei2[0])
call GroupRemoveUnit(udg_danweizu2[106], udg_danwei2[0])
endif
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_wuyun_2Func002Func001Func003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei[173])) == true ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( UnitHasBuffBJ(udg_danwei2[1], 0x4261736C) == true ) ) then
else
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[1])
endif
set udg_danwei2[1]=null
endfunction
function Trig_wuyun_2Func002Func001Func007Func008A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei[173])) == true ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) ) then
set udg_Zhengshu[82]=1
call UnitDamageTarget(udg_danwei[173], udg_danwei2[1], ( 5.00 + ( 3.00 * I2R(GetUnitAbilityLevel(udg_danwei[173], 0x41304A55)) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
set udg_Zhengshu[82]=0
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_wuyun_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( IsUnitGroupEmptyBJ(udg_danweizu2[106]) == false ) ) then
call ForGroupBJ(udg_danweizu2[106], function Trig_wuyun_2Func001Func001A)
else
endif
if ( ( UnitHasBuffBJ(udg_danwei[173], 0x42303137) == true ) ) then
if ( ( GetRandomInt(1, 5) <= 2 ) and ( IsUnitPausedBJ(udg_danwei[173]) == false ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei[173])
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(800.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_wuyun_2Func002Func001Func003A)
call RemoveLocation(udg_dian2[0])
if ( ( IsUnitGroupEmptyBJ(udg_xuanqu) == false ) ) then
set udg_danwei2[2]=GroupPickRandomUnit(udg_xuanqu)
set udg_dian2[2]=GetUnitLoc(udg_danwei2[2])
set udg_danwei2[3]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[173]), 0x65303332, udg_dian2[2], 0.00)
call UnitApplyTimedLife(udg_danwei2[3], 0x42487765, 0.50)
call s__baka_IssueTargetOrderById2(udg_danwei2[3] , 852587 , udg_danwei2[2])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", udg_dian2[2]))
set udg_danweizu2[105]=YDWEGetUnitsInRangeOfLocAllNull(250.00 , udg_dian2[2])
call ForGroupBJ(udg_danweizu2[105], function Trig_wuyun_2Func002Func001Func007Func008A)
call DestroyGroup(udg_danweizu2[105])
set udg_danwei2[2]=null
set udg_danwei2[3]=null
call RemoveLocation(udg_dian2[2])
else
endif
call DestroyGroup(udg_xuanqu)
else
endif
else
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_wuyun_2 takes nothing returns nothing
set gg_trg_wuyun_2=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_wuyun_2, 0.10)
call TriggerAddAction(gg_trg_wuyun_2, function Trig_wuyun_2Actions)
endfunction
function Trig_leiji_1Actions takes nothing returns nothing
set udg_Danwei[81]=GetTriggerUnit()
set udg_Dian[81]=GetSpellTargetLoc()
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[81]), 0x65303657, udg_Dian[81], 0.00)
call StopSoundBJ(gg_snd_LightningShieldTarget, false)
call PlaySoundOnUnitBJ(gg_snd_LightningShieldTarget, 100, udg_danwei2[1])
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 1.00)
call SetUnitAnimation(udg_danwei2[1], "birth")
set udg_danwei2[1]=null
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[81]), 0x65303658, udg_Dian[81], 0.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 2.50)
set udg_danwei2[1]=null
set udg_Danwei[82]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[81]), 0x65303130, udg_Dian[81], 0.00)
call UnitAddAbility(udg_Danwei[82], 0x41304236)
set udg_Danweizu[82]=CreateGroup()
set udg_Zhengshu[81]=0
call StartTimerBJ(udg_Times[81], true, 0.03)
endfunction
function InitTrig_leiji_1 takes nothing returns nothing
set gg_trg_leiji_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_leiji_1 , 3 , 0x41304A55)
call TriggerAddAction(gg_trg_leiji_1, function Trig_leiji_1Actions)
endfunction
function Trig_leiji_2Func001Func009A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitDeadBJ(udg_danwei2[1]) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_Danwei[81])) == true ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[1])
if ( ( DistanceBetweenPoints(udg_Dian[81], udg_dian2[0]) <= 175.00 ) ) then
if ( ( IsUnitInGroup(udg_danwei2[1], udg_Danweizu[82]) == false ) ) then
call GroupAddUnit(udg_Danweizu[82], udg_danwei2[1])
set udg_Zhengshu[82]=1
call UnitDamageTarget(udg_Danwei[81], udg_danwei2[1], ( ( ( 3.00 * I2R(GetHeroAgi(udg_Danwei[81], true)) ) + ( 20.00 * I2R(IMaxBJ(GetUnitAbilityLevel(udg_Danwei[81], 0x41303045), GetUnitAbilityLevel(udg_Danwei[81], 0x41304A55))) ) ) * 1.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
set udg_Zhengshu[82]=0
call s__baka_IssueTargetOrderById2(udg_Danwei[82] , 852095 , udg_danwei2[1])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\ChimaeraLightningMissile\\ChimaeraLightningMissile.mdl", udg_dian2[0]))
else
endif
else
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], ( 8.00 - ( 0.01 * ( 0.60 * DistanceBetweenPoints(udg_Dian[81], udg_dian2[0]) ) ) ), AngleBetweenPoints(udg_Dian[81], udg_dian2[0]))
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[1]))
else
endif
call RemoveLocation(udg_dian2[1])
if ( ( IsUnitInGroup(udg_danwei2[1], udg_Danweizu[82]) == false ) ) then
call GroupAddUnit(udg_Danweizu[82], udg_danwei2[1])
set udg_Zhengshu[82]=1
call UnitDamageTarget(udg_Danwei[81], udg_danwei2[1], ( ( ( 3.00 * I2R(GetHeroAgi(udg_Danwei[81], true)) ) + ( 20.00 * I2R(IMaxBJ(GetUnitAbilityLevel(udg_Danwei[81], 0x41303045), GetUnitAbilityLevel(udg_Danwei[81], 0x41304A55))) ) ) * ( 0.50 - ( 0.01 * ( 0.05 * DistanceBetweenPoints(udg_Dian[81], udg_dian2[0]) ) ) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
set udg_Zhengshu[82]=0
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl", udg_dian2[0]))
else
endif
endif
call RemoveLocation(udg_dian2[0])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_leiji_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_Zhengshu[81] <= 20 ) ) then
set udg_Zhengshu[81]=( udg_Zhengshu[81] + 1 )
set udg_Danweizu[81]=YDWEGetUnitsInRangeOfLocAllNull(( 50.00 + ( 50.00 * I2R(udg_Zhengshu[81]) ) ) , udg_Dian[81])
call ForGroupBJ(udg_Danweizu[81], function Trig_leiji_2Func001Func009A)
call DestroyGroup(udg_Danweizu[81])
else
call PauseTimer(udg_Times[81])
call DestroyGroup(udg_Danweizu[82])
call RemoveUnit(udg_Danwei[82])
set udg_Danwei[81]=null
set udg_Danwei[82]=null
call RemoveLocation(udg_Dian[81])
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_leiji_2 takes nothing returns nothing
set gg_trg_leiji_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_leiji_2, udg_Times[81])
call TriggerAddAction(gg_trg_leiji_2, function Trig_leiji_2Actions)
endfunction
function Trig_sphlActions takes nothing returns nothing
set udg_danwei[57]=GetTriggerUnit()
set udg_danwei[58]=GetSpellTargetUnit()
set udg_dian[53]=GetUnitLoc(udg_danwei[58])
set udg_zhengshu2[105]=0
set udg_Zhengshu[82]=1
call UnitDamageTarget(udg_danwei[57], udg_danwei[58], ( 50.00 * I2R(GetUnitAbilityLevel(udg_danwei[57], 0x414F636C)) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_LIGHTNING, WEAPON_TYPE_WHOKNOWS)
set udg_Zhengshu[82]=0
call EnableTrigger(gg_trg_sphl2)
call StartTimerBJ(udg_times[105], true, 0.03)
endfunction
function InitTrig_sphl takes nothing returns nothing
set gg_trg_sphl=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_sphl , 3 , 0x414F636C)
call TriggerAddAction(gg_trg_sphl, function Trig_sphlActions)
endfunction
function Trig_sphl2Func003Func002Func003A takes nothing returns nothing
set udg_danwei[146]=GetEnumUnit()
if ( ( IsUnitAliveBJ(udg_danwei[146]) == true ) and ( IsUnitEnemy(udg_danwei[146], GetOwningPlayer(udg_danwei[57])) == true ) and ( IsUnitType(udg_danwei[146], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei[146], UNIT_TYPE_ANCIENT) == false ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei[146])
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 9.00, AngleBetweenPoints(udg_dian2[0], udg_dian[53]))
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian[53]) >= 25.00 ) and ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei[146], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei[146], GetLocationY(udg_dian2[1]))
else
endif
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
set udg_Zhengshu[82]=1
call UnitDamageTarget(udg_danwei[57], udg_danwei[146], ( I2R(GetHeroAgi(udg_danwei[57], true)) * 0.06 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_LIGHTNING, WEAPON_TYPE_WHOKNOWS)
set udg_Zhengshu[82]=0
else
endif
set udg_danwei[146]=null
endfunction
function Trig_sphl2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu2[105]=( udg_zhengshu2[105] + 1 )
if ( ( udg_zhengshu2[105] <= 60 ) ) then
if ( ( udg_zhengshu2[105] <= 50 ) ) then
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=3
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_dian2[0]=PolarProjectionBJ(udg_dian[53], ( 8.00 * ( 50.00 - I2R(udg_zhengshu2[105]) ) ), ( ( 120.00 * I2R(bj_forLoopAIndex) ) + ( 15.00 * I2R(udg_zhengshu2[105]) ) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\Monsoon\\MonsoonBoltTarget.mdl", udg_dian2[0]))
call RemoveLocation(udg_dian2[0])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
else
endif
if ( ( udg_zhengshu2[105] >= 10 ) ) then
set udg_danweizu[18]=YDWEGetUnitsInRangeOfLocAllNull(( 495.00 - ( 8.00 * I2R(udg_zhengshu2[105]) ) ) , udg_dian[53])
call ForGroupBJ(udg_danweizu[18], function Trig_sphl2Func003Func002Func003A)
else
endif
call DestroyGroup(udg_danweizu[18])
else
call RemoveLocation(udg_dian[53])
set udg_danwei[57]=null
set udg_danwei[58]=null
call PauseTimer(udg_times[105])
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_sphl2 takes nothing returns nothing
set gg_trg_sphl2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_sphl2, udg_times[105])
call TriggerAddAction(gg_trg_sphl2, function Trig_sphl2Actions)
endfunction
function Trig_sjqhActions takes nothing returns nothing
set udg_danwei[173]=GetTriggerUnit()
set udg_danwei[60]=GetTriggerUnit()
call SetUnitAnimation(udg_danwei[60], "morph")
call UnitAddAbility(udg_danwei[60], 0x41303843)
call StartTimerBJ(udg_jishiqi[21], true, 0.03)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei[60]), 0x41303843, false)
set udg_zhengshuex[0]=GetUnitAbilityLevel(udg_danwei[173], 0x41304A55)
if ( ( udg_zhengshuex[0] > 0 ) ) then
call UnitRemoveAbility(udg_danwei[173], 0x41304A55)
call UnitAddAbility(udg_danwei[173], 0x41304A55)
call SetUnitAbilityLevel(udg_danwei[173], 0x41304A55, udg_zhengshuex[0])
else
endif
set udg_zhengshu[139]=R2I(( ( 15.00 + ( 5.00 * I2R(GetUnitAbilityLevel(udg_danwei[60], 0x41304E52)) ) ) / 0.03 ))
set udg_piaofuwenzi[2]=CreateTextTag()
call SetTextTagTextBJ(udg_piaofuwenzi[2], ( "强化圣剑：" + R2SW(( I2R(udg_zhengshu[139]) * 0.03 ), 1, 1) ), 11.00)
call SetTextTagPos(udg_piaofuwenzi[2], ( GetUnitX(udg_danwei[60]) - 60.00 ), GetUnitY(udg_danwei[60]), ( s__maphack_GetHeight(udg_danwei[60]) + 210.00 ))
call SetTextTagColor(udg_piaofuwenzi[2], 255, 255, 0, 255)
call SetTextTagVisibility(udg_piaofuwenzi[2], false)
set udg_wanjiazu[0]=CreateForce()
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ( ( IsUnitAlly(udg_danwei[60], s__baka_SPlayer(bj_forLoopAIndex - 1)) == true ) ) then
call ForceAddPlayer(udg_wanjiazu[0], s__baka_SPlayer(bj_forLoopAIndex - 1))
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call ShowTextTagForceBJ(true, udg_piaofuwenzi[2], udg_wanjiazu[0])
call DestroyForce(udg_wanjiazu[0])
endfunction
function InitTrig_sjqh takes nothing returns nothing
set gg_trg_sjqh=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_sjqh , 3 , 0x41304E52)
call TriggerAddAction(gg_trg_sjqh, function Trig_sjqhActions)
endfunction
function Trig_sjqh2Actions takes nothing returns nothing
if ( ( IsUnitPausedBJ(udg_danwei[60]) == false ) ) then
if ( ( udg_zhengshu[139] > 0 ) and ( IsUnitType(udg_danwei[60], UNIT_TYPE_DEAD) == false ) ) then
set udg_zhengshu[139]=( udg_zhengshu[139] - 1 )
call SetTextTagTextBJ(udg_piaofuwenzi[2], ( "强化圣剑：" + R2SW(( I2R(udg_zhengshu[139]) * 0.03 ), 1, 1) ), 11.00)
call SetTextTagPos(udg_piaofuwenzi[2], ( GetUnitX(udg_danwei[60]) - 60.00 ), GetUnitY(udg_danwei[60]), ( s__maphack_GetHeight(udg_danwei[60]) + 210.00 ))
else
call SetTextTagPermanent(udg_piaofuwenzi[2], false)
call SetTextTagAge(udg_piaofuwenzi[2], 0)
call SetTextTagLifespan(udg_piaofuwenzi[2], 0.50)
call SetTextTagFadepoint(udg_piaofuwenzi[2], 0.10)
call UnitRemoveAbility(udg_danwei[60], 0x41303843)
call UnitRemoveBuffBJ(0x42303137, udg_danwei[60])
set udg_danwei[60]=null
call PauseTimer(udg_jishiqi[21])
endif
else
endif
endfunction
function InitTrig_sjqh2 takes nothing returns nothing
set gg_trg_sjqh2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_sjqh2, udg_jishiqi[21])
call TriggerAddAction(gg_trg_sjqh2, function Trig_sjqh2Actions)
endfunction
function Trig_guangdun_1Func001Func006A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[100])) == true ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) ) then
call UnitAddAbility(udg_danwei2[1], 0x41304E50)
call UnitDamageTarget(udg_danwei2[100], udg_danwei2[1], ( ( ( 0.50 * I2R(( GetHeroStr(udg_danwei2[100], true) + ( GetHeroAgi(udg_danwei2[100], true) + GetHeroInt(udg_danwei2[100], true) ) )) ) + ( 25.00 * I2R(GetUnitAbilityLevel(udg_danwei2[100], 0x41304E4F)) ) ) * 1.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\StaffOfPurification\\PurificationTarget.mdl", udg_danwei2[1], "origin"))
call GroupAddUnit(udg_Danweizu[158], udg_danwei2[1])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_guangdun_1Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( GetUnitAbilityLevel(udg_danwei2[100], 0x41303338) == 0 ) ) then
call PauseTimer(udg_jishiqi[95])
call StartTimerBJ(udg_jishiqi[95], false, 0.00)
else
set udg_dian2[0]=GetUnitLoc(udg_danwei2[100])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Items\\StaffOfPurification\\PurificationCaster.mdl", udg_dian2[0]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Items\\StaffOfPurification\\PurificationCaster.mdl", udg_dian2[0]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Items\\StaffOfPurification\\PurificationCaster.mdl", udg_dian2[0]))
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(350.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_guangdun_1Func001Func006A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[0])
call StartTimerBJ(udg_Times[158], false, 2.50)
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_guangdun_1 takes nothing returns nothing
set gg_trg_guangdun_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_guangdun_1 , 3 , 0x41304E4F)
call TriggerAddAction(gg_trg_guangdun_1, function Trig_guangdun_1Actions)
endfunction
function Trig_guangdun_1_5Func001A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
call UnitRemoveAbility(udg_danwei2[1], 0x41304E50)
call UnitRemoveBuffBJ(0x42303346, udg_danwei2[1])
set udg_danwei2[1]=null
endfunction
function Trig_guangdun_1_5Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_Danweizu[158], function Trig_guangdun_1_5Func001A)
call GroupClear(udg_Danweizu[158])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_guangdun_1_5 takes nothing returns nothing
set gg_trg_guangdun_1_5=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_guangdun_1_5, udg_Times[158])
call TriggerAddAction(gg_trg_guangdun_1_5, function Trig_guangdun_1_5Actions)
endfunction
function Trig_guangdun_xuexiConditions takes nothing returns boolean
return ( ( GetLearnedSkill() == 0x41304E4F ) and ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true ) )
endfunction
function Trig_guangdun_xuexiActions takes nothing returns nothing
set udg_danwei2[100]=GetTriggerUnit()
if ( ( GetUnitAbilityLevel(udg_danwei2[100], 0x41304E4F) == 1 ) ) then
call UnitAddAbility(udg_danwei2[100], 0x41303338)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\DivineShield\\DivineShieldTarget.mdl", udg_danwei2[100], "origin"))
else
endif
if ( ( GetUnitAbilityLevel(udg_danwei2[100], 0x41303338) == 1 ) ) then
set udg_Shishu[10]=( ( 0.50 * I2R(( GetHeroStr(udg_danwei2[100], true) + ( GetHeroAgi(udg_danwei2[100], true) + GetHeroInt(udg_danwei2[100], true) ) )) ) + ( 40.00 * I2R(GetUnitAbilityLevel(udg_danwei2[100], 0x41304E4F)) ) )
else
endif
endfunction
function InitTrig_guangdun_xuexi takes nothing returns nothing
set gg_trg_guangdun_xuexi=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_guangdun_xuexi, EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(gg_trg_guangdun_xuexi, Condition(function Trig_guangdun_xuexiConditions))
call TriggerAddAction(gg_trg_guangdun_xuexi, function Trig_guangdun_xuexiActions)
endfunction
function Trig_guangdun_2Actions takes nothing returns nothing
if ( ( GetUnitAbilityLevel(udg_danwei2[100], 0x41303338) == 0 ) ) then
call UnitAddAbility(udg_danwei2[100], 0x41303338)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\DivineShield\\DivineShieldTarget.mdl", udg_danwei2[100], "origin"))
else
endif
set udg_Shishu[10]=( ( 0.50 * I2R(( GetHeroStr(udg_danwei2[100], true) + ( GetHeroAgi(udg_danwei2[100], true) + GetHeroInt(udg_danwei2[100], true) ) )) ) + ( 40.00 * I2R(GetUnitAbilityLevel(udg_danwei2[100], 0x41304E4F)) ) )
endfunction
function InitTrig_guangdun_2 takes nothing returns nothing
set gg_trg_guangdun_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_guangdun_2, udg_jishiqi[95])
call TriggerAddAction(gg_trg_guangdun_2, function Trig_guangdun_2Actions)
endfunction
function Trig_guangdun_3Actions takes nothing returns nothing
call SetUnitLifeBJ(udg_danwei2[100], udg_Shishu[13])
set udg_Shishu[11]=0.00
set udg_Shishu[12]=0.00
endfunction
function InitTrig_guangdun_3 takes nothing returns nothing
set gg_trg_guangdun_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_guangdun_3, udg_Times[10])
call TriggerAddAction(gg_trg_guangdun_3, function Trig_guangdun_3Actions)
endfunction
function Trig_tbzActions takes nothing returns nothing
set udg_danwei[62]=GetTriggerUnit()
set udg_danwei[63]=GetSpellTargetUnit()
set udg_dian[61]=GetUnitLoc(udg_danwei[62])
set udg_dian[62]=GetUnitLoc(udg_danwei[63])
set udg_zhengshu[37]=0
call UnitDamageTarget(udg_danwei[62], udg_danwei[63], ( ( 55.00 * I2R(GetUnitAbilityLevel(udg_danwei[62], 0x41303046)) ) + ( I2R(GetHeroAgi(udg_danwei[62], true)) * 0.50 ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call StartTimerBJ(udg_jishiqi[22], true, 0.04)
endfunction
function InitTrig_tbz takes nothing returns nothing
set gg_trg_tbz=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_tbz , 3 , 0x41303046)
call TriggerAddAction(gg_trg_tbz, function Trig_tbzActions)
endfunction
function Trig_tbz2Actions takes nothing returns nothing
set udg_zhengshu[37]=( udg_zhengshu[37] + 1 )
if ( ( udg_zhengshu[37] <= 5 ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei[62])
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 50.00, AngleBetweenPoints(udg_dian[62], udg_dian[61]))
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei[62], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei[62], GetLocationY(udg_dian2[1]))
else
endif
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl", udg_dian2[1]))
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
set udg_dian2[0]=GetUnitLoc(udg_danwei[63])
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 50.00, AngleBetweenPoints(udg_dian[61], udg_dian[62]))
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei[63], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei[63], GetLocationY(udg_dian2[1]))
else
endif
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl", udg_dian2[1]))
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
call PauseTimer(udg_jishiqi[22])
set udg_danwei[62]=null
set udg_danwei[63]=null
call RemoveLocation(udg_dian[61])
call RemoveLocation(udg_dian[62])
endif
endfunction
function InitTrig_tbz2 takes nothing returns nothing
set gg_trg_tbz2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_tbz2, udg_jishiqi[22])
call TriggerAddAction(gg_trg_tbz2, function Trig_tbz2Actions)
endfunction
function Trig_zhuanshuyijian_1Actions takes nothing returns nothing
set udg_danwei2[15]=GetSpellAbilityUnit()
set udg_danwei2[16]=GetSpellTargetUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[15])
if ( ( udg_danwei2[16] != null ) ) then
set udg_dian2[1]=GetUnitLoc(udg_danwei2[16])
else
set udg_dian2[1]=GetSpellTargetLoc()
endif
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], 10.00, AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
set udg_danwei2[17]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[15]), 0x65303232, udg_dian2[2], AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
if ( ( ( YDWEUnitHasItemOfTypeBJNull(udg_danwei2[15] , 0x72617466) == true ) or ( YDWEUnitHasItemOfTypeBJNull(udg_danwei2[15] , 0x49303453) == true ) ) ) then
call StartTimerBJ(udg_times[15], true, 0.03)
set udg_danwei2[365]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[15]), 0x65303554, udg_dian2[2], AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
call SetUnitTimeScale(udg_danwei2[365], 0.00)
else
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[15] , 0x4930324C)) == true ) ) then
call StartTimerBJ(udg_times[15], true, 0.03)
set udg_danwei2[365]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[15]), 0x65303556, udg_dian2[2], AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
call SetUnitAnimation(udg_danwei2[365], "death")
else
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[15] , 0x74656C73)) == true ) ) then
call StartTimerBJ(udg_times[15], true, 0.02)
set udg_danwei2[365]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[15]), 0x65303555, udg_dian2[2], AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
else
call StartTimerBJ(udg_times[15], true, 0.03)
endif
endif
endif
call GroupAddUnit(udg_DAZE[0], udg_danwei2[17])
call GroupAddUnit(udg_DAZE[1], udg_danwei2[17])
call PlaySoundOnUnitBJ(gg_snd_DefendCaster, 100, udg_danwei2[15])
call UnitAddAbility(udg_danwei2[17], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[17] , 50.00 , 0.00)
call SetUnitColor(udg_danwei2[17], PLAYER_COLOR_LIGHT_BLUE)
set udg_zhengshu2[15]=0
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
endfunction
function InitTrig_zhuanshuyijian_1 takes nothing returns nothing
set gg_trg_zhuanshuyijian_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_zhuanshuyijian_1 , 3 , 0x4130344A)
call TriggerAddAction(gg_trg_zhuanshuyijian_1, function Trig_zhuanshuyijian_1Actions)
endfunction
function Trig_zhuanzhuyijian_2Func004Func008Func002A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[15])) == true ) ) then
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[15] , 0x49303146)) == true ) ) then
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_HERO) == true ) and ( GetUnitTypeId(udg_danwei2[1]) != 0x4F303030 ) ) then
if ( ( UnitHasBuffBJ(udg_danwei2[1], 0x42303043) == false ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\OrbCorruption\\OrbCorruptionMissile.mdl", udg_danwei2[1], "origin"))
set udg_aXUNHUAN[79]=0
loop
exitwhen udg_aXUNHUAN[79] > 11
call UnitRemoveAbility(udg_danwei2[1], udg_Defense[udg_aXUNHUAN[79]])
set udg_aXUNHUAN[79]=udg_aXUNHUAN[79] + 1
endloop
set udg_Shishu[68]=GetUnitState(udg_danwei2[1], UNIT_STATE_LIFE)
call UnitDamageTarget(udg_danwei2[1], udg_danwei2[1], 10.00, false, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)
set udg_Shishu[69]=( ( 1.00 - ( ( udg_Shishu[68] - GetUnitState(udg_danwei2[1], UNIT_STATE_LIFE) ) / 10.00 ) ) / ( 0.05 * ( ( udg_Shishu[68] - GetUnitState(udg_danwei2[1], UNIT_STATE_LIFE) ) / 10.00 ) ) )
call SetUnitLifeBJ(udg_danwei2[1], udg_Shishu[68])
set udg_Shishu[70]=0.00
set udg_Shishu[70]=( udg_Shishu[70] + ( udg_Shishu[69] * 0.40 ) )
set udg_shishu2ex[( 20 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 ) )]=udg_Shishu[70]
set udg_Shishu[70]=( udg_Shishu[70] + udg_shishu2ex[( 30 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 ) )] )
set udg_shishu2ex[( 30 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 ) )]=( udg_shishu2ex[( 30 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 ) )] + udg_shishu2ex[( 20 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 ) )] )
set udg_aXUNHUAN[78]=0
loop
exitwhen udg_aXUNHUAN[78] > 11
if ( ( udg_Shishu[70] >= ( 0.10 * Pow(2.00, ( 11.00 - I2R(udg_aXUNHUAN[78]) )) ) ) ) then
set udg_Shishu[70]=( udg_Shishu[70] - ( 0.10 * Pow(2.00, I2R(( 11 - udg_aXUNHUAN[78] ))) ) )
call UnitAddAbility(udg_danwei2[1], udg_Defense[( 11 - udg_aXUNHUAN[78] )])
else
endif
set udg_aXUNHUAN[78]=udg_aXUNHUAN[78] + 1
endloop
call UnitAddAbility(udg_danwei2[1], 0x41304A36)
else
endif
set udg_Zhengshu[( 70 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 ) )]=30
else
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\OrbCorruption\\OrbCorruptionMissile.mdl", udg_danwei2[1], "origin"))
set udg_danwei2[2]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[15]), 0x65303348, udg_dian2[0], 0.00)
call UnitApplyTimedLife(udg_danwei2[2], 0x42487765, 0.50)
call s__baka_IssueTargetOrderById2(udg_danwei2[2] , 852662 , udg_danwei2[1])
set udg_danwei2[2]=null
endif
else
endif
if ( ( udg_danwei2[365] != null ) ) then
if ( ( GetUnitTypeId(udg_danwei2[365]) == 0x65303554 ) ) then
call SetUnitScale(udg_danwei2[365], 0.00, 0.00, 0.00)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl", udg_danwei2[1], "origin"))
call UnitAddAbility(udg_danwei2[1], 0x41304F42)
call UnitDamageTarget(udg_danwei2[15], udg_danwei2[1], ( ( ( 20.00 * I2R(GetUnitAbilityLevel(udg_danwei2[15], 0x4130344A)) ) + ( 1.50 * I2R(GetHeroAgi(udg_danwei2[15], true)) ) ) * ( ( RMinBJ(I2R(udg_zhengshu2[15]), 20.00) / 10.00 ) + 1.00 ) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)
call UnitRemoveAbility(udg_danwei2[1], 0x41304F42)
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
set udg_danwei[3]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[15]), 0x65303130, udg_dian2[1], 0)
call UnitApplyTimedLife(udg_danwei[3], 0x42487765, 0.50)
call UnitAddAbility(udg_danwei[3], 0x41303551)
call s__baka_IssueTargetOrder2(udg_danwei[3] , "thunderbolt" , udg_danwei2[1])
set udg_danwei[3]=null
call RemoveLocation(udg_dian2[1])
else
endif
if ( ( GetUnitTypeId(udg_danwei2[365]) == 0x65303555 ) ) then
call UnitAddAbility(udg_danwei2[1], 0x41304F42)
call UnitDamageTarget(udg_danwei2[15], udg_danwei2[1], ( ( ( 20.00 * I2R(GetUnitAbilityLevel(udg_danwei2[15], 0x4130344A)) ) + ( 1.50 * I2R(GetHeroAgi(udg_danwei2[15], true)) ) ) * ( ( RMinBJ(I2R(udg_zhengshu2[15]), 20.00) / 10.00 ) + 1.00 ) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)
call UnitRemoveAbility(udg_danwei2[1], 0x41304F42)
else
endif
if ( ( GetUnitTypeId(udg_danwei2[365]) == 0x65303556 ) ) then
call UnitAddAbility(udg_danwei2[1], 0x41304F42)
call UnitDamageTarget(udg_danwei2[15], udg_danwei2[1], ( ( ( 20.00 * I2R(GetUnitAbilityLevel(udg_danwei2[15], 0x4130344A)) ) + ( 1.50 * I2R(GetHeroAgi(udg_danwei2[15], true)) ) ) * ( ( RMinBJ(I2R(udg_zhengshu2[15]), 20.00) / 10.00 ) + 1.00 ) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)
call UnitRemoveAbility(udg_danwei2[1], 0x41304F42)
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
set udg_danwei[3]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[15]), 0x65303130, udg_dian2[1], 0)
call UnitApplyTimedLife(udg_danwei[3], 0x42487765, 0.50)
call UnitAddAbility(udg_danwei[3], 0x41304641)
call s__baka_IssueTargetOrder2(udg_danwei[3] , "purge" , udg_danwei2[1])
set udg_danwei[3]=null
call RemoveLocation(udg_dian2[1])
else
endif
call KillUnit(udg_danwei2[365])
set udg_danwei2[365]=null
else
call UnitAddAbility(udg_danwei2[1], 0x41304F42)
call UnitDamageTarget(udg_danwei2[15], udg_danwei2[1], ( ( ( 20.00 * I2R(GetUnitAbilityLevel(udg_danwei2[15], 0x4130344A)) ) + ( 1.50 * I2R(GetHeroAgi(udg_danwei2[15], true)) ) ) * ( ( RMinBJ(I2R(udg_zhengshu2[15]), 20.00) / 10.00 ) + 1.00 ) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)
call UnitRemoveAbility(udg_danwei2[1], 0x41304F42)
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\GlaiveMissile\\GlaiveMissileTarget.mdl", udg_danwei2[1], "chest"))
call PlaySoundOnUnitBJ(gg_snd_GuardTowerMissileHit2, 100, udg_danwei2[1])
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == true ) ) then
set udg_zhengshuex[0]=GetUnitAbilityLevel(udg_danwei2[15], 0x4130344A)
call UnitRemoveAbility(udg_danwei2[15], 0x4130344A)
call UnitAddAbility(udg_danwei2[15], 0x4130344A)
call SetUnitAbilityLevel(udg_danwei2[15], 0x4130344A, udg_zhengshuex[0])
call SetUnitManaBJ(udg_danwei2[15], ( GetUnitState(udg_danwei2[15], UNIT_STATE_MANA) + ( 75.00 * ( 0.25 + ( 0.05 * I2R(GetUnitAbilityLevel(udg_danwei2[15], 0x4130344A)) ) ) ) ))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\SpiritOfVengeance\\SpiritOfVengeanceBirthMissile.mdl", udg_danwei2[15], "chest"))
else
endif
call KillUnit(udg_danwei2[17])
call SetUnitScale(udg_danwei2[17], 0.00, 0.00, 0.00)
call SetUnitAnimation(udg_danwei2[17], "stand")
call PauseTimer(udg_times[15])
set udg_danwei2[15]=null
set udg_danwei2[16]=null
set udg_danwei2[17]=null
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_zhuanzhuyijian_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_dian2[0]=GetUnitLoc(udg_danwei2[17])
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], 75.00, GetUnitFacing(udg_danwei2[17]))
set udg_zhengshu2[15]=( udg_zhengshu2[15] + 1 )
if ( ( IsTerrainPathableBJ(udg_dian2[0], PATHING_TYPE_FLYABILITY) == false ) and ( udg_zhengshu2[15] <= 25 ) ) then
call SetUnitX(udg_danwei2[17], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[17], GetLocationY(udg_dian2[2]))
if ( ( udg_danwei2[365] != null ) ) then
call SetUnitX(udg_danwei2[365], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[365], GetLocationY(udg_dian2[2]))
else
endif
if ( ( udg_danwei2[16] != null ) ) then
set udg_dian2[1]=GetUnitLoc(udg_danwei2[16])
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) <= 85.00 ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\GlaiveMissile\\GlaiveMissileTarget.mdl", udg_danwei2[16], "chest"))
call PlaySoundOnUnitBJ(gg_snd_GuardTowerMissileHit2, 100, udg_danwei2[16])
if ( ( IsItemOwned(YDWEGetItemOfTypeFromUnitBJNull(udg_danwei2[15] , 0x49303146)) == true ) ) then
if ( ( IsUnitType(udg_danwei2[16], UNIT_TYPE_HERO) == true ) and ( GetUnitTypeId(udg_danwei2[16]) != 0x4F303030 ) ) then
if ( ( UnitHasBuffBJ(udg_danwei2[16], 0x42303043) == false ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\OrbCorruption\\OrbCorruptionMissile.mdl", udg_danwei2[16], "origin"))
set udg_aXUNHUAN[79]=0
loop
exitwhen udg_aXUNHUAN[79] > 11
call UnitRemoveAbility(udg_danwei2[16], udg_Defense[udg_aXUNHUAN[79]])
set udg_aXUNHUAN[79]=udg_aXUNHUAN[79] + 1
endloop
set udg_Shishu[68]=GetUnitState(udg_danwei2[16], UNIT_STATE_LIFE)
call UnitDamageTarget(udg_danwei2[16], udg_danwei2[16], 10.00, false, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)
set udg_Shishu[69]=( ( 1.00 - ( ( udg_Shishu[68] - GetUnitState(udg_danwei2[16], UNIT_STATE_LIFE) ) / 10.00 ) ) / ( 0.05 * ( ( udg_Shishu[68] - GetUnitState(udg_danwei2[16], UNIT_STATE_LIFE) ) / 10.00 ) ) )
call SetUnitLifeBJ(udg_danwei2[16], udg_Shishu[68])
set udg_Shishu[70]=0.00
set udg_Shishu[70]=( udg_Shishu[70] + ( udg_Shishu[69] * 0.40 ) )
set udg_shishu2ex[( 20 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[16])) + 1 ) )]=udg_Shishu[70]
set udg_Shishu[70]=( udg_Shishu[70] + udg_shishu2ex[( 30 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[16])) + 1 ) )] )
set udg_shishu2ex[( 30 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[16])) + 1 ) )]=( udg_shishu2ex[( 30 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[16])) + 1 ) )] + udg_shishu2ex[( 20 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[16])) + 1 ) )] )
set udg_aXUNHUAN[78]=0
loop
exitwhen udg_aXUNHUAN[78] > 11
if ( ( udg_Shishu[70] >= ( 0.10 * Pow(2.00, ( 11.00 - I2R(udg_aXUNHUAN[78]) )) ) ) ) then
set udg_Shishu[70]=( udg_Shishu[70] - ( 0.10 * Pow(2.00, I2R(( 11 - udg_aXUNHUAN[78] ))) ) )
call UnitAddAbility(udg_danwei2[16], udg_Defense[( 11 - udg_aXUNHUAN[78] )])
else
endif
set udg_aXUNHUAN[78]=udg_aXUNHUAN[78] + 1
endloop
call UnitAddAbility(udg_danwei2[16], 0x41304A36)
else
endif
set udg_Zhengshu[( 70 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[16])) + 1 ) )]=30
else
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\OrbCorruption\\OrbCorruptionMissile.mdl", udg_danwei2[16], "origin"))
set udg_danwei2[2]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[15]), 0x65303348, udg_dian2[0], 0.00)
call UnitApplyTimedLife(udg_danwei2[2], 0x42487765, 0.50)
call s__baka_IssueTargetOrderById2(udg_danwei2[2] , 852662 , udg_danwei2[16])
set udg_danwei2[2]=null
endif
else
endif
if ( ( udg_danwei2[365] != null ) ) then
if ( ( GetUnitTypeId(udg_danwei2[365]) == 0x65303554 ) ) then
call SetUnitScale(udg_danwei2[365], 0.00, 0.00, 0.00)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl", udg_danwei2[16], "origin"))
call UnitAddAbility(udg_danwei2[16], 0x41304F42)
call UnitDamageTarget(udg_danwei2[15], udg_danwei2[16], ( ( ( 20.00 * I2R(GetUnitAbilityLevel(udg_danwei2[15], 0x4130344A)) ) + ( 1.50 * I2R(GetHeroAgi(udg_danwei2[15], true)) ) ) * ( ( RMinBJ(I2R(udg_zhengshu2[15]), 20.00) / 10.00 ) + 1.00 ) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)
call UnitRemoveAbility(udg_danwei2[16], 0x41304F42)
set udg_dian2[1]=GetUnitLoc(udg_danwei2[16])
set udg_danwei[3]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[15]), 0x65303130, udg_dian2[1], 0)
call UnitApplyTimedLife(udg_danwei[3], 0x42487765, 0.50)
call UnitAddAbility(udg_danwei[3], 0x41303551)
call s__baka_IssueTargetOrder2(udg_danwei[3] , "thunderbolt" , udg_danwei2[16])
set udg_danwei[3]=null
call RemoveLocation(udg_dian2[1])
else
endif
if ( ( GetUnitTypeId(udg_danwei2[365]) == 0x65303555 ) ) then
call UnitAddAbility(udg_danwei2[16], 0x41304F42)
call UnitDamageTarget(udg_danwei2[15], udg_danwei2[16], ( ( ( 20.00 * I2R(GetUnitAbilityLevel(udg_danwei2[15], 0x4130344A)) ) + ( 1.50 * I2R(GetHeroAgi(udg_danwei2[15], true)) ) ) * ( ( RMinBJ(I2R(udg_zhengshu2[15]), 20.00) / 10.00 ) + 1.00 ) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)
call UnitRemoveAbility(udg_danwei2[16], 0x41304F42)
else
endif
if ( ( GetUnitTypeId(udg_danwei2[365]) == 0x65303556 ) ) then
call UnitAddAbility(udg_danwei2[16], 0x41304F42)
call UnitDamageTarget(udg_danwei2[15], udg_danwei2[16], ( ( ( 20.00 * I2R(GetUnitAbilityLevel(udg_danwei2[15], 0x4130344A)) ) + ( 1.50 * I2R(GetHeroAgi(udg_danwei2[15], true)) ) ) * ( ( RMinBJ(I2R(udg_zhengshu2[15]), 20.00) / 10.00 ) + 1.00 ) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)
call UnitRemoveAbility(udg_danwei2[16], 0x41304F42)
set udg_dian2[1]=GetUnitLoc(udg_danwei2[16])
set udg_danwei[3]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[15]), 0x65303130, udg_dian2[1], 0)
call UnitApplyTimedLife(udg_danwei[3], 0x42487765, 0.50)
call UnitAddAbility(udg_danwei[3], 0x41304641)
call s__baka_IssueTargetOrder2(udg_danwei[3] , "purge" , udg_danwei2[16])
set udg_danwei[3]=null
call RemoveLocation(udg_dian2[1])
else
endif
call KillUnit(udg_danwei2[365])
set udg_danwei2[365]=null
else
call UnitAddAbility(udg_danwei2[16], 0x41304F42)
call UnitDamageTarget(udg_danwei2[15], udg_danwei2[16], ( ( ( 20.00 * I2R(GetUnitAbilityLevel(udg_danwei2[15], 0x4130344A)) ) + ( 1.50 * I2R(GetHeroAgi(udg_danwei2[15], true)) ) ) * ( ( RMinBJ(I2R(udg_zhengshu2[15]), 20.00) / 10.00 ) + 1.00 ) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)
call UnitRemoveAbility(udg_danwei2[16], 0x41304F42)
endif
if ( ( IsUnitType(udg_danwei2[16], UNIT_TYPE_DEAD) == true ) ) then
set udg_zhengshuex[0]=GetUnitAbilityLevel(udg_danwei2[15], 0x4130344A)
call UnitRemoveAbility(udg_danwei2[15], 0x4130344A)
call UnitAddAbility(udg_danwei2[15], 0x4130344A)
call SetUnitAbilityLevel(udg_danwei2[15], 0x4130344A, udg_zhengshuex[0])
call SetUnitManaBJ(udg_danwei2[15], ( GetUnitState(udg_danwei2[15], UNIT_STATE_MANA) + 25.00 ))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\SpiritOfVengeance\\SpiritOfVengeanceBirthMissile.mdl", udg_danwei2[15], "chest"))
else
endif
call PauseTimer(udg_times[15])
call KillUnit(udg_danwei2[17])
call SetUnitScale(udg_danwei2[17], 0.00, 0.00, 0.00)
call SetUnitAnimation(udg_danwei2[17], "stand")
set udg_danwei2[15]=null
set udg_danwei2[16]=null
set udg_danwei2[17]=null
else
endif
call RemoveLocation(udg_dian2[1])
else
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(85.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_zhuanzhuyijian_2Func004Func008Func002A)
call DestroyGroup(udg_xuanqu)
endif
else
call KillUnit(udg_danwei2[17])
call SetUnitScale(udg_danwei2[17], 0.00, 0.00, 0.00)
call SetUnitAnimation(udg_danwei2[17], "stand")
call PauseTimer(udg_times[15])
set udg_danwei2[15]=null
set udg_danwei2[16]=null
set udg_danwei2[17]=null
if ( ( udg_danwei2[365] != null ) ) then
if ( ( GetUnitTypeId(udg_danwei2[365]) == 0x65303554 ) ) then
call SetUnitScale(udg_danwei2[365], 0.00, 0.00, 0.00)
else
endif
call KillUnit(udg_danwei2[365])
set udg_danwei2[365]=null
else
endif
endif
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[2])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_zhuanzhuyijian_2 takes nothing returns nothing
set gg_trg_zhuanzhuyijian_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_zhuanzhuyijian_2, udg_times[15])
call TriggerAddAction(gg_trg_zhuanzhuyijian_2, function Trig_zhuanzhuyijian_2Actions)
endfunction
function Trig_fzjActions takes nothing returns nothing
set udg_danwei[64]=GetTriggerUnit()
set udg_dian[64]=GetSpellTargetLoc()
set udg_dian[65]=GetUnitLoc(udg_danwei[64])
set udg_danwei[65]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[64]), 0x65303051, PolarProjectionBJ(udg_dian[65], 64.00, AngleBetweenPoints(udg_dian[65], udg_dian[64])), AngleBetweenPoints(udg_dian[65], udg_dian[64]))
call GroupAddUnit(udg_DAZE[0], udg_danwei[65])
call GroupAddUnit(udg_DAZE[1], udg_danwei[65])
call PlaySoundOnUnitBJ(gg_snd_TinkerMissileLaunch101, 100, udg_danwei[65])
call UnitApplyTimedLife(udg_danwei[65], 0x42487765, 0.60)
call UnitAddAbility(udg_danwei[65], 0x41726176)
call s__maphack_SetHeight(udg_danwei[65] , 50.00 , 0.00)
call RemoveLocation(udg_dian[65])
call RemoveLocation(udg_dian[64])
call StartTimerBJ(udg_jishiqi[23], true, ( 0.05 - ( 0.01 * I2R(GetUnitAbilityLevel(udg_danwei[64], 0x41303048)) ) ))
endfunction
function InitTrig_fzj takes nothing returns nothing
set gg_trg_fzj=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_fzj , 3 , 0x41303048)
call TriggerAddAction(gg_trg_fzj, function Trig_fzjActions)
endfunction
function Trig_fzj2Func003Func006A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[1]=GetUnitLoc(udg_danwei2[0])
if ( ( DistanceBetweenPoints(udg_dian[66], udg_dian2[1]) <= 175.00 ) ) then
set udg_zhengshuex[0]=1
else
endif
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[1])
endfunction
function Trig_fzj2Func003Func007Func004A takes nothing returns nothing
set udg_danwei[147]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[147], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei[147], udg_danweizu2[369]) == false ) and ( IsUnitAliveBJ(udg_danwei[147]) == true ) and ( IsUnitEnemy(udg_danwei[147], GetOwningPlayer(udg_danwei[64])) == true ) ) then
call UnitDamageTarget(udg_danwei[64], udg_danwei[147], ( 1.00 * I2R(GetHeroAgi(udg_danwei[64], true)) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call DestroyEffect(AddSpecialEffectTarget("abilities\\weapons\\WyvernSpear\\WyvernSpearMissile.mdl", udg_danwei[147], "chest"))
else
endif
set udg_danwei[147]=null
endfunction
function Trig_fzj2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_dian[66]=GetUnitLoc(udg_danwei[65])
set udg_dian2[0]=PolarProjectionBJ(udg_dian[66], 93.75, GetUnitFacing(udg_danwei[65]))
if ( ( IsTerrainPathableBJ(udg_dian[66], PATHING_TYPE_FLYABILITY) == false ) and ( IsUnitType(udg_danwei[65], UNIT_TYPE_DEAD) == false ) ) then
call SetUnitX(udg_danwei[65], GetLocationX(udg_dian2[0]))
call SetUnitY(udg_danwei[65], GetLocationY(udg_dian2[0]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Undead\\FreezingBreath\\FreezingBreathMissile.mdl", udg_dian2[0]))
set udg_zhengshuex[0]=0
call ForGroupBJ(udg_danweizu2[76], function Trig_fzj2Func003Func006A)
if ( ( udg_zhengshuex[0] == 0 ) and ( GetUnitAbilityLevel(udg_danwei[65], 0x41304651) == 0 ) ) then
set udg_danweizu[18]=YDWEGetUnitsInRangeOfLocAllNull(256.00 , udg_dian[66])
call ForGroupBJ(udg_danweizu[18], function Trig_fzj2Func003Func007Func004A)
call DestroyGroup(udg_danweizu[18])
else
endif
else
call KillUnit(udg_danwei[65])
call PauseTimer(udg_jishiqi[23])
set udg_danwei[64]=null
set udg_danwei[65]=null
endif
call RemoveLocation(udg_dian[66])
call RemoveLocation(udg_dian2[0])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_fzj2 takes nothing returns nothing
set gg_trg_fzj2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_fzj2, udg_jishiqi[23])
call TriggerAddAction(gg_trg_fzj2, function Trig_fzj2Actions)
endfunction
function Trig_lianshe_1Conditions takes nothing returns boolean
return ( ( GetLearnedSkill() == 0x41303448 ) and ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true ) )
endfunction
function Trig_lianshe_1Actions takes nothing returns nothing
set udg_danwei[185]=GetTriggerUnit()
if ( ( GetUnitAbilityLevel(udg_danwei[185], 0x41303448) == 1 ) ) then
call AddSpecialEffectTargetUnitBJ("origin", udg_danwei[185], "war3mapImported\\SpiralAura.mdx")
call UnitAddAbility(udg_danwei[185], 0x41303449)
call TriggerRegisterUnitEvent(gg_trg_lianshe_3, udg_danwei[185], EVENT_UNIT_ISSUED_ORDER)
call TriggerRegisterUnitEvent(gg_trg_lianshe_3, udg_danwei[185], EVENT_UNIT_ISSUED_POINT_ORDER)
call TriggerRegisterUnitEvent(gg_trg_lianshe_3, udg_danwei[185], EVENT_UNIT_ISSUED_TARGET_ORDER)
else
endif
set udg_danwei[185]=null
endfunction
function InitTrig_lianshe_1 takes nothing returns nothing
set gg_trg_lianshe_1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_lianshe_1, EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(gg_trg_lianshe_1, Condition(function Trig_lianshe_1Conditions))
call TriggerAddAction(gg_trg_lianshe_1, function Trig_lianshe_1Actions)
endfunction
function Trig_lianshe_2Conditions takes nothing returns boolean
return ( ( GetUnitAbilityLevel(GetAttacker(), 0x41303448) > 0 ) )
endfunction
function Trig_lianshe_2Actions takes nothing returns nothing
set udg_danwei2[0]=GetAttacker()
set udg_danwei2[1]=GetAttackedUnitBJ()
set udg_zhengshu2[3]=GetRandomInt(1, 20)
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
if ( ( udg_zhengshu2[3] <= ( GetUnitAbilityLevel(udg_danwei2[0], 0x41303448) + 1 ) ) and ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) >= 300.00 ) ) then
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) * 0.10 ), AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
set udg_danwei2[2]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x48303042, udg_dian2[2], AngleBetweenPoints(udg_dian[0], udg_dian[1]))
call SetHeroLevelBJ(udg_danwei2[2], 30, false)
call SetHeroAgi(udg_danwei2[2], GetHeroAgi(udg_danwei2[0], false), true)
call SetHeroInt(udg_danwei2[2], GetHeroInt(udg_danwei2[0], false), true)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=6
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call UnitAddItemByIdSwapped(GetItemTypeId(UnitItemInSlotBJ(udg_danwei2[0], bj_forLoopAIndex)), udg_danwei2[2])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call SetUnitX(udg_danwei2[2], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[2], GetLocationY(udg_dian2[2]))
call UnitAddAbility(udg_danwei2[2], 0x416C6F63)
call s__baka_IssueTargetOrderById2(udg_danwei2[2] , 851983 , udg_danwei2[1])
call GroupAddUnit(udg_attack, udg_danwei2[2])
call ShowUnitHide(udg_danwei2[2])
call RemoveLocation(udg_dian2[2])
else
endif
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[0])
set udg_danwei2[0]=null
set udg_danwei2[1]=null
endfunction
function InitTrig_lianshe_2 takes nothing returns nothing
set gg_trg_lianshe_2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_lianshe_2, EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(gg_trg_lianshe_2, Condition(function Trig_lianshe_2Conditions))
call TriggerAddAction(gg_trg_lianshe_2, function Trig_lianshe_2Actions)
endfunction
function Trig_lianshe_3Func001A takes nothing returns nothing
set udg_danwei[185]=GetEnumUnit()
if ( ( GetUnitTypeId(udg_danwei[185]) == 0x48303042 ) and ( GetUnitUserData(udg_danwei[185]) < 10 ) ) then
if ( ( GetUnitAbilityLevel(udg_danwei[185], 0x41304A54) == 1 ) ) then
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=6
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call RemoveItem(UnitItemInSlotBJ(udg_danwei[185], bj_forLoopAIndex))
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call UnitAddAbility(udg_danwei[185], 0x41304845)
call UnitAddAbility(udg_danwei[185], 0x41304A54)
else
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=6
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call RemoveItem(UnitItemInSlotBJ(udg_danwei[185], bj_forLoopAIndex))
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
endif
call s__Unit_PauseUnitMU(udg_danwei[185] , true , "游侠连射")
call SetUnitUserData(udg_danwei[185], 10)
else
endif
set udg_danwei[185]=null
endfunction
function Trig_lianshe_3Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_attack, function Trig_lianshe_3Func001A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_lianshe_3 takes nothing returns nothing
set gg_trg_lianshe_3=CreateTrigger()
call TriggerAddAction(gg_trg_lianshe_3, function Trig_lianshe_3Actions)
endfunction
function Trig_gmjzActions takes nothing returns nothing
set udg_zhengshu[38]=0
set udg_zhengshu2[89]=0
set udg_zhengshu2[90]=0
set udg_danwei[66]=GetTriggerUnit()
set udg_dian[67]=GetUnitLoc(udg_danwei[66])
set udg_dian[68]=GetSpellTargetLoc()
set udg_danweizu2[89]=CreateGroup()
set udg_aXUNHUAN[60]=1
loop
exitwhen udg_aXUNHUAN[60] > IMinBJ(( 8 + ( GetHeroAgi(udg_danwei[66], true) / 30 ) ), 20)
set udg_zhengshu2[90]=( udg_zhengshu2[90] + 1 )
call CreateNUnitsAtLoc(1, 0x65303333, GetOwningPlayer(udg_danwei[66]), udg_dian[67], AngleBetweenPoints(udg_dian[67], udg_dian[68]))
set udg_danwei[70]=bj_lastCreatedUnit
call SetUnitColor(udg_danwei[70], PLAYER_COLOR_LIGHT_GRAY)
call UnitApplyTimedLife(udg_danwei[70], 0x42487765, 2.00)
call SetUnitUserData(udg_danwei[70], ( 80 + ( 5 * udg_aXUNHUAN[60] ) ))
call SetUnitAnimation(udg_danwei[70], "birth")
call GroupAddUnit(udg_danweizu2[89], udg_danwei[70])
set udg_danwei[70]=null
set udg_aXUNHUAN[60]=udg_aXUNHUAN[60] + 1
endloop
call StartTimerBJ(udg_times[89], true, 0.04)
call RemoveLocation(udg_dian[67])
endfunction
function InitTrig_gmjz takes nothing returns nothing
set gg_trg_gmjz=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_gmjz , 3 , 0x41303938)
call TriggerAddAction(gg_trg_gmjz, function Trig_gmjzActions)
endfunction
function Trig_baoyujianzhen_2Func003Func001A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( s__maphack_GetHeight(udg_danwei2[1]) <= 1500.00 ) ) then
call s__maphack_SetHeight(udg_danwei2[1] , ( s__maphack_GetHeight(udg_danwei2[1]) + I2R(GetUnitUserData(udg_danwei2[1])) ) , 0.00)
else
set udg_dian2[0]=PolarProjectionBJ(udg_dian[68], GetRandomReal(100.00, 250.00), GetRandomReal(0, 360.00))
call IssuePointOrderLoc(udg_danwei2[1], "clusterrockets", udg_dian2[0])
call SetUnitVertexColor(udg_danwei2[1], 255, 255, 255, 0)
call GroupRemoveUnit(udg_danweizu2[89], udg_danwei2[1])
call RemoveLocation(udg_dian2[0])
endif
set udg_danwei2[1]=null
endfunction
function Trig_baoyujianzhen_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu2[89]=( udg_zhengshu2[89] + 1 )
if ( ( udg_zhengshu2[89] <= 50 ) ) then
call ForGroupBJ(udg_danweizu2[89], function Trig_baoyujianzhen_2Func003Func001A)
if ( ( udg_zhengshu2[89] == 25 ) ) then
call EnableTrigger(gg_trg_gmjz2)
else
endif
else
call PauseTimer(udg_times[89])
call DestroyGroup(udg_danweizu2[89])
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_baoyujianzhen_2 takes nothing returns nothing
set gg_trg_baoyujianzhen_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_baoyujianzhen_2, udg_times[89])
call TriggerAddAction(gg_trg_baoyujianzhen_2, function Trig_baoyujianzhen_2Actions)
endfunction
function Trig_gmjz2Func003A takes nothing returns nothing
set udg_danwei[148]=GetEnumUnit()
if ( ( IsUnitAliveBJ(udg_danwei[148]) == true ) and ( IsUnitType(udg_danwei[148], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei[148], udg_danweizu2[369]) == false ) and ( IsUnitEnemy(udg_danwei[148], GetOwningPlayer(udg_danwei[66])) == true ) ) then
call UnitDamageTarget(udg_danwei[66], udg_danwei[148], ( I2R(udg_zhengshu2[90]) * 3.75 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_MEDIUM_SLICE)
else
endif
set udg_danwei[148]=null
endfunction
function Trig_gmjz2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu[38]=( udg_zhengshu[38] + 1 )
set udg_danweizu[19]=YDWEGetUnitsInRangeOfLocAllNull(400.00 , udg_dian[68])
call ForGroupBJ(udg_danweizu[19], function Trig_gmjz2Func003A)
call DestroyGroup(udg_danweizu[19])
if ( ( udg_zhengshu[38] == 20 ) ) then
set udg_danwei[66]=null
call RemoveLocation(udg_dian[68])
call DisableTrigger(GetTriggeringTrigger())
else
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_gmjz2 takes nothing returns nothing
set gg_trg_gmjz2=CreateTrigger()
call DisableTrigger(gg_trg_gmjz2)
call TriggerRegisterTimerEventPeriodic(gg_trg_gmjz2, 0.10)
call TriggerAddAction(gg_trg_gmjz2, function Trig_gmjz2Actions)
endfunction
function Trig_rongjiangjushi_1Actions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
set udg_danwei2[34]=GetTriggerUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[1]=GetSpellTargetLoc()
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], 250.00, AngleBetweenPoints(udg_dian2[1], udg_dian2[0]))
set udg_danwei2[33]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303248, udg_dian2[2], AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
call GroupAddUnit(udg_DAZE[0], udg_danwei2[33])
call PlaySoundOnUnitBJ(gg_snd_InfernalBirth1, 100, udg_danwei2[33])
call UnitApplyTimedLife(udg_danwei2[33], 0x42487765, 4.00)
call s__maphack_SetHeight(udg_danwei2[33] , 475.00 , 0.00)
call SetUnitAnimation(udg_danwei2[33], "birth")
call StartTimerBJ(udg_times[33], true, 0.05)
set udg_zhengshu2[33]=0
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
endfunction
function InitTrig_rongjiangjushi_1 takes nothing returns nothing
set gg_trg_rongjiangjushi_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_rongjiangjushi_1 , 3 , 0x4130304D)
call TriggerAddAction(gg_trg_rongjiangjushi_1, function Trig_rongjiangjushi_1Actions)
endfunction
function Trig_rongjiangjushi_2Func003Func010Func004A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[34])) == true ) ) then
call UnitDamageTarget(udg_danwei2[34], udg_danwei2[1], I2R(GetHeroInt(udg_danwei2[34], true)), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_FIRE, WEAPON_TYPE_WHOKNOWS)
call s__baka_IssueTargetOrderById2(udg_danwei2[0] , 852095 , udg_danwei2[1])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_rongjiangjushi_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_dian2[0]=GetUnitLoc(udg_danwei2[33])
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 20.00, GetUnitFacing(udg_danwei2[33]))
if ( ( IsUnitType(udg_danwei2[33], UNIT_TYPE_DEAD) == false ) and ( IsTerrainPathableBJ(udg_dian2[0], PATHING_TYPE_FLYABILITY) == false ) and ( ( GetLocationZ(udg_dian2[0]) + s__maphack_GetHeight(udg_danwei2[33]) ) > GetLocationZ(udg_dian2[1]) ) ) then
call SetUnitX(udg_danwei2[33], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[33], GetLocationY(udg_dian2[1]))
if ( ( s__maphack_GetHeight(udg_danwei2[33]) >= 75.00 ) ) then
set udg_zhengshu2[33]=( udg_zhengshu2[33] - 4 )
call s__maphack_SetHeight(udg_danwei2[33] , ( s__maphack_GetHeight(udg_danwei2[33]) + I2R(udg_zhengshu2[33]) ) , 0.00)
else
set udg_zhengshu2[33]=16
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[33]), 0x65303249, udg_dian2[0], 0.00)
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(250.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_rongjiangjushi_2Func003Func010Func004A)
call DestroyGroup(udg_xuanqu)
call SetUnitAbilityLevel(udg_danwei2[0], 0x41303546, GetUnitAbilityLevel(udg_danwei2[34], 0x4130304D))
call IssueImmediateOrderById(udg_danwei2[0], 852177)
call UnitApplyTimedLife(udg_danwei2[0], 0x42487765, 3.00)
set udg_danwei2[0]=null
call s__maphack_SetHeight(udg_danwei2[33] , 80.00 , 0.00)
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\Volcano\\VolcanoDeath.mdl", udg_dian2[0]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", udg_dian2[0]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", udg_dian2[0]))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl", udg_dian2[0]))
endif
else
call KillUnit(udg_danwei2[33])
call PauseTimer(udg_times[33])
set udg_danwei2[33]=null
set udg_danwei2[34]=null
endif
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_rongjiangjushi_2 takes nothing returns nothing
set gg_trg_rongjiangjushi_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_rongjiangjushi_2, udg_times[33])
call TriggerAddAction(gg_trg_rongjiangjushi_2, function Trig_rongjiangjushi_2Actions)
endfunction
function Trig_bfActions takes nothing returns nothing
set udg_danwei[73]=GetTriggerUnit()
set udg_dian[69]=GetUnitLoc(udg_danwei[73])
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=5
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_dian2[1]=PolarProjectionBJ(udg_dian[69], 450.00, ( 72.00 * I2R(bj_forLoopAIndex) ))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[73]), 0x65303054, udg_dian2[1], 0)
call SetUnitManaBJ(udg_danwei2[1], ( 72.00 * I2R(bj_forLoopAIndex) ))
call GroupAddUnit(udg_danweizu2[363], udg_danwei2[1])
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[1])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call RemoveLocation(udg_dian[69])
call StartTimerBJ(udg_jishiqi[24], true, 0.04)
call EnableTrigger(gg_trg_bf2)
set udg_zhengshu2[363]=( 50 + ( 25 * GetUnitAbilityLevel(udg_danwei[73], 0x4130304B) ) )
endfunction
function InitTrig_bf takes nothing returns nothing
set gg_trg_bf=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_bf , 3 , 0x4130304B)
call TriggerAddAction(gg_trg_bf, function Trig_bfActions)
endfunction
function Trig_bf2Func001Func001A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
call SetUnitTimeScale(udg_danwei2[1], 0.00)
set udg_danwei2[1]=null
endfunction
function Trig_bf2Func001Func004Func004A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
call RemoveUnit(udg_danwei2[1])
set udg_danwei2[1]=null
endfunction
function Trig_bf2Func001Func004Func007A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
call SetUnitTimeScale(udg_danwei2[1], 1.00)
call SetUnitManaBJ(udg_danwei2[1], ( GetUnitState(udg_danwei2[1], UNIT_STATE_MANA) + 20.00 ))
if ( ( GetUnitState(udg_danwei2[1], UNIT_STATE_MANA) > 500.00 ) ) then
call SetUnitManaBJ(udg_danwei2[1], ( GetUnitState(udg_danwei2[1], UNIT_STATE_MANA) - 360.00 ))
else
endif
set udg_dian2[1]=PolarProjectionBJ(udg_dian[69], 450.00, GetUnitState(udg_danwei2[1], UNIT_STATE_MANA))
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[1]))
else
endif
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[1])
endfunction
function Trig_bf2Func001Func004Func009A takes nothing returns nothing
set udg_danwei[149]=GetEnumUnit()
if ( ( IsUnitAliveBJ(udg_danwei[149]) == true ) and ( IsUnitType(udg_danwei[149], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei[149], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitEnemy(udg_danwei[149], GetOwningPlayer(udg_danwei[73])) == true ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei[149])
call UnitDamageTarget(udg_danwei[73], udg_danwei[149], ( ( I2R(GetHeroInt(udg_danwei[73], true)) * 0.08 ) * ( 0.20 + ( ( DistanceBetweenPoints(udg_dian[69], udg_dian2[0]) * 0.01 ) * 0.08 ) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
if ( ( DistanceBetweenPoints(udg_dian[69], udg_dian2[0]) < 400.00 ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 5.00, AngleBetweenPoints(udg_dian[69], udg_dian2[0]))
else
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 5.00, AngleBetweenPoints(udg_dian2[0], udg_dian[69]))
endif
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei[149], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei[149], GetLocationY(udg_dian2[1]))
else
endif
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
endif
set udg_danwei[149]=null
endfunction
function Trig_bf2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( ( IsUnitPausedBJ(udg_danwei[73]) == false ) or ( IsUnitType(udg_danwei[73], UNIT_TYPE_DEAD) == true ) ) ) then
set udg_zhengshu2[363]=( udg_zhengshu2[363] - 1 )
if ( ( udg_zhengshu2[363] >= 0 ) and ( IsUnitType(udg_danwei[73], UNIT_TYPE_DEAD) == false ) ) then
set udg_dian[69]=GetUnitLoc(udg_danwei[73])
call ForGroupBJ(udg_danweizu2[363], function Trig_bf2Func001Func004Func007A)
set udg_danweizu[20]=YDWEGetUnitsInRangeOfLocAllNull(500.00 , udg_dian[69])
call ForGroupBJ(udg_danweizu[20], function Trig_bf2Func001Func004Func009A)
call RemoveLocation(udg_dian[69])
call DestroyGroup(udg_danweizu[20])
else
set udg_danwei[73]=null
call ForGroupBJ(udg_danweizu2[363], function Trig_bf2Func001Func004Func004A)
call GroupClear(udg_danweizu2[363])
endif
else
call ForGroupBJ(udg_danweizu2[363], function Trig_bf2Func001Func001A)
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_bf2 takes nothing returns nothing
set gg_trg_bf2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_bf2, udg_jishiqi[24])
call TriggerAddAction(gg_trg_bf2, function Trig_bf2Actions)
endfunction
function Trig_huixiongConditions takes nothing returns boolean
return ( ( GetUnitTypeId(GetSummonedUnit()) == 0x4F303030 ) )
endfunction
function Trig_huixiongActions takes nothing returns nothing
set udg_danwei[75]=GetSummoningUnit()
set udg_danwei[76]=GetSummonedUnit()
call SetHeroLevel(udg_danwei[76], 30, false)
call SetHeroStr(udg_danwei[76], R2I(I2R(GetHeroStr(udg_danwei[75], true))), true)
call SetHeroAgi(udg_danwei[76], R2I(I2R(GetHeroAgi(udg_danwei[75], false))), true)
call SetHeroInt(udg_danwei[76], 0, true)
call UnitApplyTimedLife(udg_danwei[76], 0x42544C46, 40.00)
if ( ( GetUnitAbilityLevel(udg_danwei[75], 0x4130354B) >= 2 ) ) then
call UnitAddAbility(udg_danwei[76], 0x4130354E)
if ( ( GetUnitAbilityLevel(udg_danwei[75], 0x4130354B) >= 3 ) ) then
call UnitAddAbility(udg_danwei[76], 0x4130304C)
if ( ( GetUnitAbilityLevel(udg_danwei[75], 0x4130354B) >= 4 ) ) then
call UnitAddAbility(udg_danwei[76], 0x4130354D)
if ( ( GetUnitAbilityLevel(udg_danwei[75], 0x4130354B) == 5 ) ) then
call UnitAddAbility(udg_danwei[76], 0x4130354C)
else
endif
else
endif
else
endif
else
endif
call StartTimerBJ(udg_times[36], true, 0.50)
endfunction
function InitTrig_huixiong takes nothing returns nothing
set gg_trg_huixiong=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_huixiong, EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(gg_trg_huixiong, Condition(function Trig_huixiongConditions))
call TriggerAddAction(gg_trg_huixiong, function Trig_huixiongActions)
endfunction
function Trig_huixiong_2Actions takes nothing returns nothing
if ( ( IsUnitType(udg_danwei[75], UNIT_TYPE_DEAD) == false ) and ( IsUnitType(udg_danwei[76], UNIT_TYPE_DEAD) == false ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei[75])
set udg_dian2[1]=GetUnitLoc(udg_danwei[76])
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) >= 2000.00 ) ) then
call SetUnitX(udg_danwei[76], GetLocationX(udg_dian2[0]))
call SetUnitY(udg_danwei[76], GetLocationY(udg_dian2[0]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl", udg_dian2[0]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl", udg_dian2[1]))
else
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) >= 1600.00 ) ) then
call s__baka_IssueTargetOrderById2(udg_danwei[76] , 851990 , udg_danwei[75])
else
endif
endif
call SetHeroStr(udg_danwei[76], R2I(I2R(GetHeroStr(udg_danwei[75], true))), true)
call SetHeroAgi(udg_danwei[76], R2I(I2R(GetHeroAgi(udg_danwei[75], false))), true)
set udg_zhengshuex[0]=R2I(( I2R(GetHeroStr(udg_danwei[75], true)) * ( 0.10 + ( 0.08 * I2R(GetUnitAbilityLevel(udg_danwei[75], 0x4130354B)) ) ) ))
set udg_aXUNHUAN[61]=0
loop
exitwhen udg_aXUNHUAN[61] > 11
call UnitRemoveAbility(udg_danwei[76], udg_attackforce[udg_aXUNHUAN[61]])
set udg_aXUNHUAN[61]=udg_aXUNHUAN[61] + 1
endloop
set udg_aXUNHUAN[62]=0
loop
exitwhen udg_aXUNHUAN[62] > 11
if ( ( udg_zhengshuex[0] >= R2I(Pow(2.00, ( 11.00 - I2R(udg_aXUNHUAN[62]) ))) ) ) then
set udg_zhengshuex[0]=( udg_zhengshuex[0] - R2I(Pow(2.00, ( 11.00 - I2R(udg_aXUNHUAN[62]) ))) )
call UnitAddAbility(udg_danwei[76], udg_attackforce[( 11 - udg_aXUNHUAN[62] )])
else
endif
set udg_aXUNHUAN[62]=udg_aXUNHUAN[62] + 1
endloop
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
call RemoveUnit(udg_danwei[76])
call PauseTimer(udg_times[36])
set udg_danwei[75]=null
set udg_danwei[76]=null
endif
endfunction
function InitTrig_huixiong_2 takes nothing returns nothing
set gg_trg_huixiong_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_huixiong_2, udg_times[36])
call TriggerAddAction(gg_trg_huixiong_2, function Trig_huixiong_2Actions)
endfunction
function Trig_huixiong_4Actions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
set udg_danwei2[1]=GetSpellTargetUnit()
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[1], ( I2R(GetHeroStr(udg_danwei2[0], true)) * 2.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WOOD_HEAVY_BASH)
set udg_danwei2[0]=null
set udg_danwei2[1]=null
endfunction
function InitTrig_huixiong_4 takes nothing returns nothing
set gg_trg_huixiong_4=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_huixiong_4 , 3 , 0x4130354C)
call TriggerAddAction(gg_trg_huixiong_4, function Trig_huixiong_4Actions)
endfunction
function Trig_langrenxingtaiActions takes nothing returns nothing
set udg_danwei[280]=GetTriggerUnit()
if ( ( GetUnitTypeId(udg_danwei[280]) == 0x4F746368 ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei[280]), 0x4130304D, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei[280]), 0x4130304B, false)
call UnitAddAbility(udg_danwei[280], 0x41303549)
call UnitAddAbility(udg_danwei[280], 0x41304743)
call UnitMakeAbilityPermanent(udg_danwei[280], true, 0x41303549)
call UnitMakeAbilityPermanent(udg_danwei[280], true, 0x41304743)
call SetUnitAbilityLevel(udg_danwei[280], 0x41303548, GetUnitAbilityLevel(udg_danwei[280], 0x414E7267))
call SetUnitAbilityLevel(udg_danwei[280], 0x41303549, GetUnitAbilityLevel(udg_danwei[280], 0x414E7267))
call SetUnitAbilityLevel(udg_danwei[280], 0x41304743, GetUnitAbilityLevel(udg_danwei[280], 0x414E7267))
set udg_danwei2[38]=GetTriggerUnit()
call UnitAddAbility(udg_danwei2[38], 0x4130354A)
call UnitMakeAbilityPermanent(udg_danwei2[38], true, 0x4130354A)
call StartTimerBJ(udg_times[35], true, 0.05)
else
call UnitRemoveAbility(udg_danwei[280], 0x41303549)
call UnitRemoveAbility(udg_danwei[280], 0x41304743)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei[280]), 0x4130304D, true)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei[280]), 0x4130304B, true)
call UnitRemoveAbility(udg_danwei2[38], 0x4130354A)
call PauseTimer(udg_times[35])
set udg_aXUNHUAN[63]=35
loop
exitwhen udg_aXUNHUAN[63] > 37
call RemoveUnit(udg_danwei2[udg_aXUNHUAN[63]])
set udg_danwei2[udg_aXUNHUAN[63]]=null
set udg_aXUNHUAN[63]=udg_aXUNHUAN[63] + 1
endloop
set bj_forLoopAIndex=0
set bj_forLoopAIndexEnd=11
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call UnitRemoveAbility(udg_danwei2[38], udg_attackforce[udg_aXUNHUAN[63]])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
set udg_danwei2[38]=null
endif
set udg_danwei[280]=null
endfunction
function InitTrig_langrenxingtai takes nothing returns nothing
set gg_trg_langrenxingtai=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_langrenxingtai , 3 , 0x414E7267)
call TriggerAddAction(gg_trg_langrenxingtai, function Trig_langrenxingtaiActions)
endfunction
function Trig_langrenxingtai_2Conditions takes nothing returns boolean
return ( ( ( GetUnitTypeId(GetDyingUnit()) == 0x4F746368 ) or ( GetUnitTypeId(GetDyingUnit()) == 0x4E726F62 ) ) )
endfunction
function Trig_langrenxingtai_2Actions takes nothing returns nothing
set udg_danwei[280]=GetDyingUnit()
call UnitRemoveAbility(udg_danwei[280], 0x4130354F)
call UnitRemoveAbility(udg_danwei[280], 0x41303549)
call UnitRemoveAbility(udg_danwei[280], 0x41304743)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei[280]), 0x4130304D, true)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei[280]), 0x4130304B, true)
set udg_danwei[280]=null
call UnitRemoveAbility(udg_danwei2[38], 0x4130334F)
call UnitRemoveAbility(udg_danwei2[38], 0x4130354A)
call PauseTimer(udg_times[35])
set udg_aXUNHUAN[64]=35
loop
exitwhen udg_aXUNHUAN[64] > 37
call RemoveUnit(udg_danwei2[udg_aXUNHUAN[64]])
set udg_danwei2[udg_aXUNHUAN[64]]=null
set udg_aXUNHUAN[64]=udg_aXUNHUAN[64] + 1
endloop
set udg_aXUNHUAN[65]=0
loop
exitwhen udg_aXUNHUAN[65] > 11
call UnitRemoveAbility(udg_danwei2[38], udg_attackforce[udg_aXUNHUAN[65]])
set udg_aXUNHUAN[65]=udg_aXUNHUAN[65] + 1
endloop
set udg_danwei2[38]=null
endfunction
function InitTrig_langrenxingtai_2 takes nothing returns nothing
set gg_trg_langrenxingtai_2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_langrenxingtai_2, EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gg_trg_langrenxingtai_2, Condition(function Trig_langrenxingtai_2Conditions))
call TriggerAddAction(gg_trg_langrenxingtai_2, function Trig_langrenxingtai_2Actions)
endfunction
function Trig_langren_upConditions takes nothing returns boolean
return ( ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true ) )
endfunction
function Trig_langren_upActions takes nothing returns nothing
set udg_danwei[280]=GetTriggerUnit()
if ( ( GetLearnedSkill() == 0x4130354B ) ) then
if ( ( udg_danwei[76] != null ) ) then
if ( ( GetUnitAbilityLevel(udg_danwei[280], 0x4130354B) >= 5 ) ) then
call UnitAddAbility(udg_danwei[76], 0x4130354C)
else
if ( ( GetUnitAbilityLevel(udg_danwei[280], 0x4130354B) >= 4 ) ) then
call UnitAddAbility(udg_danwei[76], 0x4130354D)
else
if ( ( GetUnitAbilityLevel(udg_danwei[280], 0x4130354B) >= 3 ) ) then
call UnitAddAbility(udg_danwei[76], 0x4130304C)
else
if ( ( GetUnitAbilityLevel(udg_danwei[280], 0x4130354B) >= 2 ) ) then
call UnitAddAbility(udg_danwei[76], 0x4130354E)
else
endif
endif
endif
endif
else
endif
else
endif
if ( ( GetLearnedSkill() == 0x414E7267 ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei[280]), 0x4130354F, false)
call SetUnitAbilityLevel(udg_danwei[280], 0x41303548, GetUnitAbilityLevel(udg_danwei[280], 0x414E7267))
call SetUnitAbilityLevel(udg_danwei[280], 0x41303549, GetUnitAbilityLevel(udg_danwei[280], 0x414E7267))
call SetUnitAbilityLevel(udg_danwei[280], 0x41304743, GetUnitAbilityLevel(udg_danwei[280], 0x414E7267))
else
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_langren_up takes nothing returns nothing
set gg_trg_langren_up=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_langren_up, EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(gg_trg_langren_up, Condition(function Trig_langren_upConditions))
call TriggerAddAction(gg_trg_langren_up, function Trig_langren_upActions)
endfunction
function Trig_mengshouzhixi_1Actions takes nothing returns nothing
set udg_danwei2[377]=GetTriggerUnit()
set udg_danwei2[378]=GetSpellTargetUnit()
call StartTimerBJ(udg_times[377], true, 0.02)
set udg_zhengshu2[378]=0
endfunction
function InitTrig_mengshouzhixi_1 takes nothing returns nothing
set gg_trg_mengshouzhixi_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_mengshouzhixi_1 , 3 , 0x41304743)
call TriggerAddAction(gg_trg_mengshouzhixi_1, function Trig_mengshouzhixi_1Actions)
endfunction
function Trig_mengshouzhixi_2Actions takes nothing returns nothing
if ( ( udg_zhengshu2[378] <= 1 ) and ( udg_danwei2[378] != null ) ) then
set udg_dian2[1]=GetUnitLoc(udg_danwei2[378])
if ( ( udg_zhengshu2[378] == 0 ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[377])
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) > 100.00 ) and ( IsUnitType(udg_danwei2[377], UNIT_TYPE_DEAD) == false ) ) then
if ( ( IsUnitPausedBJ(udg_danwei2[377]) == false ) ) then
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], 50.00, AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
call SetUnitX(udg_danwei2[377], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[377], GetLocationY(udg_dian2[2]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", udg_dian2[2]))
call RemoveLocation(udg_dian2[2])
else
endif
else
call UnitDamageTarget(udg_danwei2[377], udg_danwei2[378], ( I2R(GetHeroStr(udg_danwei2[377], true)) * 2.00 ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WOOD_HEAVY_BASH)
if ( ( udg_danwei[76] != null ) ) then
set udg_zhengshu2[378]=1
call s__baka_IssueTargetOrderById2(udg_danwei[76] , 851983 , udg_danwei2[378])
call s__baka_IssueTargetOrderById2(udg_danwei[76] , 852095 , udg_danwei2[378])
else
set udg_zhengshu2[378]=2
endif
endif
call RemoveLocation(udg_dian2[0])
else
endif
if ( ( udg_zhengshu2[378] == 1 ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei[76])
set udg_dian2[2]=GetUnitLoc(udg_danwei2[377])
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[2]) < 1600.00 ) and ( UnitHasBuffBJ(udg_danwei[76], 0x4253544E) == false ) and ( UnitHasBuffBJ(udg_danwei[76], 0x42505345) == false ) ) then
else
set udg_zhengshu2[378]=2
endif
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) > 80.00 ) and ( IsUnitType(udg_danwei[76], UNIT_TYPE_DEAD) == false ) ) then
if ( ( IsUnitPausedBJ(udg_danwei[76]) == false ) ) then
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], 15.00, AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
call SetUnitX(udg_danwei[76], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei[76], GetLocationY(udg_dian2[2]))
call SetUnitFacing(udg_danwei[76], AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Undead\\ImpaleTargetDust\\ImpaleTargetDust.mdl", udg_danwei[76], "origin"))
call RemoveLocation(udg_dian2[2])
else
endif
else
set udg_zhengshu2[378]=2
endif
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[2])
else
endif
call RemoveLocation(udg_dian2[1])
else
call PauseTimer(udg_times[377])
set udg_danwei2[377]=null
set udg_danwei2[378]=null
endif
endfunction
function InitTrig_mengshouzhixi_2 takes nothing returns nothing
set gg_trg_mengshouzhixi_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_mengshouzhixi_2, udg_times[377])
call TriggerAddAction(gg_trg_mengshouzhixi_2, function Trig_mengshouzhixi_2Actions)
endfunction
function Trig_mengshouzhinu_2Actions takes nothing returns nothing
set udg_dian2[0]=GetUnitLoc(udg_danwei2[38])
set udg_dian2[1]=GetUnitLoc(udg_danwei2[35])
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], 100.00, ( AngleBetweenPoints(udg_dian2[0], udg_dian2[1]) + 20.00 ))
set bj_forLoopAIndex=35
set bj_forLoopAIndexEnd=37
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call SetUnitAnimation(udg_danwei2[bj_forLoopAIndex], "stand")
call SetUnitX(udg_danwei2[bj_forLoopAIndex], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[bj_forLoopAIndex], GetLocationY(udg_dian2[2]))
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[38])) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[38])) + 1 ) <= 5 ) ) then
if ( ( IsUnitInvisible(udg_danwei2[38], s__baka_SPlayer(11)) == true ) ) then
call UnitAddAbility(udg_danwei2[bj_forLoopAIndex], 0x4167686F)
else
call UnitRemoveAbility(udg_danwei2[bj_forLoopAIndex], 0x4167686F)
endif
else
endif
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[38])) + 1 ) >= 6 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[38])) + 1 ) <= 10 ) ) then
if ( ( IsUnitInvisible(udg_danwei2[38], s__baka_SPlayer(10)) == true ) ) then
call UnitAddAbility(udg_danwei2[bj_forLoopAIndex], 0x4167686F)
else
call UnitRemoveAbility(udg_danwei2[bj_forLoopAIndex], 0x4167686F)
endif
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
set udg_zhengshuex[0]=R2I(( I2R(GetHeroStr(udg_danwei2[38], true)) * ( 0.50 + ( 0.00 * I2R(GetUnitAbilityLevel(udg_danwei2[38], 0x414E7267)) ) ) ))
set udg_aXUNHUAN[66]=0
loop
exitwhen udg_aXUNHUAN[66] > 11
call UnitRemoveAbility(udg_danwei2[38], udg_attackforce[udg_aXUNHUAN[66]])
set udg_aXUNHUAN[66]=udg_aXUNHUAN[66] + 1
endloop
set udg_aXUNHUAN[67]=0
loop
exitwhen udg_aXUNHUAN[67] > 11
if ( ( udg_zhengshuex[0] >= R2I(Pow(2.00, ( 11.00 - I2R(udg_aXUNHUAN[67]) ))) ) ) then
set udg_zhengshuex[0]=( udg_zhengshuex[0] - R2I(Pow(2.00, ( 11.00 - I2R(udg_aXUNHUAN[67]) ))) )
call UnitAddAbility(udg_danwei2[38], udg_attackforce[( 11 - udg_aXUNHUAN[67] )])
else
endif
set udg_aXUNHUAN[67]=udg_aXUNHUAN[67] + 1
endloop
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
endfunction
function InitTrig_mengshouzhinu_2 takes nothing returns nothing
set gg_trg_mengshouzhinu_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_mengshouzhinu_2, udg_times[35])
call TriggerAddAction(gg_trg_mengshouzhinu_2, function Trig_mengshouzhinu_2Actions)
endfunction
function Trig_mengshouzhinu_3Actions takes nothing returns nothing
set udg_Danwei[11]=GetKillingUnitBJ()
if ( ( GetUnitTypeId(udg_Danwei[11]) == 0x4E726F62 ) and ( GetUnitAbilityLevel(udg_Danwei[11], 0x4130354A) < 4 ) ) then
set udg_Dian[11]=GetUnitLoc(udg_Danwei[11])
if ( ( GetUnitAbilityLevel(udg_Danwei[11], 0x4130354A) == 1 ) ) then
set udg_danwei2[35]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[11]), 0x6530324B, udg_Dian[11], 0.00)
call IncUnitAbilityLevel(udg_Danwei[11], 0x4130354A)
else
if ( ( GetUnitAbilityLevel(udg_Danwei[11], 0x4130354A) == 2 ) and ( GetUnitAbilityLevel(udg_Danwei[11], 0x414E7267) >= 2 ) ) then
set udg_danwei2[36]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[11]), 0x6530324B, udg_Dian[11], 0.00)
call IncUnitAbilityLevel(udg_Danwei[11], 0x4130354A)
else
if ( ( GetUnitAbilityLevel(udg_Danwei[11], 0x4130354A) == 3 ) and ( GetUnitAbilityLevel(udg_Danwei[11], 0x414E7267) >= 3 ) ) then
set udg_danwei2[37]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[11]), 0x6530324B, udg_Dian[11], 0.00)
call IncUnitAbilityLevel(udg_Danwei[11], 0x4130354A)
else
endif
endif
endif
call RemoveLocation(udg_Dian[11])
else
endif
set udg_Danwei[11]=null
endfunction
function InitTrig_mengshouzhinu_3 takes nothing returns nothing
set gg_trg_mengshouzhinu_3=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_mengshouzhinu_3, EVENT_PLAYER_UNIT_DEATH)
call TriggerAddAction(gg_trg_mengshouzhinu_3, function Trig_mengshouzhinu_3Actions)
endfunction
function Trig_yanzhuaFunc006Func004A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[34]) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call GroupAddUnit(udg_danweizu2[34], udg_danwei2[1])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_yanzhuaFunc010A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
call s__baka_IssueTargetOrderById2(udg_danwei2[2] , 852095 , udg_danwei2[1])
call s__baka_IssueTargetOrderById2(udg_danwei2[2] , 852662 , udg_danwei2[1])
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[1], ( I2R(GetHeroStr(udg_danwei2[0], true)) * 2.00 ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WOOD_HEAVY_BASH)
set udg_danwei2[1]=null
endfunction
function Trig_yanzhuaActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetSpellAbilityUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_danweizu2[34]=CreateGroup()
call PlaySoundOnUnitBJ(gg_snd_KeeperOfTheGroveMissileLaunch2, 100, udg_danwei2[0])
set udg_aXUNHUAN[68]=1
loop
exitwhen udg_aXUNHUAN[68] > 7
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 200.00, ( GetUnitFacing(udg_danwei2[0]) + ( 15.00 * ( 4.00 - I2R(udg_aXUNHUAN[68]) ) ) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\FireBallMissile\\FireBallMissile.mdl", udg_dian2[1]))
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(150.00 , udg_dian2[1])
call ForGroupBJ(udg_xuanqu, function Trig_yanzhuaFunc006Func004A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[1])
set udg_aXUNHUAN[68]=udg_aXUNHUAN[68] + 1
endloop
set udg_danwei2[2]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x6530324A, udg_dian2[0], 0.00)
call UnitApplyTimedLife(udg_danwei2[2], 0x42487765, 4.00)
call SetUnitAbilityLevel(udg_danwei2[2], 0x414E6162, GetUnitAbilityLevel(udg_danwei2[0], 0x41303549))
call ForGroupBJ(udg_danweizu2[34], function Trig_yanzhuaFunc010A)
call DestroyGroup(udg_danweizu2[34])
set udg_danwei2[0]=null
set udg_danwei2[2]=null
call RemoveLocation(udg_dian2[0])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_yanzhua takes nothing returns nothing
set gg_trg_yanzhua=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_yanzhua , 3 , 0x41303549)
call TriggerAddAction(gg_trg_yanzhua, function Trig_yanzhuaActions)
endfunction
function Trig_huitianmiedi_1Actions takes nothing returns nothing
set udg_danwei2[39]=GetSpellAbilityUnit()
set udg_zhengshu2[39]=0
call StartTimerBJ(udg_times[39], true, 0.25)
endfunction
function InitTrig_huitianmiedi_1 takes nothing returns nothing
set gg_trg_huitianmiedi_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_huitianmiedi_1 , 3 , 0x41303550)
call TriggerAddAction(gg_trg_huitianmiedi_1, function Trig_huitianmiedi_1Actions)
endfunction
function Trig_huitianmiedi_2Actions takes nothing returns nothing
if ( ( ( IsUnitPausedBJ(udg_danwei2[39]) == false ) or ( IsUnitType(udg_danwei2[39], UNIT_TYPE_DEAD) == true ) ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[39])
set udg_zhengshu2[39]=( udg_zhengshu2[39] + 1 )
if ( ( udg_zhengshu2[39] <= 24 ) and ( IsUnitType(udg_danwei2[39], UNIT_TYPE_DEAD) == false ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 250.00, GetUnitFacing(udg_danwei2[39]))
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], GetRandomReal(50.00, 500.00), GetRandomReal(0, 360.00))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[39]), 0x6530324C, udg_dian2[2], 0.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 1.50)
call IssueImmediateOrder(udg_danwei2[1], "fanofknives")
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
else
if ( ( udg_zhengshu2[39] >= 28 ) ) then
call PauseTimer(udg_times[39])
set udg_danwei2[39]=null
else
endif
endif
call RemoveLocation(udg_dian2[0])
else
endif
endfunction
function InitTrig_huitianmiedi_2 takes nothing returns nothing
set gg_trg_huitianmiedi_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_huitianmiedi_2, udg_times[39])
call TriggerAddAction(gg_trg_huitianmiedi_2, function Trig_huitianmiedi_2Actions)
endfunction
function Trig_huitianmiedi_3Func007A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call UnitDamageTarget(udg_danwei2[39], udg_danwei2[1], ( I2R(GetHeroInt(udg_danwei2[39], true)) * 1.50 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_FIRE, WEAPON_TYPE_WHOKNOWS)
call s__baka_IssueTargetOrderById2(udg_danwei2[0] , 852095 , udg_danwei2[1])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_huitianmiedi_3Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetSpellAbilityUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\Volcano\\VolcanoMissile.mdl", udg_dian2[0]))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl", udg_dian2[0]))
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(300.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_huitianmiedi_3Func007A)
call DestroyGroup(udg_xuanqu)
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_huitianmiedi_3 takes nothing returns nothing
set gg_trg_huitianmiedi_3=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_huitianmiedi_3 , 5 , 0x41303846)
call TriggerAddAction(gg_trg_huitianmiedi_3, function Trig_huitianmiedi_3Actions)
endfunction
function Trig_qianxing_1Func004T takes nothing returns nothing
call EnableTrigger(gg_trg_qianxing_3)
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
endfunction
function Trig_qianxing_1Actions takes nothing returns nothing
local timer ydl_timer
set udg_Danwei[159]=GetTriggerUnit()
call StartTimerBJ(udg_jishiqi[26], true, 0.03)
set ydl_timer=CreateTimer()
call TimerStart(ydl_timer, 1.50, false, function Trig_qianxing_1Func004T)
set ydl_timer=null
endfunction
function InitTrig_qianxing_1 takes nothing returns nothing
set gg_trg_qianxing_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_qianxing_1 , 3 , 0x414F776B)
call TriggerAddAction(gg_trg_qianxing_1, function Trig_qianxing_1Actions)
endfunction
function Trig_qianxing_2Func001Func001Func004A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[1])
if ( ( udg_zhengshu[39] >= 10 ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], ( ( DistanceBetweenPoints(udg_dian[76], udg_dian[77]) + 80.00 ) * ( ( ( 0.50 * I2R(GetUnitUserData(udg_danwei2[1])) ) + 4.00 ) / 80.00 ) ), AngleBetweenPoints(udg_dian[76], udg_dian[77]))
else
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], ( ( DistanceBetweenPoints(udg_dian[76], udg_dian[77]) + 80.00 ) * ( ( 4.00 - ( 0.50 * I2R(GetUnitUserData(udg_danwei2[1])) ) ) / 80.00 ) ), AngleBetweenPoints(udg_dian[76], udg_dian[77]))
endif
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[1]))
else
endif
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
endfunction
function Trig_qianxing_2Func001Func001Func006Func002A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
call RemoveUnit(udg_danwei2[1])
set udg_danwei2[1]=null
endfunction
function Trig_qianxing_2Func001Func006A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
call RemoveUnit(udg_danwei2[1])
set udg_danwei2[1]=null
endfunction
function Trig_qianxing_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( IsUnitType(udg_Danwei[159], UNIT_TYPE_DEAD) == false ) and ( ( udg_zhengshu[39] > 0 ) or ( UnitHasBuffBJ(udg_Danwei[159], 0x424F776B) == true ) ) ) then
if ( ( udg_zhengshu[39] > 0 ) ) then
if ( ( udg_zhengshu[39] == 20 ) ) then
call SetUnitAnimationByIndex(udg_Danwei[159], 13)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=7
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_Danwei[75]=CreateUnit(GetOwningPlayer(udg_Danwei[159]), 0x65303654, GetLocationX(udg_dian[76]), GetLocationY(udg_dian[76]), AngleBetweenPoints(udg_dian[76], udg_dian[77]))
call SetUnitVertexColor(udg_Danwei[75], 128, 128, 128, ( 20 * bj_forLoopAIndex ))
call SetUnitUserData(udg_Danwei[75], bj_forLoopAIndex)
call SetUnitAnimationByIndex(udg_Danwei[75], 13)
call GroupAddUnit(udg_Danweizu[160], udg_Danwei[75])
set udg_Danwei[75]=null
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
else
endif
set udg_zhengshu[39]=( udg_zhengshu[39] - 1 )
call ForGroupBJ(udg_Danweizu[160], function Trig_qianxing_2Func001Func001Func004A)
if ( ( udg_zhengshu[39] >= 10 ) ) then
call SetUnitVertexColor(udg_Danwei[159], 255, 255, 255, ( 25 * IMaxBJ(( udg_zhengshu[39] - 10 ), 0) ))
set udg_dian2[0]=GetUnitLoc(udg_Danwei[159])
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], ( ( DistanceBetweenPoints(udg_dian[76], udg_dian[77]) + 80.00 ) / 10.00 ), AngleBetweenPoints(udg_dian[76], udg_dian[77]))
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_Danwei[159], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_Danwei[159], GetLocationY(udg_dian2[1]))
else
endif
if ( ( udg_zhengshu[39] == 10 ) ) then
call SetUnitVertexColor(udg_Danwei[159], 255, 255, 255, 255)
if ( ( LoadReal(YDHT, GetHandleId(udg_Danwei[159]), 0x81044D3E) <= 30.00 ) ) then
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[159]), 0x65303130, udg_dian2[0], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304449)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_danwei[85])
set udg_Danwei[92]=null
else
endif
if ( ( GetUnitAbilityLevel(udg_Danwei[159], 0x41304A41) > 0 ) ) then
call UnitDamageTarget(udg_Danwei[159], udg_danwei[85], ( ( 0.50 + ( 0.50 * I2R(GetUnitAbilityLevel(udg_Danwei[159], 0x41304A41)) ) ) * I2R(GetHeroAgi(udg_Danwei[159], true)) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_HEAVY_SLICE)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl", udg_danwei[85], "chest"))
call CreateTextTagUnitBJ("TRIGSTR_7492", udg_danwei[85], 0, 10, 100, 0.00, 0.00, 0)
call SetTextTagPermanent(GetLastCreatedTextTag(), false)
call SetTextTagVelocity(bj_lastCreatedTextTag, 0.00, 0.05)
call SetTextTagFadepoint(GetLastCreatedTextTag(), 1.50)
call SetTextTagLifespan(GetLastCreatedTextTag(), 2.00)
else
endif
call UnitDamageTarget(udg_Danwei[159], udg_danwei[85], ( ( 50.00 + ( 1 * I2R(GetHeroAgi(udg_Danwei[159], true)) ) ) + ( 40.00 * I2R(GetUnitAbilityLevel(udg_Danwei[159], 0x414F776B)) ) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_LIGHT_SLICE)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl", udg_danwei[85], "chest"))
else
endif
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
endif
if ( ( udg_zhengshu[39] == 0 ) ) then
if ( ( udg_Shishu[73] == - 1.00 ) ) then
set udg_dian2[0]=GetUnitLoc(udg_Danwei[159])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\NightElf\\Blink\\BlinkTarget.mdl", udg_dian2[0]))
call RemoveLocation(udg_dian2[0])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\NightElf\\Blink\\BlinkCaster.mdl", udg_dian[76]))
call SetUnitX(udg_Danwei[159], GetLocationX(udg_dian[76]))
call SetUnitY(udg_Danwei[159], GetLocationY(udg_dian[76]))
set udg_Shishu[73]=0.00
set udg_zhengshuex[0]=GetUnitAbilityLevel(udg_Danwei[159], 0x41304A41)
call UnitRemoveAbility(udg_Danwei[159], 0x41304A41)
call UnitAddAbility(udg_Danwei[159], 0x41304A41)
call SetUnitAbilityLevel(udg_Danwei[159], 0x41304A41, udg_zhengshuex[0])
call SetUnitManaBJ(udg_Danwei[159], ( GetUnitState(udg_Danwei[159], UNIT_STATE_MANA) + 30.00 ))
call UnitRemoveBuffBJ(0x4253544E, udg_Danwei[159])
call UnitRemoveBuffBJ(0x42505345, udg_Danwei[159])
else
endif
call ForGroupBJ(udg_Danweizu[160], function Trig_qianxing_2Func001Func001Func006Func002A)
call RemoveLocation(udg_dian[76])
call RemoveLocation(udg_dian[77])
else
endif
else
endif
if ( ( GetUnitAbilityLevel(udg_Danwei[159], 0x4130304E) == 0 ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_Danwei[159]), 0x414F776B, false)
call UnitAddAbility(udg_Danwei[159], 0x4130304E)
set udg_zhengshuex[0]=GetUnitAbilityLevel(udg_Danwei[159], 0x414F776B)
call SetUnitAbilityLevel(udg_Danwei[159], 0x4130304E, udg_zhengshuex[0])
else
endif
else
call PauseTimer(udg_jishiqi[26])
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_Danwei[159]), 0x414F776B, true)
call UnitRemoveAbility(udg_Danwei[159], 0x4130304E)
call DisableTrigger(gg_trg_qianxing_3)
call ForGroupBJ(udg_Danweizu[160], function Trig_qianxing_2Func001Func006A)
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_qianxing_2 takes nothing returns nothing
set gg_trg_qianxing_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_qianxing_2, udg_jishiqi[26])
call TriggerAddAction(gg_trg_qianxing_2, function Trig_qianxing_2Actions)
endfunction
function Trig_qianxing_3Conditions takes nothing returns boolean
return ( ( GetUnitTypeId(GetAttacker()) == 0x4564656D ) and ( UnitHasBuffBJ(GetAttacker(), 0x424F776B) == true ) and ( IsUnitEnemy(GetAttackedUnitBJ(), GetOwningPlayer(GetAttacker())) == true ) )
endfunction
function Trig_qianxing_3Actions takes nothing returns nothing
set udg_danwei[82]=GetAttacker()
set udg_danwei[83]=GetAttackedUnitBJ()
set udg_dian2[0]=GetUnitLoc(udg_danwei[82])
set udg_dian2[1]=GetUnitLoc(udg_danwei[83])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[82]), 0x65303130, udg_dian2[1], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304449)
if ( ( GetUnitAbilityLevel(udg_danwei[82], 0x41304A41) > 0 ) and ( ( ( ( GetUnitFacing(udg_danwei[83]) - AngleBetweenPoints(udg_dian2[0], udg_dian2[1]) ) >= 330.00 ) and ( ( GetUnitFacing(udg_danwei[83]) - AngleBetweenPoints(udg_dian2[0], udg_dian2[1]) ) <= 390.00 ) ) or ( ( ( GetUnitFacing(udg_danwei[83]) - AngleBetweenPoints(udg_dian2[0], udg_dian2[1]) ) >= - 30.00 ) and ( ( GetUnitFacing(udg_danwei[83]) - AngleBetweenPoints(udg_dian2[0], udg_dian2[1]) ) <= 30.00 ) ) ) ) then
call UnitDamageTarget(udg_danwei[82], udg_danwei[83], ( ( 0.50 + ( 0.50 * I2R(GetUnitAbilityLevel(udg_danwei[82], 0x41304A41)) ) ) * I2R(GetHeroAgi(udg_danwei[82], true)) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_HEAVY_SLICE)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl", udg_danwei[83], "chest"))
call CreateTextTagUnitBJ("TRIGSTR_6522", udg_danwei[83], 0, 10, 100, 0.00, 0.00, 0)
call SetTextTagPermanent(GetLastCreatedTextTag(), false)
call SetTextTagVelocity(bj_lastCreatedTextTag, 0.00, 0.05)
call SetTextTagFadepoint(GetLastCreatedTextTag(), 1.50)
call SetTextTagLifespan(GetLastCreatedTextTag(), 2.00)
else
endif
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_danwei[83])
set udg_Danwei[92]=null
call UnitDamageTarget(udg_danwei[82], udg_danwei[83], ( ( 50.00 + ( 1.00 * I2R(GetHeroAgi(udg_danwei[82], true)) ) ) + ( 40.00 * I2R(GetUnitAbilityLevel(udg_danwei[82], 0x414F776B)) ) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_LIGHT_SLICE)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl", udg_danwei[83], "chest"))
call UnitRemoveBuffBJ(0x424F776B, udg_danwei[82])
set udg_danwei[82]=null
set udg_danwei[83]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
set udg_buer[2]=false
endfunction
function InitTrig_qianxing_3 takes nothing returns nothing
set gg_trg_qianxing_3=CreateTrigger()
call DisableTrigger(gg_trg_qianxing_3)
call TriggerRegisterAnyUnitEventBJ(gg_trg_qianxing_3, EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(gg_trg_qianxing_3, Condition(function Trig_qianxing_3Conditions))
call TriggerAddAction(gg_trg_qianxing_3, function Trig_qianxing_3Actions)
endfunction
function Trig_shunshenlianzhanActions takes nothing returns nothing
set udg_danwei[85]=GetSpellTargetUnit()
set udg_zhengshu[39]=20
set udg_dian[76]=GetUnitLoc(udg_Danwei[159])
set udg_dian[77]=GetUnitLoc(udg_danwei[85])
call SetUnitManaBJ(udg_Danwei[159], ( GetUnitState(udg_Danwei[159], UNIT_STATE_MANA) - 50.00 ))
call SaveReal(YDHT, GetHandleId(GetTriggerUnit()), 0x81044D3E, s__math_Angle(GetUnitFacing(GetSpellTargetUnit()) , YDWEAngleBetweenUnits(GetTriggerUnit() , GetSpellTargetUnit())))
call UnitRemoveBuffBJ(0x424F776B, udg_Danwei[159])
call DisableTrigger(gg_trg_qianxing_3)
endfunction
function InitTrig_shunshenlianzhan takes nothing returns nothing
set gg_trg_shunshenlianzhan=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_shunshenlianzhan , 2 , 0x4130304E)
call TriggerAddAction(gg_trg_shunshenlianzhan, function Trig_shunshenlianzhanActions)
endfunction
function Trig_shunshenlianzhan_0Actions takes nothing returns nothing
call SetUnitManaBJ(udg_Danwei[159], ( GetUnitState(udg_Danwei[159], UNIT_STATE_MANA) + 50.00 ))
endfunction
function InitTrig_shunshenlianzhan_0 takes nothing returns nothing
set gg_trg_shunshenlianzhan_0=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_shunshenlianzhan_0 , 3 , 0x4130304E)
call TriggerAddAction(gg_trg_shunshenlianzhan_0, function Trig_shunshenlianzhan_0Actions)
endfunction
function Trig_shunshenlianzhan_2Actions takes nothing returns nothing
if ( ( ( IsUnitPausedBJ(udg_danwei[84]) == false ) or ( IsUnitType(udg_danwei[84], UNIT_TYPE_DEAD) == true ) ) ) then
if ( ( udg_zhengshu[39] < 6 ) and ( IsUnitType(udg_danwei[84], UNIT_TYPE_DEAD) == false ) and ( IsUnitType(udg_danwei[85], UNIT_TYPE_DEAD) == false ) and ( udg_danwei[85] != null ) ) then
call YDWESetUnitFacingToFaceUnitTimedNull(udg_danwei[84] , udg_danwei[85] , 0.00)
set udg_zhengshu2[98]=( udg_zhengshu2[98] + 1 )
if ( ( udg_zhengshu2[98] == 5 ) ) then
set udg_zhengshu2[98]=0
set udg_zhengshu[39]=( udg_zhengshu[39] + 1 )
if ( ( udg_zhengshu[39] == 1 ) ) then
call s__baka_IssueTargetOrderById2(udg_danwei[84] , 851983 , udg_danwei[85])
else
endif
call SetUnitAnimation(udg_danwei[84], "attack")
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl", udg_danwei[85], "chest"))
call UnitDamageTarget(udg_danwei[84], udg_danwei[85], ( ( 0.10 * I2R(GetUnitAbilityLevel(udg_danwei[84], 0x4130304E)) ) * I2R(GetHeroAgi(udg_danwei[84], true)) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_HEAVY_SLICE)
if ( ( udg_zhengshu[39] == 1 ) ) then
call SetUnitTimeScale(udg_danwei[84], 3.00)
call SetUnitVertexColor(udg_danwei[84], 0, 0, 0, 255)
else
endif
set udg_dian[77]=GetUnitLoc(udg_danwei[85])
set udg_dian[76]=PolarProjectionBJ(udg_dian[77], 80.00, ( ( 60.00 * I2R(udg_zhengshu[39]) ) + ( GetUnitFacing(udg_danwei[85]) - 180.00 ) ))
call SetUnitX(udg_danwei[84], GetLocationX(udg_dian[76]))
call SetUnitY(udg_danwei[84], GetLocationY(udg_dian[76]))
call RemoveLocation(udg_dian[76])
call RemoveLocation(udg_dian[77])
else
endif
else
if ( ( udg_Shishu[73] == - 1.00 ) ) then
call SetUnitX(udg_danwei[84], GetLocationX(udg_Dian[73]))
call SetUnitY(udg_danwei[84], GetLocationY(udg_Dian[73]))
call YDWESetUnitFacingToFaceUnitTimedNull(udg_danwei[84] , udg_danwei[85] , 0.00)
set udg_Shishu[73]=0.00
set udg_zhengshuex[0]=GetUnitAbilityLevel(udg_danwei[84], 0x41304A41)
call UnitRemoveAbility(udg_danwei[84], 0x41304A41)
call UnitAddAbility(udg_danwei[84], 0x41304A41)
call SetUnitAbilityLevel(udg_danwei[84], 0x41304A41, udg_zhengshuex[0])
call SetUnitManaBJ(udg_danwei[84], ( GetUnitState(udg_danwei[84], UNIT_STATE_MANA) + 30.00 ))
call UnitRemoveBuffBJ(0x4253544E, udg_danwei[84])
call UnitRemoveBuffBJ(0x42505345, udg_danwei[84])
else
endif
call PauseTimer(udg_jishiqi[26])
call SetUnitTimeScale(udg_danwei[84], 1.00)
call SetUnitVertexColor(udg_danwei[84], 255, 255, 255, 255)
set udg_danwei[84]=null
set udg_danwei[85]=null
call RemoveLocation(udg_Dian[73])
set udg_zhengshu[39]=0
endif
else
endif
endfunction
function InitTrig_shunshenlianzhan_2 takes nothing returns nothing
set gg_trg_shunshenlianzhan_2=CreateTrigger()
call TriggerAddAction(gg_trg_shunshenlianzhan_2, function Trig_shunshenlianzhan_2Actions)
endfunction
function Trig_huibi_1Actions takes nothing returns nothing
set udg_Danwei[73]=GetTriggerUnit()
if ( ( udg_zhengshu[39] == 0 ) ) then
set udg_Shishu[73]=15.00
call StartTimerBJ(udg_Times[73], true, 0.03)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", udg_Danwei[73], "foot left"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", udg_Danwei[73], "foot right"))
set udg_dian2[0]=GetUnitLoc(udg_Danwei[73])
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=7
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_Danwei[75]=CreateUnit(GetOwningPlayer(udg_Danwei[73]), 0x65303654, GetLocationX(udg_dian2[0]), GetLocationY(udg_dian2[0]), GetUnitFacing(udg_Danwei[73]))
call SetUnitAnimation(udg_Danwei[75], "spell Throw")
call SetUnitManaBJ(udg_Danwei[75], 255.00)
call SetUnitVertexColor(udg_Danwei[75], 128, 128, 128, 0)
call GroupAddUnit(udg_Danweizu[74], udg_Danwei[75])
call GroupAddUnit(udg_Danweizu[75], udg_Danwei[75])
set udg_Danwei[75]=null
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call RemoveLocation(udg_dian2[0])
else
set udg_Shishu[73]=- 1.00
endif
set udg_Shishu[74]=0.00
endfunction
function InitTrig_huibi_1 takes nothing returns nothing
set gg_trg_huibi_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_huibi_1 , 3 , 0x41304A41)
call TriggerAddAction(gg_trg_huibi_1, function Trig_huibi_1Actions)
endfunction
function Trig_huibi_2Func001Func002Func003A takes nothing returns nothing
set udg_danwei[435]=GetEnumUnit()
if ( ( GetUnitState(udg_danwei[435], UNIT_STATE_MANA) < 200.00 ) ) then
if ( ( GetUnitState(udg_danwei[435], UNIT_STATE_MANA) > 1.00 ) ) then
call SetUnitManaBJ(udg_danwei[435], ( GetUnitState(udg_danwei[435], UNIT_STATE_MANA) - 15.00 ))
call SetUnitVertexColor(udg_danwei[435], 128, 128, 128, R2I(GetUnitState(udg_danwei[435], UNIT_STATE_MANA)))
else
call GroupRemoveUnit(udg_Danweizu[75], udg_danwei[435])
call RemoveUnit(udg_danwei[435])
endif
else
endif
set udg_danwei[435]=null
endfunction
function Trig_huibi_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( IsUnitPausedBJ(udg_Danwei[73]) == false ) ) then
if ( ( udg_Shishu[73] > 0.00 ) and ( IsUnitType(udg_Danwei[73], UNIT_TYPE_DEAD) == false ) and ( udg_zhengshu[39] == 0 ) ) then
if ( ( udg_Shishu[73] == 15.00 ) ) then
call IssueImmediateOrderById(udg_Danwei[73], 851993)
else
endif
set udg_dian2[0]=GetUnitLoc(udg_Danwei[73])
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], ( udg_Shishu[73] * ( 300.00 / 120.00 ) ), ( GetUnitFacing(udg_Danwei[73]) + 180.00 ))
if ( ( IsTerrainPathableBJ(udg_dian2[0], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_Danwei[73], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_Danwei[73], GetLocationY(udg_dian2[1]))
else
endif
if ( ( ( udg_Shishu[73] / 2.00 ) == I2R(( R2I(udg_Shishu[73]) / 2 )) ) ) then
set udg_danwei[435]=FirstOfGroup(udg_Danweizu[74])
call SetUnitManaBJ(udg_danwei[435], 150.00)
call SetUnitVertexColor(udg_danwei[435], 128, 128, 128, 150)
call SetUnitTimeScale(udg_danwei[435], 0.00)
call SetUnitX(udg_danwei[435], GetLocationX(udg_dian2[0]))
call SetUnitY(udg_danwei[435], GetLocationY(udg_dian2[0]))
call GroupRemoveUnit(udg_Danweizu[74], udg_danwei[435])
set udg_danwei[435]=null
else
endif
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
set udg_Shishu[73]=( udg_Shishu[73] - 1 )
else
call UnitRemoveBuffBJ(0x4253544E, udg_Danwei[73])
call UnitRemoveBuffBJ(0x42505345, udg_Danwei[73])
set udg_Danwei[73]=null
endif
if ( ( IsUnitGroupEmptyBJ(udg_Danweizu[75]) == false ) ) then
call ForGroupBJ(udg_Danweizu[75], function Trig_huibi_2Func001Func002Func003A)
else
call PauseTimer(udg_Times[73])
endif
else
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_huibi_2 takes nothing returns nothing
set gg_trg_huibi_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_huibi_2, udg_Times[73])
call TriggerAddAction(gg_trg_huibi_2, function Trig_huibi_2Actions)
endfunction
function Trig_huibi_3Actions takes nothing returns nothing
call SetUnitLifeBJ(udg_Danwei[74], udg_Shishu[74])
set udg_Shishu[74]=0.00
endfunction
function InitTrig_huibi_3 takes nothing returns nothing
set gg_trg_huibi_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_huibi_3, udg_Times[74])
call TriggerAddAction(gg_trg_huibi_3, function Trig_huibi_3Actions)
endfunction
function Trig_anyingbu_0Conditions takes nothing returns boolean
return ( ( GetLearnedSkill() == 0x41304F30 ) and ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true ) )
endfunction
function Trig_anyingbu_0Actions takes nothing returns nothing
if ( ( GetTriggerExecCount(GetTriggeringTrigger()) == 1 ) ) then
set udg_Danwei[159]=GetTriggerUnit()
set udg_Dian[159]=GetUnitLoc(udg_Danwei[159])
call TriggerRegisterUnitEvent(gg_trg_anyingbu_0_1, udg_Danwei[159], EVENT_UNIT_ISSUED_POINT_ORDER)
call TriggerRegisterUnitEvent(gg_trg_anyingbu_0_2, udg_Danwei[159], EVENT_UNIT_ISSUED_TARGET_ORDER)
call TriggerRegisterUnitEvent(gg_trg_anyingbu_0_3, udg_Danwei[159], EVENT_UNIT_ISSUED_ORDER)
else
endif
endfunction
function InitTrig_anyingbu_0 takes nothing returns nothing
set gg_trg_anyingbu_0=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_anyingbu_0, EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(gg_trg_anyingbu_0, Condition(function Trig_anyingbu_0Conditions))
call TriggerAddAction(gg_trg_anyingbu_0, function Trig_anyingbu_0Actions)
endfunction
function Trig_anyingbu_0_1Actions takes nothing returns nothing
call RemoveLocation(udg_Dian[159])
set udg_Dian[159]=GetOrderPointLoc()
endfunction
function InitTrig_anyingbu_0_1 takes nothing returns nothing
set gg_trg_anyingbu_0_1=CreateTrigger()
call TriggerAddAction(gg_trg_anyingbu_0_1, function Trig_anyingbu_0_1Actions)
endfunction
function Trig_anyingbu_0_2Actions takes nothing returns nothing
call RemoveLocation(udg_Dian[159])
set udg_Dian[159]=GetUnitLoc(GetOrderTargetUnit())
endfunction
function InitTrig_anyingbu_0_2 takes nothing returns nothing
set gg_trg_anyingbu_0_2=CreateTrigger()
call TriggerAddAction(gg_trg_anyingbu_0_2, function Trig_anyingbu_0_2Actions)
endfunction
function Trig_anyingbu_0_3Conditions takes nothing returns boolean
return ( ( ( GetIssuedOrderIdBJ() == String2OrderIdBJ("stop") ) or ( GetIssuedOrderIdBJ() == String2OrderIdBJ("holdposition") ) ) )
endfunction
function Trig_anyingbu_0_3Actions takes nothing returns nothing
call RemoveLocation(udg_Dian[159])
set udg_Dian[159]=GetUnitLoc(udg_Danwei[159])
endfunction
function InitTrig_anyingbu_0_3 takes nothing returns nothing
set gg_trg_anyingbu_0_3=CreateTrigger()
call TriggerAddCondition(gg_trg_anyingbu_0_3, Condition(function Trig_anyingbu_0_3Conditions))
call TriggerAddAction(gg_trg_anyingbu_0_3, function Trig_anyingbu_0_3Actions)
endfunction
function Trig_anyingbu_1Actions takes nothing returns nothing
set udg_Danwei[159]=GetTriggerUnit()
set udg_Dian[160]=GetUnitLoc(udg_Danwei[159])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Orc\\Devour\\DevourEffectArt.mdl", udg_Dian[160]))
set udg_Zhengshu[159]=17
call StartTimerBJ(udg_Times[159], false, 0.00)
call DisableTrigger(gg_trg_anyingbu_0_1)
call DisableTrigger(gg_trg_anyingbu_0_2)
call DisableTrigger(gg_trg_anyingbu_0_3)
if ( ( GetUnitAbilityLevel(udg_Danwei[159], 0x4130304E) > 0 ) and ( udg_zhengshu[39] == 0 ) ) then
set udg_zhengshuex[0]=GetUnitAbilityLevel(udg_Danwei[159], 0x414F776B)
call UnitRemoveAbility(udg_Danwei[159], 0x414F776B)
call UnitAddAbility(udg_Danwei[159], 0x414F776B)
call SetUnitAbilityLevel(udg_Danwei[159], 0x414F776B, udg_zhengshuex[0])
else
endif
endfunction
function InitTrig_anyingbu_1 takes nothing returns nothing
set gg_trg_anyingbu_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_anyingbu_1 , 3 , 0x41304F30)
call TriggerAddAction(gg_trg_anyingbu_1, function Trig_anyingbu_1Actions)
endfunction
function Trig_anyingbu_2Func001Func001Func001Func001Func001Func003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitDeadBJ(udg_danwei2[1]) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_Danwei[159])) == true ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl", udg_danwei2[1], "chest"))
call UnitDamageTarget(udg_Danwei[159], udg_danwei2[1], ( ( ( ( 20.00 * I2R(GetUnitAbilityLevel(udg_Danwei[159], 0x41304F30)) ) + ( 1.00 * I2R(GetHeroAgi(udg_Danwei[159], true)) ) ) * 1.00 ) * 1.00 ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_HEAVY_SLICE)
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_anyingbu_2Func001Func001Func001Func001Func005Func002A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitDeadBJ(udg_danwei2[1]) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_Danwei[159])) == true ) ) then
else
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[1])
endif
set udg_danwei2[1]=null
endfunction
function Trig_anyingbu_2Func001Func001Func001Func001Func005Func003Func010A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitDeadBJ(udg_danwei2[1]) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_Danwei[159])) == true ) ) then
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "slow" , udg_danwei2[1])
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\GlaiveMissile\\GlaiveMissileTarget.mdl", udg_danwei2[1], "chest"))
call UnitDamageTarget(udg_Danwei[159], udg_danwei2[1], ( ( ( ( 20.00 * I2R(GetUnitAbilityLevel(udg_Danwei[159], 0x41304F30)) ) + ( 1.00 * I2R(GetHeroAgi(udg_Danwei[159], true)) ) ) * 1.00 ) * 0.50 ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_LIGHT_SLICE)
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_anyingbu_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_Zhengshu[159] == 17 ) ) then
set udg_Zhengshu[159]=( udg_Zhengshu[159] - 1 )
set udg_Dian[89]=GetUnitLoc(udg_Danwei[159])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[159]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304B52)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_Danwei[159])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
call StartTimerBJ(udg_Times[159], true, 0.02)
call SetUnitAnimationByIndex(udg_Danwei[159], 2)
call StopSoundBJ(gg_snd_Feedback, false)
call PlaySoundAtPointBJ(gg_snd_Feedback, 100, udg_Dian[160], 0)
call StopSoundBJ(gg_snd_FlakCannon01, false)
call PlaySoundAtPointBJ(gg_snd_FlakCannon01, 100, udg_Dian[160], 0)
if ( ( DistanceBetweenPoints(udg_Dian[159], udg_Dian[160]) > 25.00 ) ) then
call SetUnitFacing(udg_Danwei[159], AngleBetweenPoints(udg_Dian[160], udg_Dian[159]))
else
endif
call UnitAddAbility(udg_Danwei[159], 0x41303735)
set udg_Danwei[160]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[159]), 0x65303830, udg_Dian[160], 270.00)
else
if ( ( IsUnitPausedBJ(udg_Danwei[159]) == false ) ) then
if ( ( udg_Zhengshu[159] > 1 ) and ( IsUnitType(udg_Danwei[159], UNIT_TYPE_DEAD) == false ) ) then
set udg_Zhengshu[159]=( udg_Zhengshu[159] - 1 )
set udg_dian2[0]=GetUnitLoc(udg_Danwei[159])
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], ( RMinBJ(DistanceBetweenPoints(udg_Dian[159], udg_Dian[160]), 450.00) / 15.00 ), AngleBetweenPoints(udg_Dian[160], udg_Dian[159]))
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_Danwei[159], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_Danwei[159], GetLocationY(udg_dian2[1]))
else
endif
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
if ( ( udg_Zhengshu[159] > 0 ) ) then
set udg_Zhengshu[159]=( udg_Zhengshu[159] - 1 )
set udg_dian2[0]=GetUnitLoc(udg_Danwei[159])
call PauseTimer(udg_Times[159])
if ( ( IsUnitType(udg_Danwei[159], UNIT_TYPE_DEAD) == false ) ) then
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(225.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_anyingbu_2Func001Func001Func001Func001Func005Func002A)
if ( ( IsUnitGroupEmptyBJ(udg_xuanqu) == false ) ) then
call DestroyGroup(udg_xuanqu)
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[159]), 0x65303130, udg_dian2[0], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41303935)
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(150.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_anyingbu_2Func001Func001Func001Func001Func005Func003Func010A)
call DestroyGroup(udg_xuanqu)
set udg_Danwei[92]=null
call SetUnitAnimation(udg_Danwei[159], "attack slam")
call StartTimerBJ(udg_Times[159], false, 0.30)
call UnitAddAbility(udg_Danwei[159], 0x41304F59)
call UnitRemoveAbility(udg_Danwei[159], 0x41304F59)
else
call SetUnitManaBJ(udg_Danwei[159], ( GetUnitState(udg_Danwei[159], UNIT_STATE_MANA) + 25.00 ))
call ResetUnitAnimation(udg_Danwei[159])
call UnitRemoveBuffBJ(0x4230324F, udg_Danwei[159])
call DestroyGroup(udg_xuanqu)
endif
else
endif
call SetUnitX(udg_Danwei[160], GetLocationX(udg_dian2[0]))
call SetUnitY(udg_Danwei[160], GetLocationY(udg_dian2[0]))
call RemoveLocation(udg_dian2[0])
call KillUnit(udg_Danwei[160])
set udg_Danwei[160]=null
call UnitRemoveAbility(udg_Danwei[159], 0x41303735)
call SetUnitVertexColor(udg_Danwei[159], 255, 255, 255, 255)
call RemoveLocation(udg_Dian[160])
call EnableTrigger(gg_trg_anyingbu_0_1)
call EnableTrigger(gg_trg_anyingbu_0_2)
call EnableTrigger(gg_trg_anyingbu_0_3)
else
if ( ( IsUnitType(udg_Danwei[159], UNIT_TYPE_DEAD) == false ) ) then
set udg_dian2[0]=GetUnitLoc(udg_Danwei[159])
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(225.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_anyingbu_2Func001Func001Func001Func001Func001Func003A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[0])
else
endif
endif
endif
else
endif
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_anyingbu_2 takes nothing returns nothing
set gg_trg_anyingbu_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_anyingbu_2, udg_Times[159])
call TriggerAddAction(gg_trg_anyingbu_2, function Trig_anyingbu_2Actions)
endfunction
function Trig_huixuanbiao_1Actions takes nothing returns nothing
set udg_danwei[86]=GetTriggerUnit()
set udg_dian[78]=GetUnitLoc(udg_danwei[86])
set udg_dian[79]=GetSpellTargetLoc()
set udg_dian[223]=PolarProjectionBJ(udg_dian[78], 80.00, AngleBetweenPoints(udg_dian[78], udg_dian[79]))
set udg_danwei[87]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[86]), 0x65303152, udg_dian[223], 0)
call GroupAddUnit(udg_DAZE[0], udg_danwei[87])
call GroupAddUnit(udg_DAZE[1], udg_danwei[87])
call GroupAddUnit(udg_DAZE[2], udg_danwei[87])
call UnitApplyTimedLife(udg_danwei[87], 0x42487765, 3.00)
call StartTimerBJ(udg_jishiqi[85], true, 0.05)
set udg_zhengshu[75]=20
call RemoveLocation(udg_dian[223])
endfunction
function InitTrig_huixuanbiao_1 takes nothing returns nothing
set gg_trg_huixuanbiao_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_huixuanbiao_1 , 3 , 0x41303256)
call TriggerAddAction(gg_trg_huixuanbiao_1, function Trig_huixuanbiao_1Actions)
endfunction
function Trig_huixuanbiao_2Func002Func011A takes nothing returns nothing
set udg_danwei[253]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[253], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei[253], udg_danweizu2[369]) == false ) and ( IsUnitAliveBJ(udg_danwei[253]) == true ) and ( IsUnitEnemy(udg_danwei[253], GetOwningPlayer(udg_danwei[86])) == true ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl", udg_danwei[253], "chest"))
call UnitDamageTarget(udg_danwei[86], udg_danwei[253], ( ( 10.00 + ( ( 10.00 * I2R(GetUnitAbilityLevel(udg_danwei[86], 0x41303256)) ) + 0.00 ) ) + 0.00 ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_MEDIUM_SLICE)
else
endif
set udg_danwei[253]=null
endfunction
function Trig_huixuanbiao_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu[75]=( udg_zhengshu[75] - 1 )
if ( ( udg_zhengshu[75] >= - 30 ) and ( IsUnitType(udg_danwei[87], UNIT_TYPE_DEAD) == false ) ) then
set udg_dian[224]=GetUnitLoc(udg_danwei[87])
if ( ( udg_zhengshu[75] >= 0 ) ) then
set udg_dian[225]=PolarProjectionBJ(udg_dian[224], ( I2R(udg_zhengshu[75]) * 5.00 ), AngleBetweenPoints(udg_dian[78], udg_dian[79]))
else
set udg_dian2[0]=GetUnitLoc(udg_danwei[86])
set udg_dian[225]=PolarProjectionBJ(udg_dian[224], RMaxBJ(( I2R(udg_zhengshu[75]) * 5.00 ), - 100.00), AngleBetweenPoints(udg_dian2[0], udg_dian[224]))
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian[224]) <= 100.00 ) ) then
call KillUnit(udg_danwei[87])
else
endif
call RemoveLocation(udg_dian2[0])
endif
call SetUnitPositionLoc(udg_danwei[87], udg_dian[225])
set udg_danweizu[57]=YDWEGetUnitsInRangeOfLocAllNull(256.00 , udg_dian[224])
call ForGroupBJ(udg_danweizu[57], function Trig_huixuanbiao_2Func002Func011A)
call DestroyGroup(udg_danweizu[57])
call RemoveLocation(udg_dian[224])
call RemoveLocation(udg_dian[225])
else
call RemoveUnit(udg_danwei[87])
set udg_danwei[86]=null
set udg_danwei[87]=null
call RemoveLocation(udg_dian[78])
call RemoveLocation(udg_dian[79])
call PauseTimer(udg_jishiqi[85])
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_huixuanbiao_2 takes nothing returns nothing
set gg_trg_huixuanbiao_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_huixuanbiao_2, udg_jishiqi[85])
call TriggerAddAction(gg_trg_huixuanbiao_2, function Trig_huixuanbiao_2Actions)
endfunction
function Trig_zhimigntijiActions takes nothing returns nothing
set udg_danwei[88]=GetTriggerUnit()
set udg_danwei[89]=GetSpellTargetUnit()
set udg_dian[80]=GetUnitLoc(udg_danwei[89])
set udg_dian[81]=GetUnitLoc(udg_danwei[88])
set udg_aXUNHUAN[70]=1
loop
exitwhen udg_aXUNHUAN[70] > 5
set udg_danwei[90]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[88]), 0x65303055, udg_dian[80], 0.00)
call UnitApplyTimedLife(udg_danwei[90], 0x42487765, ( 1.40 + ( 0.10 * I2R(udg_aXUNHUAN[70]) ) ))
call SetUnitTimeScale(udg_danwei[90], 0.30)
set udg_danwei[90]=null
set udg_aXUNHUAN[70]=udg_aXUNHUAN[70] + 1
endloop
call StartTimerBJ(udg_jishiqi[27], true, 0.05)
set udg_zhengshu2[82]=0
endfunction
function InitTrig_zhimigntiji takes nothing returns nothing
set gg_trg_zhimigntiji=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_zhimigntiji , 3 , 0x41303932)
call TriggerAddAction(gg_trg_zhimigntiji, function Trig_zhimigntijiActions)
endfunction
function Trig_zhimingtiji2Func001Func004Func002Func001Func004A takes nothing returns nothing
set udg_danwei[150]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[150], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitAliveBJ(udg_danwei[150]) == true ) and ( IsUnitEnemy(udg_danwei[150], GetOwningPlayer(udg_danwei[88])) == true ) ) then
call UnitDamageTarget(udg_danwei[88], udg_danwei[150], ( 1.00 * I2R(GetHeroAgi(udg_danwei[88], true)) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_LIGHT_SLICE)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl", udg_danwei[150], "chest"))
else
endif
set udg_danwei[150]=null
endfunction
function Trig_zhimingtiji2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( ( IsUnitPausedBJ(udg_danwei[88]) == false ) or ( IsUnitType(udg_danwei[88], UNIT_TYPE_DEAD) == true ) ) ) then
set udg_zhengshu2[82]=( udg_zhengshu2[82] + 1 )
set udg_dian2[0]=GetUnitLoc(udg_danwei[88])
set udg_dian2[1]=GetUnitLoc(udg_danwei[89])
if ( ( udg_zhengshu2[82] <= 80 ) ) then
call SetUnitFacing(udg_danwei[89], AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
if ( ( udg_zhengshu2[82] <= 15 ) ) then
if ( ( udg_zhengshu2[82] <= 10 ) ) then
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], ( 60.00 - ( I2R(udg_zhengshu2[82]) * 6.00 ) ), AngleBetweenPoints(udg_dian[80], udg_dian[81]))
if ( ( udg_zhengshu2[82] == 10 ) ) then
set udg_shishu2[82]=( DistanceBetweenPoints(udg_dian2[1], udg_dian2[2]) - 80.00 )
else
endif
else
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], ( udg_shishu2[82] / 5.00 ), AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
endif
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\NightElf\\Blink\\BlinkCaster.mdl", udg_dian2[0]))
if ( ( udg_zhengshu2[82] == 9 ) ) then
call UnitAddAbility(udg_danwei[88], 0x41303933)
else
endif
if ( ( udg_zhengshu2[82] == 15 ) ) then
call SetUnitAnimation(udg_danwei[88], "attack")
call UnitRemoveAbility(udg_danwei[88], 0x41303933)
call UnitDamageTarget(udg_danwei[88], udg_danwei[89], ( 3.50 * I2R(GetHeroAgi(udg_danwei[88], true)) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_HEAVY_SLICE)
else
endif
call SetUnitX(udg_danwei[88], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei[88], GetLocationY(udg_dian2[2]))
call RemoveLocation(udg_dian2[2])
else
if ( ( udg_zhengshu2[82] <= 20 ) ) then
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], ( 50.00 * ( I2R(udg_zhengshu2[82]) - 15.00 ) ), AngleBetweenPoints(udg_dian[81], udg_dian[80]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\Feedback\\ArcaneTowerAttack.mdl", udg_dian2[2]))
set udg_danweizu[22]=YDWEGetUnitsInRangeOfLocAllNull(150.00 , udg_dian2[2])
call ForGroupBJ(udg_danweizu[22], function Trig_zhimingtiji2Func001Func004Func002Func001Func004A)
call DestroyGroup(udg_danweizu[22])
call RemoveLocation(udg_dian2[2])
else
endif
endif
else
set udg_danwei[88]=null
set udg_danwei[89]=null
call RemoveLocation(udg_dian[80])
call RemoveLocation(udg_dian[81])
endif
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_zhimingtiji2 takes nothing returns nothing
set gg_trg_zhimingtiji2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_zhimingtiji2, udg_jishiqi[27])
call TriggerAddAction(gg_trg_zhimingtiji2, function Trig_zhimingtiji2Actions)
endfunction
function Trig_dizhenConditions takes nothing returns boolean
return ( ( ( GetSpellAbilityId() == 0x41303056 ) or ( GetSpellAbilityId() == 0x41304E32 ) ) )
endfunction
function Trig_dizhenActions takes nothing returns nothing
set udg_danwei[105]=GetTriggerUnit()
set udg_dian[97]=GetUnitLoc(udg_danwei[105])
set udg_dian[98]=GetSpellTargetLoc()
set udg_zhengshu[45]=0
set udg_danwei[106]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[105]), 0x65303130, udg_dian[97], 0)
set udg_danweizu[112]=CreateGroup()
call UnitAddAbility(udg_danwei[106], 0x4130324A)
call UnitApplyTimedLife(udg_danwei[106], 0x42487765, 0.50)
if ( ( GetSpellAbilityId() == 0x41304E32 ) ) then
call StartTimerBJ(udg_jishiqi[34], true, 0.03)
else
call StartTimerBJ(udg_jishiqi[34], true, ( 0.20 - ( 0.03 * I2R(GetUnitAbilityLevel(udg_danwei[105], 0x41303056)) ) ))
endif
endfunction
function InitTrig_dizhen takes nothing returns nothing
set gg_trg_dizhen=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_dizhen, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_dizhen, Condition(function Trig_dizhenConditions))
call TriggerAddAction(gg_trg_dizhen, function Trig_dizhenActions)
endfunction
function Trig_dizhen2Func002Func007A takes nothing returns nothing
set udg_danwei[410]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[410], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei[410], udg_danweizu2[369]) == false ) and ( IsUnitDeadBJ(udg_danwei[410]) == false ) and ( IsUnitEnemy(udg_danwei[410], GetOwningPlayer(udg_danwei[105])) == true ) and ( IsUnitInGroup(udg_danwei[410], udg_danweizu[112]) == false ) ) then
call s__baka_IssueTargetOrder2(udg_danwei[106] , "slow" , udg_danwei[410])
call UnitDamageTarget(udg_danwei[105], udg_danwei[410], ( ( ( 1.00 * I2R(GetHeroAgi(udg_danwei[105], true)) ) + ( 40.00 * I2R(IMaxBJ(GetUnitAbilityLevel(udg_danwei[105], 0x41303056), GetUnitAbilityLevel(udg_danwei[105], 0x41304E32))) ) ) + ( 1.00 * I2R(GetHeroStr(udg_danwei[105], true)) ) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_ROCK_HEAVY_BASH)
call GroupAddUnit(udg_danweizu[112], udg_danwei[410])
else
endif
set udg_danwei[410]=null
endfunction
function Trig_dizhen2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu[45]=( udg_zhengshu[45] + 1 )
if ( ( ( ( udg_zhengshu[45] <= 12 ) and ( GetUnitAbilityLevel(udg_danwei[105], 0x41304E32) > 0 ) ) or ( udg_zhengshu[45] < 9 ) ) ) then
set udg_dian[99]=PolarProjectionBJ(udg_dian[97], ( 125.00 * I2R(udg_zhengshu[45]) ), AngleBetweenPoints(udg_dian[97], udg_dian[98]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Orc\\EarthQuake\\EarthQuakeTarget.mdl", Location(GetLocationX(udg_dian[99]), GetLocationY(udg_dian[99]))))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", Location(GetLocationX(udg_dian[99]), GetLocationY(udg_dian[99]))))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\Volcano\\VolcanoDeath.mdl", Location(GetLocationX(udg_dian[99]), GetLocationY(udg_dian[99]))))
set udg_danweizu[111]=YDWEGetUnitsInRangeOfLocAllNull(200.00 , udg_dian[99])
call ForGroupBJ(udg_danweizu[111], function Trig_dizhen2Func002Func007A)
call DestroyGroup(udg_danweizu[111])
call RemoveLocation(udg_dian[99])
else
call PauseTimer(udg_jishiqi[34])
call DestroyGroup(udg_danweizu[112])
set udg_danwei[105]=null
set udg_danwei[106]=null
call RemoveLocation(udg_dian[97])
call RemoveLocation(udg_dian[98])
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_dizhen2 takes nothing returns nothing
set gg_trg_dizhen2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_dizhen2, udg_jishiqi[34])
call TriggerAddAction(gg_trg_dizhen2, function Trig_dizhen2Actions)
endfunction
function Trig_xunsuActions takes nothing returns nothing
set udg_danwei[109]=GetTriggerUnit()
set udg_danwei[110]=GetSpellTargetUnit()
set udg_dian[104]=GetUnitLoc(udg_danwei[109])
set udg_dian[105]=GetUnitLoc(udg_danwei[110])
set udg_zhengshu[48]=0
set udg_zhengshu2[116]=0
if ( ( GetUnitAbilityLevel(udg_danwei[109], 0x41776172) == 1 ) ) then
call StartTimerBJ(udg_jishiqi[36], true, 0.04)
else
call StartTimerBJ(udg_jishiqi[36], true, 0.05)
endif
endfunction
function InitTrig_xunsu takes nothing returns nothing
set gg_trg_xunsu=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_xunsu , 3 , 0x41303058)
call TriggerAddAction(gg_trg_xunsu, function Trig_xunsuActions)
endfunction
function Trig_xunsu_2Actions takes nothing returns nothing
if ( ( ( IsUnitPausedBJ(udg_danwei[109]) == false ) or ( IsUnitType(udg_danwei[109], UNIT_TYPE_DEAD) == true ) ) ) then
set udg_zhengshu2[116]=( udg_zhengshu2[116] + 1 )
if ( ( udg_zhengshu2[116] <= ( R2I(DistanceBetweenPoints(udg_dian[104], udg_dian[105])) / 70 ) ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei[109])
set udg_dian2[1]=GetUnitLoc(udg_danwei[110])
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], 70.00, AngleBetweenPoints(udg_dian[104], udg_dian[105]))
if ( ( udg_zhengshu2[116] <= ( R2I(DistanceBetweenPoints(udg_dian[104], udg_dian[105])) / 60 ) ) ) then
call SetUnitX(udg_danwei[109], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei[109], GetLocationY(udg_dian2[2]))
set udg_danwei[200]=CreateUnit(GetOwningPlayer(udg_danwei[109]), 0x65303435, GetLocationX(udg_dian2[0]), GetLocationY(udg_dian2[0]), AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
call SetUnitVertexColor(udg_danwei[200], 255, 255, 255, 100)
call SetUnitAnimation(udg_danwei[200], "walk")
call UnitApplyTimedLife(udg_danwei[200], 0x42487765, 0.25)
set udg_danwei[200]=null
else
endif
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", udg_dian2[0]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBoltImpact.mdl", udg_dian2[2]))
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
call RemoveLocation(udg_dian2[0])
else
call PauseTimer(udg_jishiqi[36])
call SetUnitAnimation(udg_danwei[109], "attack")
set udg_zhengshu[48]=GetRandomInt(1, 10)
set udg_dian2[1]=GetUnitLoc(udg_danwei[110])
if ( ( DistanceBetweenPoints(udg_dian2[1], udg_dian[105]) <= 500.00 ) ) then
set udg_danwei[113]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[109]), 0x65303130, udg_dian[105], 0)
call UnitAddAbility(udg_danwei[113], 0x41303059)
call UnitApplyTimedLife(udg_danwei[113], 0x42487765, 0.50)
set udg_danwei[111]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[109]), 0x65303059, udg_dian[105], 0)
call UnitApplyTimedLife(udg_danwei[111], 0x42487765, 1.50)
call UnitDamageTarget(udg_danwei[109], udg_danwei[110], ( ( 100.00 * I2R(GetUnitAbilityLevel(udg_danwei[109], 0x41303058)) ) + ( ( 2.00 + ( 1.00 * I2R(GetUnitAbilityLevel(udg_danwei[109], 0x41303058)) ) ) * I2R(GetHeroAgi(udg_danwei[109], true)) ) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_HEAVY_CHOP)
if ( ( GetUnitAbilityLevel(udg_danwei[109], 0x41776172) == 1 ) ) then
call SetUnitScale(udg_danwei[111], 4.00, 4.00, 4.00)
call IncUnitAbilityLevel(udg_danwei[113], 0x41303059)
else
call SetUnitScale(udg_danwei[111], 3.00, 3.00, 3.00)
endif
call s__baka_IssueTargetOrderById2(udg_danwei[113] , 852095 , udg_danwei[110])
set udg_danwei[111]=null
set udg_danwei[113]=null
else
call UnitDamageTarget(udg_danwei[109], udg_danwei[110], ( ( 50.00 * I2R(GetUnitAbilityLevel(udg_danwei[109], 0x41303058)) ) + ( ( 1.00 + ( 0.50 * I2R(GetUnitAbilityLevel(udg_danwei[109], 0x41303058)) ) ) * I2R(GetHeroAgi(udg_danwei[109], true)) ) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
set udg_danwei[113]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[109]), 0x65303130, udg_dian[105], 0)
call UnitAddAbility(udg_danwei[113], 0x41303545)
call UnitApplyTimedLife(udg_danwei[113], 0x42487765, 0.50)
call s__baka_IssueTargetOrderById2(udg_danwei[113] , 852587 , udg_danwei[110])
set udg_danwei[113]=null
endif
set udg_danwei[109]=null
set udg_danwei[110]=null
call RemoveLocation(udg_dian[104])
call RemoveLocation(udg_dian[105])
call RemoveLocation(udg_dian2[1])
endif
else
endif
endfunction
function InitTrig_xunsu_2 takes nothing returns nothing
set gg_trg_xunsu_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_xunsu_2, udg_jishiqi[36])
call TriggerAddAction(gg_trg_xunsu_2, function Trig_xunsu_2Actions)
endfunction
function Trig_jiandunConditions takes nothing returns boolean
return ( ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true ) and ( GetLearnedSkill() == 0x41776172 ) )
endfunction
function Trig_jiandunActions takes nothing returns nothing
set udg_zhengshu[46]=( udg_zhengshu[46] + 1 )
set udg_danwei[185]=GetTriggerUnit()
call UnitAddAbility(udg_danwei[185], 0x41303635)
call UnitAddAbility(udg_danwei[185], 0x41304E35)
set udg_danwei[185]=null
endfunction
function InitTrig_jiandun takes nothing returns nothing
set gg_trg_jiandun=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_jiandun, EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(gg_trg_jiandun, Condition(function Trig_jiandunConditions))
call TriggerAddAction(gg_trg_jiandun, function Trig_jiandunActions)
endfunction
function Trig_dunji_1Actions takes nothing returns nothing
set udg_danwei2[42]=GetSpellAbilityUnit()
call AddUnitAnimationProperties(udg_danwei2[42], "defend", true)
if ( ( GetUnitAbilityLevel(udg_danwei2[42], 0x41776172) == 1 ) ) then
call StartTimerBJ(udg_times[42], true, 0.02)
set udg_zhengshu2[42]=8
set udg_dian2[0]=GetUnitLoc(udg_danwei2[42])
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 150.00, GetUnitFacing(udg_danwei2[42]))
set udg_aXUNHUAN[71]=1
loop
exitwhen udg_aXUNHUAN[71] > 3
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[42]), 0x65303638, udg_dian2[1], GetUnitFacing(udg_danwei2[42]))
call SetUnitAnimation(udg_danwei2[1], "birth")
call SetUnitTimeScale(udg_danwei2[1], 4.00)
call GroupAddUnit(udg_danweizu2[42], udg_danwei2[1])
set udg_danwei2[1]=null
set udg_aXUNHUAN[71]=udg_aXUNHUAN[71] + 1
endloop
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
call StartTimerBJ(udg_times[42], true, 0.04)
set udg_zhengshu2[42]=4
endif
endfunction
function InitTrig_dunji_1 takes nothing returns nothing
set gg_trg_dunji_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_dunji_1 , 3 , 0x41303255)
call TriggerAddAction(gg_trg_dunji_1, function Trig_dunji_1Actions)
endfunction
function Trig_dunji_2Func001Func002Func003Func004A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[2]))
set udg_danwei2[0]=null
endfunction
function Trig_dunji_2Func001Func002Func006A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[42])) == true ) ) then
set udg_zhengshu2[42]=0
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[42]), 0x6530324E, udg_dian2[0], GetUnitFacing(udg_danwei2[42]))
call SetUnitAnimation(udg_danwei2[0], "birth")
call IncUnitAbilityLevel(udg_danwei2[0], 0x41303059)
call IncUnitAbilityLevel(udg_danwei2[0], 0x41303059)
call UnitApplyTimedLife(udg_danwei2[0], 0x42487765, 0.50)
call s__baka_IssueTargetOrderById2(udg_danwei2[0] , 852095 , udg_danwei2[1])
call SetUnitPositionLoc(udg_danwei2[1], udg_dian2[1])
call UnitDamageTarget(udg_danwei2[42], udg_danwei2[1], ( ( 100.00 + ( 50.00 * I2R(GetUnitAbilityLevel(udg_danwei2[42], 0x41303255)) ) ) + ( 2.00 * I2R(( GetUnitAbilityLevel(udg_danwei2[42], 0x41776172) * GetHeroStr(udg_danwei2[42], true) )) ) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", udg_dian2[1]))
call PlaySoundOnUnitBJ(gg_snd_MetalHeavyBashMetal1, 100, udg_danwei2[1])
set udg_danwei2[0]=null
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_dunji_2Func001Func002Func013Func001A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
call RemoveUnit(udg_danwei2[0])
set udg_danwei2[0]=null
endfunction
function Trig_dunji_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( ( IsUnitPausedBJ(udg_danwei2[42]) == false ) or ( IsUnitType(udg_danwei2[42], UNIT_TYPE_DEAD) == true ) ) ) then
if ( ( udg_zhengshu2[42] > 0 ) ) then
set udg_zhengshu2[42]=( udg_zhengshu2[42] - 1 )
set udg_dian2[0]=GetUnitLoc(udg_danwei2[42])
if ( ( GetUnitAbilityLevel(udg_danwei2[42], 0x41776172) == 1 ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 50.00, GetUnitFacing(udg_danwei2[42]))
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], 150.00, GetUnitFacing(udg_danwei2[42]))
call ForGroupBJ(udg_danweizu2[42], function Trig_dunji_2Func001Func002Func003Func004A)
call RemoveLocation(udg_dian2[2])
else
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 40.00, GetUnitFacing(udg_danwei2[42]))
endif
call SetUnitPositionLoc(udg_danwei2[42], udg_dian2[1])
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(175.00 , udg_dian2[1])
call ForGroupBJ(udg_xuanqu, function Trig_dunji_2Func001Func002Func006A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
call PauseTimer(udg_times[42])
call AddUnitAnimationProperties(udg_danwei2[42], "defend", false)
if ( ( GetUnitAbilityLevel(udg_danwei2[42], 0x41776172) == 1 ) ) then
call ForGroupBJ(udg_danweizu2[42], function Trig_dunji_2Func001Func002Func013Func001A)
call GroupClear(udg_danweizu2[42])
else
endif
set udg_danwei2[42]=null
endif
else
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_dunji_2 takes nothing returns nothing
set gg_trg_dunji_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_dunji_2, udg_times[42])
call TriggerAddAction(gg_trg_dunji_2, function Trig_dunji_2Actions)
endfunction
function Trig_shenpanjiasuo_1Actions takes nothing returns nothing
set udg_danwei[125]=GetTriggerUnit()
set udg_danwei[126]=GetSpellTargetUnit()
set udg_dian[110]=GetUnitLoc(udg_danwei[125])
set udg_dian[112]=GetUnitLoc(udg_danwei[126])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[125]), 0x65303130, udg_dian[112], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304C31)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "slow" , udg_danwei[126])
set udg_Danwei[92]=null
set udg_danwei2[367]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[125]), 0x65303558, udg_dian[112], 270.00)
set udg_aXUNHUAN[72]=1
loop
exitwhen udg_aXUNHUAN[72] > 3
set udg_dian2[0]=PolarProjectionBJ(udg_dian[112], 100.00, ( 120.00 * I2R(udg_aXUNHUAN[72]) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl", udg_dian2[0]))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[125]), 0x65303558, udg_dian2[0], 270.00)
call SetUnitManaBJ(udg_danwei2[1], ( 120.00 * I2R(udg_aXUNHUAN[72]) ))
call SetUnitUserData(udg_danwei2[1], 1)
call GroupAddUnit(udg_danweizu2[367], udg_danwei2[1])
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
set udg_aXUNHUAN[72]=udg_aXUNHUAN[72] + 1
endloop
set udg_aXUNHUAN[73]=1
loop
exitwhen udg_aXUNHUAN[73] > 6
set udg_dian2[0]=PolarProjectionBJ(udg_dian[112], 200.00, ( 60.00 * I2R(udg_aXUNHUAN[73]) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl", udg_dian2[0]))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[125]), 0x65303558, udg_dian2[0], 270.00)
call SetUnitManaBJ(udg_danwei2[1], ( 60.00 * I2R(udg_aXUNHUAN[73]) ))
call SetUnitUserData(udg_danwei2[1], 2)
call GroupAddUnit(udg_danweizu2[367], udg_danwei2[1])
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
set udg_aXUNHUAN[73]=udg_aXUNHUAN[73] + 1
endloop
call StartTimerBJ(udg_times[367], true, 0.03)
set udg_zhengshu2[367]=( 33 + ( 20 * R2I(I2R(GetUnitAbilityLevel(udg_danwei[125], 0x41304644))) ) )
call RemoveLocation(udg_dian[110])
call RemoveLocation(udg_dian[112])
endfunction
function InitTrig_shenpanjiasuo_1 takes nothing returns nothing
set gg_trg_shenpanjiasuo_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_shenpanjiasuo_1 , 3 , 0x41304644)
call TriggerAddAction(gg_trg_shenpanjiasuo_1, function Trig_shenpanjiasuo_1Actions)
endfunction
function Trig_shenpanjiasuo_2Func001Func001A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
call UnitRemoveAbility(udg_danwei2[1], 0x41304C30)
call UnitRemoveBuffBJ(0x42303245, udg_danwei2[1])
set udg_danwei2[1]=null
endfunction
function Trig_shenpanjiasuo_2Func001Func008A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
if ( ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) < 360.00 ) ) then
call SetUnitManaBJ(udg_danwei2[0], ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) + 360.00 ))
else
endif
if ( ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) > 720.00 ) ) then
call SetUnitManaBJ(udg_danwei2[0], ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) - 360.00 ))
else
endif
if ( ( GetUnitUserData(udg_danwei2[0]) == 1 ) ) then
call SetUnitManaBJ(udg_danwei2[0], ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) + 6.00 ))
else
call SetUnitManaBJ(udg_danwei2[0], ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) - 3.00 ))
endif
set udg_dian2[1]=PolarProjectionBJ(udg_dian[112], ( 100.00 * I2R(GetUnitUserData(udg_danwei2[0])) ), GetUnitState(udg_danwei2[0], UNIT_STATE_MANA))
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[1])
endfunction
function Trig_shenpanjiasuo_2Func001Func010A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( udg_danwei2[1] != udg_danwei[126] ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[367])) == true ) and ( IsUnitInGroup(udg_danwei2[1], udg_Danweizu[90]) == false ) ) then
call UnitAddAbility(udg_danwei2[1], 0x41304C30)
call GroupAddUnit(udg_Danweizu[90], udg_danwei2[1])
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\ProcMissile\\ProcMissile.mdl", udg_danwei2[1], "chest"))
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_shenpanjiasuo_2Func001Func012A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
call UnitDamageTarget(udg_danwei[125], udg_danwei2[1], ( ( ( ( I2R(GetHeroInt(udg_danwei[125], true)) * 0.04 ) * 0.30 ) + 2.00 ) * ( 1.00 + ( 0.10 * I2R(CountUnitsInGroup(udg_Danweizu[90])) ) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
if ( ( DistanceBetweenPoints(udg_dian[112], udg_dian2[1]) >= 300.00 ) ) then
call UnitRemoveAbility(udg_danwei2[1], 0x41304C30)
call UnitRemoveBuffBJ(0x42303245, udg_danwei2[1])
call GroupRemoveUnit(udg_Danweizu[90], udg_danwei2[1])
else
endif
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[1])
endfunction
function Trig_shenpanjiasuo_2Func001Func024A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
call KillUnit(udg_danwei2[0])
set udg_danwei2[0]=null
endfunction
function Trig_shenpanjiasuo_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( IsUnitType(udg_danwei[126], UNIT_TYPE_DEAD) == false ) and ( UnitHasBuffBJ(udg_danwei[126], 0x42303254) == true ) and ( udg_zhengshu2[367] > 0 ) ) then
set udg_zhengshu2[367]=( udg_zhengshu2[367] - 1 )
set udg_dian2[0]=GetUnitLoc(udg_danwei2[367])
set udg_dian[112]=GetUnitLoc(udg_danwei[126])
call SetUnitX(udg_danwei2[367], GetLocationX(udg_dian[112]))
call SetUnitY(udg_danwei2[367], GetLocationY(udg_dian[112]))
call ForGroupBJ(udg_danweizu2[367], function Trig_shenpanjiasuo_2Func001Func008A)
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(300.00 , udg_dian[112])
call ForGroupBJ(udg_xuanqu, function Trig_shenpanjiasuo_2Func001Func010A)
call UnitDamageTarget(udg_danwei[125], udg_danwei[126], ( ( ( ( I2R(GetHeroInt(udg_danwei[125], true)) * 0.04 ) * 0.30 ) + 2.00 ) * ( 1.00 + ( 0.10 * I2R(CountUnitsInGroup(udg_Danweizu[90])) ) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call ForGroupBJ(udg_Danweizu[90], function Trig_shenpanjiasuo_2Func001Func012A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian[112])
else
call ForGroupBJ(udg_Danweizu[90], function Trig_shenpanjiasuo_2Func001Func001A)
call GroupClear(udg_Danweizu[90])
call UnitRemoveBuffBJ(0x42303254, udg_danwei[126])
call UnitRemoveBuffBJ(0x42637963, udg_danwei[126])
call UnitRemoveBuffBJ(0x42637932, udg_danwei[126])
call PauseTimer(udg_times[367])
set udg_danwei[125]=null
set udg_danwei[126]=null
call KillUnit(udg_danwei2[367])
set udg_danwei2[367]=null
call ForGroupBJ(udg_danweizu2[367], function Trig_shenpanjiasuo_2Func001Func024A)
call GroupClear(udg_danweizu2[367])
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_shenpanjiasuo_2 takes nothing returns nothing
set gg_trg_shenpanjiasuo_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_shenpanjiasuo_2, udg_times[367])
call TriggerAddAction(gg_trg_shenpanjiasuo_2, function Trig_shenpanjiasuo_2Actions)
endfunction
function Trig_shenshengzhicaiFunc006A takes nothing returns nothing
set udg_danwei[154]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[154], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei[154], udg_danweizu2[369]) == false ) and ( IsUnitAliveBJ(udg_danwei[154]) == true ) and ( IsUnitEnemy(udg_danwei[154], GetOwningPlayer(udg_danwei[128])) == true ) ) then
call UnitDamageTarget(udg_danwei[128], udg_danwei[154], ( ( I2R(GetHeroInt(udg_danwei[128], true)) * 1.00 ) + ( 55.00 * I2R(GetUnitAbilityLevel(udg_danwei[128], 0x4155666E)) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
set udg_dian[114]=GetUnitLoc(udg_danwei[154])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\Resurrect\\ResurrectTarget.mdl", udg_dian[114]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl", udg_dian[114]))
else
if ( ( IsUnitType(udg_danwei[154], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei[154], udg_danweizu2[369]) == false ) and ( IsUnitAliveBJ(udg_danwei[154]) == true ) and ( IsUnitEnemy(udg_danwei[154], GetOwningPlayer(udg_danwei[128])) == false ) ) then
call SetUnitLifeBJ(udg_danwei[154], ( GetUnitState(udg_danwei[154], UNIT_STATE_LIFE) + ( ( I2R(GetHeroInt(udg_danwei[128], true)) * 1 ) + ( 55.00 * I2R(GetUnitAbilityLevel(udg_danwei[128], 0x4155666E)) ) ) ))
set udg_dian[114]=GetUnitLoc(udg_danwei[154])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\Resurrect\\ResurrectTarget.mdl", udg_dian[114]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl", udg_dian[114]))
else
endif
endif
set udg_danwei[154]=null
call RemoveLocation(udg_dian[114])
endfunction
function Trig_shenshengzhicaiActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei[128]=GetTriggerUnit()
set udg_danwei2[1]=GetSpellTargetUnit()
set udg_dian[113]=GetUnitLoc(udg_danwei2[1])
set udg_danweizu[28]=YDWEGetUnitsInRangeOfLocAllNull(400.00 , udg_dian[113])
call ForGroupBJ(udg_danweizu[28], function Trig_shenshengzhicaiFunc006A)
set udg_danwei[128]=null
set udg_danwei2[1]=null
call RemoveLocation(udg_dian[113])
call DestroyGroup(udg_danweizu[128])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_shenshengzhicai takes nothing returns nothing
set gg_trg_shenshengzhicai=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_shenshengzhicai , 3 , 0x4155666E)
call TriggerAddAction(gg_trg_shenshengzhicai, function Trig_shenshengzhicaiActions)
endfunction
function Trig_huangjinxuanfengActions takes nothing returns nothing
set udg_danwei[130]=GetTriggerUnit()
set udg_dian[115]=GetSpellTargetLoc()
set udg_dian[116]=GetUnitLoc(udg_danwei[130])
set udg_danwei[131]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[130]), 0x65303050, udg_dian[115], AngleBetweenPoints(udg_dian[116], udg_dian[115]))
call UnitApplyTimedLife(udg_danwei[131], 0x42487765, ( 2.20 + ( 0.60 * I2R(GetUnitAbilityLevel(udg_danwei[130], 0x41303131)) ) ))
set udg_zhengshu[51]=( 73 + ( GetUnitAbilityLevel(udg_danwei[130], 0x41303131) * 20 ) )
call EnableTrigger(gg_trg_huangjinxuanfeng2)
endfunction
function InitTrig_huangjinxuanfeng takes nothing returns nothing
set gg_trg_huangjinxuanfeng=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_huangjinxuanfeng , 3 , 0x41303131)
call TriggerAddAction(gg_trg_huangjinxuanfeng, function Trig_huangjinxuanfengActions)
endfunction
function Trig_huangjinxuanfeng2Func001Func006A takes nothing returns nothing
set udg_danwei[155]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[155], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei[155], udg_danweizu2[369]) == false ) and ( IsUnitAliveBJ(udg_danwei[155]) == true ) and ( IsUnitEnemy(udg_danwei[155], GetOwningPlayer(udg_danwei[130])) == true ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei[155])
set udg_dian2[1]=PolarProjectionBJ(udg_dian[117], ( ( DistanceBetweenPoints(udg_dian[117], udg_dian2[0]) * 0.97 ) - 2.00 ), ( AngleBetweenPoints(udg_dian[117], udg_dian2[0]) + ( 1500.00 / DistanceBetweenPoints(udg_dian[117], udg_dian2[0]) ) ))
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei[155], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei[155], GetLocationY(udg_dian2[1]))
else
endif
call UnitDamageTarget(udg_danwei[130], udg_danwei[155], ( ( 0.03 * I2R(GetHeroInt(udg_danwei[130], true)) ) + 3.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
endif
set udg_danwei[155]=null
endfunction
function Trig_huangjinxuanfeng2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_zhengshu[51] >= 0 ) ) then
set udg_zhengshu[51]=( udg_zhengshu[51] - 1 )
set udg_dian[117]=GetUnitLoc(udg_danwei[131])
set udg_dian2[2]=PolarProjectionBJ(udg_dian[117], 6.00, AngleBetweenPoints(udg_dian[116], udg_dian[115]))
if ( ( IsTerrainPathableBJ(udg_dian2[2], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_danwei[131], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei[131], GetLocationY(udg_dian2[2]))
else
endif
set udg_danweizu[29]=YDWEGetUnitsInRangeOfLocAllNull(300.00 , udg_dian[117])
call ForGroupBJ(udg_danweizu[29], function Trig_huangjinxuanfeng2Func001Func006A)
call DestroyGroup(udg_danweizu[29])
call RemoveLocation(udg_dian[117])
call RemoveLocation(udg_dian2[2])
else
call DisableTrigger(GetTriggeringTrigger())
set udg_danwei[130]=null
set udg_danwei[131]=null
call RemoveLocation(udg_dian[115])
call RemoveLocation(udg_dian[116])
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_huangjinxuanfeng2 takes nothing returns nothing
set gg_trg_huangjinxuanfeng2=CreateTrigger()
call DisableTrigger(gg_trg_huangjinxuanfeng2)
call TriggerRegisterTimerExpireEvent(gg_trg_huangjinxuanfeng2, udg_Times[3])
call TriggerAddAction(gg_trg_huangjinxuanfeng2, function Trig_huangjinxuanfeng2Actions)
endfunction
function Trig_aersaisideyizhiActions takes nothing returns nothing
set udg_danwei[133]=GetTriggerUnit()
set udg_dian[120]=GetSpellTargetLoc()
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\Andt\\Andt.mdl", udg_dian[120]))
call StartTimerBJ(udg_times[45], false, 1.00)
set udg_aXUNHUAN[74]=1
loop
exitwhen udg_aXUNHUAN[74] > 5
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[133]), 0x65303259, udg_dian[120], 270.00)
call SetUnitTimeScale(udg_danwei2[1], ( 0.70 + ( 0.10 * I2R(udg_aXUNHUAN[74]) ) ))
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 2.00)
set udg_danwei2[1]=null
set udg_aXUNHUAN[74]=udg_aXUNHUAN[74] + 1
endloop
endfunction
function InitTrig_aersaisideyizhi takes nothing returns nothing
set gg_trg_aersaisideyizhi=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_aersaisideyizhi , 3 , 0x4130374B)
call TriggerAddAction(gg_trg_aersaisideyizhi, function Trig_aersaisideyizhiActions)
endfunction
function Trig_aersaisideyizhi2Func005002003 takes nothing returns boolean
return ( ( ( ( IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitAliveBJ(GetFilterUnit()) == true ) ) and ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(udg_danwei[133])) == true ) ) )
endfunction
function Trig_aersaisideyizhi2Func006A takes nothing returns nothing
set udg_danwei[162]=GetEnumUnit()
if ( ( IsUnitInGroup(udg_danwei[162], udg_danweizu2[369]) == false ) ) then
set udg_dian2[0]=GetUnitLoc(GetEnumUnit())
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\Andt\\Andt.mdl", udg_dian2[0]))
call RemoveLocation(udg_dian2[0])
call UnitDamageTarget(udg_danwei[133], udg_danwei[162], ( I2R(GetHeroInt(udg_danwei[133], true)) * 4.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call s__baka_IssueTargetOrder2(udg_danwei[160] , "soulburn" , udg_danwei[162])
else
endif
set udg_danwei[162]=null
endfunction
function Trig_aersaisideyizhi2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei[160]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[133]), 0x65303130, udg_dian[120], 0)
call UnitApplyTimedLife(udg_danwei[160], 0x42487765, 4.00)
call UnitAddAbility(udg_danwei[160], 0x414E736F)
call PlaySoundOnUnitBJ(gg_snd_Tomes, 100, udg_danwei[133])
set udg_danweizu[32]=YDWEGetUnitsInRangeOfLocMatchingNull(300.00 , udg_dian[120] , Condition(function Trig_aersaisideyizhi2Func005002003))
call ForGroupBJ(udg_danweizu[32], function Trig_aersaisideyizhi2Func006A)
call DestroyGroup(udg_danweizu[32])
set udg_aXUNHUAN[75]=1
loop
exitwhen udg_aXUNHUAN[75] > 10
set udg_dian2[0]=PolarProjectionBJ(udg_dian[120], 275.00, ( 36.00 * I2R(udg_aXUNHUAN[75]) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\Levelup\\LevelupCaster.mdl", udg_dian2[0]))
call RemoveLocation(udg_dian2[0])
set udg_aXUNHUAN[75]=udg_aXUNHUAN[75] + 1
endloop
set udg_aXUNHUAN[76]=1
loop
exitwhen udg_aXUNHUAN[76] > 3
set udg_aXUNHUAN[77]=1
loop
exitwhen udg_aXUNHUAN[77] > 3
set udg_dian2[0]=PolarProjectionBJ(udg_dian[120], 400.00, ( ( 40.00 * I2R(udg_aXUNHUAN[76]) ) + ( 120.00 * I2R(udg_aXUNHUAN[77]) ) ))
set udg_danwei[161]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[133]), 0x65303133, udg_dian2[udg_aXUNHUAN[77]], ( 120.00 * I2R(udg_aXUNHUAN[77]) ))
call UnitApplyTimedLife(udg_danwei[161], 0x42487765, 3.00)
call s__maphack_SetHeight(udg_danwei[161] , 150.00 , 0.00)
set udg_danwei[161]=null
call RemoveLocation(udg_dian2[0])
set udg_aXUNHUAN[77]=udg_aXUNHUAN[77] + 1
endloop
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
call RemoveLocation(udg_dian2[3])
set udg_aXUNHUAN[76]=udg_aXUNHUAN[76] + 1
endloop
call EnableTrigger(gg_trg_aersaisideyizhi3)
set udg_zhengshu2[45]=0
set udg_danwei[133]=null
set udg_danwei[160]=null
call RemoveLocation(udg_dian[120])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_aersaisideyizhi2 takes nothing returns nothing
set gg_trg_aersaisideyizhi2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_aersaisideyizhi2, udg_times[45])
call TriggerAddAction(gg_trg_aersaisideyizhi2, function Trig_aersaisideyizhi2Actions)
endfunction
function Trig_aersaisideyizhi3Actions takes nothing returns nothing
set udg_zhengshu2[45]=( udg_zhengshu2[45] + 1 )
if ( ( udg_zhengshu2[45] <= 30 ) ) then
if ( ( udg_zhengshu2[45] >= 25 ) ) then
else
endif
else
call DisableTrigger(GetTriggeringTrigger())
endif
endfunction
function InitTrig_aersaisideyizhi3 takes nothing returns nothing
set gg_trg_aersaisideyizhi3=CreateTrigger()
call DisableTrigger(gg_trg_aersaisideyizhi3)
call TriggerRegisterTimerEventPeriodic(gg_trg_aersaisideyizhi3, 0.10)
call TriggerAddAction(gg_trg_aersaisideyizhi3, function Trig_aersaisideyizhi3Actions)
endfunction
function Trig_siwangchanraoActions takes nothing returns nothing
set udg_danwei[97]=GetTriggerUnit()
set udg_danwei[98]=GetSpellTargetUnit()
set udg_dian[92]=GetUnitLoc(udg_danwei[97])
set udg_dian[93]=GetUnitLoc(udg_danwei[98])
set udg_danwei2[366]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[97]), 0x65303354, udg_dian[92], AngleBetweenPoints(udg_dian[92], udg_dian[93]))
call GroupAddUnit(udg_DAZE[0], udg_danwei2[366])
call SetUnitScale(udg_danwei2[366], 1, 1, 1)
call StartTimerBJ(udg_jishiqi[31], true, 0.03)
call RemoveLocation(udg_dian[92])
call RemoveLocation(udg_dian[93])
endfunction
function InitTrig_siwangchanrao takes nothing returns nothing
set gg_trg_siwangchanrao=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_siwangchanrao , 3 , 0x41304643)
call TriggerAddAction(gg_trg_siwangchanrao, function Trig_siwangchanraoActions)
endfunction
function Trig_siwangchanrao2Func003Func001Func001A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], ( 4.50 + ( 1.50 * I2R(GetUnitAbilityLevel(udg_danwei[97], 0x41304643)) ) ), AngleBetweenPoints(udg_dian2[0], udg_dian[92]))
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
else
endif
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
endfunction
function Trig_siwangchanrao2Func003Func001Func006A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian[92]) >= 80.00 ) ) then
if ( ( GetUnitUserData(udg_danwei2[0]) > 0 ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], RAbsBJ(I2R(GetUnitUserData(udg_danwei2[0]))), AngleBetweenPoints(udg_dian2[0], udg_dian[92]))
else
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], RAbsBJ(I2R(GetUnitUserData(udg_danwei2[0]))), GetUnitFacing(udg_danwei2[0]))
endif
call SetUnitUserData(udg_danwei2[0], IMinBJ(( GetUnitUserData(udg_danwei2[0]) + 1 ), 60))
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
call RemoveLocation(udg_dian2[1])
else
call SetUnitLifeBJ(udg_danwei[97], ( GetUnitState(udg_danwei[97], UNIT_STATE_LIFE) + GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE) ))
call GroupRemoveUnit(udg_danweizu2[366], udg_danwei2[0])
call KillUnit(udg_danwei2[0])
endif
call RemoveLocation(udg_dian2[0])
set udg_danwei2[0]=null
endfunction
function Trig_siwangchanrao2Func003Func005Func003Func007A takes nothing returns nothing
set udg_danwei[152]=GetEnumUnit()
set udg_dian[94]=GetUnitLoc(udg_danwei[152])
if ( ( IsUnitType(udg_danwei[152], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei[152], udg_danweizu2[369]) == false ) and ( IsUnitAliveBJ(udg_danwei[152]) == true ) and ( IsUnitEnemy(udg_danwei[152], GetOwningPlayer(udg_danwei[97])) == true ) ) then
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[97]), 0x65303557, udg_dian[94], AngleBetweenPoints(udg_dian[93], udg_dian[94]))
call SetUnitScale(udg_danwei2[1], ( 0.25 + ( RMinBJ(( GetUnitState(udg_danwei[152], UNIT_STATE_LIFE) * 0.10 ), 600.00) / 600.00 ) ), ( 0.25 + ( RMinBJ(( GetUnitState(udg_danwei[152], UNIT_STATE_LIFE) * 0.10 ), 600.00) / 600.00 ) ), ( 0.25 + ( RMinBJ(( GetUnitState(udg_danwei[152], UNIT_STATE_LIFE) * 0.10 ), 600.00) / 600.00 ) ))
call SetUnitLifeBJ(udg_danwei2[1], RMinBJ(( GetUnitState(udg_danwei[152], UNIT_STATE_LIFE) * 0.10 ), 300.00))
call SetUnitUserData(udg_danwei2[1], - 20)
call GroupAddUnit(udg_danweizu2[366], udg_danwei2[1])
set udg_danwei2[1]=null
call SetUnitLifeBJ(udg_danwei[152], ( GetUnitState(udg_danwei[152], UNIT_STATE_LIFE) - RMinBJ(( GetUnitState(udg_danwei[152], UNIT_STATE_LIFE) * 0.10 ), 300.00) ))
if ( ( IsUnitType(udg_danwei[152], UNIT_TYPE_HERO) == true ) ) then
call UnitDamageTarget(udg_danwei[97], udg_danwei[152], ( ( 50.00 + ( 30.00 * I2R(GetUnitAbilityLevel(udg_danwei[97], 0x41304643)) ) ) * ( 1.00 + ( 0.01 * ( 100.00 - GetUnitLifePercent(udg_danwei[152]) ) ) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
call UnitDamageTarget(udg_danwei[97], udg_danwei[152], ( ( 50.00 + ( 30.00 * I2R(GetUnitAbilityLevel(udg_danwei[97], 0x41304643)) ) ) * ( 1.00 + ( 0.01 * ( 100.00 - RMinBJ(GetUnitLifePercent(udg_danwei[152]), 50.00) ) ) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
endif
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Undead\\DeathCoil\\DeathCoilSpecialArt.mdl", udg_dian[94]))
else
call GroupRemoveUnit(udg_danweizu[25], udg_danwei[152])
endif
set udg_danwei[152]=null
call RemoveLocation(udg_dian[94])
endfunction
function Trig_siwangchanrao2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_dian[92]=GetUnitLoc(udg_danwei[97])
set udg_dian[93]=GetUnitLoc(udg_danwei[98])
if ( ( udg_danwei2[366] != null ) ) then
if ( ( udg_danwei2[366] != null ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[366])
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian[93]) >= 50.00 ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 36.00, AngleBetweenPoints(udg_dian2[0], udg_dian[93]))
call SetUnitX(udg_danwei2[366], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[366], GetLocationY(udg_dian2[1]))
call RemoveLocation(udg_dian2[1])
else
set udg_danweizu[25]=YDWEGetUnitsInRangeOfLocAllNull(300.00 , udg_dian[93])
call ForGroupBJ(udg_danweizu[25], function Trig_siwangchanrao2Func003Func005Func003Func007A)
call KillUnit(udg_danwei2[366])
set udg_danwei2[366]=null
call RemoveLocation(udg_dian2[0])
endif
else
endif
else
if ( ( IsUnitGroupEmptyBJ(udg_danweizu2[366]) == false ) ) then
call ForGroupBJ(udg_danweizu[25], function Trig_siwangchanrao2Func003Func001Func001A)
call ForGroupBJ(udg_danweizu2[366], function Trig_siwangchanrao2Func003Func001Func006A)
else
call DestroyGroup(udg_danweizu[25])
call PauseTimer(udg_jishiqi[31])
set udg_danwei[97]=null
set udg_danwei[98]=null
endif
call RemoveLocation(udg_dian[92])
call RemoveLocation(udg_dian[93])
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_siwangchanrao2 takes nothing returns nothing
set gg_trg_siwangchanrao2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_siwangchanrao2, udg_jishiqi[31])
call TriggerAddAction(gg_trg_siwangchanrao2, function Trig_siwangchanrao2Actions)
endfunction
function Trig_xiaowangyijiActions takes nothing returns nothing
set udg_danwei[95]=GetTriggerUnit()
set udg_danwei[96]=GetSpellTargetUnit()
call StartTimerBJ(udg_jishiqi[39], true, 0.03)
call PlaySoundOnUnitBJ(gg_snd_ShimmeringPortalDeath, 100, udg_danwei[95])
call s__Unit_PauseUnitMU(udg_danwei[95] , true , "灵魂抽离")
call UnitDamageTarget(udg_danwei[95], udg_danwei[96], RMinBJ(( ( GetUnitState(udg_danwei[96], UNIT_STATE_LIFE) * 0.15 ) + ( - 25.00 + ( 50.00 * I2R(GetUnitAbilityLevel(udg_danwei[95], 0x4130374D)) ) ) ), 3000.00), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
set udg_dian[87]=GetUnitLoc(udg_danwei[95])
set udg_dian[88]=GetUnitLoc(udg_danwei[96])
set udg_danwei[104]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[95]), 0x6530364C, udg_dian[88], AngleBetweenPoints(udg_dian[88], udg_dian[87]))
call SetUnitLifeBJ(udg_danwei[104], ( ( ( GetUnitState(udg_danwei[96], UNIT_STATE_LIFE) * 0.15 ) - 25.00 ) + ( 50.00 * I2R(GetUnitAbilityLevel(udg_danwei[95], 0x4130374D)) ) ))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\OrbOfDeath\\AnnihilationMissile.mdl", udg_danwei[96], "chest"))
set udg_zhengshu2[79]=0
endfunction
function InitTrig_xiaowangyiji takes nothing returns nothing
set gg_trg_xiaowangyiji=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_xiaowangyiji , 3 , 0x4130374D)
call TriggerAddAction(gg_trg_xiaowangyiji, function Trig_xiaowangyijiActions)
endfunction
function Trig_xiaowangyiji1Func001Func010A takes nothing returns nothing
set udg_danwei[152]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[152], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei[152], udg_danweizu2[369]) == false ) and ( IsUnitAliveBJ(udg_danwei[152]) == true ) and ( IsUnitEnemy(udg_danwei[152], GetOwningPlayer(udg_danwei[95])) == true ) ) then
call UnitDamageTarget(udg_danwei[95], udg_danwei[152], GetUnitState(udg_danwei[104], UNIT_STATE_LIFE), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\OrbOfDeath\\AnnihilationMissile.mdl", udg_danwei[152], "chest"))
else
endif
set udg_danwei[152]=null
endfunction
function Trig_xiaowangyiji1Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_zhengshu2[79] <= 20 ) ) then
set udg_zhengshu2[79]=( udg_zhengshu2[79] + 1 )
set udg_dian2[0]=PolarProjectionBJ(udg_dian[88], ( DistanceBetweenPoints(udg_dian[87], udg_dian[88]) * ( I2R(udg_zhengshu2[79]) / 20.00 ) ), AngleBetweenPoints(udg_dian[88], udg_dian[87]))
call SetUnitX(udg_danwei[104], GetLocationX(udg_dian2[0]))
call SetUnitY(udg_danwei[104], GetLocationY(udg_dian2[0]))
call RemoveLocation(udg_dian2[0])
else
call PauseTimer(udg_jishiqi[39])
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\OrbOfDeath\\OrbOfDeathMissile.mdl", udg_danwei[95], "weapon"))
set udg_mkszs[10]=R2I(( GetUnitState(udg_danwei[104], UNIT_STATE_LIFE) * 0.20 ))
call SetHeroStr(udg_danwei[95], ( GetHeroStr(udg_danwei[95], false) + udg_mkszs[10] ), true)
call UnitAddAbility(udg_danwei[95], 0x41304547)
set udg_dian2[0]=PolarProjectionBJ(udg_dian[87], 100.00, AngleBetweenPoints(udg_dian[87], udg_dian[88]))
call SetUnitX(udg_danwei[96], GetLocationX(udg_dian2[0]))
call SetUnitY(udg_danwei[96], GetLocationY(udg_dian2[0]))
set udg_danweizu[25]=YDWEGetUnitsInRangeOfLocAllNull(300.00 , udg_dian2[0])
call ForGroupBJ(udg_danweizu[25], function Trig_xiaowangyiji1Func001Func010A)
call DestroyGroup(udg_danweizu[25])
call RemoveUnit(udg_danwei[104])
set udg_danwei[104]=null
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[95]), 0x65303057, udg_dian2[0], AngleBetweenPoints(udg_dian[87], udg_dian[88]))
call s__baka_IssueTargetOrderById2(udg_danwei2[0] , 852075 , udg_danwei[96])
call UnitApplyTimedLife(udg_danwei2[0], 0x42487765, 0.50)
call s__Unit_PauseUnitMU(udg_danwei[95] , false , "灵魂抽离")
call SetUnitAnimation(udg_danwei2[0], "birth")
call SetUnitAnimation(udg_danwei[95], "attack")
call StartTimerBJ(udg_jishiqi[30], true, 0.03)
set udg_zhengshu2[79]=0
call RemoveLocation(udg_dian2[0])
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_xiaowangyiji1 takes nothing returns nothing
set gg_trg_xiaowangyiji1=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_xiaowangyiji1, udg_jishiqi[39])
call TriggerAddAction(gg_trg_xiaowangyiji1, function Trig_xiaowangyiji1Actions)
endfunction
function Trig_xiaowangyiji2Actions takes nothing returns nothing
set udg_zhengshu2[79]=( udg_zhengshu2[79] + 1 )
if ( ( udg_zhengshu2[79] <= 15 ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian[87], ( 50.00 + ( 5.00 * I2R(udg_zhengshu2[79]) ) ), AngleBetweenPoints(udg_dian[87], udg_dian[88]))
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], 25.00, GetRandomReal(0, 360.00))
call SetUnitX(udg_danwei[96], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei[96], GetLocationY(udg_dian2[2]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Undead\\OrbOfDeath\\AnnihilationMissile.mdl", udg_dian2[1]))
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
if ( ( udg_zhengshu2[79] == 15 ) ) then
call RemoveLocation(udg_dian[87])
call RemoveLocation(udg_dian[88])
set udg_dian[87]=GetUnitLoc(udg_danwei[96])
else
endif
else
if ( ( UnitHasBuffBJ(udg_danwei[96], 0x42303133) == true ) ) then
set udg_dian[88]=GetUnitLoc(udg_danwei[96])
if ( ( IsUnitPausedBJ(udg_danwei[96]) == false ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian[87], RMinBJ(( DistanceBetweenPoints(udg_dian[87], udg_dian[88]) * 0.50 ), DistanceBetweenPoints(udg_dian[87], udg_dian[88])), AngleBetweenPoints(udg_dian[87], udg_dian[88]))
call SetUnitX(udg_danwei[96], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei[96], GetLocationY(udg_dian2[1]))
call RemoveLocation(udg_dian2[1])
else
endif
call RemoveLocation(udg_dian[87])
call RemoveLocation(udg_dian[88])
set udg_dian[87]=GetUnitLoc(udg_danwei[96])
else
call SetHeroStr(udg_danwei[95], ( GetHeroStr(udg_danwei[95], false) - udg_mkszs[10] ), true)
call UnitRemoveAbility(udg_danwei[95], 0x41304547)
call RemoveLocation(udg_dian[87])
set udg_danwei[95]=null
set udg_danwei[96]=null
call PauseTimer(udg_jishiqi[30])
endif
endif
endfunction
function InitTrig_xiaowangyiji2 takes nothing returns nothing
set gg_trg_xiaowangyiji2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_xiaowangyiji2, udg_jishiqi[30])
call TriggerAddAction(gg_trg_xiaowangyiji2, function Trig_xiaowangyiji2Actions)
endfunction
function Trig_heihuagognjiActions takes nothing returns nothing
set udg_danwei[99]=GetTriggerUnit()
set udg_dian[94]=GetUnitLoc(udg_danwei[99])
call SetUnitVertexColor(udg_danwei[99], 0, 0, 0, 255)
call SetUnitTimeScale(udg_danwei[99], 5.00)
call StartTimerBJ(udg_jishiqi[32], true, 0.20)
set udg_zhengshu[40]=0
call EnableTrigger(gg_trg_heihuagongji2)
call StartTimerBJ(udg_jishiqi[152], false, 0.00)
call UnitAddAbility(udg_danwei[99], 0x41305044)
endfunction
function InitTrig_heihuagognji takes nothing returns nothing
set gg_trg_heihuagognji=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_heihuagognji , 3 , 0x41303054)
call TriggerAddAction(gg_trg_heihuagognji, function Trig_heihuagognjiActions)
endfunction
function Trig_heihuagongji2Func001Func009A takes nothing returns nothing
set udg_danwei[153]=GetEnumUnit()
if ( ( IsUnitAliveBJ(udg_danwei[153]) == true ) and ( IsUnitInGroup(udg_danwei[153], udg_danweizu2[369]) == false ) and ( IsUnitEnemy(udg_danwei[153], GetOwningPlayer(udg_danwei[99])) == true ) ) then
call UnitDamageTarget(udg_danwei[99], udg_danwei[153], ( 0.20 * ( ( I2R(GetHeroStr(udg_danwei[99], true)) * 2.50 ) + ( 40.00 * I2R(GetUnitAbilityLevel(udg_danwei[99], 0x41303054)) ) ) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_HEAVY_CHOP)
else
endif
set udg_danwei[153]=null
endfunction
function Trig_heihuagongji2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( IsUnitPausedBJ(udg_danwei[99]) == false ) ) then
call SetUnitVertexColor(udg_danwei[99], 0, 0, 0, 255)
call SetUnitTimeScale(udg_danwei[99], 5.00)
set udg_zhengshu[40]=( udg_zhengshu[40] + 1 )
call SetUnitAnimation(udg_danwei[99], "Attack - 2")
call SetUnitAnimation(udg_danwei[99], "Attack - 1")
call AddSpecialEffectLocBJ(udg_dian[94], "war3mapImported\\lightningboom.mdx")
call DestroyEffect(GetLastCreatedEffectBJ())
set udg_danweizu[26]=YDWEGetUnitsInRangeOfLocAllNull(256.00 , udg_dian[94])
call ForGroupBJ(udg_danweizu[26], function Trig_heihuagongji2Func001Func009A)
call DestroyGroup(udg_danweizu[26])
if ( ( ( udg_zhengshu[40] == 5 ) or ( IsUnitType(udg_danwei[99], UNIT_TYPE_DEAD) == true ) ) ) then
call UnitRemoveAbility(udg_danwei[99], 0x41305044)
call SetUnitVertexColor(udg_danwei[99], 255, 255, 255, 255)
call SetUnitTimeScale(udg_danwei[99], 1.00)
set udg_danwei[99]=null
call RemoveLocation(udg_dian[94])
call DisableTrigger(GetTriggeringTrigger())
else
endif
else
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_heihuagongji2 takes nothing returns nothing
set gg_trg_heihuagongji2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_heihuagongji2, udg_jishiqi[32])
call TriggerAddAction(gg_trg_heihuagongji2, function Trig_heihuagongji2Actions)
endfunction
function Trig_heihuagongji3Actions takes nothing returns nothing
set udg_Dian[89]=GetUnitLoc(udg_danwei[99])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[99]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304B52)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_danwei[99])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
endfunction
function InitTrig_heihuagongji3 takes nothing returns nothing
set gg_trg_heihuagongji3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_heihuagongji3, udg_jishiqi[152])
call TriggerAddAction(gg_trg_heihuagongji3, function Trig_heihuagongji3Actions)
endfunction
function Trig_heianyishiActions takes nothing returns nothing
call EnableTrigger(gg_trg_heianyishi2)
set udg_danwei[100]=GetTriggerUnit()
set udg_danwei[101]=GetSpellTargetUnit()
set udg_dian[96]=GetUnitLoc(udg_danwei[101])
set udg_zhengshu[41]=0
set udg_zhengshu[42]=GetRandomInt(1, 6)
set udg_aXUNHUAN[80]=1
loop
exitwhen udg_aXUNHUAN[80] > 6
set udg_dian[95]=PolarProjectionBJ(udg_dian[96], 300.00, ( I2R(udg_aXUNHUAN[80]) * 60.00 ))
set udg_danwei[102]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[100]), 0x6E303035, udg_dian[95], AngleBetweenPoints(udg_dian[95], udg_dian[96]))
call SetUnitUserData(udg_danwei[102], udg_aXUNHUAN[80])
call GroupAddUnitSimple(udg_danwei[102], udg_danweizu[27])
call SetUnitAnimation(udg_danwei[102], "spell")
call UnitApplyTimedLife(udg_danwei[102], 0x42487765, 5.00)
set udg_danwei[102]=null
call RemoveLocation(udg_dian[95])
set udg_aXUNHUAN[80]=udg_aXUNHUAN[80] + 1
endloop
call StartTimerBJ(udg_jishiqi[33], true, 0.04)
set udg_danwei[103]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[100]), 0x65303058, udg_dian[96], 235.00)
call UnitApplyTimedLife(udg_danwei[103], 0x42487765, 5.00)
endfunction
function InitTrig_heianyishi takes nothing returns nothing
set gg_trg_heianyishi=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_heianyishi , 3 , 0x41303055)
call TriggerAddAction(gg_trg_heianyishi, function Trig_heianyishiActions)
endfunction
function Trig_heianyishi2Func001Func002A takes nothing returns nothing
set udg_danwei[102]=GetEnumUnit()
if ( ( udg_zhengshu[42] == GetUnitUserData(udg_danwei[102]) ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei[102])
else
endif
set udg_danwei[102]=null
endfunction
function Trig_heianyishi2Func008Func008A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
call RemoveUnit(udg_danwei2[0])
set udg_danwei2[0]=null
endfunction
function Trig_heianyishi2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( ( I2R(udg_zhengshu[41]) / 2.00 ) == I2R(( udg_zhengshu[41] / 2 )) ) ) then
call ForGroupBJ(udg_danweizu[27], function Trig_heianyishi2Func001Func002A)
if ( ( udg_zhengshu[42] < 6 ) ) then
set udg_zhengshu[42]=( udg_zhengshu[42] + 1 )
else
set udg_zhengshu[42]=1
set udg_danwei[440]=CreateUnit(GetOwningPlayer(udg_danwei[101]), 0x65303130, GetLocationX(udg_dian2[0]), GetLocationY(udg_dian2[0]), 0)
call UnitAddAbility(udg_danwei[440], 0x41304939)
call s__baka_IssueTargetOrder2(udg_danwei[440] , "doom" , udg_danwei[101])
call RemoveUnit(udg_danwei[440])
set udg_danwei[440]=null
endif
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\NightElf\\Starfall\\StarfallTarget.mdl", udg_dian2[0]))
call RemoveLocation(udg_dian2[0])
else
endif
set udg_dian2[0]=GetUnitLoc(udg_danwei[101])
call UnitDamageTarget(udg_danwei[100], udg_danwei[101], ( GetUnitState(udg_danwei[100], UNIT_STATE_LIFE) / 500.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call SetUnitManaBJ(udg_danwei[101], ( GetUnitState(udg_danwei[101], UNIT_STATE_MANA) - ( GetUnitState(udg_danwei[100], UNIT_STATE_LIFE) * ( 0.05 / 25.00 ) ) ))
set udg_zhengshu[41]=( udg_zhengshu[41] + 1 )
if ( ( DistanceBetweenPoints(udg_dian[96], udg_dian2[0]) > 150.00 ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian[96], 150.00, AngleBetweenPoints(udg_dian[96], udg_dian2[0]))
call SetUnitX(udg_danwei[101], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei[101], GetLocationY(udg_dian2[1]))
call RemoveLocation(udg_dian2[1])
else
endif
call RemoveLocation(udg_dian2[0])
if ( ( udg_zhengshu[41] == 100 ) ) then
call UnitRemoveBuffBJ(0x42303246, udg_danwei[101])
call UnitRemoveBuffBJ(0x42303247, udg_danwei[101])
set udg_danwei[100]=null
set udg_danwei[101]=null
set udg_danwei[103]=null
call RemoveLocation(udg_dian[96])
call DisableTrigger(GetTriggeringTrigger())
call ForGroupBJ(udg_danweizu[27], function Trig_heianyishi2Func008Func008A)
call GroupClear(udg_danweizu[27])
else
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_heianyishi2 takes nothing returns nothing
set gg_trg_heianyishi2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_heianyishi2, udg_jishiqi[33])
call TriggerAddAction(gg_trg_heianyishi2, function Trig_heianyishi2Actions)
endfunction
function Trig_heianzuzhou_1Actions takes nothing returns nothing
set udg_danwei2[61]=GetTriggerUnit()
set udg_dian[227]=GetSpellTargetLoc()
set udg_aXUNHUAN[81]=1
loop
exitwhen udg_aXUNHUAN[81] > 4
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[61]), 0x65303132, udg_dian[227], 270.00)
call GroupAddUnit(udg_danweizu2[378], udg_danwei2[1])
set udg_danwei2[1]=null
set udg_aXUNHUAN[81]=udg_aXUNHUAN[81] + 1
endloop
set udg_danwei2[60]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[61]), 0x65303655, udg_dian[227], 270.00)
call SetUnitManaBJ(udg_danwei2[60], 0.00)
set udg_zhengshu2[60]=100
set udg_danwei2[0]=null
call RemoveLocation(udg_dian[227])
call StartTimerBJ(udg_times[60], true, 0.04)
endfunction
function InitTrig_heianzuzhou_1 takes nothing returns nothing
set gg_trg_heianzuzhou_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_heianzuzhou_1 , 3 , 0x41303757)
call TriggerAddAction(gg_trg_heianzuzhou_1, function Trig_heianzuzhou_1Actions)
endfunction
function Trig_heianzuzhou_2Func001Func003A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[0], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[0], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[0], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[0], GetOwningPlayer(udg_danwei2[60])) == true ) ) then
call UnitDamageTarget(udg_danwei2[61], udg_danwei2[0], ( ( ( I2R(GetHeroStr(udg_danwei2[61], true)) * 1.00 ) + ( 20.00 * I2R(GetUnitAbilityLevel(udg_danwei2[61], 0x41303757)) ) ) * 1.00 ), false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\IllidanMissile\\IllidanMissile.mdl", udg_danwei2[0], "chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\ManaBurn\\ManaBurnTarget.mdl", udg_danwei2[0], "origin"))
else
endif
set udg_danwei2[0]=null
endfunction
function Trig_heianzuzhou_2Func001Func006A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
call KillUnit(udg_danwei2[0])
set udg_danwei2[0]=null
endfunction
function Trig_heianzuzhou_2Func001Func007A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
call UnitRemoveAbility(udg_danwei2[1], 0x41304744)
call UnitRemoveBuffBJ(0x42303235, udg_danwei2[1])
set udg_danwei2[1]=null
endfunction
function Trig_heianzuzhou_2Func001Func018A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[0], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[0], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[0], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[0], GetOwningPlayer(udg_danwei2[60])) == true ) and ( IsUnitInGroup(udg_danwei2[0], udg_Danweizu[100]) == false ) ) then
call UnitAddAbility(udg_danwei2[0], 0x41304744)
call GroupAddUnit(udg_Danweizu[100], udg_danwei2[0])
else
endif
set udg_danwei2[0]=null
endfunction
function Trig_heianzuzhou_2Func001Func020A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) >= 350.00 ) ) then
call UnitRemoveAbility(udg_danwei2[1], 0x41304744)
call UnitRemoveBuffBJ(0x42303235, udg_danwei2[1])
call GroupRemoveUnit(udg_Danweizu[100], udg_danwei2[1])
else
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], ( ( ( 350.00 - DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) ) * 0.02 ) + 5.00 ), AngleBetweenPoints(udg_dian2[1], udg_dian2[0]))
if ( ( IsTerrainPathableBJ(udg_dian2[2], PATHING_TYPE_WALKABILITY) == false ) and ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) >= 25.00 ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[2]))
else
endif
call RemoveLocation(udg_dian2[2])
if ( ( ( I2R(udg_zhengshu2[60]) / 5.00 ) == I2R(( udg_zhengshu2[60] / 5 )) ) ) then
call UnitDamageTarget(udg_danwei2[61], udg_danwei2[1], ( ( ( GetUnitState(udg_danwei2[61], UNIT_STATE_LIFE) * 0.02 ) + ( 5.00 * I2R(GetUnitAbilityLevel(udg_danwei2[61], 0x41303757)) ) ) * 0.20 ), false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call SetUnitManaBJ(udg_danwei2[60], ( GetUnitState(udg_danwei2[60], UNIT_STATE_MANA) + ( ( ( GetUnitState(udg_danwei2[61], UNIT_STATE_LIFE) * 0.02 ) + ( 5.00 * I2R(GetUnitAbilityLevel(udg_danwei2[61], 0x41303757)) ) ) * 0.04 ) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\IllidanMissile\\IllidanMissile.mdl", udg_dian2[1]))
else
endif
endif
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[1])
endfunction
function Trig_heianzuzhou_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_zhengshu2[60] > 0 ) ) then
set udg_zhengshu2[60]=( udg_zhengshu2[60] - 1 )
set udg_dian2[0]=GetUnitLoc(udg_danwei2[60])
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(350.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_heianzuzhou_2Func001Func018A)
call DestroyGroup(udg_xuanqu)
call ForGroupBJ(udg_Danweizu[100], function Trig_heianzuzhou_2Func001Func020A)
call RemoveLocation(udg_dian2[0])
else
set udg_dian2[0]=GetUnitLoc(udg_danwei2[60])
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(200.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_heianzuzhou_2Func001Func003A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[0])
call ForGroupBJ(udg_danweizu2[378], function Trig_heianzuzhou_2Func001Func006A)
call ForGroupBJ(udg_Danweizu[100], function Trig_heianzuzhou_2Func001Func007A)
call GroupClear(udg_danweizu2[378])
if ( ( GetUnitState(udg_danwei2[60], UNIT_STATE_MANA) >= 10.00 ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathCoil\\DeathCoilSpecialArt.mdl", udg_danwei2[61], "origin"))
else
endif
call SetUnitLifeBJ(udg_danwei2[61], ( GetUnitState(udg_danwei2[61], UNIT_STATE_LIFE) + GetUnitState(udg_danwei2[60], UNIT_STATE_MANA) ))
call KillUnit(udg_danwei2[60])
call PauseTimer(udg_times[60])
set udg_danwei2[60]=null
set udg_danwei2[61]=null
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_heianzuzhou_2 takes nothing returns nothing
set gg_trg_heianzuzhou_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_heianzuzhou_2, udg_times[60])
call TriggerAddAction(gg_trg_heianzuzhou_2, function Trig_heianzuzhou_2Actions)
endfunction
function Trig_quanliyijiActions takes nothing returns nothing
set udg_danwei[163]=GetTriggerUnit()
set udg_danwei[164]=GetSpellTargetUnit()
set udg_dian[122]=GetUnitLoc(udg_danwei[163])
set udg_dian[123]=GetUnitLoc(udg_danwei[164])
set udg_zhengshu[53]=1
if ( ( udg_zhengshu[56] <= 0 ) ) then
call StartTimerBJ(udg_jishiqi[45], false, 0.50)
set udg_Danwei[37]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[163]), 0x65303649, udg_dian[122], 270.00)
call SetUnitManaBJ(udg_Danwei[37], 255.00)
call SetUnitColor(udg_Danwei[37], PLAYER_COLOR_YELLOW)
call SetUnitTimeScale(udg_Danwei[37], ( 1.00 / 0.50 ))
call GroupAddUnit(udg_Danweizu[37], udg_Danwei[37])
set udg_Danwei[37]=null
else
call StartTimerBJ(udg_jishiqi[45], false, 0.00)
endif
endfunction
function InitTrig_quanliyiji takes nothing returns nothing
set gg_trg_quanliyiji=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_quanliyiji , 3 , 0x41303133)
call TriggerAddAction(gg_trg_quanliyiji, function Trig_quanliyijiActions)
endfunction
function Trig_quanliyiji_2Func001A takes nothing returns nothing
set udg_Danwei[37]=GetEnumUnit()
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[37])) + 1 ) == ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei[163])) + 1 ) ) ) then
call SetUnitTimeScale(udg_Danwei[37], 0.00)
call SetUnitManaBJ(udg_Danwei[37], 250.00)
else
endif
set udg_Danwei[37]=null
endfunction
function Trig_quanliyiji_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_Danweizu[37], function Trig_quanliyiji_2Func001A)
call SetUnitTimeScale(udg_danwei[163], 2.00)
call SetUnitAnimation(udg_danwei[163], "Attack 2")
call UnitDamageTarget(udg_danwei[163], udg_danwei[164], ( I2R(GetHeroAgi(udg_danwei[163], true)) * 7.00 ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_ROCK_HEAVY_BASH)
call StartTimerBJ(udg_jishiqi[40], true, 0.02)
set udg_zhengshu[53]=2
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_quanliyiji_2 takes nothing returns nothing
set gg_trg_quanliyiji_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_quanliyiji_2, udg_jishiqi[45])
call TriggerAddAction(gg_trg_quanliyiji_2, function Trig_quanliyiji_2Actions)
endfunction
function Trig_quanliyiji_3Actions takes nothing returns nothing
if ( ( ( IsUnitPausedBJ(udg_danwei[164]) == false ) or ( IsUnitType(udg_danwei[164], UNIT_TYPE_DEAD) == true ) ) ) then
set udg_zhengshu[53]=( udg_zhengshu[53] + 1 )
set udg_dian[124]=GetUnitLoc(udg_danwei[164])
call AddSpecialEffectLocBJ(udg_dian[124], "Objects\\Spawnmodels\\NightElf\\NECancelDeath\\NECancelDeath.mdl")
call DestroyEffect(GetLastCreatedEffectBJ())
set udg_dian2[0]=PolarProjectionBJ(udg_dian[124], 100.00, AngleBetweenPoints(udg_dian[122], udg_dian[123]))
if ( ( IsTerrainPathableBJ(udg_dian2[0], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei[164], GetLocationX(udg_dian2[0]))
call SetUnitY(udg_danwei[164], GetLocationY(udg_dian2[0]))
else
endif
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian[124])
call SetUnitFacing(udg_danwei[164], AngleBetweenPoints(udg_dian[123], udg_dian[122]))
if ( ( udg_zhengshu[53] == 16 ) ) then
set udg_dian[124]=GetUnitLoc(udg_danwei[164])
set udg_danwei[165]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[163]), 0x65303059, udg_dian[124], 0)
call UnitApplyTimedLife(udg_danwei[165], 0x42487765, 1.00)
call SetUnitTimeScale(udg_danwei[163], 1.00)
set udg_danwei[165]=null
set udg_danwei[163]=null
set udg_danwei[164]=null
call RemoveLocation(udg_dian[122])
call RemoveLocation(udg_dian[123])
call RemoveLocation(udg_dian[124])
call PauseTimer(udg_jishiqi[40])
set udg_zhengshu[53]=0
else
endif
else
endif
endfunction
function InitTrig_quanliyiji_3 takes nothing returns nothing
set gg_trg_quanliyiji_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_quanliyiji_3, udg_jishiqi[40])
call TriggerAddAction(gg_trg_quanliyiji_3, function Trig_quanliyiji_3Actions)
endfunction
function Trig_tiaoyueFunc005Func009A takes nothing returns nothing
set udg_Danwei[37]=GetEnumUnit()
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[37])) + 1 ) == ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei[163])) + 1 ) ) ) then
call SetUnitColor(udg_Danwei[37], PLAYER_COLOR_GREEN)
call SetUnitTimeScale(udg_Danwei[37], 0.00)
call SetUnitManaBJ(udg_Danwei[37], 250.00)
else
endif
set udg_Danwei[37]=null
endfunction
function Trig_tiaoyueActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei[166]=GetTriggerUnit()
set udg_dian[125]=GetUnitLoc(udg_danwei[166])
set udg_dian[126]=GetSpellTargetLoc()
if ( ( udg_zhengshu[53] != 1 ) ) then
set udg_zhengshu2[113]=31
call StartTimerBJ(udg_jishiqi[41], false, 0.00)
else
set udg_zhengshu2[113]=0
call s__Unit_PauseUnitMU(udg_danwei[166] , true , "空中坠踢")
call s__Unit_PauseUnitMU(udg_danwei[164] , true , "空中坠踢")
call StartTimerBJ(udg_jishiqi[42], true, 0.04)
call PauseTimer(udg_jishiqi[45])
call SetUnitAnimation(udg_danwei[166], "Attack slam")
call ForGroupBJ(udg_Danweizu[37], function Trig_tiaoyueFunc005Func009A)
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_tiaoyue takes nothing returns nothing
set gg_trg_tiaoyue=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_tiaoyue , 3 , 0x41303135)
call TriggerAddAction(gg_trg_tiaoyue, function Trig_tiaoyueActions)
endfunction
function Trig_tiaoyue_2Func001Func001Func001Func012Func003A takes nothing returns nothing
set udg_danwei[172]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[172], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei[172], udg_danweizu2[369]) == false ) and ( IsUnitAliveBJ(udg_danwei[172]) == true ) and ( IsUnitEnemy(udg_danwei[172], GetOwningPlayer(udg_danwei[166])) == true ) ) then
call UnitDamageTarget(udg_danwei[166], udg_danwei[172], ( ( 35.00 * I2R(GetUnitAbilityLevel(udg_danwei[166], 0x41303135)) ) + ( 75.00 + I2R(GetHeroAgi(udg_danwei[166], true)) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei[172]=null
endfunction
function Trig_tiaoyue_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( ( IsUnitPausedBJ(udg_danwei[166]) == false ) or ( IsUnitType(udg_danwei[166], UNIT_TYPE_DEAD) == true ) ) ) then
if ( ( udg_zhengshu2[113] == 31 ) ) then
set udg_Dian[89]=GetUnitLoc(udg_danwei[166])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[166]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304B4F)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_danwei[166])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
set udg_zhengshu2[113]=( udg_zhengshu2[113] - 1 )
call SetUnitAnimationByIndex(udg_danwei[166], 4)
call SetUnitTimeScale(udg_danwei[166], 1.20)
call StartTimerBJ(udg_jishiqi[41], true, 0.03)
else
if ( ( udg_zhengshu2[113] > 10 ) ) then
set udg_zhengshu2[113]=( udg_zhengshu2[113] - 1 )
set udg_dian2[0]=GetUnitLoc(udg_danwei[166])
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], ( ( DistanceBetweenPoints(udg_dian[125], udg_dian[126]) - 80.00 ) / 20.00 ), AngleBetweenPoints(udg_dian[125], udg_dian[126]))
call SetUnitX(udg_danwei[166], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei[166], GetLocationY(udg_dian2[1]))
call UnitAddAbility(udg_danwei[166], 0x41726176)
call s__maphack_SetHeight(udg_danwei[166] , ( s__maphack_GetHeight(udg_danwei[166]) + ( ( I2R(udg_zhengshu2[113]) - 20.00 ) * 6.00 ) ) , 0.00)
call UnitRemoveAbility(udg_danwei[166], 0x41726176)
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
if ( ( udg_zhengshu2[113] == 10 ) ) then
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl", udg_dian[126]))
set udg_danweizu[35]=YDWEGetUnitsInRangeOfLocAllNull(300.00 , udg_dian[126])
call ForGroupBJ(udg_danweizu[35], function Trig_tiaoyue_2Func001Func001Func001Func012Func003A)
call DestroyGroup(udg_danweizu[35])
else
endif
else
if ( ( udg_zhengshu2[113] > 0 ) ) then
set udg_zhengshu2[113]=( udg_zhengshu2[113] - 1 )
else
call SetUnitTimeScale(udg_danwei[166], 1.00)
call PauseTimer(udg_jishiqi[41])
set udg_danwei[166]=null
call RemoveLocation(udg_dian[125])
call RemoveLocation(udg_dian[126])
set udg_zhengshu2[113]=0
endif
endif
endif
else
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_tiaoyue_2 takes nothing returns nothing
set gg_trg_tiaoyue_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_tiaoyue_2, udg_jishiqi[41])
call TriggerAddAction(gg_trg_tiaoyue_2, function Trig_tiaoyue_2Actions)
endfunction
function Trig_tiaoyue_boxingFunc002Func001Func002Func001Func002Func011Func013A takes nothing returns nothing
set udg_danwei[172]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[172], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei[172], udg_danweizu2[369]) == false ) and ( IsUnitAliveBJ(udg_danwei[172]) == true ) and ( IsUnitEnemy(udg_danwei[172], GetOwningPlayer(udg_danwei[166])) == true ) ) then
call UnitDamageTarget(udg_danwei[166], udg_danwei[172], ( ( 50.00 * I2R(GetUnitAbilityLevel(udg_danwei[166], 0x41303135)) ) + ( 1.20 * I2R(GetHeroAgi(udg_danwei[166], true)) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei[172]=null
endfunction
function Trig_tiaoyue_boxingFunc002Func001Func002Func011Func013A takes nothing returns nothing
set udg_danwei[172]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[172], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei[172], udg_danweizu2[369]) == false ) and ( IsUnitAliveBJ(udg_danwei[172]) == true ) and ( IsUnitEnemy(udg_danwei[172], GetOwningPlayer(udg_danwei[166])) == true ) ) then
call UnitDamageTarget(udg_danwei[166], udg_danwei[172], ( ( 25.00 * I2R(GetUnitAbilityLevel(udg_danwei[166], 0x41303135)) ) + ( 0.40 * I2R(GetHeroAgi(udg_danwei[166], true)) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei[172]=null
endfunction
function Trig_tiaoyue_boxingFunc002Func011Func013A takes nothing returns nothing
set udg_danwei[172]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[172], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei[172], udg_danweizu2[369]) == false ) and ( IsUnitAliveBJ(udg_danwei[172]) == true ) and ( IsUnitEnemy(udg_danwei[172], GetOwningPlayer(udg_danwei[166])) == true ) ) then
call UnitDamageTarget(udg_danwei[166], udg_danwei[172], ( ( 15.00 * I2R(GetUnitAbilityLevel(udg_danwei[166], 0x41303135)) ) + ( 0.25 * I2R(GetHeroAgi(udg_danwei[166], true)) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei[172]=null
endfunction
function Trig_tiaoyue_boxingActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu2[113]=( udg_zhengshu2[113] + 1 )
if ( ( udg_zhengshu2[113] <= 10 ) ) then
set udg_dian2[0]=PolarProjectionBJ(udg_dian[125], ( ( DistanceBetweenPoints(udg_dian[125], udg_dian[126]) / 30.00 ) * I2R(udg_zhengshu2[113]) ), AngleBetweenPoints(udg_dian[125], udg_dian[126]))
if ( ( IsTerrainPathableBJ(udg_dian2[0], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_danwei[166], GetLocationX(udg_dian2[0]))
call SetUnitY(udg_danwei[166], GetLocationY(udg_dian2[0]))
call SetUnitX(udg_danwei[164], GetLocationX(udg_dian2[0]))
call SetUnitY(udg_danwei[164], GetLocationY(udg_dian2[0]))
else
endif
call UnitAddAbility(udg_danwei[166], 0x41726176)
call s__maphack_SetHeight(udg_danwei[166] , ( s__maphack_GetHeight(udg_danwei[166]) + ( ( I2R(udg_zhengshu2[113]) - 5.00 ) * - 18.00 ) ) , 0.00)
call UnitRemoveAbility(udg_danwei[166], 0x41726176)
call UnitAddAbility(udg_danwei[164], 0x41726176)
call s__maphack_SetHeight(udg_danwei[164] , ( s__maphack_GetHeight(udg_danwei[164]) + ( ( I2R(udg_zhengshu2[113]) - 5.00 ) * - 18.00 ) ) , 0.00)
call UnitRemoveAbility(udg_danwei[164], 0x41726176)
call RemoveLocation(udg_dian2[0])
if ( ( udg_zhengshu2[113] == 10 ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei[166])
call UnitAddAbility(udg_danwei[166], 0x41726176)
call s__maphack_SetHeight(udg_danwei[166] , 0.00 , 0.00)
call UnitRemoveAbility(udg_danwei[166], 0x41726176)
call UnitAddAbility(udg_danwei[164], 0x41726176)
call s__maphack_SetHeight(udg_danwei[164] , 0.00 , 0.00)
call UnitRemoveAbility(udg_danwei[164], 0x41726176)
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[166]), 0x65303059, udg_dian2[0], 0)
call UnitApplyTimedLife(udg_danwei2[0], 0x42487765, 1.00)
call SetUnitScale(udg_danwei2[0], 1.00, 1.00, 1.00)
set udg_danwei2[0]=null
set udg_danweizu[35]=YDWEGetUnitsInRangeOfLocAllNull(300.00 , udg_dian2[0])
call ForGroupBJ(udg_danweizu[35], function Trig_tiaoyue_boxingFunc002Func011Func013A)
call DestroyGroup(udg_danweizu[35])
call RemoveLocation(udg_dian2[0])
call CameraSetEQNoiseForPlayer(GetOwningPlayer(udg_danwei[164]), 10.00)
call CameraSetEQNoiseForPlayer(GetOwningPlayer(udg_danwei[166]), 10.00)
call SetUnitAnimation(udg_danwei[166], "Attack slam")
call PlaySoundOnUnitBJ(gg_snd_WoodHeavyBashStone1, 100, udg_danwei[166])
else
endif
else
if ( ( udg_zhengshu2[113] <= 20 ) ) then
if ( ( udg_zhengshu2[113] == 12 ) ) then
call CameraClearNoiseForPlayer(GetOwningPlayer(udg_danwei[164]))
call CameraClearNoiseForPlayer(GetOwningPlayer(udg_danwei[166]))
else
endif
else
if ( ( udg_zhengshu2[113] <= 30 ) ) then
set udg_dian2[0]=PolarProjectionBJ(udg_dian[125], ( ( DistanceBetweenPoints(udg_dian[125], udg_dian[126]) / 30.00 ) * ( I2R(udg_zhengshu2[113]) - 10.00 ) ), AngleBetweenPoints(udg_dian[125], udg_dian[126]))
if ( ( IsTerrainPathableBJ(udg_dian2[0], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_danwei[166], GetLocationX(udg_dian2[0]))
call SetUnitY(udg_danwei[166], GetLocationY(udg_dian2[0]))
call SetUnitX(udg_danwei[164], GetLocationX(udg_dian2[0]))
call SetUnitY(udg_danwei[164], GetLocationY(udg_dian2[0]))
else
endif
call UnitAddAbility(udg_danwei[166], 0x41726176)
call s__maphack_SetHeight(udg_danwei[166] , ( s__maphack_GetHeight(udg_danwei[166]) + ( ( I2R(udg_zhengshu2[113]) - 26.00 ) * - 25.00 ) ) , 0.00)
call UnitRemoveAbility(udg_danwei[166], 0x41726176)
call UnitAddAbility(udg_danwei[164], 0x41726176)
call s__maphack_SetHeight(udg_danwei[164] , ( s__maphack_GetHeight(udg_danwei[164]) + ( ( I2R(udg_zhengshu2[113]) - 26.00 ) * - 25.00 ) ) , 0.00)
call UnitRemoveAbility(udg_danwei[164], 0x41726176)
call RemoveLocation(udg_dian2[0])
if ( ( udg_zhengshu2[113] == 30 ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei[166])
call UnitAddAbility(udg_danwei[166], 0x41726176)
call s__maphack_SetHeight(udg_danwei[166] , 0.00 , 0.00)
call UnitRemoveAbility(udg_danwei[166], 0x41726176)
call UnitAddAbility(udg_danwei[164], 0x41726176)
call s__maphack_SetHeight(udg_danwei[164] , 0.00 , 0.00)
call UnitRemoveAbility(udg_danwei[164], 0x41726176)
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[166]), 0x65303059, udg_dian2[0], 0)
call UnitApplyTimedLife(udg_danwei2[0], 0x42487765, 1.00)
call SetUnitScale(udg_danwei2[0], 2.00, 2.00, 2.00)
set udg_danwei2[0]=null
set udg_danweizu[35]=YDWEGetUnitsInRangeOfLocAllNull(300.00 , udg_dian2[0])
call ForGroupBJ(udg_danweizu[35], function Trig_tiaoyue_boxingFunc002Func001Func002Func011Func013A)
call DestroyGroup(udg_danweizu[35])
call RemoveLocation(udg_dian2[0])
call CameraSetEQNoiseForPlayer(GetOwningPlayer(udg_danwei[164]), 20.00)
call CameraSetEQNoiseForPlayer(GetOwningPlayer(udg_danwei[166]), 20.00)
call SetUnitAnimation(udg_danwei[166], "Attack slam")
call PlaySoundOnUnitBJ(gg_snd_WoodHeavyBashStone2, 100, udg_danwei[166])
else
endif
else
if ( ( udg_zhengshu2[113] <= 46 ) ) then
if ( ( udg_zhengshu2[113] == 33 ) ) then
call CameraClearNoiseForPlayer(GetOwningPlayer(udg_danwei[164]))
call CameraClearNoiseForPlayer(GetOwningPlayer(udg_danwei[166]))
call UnitAddAbility(udg_danwei[166], 0x41303130)
else
endif
else
if ( ( udg_zhengshu2[113] <= 60 ) ) then
set udg_dian2[0]=PolarProjectionBJ(udg_dian[125], ( ( DistanceBetweenPoints(udg_dian[125], udg_dian[126]) / 30.00 ) * ( I2R(udg_zhengshu2[113]) - 26.00 ) ), AngleBetweenPoints(udg_dian[125], udg_dian[126]))
if ( ( IsTerrainPathableBJ(udg_dian2[0], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_danwei[166], GetLocationX(udg_dian2[0]))
call SetUnitY(udg_danwei[166], GetLocationY(udg_dian2[0]))
call SetUnitX(udg_danwei[164], GetLocationX(udg_dian2[0]))
call SetUnitY(udg_danwei[164], GetLocationY(udg_dian2[0]))
else
endif
call UnitAddAbility(udg_danwei[166], 0x41726176)
call s__maphack_SetHeight(udg_danwei[166] , ( s__maphack_GetHeight(udg_danwei[166]) + ( ( I2R(udg_zhengshu2[113]) - 53.00 ) * - 50.00 ) ) , 0.00)
call UnitRemoveAbility(udg_danwei[166], 0x41726176)
call UnitAddAbility(udg_danwei[164], 0x41726176)
call s__maphack_SetHeight(udg_danwei[164] , ( s__maphack_GetHeight(udg_danwei[164]) + ( ( I2R(udg_zhengshu2[113]) - 53.00 ) * - 50.00 ) ) , 0.00)
call UnitRemoveAbility(udg_danwei[164], 0x41726176)
call RemoveLocation(udg_dian2[0])
if ( ( udg_zhengshu2[113] == 60 ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei[166])
call UnitAddAbility(udg_danwei[166], 0x41726176)
call s__maphack_SetHeight(udg_danwei[166] , 0.00 , 0.00)
call UnitRemoveAbility(udg_danwei[166], 0x41726176)
call UnitAddAbility(udg_danwei[164], 0x41726176)
call s__maphack_SetHeight(udg_danwei[164] , 0.00 , 0.00)
call UnitRemoveAbility(udg_danwei[164], 0x41726176)
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[166]), 0x65303059, udg_dian2[0], 0)
call UnitApplyTimedLife(udg_danwei2[0], 0x42487765, 1.00)
call SetUnitScale(udg_danwei2[0], 10.00, 10.00, 10.00)
set udg_danwei2[0]=null
set udg_danweizu[35]=YDWEGetUnitsInRangeOfLocAllNull(300.00 , udg_dian2[0])
call ForGroupBJ(udg_danweizu[35], function Trig_tiaoyue_boxingFunc002Func001Func002Func001Func002Func011Func013A)
call DestroyGroup(udg_danweizu[35])
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian[122])
call RemoveLocation(udg_dian[123])
set udg_dian[122]=PolarProjectionBJ(udg_dian[125], 0.00, 0.00)
set udg_dian[123]=PolarProjectionBJ(udg_dian[126], 0.00, 0.00)
call RemoveLocation(udg_dian[125])
call RemoveLocation(udg_dian[126])
call CameraSetEQNoiseForPlayer(GetOwningPlayer(udg_danwei[164]), 50.00)
call CameraSetEQNoiseForPlayer(GetOwningPlayer(udg_danwei[166]), 50.00)
call StartTimerBJ(udg_jishiqi[45], false, 0.00)
call s__Unit_PauseUnitMU(udg_danwei[166] , false , "空中坠踢")
call s__Unit_PauseUnitMU(udg_danwei[164] , false , "空中坠踢")
call StopSoundBJ(gg_snd_BuildingDeathLargeHuman01, false)
call PlaySoundOnUnitBJ(gg_snd_BuildingDeathLargeHuman01, 100, udg_danwei[166])
call UnitRemoveAbility(udg_danwei[166], 0x41303130)
else
endif
else
if ( ( udg_zhengshu2[113] == 65 ) ) then
call CameraClearNoiseForPlayer(GetOwningPlayer(udg_danwei[164]))
call CameraClearNoiseForPlayer(GetOwningPlayer(udg_danwei[166]))
call PauseTimer(udg_jishiqi[42])
set udg_danwei[166]=null
set udg_zhengshu2[113]=0
else
endif
endif
endif
endif
endif
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_tiaoyue_boxing takes nothing returns nothing
set gg_trg_tiaoyue_boxing=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_tiaoyue_boxing, udg_jishiqi[42])
call TriggerAddAction(gg_trg_tiaoyue_boxing, function Trig_tiaoyue_boxingActions)
endfunction
function Trig_xuanfengti_1Actions takes nothing returns nothing
set udg_danwei[168]=GetTriggerUnit()
set udg_Shishu[128]=( GetUnitFacing(udg_danwei[168]) - 0.00 )
set udg_zhengshu[54]=43
call StartTimerBJ(udg_Times[154], false, 0.00)
endfunction
function InitTrig_xuanfengti_1 takes nothing returns nothing
set gg_trg_xuanfengti_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_xuanfengti_1 , 3 , 0x41303136)
call TriggerAddAction(gg_trg_xuanfengti_1, function Trig_xuanfengti_1Actions)
endfunction
function Trig_xuanfengti_2Func001Func001Func003Func001A takes nothing returns nothing
set udg_danwei[169]=GetEnumUnit()
call UnitRemoveAbility(udg_danwei[169], 0x41304C59)
call UnitRemoveBuffBJ(0x42303257, udg_danwei[169])
set udg_danwei[169]=null
endfunction
function Trig_xuanfengti_2Func001Func001Func003Func006Func007A takes nothing returns nothing
set udg_danwei[169]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei[169])
if ( ( IsUnitType(udg_danwei[169], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei[169], udg_danweizu2[369]) == false ) and ( IsUnitAliveBJ(udg_danwei[169]) == true ) and ( IsUnitEnemy(udg_danwei[169], GetOwningPlayer(udg_danwei[168])) == true ) and ( IsUnitInGroup(udg_danwei[169], udg_Danweizu[128]) == false ) ) then
call GroupAddUnit(udg_Danweizu[128], udg_danwei[169])
call UnitAddAbility(udg_danwei[169], 0x41304C59)
call UnitDamageTarget(udg_danwei[168], udg_danwei[169], ( ( 25.00 + ( 30.00 * I2R(GetUnitAbilityLevel(udg_danwei[168], 0x41303136)) ) ) + ( 1.50 * I2R(GetHeroAgi(udg_danwei[168], true)) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WOOD_HEAVY_BASH)
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\GryphonRiderMissile\\GryphonRiderMissile.mdl", udg_dian2[0]))
else
endif
set udg_danwei[169]=null
call RemoveLocation(udg_dian2[0])
endfunction
function Trig_xuanfengti_2Func001Func001Func003Func007A takes nothing returns nothing
set udg_danwei[169]=GetEnumUnit()
set udg_dian[129]=GetUnitLoc(udg_danwei[169])
set udg_dian2[0]=PolarProjectionBJ(udg_dian[129], I2R(udg_zhengshu[54]), udg_Shishu[128])
if ( ( IsTerrainPathableBJ(udg_dian2[0], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei[169], GetLocationX(udg_dian2[0]))
call SetUnitY(udg_danwei[169], GetLocationY(udg_dian2[0]))
else
endif
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", udg_dian[129]))
set udg_danwei[169]=null
call RemoveLocation(udg_dian[129])
call RemoveLocation(udg_dian2[0])
endfunction
function Trig_xuanfengti_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_zhengshu[54] == 43 ) ) then
set udg_zhengshu[54]=( udg_zhengshu[54] - 1 )
call StartTimerBJ(udg_Times[154], true, 0.03)
if ( ( udg_zhengshu2[113] > 0 ) ) then
set udg_zhengshu[54]=30
else
call SetUnitAnimationByIndex(udg_danwei[168], 2)
set udg_Dian[89]=GetUnitLoc(udg_danwei[168])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[168]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304B50)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_danwei[168])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
endif
else
if ( ( udg_zhengshu[54] > 30 ) ) then
set udg_zhengshu[54]=( udg_zhengshu[54] - 1 )
else
if ( ( udg_zhengshu[54] > 0 ) ) then
if ( ( udg_zhengshu[54] > 15 ) and ( ( I2R(udg_zhengshu[54]) / 3.00 ) == I2R(( udg_zhengshu[54] / 3 )) ) ) then
set udg_dian[128]=GetUnitLoc(udg_danwei[168])
set udg_dian[129]=PolarProjectionBJ(udg_dian[128], ( ( 30.00 - I2R(udg_zhengshu[54]) ) * ( 20.00 + ( 4.00 * I2R(GetUnitAbilityLevel(udg_danwei[168], 0x41303136)) ) ) ), udg_Shishu[128])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl", udg_dian[129]))
set udg_danweizu[33]=YDWEGetUnitsInRangeOfLocAllNull(225.00 , udg_dian[129])
call ForGroupBJ(udg_danweizu[33], function Trig_xuanfengti_2Func001Func001Func003Func006Func007A)
call DestroyGroup(udg_danweizu[33])
call RemoveLocation(udg_dian[129])
call RemoveLocation(udg_dian[128])
else
endif
call ForGroupBJ(udg_Danweizu[128], function Trig_xuanfengti_2Func001Func001Func003Func007A)
set udg_zhengshu[54]=( udg_zhengshu[54] - 1 )
else
call ForGroupBJ(udg_Danweizu[128], function Trig_xuanfengti_2Func001Func001Func003Func001A)
call PauseTimer(udg_Times[154])
call GroupClear(udg_Danweizu[128])
set udg_danwei[168]=null
endif
endif
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_xuanfengti_2 takes nothing returns nothing
set gg_trg_xuanfengti_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_xuanfengti_2, udg_Times[154])
call TriggerAddAction(gg_trg_xuanfengti_2, function Trig_xuanfengti_2Actions)
endfunction
function Trig_shunshenlianxiActions takes nothing returns nothing
set udg_danwei[170]=GetTriggerUnit()
if ( ( GetSpellAbilityId() == 0x41303031 ) ) then
set udg_danwei[171]=GetSpellTargetUnit()
else
set udg_danwei[171]=udg_danwei[164]
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", udg_danwei[171], "origin"))
endif
set udg_dian[130]=GetUnitLoc(udg_danwei[171])
set udg_dian[132]=GetUnitLoc(udg_danwei[170])
call UnitAddAbility(udg_danwei[170], 0x41303130)
call SetUnitX(udg_danwei[170], GetLocationX(udg_dian[130]))
call SetUnitY(udg_danwei[170], GetLocationY(udg_dian[130]))
call StartTimerBJ(udg_jishiqi[43], true, 0.05)
if ( ( udg_zhengshu[53] == 1 ) ) then
call PauseTimer(udg_jishiqi[45])
call StartTimerBJ(udg_jishiqi[45], false, 0.00)
else
endif
set udg_zhengshu[56]=0
endfunction
function InitTrig_shunshenlianxi takes nothing returns nothing
set gg_trg_shunshenlianxi=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_shunshenlianxi , 3 , 0x41303031)
call TriggerAddAction(gg_trg_shunshenlianxi, function Trig_shunshenlianxiActions)
endfunction
function Trig_shunshenlianxi2Func001Func002Func002Func008A takes nothing returns nothing
set udg_danwei[172]=GetEnumUnit()
if ( ( IsUnitAliveBJ(udg_danwei[172]) == true ) and ( IsUnitType(udg_danwei[172], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei[172], udg_danweizu2[369]) == false ) and ( IsUnitEnemy(udg_danwei[172], GetOwningPlayer(udg_danwei[170])) == true ) ) then
call UnitDamageTarget(udg_danwei[170], udg_danwei[172], ( ( I2R(GetHeroAgi(udg_danwei[170], true)) * 1.00 ) + ( 25.00 + ( 75.00 * I2R(GetUnitAbilityLevel(udg_danwei[170], 0x41303031)) ) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei[172]=null
endfunction
function Trig_shunshenlianxi2Func001Func002Func003Func004A takes nothing returns nothing
set udg_danwei[172]=GetEnumUnit()
if ( ( IsUnitAliveBJ(udg_danwei[172]) == true ) and ( IsUnitType(udg_danwei[172], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei[172], udg_danweizu2[369]) == false ) and ( IsUnitEnemy(udg_danwei[172], GetOwningPlayer(udg_danwei[170])) == true ) ) then
call UnitDamageTarget(udg_danwei[170], udg_danwei[172], ( ( I2R(GetHeroAgi(udg_danwei[170], true)) * 1.00 ) + ( 0.00 + ( 100.00 * I2R(GetUnitAbilityLevel(udg_danwei[170], 0x41303031)) ) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei[172]=null
endfunction
function Trig_shunshenlianxi2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( ( IsUnitPausedBJ(udg_danwei[170]) == false ) or ( IsUnitType(udg_danwei[170], UNIT_TYPE_DEAD) == true ) ) ) then
set udg_zhengshu[56]=( udg_zhengshu[56] + 1 )
if ( ( udg_zhengshu[56] <= 12 ) ) then
if ( ( udg_zhengshu[56] == 1 ) ) then
set udg_dian[131]=PolarProjectionBJ(udg_dian[130], 50.00, AngleBetweenPoints(udg_dian[132], udg_dian[130]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", udg_dian[131]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl", udg_dian[131]))
call SetUnitPositionLoc(udg_danwei[171], udg_dian[130])
call SetUnitX(udg_danwei[170], GetLocationX(udg_dian[131]))
call SetUnitY(udg_danwei[170], GetLocationY(udg_dian[131]))
set udg_danweizu[34]=YDWEGetUnitsInRangeOfLocAllNull(300.00 , udg_dian[131])
call ForGroupBJ(udg_danweizu[34], function Trig_shunshenlianxi2Func001Func002Func002Func008A)
call DestroyGroup(udg_danweizu[34])
call RemoveLocation(udg_dian[131])
else
endif
if ( ( udg_zhengshu[56] == 12 ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei[171])
set udg_dian[131]=PolarProjectionBJ(udg_dian2[0], 125.00, AngleBetweenPoints(udg_dian[130], udg_dian[132]))
set udg_danweizu[34]=YDWEGetUnitsInRangeOfLocAllNull(300.00 , udg_dian[131])
call ForGroupBJ(udg_danweizu[34], function Trig_shunshenlianxi2Func001Func002Func003Func004A)
call DestroyGroup(udg_danweizu[34])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", udg_dian[131]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl", udg_dian[131]))
call SetUnitPositionLoc(udg_danwei[171], udg_dian[131])
call SetUnitX(udg_danwei[170], GetLocationX(udg_dian[131]))
call SetUnitY(udg_danwei[170], GetLocationY(udg_dian[131]))
call RemoveLocation(udg_dian2[0])
else
endif
if ( ( udg_zhengshu[56] != 1 ) and ( udg_zhengshu[56] != 12 ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian[130], ( - 50.00 + ( 20.00 * I2R(udg_zhengshu[56]) ) ), AngleBetweenPoints(udg_dian[132], udg_dian[130]))
call SetUnitFacing(udg_danwei[170], AngleBetweenPoints(udg_dian[132], udg_dian[130]))
call SetUnitX(udg_danwei[170], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei[170], GetLocationY(udg_dian2[1]))
call RemoveLocation(udg_dian2[1])
else
endif
else
if ( ( udg_zhengshu[56] < 25 ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei[171])
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 40.00, AngleBetweenPoints(udg_dian[132], udg_dian[130]))
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei[171], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei[171], GetLocationY(udg_dian2[1]))
else
endif
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", udg_dian2[1]))
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
call RemoveLocation(udg_dian[130])
call RemoveLocation(udg_dian[131])
call RemoveLocation(udg_dian[132])
set udg_zhengshu[56]=0
call PauseTimer(udg_jishiqi[43])
call UnitRemoveAbility(udg_danwei[170], 0x41303130)
set udg_danwei[170]=null
set udg_danwei[171]=null
endif
endif
else
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_shunshenlianxi2 takes nothing returns nothing
set gg_trg_shunshenlianxi2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_shunshenlianxi2, udg_jishiqi[43])
call TriggerAddAction(gg_trg_shunshenlianxi2, function Trig_shunshenlianxi2Actions)
endfunction
function Trig_sanlianhengda_1Actions takes nothing returns nothing
set udg_Danwei[122]=GetTriggerUnit()
set udg_Danwei[123]=GetSpellTargetUnit()
set udg_Zhengshu[122]=21
call StartTimerBJ(udg_Times[122], false, 0.00)
call StartTimerBJ(udg_Times[125], false, 1.00)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_Danwei[122]), 0x41304C55, false)
call UnitAddAbility(udg_Danwei[122], 0x41304C54)
endfunction
function InitTrig_sanlianhengda_1 takes nothing returns nothing
set gg_trg_sanlianhengda_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_sanlianhengda_1 , 3 , 0x41304C55)
call TriggerAddAction(gg_trg_sanlianhengda_1, function Trig_sanlianhengda_1Actions)
endfunction
function Trig_sanlianhengda_1_5Actions takes nothing returns nothing
if ( ( IsUnitPausedBJ(udg_Danwei[122]) == false ) ) then
if ( ( udg_Zhengshu[122] == 21 ) ) then
set udg_Zhengshu[122]=( udg_Zhengshu[122] - 1 )
set udg_Dian[89]=GetUnitLoc(udg_Danwei[122])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[122]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304B4F)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_Danwei[122])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
call StartTimerBJ(udg_Times[122], true, 0.03)
call SetUnitAnimationByIndex(udg_Danwei[122], 8)
else
if ( ( IsUnitType(udg_Danwei[122], UNIT_TYPE_DEAD) == false ) and ( udg_Zhengshu[122] > 10 ) ) then
set udg_Zhengshu[122]=( udg_Zhengshu[122] - 1 )
if ( ( udg_Zhengshu[122] == 10 ) ) then
set udg_Dian[122]=GetUnitLoc(udg_Danwei[122])
set udg_Dian[123]=GetUnitLoc(udg_Danwei[123])
set udg_Shishu[122]=( DistanceBetweenPoints(udg_Dian[122], udg_Dian[123]) - 100.00 )
set udg_Shishu[123]=AngleBetweenPoints(udg_Dian[122], udg_Dian[123])
call RemoveLocation(udg_Dian[122])
call RemoveLocation(udg_Dian[123])
else
endif
else
if ( ( IsUnitType(udg_Danwei[122], UNIT_TYPE_DEAD) == false ) and ( udg_Zhengshu[122] > 0 ) ) then
set udg_Zhengshu[122]=( udg_Zhengshu[122] - 1 )
set udg_Dian[122]=GetUnitLoc(udg_Danwei[122])
set udg_Dian[123]=PolarProjectionBJ(udg_Dian[122], ( udg_Shishu[122] / 10.00 ), udg_Shishu[123])
if ( ( IsTerrainPathableBJ(udg_Dian[122], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_Danwei[122], GetLocationX(udg_Dian[123]))
call SetUnitY(udg_Danwei[122], GetLocationY(udg_Dian[123]))
else
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\LichMissile\\LichMissile.mdl", udg_Danwei[122], "hand left"))
call RemoveLocation(udg_Dian[122])
call RemoveLocation(udg_Dian[123])
if ( ( udg_Zhengshu[122] == 0 ) ) then
set udg_Dian[122]=GetUnitLoc(udg_Danwei[123])
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\GryphonRiderMissile\\GryphonRiderMissile.mdl", udg_Danwei[123], "chest"))
call UnitDamageTarget(udg_Danwei[122], udg_Danwei[123], ( ( ( ( 0.00 + ( 15.00 * I2R(GetUnitAbilityLevel(udg_Danwei[122], 0x41304C55)) ) ) + ( 1.00 * I2R(GetHeroAgi(udg_Danwei[122], true)) ) ) * 1.00 ) * 1.00 ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_ROCK_HEAVY_BASH)
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[122]), 0x65303130, udg_Dian[122], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41303551)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_Danwei[123])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[122])
if ( ( IsUnitType(udg_Danwei[123], UNIT_TYPE_DEAD) == true ) ) then
call UnitRemoveAbility(udg_Danwei[122], 0x41304C54)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_Danwei[122]), 0x41304C55, true)
else
endif
else
endif
else
call PauseTimer(udg_Times[122])
endif
endif
endif
else
endif
endfunction
function InitTrig_sanlianhengda_1_5 takes nothing returns nothing
set gg_trg_sanlianhengda_1_5=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_sanlianhengda_1_5, udg_Times[122])
call TriggerAddAction(gg_trg_sanlianhengda_1_5, function Trig_sanlianhengda_1_5Actions)
endfunction
function Trig_sanlianhengda_1_9Actions takes nothing returns nothing
call UnitRemoveAbility(udg_Danwei[122], 0x41304C54)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_Danwei[122]), 0x41304C55, true)
endfunction
function InitTrig_sanlianhengda_1_9 takes nothing returns nothing
set gg_trg_sanlianhengda_1_9=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_sanlianhengda_1_9, udg_Times[125])
call TriggerAddAction(gg_trg_sanlianhengda_1_9, function Trig_sanlianhengda_1_9Actions)
endfunction
function Trig_sanlianhengda_2Actions takes nothing returns nothing
set udg_Dian[122]=GetUnitLoc(udg_Danwei[122])
set udg_Dian[123]=GetUnitLoc(udg_Danwei[123])
set udg_Zhengshu[123]=26
set udg_Zhengshu[126]=0
set udg_Shishu[122]=( DistanceBetweenPoints(udg_Dian[122], udg_Dian[123]) - 100.00 )
set udg_Shishu[123]=AngleBetweenPoints(udg_Dian[122], udg_Dian[123])
call RemoveLocation(udg_Dian[122])
call RemoveLocation(udg_Dian[123])
call PauseTimer(udg_Times[125])
call StartTimerBJ(udg_Times[123], false, 0.00)
call StartTimerBJ(udg_Times[126], false, 1.00)
call StartTimerBJ(udg_Times[127], false, 15.00)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_Danwei[122]), 0x41304C54, false)
call UnitAddAbility(udg_Danwei[122], 0x41304C56)
endfunction
function InitTrig_sanlianhengda_2 takes nothing returns nothing
set gg_trg_sanlianhengda_2=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_sanlianhengda_2 , 3 , 0x41304C54)
call TriggerAddAction(gg_trg_sanlianhengda_2, function Trig_sanlianhengda_2Actions)
endfunction
function Trig_sanlianhengda_2_5Actions takes nothing returns nothing
if ( ( IsUnitPausedBJ(udg_Danwei[122]) == false ) ) then
if ( ( udg_Zhengshu[123] == 26 ) ) then
set udg_Zhengshu[123]=( udg_Zhengshu[123] - 1 )
set udg_Dian[89]=GetUnitLoc(udg_Danwei[122])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[122]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304B4F)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_Danwei[122])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
call StartTimerBJ(udg_Times[123], true, 0.03)
call SetUnitAnimationByIndex(udg_Danwei[122], 7)
else
if ( ( IsUnitType(udg_Danwei[122], UNIT_TYPE_DEAD) == false ) and ( udg_Zhengshu[123] > 10 ) ) then
set udg_Zhengshu[123]=( udg_Zhengshu[123] - 1 )
set udg_Dian[122]=GetUnitLoc(udg_Danwei[122])
set udg_Dian[123]=PolarProjectionBJ(udg_Dian[122], ( udg_Shishu[122] / 15.00 ), udg_Shishu[123])
if ( ( IsTerrainPathableBJ(udg_Dian[122], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_Danwei[122], GetLocationX(udg_Dian[123]))
call SetUnitY(udg_Danwei[122], GetLocationY(udg_Dian[123]))
else
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\LichMissile\\LichMissile.mdl", udg_Danwei[122], "hand right"))
call RemoveLocation(udg_Dian[122])
call RemoveLocation(udg_Dian[123])
if ( ( udg_Zhengshu[123] == 10 ) ) then
set udg_Dian[122]=GetUnitLoc(udg_Danwei[123])
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\StormBolt\\StormBoltMissile.mdl", udg_Danwei[123], "chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\GryphonRiderMissile\\GryphonRiderMissile.mdl", udg_Danwei[123], "chest"))
call UnitDamageTarget(udg_Danwei[122], udg_Danwei[123], ( ( ( ( 0.00 + ( 20.00 * I2R(GetUnitAbilityLevel(udg_Danwei[122], 0x41304C55)) ) ) + ( 1.00 * I2R(GetHeroAgi(udg_Danwei[122], true)) ) ) * 1.00 ) * 1.00 ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_ROCK_HEAVY_BASH)
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[122]), 0x65303130, udg_Dian[122], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41303551)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_Danwei[123])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[122])
set udg_Zhengshu[126]=1
if ( ( IsUnitType(udg_Danwei[123], UNIT_TYPE_DEAD) == true ) ) then
call UnitRemoveAbility(udg_Danwei[122], 0x41304C56)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_Danwei[122]), 0x41304C54, true)
else
endif
else
endif
else
if ( ( udg_Zhengshu[126] == 1 ) and ( udg_Zhengshu[123] > 0 ) ) then
set udg_Zhengshu[123]=( udg_Zhengshu[123] - 1 )
set udg_Dian[122]=GetUnitLoc(udg_Danwei[123])
set udg_Dian[123]=PolarProjectionBJ(udg_Dian[122], ( ( I2R(udg_Zhengshu[123]) + 5.00 ) * 5.00 ), udg_Shishu[123])
if ( ( IsTerrainPathableBJ(udg_Dian[122], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_Danwei[123], GetLocationX(udg_Dian[123]))
call SetUnitY(udg_Danwei[123], GetLocationY(udg_Dian[123]))
else
endif
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl", udg_Dian[122]))
call RemoveLocation(udg_Dian[122])
call RemoveLocation(udg_Dian[123])
else
call PauseTimer(udg_Times[123])
endif
endif
endif
else
endif
endfunction
function InitTrig_sanlianhengda_2_5 takes nothing returns nothing
set gg_trg_sanlianhengda_2_5=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_sanlianhengda_2_5, udg_Times[123])
call TriggerAddAction(gg_trg_sanlianhengda_2_5, function Trig_sanlianhengda_2_5Actions)
endfunction
function Trig_sanlianhengda_2_9Actions takes nothing returns nothing
call UnitRemoveAbility(udg_Danwei[122], 0x41304C56)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_Danwei[122]), 0x41304C54, true)
endfunction
function InitTrig_sanlianhengda_2_9 takes nothing returns nothing
set gg_trg_sanlianhengda_2_9=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_sanlianhengda_2_9, udg_Times[126])
call TriggerAddAction(gg_trg_sanlianhengda_2_9, function Trig_sanlianhengda_2_9Actions)
endfunction
function Trig_sanlianhengda_3Actions takes nothing returns nothing
set udg_Zhengshu[124]=26
call PauseTimer(udg_Times[126])
call StartTimerBJ(udg_Times[124], false, 0.00)
call StartTimerBJ(udg_Times[127], false, 45.00)
endfunction
function InitTrig_sanlianhengda_3 takes nothing returns nothing
set gg_trg_sanlianhengda_3=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_sanlianhengda_3 , 3 , 0x41304C56)
call TriggerAddAction(gg_trg_sanlianhengda_3, function Trig_sanlianhengda_3Actions)
endfunction
function Trig_sanlianhengda_3_5Actions takes nothing returns nothing
if ( ( IsUnitType(udg_Danwei[122], UNIT_TYPE_TAUREN) == false ) and ( IsUnitPausedBJ(udg_Danwei[122]) == false ) ) then
if ( ( udg_Zhengshu[124] == 26 ) ) then
set udg_Zhengshu[124]=( udg_Zhengshu[124] - 1 )
set udg_Dian[89]=GetUnitLoc(udg_Danwei[122])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[122]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304B56)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_Danwei[122])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
call StartTimerBJ(udg_Times[124], true, 0.03)
call SetUnitAnimationByIndex(udg_Danwei[122], 9)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Invisibility\\InvisibilityTarget.mdl", udg_Danwei[122], "hand right"))
else
if ( ( IsUnitType(udg_Danwei[122], UNIT_TYPE_DEAD) == false ) and ( udg_Zhengshu[124] > 5 ) ) then
set udg_Zhengshu[124]=( udg_Zhengshu[124] - 1 )
if ( ( udg_Zhengshu[124] == 5 ) ) then
set udg_Dian[122]=GetUnitLoc(udg_Danwei[122])
set udg_Dian[123]=GetUnitLoc(udg_Danwei[123])
set udg_Shishu[122]=( DistanceBetweenPoints(udg_Dian[122], udg_Dian[123]) - 100.00 )
set udg_Shishu[123]=AngleBetweenPoints(udg_Dian[122], udg_Dian[123])
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Undead\\ImpaleTargetDust\\ImpaleTargetDust.mdl", udg_Dian[122]))
call RemoveLocation(udg_Dian[122])
call RemoveLocation(udg_Dian[123])
else
endif
else
if ( ( IsUnitType(udg_Danwei[122], UNIT_TYPE_DEAD) == false ) and ( udg_Zhengshu[124] > 0 ) ) then
set udg_Zhengshu[124]=( udg_Zhengshu[124] - 1 )
set udg_Dian[122]=GetUnitLoc(udg_Danwei[122])
set udg_Dian[123]=PolarProjectionBJ(udg_Dian[122], ( udg_Shishu[122] / 5.00 ), udg_Shishu[123])
if ( ( IsTerrainPathableBJ(udg_Dian[122], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_Danwei[122], GetLocationX(udg_Dian[123]))
call SetUnitY(udg_Danwei[122], GetLocationY(udg_Dian[123]))
else
endif
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", udg_Dian[122]))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\LichMissile\\LichMissile.mdl", udg_Danwei[122], "hand right"))
call RemoveLocation(udg_Dian[122])
call RemoveLocation(udg_Dian[123])
if ( ( udg_Zhengshu[124] == 0 ) ) then
set udg_Dian[122]=GetUnitLoc(udg_Danwei[123])
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[122]), 0x65303335, udg_Dian[122], udg_Shishu[123])
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 0.50)
call SetUnitScale(udg_danwei2[1], 0.80, 0.80, 0.80)
set udg_danwei2[1]=null
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\GryphonRiderMissile\\GryphonRiderMissile.mdl", udg_Danwei[123], "chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\StormBolt\\StormBoltMissile.mdl", udg_Danwei[123], "chest"))
call UnitDamageTarget(udg_Danwei[122], udg_Danwei[123], ( ( ( ( 0.00 + ( 20.00 * I2R(GetUnitAbilityLevel(udg_Danwei[122], 0x41304C55)) ) ) + ( 2.00 * I2R(GetHeroAgi(udg_Danwei[122], true)) ) ) * 1.00 ) * 1.00 ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_ROCK_HEAVY_BASH)
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[122]), 0x65303130, udg_Dian[122], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41303551)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_Danwei[123])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[122])
else
endif
else
call PauseTimer(udg_Times[124])
endif
endif
endif
else
endif
endfunction
function InitTrig_sanlianhengda_3_5 takes nothing returns nothing
set gg_trg_sanlianhengda_3_5=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_sanlianhengda_3_5, udg_Times[124])
call TriggerAddAction(gg_trg_sanlianhengda_3_5, function Trig_sanlianhengda_3_5Actions)
endfunction
function Trig_sanlianhengda_4Actions takes nothing returns nothing
call UnitRemoveAbility(udg_Danwei[122], 0x41304C54)
call UnitRemoveAbility(udg_Danwei[122], 0x41304C56)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_Danwei[122]), 0x41304C54, true)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_Danwei[122]), 0x41304C55, true)
endfunction
function InitTrig_sanlianhengda_4 takes nothing returns nothing
set gg_trg_sanlianhengda_4=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_sanlianhengda_4, udg_Times[127])
call TriggerAddAction(gg_trg_sanlianhengda_4, function Trig_sanlianhengda_4Actions)
endfunction
function Trig_rougou_1Actions takes nothing returns nothing
set udg_danwei[175]=GetTriggerUnit()
set udg_dian[133]=GetSpellTargetLoc()
set udg_Zhengshu[149]=2
call StartTimerBJ(udg_Times[149], false, 0.00)
endfunction
function InitTrig_rougou_1 takes nothing returns nothing
set gg_trg_rougou_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_rougou_1 , 3 , 0x41303253)
call TriggerAddAction(gg_trg_rougou_1, function Trig_rougou_1Actions)
endfunction
function Trig_rougou_2Func001Func007Func010A takes nothing returns nothing
set udg_danwei[328]=GetEnumUnit()
if ( ( udg_rogou[101] == null ) and ( IsUnitType(udg_danwei[328], UNIT_TYPE_FLYING) == false ) and ( ( IsUnitType(udg_danwei[328], UNIT_TYPE_STRUCTURE) == true ) or ( GetUnitDefaultMoveSpeed(udg_danwei[328]) > 0.00 ) ) and ( IsUnitType(udg_danwei[328], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei[328], UNIT_TYPE_DEAD) == false ) and ( udg_danwei[328] != udg_danwei[175] ) ) then
set udg_rogou[101]=udg_danwei[328]
if ( ( udg_zhengshu[81] < 25 ) ) then
set udg_zhengshu[81]=( 50 - udg_zhengshu[81] )
else
endif
if ( ( IsUnitType(udg_danwei[328], UNIT_TYPE_STRUCTURE) == true ) ) then
set udg_zhengshu[82]=1
call SetUnitTimeScale(udg_rogou[100], 0.00)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\GlaiveMissile\\GlaiveMissileTarget.mdl", udg_danwei[328], "chest"))
else
endif
if ( ( IsUnitType(udg_danwei[328], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitEnemy(udg_danwei[328], GetOwningPlayer(udg_danwei[175])) == true ) ) then
call UnitDamageTarget(udg_danwei[175], udg_danwei[328], ( 2.00 * I2R(GetHeroStr(udg_danwei[175], true)) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_FORCE, WEAPON_TYPE_METAL_LIGHT_SLICE)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl", udg_danwei[328], "chest"))
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", udg_danwei[328], "chest"))
else
endif
else
endif
set udg_danwei[328]=null
endfunction
function Trig_rougou_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_zhengshu[81] < 50 ) ) then
set udg_dian[242]=GetUnitLoc(udg_rogou[100])
set udg_zhengshu[81]=( udg_zhengshu[81] + 1 )
if ( ( udg_rogou[101] != null ) and ( IsUnitType(udg_rogou[101], UNIT_TYPE_STRUCTURE) == true ) ) then
if ( ( udg_rogou[udg_zhengshu[82]] != null ) ) then
set udg_dian[243]=GetUnitLoc(udg_rogou[udg_zhengshu[82]])
call RemoveUnit(udg_rogou[udg_zhengshu[82]])
set udg_rogou[udg_zhengshu[82]]=null
call SetUnitX(udg_danwei[175], GetLocationX(udg_dian[243]))
call SetUnitY(udg_danwei[175], GetLocationY(udg_dian[243]))
set udg_zhengshu[82]=( udg_zhengshu[82] + 1 )
else
endif
else
if ( ( udg_zhengshu[81] < 25 ) ) then
set udg_dian[243]=PolarProjectionBJ(udg_dian[242], 50.00, GetUnitFacing(udg_rogou[100]))
set udg_rogou[udg_zhengshu[81]]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[175]), 0x75303030, udg_dian[242], GetUnitFacing(udg_rogou[100]))
call UnitAddAbility(udg_rogou[udg_zhengshu[81]], 0x41726176)
call s__maphack_SetHeight(udg_rogou[udg_zhengshu[81]] , 50.00 , 0.00)
set udg_zhengshu[82]=( udg_zhengshu[82] + 1 )
else
set udg_dian[243]=GetUnitLoc(udg_rogou[( 51 - udg_zhengshu[81] )])
call RemoveUnit(udg_rogou[( 51 - udg_zhengshu[81] )])
set udg_rogou[( 51 - udg_zhengshu[81] )]=null
set udg_zhengshu[82]=( udg_zhengshu[82] - 1 )
endif
call SetUnitX(udg_rogou[100], GetLocationX(udg_dian[243]))
call SetUnitY(udg_rogou[100], GetLocationY(udg_dian[243]))
if ( ( udg_rogou[101] != null ) ) then
call SetUnitX(udg_rogou[101], GetLocationX(udg_dian[243]))
call SetUnitY(udg_rogou[101], GetLocationY(udg_dian[243]))
if ( ( IsUnitEnemy(udg_danwei[175], GetOwningPlayer(udg_rogou[101])) == true ) ) then
call UnitDamageTarget(udg_danwei[175], udg_rogou[101], ( 3.00 + ( I2R(GetUnitAbilityLevel(udg_danwei[175], 0x41303253)) * 3.00 ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodFootman.mdl", udg_rogou[101], "chest"))
else
endif
else
endif
set udg_dian[244]=GetUnitLoc(udg_danwei[175])
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=udg_zhengshu[82]
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_dian[245]=PolarProjectionBJ(udg_dian[244], ( 50.00 * I2R(bj_forLoopAIndex) ), GetUnitFacing(udg_danwei[175]))
set udg_dian[246]=GetUnitLoc(udg_rogou[bj_forLoopAIndex])
set udg_dian[247]=PolarProjectionBJ(udg_dian[245], ( DistanceBetweenPoints(udg_dian[245], udg_dian[246]) * ( 1.00 - ( 1 / Pow(I2R(bj_forLoopAIndex), 1.00) ) ) ), AngleBetweenPoints(udg_dian[245], udg_dian[246]))
call SetUnitX(udg_rogou[bj_forLoopAIndex], GetLocationX(udg_dian[247]))
call SetUnitY(udg_rogou[bj_forLoopAIndex], GetLocationY(udg_dian[247]))
if ( ( udg_rogou[( bj_forLoopAIndex + 1 )] != null ) ) then
call YDWESetUnitFacingToFaceUnitTimedNull(udg_rogou[bj_forLoopAIndex] , udg_rogou[( bj_forLoopAIndex + 1 )] , 0)
else
call YDWESetUnitFacingToFaceUnitTimedNull(udg_rogou[bj_forLoopAIndex] , udg_rogou[100] , 0)
endif
call RemoveLocation(udg_dian[245])
call RemoveLocation(udg_dian[246])
call RemoveLocation(udg_dian[247])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call RemoveLocation(udg_dian[244])
set udg_danweizu[61]=YDWEGetUnitsInRangeOfLocAllNull(150.00 , udg_dian[242])
call ForGroupBJ(udg_danweizu[61], function Trig_rougou_2Func001Func007Func010A)
call DestroyGroup(udg_danweizu[61])
endif
call RemoveLocation(udg_dian[242])
call RemoveLocation(udg_dian[243])
else
if ( ( udg_rogou[101] != null ) and ( IsUnitType(udg_rogou[101], UNIT_TYPE_HERO) == true ) and ( GetUnitTypeId(udg_rogou[101]) != 0x4F303030 ) and ( udg_Zhengshu[15] == 0 ) ) then
call s__baka_IssueTargetOrderById2(udg_danwei[175] , 852668 , udg_rogou[101])
else
endif
call RemoveUnit(udg_rogou[100])
set udg_rogou[100]=null
set udg_rogou[101]=null
set udg_danwei[175]=null
call PauseTimer(udg_jishiqi[91])
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_rougou_2 takes nothing returns nothing
set gg_trg_rougou_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_rougou_2, udg_jishiqi[91])
call TriggerAddAction(gg_trg_rougou_2, function Trig_rougou_2Actions)
endfunction
function Trig_rougou_3Actions takes nothing returns nothing
if ( ( udg_Zhengshu[149] == 2 ) ) then
set udg_Zhengshu[149]=( udg_Zhengshu[149] - 1 )
set udg_Dian[89]=GetUnitLoc(udg_danwei[175])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[175]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304C47)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_danwei[175])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
call SetUnitAnimationByIndex(udg_danwei[175], 2)
call SetUnitTimeScale(udg_danwei[175], 1.50)
call StartTimerBJ(udg_Times[149], false, 0.30)
else
if ( ( udg_Zhengshu[149] == 1 ) ) then
call SetUnitTimeScale(udg_danwei[175], 1.00)
set udg_Zhengshu[149]=( udg_Zhengshu[149] - 1 )
set udg_dian[242]=GetUnitLoc(udg_danwei[175])
set udg_rogou[100]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[175]), 0x75303031, udg_dian[242], AngleBetweenPoints(udg_dian[242], udg_dian[133]))
call GroupAddUnit(udg_DAZE[0], udg_rogou[100])
call UnitAddAbility(udg_rogou[100], 0x41726176)
call s__maphack_SetHeight(udg_rogou[100] , 50.00 , 0.00)
call UnitRemoveAbility(udg_rogou[100], 0x41726176)
set udg_zhengshu[81]=0
set udg_zhengshu[82]=0
call StartTimerBJ(udg_jishiqi[91], true, 0.03)
call RemoveLocation(udg_dian[242])
call RemoveLocation(udg_dian[133])
else
endif
endif
endfunction
function InitTrig_rougou_3 takes nothing returns nothing
set gg_trg_rougou_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_rougou_3, udg_Times[149])
call TriggerAddAction(gg_trg_rougou_3, function Trig_rougou_3Actions)
endfunction
function Trig_guishou0Conditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41303333 ) )
endfunction
function Trig_guishou0Actions takes nothing returns nothing
if ( ( GetTriggerUnit() == GetSpellTargetUnit() ) ) then
if ( ( udg_Zhengshu[15] == 0 ) ) then
set udg_Zhengshu[15]=1
call DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, 10.00, "TRIGSTR_2563")
else
set udg_Zhengshu[15]=0
call DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()), 0, 0, 10.00, "TRIGSTR_2587")
endif
call IssueImmediateOrderById(GetTriggerUnit(), 851972)
else
endif
endfunction
function InitTrig_guishou0 takes nothing returns nothing
set gg_trg_guishou0=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_guishou0, EVENT_PLAYER_UNIT_SPELL_CHANNEL)
call TriggerAddCondition(gg_trg_guishou0, Condition(function Trig_guishou0Conditions))
call TriggerAddAction(gg_trg_guishou0, function Trig_guishou0Actions)
endfunction
function Trig_guishouConditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41303333 ) )
endfunction
function Trig_guishouActions takes nothing returns nothing
set udg_danwei[176]=GetTriggerUnit()
set udg_danwei[211]=GetSpellTargetUnit()
set udg_Zhengshu[148]=2
call StartTimerBJ(udg_Times[148], false, 0.00)
endfunction
function InitTrig_guishou takes nothing returns nothing
set gg_trg_guishou=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_guishou, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_guishou, Condition(function Trig_guishouConditions))
call TriggerAddAction(gg_trg_guishou, function Trig_guishouActions)
endfunction
function Trig_guishou2Actions takes nothing returns nothing
set udg_zhengshu[57]=( udg_zhengshu[57] + 1 )
if ( ( udg_zhengshu[57] <= 50 ) and ( UnitHasBuffBJ(udg_danwei[211], 0x42303046) == true ) and ( IsUnitType(udg_danwei[211], UNIT_TYPE_DEAD) == false ) ) then
call UnitDamageTarget(udg_danwei[176], udg_danwei[211], ( I2R(GetHeroStr(udg_danwei[176], true)) * 0.03 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call SetUnitX(udg_danwei[211], GetLocationX(udg_dian[134]))
call SetUnitY(udg_danwei[211], GetLocationY(udg_dian[134]))
call SetUnitX(udg_danwei[177], GetLocationX(udg_dian[134]))
call SetUnitY(udg_danwei[177], GetLocationY(udg_dian[134]))
else
call PauseTimer(udg_jishiqi[46])
call RemoveLocation(udg_dian[134])
call KillUnit(udg_danwei[177])
set udg_danwei[176]=null
set udg_danwei[177]=null
set udg_danwei[211]=null
endif
endfunction
function InitTrig_guishou2 takes nothing returns nothing
set gg_trg_guishou2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_guishou2, udg_jishiqi[46])
call TriggerAddAction(gg_trg_guishou2, function Trig_guishou2Actions)
endfunction
function Trig_guishou_exActions takes nothing returns nothing
if ( ( udg_Zhengshu[148] == 2 ) ) then
set udg_Zhengshu[148]=( udg_Zhengshu[148] - 1 )
set udg_Dian[89]=GetUnitLoc(udg_danwei[176])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[176]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x4130475A)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_danwei[176])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
call SetUnitAnimationByIndex(udg_danwei[176], 4)
set udg_dian[134]=GetUnitLoc(udg_danwei[211])
set udg_zhengshu[57]=0
set udg_danwei[177]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[176]), 0x6530315A, udg_dian[134], 0)
call SetUnitTimeScale(udg_danwei[177], 0.60)
call SetUnitAnimation(udg_danwei[177], "birth")
call StopSoundBJ(gg_snd_EntanglingRootsTarget1, false)
call PlaySoundOnUnitBJ(gg_snd_EntanglingRootsTarget1, 100, udg_danwei[176])
call StartTimerBJ(udg_jishiqi[46], true, 0.10)
call StartTimerBJ(udg_Times[148], false, 0.25)
else
if ( ( udg_Zhengshu[148] == 1 ) and ( UnitHasBuffBJ(udg_danwei[211], 0x42303046) == true ) and ( IsUnitType(udg_danwei[176], UNIT_TYPE_DEAD) == false ) ) then
call StartTimerBJ(udg_Times[148], false, 0.25)
set udg_Zhengshu[148]=( udg_Zhengshu[148] - 1 )
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\explosion.mdx", udg_dian[134]))
call IssueImmediateOrderById(udg_danwei[211], 851972)
else
set udg_Zhengshu[148]=0
call UnitDamageTarget(udg_danwei[176], udg_danwei[211], ( I2R(GetHeroStr(udg_danwei[176], true)) * 1.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WOOD_HEAVY_BASH)
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[176]), 0x65303130, udg_dian[134], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304236)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_danwei[211])
set udg_Danwei[92]=null
endif
endif
endfunction
function InitTrig_guishou_ex takes nothing returns nothing
set gg_trg_guishou_ex=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_guishou_ex, udg_Times[148])
call TriggerAddAction(gg_trg_guishou_ex, function Trig_guishou_exActions)
endfunction
function Trig_qiangxingliliangActions takes nothing returns nothing
set udg_danwei[329]=GetTriggerUnit()
call GroupAddUnit(udg_danweizu[63], udg_danwei[329])
call SetUnitVertexColor(udg_danwei[329], 255, 128, 128, 255)
set udg_dian2[337]=GetUnitLoc(udg_danwei[329])
set udg_danwei[329]=null
endfunction
function InitTrig_qiangxingliliang takes nothing returns nothing
set gg_trg_qiangxingliliang=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_qiangxingliliang , 3 , 0x41303456)
call TriggerAddAction(gg_trg_qiangxingliliang, function Trig_qiangxingliliangActions)
endfunction
function Trig_qiangxingliliang_2Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu[63]) == false ) )
endfunction
function Trig_qiangxingliliang_2Func001Func002Func001Func004A takes nothing returns nothing
set udg_danwei[328]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[328], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei[328], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei[328], UNIT_TYPE_DEAD) == false ) and ( IsUnitInGroup(udg_danwei[328], udg_danweizu2[369]) == false ) and ( GetUnitTypeId(udg_danwei[328]) != 0x6530304F ) and ( ( IsUnitType(udg_danwei[328], UNIT_TYPE_HERO) == false ) or ( IsUnitEnemy(udg_danwei[328], GetOwningPlayer(udg_danwei[329])) == true ) ) ) then
set udg_dian[243]=GetUnitLoc(udg_danwei[328])
set udg_dian2[0]=PolarProjectionBJ(udg_dian[243], 8.00, AngleBetweenPoints(udg_dian[242], udg_dian[243]))
if ( ( IsUnitType(udg_danwei[328], UNIT_TYPE_HERO) == true ) ) then
if ( ( IsTerrainPathableBJ(udg_dian2[0], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitPositionLoc(udg_danwei[328], udg_dian2[0])
else
endif
else
if ( ( IsUnitEnemy(udg_danwei[328], GetOwningPlayer(udg_danwei[329])) == true ) ) then
call UnitDamageTarget(udg_danwei[329], udg_danwei[328], 8.00, true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call SetUnitLifeBJ(udg_danwei[329], ( GetUnitState(udg_danwei[329], UNIT_STATE_LIFE) + ( ( 0.40 * I2R(GetUnitAbilityLevel(udg_danwei[329], 0x41303456)) ) - 0.40 ) ))
else
endif
if ( ( IsTerrainPathableBJ(udg_dian[244], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei[328], GetLocationX(udg_dian2[0]))
call SetUnitY(udg_danwei[328], GetLocationY(udg_dian2[0]))
else
endif
endif
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", udg_dian[243]))
call RemoveLocation(udg_dian[243])
call RemoveLocation(udg_dian2[0])
else
endif
set udg_danwei[328]=null
endfunction
function Trig_qiangxingliliang_2Func001A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei[329]=GetEnumUnit()
if ( ( UnitHasBuffBJ(udg_danwei[329], 0x4230304B) == true ) ) then
if ( ( IsUnitPausedBJ(udg_danwei[329]) == false ) ) then
set udg_dian[242]=GetUnitLoc(udg_danwei[329])
if ( ( DistanceBetweenPoints(udg_dian2[337], udg_dian[242]) <= 250.00 ) and ( ( ( ( ( AngleBetweenPoints(udg_dian2[337], udg_dian[242]) + 180.00 ) - GetUnitFacing(udg_danwei[329]) ) >= - 60.00 ) and ( ( ( AngleBetweenPoints(udg_dian2[337], udg_dian[242]) + 180.00 ) - GetUnitFacing(udg_danwei[329]) ) <= 60.00 ) ) or ( ( ( AngleBetweenPoints(udg_dian2[337], udg_dian[242]) + 180.00 ) - GetUnitFacing(udg_danwei[329]) ) >= 300.00 ) or ( ( ( AngleBetweenPoints(udg_dian2[337], udg_dian[242]) + 180.00 ) - GetUnitFacing(udg_danwei[329]) ) <= - 300.00 ) ) ) then
call SetUnitX(udg_danwei[329], GetLocationX(udg_dian2[337]))
call SetUnitY(udg_danwei[329], GetLocationY(udg_dian2[337]))
else
endif
set udg_danweizu[61]=YDWEGetUnitsInRangeOfLocAllNull(200.00 , udg_dian[242])
call ForGroupBJ(udg_danweizu[61], function Trig_qiangxingliliang_2Func001Func002Func001Func004A)
call UnitRemoveBuffsEx(udg_danwei[329], false, true, false, false, false, false, true)
call UnitRemoveAbility(udg_danwei[329], 0x4253544E)
call UnitRemoveAbility(udg_danwei[329], 0x42505345)
call DestroyGroup(udg_danweizu[61])
call RemoveLocation(udg_dian[242])
else
endif
call RemoveLocation(udg_dian2[337])
set udg_dian2[337]=GetUnitLoc(udg_danwei[329])
else
call SetUnitLifeBJ(udg_danwei[329], RMaxBJ(( GetUnitState(udg_danwei[329], UNIT_STATE_LIFE) - ( GetUnitState(udg_danwei[329], UNIT_STATE_MAX_LIFE) * 0.10 ) ), 1.00))
call SetUnitVertexColor(udg_danwei[329], 255, 255, 255, 255)
call GroupRemoveUnit(udg_danweizu[63], udg_danwei[329])
call RemoveLocation(udg_dian2[337])
endif
set udg_danwei[329]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_qiangxingliliang_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu[63], function Trig_qiangxingliliang_2Func001A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_qiangxingliliang_2 takes nothing returns nothing
set gg_trg_qiangxingliliang_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_qiangxingliliang_2, udg_Times[4])
call TriggerAddCondition(gg_trg_qiangxingliliang_2, Condition(function Trig_qiangxingliliang_2Conditions))
call TriggerAddAction(gg_trg_qiangxingliliang_2, function Trig_qiangxingliliang_2Actions)
endfunction
function Trig_fushiwenyi_1Actions takes nothing returns nothing
set udg_danwei[326]=GetTriggerUnit()
set udg_Zhengshu[147]=2
call StartTimerBJ(udg_Times[147], false, 0.00)
endfunction
function InitTrig_fushiwenyi_1 takes nothing returns nothing
set gg_trg_fushiwenyi_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_fushiwenyi_1 , 3 , 0x41304847)
call TriggerAddAction(gg_trg_fushiwenyi_1, function Trig_fushiwenyi_1Actions)
endfunction
function Trig_fushiwenyi_2Func001Func006Func004A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[0], udg_danweizu2[369]) == false ) and ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_DEAD) == true ) or ( IsUnitEnemy(udg_danwei2[0], GetOwningPlayer(udg_danwei[326])) == true ) ) and ( GetUnitAbilityLevel(udg_danwei2[0], 0x416C6F63) != 1 ) ) then
call GroupAddUnit(udg_danweizu[62], udg_danwei2[0])
call UnitDamageTarget(udg_danwei[326], udg_danwei2[0], 20.00, true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_DISEASE, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei2[0]=null
endfunction
function Trig_fushiwenyi_2Func001Func006A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei[327]=GetEnumUnit()
set udg_dian[241]=GetUnitLoc(udg_danwei[327])
set udg_danweizu[61]=YDWEGetUnitsInRangeOfLocAllNull(300.00 , udg_dian[241])
call ForGroupBJ(udg_danweizu[61], function Trig_fushiwenyi_2Func001Func006Func004A)
call DestroyGroup(udg_danweizu[61])
call UnitDamageTarget(udg_danwei[326], udg_danwei[327], 20.00, true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_DISEASE, WEAPON_TYPE_WHOKNOWS)
if ( ( IsUnitType(udg_danwei[327], UNIT_TYPE_DEAD) == false ) ) then
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Demon\\DemonLargeDeathExplode\\DemonLargeDeathExplode.mdl", udg_dian[241]))
else
endif
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\ChimaeraAcidMissile\\ChimaeraAcidMissile.mdl", udg_dian[241]))
set udg_danwei[327]=null
call RemoveLocation(udg_dian[241])
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_fushiwenyi_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_zhengshu[80] < 20 ) ) then
set udg_zhengshu[80]=( udg_zhengshu[80] + 1 )
call ForGroupBJ(udg_danweizu[62], function Trig_fushiwenyi_2Func001Func006A)
else
call PauseTimer(udg_jishiqi[90])
call DestroyGroup(udg_danweizu[62])
set udg_danwei[326]=null
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_fushiwenyi_2 takes nothing returns nothing
set gg_trg_fushiwenyi_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_fushiwenyi_2, udg_jishiqi[90])
call TriggerAddAction(gg_trg_fushiwenyi_2, function Trig_fushiwenyi_2Actions)
endfunction
function Trig_fushiwenyi_exFunc001Func001Func009A takes nothing returns nothing
set udg_danwei[327]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[327], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei[327], udg_danweizu2[369]) == false ) and ( IsUnitInGroup(udg_danwei[327], udg_danweizu[62]) == false ) and ( ( IsUnitType(udg_danwei[327], UNIT_TYPE_DEAD) == true ) or ( IsUnitEnemy(udg_danwei[327], GetOwningPlayer(udg_danwei[326])) == true ) ) and ( GetUnitAbilityLevel(udg_danwei[327], 0x416C6F63) != 1 ) ) then
call UnitDamageTarget(udg_danwei[326], udg_danwei[327], 200.00, true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call GroupAddUnit(udg_danweizu[62], udg_danwei[327])
else
endif
set udg_danwei[327]=null
endfunction
function Trig_fushiwenyi_exActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_Zhengshu[147] == 2 ) ) then
set udg_Zhengshu[147]=( udg_Zhengshu[147] - 1 )
set udg_Dian[89]=GetUnitLoc(udg_danwei[326])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[326]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304B52)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_danwei[326])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
call SetUnitAnimationByIndex(udg_danwei[326], 7)
call StartTimerBJ(udg_Times[147], false, 0.70)
else
if ( ( udg_Zhengshu[147] == 1 ) ) then
call StartTimerBJ(udg_Times[147], false, 0.30)
set udg_Zhengshu[147]=( udg_Zhengshu[147] - 1 )
call PlaySoundOnUnitBJ(gg_snd_AbominationAlternateDeath1, 100, udg_danwei[326])
set udg_dian[241]=GetUnitLoc(udg_danwei[326])
set udg_danweizu[62]=CreateGroup()
set udg_danweizu[61]=YDWEGetUnitsInRangeOfLocAllNull(500.00 , udg_dian[241])
call ForGroupBJ(udg_danweizu[61], function Trig_fushiwenyi_exFunc001Func001Func009A)
set udg_aXUNHUAN[82]=1
loop
exitwhen udg_aXUNHUAN[82] > 12
set udg_dian[242]=PolarProjectionBJ(udg_dian[241], 450.00, ( 30.00 * I2R(udg_aXUNHUAN[82]) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\ChimaeraAcidMissile\\ChimaeraAcidMissile.mdl", udg_dian[242]))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Demon\\DemonLargeDeathExplode\\DemonLargeDeathExplode.mdl", udg_dian[242]))
call RemoveLocation(udg_dian[242])
set udg_aXUNHUAN[82]=udg_aXUNHUAN[82] + 1
endloop
set udg_aXUNHUAN[84]=1
loop
exitwhen udg_aXUNHUAN[84] > 9
set udg_dian[242]=PolarProjectionBJ(udg_dian[241], 300.00, ( 40.00 * I2R(udg_aXUNHUAN[84]) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\ChimaeraAcidMissile\\ChimaeraAcidMissile.mdl", udg_dian[242]))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Demon\\DemonLargeDeathExplode\\DemonLargeDeathExplode.mdl", udg_dian[242]))
call RemoveLocation(udg_dian[242])
set udg_aXUNHUAN[84]=udg_aXUNHUAN[84] + 1
endloop
set udg_aXUNHUAN[85]=1
loop
exitwhen udg_aXUNHUAN[85] > 6
set udg_dian[242]=PolarProjectionBJ(udg_dian[241], 200.00, ( 60.00 * I2R(udg_aXUNHUAN[85]) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\ChimaeraAcidMissile\\ChimaeraAcidMissile.mdl", udg_dian[242]))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Demon\\DemonLargeDeathExplode\\DemonLargeDeathExplode.mdl", udg_dian[242]))
call RemoveLocation(udg_dian[242])
set udg_aXUNHUAN[85]=udg_aXUNHUAN[85] + 1
endloop
call DestroyGroup(udg_danweizu[61])
call StartTimerBJ(udg_jishiqi[90], true, 0.50)
set udg_zhengshu[80]=0
call RemoveLocation(udg_dian[241])
else
call ResetUnitAnimation(udg_danwei[326])
endif
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_fushiwenyi_ex takes nothing returns nothing
set gg_trg_fushiwenyi_ex=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_fushiwenyi_ex, udg_Times[147])
call TriggerAddAction(gg_trg_fushiwenyi_ex, function Trig_fushiwenyi_exActions)
endfunction
function Trig_tufubaozhaConditions takes nothing returns boolean
return ( ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true ) and ( GetLearnedSkill() == 0x41304847 ) )
endfunction
function Trig_tufubaozhaActions takes nothing returns nothing
set udg_Danwei[146]=GetTriggerUnit()
call TriggerRegisterUnitEvent(gg_trg_tufubaozha_2, GetTriggerUnit(), EVENT_UNIT_DEATH)
endfunction
function InitTrig_tufubaozha takes nothing returns nothing
set gg_trg_tufubaozha=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_tufubaozha, EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(gg_trg_tufubaozha, Condition(function Trig_tufubaozhaConditions))
call TriggerAddAction(gg_trg_tufubaozha, function Trig_tufubaozhaActions)
endfunction
function Trig_tufubaozha_2Func006A takes nothing returns nothing
if ( ( IsUnitType(GetEnumUnit(), UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(GetEnumUnit(), UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitDeadBJ(GetEnumUnit()) == false ) and ( IsUnitEnemy(GetEnumUnit(), GetOwningPlayer(udg_Danwei[146])) == true ) ) then
call UnitDamageTarget(udg_Danwei[146], GetEnumUnit(), ( ( ( 0.00 + ( 0.25 * GetUnitState(udg_Danwei[146], UNIT_STATE_MAX_LIFE) ) ) * 1.00 ) * 1.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
call GroupRemoveUnit(udg_Danweizu[148], GetEnumUnit())
endif
endfunction
function Trig_tufubaozha_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_Dian[147]=GetUnitLoc(GetTriggerUnit())
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosDone.mdl", udg_Dian[147]))
set udg_Danwei[147]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[146]), 0x65303756, udg_Dian[147], GetUnitFacing(udg_Danwei[146]))
call UnitApplyTimedLife(udg_Danwei[147], 0x42487765, 1.00)
set udg_Danweizu[148]=YDWEGetUnitsInRangeOfLocAllNull(250.00 , udg_Dian[147])
call ForGroupBJ(udg_Danweizu[148], function Trig_tufubaozha_2Func006A)
set udg_Danwei[147]=null
call ShowUnit(udg_Danwei[146], false)
set udg_Zhengshu[150]=10
call StartTimerBJ(udg_Times[150], true, 0.03)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_tufubaozha_2 takes nothing returns nothing
set gg_trg_tufubaozha_2=CreateTrigger()
call TriggerAddAction(gg_trg_tufubaozha_2, function Trig_tufubaozha_2Actions)
endfunction
function Trig_tufubaozha_3Func001Func004A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[1])
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], ( 0.00 + ( 5.00 * I2R(udg_Zhengshu[150]) ) ), AngleBetweenPoints(udg_Dian[147], udg_dian2[0]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl", udg_dian2[1]))
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[1]))
else
endif
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
endfunction
function Trig_tufubaozha_3Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_Zhengshu[150] > 0 ) ) then
set udg_Zhengshu[150]=( udg_Zhengshu[150] - 1 )
call ForGroupBJ(udg_Danweizu[148], function Trig_tufubaozha_3Func001Func004A)
else
call RemoveLocation(udg_Dian[147])
call GroupClear(udg_Danweizu[148])
call PauseTimer(udg_Times[150])
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_tufubaozha_3 takes nothing returns nothing
set gg_trg_tufubaozha_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_tufubaozha_3, udg_Times[150])
call TriggerAddAction(gg_trg_tufubaozha_3, function Trig_tufubaozha_3Actions)
endfunction
function Trig_kenyao_0Actions takes nothing returns nothing
set udg_Danwei[146]=GetTriggerUnit()
set udg_dian2[0]=GetUnitLoc(udg_Danwei[146])
set udg_Dian[146]=GetSpellTargetLoc()
call SetUnitFacing(udg_Danwei[146], ( AngleBetweenPoints(udg_dian2[0], udg_Dian[146]) - 10.00 ))
call PlaySoundOnUnitBJ(gg_snd_AbominationPissed5, 100, udg_Danwei[146])
set udg_Zhengshu[146]=22
call StartTimerBJ(udg_Times[146], false, 0.00)
call RemoveLocation(udg_dian2[0])
endfunction
function InitTrig_kenyao_0 takes nothing returns nothing
set gg_trg_kenyao_0=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_kenyao_0 , 3 , 0x41303657)
call TriggerAddAction(gg_trg_kenyao_0, function Trig_kenyao_0Actions)
endfunction
function Trig_kenyaoFunc001Func011Func001Func001A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
call UnitRemoveAbility(udg_danwei2[1], 0x41303658)
call UnitRemoveBuffBJ(0x42303337, udg_danwei2[1])
set udg_danwei2[1]=null
endfunction
function Trig_kenyaoFunc001Func011Func001Func005A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[1])
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], ( 0.50 + ( 0.50 * I2R(udg_Zhengshu[146]) ) ), udg_Shishu[146])
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[1]))
else
endif
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
endfunction
function Trig_kenyaoFunc001Func011Func007Func003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitDeadBJ(udg_danwei2[1]) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_Danwei[146])) == true ) ) then
if ( ( IsUnitInGroup(udg_danwei2[1], udg_Danweizu[147]) == false ) ) then
call UnitDamageTarget(udg_Danwei[146], udg_danwei2[1], ( ( ( ( 0.00 + ( 25.00 * I2R(GetUnitAbilityLevel(udg_Danwei[146], 0x41303657)) ) ) + ( 0.08 * GetUnitState(udg_Danwei[146], UNIT_STATE_MAX_LIFE) ) ) * 1.00 ) * 1.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call UnitAddAbility(udg_danwei2[1], 0x41303658)
call GroupAddUnit(udg_Danweizu[147], udg_danwei2[1])
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl", udg_danwei2[1], "chest"))
else
endif
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_kenyaoActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_Zhengshu[146] == 22 ) ) then
set udg_Zhengshu[146]=( udg_Zhengshu[146] - 1 )
set udg_Dian[89]=GetUnitLoc(udg_Danwei[146])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[146]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x4130475A)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_Danwei[146])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
call SetUnitAnimationByIndex(udg_Danwei[146], 6)
call StartTimerBJ(udg_Times[146], false, 0.70)
else
if ( ( udg_Zhengshu[146] == 21 ) ) then
call StartTimerBJ(udg_Times[146], true, 0.04)
set udg_Zhengshu[146]=( udg_Zhengshu[146] - 1 )
set udg_dian2[0]=GetUnitLoc(udg_Danwei[146])
set udg_Shishu[146]=AngleBetweenPoints(udg_dian2[0], udg_Dian[146])
set udg_aXUNHUAN[7]=1
loop
exitwhen udg_aXUNHUAN[7] > 15
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], ( 125.00 + ( 20.00 * I2R(udg_aXUNHUAN[7]) ) ), AngleBetweenPoints(udg_dian2[0], udg_Dian[146]))
set udg_Danweizu[146]=YDWEGetUnitsInRangeOfLocAllNull(( 80.00 + ( 10.00 * I2R(udg_aXUNHUAN[7]) ) ) , udg_dian2[1])
call ForGroupBJ(udg_Danweizu[146], function Trig_kenyaoFunc001Func011Func007Func003A)
call DestroyGroup(udg_Danweizu[134])
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[146]), 0x65303433, udg_dian2[1], AngleBetweenPoints(udg_Dian[146], udg_dian2[1]))
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 1.00)
call s__maphack_SetHeight(udg_danwei2[1] , ( 50.00 + ( 8.00 * I2R(udg_aXUNHUAN[7]) ) ) , 0.00)
call SetUnitScale(udg_danwei2[1], ( 0.80 + ( 0.20 * I2R(udg_aXUNHUAN[7]) ) ), ( 0.80 + ( 0.20 * I2R(udg_aXUNHUAN[7]) ) ), ( 0.80 + ( 0.20 * I2R(udg_aXUNHUAN[7]) ) ))
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[1])
set udg_aXUNHUAN[7]=udg_aXUNHUAN[7] + 1
endloop
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_Dian[146])
else
if ( ( udg_Zhengshu[146] > 0 ) ) then
set udg_Zhengshu[146]=( udg_Zhengshu[146] - 1 )
call ForGroupBJ(udg_Danweizu[147], function Trig_kenyaoFunc001Func011Func001Func005A)
else
call ForGroupBJ(udg_Danweizu[147], function Trig_kenyaoFunc001Func011Func001Func001A)
call GroupClear(udg_Danweizu[147])
if ( ( IsUnitType(udg_Danwei[146], UNIT_TYPE_DEAD) == false ) ) then
call ResetUnitAnimation(udg_Danwei[146])
else
endif
call PauseTimer(udg_Times[146])
endif
endif
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_kenyao takes nothing returns nothing
set gg_trg_kenyao=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_kenyao, udg_Times[146])
call TriggerAddAction(gg_trg_kenyao, function Trig_kenyaoActions)
endfunction
function Trig_dianciliqianyin_1Actions takes nothing returns nothing
set udg_danwei[181]=GetTriggerUnit()
set udg_danwei[191]=GetSpellTargetUnit()
set udg_zhengshu[136]=30
call UnitAddAbility(udg_danwei[181], 0x41305038)
call UnitAddAbility(udg_danwei[181], 0x41303147)
call UnitAddAbility(udg_danwei[181], 0x41305037)
call UnitAddAbility(udg_danwei[181], 0x41305039)
call StartTimerBJ(udg_jishiqi[52], true, 0.03)
call StopSoundBJ(gg_snd_ManaFlareStrike, false)
call PlaySoundOnUnitBJ(gg_snd_ManaFlareStrike, 100, udg_danwei[181])
if ( ( udg_Zhengshu[174] == 0 ) ) then
set udg_Zhengshu[174]=1
set udg_Shishu[174]=25.00
else
set udg_Shishu[174]=( udg_Shishu[174] * 1.10 )
set udg_Shishu[174]=( udg_Shishu[174] + ( GetUnitState(udg_danwei[181], UNIT_STATE_MAX_MANA) * ( 0.01 * 0.50 ) ) )
call SetUnitManaBJ(udg_danwei[181], ( GetUnitState(udg_danwei[181], UNIT_STATE_MANA) - ( udg_Shishu[174] - 25.00 ) ))
if ( ( GetUnitState(udg_danwei[181], UNIT_STATE_MANA) < 25.00 ) ) then
set udg_zhengshu[136]=5
else
endif
set udg_Zhengshu[174]=( udg_Zhengshu[174] + 1 )
endif
call PauseTimer(udg_jishiqi[173])
call PauseTimer(udg_jishiqi[174])
call StartTimerBJ(udg_jishiqi[173], false, 10.00)
call StartTimerBJ(udg_jishiqi[174], false, ( 1.00 + ( 0.20 * I2R(GetUnitAbilityLevel(udg_danwei[181], 0x41305036)) ) ))
endfunction
function InitTrig_dianciliqianyin_1 takes nothing returns nothing
set gg_trg_dianciliqianyin_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_dianciliqianyin_1 , 3 , 0x41305036)
call TriggerAddAction(gg_trg_dianciliqianyin_1, function Trig_dianciliqianyin_1Actions)
endfunction
function Trig_dianciliqianyin_2Actions takes nothing returns nothing
set udg_dian[369]=GetUnitLoc(udg_danwei[181])
set udg_dian[371]=GetUnitLoc(udg_danwei[191])
if ( ( ( ( DistanceBetweenPoints(udg_dian[369], udg_dian[371]) < 250.00 ) and ( ( GetUnitTypeId(udg_danwei[191]) == 0x6E65666D ) or ( GetUnitTypeId(udg_danwei[191]) == 0x68636173 ) ) ) or ( ( IsUnitType(udg_danwei[191], UNIT_TYPE_STRUCTURE) == true ) and ( DistanceBetweenPoints(udg_dian[369], udg_dian[371]) < 150.00 ) ) or ( DistanceBetweenPoints(udg_dian[369], udg_dian[371]) < 100.00 ) or ( udg_zhengshu[136] <= 0 ) ) ) then
call UnitRemoveBuffBJ(0x42303351, udg_danwei[181])
call UnitRemoveAbility(udg_danwei[181], 0x41305037)
call UnitRemoveAbility(udg_danwei[181], 0x41303147)
set udg_danwei[191]=null
call PauseTimer(udg_jishiqi[52])
else
set udg_zhengshu[136]=( udg_zhengshu[136] - 1 )
set udg_dian[370]=PolarProjectionBJ(udg_dian[369], ( 25.00 + ( 1.00 * I2R(GetUnitAbilityLevelSwapped(0x41305036, udg_danwei[181])) ) ), AngleBetweenPoints(udg_dian[369], udg_dian[371]))
call SetUnitX(udg_danwei[181], GetLocationX(udg_dian[370]))
call SetUnitY(udg_danwei[181], GetLocationY(udg_dian[370]))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Purge\\PurgeBuffTarget.mdl", udg_danwei[181], "origin"))
call RemoveLocation(udg_dian[370])
endif
call RemoveLocation(udg_dian[369])
call RemoveLocation(udg_dian[371])
endfunction
function InitTrig_dianciliqianyin_2 takes nothing returns nothing
set gg_trg_dianciliqianyin_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_dianciliqianyin_2, udg_jishiqi[52])
call TriggerAddAction(gg_trg_dianciliqianyin_2, function Trig_dianciliqianyin_2Actions)
endfunction
function Trig_dianciliqianyin_3Actions takes nothing returns nothing
set udg_Zhengshu[174]=0
call UnitRemoveBuffBJ(0x42303352, udg_danwei[181])
call UnitRemoveAbility(udg_danwei[181], 0x41305039)
endfunction
function InitTrig_dianciliqianyin_3 takes nothing returns nothing
set gg_trg_dianciliqianyin_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_dianciliqianyin_3, udg_jishiqi[173])
call TriggerAddAction(gg_trg_dianciliqianyin_3, function Trig_dianciliqianyin_3Actions)
endfunction
function Trig_dianciliqianyin_4Actions takes nothing returns nothing
call UnitRemoveAbility(udg_danwei[181], 0x41305038)
endfunction
function InitTrig_dianciliqianyin_4 takes nothing returns nothing
set gg_trg_dianciliqianyin_4=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_dianciliqianyin_4, udg_jishiqi[174])
call TriggerAddAction(gg_trg_dianciliqianyin_4, function Trig_dianciliqianyin_4Actions)
endfunction
function Trig_fangdian_1Actions takes nothing returns nothing
set udg_danwei[181]=GetTriggerUnit()
set udg_dian[146]=GetUnitLoc(udg_danwei[181])
call PlaySoundOnUnitBJ(gg_snd_LightningBolt, 100, udg_danwei[181])
call StartTimerBJ(udg_times[32], true, 0.03)
set udg_zhengshu2[32]=0
set udg_danwei[184]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[181]), 0x65303247, udg_dian[146], 270.00)
call UnitApplyTimedLife(udg_danwei[184], 0x42487765, 1.20)
call RemoveLocation(udg_dian[146])
call UnitAddAbility(udg_danwei[181], 0x41305044)
endfunction
function InitTrig_fangdian_1 takes nothing returns nothing
set gg_trg_fangdian_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_fangdian_1 , 3 , 0x41303143)
call TriggerAddAction(gg_trg_fangdian_1, function Trig_fangdian_1Actions)
endfunction
function Trig_fangdian_2Func002Func008Func003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei[181])) == true ) ) then
if ( ( IsUnitInGroup(udg_danwei2[1], udg_Danweizu[167]) == false ) ) then
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[181]), 0x65303130, udg_dian[146], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41305032)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "slow" , udg_danwei2[1])
set udg_Danwei[92]=null
call GroupAddUnit(udg_Danweizu[167], udg_danwei2[1])
call UnitDamageTarget(udg_danwei[181], udg_danwei2[1], ( ( ( ( 50.00 + ( 40.00 * I2R(GetUnitAbilityLevel(udg_danwei[181], 0x41303143)) ) ) + ( 1.00 * I2R(GetHeroInt(udg_danwei[181], true)) ) ) * 1.00 ) * 1.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\ChimaeraLightningMissile\\ChimaeraLightningMissile.mdl", udg_danwei2[1], "chest"))
else
endif
set udg_dian2[0]=GetUnitLoc(udg_danwei2[1])
if ( ( DistanceBetweenPoints(udg_dian[146], udg_dian2[0]) <= 150.00 ) and ( IsUnitInGroup(udg_danwei2[1], udg_Danweizu[168]) == false ) ) then
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[181]), 0x65303130, udg_dian[146], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304236)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_danwei2[1])
set udg_Danwei[92]=null
call GroupAddUnit(udg_Danweizu[168], udg_danwei2[1])
else
endif
call RemoveLocation(udg_dian2[0])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_fangdian_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_zhengshu2[32] <= 40 ) ) then
set udg_zhengshu2[32]=( udg_zhengshu2[32] + 1 )
set udg_dian[146]=GetUnitLoc(udg_danwei[181])
call SetUnitX(udg_danwei[184], GetLocationX(udg_dian[146]))
call SetUnitY(udg_danwei[184], GetLocationY(udg_dian[146]))
if ( ( udg_zhengshu2[32] <= 35 ) ) then
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(RMinBJ(( 60.00 + ( 40.00 * I2R(udg_zhengshu2[32]) ) ), 350.00) , udg_dian[146])
call ForGroupBJ(udg_xuanqu, function Trig_fangdian_2Func002Func008Func003A)
call DestroyGroup(udg_xuanqu)
else
endif
call RemoveLocation(udg_dian[146])
else
call UnitRemoveAbility(udg_danwei[181], 0x41305044)
call GroupClear(udg_Danweizu[167])
call GroupClear(udg_Danweizu[168])
call PauseTimer(udg_times[32])
set udg_danwei[184]=null
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_fangdian_2 takes nothing returns nothing
set gg_trg_fangdian_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_fangdian_2, udg_times[32])
call TriggerAddAction(gg_trg_fangdian_2, function Trig_fangdian_2Actions)
endfunction
function Trig_fangdian_2_______uFunc003Func008A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call IssueImmediateOrderById(udg_danwei2[1], 851972)
call s__baka_IssueTargetOrderById2(udg_danwei2[0] , 852587 , udg_danwei2[1])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_fangdian_2_______uActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu2[32]=( udg_zhengshu2[32] + 1 )
if ( ( udg_zhengshu2[32] <= 10 ) ) then
set udg_aXUNHUAN[88]=8
loop
exitwhen udg_aXUNHUAN[88] > 15
call SetLightningColor(udg_shandian[udg_aXUNHUAN[88]], 1, 1.00, 1.00, ( 1.00 - ( 0.10 * I2R(udg_zhengshu2[32]) ) ))
set udg_aXUNHUAN[88]=udg_aXUNHUAN[88] + 1
endloop
set udg_dian2[1]=GetUnitLoc(udg_danwei[184])
set udg_dian2[0]=PolarProjectionBJ(udg_dian2[1], GetRandomReal(0, 200.00), GetRandomReal(0, 360.00))
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[184]), 0x65303247, udg_dian2[0], GetRandomReal(0, 360.00))
call s__maphack_SetHeight(udg_danwei2[0] , GetRandomReal(0, 500.00) , 0.00)
call UnitApplyTimedLife(udg_danwei2[0], 0x42487765, 1.00)
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(320.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_fangdian_2_______uFunc003Func008A)
call DestroyGroup(udg_xuanqu)
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
call PauseTimer(udg_times[32])
set udg_danwei[184]=null
call RemoveLocation(udg_dian[146])
set udg_aXUNHUAN[89]=8
loop
exitwhen udg_aXUNHUAN[89] > 15
call DestroyLightning(udg_shandian[udg_aXUNHUAN[89]])
set udg_aXUNHUAN[89]=udg_aXUNHUAN[89] + 1
endloop
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_fangdian_2_______u takes nothing returns nothing
set gg_trg_fangdian_2_______u=CreateTrigger()
call TriggerAddAction(gg_trg_fangdian_2_______u, function Trig_fangdian_2_______uActions)
endfunction
function Trig_leijizhiqiang_1Actions takes nothing returns nothing
set udg_danwei[181]=GetTriggerUnit()
set udg_Zhengshu[173]=- 1
set udg_Zhengshu[175]=0
call StartTimerBJ(udg_jishiqi[172], false, 0.00)
call StartTimerBJ(udg_jishiqi[175], true, 0.25)
set udg_Dian[177]=GetUnitLoc(udg_danwei[181])
set udg_Dian[173]=GetSpellTargetLoc()
call PlaySoundAtPointBJ(gg_snd_misaka_HD2, 100, udg_Dian[177], 500.00)
set udg_Dian[174]=PolarProjectionBJ(udg_Dian[177], 100.00, AngleBetweenPoints(udg_Dian[177], udg_Dian[173]))
set udg_shandian[3]=AddLightningEx("CLPB", false, GetLocationX(udg_Dian[177]), GetLocationY(udg_Dian[177]), ( GetLocationZ(udg_Dian[177]) + 170.00 ), GetLocationX(udg_Dian[174]), GetLocationY(udg_Dian[174]), ( GetLocationZ(udg_Dian[174]) + 0.00 ))
set udg_Danwei[175]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[181]), 0x65303848, udg_Dian[174], AngleBetweenPoints(udg_Dian[177], udg_Dian[173]))
call SetUnitTimeScale(udg_Danwei[175], 1.20)
call RemoveLocation(udg_Dian[173])
call RemoveLocation(udg_Dian[174])
call RemoveLocation(udg_Dian[177])
endfunction
function InitTrig_leijizhiqiang_1 takes nothing returns nothing
set gg_trg_leijizhiqiang_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_leijizhiqiang_1 , 3 , 0x41305035)
call TriggerAddAction(gg_trg_leijizhiqiang_1, function Trig_leijizhiqiang_1Actions)
endfunction
function Trig_leijizhiqiang_2Func001Func011Func001Func001Func001A takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Trig_leijizhiqiang_2Func001Func011Func001Func001Func002A takes nothing returns nothing
call KillUnit(GetEnumUnit())
endfunction
function Trig_leijizhiqiang_2Func001Func011Func001Func009A takes nothing returns nothing
call SetUnitX(GetEnumUnit(), GetLocationX(udg_Dian[177]))
call SetUnitY(GetEnumUnit(), GetLocationY(udg_Dian[177]))
endfunction
function Trig_leijizhiqiang_2Func001Func011Func008Func001A takes nothing returns nothing
call SetUnitX(GetEnumUnit(), GetLocationX(udg_Dian[173]))
call SetUnitY(GetEnumUnit(), GetLocationY(udg_Dian[173]))
endfunction
function Trig_leijizhiqiang_2Func001Func011Func008Func002A takes nothing returns nothing
call SetUnitX(GetEnumUnit(), GetLocationX(udg_Dian[177]))
call SetUnitY(GetEnumUnit(), GetLocationY(udg_Dian[177]))
endfunction
function Trig_leijizhiqiang_2Func001Func011Func010A takes nothing returns nothing
set udg_Danwei[162]=GetEnumUnit()
if ( ( IsUnitType(udg_Danwei[162], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_Danwei[162], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_Danwei[162], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_Danwei[162], GetOwningPlayer(udg_danwei[181])) == true ) and ( IsUnitInGroup(udg_Danwei[162], udg_Danweizu[171]) == false ) ) then
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[181]), 0x65303130, udg_Dian[173], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 1.00)
call UnitAddAbility(udg_Danwei[92], 0x41303545)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "forkedlightning" , udg_Danwei[162])
call GroupAddUnit(udg_Danweizu[172], udg_Danwei[92])
set udg_Danwei[92]=null
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[181]), 0x65303130, udg_Dian[177], 0)
call s__maphack_SetHeight(udg_Danwei[92] , 170.00 , 0.00)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 1.00)
call UnitAddAbility(udg_Danwei[92], 0x41303545)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "forkedlightning" , udg_Danwei[162])
call GroupAddUnit(udg_Danweizu[173], udg_Danwei[92])
set udg_Danwei[92]=null
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", udg_Danwei[162], "origin"))
call UnitDamageTarget(udg_danwei[181], udg_Danwei[162], ( ( ( ( 25.00 + ( 40.00 * I2R(GetUnitAbilityLevel(udg_danwei[181], 0x41305035)) ) ) + ( 1.00 * I2R(GetHeroInt(udg_danwei[181], true)) ) ) * 1.00 ) * 1.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call GroupAddUnit(udg_Danweizu[171], udg_Danwei[162])
else
endif
set udg_Danwei[162]=null
endfunction
function Trig_leijizhiqiang_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_Zhengshu[173] == - 1 ) ) then
set udg_Zhengshu[173]=( udg_Zhengshu[173] + 1 )
set udg_Dian[89]=GetUnitLoc(udg_danwei[181])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[181]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304B4F)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_danwei[181])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
call StartTimerBJ(udg_jishiqi[172], true, 0.02)
else
if ( ( udg_Zhengshu[173] < 30 ) ) then
set udg_Zhengshu[173]=( udg_Zhengshu[173] + 1 )
set udg_Dian[177]=GetUnitLoc(udg_danwei[181])
set udg_Dian[173]=GetUnitLoc(udg_Danwei[175])
set udg_Dian[174]=PolarProjectionBJ(udg_Dian[173], 30.00, GetUnitFacing(udg_Danwei[175]))
call MoveLightningEx(udg_shandian[3], false, GetLocationX(udg_Dian[177]), GetLocationY(udg_Dian[177]), ( GetLocationZ(udg_Dian[177]) + 170.00 ), GetLocationX(udg_Dian[173]), GetLocationY(udg_Dian[173]), ( GetLocationZ(udg_Dian[173]) + 0.00 ))
if ( ( IsTerrainPathableBJ(udg_Dian[174], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_Danwei[175], GetLocationX(udg_Dian[174]))
call SetUnitY(udg_Danwei[175], GetLocationY(udg_Dian[174]))
else
endif
if ( ( IsUnitGroupEmptyBJ(udg_Danweizu[172]) == false ) ) then
call ForGroupBJ(udg_Danweizu[172], function Trig_leijizhiqiang_2Func001Func011Func008Func001A)
call ForGroupBJ(udg_Danweizu[173], function Trig_leijizhiqiang_2Func001Func011Func008Func002A)
else
endif
set udg_Danweizu[162]=YDWEGetUnitsInRangeOfLocAllNull(( 250.00 + ( 5.00 * I2R(udg_Zhengshu[173]) ) ) , udg_Dian[173])
call ForGroupBJ(udg_Danweizu[162], function Trig_leijizhiqiang_2Func001Func011Func010A)
call DestroyGroup(udg_Danweizu[162])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\ForkedLightning\\ForkedLightningTarget.mdl", udg_Dian[173]))
call RemoveLocation(udg_Dian[173])
call RemoveLocation(udg_Dian[174])
call RemoveLocation(udg_Dian[177])
else
if ( ( udg_Zhengshu[173] < 50 ) ) then
set udg_Zhengshu[173]=( udg_Zhengshu[173] + 1 )
set udg_Dian[177]=GetUnitLoc(udg_danwei[181])
set udg_Dian[173]=GetUnitLoc(udg_Danwei[175])
call ForGroupBJ(udg_Danweizu[173], function Trig_leijizhiqiang_2Func001Func011Func001Func009A)
call SetLightningColor(udg_shandian[3], 1, 1.00, 1.00, ( 2.50 - ( 0.05 * I2R(udg_Zhengshu[173]) ) ))
call MoveLightningEx(udg_shandian[3], false, GetLocationX(udg_Dian[177]), GetLocationY(udg_Dian[177]), ( GetLocationZ(udg_Dian[177]) + 170.00 ), GetLocationX(udg_Dian[173]), GetLocationY(udg_Dian[173]), ( GetLocationZ(udg_Dian[173]) + 0.00 ))
call RemoveLocation(udg_Dian[173])
call RemoveLocation(udg_Dian[177])
else
if ( ( IsUnitGroupEmptyBJ(udg_Danweizu[172]) == false ) ) then
call ForGroupBJ(udg_Danweizu[172], function Trig_leijizhiqiang_2Func001Func011Func001Func001Func001A)
call ForGroupBJ(udg_Danweizu[173], function Trig_leijizhiqiang_2Func001Func011Func001Func001Func002A)
else
endif
call GroupClear(udg_Danweizu[172])
call GroupClear(udg_Danweizu[173])
call DestroyLightning(udg_shandian[3])
call KillUnit(udg_Danwei[175])
call PauseTimer(udg_jishiqi[172])
endif
endif
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_leijizhiqiang_2 takes nothing returns nothing
set gg_trg_leijizhiqiang_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_leijizhiqiang_2, udg_jishiqi[172])
call TriggerAddAction(gg_trg_leijizhiqiang_2, function Trig_leijizhiqiang_2Actions)
endfunction
function Trig_leijizhiqiang_3Func001Func004Func006A takes nothing returns nothing
if ( ( IsUnitType(GetEnumUnit(), UNIT_TYPE_DEAD) == false ) ) then
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , GetEnumUnit())
else
call GroupRemoveUnit(udg_Danweizu[171], GetEnumUnit())
endif
endfunction
function Trig_leijizhiqiang_3Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_Zhengshu[175] < ( 3 + GetUnitAbilityLevel(udg_danwei[181], 0x41305035) ) ) ) then
set udg_Zhengshu[175]=( udg_Zhengshu[175] + 1 )
if ( ( IsUnitGroupEmptyBJ(udg_Danweizu[171]) == false ) ) then
set udg_Dian[177]=GetUnitLoc(udg_danwei[181])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[181]), 0x65303130, udg_Dian[177], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.20)
call UnitAddAbility(udg_Danwei[92], 0x41305042)
call ForGroupBJ(udg_Danweizu[171], function Trig_leijizhiqiang_3Func001Func004Func006A)
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[177])
else
endif
else
call GroupClear(udg_Danweizu[171])
call PauseTimer(udg_jishiqi[175])
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_leijizhiqiang_3 takes nothing returns nothing
set gg_trg_leijizhiqiang_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_leijizhiqiang_3, udg_jishiqi[175])
call TriggerAddAction(gg_trg_leijizhiqiang_3, function Trig_leijizhiqiang_3Actions)
endfunction
function Trig_leijianConditions takes nothing returns boolean
return ( ( GetLearnedSkill() == 0x41303146 ) )
endfunction
function Trig_leijianActions takes nothing returns nothing
set udg_danwei[185]=GetTriggerUnit()
call SetUnitAbilityLevel(udg_danwei[185], 0x41497466, ( GetUnitAbilityLevel(udg_danwei[185], 0x41303146) + 1 ))
set udg_danwei[185]=null
endfunction
function InitTrig_leijian takes nothing returns nothing
set gg_trg_leijian=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_leijian, EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(gg_trg_leijian, Condition(function Trig_leijianConditions))
call TriggerAddAction(gg_trg_leijian, function Trig_leijianActions)
endfunction
function Trig_chaodiancipao_1Actions takes nothing returns nothing
set udg_danwei[186]=GetTriggerUnit()
set udg_dian[150]=GetUnitLoc(udg_danwei[186])
set udg_dian[149]=GetSpellTargetLoc()
set udg_dian[148]=PolarProjectionBJ(udg_dian[150], 50.00, AngleBetweenPoints(udg_dian[150], udg_dian[149]))
call SetUnitFacing(udg_danwei[186], AngleBetweenPoints(udg_dian[148], udg_dian[149]))
call SetUnitAnimation(udg_danwei[186], "spell")
set udg_Danwei[37]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[186]), 0x65303649, udg_dian[150], 270.00)
call SetUnitManaBJ(udg_Danwei[37], 255.00)
call SetUnitColor(udg_Danwei[37], PLAYER_COLOR_YELLOW)
call GroupAddUnit(udg_Danweizu[37], udg_Danwei[37])
set udg_Danwei[37]=null
call StartTimerBJ(udg_jishiqi[49], false, 1.20)
call SetUnitTimeScale(udg_Danwei[37], ( 1.00 / 1.20 ))
call StartTimerBJ(udg_jishiqi[144], false, 0.00)
call StartTimerBJ(udg_jishiqi[179], false, 0.40)
set udg_aXUNHUAN[90]=0
call RemoveLocation(udg_dian[148])
call RemoveLocation(udg_dian[150])
endfunction
function InitTrig_chaodiancipao_1 takes nothing returns nothing
set gg_trg_chaodiancipao_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_chaodiancipao_1 , 3 , 0x41303145)
call TriggerAddAction(gg_trg_chaodiancipao_1, function Trig_chaodiancipao_1Actions)
endfunction
function Trig_chaodiancipao_2Func001Func001Func017A takes nothing returns nothing
set udg_danwei[327]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[327], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei[327], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei[327], UNIT_TYPE_DEAD) == false ) and ( IsUnitInGroup(udg_danwei[327], udg_danweizu[65]) == false ) and ( IsUnitEnemy(udg_danwei[327], GetOwningPlayer(udg_danwei[186])) == true ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", udg_danwei[327], "chest"))
call UnitDamageTarget(udg_danwei[186], udg_danwei[327], ( ( ( ( 75.00 + ( 125.00 * I2R(GetUnitAbilityLevel(udg_danwei[186], 0x41303145)) ) ) + ( 2.50 * I2R(GetHeroInt(udg_danwei[186], true)) ) ) * 1.00 ) * 1.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call GroupAddUnit(udg_danweizu[65], udg_danwei[327])
else
endif
set udg_danwei[327]=null
endfunction
function Trig_chaodiancipao_2Func001Func003A takes nothing returns nothing
set udg_Danwei[37]=GetEnumUnit()
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[37])) + 1 ) == ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei[186])) + 1 ) ) ) then
call SetUnitTimeScale(udg_Danwei[37], 0.00)
call SetUnitManaBJ(udg_Danwei[37], 250.00)
else
endif
set udg_Danwei[37]=null
endfunction
function Trig_chaodiancipao_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_aXUNHUAN[90] == 0 ) ) then
call ForGroupBJ(udg_Danweizu[37], function Trig_chaodiancipao_2Func001Func003A)
set udg_danweizu[65]=CreateGroup()
set udg_dian[150]=GetUnitLoc(udg_danwei[186])
set udg_dian[148]=PolarProjectionBJ(udg_dian[150], 40.00, ( AngleBetweenPoints(udg_dian[150], udg_dian[149]) - 30.00 ))
call RemoveLocation(udg_dian[150])
set udg_dian[150]=PolarProjectionBJ(udg_dian[148], 0.00, AngleBetweenPoints(udg_dian[148], udg_dian[149]))
set udg_shandian[1]=AddLightningEx("HWPB", false, GetLocationX(udg_dian[148]), GetLocationY(udg_dian[148]), ( GetLocationZ(udg_dian[148]) + 120.00 ), GetLocationX(udg_dian[150]), GetLocationY(udg_dian[150]), ( GetLocationZ(udg_dian[148]) + 120.00 ))
set udg_shandian[2]=AddLightningEx("HWPB", false, GetLocationX(udg_dian[148]), GetLocationY(udg_dian[148]), ( GetLocationZ(udg_dian[148]) + 120.00 ), GetLocationX(udg_dian[150]), GetLocationY(udg_dian[150]), ( GetLocationZ(udg_dian[148]) + 120.00 ))
set udg_danwei[187]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[186]), 0x65303137, udg_dian[150], AngleBetweenPoints(udg_dian[148], udg_dian[149]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", udg_dian[150]))
call UnitApplyTimedLife(udg_danwei[187], 0x42487765, 2.00)
call SetUnitTimeScale(udg_danwei[187], 0.30)
call SetUnitVertexColor(udg_danwei[187], 255, 255, 255, 255)
set udg_danwei[187]=null
call RemoveLocation(udg_dian[150])
call StartTimerBJ(udg_jishiqi[49], true, ( 0.03 / 2.00 ))
call StartTimerBJ(udg_jishiqi[92], true, 0.04)
set udg_zhengshu[83]=0
set udg_aXUNHUAN[90]=1
else
if ( ( udg_aXUNHUAN[90] <= 15 ) ) then
set udg_dian[150]=PolarProjectionBJ(udg_dian[148], ( 100.00 * I2R(udg_aXUNHUAN[90]) ), AngleBetweenPoints(udg_dian[148], udg_dian[149]))
set udg_dian[242]=PolarProjectionBJ(udg_dian[150], 150.00, ( AngleBetweenPoints(udg_dian[148], udg_dian[149]) + 90.00 ))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Undead\\ImpaleTargetDust\\ImpaleTargetDust.mdl", udg_dian[242]))
call RemoveLocation(udg_dian[242])
set udg_dian[242]=PolarProjectionBJ(udg_dian[150], 150.00, ( AngleBetweenPoints(udg_dian[148], udg_dian[149]) - 90.00 ))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Undead\\ImpaleTargetDust\\ImpaleTargetDust.mdl", udg_dian[242]))
call RemoveLocation(udg_dian[242])
call MoveLightningEx(udg_shandian[1], false, GetLocationX(udg_dian[148]), GetLocationY(udg_dian[148]), ( GetLocationZ(udg_dian[148]) + 125.00 ), GetLocationX(udg_dian[150]), GetLocationY(udg_dian[150]), ( GetLocationZ(udg_dian[148]) + 125.00 ))
call MoveLightningEx(udg_shandian[2], false, GetLocationX(udg_dian[148]), GetLocationY(udg_dian[148]), ( GetLocationZ(udg_dian[148]) + 120.00 ), GetLocationX(udg_dian[150]), GetLocationY(udg_dian[150]), ( GetLocationZ(udg_dian[148]) + 120.00 ))
set udg_danwei[187]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[186]), 0x65303136, udg_dian[150], AngleBetweenPoints(udg_dian[148], udg_dian[149]))
call UnitApplyTimedLife(udg_danwei[187], 0x42487765, 2.00)
set udg_danwei[187]=null
if ( ( udg_aXUNHUAN[90] == 15 ) ) then
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl", udg_dian[150]))
else
endif
set udg_danweizu[61]=YDWEGetUnitsInRangeOfLocAllNull(200.00 , udg_dian[150])
call ForGroupBJ(udg_danweizu[61], function Trig_chaodiancipao_2Func001Func001Func017A)
call RemoveLocation(udg_dian[150])
set udg_aXUNHUAN[90]=( udg_aXUNHUAN[90] + 1 )
else
call PauseTimer(udg_jishiqi[49])
endif
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_chaodiancipao_2 takes nothing returns nothing
set gg_trg_chaodiancipao_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_chaodiancipao_2, udg_jishiqi[49])
call TriggerAddAction(gg_trg_chaodiancipao_2, function Trig_chaodiancipao_2Actions)
endfunction
function Trig_chaodiancipao_3Func002Func001Func002A takes nothing returns nothing
set udg_danwei[329]=GetEnumUnit()
set udg_dian[242]=GetUnitLoc(udg_danwei[329])
set udg_dian[243]=PolarProjectionBJ(udg_dian[242], RMaxBJ(( 40.00 - ( 0.05 * DistanceBetweenPoints(udg_dian[148], udg_dian[242]) ) ), 3.00), AngleBetweenPoints(udg_dian[148], udg_dian[149]))
if ( ( IsTerrainPathableBJ(udg_dian[243], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei[329], GetLocationX(udg_dian[243]))
call SetUnitY(udg_danwei[329], GetLocationY(udg_dian[243]))
else
endif
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", udg_dian[243]))
call RemoveLocation(udg_dian[242])
call RemoveLocation(udg_dian[243])
set udg_danwei[329]=null
endfunction
function Trig_chaodiancipao_3Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu[83]=( udg_zhengshu[83] + 1 )
if ( ( udg_zhengshu[83] <= 40 ) ) then
if ( ( udg_zhengshu[83] <= 20 ) ) then
call ForGroupBJ(udg_danweizu[65], function Trig_chaodiancipao_3Func002Func001Func002A)
if ( ( udg_zhengshu[83] == 20 ) ) then
call ResetUnitAnimation(udg_danwei[186])
else
endif
else
endif
if ( ( udg_zhengshu[83] >= 30 ) ) then
call SetLightningColor(udg_shandian[1], 1, 1.00, 1.00, ( 4.00 - ( 0.10 * I2R(udg_zhengshu[83]) ) ))
call SetLightningColor(udg_shandian[2], 1, 1.00, 1.00, ( 4.00 - ( 0.10 * I2R(udg_zhengshu[83]) ) ))
else
endif
else
call PauseTimer(udg_jishiqi[92])
call DestroyLightning(udg_shandian[1])
call DestroyLightning(udg_shandian[2])
set udg_aXUNHUAN[93]=1
loop
exitwhen udg_aXUNHUAN[93] > 2
set udg_aXUNHUAN[93]=udg_aXUNHUAN[93] + 1
endloop
call DestroyGroup(udg_danweizu[65])
call RemoveLocation(udg_dian[148])
call RemoveLocation(udg_dian[149])
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_chaodiancipao_3 takes nothing returns nothing
set gg_trg_chaodiancipao_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_chaodiancipao_3, udg_jishiqi[92])
call TriggerAddAction(gg_trg_chaodiancipao_3, function Trig_chaodiancipao_3Actions)
endfunction
function Trig_chaodiancipao_4Actions takes nothing returns nothing
set udg_Dian[89]=GetUnitLoc(udg_danwei[186])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[186]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304B57)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_danwei[186])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
endfunction
function InitTrig_chaodiancipao_4 takes nothing returns nothing
set gg_trg_chaodiancipao_4=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_chaodiancipao_4, udg_jishiqi[144])
call TriggerAddAction(gg_trg_chaodiancipao_4, function Trig_chaodiancipao_4Actions)
endfunction
function Trig_chaodiancipao_5Actions takes nothing returns nothing
set udg_Dian[89]=GetUnitLoc(udg_danwei[186])
call PlaySoundAtPointBJ(gg_snd_clip2HD, 100, udg_Dian[89], 500.00)
call RemoveLocation(udg_Dian[89])
endfunction
function InitTrig_chaodiancipao_5 takes nothing returns nothing
set gg_trg_chaodiancipao_5=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_chaodiancipao_5, udg_jishiqi[179])
call TriggerAddAction(gg_trg_chaodiancipao_5, function Trig_chaodiancipao_5Actions)
endfunction
function Trig_jiujibishaActions takes nothing returns nothing
set udg_danwei[188]=GetTriggerUnit()
set udg_dian[151]=GetUnitLoc(udg_danwei[188])
set udg_dian[152]=GetSpellTargetLoc()
call PlaySoundAtPointBJ(gg_snd_misaka_HD, 100, udg_dian[151], 500.00)
set udg_zhengshu[58]=0
set udg_zhengshu[59]=0
call StartTimerBJ(udg_jishiqi[50], false, 0.00)
set udg_dian[157]=PolarProjectionBJ(udg_dian[151], 128.00, AngleBetweenPoints(udg_dian[151], udg_dian[152]))
call RemoveLocation(udg_dian[157])
endfunction
function InitTrig_jiujibisha takes nothing returns nothing
set gg_trg_jiujibisha=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_jiujibisha , 3 , 0x41436263)
call TriggerAddAction(gg_trg_jiujibisha, function Trig_jiujibishaActions)
endfunction
function Trig_jiujibisha2Actions takes nothing returns nothing
set udg_zhengshu[58]=( udg_zhengshu[58] + 1 )
if ( ( udg_zhengshu[58] == 1 ) ) then
call StartTimerBJ(udg_jishiqi[50], true, 0.20)
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[188]), 0x65303130, udg_dian[151], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304C47)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_danwei[188])
set udg_Danwei[92]=null
set udg_danwei[189]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[188]), 0x6530384A, udg_dian[151], 0)
call UnitApplyTimedLife(udg_danwei[189], 0x42487765, 2.00)
call SetUnitScale(udg_danwei[189], ( 1.00 + ( 1.00 * I2R(udg_zhengshu[58]) ) ), ( 1.00 + ( 1.00 * I2R(udg_zhengshu[58]) ) ), ( 1.00 + ( 1.00 * I2R(udg_zhengshu[58]) ) ))
call SetUnitTimeScale(udg_danwei[189], 2.00)
set udg_danwei[189]=null
else
if ( ( udg_zhengshu[58] <= 10 ) ) then
if ( ( udg_zhengshu[58] < 7 ) ) then
set udg_danwei[189]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[188]), 0x6530384A, udg_dian[151], 0)
call UnitApplyTimedLife(udg_danwei[189], 0x42487765, 1.00)
call SetUnitScale(udg_danwei[189], ( 1.00 + ( 1.00 * I2R(udg_zhengshu[58]) ) ), ( 1.00 + ( 1.00 * I2R(udg_zhengshu[58]) ) ), ( 1.00 + ( 1.00 * I2R(udg_zhengshu[58]) ) ))
call SetUnitTimeScale(udg_danwei[189], 3.00)
set udg_danwei[189]=null
else
endif
if ( ( udg_zhengshu[58] == 10 ) ) then
call CinematicFadeBJ(bj_CINEFADETYPE_FADEOUTIN, 0.50, "ReplaceableTextures\\CameraMasks\\DreamFilter_Mask.blp", 80.00, 100.00, 100.00, 25.00)
call PlaySoundBJ(gg_snd_leisheng1)
else
endif
else
set udg_danwei[187]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[188]), 0x65303842, udg_dian[152], GetRandomReal(0, 360.00))
call UnitApplyTimedLife(udg_danwei[187], 0x42487765, 1.00)
set udg_danwei[187]=null
set udg_danwei[189]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[188]), 0x65303135, udg_dian[152], 0)
call KillUnit(udg_danwei[189])
call SetUnitScale(udg_danwei[189], ( 3.00 + I2R(udg_zhengshu[58]) ), ( 3.00 + I2R(udg_zhengshu[58]) ), ( 3.00 + I2R(udg_zhengshu[58]) ))
call SetUnitTimeScale(udg_danwei[189], 0.30)
set udg_danwei[189]=null
call StartTimerBJ(udg_jishiqi[51], true, 0.08)
call PauseTimer(udg_jishiqi[50])
endif
endif
endfunction
function InitTrig_jiujibisha2 takes nothing returns nothing
set gg_trg_jiujibisha2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_jiujibisha2, udg_jishiqi[50])
call TriggerAddAction(gg_trg_jiujibisha2, function Trig_jiujibisha2Actions)
endfunction
function Trig_jiujibisha3Func002Func011A takes nothing returns nothing
set udg_danwei[190]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[190], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei[190], udg_danweizu2[369]) == false ) and ( IsUnitAliveBJ(udg_danwei[190]) == true ) and ( IsUnitEnemy(udg_danwei[190], GetOwningPlayer(udg_danwei[188])) == true ) ) then
call UnitDamageTarget(udg_danwei[188], udg_danwei[190], ( I2R(GetHeroInt(udg_danwei[188], true)) * 1.50 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei[190]=null
endfunction
function Trig_jiujibisha3Func003Func006A takes nothing returns nothing
set udg_danwei[190]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[190], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitAliveBJ(udg_danwei[190]) == true ) and ( IsUnitEnemy(udg_danwei[190], GetOwningPlayer(udg_danwei[188])) == true ) ) then
call UnitDamageTarget(udg_danwei[188], udg_danwei[190], ( I2R(GetHeroInt(udg_danwei[188], true)) * 2.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei[190]=null
endfunction
function Trig_jiujibisha3Func004Func006A takes nothing returns nothing
set udg_danwei[190]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[190], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitAliveBJ(udg_danwei[190]) == true ) and ( IsUnitEnemy(udg_danwei[190], GetOwningPlayer(udg_danwei[188])) == true ) ) then
call UnitDamageTarget(udg_danwei[188], udg_danwei[190], ( I2R(GetHeroInt(udg_danwei[188], true)) * 2.50 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei[190]=null
endfunction
function Trig_jiujibisha3Func005Func006A takes nothing returns nothing
set udg_danwei[190]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[190], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitAliveBJ(udg_danwei[190]) == true ) and ( IsUnitEnemy(udg_danwei[190], GetOwningPlayer(udg_danwei[188])) == true ) ) then
call UnitDamageTarget(udg_danwei[188], udg_danwei[190], ( I2R(GetHeroInt(udg_danwei[188], true)) * 3.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei[190]=null
endfunction
function Trig_jiujibisha3Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu[59]=( udg_zhengshu[59] + 1 )
if ( ( udg_zhengshu[59] == 1 ) ) then
set udg_aXUNHUAN[94]=1
loop
exitwhen udg_aXUNHUAN[94] > 6
set udg_danwei[187]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[188]), 0x65303137, udg_dian[152], ( 60.00 * I2R(udg_aXUNHUAN[94]) ))
call UnitApplyTimedLife(udg_danwei[187], 0x42487765, 1.00)
call SetUnitScale(udg_danwei[187], 5.00, 5.00, 5.00)
call s__maphack_SetHeight(udg_danwei[187] , 300.00 , 0.00)
call SetUnitTimeScale(udg_danwei[187], 0.50)
set udg_danwei[187]=null
set udg_aXUNHUAN[94]=udg_aXUNHUAN[94] + 1
endloop
set udg_danwei[187]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[188]), 0x65303842, udg_dian[152], GetRandomReal(0, 360.00))
call UnitApplyTimedLife(udg_danwei[187], 0x42487765, 1.00)
set udg_danwei[187]=null
set udg_danwei[196]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[188]), 0x65303130, udg_dian[152], 0)
call UnitApplyTimedLife(udg_danwei[196], 0x42487765, 1.00)
call UnitAddAbility(udg_danwei[196], 0x41303139)
call IssueImmediateOrder(udg_danwei[196], "thunderclap")
set udg_aXUNHUAN[95]=1
loop
exitwhen udg_aXUNHUAN[95] > 6
set udg_dian[158]=PolarProjectionBJ(udg_dian[152], 150.00, ( I2R(udg_aXUNHUAN[95]) * 60.00 ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\ThunderClap\\ThunderClapCaster.mdl", udg_dian[158]))
call RemoveLocation(udg_dian[158])
set udg_aXUNHUAN[95]=udg_aXUNHUAN[95] + 1
endloop
set udg_danweizu[38]=YDWEGetUnitsInRangeOfLocAllNull(250.00 , udg_dian[152])
call ForGroupBJ(udg_danweizu[38], function Trig_jiujibisha3Func002Func011A)
call DestroyGroup(udg_danweizu[38])
else
endif
if ( ( udg_zhengshu[59] == 2 ) ) then
set udg_aXUNHUAN[96]=1
loop
exitwhen udg_aXUNHUAN[96] > 9
set udg_dian[158]=PolarProjectionBJ(udg_dian[152], 260.00, ( I2R(udg_aXUNHUAN[96]) * 45.00 ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\ThunderClap\\ThunderClapCaster.mdl", udg_dian[158]))
call RemoveLocation(udg_dian[158])
call DestroyGroup(udg_danweizu[38])
set udg_aXUNHUAN[96]=udg_aXUNHUAN[96] + 1
endloop
set udg_danwei[187]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[188]), 0x65303842, udg_dian[152], GetRandomReal(0, 360.00))
call UnitApplyTimedLife(udg_danwei[187], 0x42487765, 1.00)
set udg_danwei[187]=null
set udg_danweizu[38]=YDWEGetUnitsInRangeOfLocAllNull(350.00 , udg_dian[152])
call ForGroupBJ(udg_danweizu[38], function Trig_jiujibisha3Func003Func006A)
else
endif
if ( ( udg_zhengshu[59] == 3 ) ) then
set udg_aXUNHUAN[97]=1
loop
exitwhen udg_aXUNHUAN[97] > 12
set udg_dian[158]=PolarProjectionBJ(udg_dian[152], 380.00, ( I2R(udg_aXUNHUAN[97]) * 30.00 ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\ThunderClap\\ThunderClapCaster.mdl", udg_dian[158]))
call RemoveLocation(udg_dian[158])
set udg_aXUNHUAN[97]=udg_aXUNHUAN[97] + 1
endloop
set udg_danwei[187]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[188]), 0x65303842, udg_dian[152], GetRandomReal(0, 360.00))
call UnitApplyTimedLife(udg_danwei[187], 0x42487765, 1.00)
set udg_danwei[187]=null
set udg_danweizu[38]=YDWEGetUnitsInRangeOfLocAllNull(500.00 , udg_dian[152])
call ForGroupBJ(udg_danweizu[38], function Trig_jiujibisha3Func004Func006A)
call DestroyGroup(udg_danweizu[38])
else
endif
if ( ( udg_zhengshu[59] == 4 ) ) then
set udg_aXUNHUAN[98]=1
loop
exitwhen udg_aXUNHUAN[98] > 15
set udg_dian[158]=PolarProjectionBJ(udg_dian[152], 500.00, ( I2R(udg_aXUNHUAN[98]) * 24.00 ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\ThunderClap\\ThunderClapCaster.mdl", udg_dian[158]))
call RemoveLocation(udg_dian[158])
set udg_aXUNHUAN[98]=udg_aXUNHUAN[98] + 1
endloop
set udg_danwei[187]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[188]), 0x65303842, udg_dian[152], GetRandomReal(0, 360.00))
call UnitApplyTimedLife(udg_danwei[187], 0x42487765, 1.00)
set udg_danwei[187]=null
set udg_danweizu[38]=YDWEGetUnitsInRangeOfLocAllNull(750.00 , udg_dian[152])
call ForGroupBJ(udg_danweizu[38], function Trig_jiujibisha3Func005Func006A)
call DestroyGroup(udg_danweizu[38])
else
endif
if ( ( udg_zhengshu[59] == 5 ) ) then
set udg_danwei[196]=null
set udg_danwei[188]=null
call PauseTimer(udg_jishiqi[51])
call RemoveLocation(udg_dian[151])
call RemoveLocation(udg_dian[152])
else
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_jiujibisha3 takes nothing returns nothing
set gg_trg_jiujibisha3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_jiujibisha3, udg_jishiqi[51])
call TriggerAddAction(gg_trg_jiujibisha3, function Trig_jiujibisha3Actions)
endfunction
function Trig_xuesezhuahenActions takes nothing returns nothing
set udg_danwei[197]=GetTriggerUnit()
set udg_danwei[198]=GetSpellTargetUnit()
set udg_dian[159]=GetUnitLoc(udg_danwei[197])
set udg_dian[285]=GetUnitLoc(udg_danwei[198])
set udg_dian[286]=PolarProjectionBJ(udg_dian[285], 120.00, AngleBetweenPoints(udg_dian[285], udg_dian[159]))
set udg_zhengshu[95]=0
call SetUnitX(udg_danwei[197], GetLocationX(udg_dian[286]))
call SetUnitY(udg_danwei[197], GetLocationY(udg_dian[286]))
call SetUnitAnimation(udg_danwei[197], "Spell Throw")
call StartTimerBJ(udg_jishiqi[104], true, 0.20)
call SetUnitTurnSpeed(udg_danwei[197], 0.00)
call UnitAddAbility(udg_danwei[198], 0x41304A39)
set udg_Shishu[72]=0.00
call RemoveLocation(udg_dian[285])
call RemoveLocation(udg_dian[286])
endfunction
function InitTrig_xuesezhuahen takes nothing returns nothing
set gg_trg_xuesezhuahen=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_xuesezhuahen , 3 , 0x41303149)
call TriggerAddAction(gg_trg_xuesezhuahen, function Trig_xuesezhuahenActions)
endfunction
function Trig_xuesezhuahen2Actions takes nothing returns nothing
set udg_zhengshu[95]=( udg_zhengshu[95] + 1 )
if ( ( udg_zhengshu[95] < 6 ) and ( IsUnitType(udg_danwei[197], UNIT_TYPE_DEAD) == false ) and ( IsUnitType(udg_danwei[198], UNIT_TYPE_DEAD) == false ) ) then
set udg_dian[285]=GetUnitLoc(udg_danwei[198])
set udg_dian[286]=PolarProjectionBJ(udg_dian[285], 120.00, AngleBetweenPoints(udg_dian[285], udg_dian[159]))
call SetUnitX(udg_danwei[197], GetLocationX(udg_dian[286]))
call SetUnitY(udg_danwei[197], GetLocationY(udg_dian[286]))
call SetUnitAnimation(udg_danwei[197], "Spell Throw")
set udg_danwei[204]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[197]), 0x65303650, udg_dian[285], AngleBetweenPoints(udg_dian[159], udg_dian[285]))
call UnitApplyTimedLife(udg_danwei[204], 0x42487765, 1.00)
set udg_danwei[204]=null
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl", udg_danwei[198], "chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl", udg_danwei[197], "origin"))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", udg_dian[286]))
call UnitDamageTarget(udg_danwei[197], udg_danwei[198], ( ( ( 45.00 * I2R(( GetUnitAbilityLevel(udg_danwei[197], 0x41303149) - 1 )) ) + ( 3.00 * I2R(GetHeroAgi(udg_danwei[197], true)) ) ) / 6.00 ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_LIGHT_SLICE)
call SetUnitLifeBJ(udg_danwei[197], ( GetUnitState(udg_danwei[197], UNIT_STATE_LIFE) + ( ( ( ( 45.00 * ( I2R(GetUnitAbilityLevel(udg_danwei[197], 0x41303149)) - 1 ) ) + ( 3.00 * I2R(GetHeroAgi(udg_danwei[197], true)) ) ) / 6.00 ) * 0.20 ) ))
call RemoveLocation(udg_dian[285])
call RemoveLocation(udg_dian[286])
if ( ( udg_zhengshu[95] == 5 ) ) then
call SetUnitTurnSpeed(udg_danwei[197], GetUnitDefaultTurnSpeed(udg_danwei[197]))
else
endif
else
if ( ( udg_zhengshu[95] < 31 ) and ( IsUnitType(udg_danwei[197], UNIT_TYPE_DEAD) == false ) and ( IsUnitType(udg_danwei[198], UNIT_TYPE_DEAD) == false ) ) then
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Other\\HumanBloodCinematicEffect\\HumanBloodCinematicEffect.mdl", udg_danwei[198], "chest"))
if ( ( udg_Shishu[72] > 0.00 ) ) then
set udg_Shishu[72]=0.00
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl", udg_danwei[197], "origin"))
else
endif
else
call SetUnitTurnSpeed(udg_danwei[197], GetUnitDefaultTurnSpeed(udg_danwei[197]))
call UnitRemoveAbility(udg_danwei[198], 0x41304A39)
call UnitRemoveBuffBJ(0x42303249, udg_danwei[198])
call PauseTimer(udg_jishiqi[104])
set udg_danwei[197]=null
set udg_danwei[198]=null
call RemoveLocation(udg_dian[159])
endif
endif
endfunction
function InitTrig_xuesezhuahen2 takes nothing returns nothing
set gg_trg_xuesezhuahen2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_xuesezhuahen2, udg_jishiqi[104])
call TriggerAddAction(gg_trg_xuesezhuahen2, function Trig_xuesezhuahen2Actions)
endfunction
function Trig_langxiFunc010Func009Func002002003 takes nothing returns boolean
return ( ( ( GetUnitTypeId(GetFilterUnit()) != 0x4F303030 ) and ( ( IsUnitType(GetFilterUnit(), UNIT_TYPE_HERO) == true ) and ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(udg_danwei[200])) == true ) ) ) )
endfunction
function Trig_langxiFunc010Func009Func003A takes nothing returns nothing
call s__baka_IssueTargetOrder2(udg_danwei[201] , "attack" , GetEnumUnit())
endfunction
function Trig_langxiActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei[200]=GetTriggerUnit()
set udg_dian[160]=GetUnitLoc(udg_danwei[200])
set udg_danwei[210]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[200]), 0x65303130, udg_dian[160], 0)
call UnitApplyTimedLife(udg_danwei[210], 0x42487765, 1.00)
call UnitAddAbility(udg_danwei[210], 0x4130314F)
call SetUnitAbilityLevel(udg_danwei[210], 0x4130314F, GetUnitAbilityLevel(udg_danwei[200], 0x4130314A))
call IssueImmediateOrder(udg_danwei[210], "thunderclap")
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\BattleRoar\\RoarCaster.mdl", udg_danwei[200], "origin"))
set udg_aXUNHUAN[99]=1
loop
exitwhen udg_aXUNHUAN[99] > 6
set udg_dian[161]=PolarProjectionBJ(udg_dian[160], 128.00, ( 60.00 * I2R(udg_aXUNHUAN[99]) ))
set udg_danwei[201]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[200]), 0x65303156, udg_dian[161], GetRandomReal(0, 360.00))
call GroupAddUnit(udg_DAZE[0], udg_danwei[201])
if ( ( GetUnitAbilityLevel(udg_danwei[200], 0x4130445A) >= 1 ) ) then
call UnitAddAbility(udg_danwei[201], 0x41304530)
call SetUnitAbilityLevel(udg_danwei[201], 0x41304530, GetUnitAbilityLevel(udg_danwei[201], 0x4130445A))
else
endif
call UnitApplyTimedLife(udg_danwei[201], 0x42487765, ( 3.50 + ( 0.50 * I2R(GetUnitAbilityLevel(udg_danwei[200], 0x4130314A)) ) ))
set udg_zhengshuex[0]=R2I(( I2R(GetHeroAgi(udg_danwei[200], true)) * 0.25 ))
set udg_aXUNHUAN[190]=0
loop
exitwhen udg_aXUNHUAN[190] > 11
if ( ( udg_zhengshuex[0] >= R2I(Pow(2.00, ( 11.00 - I2R(udg_aXUNHUAN[190]) ))) ) ) then
set udg_zhengshuex[0]=( udg_zhengshuex[0] - R2I(Pow(2.00, ( 11.00 - I2R(udg_aXUNHUAN[78]) ))) )
call UnitAddAbility(udg_danwei[201], udg_attackforce[( 11 - udg_aXUNHUAN[190] )])
else
endif
set udg_aXUNHUAN[190]=udg_aXUNHUAN[190] + 1
endloop
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl", udg_dian[161]))
if ( ( udg_zhengshu[95] > 0 ) and ( udg_zhengshu[95] < 31 ) ) then
call s__baka_IssueTargetOrder2(udg_danwei[201] , "attack" , udg_danwei[198])
else
set udg_danweizu[45]=YDWEGetUnitsInRangeOfLocMatchingNull(400.00 , udg_dian[160] , Condition(function Trig_langxiFunc010Func009Func002002003))
call ForGroupBJ(udg_danweizu[45], function Trig_langxiFunc010Func009Func003A)
call DestroyGroup(udg_danweizu[45])
endif
call RemoveLocation(udg_dian[161])
set udg_danwei[201]=null
set udg_aXUNHUAN[99]=udg_aXUNHUAN[99] + 1
endloop
call RemoveLocation(udg_dian[160])
set udg_danwei[200]=null
set udg_danwei[210]=null
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_langxi takes nothing returns nothing
set gg_trg_langxi=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_langxi , 3 , 0x4130314A)
call TriggerAddAction(gg_trg_langxi, function Trig_langxiActions)
endfunction
function Trig_paoxiaochongji_1Actions takes nothing returns nothing
set udg_danwei[202]=GetTriggerUnit()
set udg_dian[162]=GetUnitLoc(udg_danwei[202])
set udg_dian[163]=GetSpellTargetLoc()
set udg_danwei[203]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[202]), 0x65303652, udg_dian[162], AngleBetweenPoints(udg_dian[162], udg_dian[163]))
call GroupAddUnit(udg_DAZE[0], udg_danwei[203])
call GroupAddUnit(udg_DAZE[1], udg_danwei[203])
set udg_zhengshu[62]=0
call StartTimerBJ(udg_jishiqi[55], true, 0.04)
set udg_Shishu[71]=AngleBetweenPoints(udg_dian[162], udg_dian[163])
set udg_Zhengshu[70]=0
endfunction
function InitTrig_paoxiaochongji_1 takes nothing returns nothing
set gg_trg_paoxiaochongji_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_paoxiaochongji_1 , 3 , 0x4130314B)
call TriggerAddAction(gg_trg_paoxiaochongji_1, function Trig_paoxiaochongji_1Actions)
endfunction
function Trig_paoxiaochongji_2Func001Func015A takes nothing returns nothing
set udg_danwei[205]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[205], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei[205], udg_danweizu2[369]) == false ) and ( IsUnitAliveBJ(udg_danwei[205]) == true ) and ( IsUnitEnemy(udg_danwei[205], GetOwningPlayer(udg_danwei[202])) == true ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", udg_danwei[205], "origin"))
if ( ( IsUnitInGroup(udg_danwei[205], udg_Danweizu[70]) == false ) ) then
call GroupAddUnit(udg_Danweizu[70], udg_danwei[205])
call s__baka_IssueTargetOrder2(udg_danwei[204] , "slow" , udg_danwei[205])
call UnitDamageTarget(udg_danwei[202], udg_danwei[205], ( I2R(GetHeroAgi(udg_danwei[202], true)) * 4.00 ), true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\lianzhanbo.mdx", udg_danwei[205], "chest"))
else
call UnitDamageTarget(udg_danwei[202], udg_danwei[205], ( I2R(GetHeroAgi(udg_danwei[202], true)) * 1.00 ), true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
endif
else
endif
set udg_danwei[205]=null
endfunction
function Trig_paoxiaochongji_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_zhengshu[62] <= 12 ) ) then
set udg_dian[164]=GetUnitLoc(udg_danwei[203])
set udg_dian[165]=PolarProjectionBJ(udg_dian[164], 170.00, AngleBetweenPoints(udg_dian[162], udg_dian[163]))
if ( ( IsTerrainPathableBJ(udg_dian[165], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_danwei[203], GetLocationX(udg_dian[165]))
call SetUnitY(udg_danwei[203], GetLocationY(udg_dian[165]))
else
endif
set udg_danwei[204]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[202]), 0x65303139, udg_dian[164], AngleBetweenPoints(udg_dian[162], udg_dian[163]))
call UnitApplyTimedLife(udg_danwei[204], 0x42487765, 0.50)
call SetUnitTimeScale(udg_danwei[204], 2.00)
set udg_danwei[204]=null
if ( ( udg_zhengshu[62] >= 2 ) ) then
set udg_danwei[204]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[202]), 0x65303652, udg_dian[164], AngleBetweenPoints(udg_dian[162], udg_dian[163]))
call UnitApplyTimedLife(udg_danwei[204], 0x42487765, 1.00)
call SetUnitTimeScale(udg_danwei[204], 3.00)
set udg_danwei[204]=null
else
endif
set udg_danwei[204]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[202]), 0x65303651, udg_dian[164], AngleBetweenPoints(udg_dian[162], udg_dian[163]))
call UnitApplyTimedLife(udg_danwei[204], 0x42487765, 0.50)
call SetUnitTimeScale(udg_danwei[204], 2.00)
call UnitAddAbility(udg_danwei[204], 0x41304855)
set udg_danweizu[41]=YDWEGetUnitsInRangeOfLocAllNull(300.00 , udg_dian[164])
call ForGroupBJ(udg_danweizu[41], function Trig_paoxiaochongji_2Func001Func015A)
call DestroyGroup(udg_danweizu[41])
set udg_danwei[204]=null
call RemoveLocation(udg_dian[164])
call RemoveLocation(udg_dian[165])
set udg_zhengshu[62]=( udg_zhengshu[62] + 1 )
else
call KillUnit(udg_danwei[203])
call PauseTimerBJ(true, udg_jishiqi[55])
set udg_danwei[202]=null
set udg_danwei[203]=null
call RemoveLocation(udg_dian[162])
call RemoveLocation(udg_dian[163])
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_paoxiaochongji_2 takes nothing returns nothing
set gg_trg_paoxiaochongji_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_paoxiaochongji_2, udg_jishiqi[55])
call TriggerAddAction(gg_trg_paoxiaochongji_2, function Trig_paoxiaochongji_2Actions)
endfunction
function Trig_paoxiaochongji_3Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_Danweizu[70]) == false ) )
endfunction
function Trig_paoxiaochongji_3Func001Func004A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
if ( ( ( UnitHasBuffBJ(udg_danwei2[0], 0x42303237) == true ) or ( IsUnitType(udg_danwei2[0], UNIT_TYPE_DEAD) == true ) ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
if ( ( udg_Zhengshu[69] == 0 ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], - 8.00, udg_Shishu[71])
else
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 10.00, udg_Shishu[71])
endif
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
else
endif
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
call GroupRemoveUnit(udg_Danweizu[70], udg_danwei2[0])
endif
set udg_danwei2[0]=null
endfunction
function Trig_paoxiaochongji_3Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_Zhengshu[70] <= 100 ) ) then
if ( ( udg_Zhengshu[69] == 0 ) ) then
set udg_Zhengshu[69]=1
else
set udg_Zhengshu[69]=0
endif
set udg_Zhengshu[70]=( udg_Zhengshu[70] + 1 )
call ForGroupBJ(udg_Danweizu[70], function Trig_paoxiaochongji_3Func001Func004A)
else
call GroupClear(udg_Danweizu[70])
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_paoxiaochongji_3 takes nothing returns nothing
set gg_trg_paoxiaochongji_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_paoxiaochongji_3, udg_Times[3])
call TriggerAddCondition(gg_trg_paoxiaochongji_3, Condition(function Trig_paoxiaochongji_3Conditions))
call TriggerAddAction(gg_trg_paoxiaochongji_3, function Trig_paoxiaochongji_3Actions)
endfunction
function Trig_langdebennengConditions takes nothing returns boolean
return ( ( GetLearnedSkill() == 0x4130445A ) )
endfunction
function Trig_langdebennengActions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
if ( ( GetUnitAbilityLevel(udg_danwei2[0], 0x4130445A) == 1 ) ) then
call UnitAddAbility(udg_danwei2[0], 0x41304530)
set udg_danwei2[281]=GetTriggerUnit()
call EnableTrigger(gg_trg_langdebenneng_2)
else
call SetUnitAbilityLevel(udg_danwei2[0], 0x41304530, GetUnitAbilityLevel(udg_danwei2[0], 0x4130445A))
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_langdebenneng takes nothing returns nothing
set gg_trg_langdebenneng=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_langdebenneng, EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(gg_trg_langdebenneng, Condition(function Trig_langdebennengConditions))
call TriggerAddAction(gg_trg_langdebenneng, function Trig_langdebennengActions)
endfunction
function Trig_langdebenneng_2Actions takes nothing returns nothing
set udg_dian2[0]=GetUnitLoc(udg_danwei2[281])
set udg_aXUNHUAN[100]=1
loop
exitwhen udg_aXUNHUAN[100] > 10
set udg_dian2[1]=GetUnitLoc(udg_player[udg_aXUNHUAN[100]])
if ( ( ( GetTimeOfDay() <= 6.00 ) or ( GetTimeOfDay() >= 18.00 ) ) and ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) <= ( 250.00 + ( 50.00 * I2R(GetUnitAbilityLevel(udg_danwei2[281], 0x4130445A)) ) ) ) and ( IsUnitEnemy(udg_player[udg_aXUNHUAN[100]], GetOwningPlayer(udg_danwei2[281])) == true ) ) then
call UnitAddAbility(udg_player[udg_aXUNHUAN[100]], 0x41304531)
else
call UnitRemoveAbility(udg_player[udg_aXUNHUAN[100]], 0x41304531)
endif
call RemoveLocation(udg_dian2[1])
set udg_aXUNHUAN[100]=udg_aXUNHUAN[100] + 1
endloop
call RemoveLocation(udg_dian2[0])
endfunction
function InitTrig_langdebenneng_2 takes nothing returns nothing
set gg_trg_langdebenneng_2=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_langdebenneng_2, 0.50)
call TriggerAddAction(gg_trg_langdebenneng_2, function Trig_langdebenneng_2Actions)
endfunction
function Trig_langshenhoujiaoFunc006A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishHealth\\ReplenishHealthCaster.mdl", udg_danwei2[1], "origin"))
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_HERO) == true ) and ( GetUnitTypeId(udg_danwei2[1]) != 0x4F303030 ) and ( UnitHasBuffBJ(udg_danwei2[1], 0x42303248) == false ) ) then
call PlaySoundOnUnitBJ(gg_snd_PF, 100, udg_danwei2[1])
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\StormBolt\\StormBoltMissile.mdl", udg_danwei2[1], "chest"))
set udg_aXUNHUAN[79]=0
loop
exitwhen udg_aXUNHUAN[79] > 11
call UnitRemoveAbility(udg_danwei2[1], udg_Defense[udg_aXUNHUAN[79]])
set udg_aXUNHUAN[79]=udg_aXUNHUAN[79] + 1
endloop
set udg_Shishu[68]=GetUnitState(udg_danwei2[1], UNIT_STATE_LIFE)
call UnitDamageTarget(udg_danwei2[1], udg_danwei2[1], 10.00, false, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)
set udg_Shishu[69]=( ( 1.00 - ( ( udg_Shishu[68] - GetUnitState(udg_danwei2[1], UNIT_STATE_LIFE) ) / 10.00 ) ) / ( 0.05 * ( ( udg_Shishu[68] - GetUnitState(udg_danwei2[1], UNIT_STATE_LIFE) ) / 10.00 ) ) )
call SetUnitLifeBJ(udg_danwei2[1], udg_Shishu[68])
set udg_Shishu[70]=0.00
set udg_Shishu[70]=( udg_Shishu[70] + ( udg_Shishu[69] * 0.20 ) )
set udg_Shishu[70]=( udg_Shishu[70] + ( 5.00 * I2R(GetUnitAbilityLevel(udg_danwei2[0], 0x4130314E)) ) )
set udg_shishu2ex[( 40 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 ) )]=udg_Shishu[70]
set udg_Shishu[70]=( udg_Shishu[70] + udg_shishu2ex[( 30 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 ) )] )
set udg_shishu2ex[( 30 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 ) )]=( udg_shishu2ex[( 30 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 ) )] + udg_shishu2ex[( 40 + ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[1])) + 1 ) )] )
set udg_aXUNHUAN[78]=0
loop
exitwhen udg_aXUNHUAN[78] > 11
if ( ( udg_Shishu[70] >= ( 0.10 * Pow(2.00, ( 11.00 - I2R(udg_aXUNHUAN[78]) )) ) ) ) then
set udg_Shishu[70]=( udg_Shishu[70] - ( 0.10 * Pow(2.00, I2R(( 11 - udg_aXUNHUAN[78] ))) ) )
call UnitAddAbility(udg_danwei2[1], udg_Defense[( 11 - udg_aXUNHUAN[78] )])
else
endif
set udg_aXUNHUAN[78]=udg_aXUNHUAN[78] + 1
endloop
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[1], ( ( 60.00 + ( 1.50 * I2R(GetHeroAgi(udg_danwei2[0], true)) ) ) + ( 80.00 * I2R(GetUnitAbilityLevel(udg_danwei2[0], 0x4130314E)) ) ), false, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)
else
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[1], ( ( 120.00 + ( 3.00 * I2R(GetHeroAgi(udg_danwei2[0], true)) ) ) + ( 160.00 * I2R(GetUnitAbilityLevel(udg_danwei2[0], 0x4130314E)) ) ), false, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)
endif
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_langshenhoujiaoActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetTriggerUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=5
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_danwei2[1]=CreateUnit(GetOwningPlayer(udg_danwei2[0]), 0x6530364F, GetLocationX(udg_dian2[0]), GetLocationY(udg_dian2[0]), 0.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 0.50)
call SetUnitTimeScale(udg_danwei2[1], 2.00)
set udg_danwei2[1]=null
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(500.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_langshenhoujiaoFunc006A)
call DestroyGroup(udg_xuanqu)
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_langshenhoujiao takes nothing returns nothing
set gg_trg_langshenhoujiao=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_langshenhoujiao , 3 , 0x4130314E)
call TriggerAddAction(gg_trg_langshenhoujiao, function Trig_langshenhoujiaoActions)
endfunction
function Trig_jianqizhanActions takes nothing returns nothing
set udg_danwei[212]=GetTriggerUnit()
set udg_danwei[213]=GetSpellTargetUnit()
set udg_dian[177]=GetUnitLoc(udg_danwei[212])
if ( ( udg_danwei[213] != null ) ) then
set udg_dian[178]=GetUnitLoc(udg_danwei[213])
else
set udg_dian[178]=GetSpellTargetLoc()
endif
set udg_aXUNHUAN[101]=114
loop
exitwhen udg_aXUNHUAN[101] > 118
set udg_dian[179]=PolarProjectionBJ(udg_dian[177], ( 50.00 + ( 50.00 * ( I2R(udg_aXUNHUAN[101]) - 113.00 ) ) ), AngleBetweenPoints(udg_dian[177], udg_dian[178]))
set udg_danwei2[udg_aXUNHUAN[101]]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[212]), 0x65303142, udg_dian[179], AngleBetweenPoints(udg_dian[177], udg_dian[178]))
call GroupAddUnit(udg_DAZE[0], udg_danwei2[udg_aXUNHUAN[101]])
call GroupAddUnit(udg_DAZE[1], udg_danwei2[udg_aXUNHUAN[101]])
call UnitApplyTimedLife(udg_danwei2[udg_aXUNHUAN[101]], 0x42487765, 0.75)
call SetUnitScale(udg_danwei2[udg_aXUNHUAN[101]], ( 2.50 + ( 0.50 * ( I2R(udg_aXUNHUAN[101]) - 113.00 ) ) ), ( 2.50 + ( 0.50 * ( I2R(udg_aXUNHUAN[101]) - 113.00 ) ) ), ( 2.50 + ( 0.50 * ( I2R(udg_aXUNHUAN[101]) - 113.00 ) ) ))
call RemoveLocation(udg_dian[179])
set udg_aXUNHUAN[101]=udg_aXUNHUAN[101] + 1
endloop
call StopSoundBJ(gg_snd_HeroDemonMissileLaunch2, false)
call PlaySoundOnUnitBJ(gg_snd_HeroDemonMissileLaunch2, 100, udg_danwei[212])
call GroupClear(udg_danweizu2[114])
call UnitAddAbility(udg_danwei2[114], 0x41303037)
set udg_zhengshu2[114]=0
call StartTimerBJ(udg_jishiqi[62], true, 0.02)
endfunction
function InitTrig_jianqizhan takes nothing returns nothing
set gg_trg_jianqizhan=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_jianqizhan , 3 , 0x41303151)
call TriggerAddAction(gg_trg_jianqizhan, function Trig_jianqizhanActions)
endfunction
function Trig_jianqizhan2Func004Func005A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitDeadBJ(udg_danwei2[1]) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[114]) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei[212])) == true ) ) then
call UnitDamageTarget(udg_danwei[212], udg_danwei2[1], ( 20.00 + ( 40.00 * I2R(GetUnitAbilityLevel(udg_danwei[212], 0x41303151)) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call GroupAddUnit(udg_danweizu2[114], udg_danwei2[1])
if ( ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_HERO) == true ) or ( ( udg_danwei2[1] == udg_danwei[213] ) and ( udg_danwei[213] != null ) ) ) ) then
set udg_zhengshu2[114]=20
else
endif
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_jianqizhan2Func004Func010A takes nothing returns nothing
set udg_danwei[214]=GetEnumUnit()
if ( ( IsUnitAliveBJ(udg_danwei[214]) == true ) and ( IsUnitInGroup(udg_danwei[214], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei[214], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitEnemy(udg_danwei[214], GetOwningPlayer(udg_danwei[212])) == true ) ) then
if ( ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[114]) == false ) ) then
call UnitDamageTarget(udg_danwei[212], udg_danwei2[1], ( 20.00 + ( 40.00 * I2R(GetUnitAbilityLevel(udg_danwei[212], 0x41303151)) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
call UnitDamageTarget(udg_danwei[212], udg_danwei[214], ( 1.00 * I2R(GetHeroStr(udg_danwei[212], true)) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei[214]=null
endfunction
function Trig_jianqizhan2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu2[114]=( udg_zhengshu2[114] + 1 )
set udg_dian2[0]=GetUnitLoc(udg_danwei2[114])
set udg_dian2[2]=GetUnitLoc(udg_danwei[213])
if ( ( udg_zhengshu2[114] < 20 ) and ( IsTerrainPathableBJ(udg_dian2[0], PATHING_TYPE_FLYABILITY) == false ) ) then
if ( ( udg_danwei[213] != null ) and ( IsUnitDeadBJ(udg_danwei[213]) == false ) ) then
call SetUnitFacing(udg_danwei2[114], AngleBetweenPoints(udg_dian2[0], udg_dian2[2]))
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 80.00, GetUnitFacing(udg_danwei2[114]))
set udg_aXUNHUAN[102]=114
loop
exitwhen udg_aXUNHUAN[102] > 118
set udg_dian[179]=PolarProjectionBJ(udg_dian2[1], ( 50.00 * ( I2R(udg_aXUNHUAN[102]) - 114.00 ) ), GetUnitFacing(udg_danwei2[114]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\SteamMissile\\SteamMissile.mdl", udg_dian[179]))
call SetUnitX(udg_danwei2[udg_aXUNHUAN[102]], GetLocationX(udg_dian[179]))
call SetUnitY(udg_danwei2[udg_aXUNHUAN[102]], GetLocationY(udg_dian[179]))
call RemoveLocation(udg_dian[179])
set udg_aXUNHUAN[102]=udg_aXUNHUAN[102] + 1
endloop
else
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 80.00, AngleBetweenPoints(udg_dian[177], udg_dian[178]))
set udg_aXUNHUAN[103]=114
loop
exitwhen udg_aXUNHUAN[103] > 118
set udg_dian[179]=PolarProjectionBJ(udg_dian2[1], ( 50.00 * ( I2R(udg_aXUNHUAN[103]) - 114.00 ) ), AngleBetweenPoints(udg_dian[177], udg_dian[178]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\SteamMissile\\SteamMissile.mdl", udg_dian[179]))
call SetUnitX(udg_danwei2[udg_aXUNHUAN[103]], GetLocationX(udg_dian[179]))
call SetUnitY(udg_danwei2[udg_aXUNHUAN[103]], GetLocationY(udg_dian[179]))
call RemoveLocation(udg_dian[179])
set udg_aXUNHUAN[103]=udg_aXUNHUAN[103] + 1
endloop
endif
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(175.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_jianqizhan2Func004Func005A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[1])
else
call IssueImmediateOrder(udg_danwei2[114], "thunderclap")
set udg_danweizu[43]=YDWEGetUnitsInRangeOfLocAllNull(300.00 , udg_dian2[0])
call ForGroupBJ(udg_danweizu[43], function Trig_jianqizhan2Func004Func010A)
call DestroyGroup(udg_danweizu[43])
call GroupClear(udg_danweizu2[114])
call StopSoundBJ(gg_snd_DemonHunterMissileHit2, false)
call PlaySoundOnUnitBJ(gg_snd_DemonHunterMissileHit2, 100, udg_danwei[212])
set udg_aXUNHUAN[104]=114
loop
exitwhen udg_aXUNHUAN[104] > 118
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\fireworkswhite.mdx", udg_dian2[0]))
call KillUnit(udg_danwei2[udg_aXUNHUAN[104]])
set udg_danwei2[udg_aXUNHUAN[104]]=null
set udg_aXUNHUAN[104]=udg_aXUNHUAN[104] + 1
endloop
set udg_danwei[212]=null
set udg_danwei[213]=null
call RemoveLocation(udg_dian[177])
call RemoveLocation(udg_dian[178])
call PauseTimer(udg_jishiqi[62])
endif
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[2])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_jianqizhan2 takes nothing returns nothing
set gg_trg_jianqizhan2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_jianqizhan2, udg_jishiqi[62])
call TriggerAddAction(gg_trg_jianqizhan2, function Trig_jianqizhan2Actions)
endfunction
function Trig_xiongzhan_1Actions takes nothing returns nothing
set udg_danwei2[122]=GetTriggerUnit()
set udg_dian2[122]=GetUnitLoc(udg_danwei2[122])
set udg_dian2[121]=GetSpellTargetLoc()
set udg_zhengshu2[122]=0
call StartTimerBJ(udg_times[122], true, 0.04)
call SetUnitAnimation(udg_danwei2[122], "attack slam")
call StartTimerBJ(udg_jishiqi[149], false, 0.00)
endfunction
function InitTrig_xiongzhan_1 takes nothing returns nothing
set gg_trg_xiongzhan_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_xiongzhan_1 , 3 , 0x4130364B)
call TriggerAddAction(gg_trg_xiongzhan_1, function Trig_xiongzhan_1Actions)
endfunction
function Trig_xiongzhan_2Func003Func001Func001Func001A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], 40.00, AngleBetweenPoints(udg_dian2[122], udg_dian2[121]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", udg_dian2[2]))
if ( ( IsTerrainPathableBJ(udg_dian2[2], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[2]))
else
endif
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
endfunction
function Trig_xiongzhan_2Func003Func001Func002Func008Func007A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitDeadBJ(udg_danwei2[1]) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[122])) == true ) ) then
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_danwei2[1])
call UnitDamageTarget(udg_danwei2[122], udg_danwei2[1], ( ( 2.00 * I2R(GetHeroStr(udg_danwei2[122], true)) ) + ( 25.00 * I2R(GetUnitAbilityLevel(udg_danwei2[122], 0x4130364B)) ) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_HEAVY_SLICE)
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl", udg_dian2[1]))
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\fireworkswhite.mdx", udg_dian2[1]))
call RemoveLocation(udg_dian2[1])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_xiongzhan_2Func003Func001Func005Func010A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitDeadBJ(udg_danwei2[1]) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[122])) == true ) ) then
call UnitDamageTarget(udg_danwei2[122], udg_danwei2[1], ( ( 1.00 * I2R(GetHeroStr(udg_danwei2[122], true)) ) + ( 20.00 * I2R(GetUnitAbilityLevel(udg_danwei2[122], 0x4130364B)) ) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_HEAVY_SLICE)
call s__baka_IssueTargetOrderById2(udg_danwei2[2] , 852095 , udg_danwei2[1])
else
call GroupRemoveUnit(udg_danweizu2[122], udg_danwei2[1])
endif
set udg_danwei2[1]=null
endfunction
function Trig_xiongzhan_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu2[122]=( udg_zhengshu2[122] + 1 )
set udg_dian2[0]=GetUnitLoc(udg_danwei2[122])
if ( ( udg_zhengshu2[122] <= 50 ) and ( IsUnitType(udg_danwei2[122], UNIT_TYPE_DEAD) == false ) ) then
if ( ( udg_zhengshu2[122] <= 15 ) ) then
if ( ( udg_zhengshu2[122] > 10 ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[122], ( ( DistanceBetweenPoints(udg_dian2[122], udg_dian2[121]) / 5.00 ) * ( I2R(udg_zhengshu2[122]) - 10.00 ) ), AngleBetweenPoints(udg_dian2[122], udg_dian2[121]))
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_danwei2[122], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[122], GetLocationY(udg_dian2[1]))
else
endif
call RemoveLocation(udg_dian2[1])
else
endif
if ( ( udg_zhengshu2[122] == 10 ) ) then
call SetUnitAnimationByIndex(udg_danwei2[122], 0)
else
endif
if ( ( udg_zhengshu2[122] == 15 ) ) then
call StopSoundBJ(gg_snd_BristleBackMissileLaunch3, false)
call PlaySoundOnUnitBJ(gg_snd_BristleBackMissileLaunch3, 100, udg_danwei2[122])
call SetUnitAnimationByIndex(udg_danwei2[122], 0)
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 100.00, ( AngleBetweenPoints(udg_dian2[122], udg_dian2[121]) + 45.00 ))
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], 125.00, GetUnitFacing(udg_danwei2[122]))
set udg_danwei2[2]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[122]), 0x65303349, udg_dian2[1], ( GetUnitFacing(udg_danwei2[122]) + 0.00 ))
call UnitApplyTimedLife(udg_danwei2[2], 0x42487765, 2.00)
call SetUnitAnimation(udg_danwei2[2], "death")
set udg_danweizu2[122]=YDWEGetUnitsInRangeOfLocAllNull(250.00 , udg_dian2[2])
call ForGroupBJ(udg_danweizu2[122], function Trig_xiongzhan_2Func003Func001Func005Func010A)
if ( ( IsUnitGroupEmptyBJ(udg_danweizu2[122]) == false ) ) then
call StopSoundBJ(gg_snd_ColdArrow1, false)
call PlaySoundOnUnitBJ(gg_snd_ColdArrow1, 100, udg_danwei2[122])
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[122]), 0x65303335, udg_dian2[1], ( GetUnitFacing(udg_danwei2[122]) + 0.00 ))
call UnitApplyTimedLife(udg_danwei2[0], 0x42487765, 1.00)
set udg_danwei2[0]=null
if ( ( CountUnitsInGroup(udg_danweizu2[122]) >= 1 ) ) then
set udg_Dian[89]=GetUnitLoc(udg_danwei2[122])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[122]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304B56)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_danwei2[122])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
else
endif
else
endif
set udg_danwei2[2]=null
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
else
endif
else
if ( ( udg_zhengshu2[122] > 15 ) and ( udg_zhengshu2[122] <= 25 ) ) then
call ForGroupBJ(udg_danweizu2[122], function Trig_xiongzhan_2Func003Func001Func001Func001A)
else
endif
if ( ( CountUnitsInGroup(udg_danweizu2[122]) >= 1 ) and ( udg_zhengshu2[122] >= 30 ) and ( udg_zhengshu2[122] <= 50 ) ) then
if ( ( udg_zhengshu2[122] == 30 ) ) then
call SetUnitAnimation(udg_danwei2[122], "attack slam")
call SetUnitTimeScale(udg_danwei2[122], ( 4.00 / 3.00 ))
call PauseTimer(udg_times[122])
call StartTimerBJ(udg_times[122], true, 0.03)
else
endif
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 20.00, AngleBetweenPoints(udg_dian2[122], udg_dian2[121]))
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[122], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[122], GetLocationY(udg_dian2[1]))
else
endif
call UnitAddAbility(udg_danwei2[122], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[122] , ( s__maphack_GetHeight(udg_danwei2[122]) - ( ( I2R(udg_zhengshu2[122]) - 40.00 ) * 3.50 ) ) , 0.00)
call UnitRemoveAbility(udg_danwei2[122], 0x41726176)
call RemoveLocation(udg_dian2[1])
if ( ( udg_zhengshu2[122] == 50 ) ) then
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\fireworkswhite.mdx", udg_dian2[0]))
set udg_aXUNHUAN[105]=1
loop
exitwhen udg_aXUNHUAN[105] > 4
set udg_aXUNHUAN[106]=1
loop
exitwhen udg_aXUNHUAN[106] > 5
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], ( 70.00 * I2R(udg_aXUNHUAN[106]) ), ( ( 45.00 + AngleBetweenPoints(udg_dian2[122], udg_dian2[121]) ) + ( 90.00 * I2R(udg_aXUNHUAN[105]) ) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl", udg_dian2[1]))
call RemoveLocation(udg_dian2[1])
set udg_aXUNHUAN[106]=udg_aXUNHUAN[106] + 1
endloop
set udg_aXUNHUAN[105]=udg_aXUNHUAN[105] + 1
endloop
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[122]), 0x65303130, udg_dian2[0], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304236)
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(400.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_xiongzhan_2Func003Func001Func002Func008Func007A)
call DestroyGroup(udg_xuanqu)
set udg_Danwei[92]=null
call SetUnitTimeScale(udg_danwei2[122], 1.00)
else
endif
else
endif
endif
else
call PauseTimer(udg_times[122])
call s__maphack_SetHeight(udg_danwei2[122] , 0.00 , 0.00)
call SetUnitTimeScale(udg_danwei2[122], 1.00)
set udg_danwei2[122]=null
call DestroyGroup(udg_danweizu2[122])
call RemoveLocation(udg_dian2[121])
call RemoveLocation(udg_dian2[122])
endif
call RemoveLocation(udg_dian2[0])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_xiongzhan_2 takes nothing returns nothing
set gg_trg_xiongzhan_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_xiongzhan_2, udg_times[122])
call TriggerAddAction(gg_trg_xiongzhan_2, function Trig_xiongzhan_2Actions)
endfunction
function Trig_xiongzhan_3Actions takes nothing returns nothing
set udg_Dian[89]=GetUnitLoc(udg_danwei2[122])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[122]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304B4F)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_danwei2[122])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
endfunction
function InitTrig_xiongzhan_3 takes nothing returns nothing
set gg_trg_xiongzhan_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_xiongzhan_3, udg_jishiqi[149])
call TriggerAddAction(gg_trg_xiongzhan_3, function Trig_xiongzhan_3Actions)
endfunction
function Trig_bingjian_1Actions takes nothing returns nothing
set udg_danwei2[119]=GetTriggerUnit()
set udg_dian2[119]=GetUnitLoc(udg_danwei2[119])
set udg_dian2[120]=GetSpellTargetLoc()
set udg_dian2[0]=PolarProjectionBJ(udg_dian2[119], 100.00, AngleBetweenPoints(udg_dian2[119], udg_dian2[120]))
set udg_danwei2[120]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[119]), 0x65303346, udg_dian2[0], AngleBetweenPoints(udg_dian2[119], udg_dian2[120]))
call GroupAddUnit(udg_DAZE[0], udg_danwei2[120])
call UnitApplyTimedLife(udg_danwei2[120], 0x42487765, 1.00)
call GroupClear(udg_danweizu2[119])
call PlaySoundOnUnitBJ(gg_snd_FrostBoltLaunch1, 100, udg_danwei2[119])
set udg_zhengshu2[119]=0
call StartTimerBJ(udg_times[119], true, 0.03)
call RemoveLocation(udg_dian2[0])
endfunction
function InitTrig_bingjian_1 takes nothing returns nothing
set gg_trg_bingjian_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_bingjian_1 , 3 , 0x41303956)
call TriggerAddAction(gg_trg_bingjian_1, function Trig_bingjian_1Actions)
endfunction
function Trig_bingjian_2Func003Func007A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitDeadBJ(udg_danwei2[1]) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[119]) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[119])) == true ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl", udg_danwei2[1], "chest"))
call UnitDamageTarget(udg_danwei2[119], udg_danwei2[1], ( 50.00 + ( 50.00 * I2R(GetUnitAbilityLevel(udg_danwei2[119], 0x41303956)) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call GroupAddUnit(udg_danweizu2[119], udg_danwei2[1])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_bingjian_2Func003Func011A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitDeadBJ(udg_danwei2[1]) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[119])) == true ) ) then
call s__baka_IssueTargetOrderById2(udg_danwei2[120] , 852095 , udg_danwei2[1])
call UnitDamageTarget(udg_danwei2[119], udg_danwei2[1], I2R(GetHeroInt(udg_danwei2[119], true)), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
if ( ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[119]) == false ) ) then
call UnitDamageTarget(udg_danwei2[119], udg_danwei2[1], ( 50.00 + ( 50.00 * I2R(GetUnitAbilityLevel(udg_danwei2[119], 0x41303956)) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl", udg_danwei2[1], "chest"))
else
endif
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_bingjian_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu2[119]=( udg_zhengshu2[119] + 1 )
set udg_dian2[0]=GetUnitLoc(udg_danwei2[120])
if ( ( udg_zhengshu2[119] < 20 ) and ( IsTerrainPathableBJ(udg_dian2[0], PATHING_TYPE_FLYABILITY) == false ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 55.00, AngleBetweenPoints(udg_dian2[119], udg_dian2[120]))
call SetUnitPositionLoc(udg_danwei2[120], udg_dian2[1])
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(150.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_bingjian_2Func003Func007A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[1])
else
call PlaySoundOnUnitBJ(gg_snd_FrostBoltHit1, 100, udg_danwei2[120])
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(400.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_bingjian_2Func003Func011A)
call DestroyGroup(udg_xuanqu)
if ( ( udg_Zhengshu[36] == 3 ) ) then
set udg_Zhengshu[36]=0
set udg_Dian[35]=Location(GetLocationX(udg_dian2[0]), GetLocationY(udg_dian2[0]))
call StartTimerBJ(udg_Times[35], true, 0.03)
set udg_aXUNHUAN[108]=1
loop
exitwhen udg_aXUNHUAN[108] > 12
set udg_Dian[36]=PolarProjectionBJ(udg_Dian[35], 300.00, ( 30.00 * I2R(udg_aXUNHUAN[108]) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Undead\\FreezingBreath\\FreezingBreathTargetArt.mdl", udg_Dian[36]))
set udg_Danwei[36]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[35]), 0x65303643, udg_Dian[36], 225.00)
call GroupAddUnit(udg_Danweizu[35], udg_Danwei[36])
set udg_Danwei[36]=null
call RemoveLocation(udg_Dian[36])
set udg_aXUNHUAN[108]=udg_aXUNHUAN[108] + 1
endloop
else
endif
call GroupClear(udg_danweizu2[119])
call KillUnit(udg_danwei2[120])
set udg_danwei2[119]=null
set udg_danwei2[120]=null
call RemoveLocation(udg_dian2[119])
call RemoveLocation(udg_dian2[120])
call PauseTimer(udg_times[119])
endif
call RemoveLocation(udg_dian2[0])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_bingjian_2 takes nothing returns nothing
set gg_trg_bingjian_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_bingjian_2, udg_times[119])
call TriggerAddAction(gg_trg_bingjian_2, function Trig_bingjian_2Actions)
endfunction
function Trig_bingbi_1Actions takes nothing returns nothing
set udg_Danwei[35]=GetTriggerUnit()
set udg_Danweizu[35]=CreateGroup()
if ( ( udg_Zhengshu[36] == 1 ) ) then
set udg_Dian[35]=Location(GetLocationX(udg_dian[185]), GetLocationY(udg_dian[185]))
set udg_Zhengshu[35]=( 100 + ( 20 * GetUnitAbilityLevel(udg_Danwei[35], 0x41304D33) ) )
set udg_Zhengshu[36]=2
else
if ( ( udg_zhengshu2[119] > 0 ) and ( udg_zhengshu2[119] < 20 ) ) then
set udg_Zhengshu[35]=( 50 + ( 20 * GetUnitAbilityLevel(udg_Danwei[35], 0x41304D33) ) )
set udg_Zhengshu[36]=3
else
set udg_Dian[35]=GetUnitLoc(udg_Danwei[35])
set udg_Zhengshu[35]=( 33 + ( 20 * GetUnitAbilityLevel(udg_Danwei[35], 0x41304D33) ) )
call StartTimerBJ(udg_Times[35], true, 0.03)
set udg_aXUNHUAN[107]=1
loop
exitwhen udg_aXUNHUAN[107] > 12
set udg_Dian[36]=PolarProjectionBJ(udg_Dian[35], 300.00, ( 30.00 * I2R(udg_aXUNHUAN[107]) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Undead\\FreezingBreath\\FreezingBreathTargetArt.mdl", udg_Dian[36]))
set udg_Danwei[36]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[35]), 0x65303643, udg_Dian[36], 225.00)
call GroupAddUnit(udg_Danweizu[35], udg_Danwei[36])
set udg_Danwei[36]=null
call RemoveLocation(udg_Dian[36])
set udg_aXUNHUAN[107]=udg_aXUNHUAN[107] + 1
endloop
endif
endif
endfunction
function InitTrig_bingbi_1 takes nothing returns nothing
set gg_trg_bingbi_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_bingbi_1 , 3 , 0x41304D33)
call TriggerAddAction(gg_trg_bingbi_1, function Trig_bingbi_1Actions)
endfunction
function Trig_bingbi_2Func001Func001A takes nothing returns nothing
set udg_Danwei[36]=GetEnumUnit()
set udg_Dian[36]=GetUnitLoc(udg_Danwei[36])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl", udg_Dian[36]))
call RemoveUnit(udg_Danwei[36])
set udg_Danwei[36]=null
call RemoveLocation(udg_Dian[36])
endfunction
function Trig_bingbi_2Func001Func009A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_Danwei[35])) == true ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[1])
if ( ( DistanceBetweenPoints(udg_Dian[35], udg_dian2[0]) >= 200.00 ) ) then
if ( ( DistanceBetweenPoints(udg_Dian[35], udg_dian2[0]) >= 300.00 ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_Dian[35], RMinBJ(( DistanceBetweenPoints(udg_Dian[35], udg_dian2[0]) + 40.00 ), 400.00), AngleBetweenPoints(udg_Dian[35], udg_dian2[0]))
else
set udg_dian2[1]=PolarProjectionBJ(udg_Dian[35], RMaxBJ(( DistanceBetweenPoints(udg_Dian[35], udg_dian2[0]) - 40.00 ), 200.00), AngleBetweenPoints(udg_Dian[35], udg_dian2[0]))
endif
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[1]))
else
endif
else
endif
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_bingbi_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_Zhengshu[35] >= 0 ) ) then
set udg_Zhengshu[35]=( udg_Zhengshu[35] - 1 )
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(400.00 , udg_Dian[35])
call ForGroupBJ(udg_xuanqu, function Trig_bingbi_2Func001Func009A)
call DestroyGroup(udg_xuanqu)
else
call ForGroupBJ(udg_Danweizu[35], function Trig_bingbi_2Func001Func001A)
call DestroyGroup(udg_Danweizu[35])
call PauseTimer(udg_Times[35])
set udg_Danwei[35]=null
call RemoveLocation(udg_Dian[35])
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_bingbi_2 takes nothing returns nothing
set gg_trg_bingbi_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_bingbi_2, udg_Times[35])
call TriggerAddAction(gg_trg_bingbi_2, function Trig_bingbi_2Actions)
endfunction
function Trig_lianzhanActions takes nothing returns nothing
set udg_danwei[216]=GetTriggerUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei[216])
set udg_dian2[1]=GetSpellTargetLoc()
set udg_zhengshu[65]=0
set udg_shishu2[111]=AngleBetweenPoints(udg_dian2[1], udg_dian2[0])
call StartTimerBJ(udg_jishiqi[63], true, 0.04)
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
endfunction
function InitTrig_lianzhan takes nothing returns nothing
set gg_trg_lianzhan=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_lianzhan , 3 , 0x41303152)
call TriggerAddAction(gg_trg_lianzhan, function Trig_lianzhanActions)
endfunction
function Trig_lianzhan2Actions takes nothing returns nothing
set udg_zhengshu[65]=( udg_zhengshu[65] + 1 )
if ( ( udg_zhengshu[65] <= 75 ) and ( IsUnitType(udg_danwei[216], UNIT_TYPE_DEAD) == false ) ) then
set udg_dian[182]=GetUnitLoc(udg_danwei[216])
if ( ( ( ( ( GetUnitFacing(udg_danwei[216]) - udg_shishu2[111] ) >= 270.00 ) and ( ( GetUnitFacing(udg_danwei[216]) - udg_shishu2[111] ) <= 450.00 ) ) or ( ( ( GetUnitFacing(udg_danwei[216]) - udg_shishu2[111] ) >= - 90.00 ) and ( ( GetUnitFacing(udg_danwei[216]) - udg_shishu2[111] ) <= 90.00 ) ) ) ) then
set udg_dian[183]=PolarProjectionBJ(udg_dian[182], 150.00, ( GetUnitFacing(udg_danwei[216]) + 180.00 ))
set udg_dian[184]=PolarProjectionBJ(udg_dian[182], ( GetUnitMoveSpeed(udg_danwei[216]) * 0.03 ), GetUnitFacing(udg_danwei[216]))
if ( ( IsTerrainPathableBJ(udg_dian[184], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei[216], GetLocationX(udg_dian[184]))
call SetUnitY(udg_danwei[216], GetLocationY(udg_dian[184]))
else
endif
call RemoveLocation(udg_dian[184])
else
set udg_dian[183]=PolarProjectionBJ(udg_dian[182], 150.00, GetUnitFacing(udg_danwei[216]))
set udg_dian[184]=PolarProjectionBJ(udg_dian[182], ( GetUnitMoveSpeed(udg_danwei[216]) * - 0.03 ), GetUnitFacing(udg_danwei[216]))
if ( ( IsTerrainPathableBJ(udg_dian[184], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei[216], GetLocationX(udg_dian[184]))
call SetUnitY(udg_danwei[216], GetLocationY(udg_dian[184]))
else
endif
call RemoveLocation(udg_dian[184])
endif
if ( ( ( I2R(udg_zhengshu[65]) / 2.00 ) == I2R(( udg_zhengshu[65] / 2 )) ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl", udg_danwei[216], "chest"))
set udg_danwei[217]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[216]), 0x65303143, udg_dian[183], ( AngleBetweenPoints(udg_dian[182], udg_dian[183]) + GetRandomReal(- 25.00, 25.00) ))
call GroupAddUnit(udg_DAZE[0], udg_danwei[217])
call SetUnitUserData(udg_danwei[217], 0)
call UnitApplyTimedLife(udg_danwei[217], 0x42487765, 0.80)
call GroupAddUnit(udg_danweizu2[111], udg_danwei[217])
set udg_danwei[217]=null
else
endif
call RemoveLocation(udg_dian[182])
call RemoveLocation(udg_dian[183])
else
call PauseTimer(udg_jishiqi[63])
endif
endfunction
function InitTrig_lianzhan2 takes nothing returns nothing
set gg_trg_lianzhan2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_lianzhan2, udg_jishiqi[63])
call TriggerAddAction(gg_trg_lianzhan2, function Trig_lianzhan2Actions)
endfunction
function Trig_penqijiConditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[111]) == false ) )
endfunction
function Trig_penqijiFunc001Func003Func007A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
set udg_dian2[2]=GetUnitLoc(udg_danwei2[1])
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[2]) > 150.00 ) ) then
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_HERO) == true ) ) then
call SetUnitFacing(udg_danwei2[0], AngleBetweenPoints(udg_dian2[0], udg_dian2[2]))
else
endif
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[1])
else
endif
call RemoveLocation(udg_dian2[2])
else
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[1])
endif
set udg_danwei2[1]=null
endfunction
function Trig_penqijiFunc001Func003Func008Func006A takes nothing returns nothing
set udg_danwei[217]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[217], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei[217], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitAliveBJ(udg_danwei[217]) == true ) and ( IsUnitEnemy(udg_danwei[217], GetOwningPlayer(udg_danwei[216])) == true ) ) then
call UnitDamageTarget(udg_danwei[216], udg_danwei[217], ( ( ( I2R(GetHeroInt(udg_danwei[216], true)) * 0.08 ) + 5.60 ) + ( 4.80 * I2R(GetUnitAbilityLevel(udg_danwei[216], 0x41303152)) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei[217]=null
endfunction
function Trig_penqijiFunc001A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
if ( ( GetUnitUserData(udg_danwei2[0]) < 15 ) and ( IsTerrainPathableBJ(udg_dian2[0], PATHING_TYPE_FLYABILITY) == false ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 75.00, GetUnitFacing(udg_danwei2[0]))
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(400.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_penqijiFunc001Func003Func007A)
if ( ( IsUnitGroupEmptyBJ(udg_xuanqu) == false ) ) then
set udg_danwei2[1]=GroupPickRandomUnit(udg_xuanqu)
set udg_dian2[2]=GetUnitLoc(udg_danwei2[1])
set udg_danweizu[44]=YDWEGetUnitsInRangeOfLocAllNull(450.00 , udg_dian2[2])
call ForGroupBJ(udg_danweizu[44], function Trig_penqijiFunc001Func003Func008Func006A)
call DestroyGroup(udg_danweizu[44])
call KillUnit(udg_danwei2[0])
call GroupRemoveUnit(udg_danweizu2[111], udg_danwei2[0])
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[2])
else
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) + 1 ))
endif
call DestroyGroup(udg_xuanqu)
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
call RemoveLocation(udg_dian2[1])
else
call KillUnit(udg_danwei2[0])
call GroupRemoveUnit(udg_danweizu2[111], udg_danwei2[0])
endif
call RemoveLocation(udg_dian2[0])
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_penqijiActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[111], function Trig_penqijiFunc001A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_penqiji takes nothing returns nothing
set gg_trg_penqiji=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_penqiji, udg_Times[4])
call TriggerAddCondition(gg_trg_penqiji, Condition(function Trig_penqijiConditions))
call TriggerAddAction(gg_trg_penqiji, function Trig_penqijiActions)
endfunction
function Trig_bingdongActions takes nothing returns nothing
set udg_danwei[218]=GetTriggerUnit()
set udg_dian[185]=GetSpellTargetLoc()
set udg_zhengshu2[111]=0
set udg_danwei[219]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[218]), 0x65303144, udg_dian[185], 0)
set udg_danwei[220]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[218]), 0x65303145, udg_dian[185], 0)
call SetUnitAnimation(udg_danwei[220], "Birth")
call SetUnitTimeScale(udg_danwei[220], 0.75)
call SetUnitAnimation(udg_danwei[219], "Birth")
call UnitApplyTimedLife(udg_danwei[219], 0x42487765, 2.00)
call SetUnitTimeScale(udg_danwei[219], 1.50)
call StartTimerBJ(udg_jishiqi[65], false, 1.00)
call StartTimerBJ(udg_jishiqi[67], false, 4.00)
set udg_Zhengshu[36]=1
endfunction
function InitTrig_bingdong takes nothing returns nothing
set gg_trg_bingdong=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_bingdong , 3 , 0x41303759)
call TriggerAddAction(gg_trg_bingdong, function Trig_bingdongActions)
endfunction
function Trig_bingdong2Func002Func002A takes nothing returns nothing
set udg_danwei[222]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[222], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei[222], udg_danweizu2[369]) == false ) and ( IsUnitAliveBJ(udg_danwei[222]) == true ) and ( IsUnitEnemy(udg_danwei[218], GetOwningPlayer(udg_danwei[222])) == true ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei[222])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl", udg_dian2[0]))
call SetUnitTimeScale(udg_danwei[222], 1)
call s__Unit_PauseUnitMU(udg_danwei[222] , false , "寒霜冰封")
call ResetUnitAnimation(udg_danwei[222])
call UnitDamageTarget(udg_danwei[218], udg_danwei[222], ( ( I2R(GetHeroInt(udg_danwei[218], true)) * 2.50 ) + ( I2R(GetUnitAbilityLevel(udg_danwei[218], 0x41303759)) * 35.00 ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call RemoveLocation(udg_dian2[0])
else
endif
set udg_danwei[222]=null
endfunction
function Trig_bingdong2Func002Func019A takes nothing returns nothing
set udg_danwei[222]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[222], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei[222], udg_danweizu2[369]) == false ) and ( IsUnitAliveBJ(udg_danwei[222]) == true ) and ( IsUnitEnemy(udg_danwei[218], GetOwningPlayer(udg_danwei[222])) == true ) ) then
call SetUnitTimeScale(udg_danwei[222], 0.00)
call s__Unit_PauseUnitMU(udg_danwei[222] , true , "寒霜冰封")
else
endif
set udg_danwei[222]=null
endfunction
function Trig_bingdong2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu2[111]=( udg_zhengshu2[111] + 1 )
if ( ( udg_zhengshu2[111] == 1 ) ) then
call StartTimerBJ(udg_jishiqi[65], false, 2.00)
if ( ( udg_Zhengshu[36] == 2 ) ) then
call StartTimerBJ(udg_Times[35], true, 0.03)
set udg_aXUNHUAN[108]=1
loop
exitwhen udg_aXUNHUAN[108] > 12
set udg_Dian[36]=PolarProjectionBJ(udg_Dian[35], 300.00, ( 30.00 * I2R(udg_aXUNHUAN[108]) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Undead\\FreezingBreath\\FreezingBreathTargetArt.mdl", udg_Dian[36]))
set udg_Danwei[36]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[35]), 0x65303643, udg_Dian[36], 225.00)
call GroupAddUnit(udg_Danweizu[35], udg_Danwei[36])
set udg_Danwei[36]=null
call RemoveLocation(udg_Dian[36])
set udg_aXUNHUAN[108]=udg_aXUNHUAN[108] + 1
endloop
else
endif
set udg_Zhengshu[36]=0
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[218]), 0x65303644, udg_dian[185], 36.00)
call UnitApplyTimedLife(udg_danwei2[0], 0x42487765, 2.00)
call UnitAddAbility(udg_danwei2[0], 0x41303153)
call SetUnitAbilityLevel(udg_danwei2[0], 0x41303153, GetUnitAbilityLevel(udg_danwei[218], 0x41303759))
set udg_danwei2[0]=null
call UnitApplyTimedLife(udg_danwei[220], 0x42487765, 2.20)
set udg_danweizu[46]=YDWEGetUnitsInRangeOfLocAllNull(300.00 , udg_dian[185])
call ForGroupBJ(udg_danweizu[46], function Trig_bingdong2Func002Func019A)
else
set udg_aXUNHUAN[109]=1
loop
exitwhen udg_aXUNHUAN[109] > 6
set udg_dian2[0]=PolarProjectionBJ(udg_dian[185], 240.00, ( 60.00 * I2R(udg_aXUNHUAN[109]) ))
set udg_aXUNHUAN[110]=1
loop
exitwhen udg_aXUNHUAN[110] > 3
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], ( 80.00 * I2R(udg_aXUNHUAN[110]) ), ( 120.00 + ( 60.00 * I2R(udg_aXUNHUAN[109]) ) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl", udg_dian2[1]))
call RemoveLocation(udg_dian2[1])
set udg_aXUNHUAN[110]=udg_aXUNHUAN[110] + 1
endloop
call RemoveLocation(udg_dian2[0])
set udg_aXUNHUAN[109]=udg_aXUNHUAN[109] + 1
endloop
call ForGroupBJ(udg_danweizu[46], function Trig_bingdong2Func002Func002A)
call DestroyGroup(udg_danweizu[46])
set udg_danwei[218]=null
set udg_danwei[219]=null
set udg_danwei[220]=null
call RemoveLocation(udg_dian[185])
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_bingdong2 takes nothing returns nothing
set gg_trg_bingdong2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_bingdong2, udg_jishiqi[65])
call TriggerAddAction(gg_trg_bingdong2, function Trig_bingdong2Actions)
endfunction
function Trig_bigndognzhanActions takes nothing returns nothing
set udg_danwei[223]=GetTriggerUnit()
set udg_danwei[224]=GetSpellTargetUnit()
set udg_dian[186]=GetUnitLoc(udg_danwei[223])
set udg_dian[187]=GetUnitLoc(udg_danwei[224])
set udg_zhengshu[66]=0
set udg_quyu[13]=RectFromCenterSizeBJ(udg_dian[188], 500.00, 500.00)
call StartTimerBJ(udg_jishiqi[66], true, 0.05)
endfunction
function InitTrig_bigndognzhan takes nothing returns nothing
set gg_trg_bigndognzhan=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_bigndognzhan , 3 , 0x41487462)
call TriggerAddAction(gg_trg_bigndognzhan, function Trig_bigndognzhanActions)
endfunction
function Trig_bingdognzhan2Func004Func001Func001Func003A takes nothing returns nothing
set udg_danwei[225]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[225], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei[225], udg_danweizu2[369]) == false ) and ( IsUnitAliveBJ(udg_danwei[225]) == true ) and ( IsUnitEnemy(udg_danwei[225], GetOwningPlayer(udg_danwei[223])) == true ) ) then
call UnitDamageTarget(udg_danwei[223], udg_danwei[225], ( I2R(GetHeroInt(udg_danwei[223], true)) * 2.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei[225]=null
endfunction
function Trig_bingdognzhan2Func004Func001Func001Func012A takes nothing returns nothing
set udg_danwei[225]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[225], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei[225], udg_danweizu2[369]) == false ) and ( IsUnitAliveBJ(udg_danwei[225]) == true ) and ( IsUnitEnemy(udg_danwei[225], GetOwningPlayer(udg_danwei[223])) == true ) ) then
call UnitDamageTarget(udg_danwei[223], udg_danwei[225], ( I2R(GetHeroInt(udg_danwei[223], true)) * 1.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei[225]=null
endfunction
function Trig_bingdognzhan2Func004Func001Func005A takes nothing returns nothing
set udg_danwei[225]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[225], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei[225], udg_danweizu2[369]) == false ) and ( IsUnitAliveBJ(udg_danwei[225]) == true ) and ( IsUnitEnemy(udg_danwei[225], GetOwningPlayer(udg_danwei[223])) == true ) ) then
call UnitDamageTarget(udg_danwei[223], udg_danwei[225], ( I2R(GetHeroInt(udg_danwei[223], true)) * 1.00 ), true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei[225]=null
endfunction
function Trig_bingdognzhan2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu[66]=( udg_zhengshu[66] + 1 )
set udg_dian[189]=GetUnitLoc(udg_danwei[224])
set udg_dian[188]=PolarProjectionBJ(udg_dian[189], 50.00, AngleBetweenPoints(udg_dian[186], udg_dian[187]))
if ( ( udg_zhengshu[66] <= 14 ) ) then
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl", udg_dian[189]))
if ( ( IsTerrainPathableBJ(udg_dian[188], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei[224], GetLocationX(udg_dian[188]))
call SetUnitY(udg_danwei[224], GetLocationY(udg_dian[188]))
else
endif
else
if ( ( udg_zhengshu[66] == 15 ) ) then
set udg_aXUNHUAN[111]=1
loop
exitwhen udg_aXUNHUAN[111] > 3
set udg_dian2[0]=PolarProjectionBJ(udg_dian[189], 75.00, ( 30.00 + ( 120.00 * I2R(udg_aXUNHUAN[111]) ) ))
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[223]), 0x65303345, udg_dian2[0], ( 30.00 + ( 120.00 * I2R(udg_aXUNHUAN[111]) ) ))
call SetUnitScale(udg_danwei2[0], 2.00, 2.00, 2.00)
call UnitApplyTimedLife(udg_danwei2[0], 0x42487765, 2.00)
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl", udg_dian2[0]))
call RemoveLocation(udg_dian2[0])
set udg_aXUNHUAN[111]=udg_aXUNHUAN[111] + 1
endloop
set udg_aXUNHUAN[112]=1
loop
exitwhen udg_aXUNHUAN[112] > 6
set udg_dian2[0]=PolarProjectionBJ(udg_dian[189], 150.00, ( 60.00 * I2R(udg_aXUNHUAN[112]) ))
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[223]), 0x65303345, udg_dian2[0], ( 60.00 * I2R(udg_aXUNHUAN[112]) ))
call IssuePointOrderByIdLoc(udg_danwei2[0], 852580, udg_dian[189])
call SetUnitScale(udg_danwei2[0], 1.70, 1.70, 1.70)
call UnitApplyTimedLife(udg_danwei2[0], 0x42487765, 1.90)
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl", udg_dian2[0]))
call RemoveLocation(udg_dian2[0])
set udg_aXUNHUAN[112]=udg_aXUNHUAN[112] + 1
endloop
set udg_danweizu[47]=YDWEGetUnitsInRangeOfLocAllNull(300.00 , udg_dian[189])
call ForGroupBJ(udg_danweizu[47], function Trig_bingdognzhan2Func004Func001Func005A)
call DestroyGroup(udg_danweizu[47])
else
if ( ( udg_zhengshu[66] == 16 ) ) then
set udg_aXUNHUAN[113]=1
loop
exitwhen udg_aXUNHUAN[113] > 8
set udg_dian2[0]=PolarProjectionBJ(udg_dian[189], 250.00, ( 45.00 * I2R(udg_aXUNHUAN[113]) ))
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[223]), 0x65303345, udg_dian2[0], ( 45.00 * I2R(udg_aXUNHUAN[113]) ))
call SetUnitScale(udg_danwei2[0], 1.40, 1.40, 1.40)
call UnitApplyTimedLife(udg_danwei2[0], 0x42487765, 1.80)
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl", udg_dian2[0]))
call RemoveLocation(udg_dian2[0])
set udg_aXUNHUAN[113]=udg_aXUNHUAN[113] + 1
endloop
set udg_danweizu[47]=YDWEGetUnitsInRangeOfLocAllNull(400.00 , udg_dian[189])
call ForGroupBJ(udg_danweizu[47], function Trig_bingdognzhan2Func004Func001Func001Func012A)
call DestroyGroup(udg_danweizu[47])
else
set udg_aXUNHUAN[114]=1
loop
exitwhen udg_aXUNHUAN[114] > 12
set udg_dian2[0]=PolarProjectionBJ(udg_dian[189], 350.00, ( 30.00 * I2R(udg_aXUNHUAN[114]) ))
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[223]), 0x65303345, udg_dian2[0], ( 30.00 * I2R(udg_aXUNHUAN[114]) ))
call UnitApplyTimedLife(udg_danwei2[0], 0x42487765, 1.70)
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl", udg_dian2[0]))
call RemoveLocation(udg_dian2[0])
set udg_aXUNHUAN[114]=udg_aXUNHUAN[114] + 1
endloop
set udg_danweizu[47]=YDWEGetUnitsInRangeOfLocAllNull(500.00 , udg_dian[189])
call ForGroupBJ(udg_danweizu[47], function Trig_bingdognzhan2Func004Func001Func001Func003A)
call DestroyGroup(udg_danweizu[47])
call PauseTimerBJ(true, udg_jishiqi[66])
set udg_danwei[223]=null
set udg_danwei[224]=null
call RemoveLocation(udg_dian[186])
call RemoveLocation(udg_dian[187])
endif
endif
endif
call RemoveLocation(udg_dian[188])
call RemoveLocation(udg_dian[189])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_bingdognzhan2 takes nothing returns nothing
set gg_trg_bingdognzhan2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_bingdognzhan2, udg_jishiqi[66])
call TriggerAddAction(gg_trg_bingdognzhan2, function Trig_bingdognzhan2Actions)
endfunction
function Trig_yidaorp_1Conditions takes nothing returns boolean
return ( ( GetUnitAbilityLevel(GetAttacker(), 0x41303954) > 0 ) )
endfunction
function Trig_yidaorp_1Actions takes nothing returns nothing
set udg_danwei2[0]=GetAttacker()
set udg_danwei2[1]=GetAttackedUnitBJ()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitAlly(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == false ) ) then
if ( ( GetUnitAbilityLevel(udg_danwei2[0], 0x41304D32) == 1 ) ) then
call PauseTimer(udg_Times[151])
call UnitRemoveAbility(udg_Danwei[151], 0x41304D32)
call UnitRemoveAbility(udg_Danwei[151], 0x41303953)
else
endif
if ( ( GetUnitAbilityLevel(udg_danwei2[0], 0x41303953) == 1 ) ) then
set udg_Danwei[151]=GetAttacker()
call StartTimerBJ(udg_Times[151], false, 0.50)
call SetUnitAnimation(udg_danwei2[0], "attack slam")
call UnitAddAbility(udg_danwei2[0], 0x41304D32)
else
endif
if ( ( I2R(GetRandomInt(1, 100)) < LoadReal(YDHT, GetHandleId(udg_danwei2[0]), 0xA84C96A7) ) ) then
call UnitAddAbility(udg_danwei2[0], 0x41303953)
call SetUnitAbilityLevel(udg_danwei2[0], 0x41303952, GetUnitAbilityLevel(udg_danwei2[0], 0x41303954))
call SaveReal(YDHT, GetHandleId(udg_danwei2[0]), 0xA84C96A7, 0.00)
else
call SaveReal(YDHT, GetHandleId(udg_danwei2[0]), 0xA84C96A7, ( LoadReal(YDHT, GetHandleId(udg_danwei2[0]), 0xA84C96A7) + 8.67 ))
endif
else
endif
set udg_danwei2[0]=null
set udg_danwei2[1]=null
endfunction
function InitTrig_yidaorp_1 takes nothing returns nothing
set gg_trg_yidaorp_1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_yidaorp_1, EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(gg_trg_yidaorp_1, Condition(function Trig_yidaorp_1Conditions))
call TriggerAddAction(gg_trg_yidaorp_1, function Trig_yidaorp_1Actions)
endfunction
function Trig_yidaorp_2Actions takes nothing returns nothing
call UnitRemoveAbility(udg_Danwei[151], 0x41304D32)
call UnitRemoveAbility(udg_Danwei[151], 0x41303953)
endfunction
function InitTrig_yidaorp_2 takes nothing returns nothing
set gg_trg_yidaorp_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_yidaorp_2, udg_Times[151])
call TriggerAddAction(gg_trg_yidaorp_2, function Trig_yidaorp_2Actions)
endfunction
function Trig_chaojiu_1Actions takes nothing returns nothing
set udg_danwei2[107]=GetTriggerUnit()
set udg_danwei2[108]=GetSpellTargetUnit()
set udg_dian2[107]=GetUnitLoc(udg_danwei2[107])
set udg_dian2[108]=GetUnitLoc(udg_danwei2[108])
set udg_dian2[109]=PolarProjectionBJ(udg_dian2[108], 250.00, AngleBetweenPoints(udg_dian2[107], udg_dian2[108]))
set udg_zhengshu2[107]=0
set udg_zhengshu2[108]=0
set udg_zhengshu2[109]=0
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl", udg_dian2[108]))
call SetUnitX(udg_danwei2[107], GetLocationX(udg_dian2[108]))
call SetUnitY(udg_danwei2[107], GetLocationY(udg_dian2[108]))
call UnitAddAbility(udg_danwei2[107], 0x4130394B)
call UnitAddAbility(udg_danwei2[107], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[107] , 0.00 , 0.00)
call UnitRemoveAbility(udg_danwei2[107], 0x41726176)
call UnitAddAbility(udg_danwei2[108], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[108] , 0.00 , 0.00)
call UnitRemoveAbility(udg_danwei2[108], 0x41726176)
call PlaySoundOnUnitBJ(gg_snd_MetalHeavySliceStone2, 100, udg_danwei2[107])
call StartTimerBJ(udg_times[107], true, 0.04)
call UnitDamageTarget(udg_danwei2[107], udg_danwei2[108], ( 50.00 + ( 0.20 * I2R(GetHeroStr(udg_danwei2[107], true)) ) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
call StartTimerBJ(udg_jishiqi[148], false, 0.00)
endfunction
function InitTrig_chaojiu_1 takes nothing returns nothing
set gg_trg_chaojiu_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_chaojiu_1 , 3 , 0x4130394A)
call TriggerAddAction(gg_trg_chaojiu_1, function Trig_chaojiu_1Actions)
endfunction
function Trig_chaojiu_2Actions takes nothing returns nothing
set udg_zhengshu2[107]=( udg_zhengshu2[107] + 1 )
if ( ( IsUnitType(udg_danwei2[107], UNIT_TYPE_DEAD) == false ) ) then
if ( ( udg_zhengshu2[107] <= 40 ) ) then
if ( ( udg_zhengshu2[107] <= 10 ) ) then
if ( ( udg_zhengshu2[107] == 1 ) ) then
call s__Unit_PauseUnitMU(udg_danwei2[108] , true , "超究武神霸斩")
else
endif
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[108], ( 15.00 * I2R(udg_zhengshu2[107]) ), AngleBetweenPoints(udg_dian2[107], udg_dian2[108]))
set udg_dian2[3]=PolarProjectionBJ(udg_dian2[108], ( 100.00 + ( 15.00 * I2R(udg_zhengshu2[107]) ) ), AngleBetweenPoints(udg_dian2[107], udg_dian2[108]))
if ( ( IsTerrainPathableBJ(udg_dian2[2], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[108], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[108], GetLocationY(udg_dian2[2]))
call SetUnitX(udg_danwei2[107], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[107], GetLocationY(udg_dian2[2]))
else
endif
call UnitAddAbility(udg_danwei2[107], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[107] , ( s__maphack_GetHeight(udg_danwei2[107]) + 25.00 ) , 0.00)
call UnitRemoveAbility(udg_danwei2[107], 0x41726176)
call UnitAddAbility(udg_danwei2[108], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[108] , ( s__maphack_GetHeight(udg_danwei2[108]) + 25.00 ) , 0.00)
call UnitRemoveAbility(udg_danwei2[108], 0x41726176)
call RemoveLocation(udg_dian2[2])
call RemoveLocation(udg_dian2[3])
else
set udg_zhengshu2[108]=( udg_zhengshu2[108] + 1 )
if ( ( udg_zhengshu2[108] <= 5 ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[109], 300.00, ( AngleBetweenPoints(udg_dian2[108], udg_dian2[107]) + ( - 144.00 + ( 144.00 * I2R(udg_zhengshu2[109]) ) ) ))
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], ( 60.00 * I2R(udg_zhengshu2[108]) ), ( AngleBetweenPoints(udg_dian2[108], udg_dian2[107]) + ( 144.00 * I2R(udg_zhengshu2[109]) ) ))
if ( ( udg_zhengshu2[108] == 3 ) ) then
call StopSoundBJ(gg_snd_MetalHeavySliceStone2, false)
call PlaySoundOnUnitBJ(gg_snd_MetalHeavySliceStone2, 100, udg_danwei2[107])
if ( ( IsTerrainPathableBJ(udg_dian2[109], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[108], GetLocationX(udg_dian2[109]))
call SetUnitY(udg_danwei2[108], GetLocationY(udg_dian2[109]))
else
endif
if ( ( IsTerrainPathableBJ(udg_dian2[2], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[107], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[107], GetLocationY(udg_dian2[2]))
else
endif
call SetUnitAnimation(udg_danwei2[107], "spell")
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[107]), 0x65303341, udg_dian2[109], ( AngleBetweenPoints(udg_dian2[107], udg_dian2[108]) + ( 144.00 * I2R(udg_zhengshu2[109]) ) ))
call SetUnitAnimation(udg_danwei2[0], "death")
call UnitApplyTimedLife(udg_danwei2[0], 0x42487765, 0.50)
set udg_danwei2[0]=null
call UnitDamageTarget(udg_danwei2[107], udg_danwei2[108], ( 40.00 + ( 0.30 * I2R(GetHeroStr(udg_danwei2[107], true)) ) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
else
endif
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
else
set udg_zhengshu2[109]=( udg_zhengshu2[109] + 1 )
set udg_zhengshu2[108]=0
endif
endif
else
if ( ( udg_zhengshu2[107] <= 55 ) ) then
if ( ( udg_zhengshu2[107] <= 50 ) ) then
set udg_zhengshu2[108]=( udg_zhengshu2[108] + 1 )
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[109], 300.00, ( AngleBetweenPoints(udg_dian2[108], udg_dian2[107]) + 216.00 ))
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], ( 30.00 * I2R(udg_zhengshu2[108]) ), AngleBetweenPoints(udg_dian2[1], udg_dian2[109]))
if ( ( IsTerrainPathableBJ(udg_dian2[2], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[107], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[107], GetLocationY(udg_dian2[2]))
else
endif
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
if ( ( udg_zhengshu2[107] == 45 ) ) then
call SetUnitAnimation(udg_danwei2[107], "attack slam")
else
endif
else
endif
call UnitAddAbility(udg_danwei2[107], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[107] , ( s__maphack_GetHeight(udg_danwei2[107]) + 15.00 ) , 0.00)
call UnitRemoveAbility(udg_danwei2[107], 0x41726176)
if ( ( udg_zhengshu2[107] == 55 ) ) then
call UnitDamageTarget(udg_danwei2[107], udg_danwei2[108], ( 50.00 + ( 0.50 * I2R(GetHeroStr(udg_danwei2[107], true)) ) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
call PlaySoundOnUnitBJ(gg_snd_MetalHeavySliceFlesh3, 100, udg_danwei2[107])
set udg_aXUNHUAN[115]=1
loop
exitwhen udg_aXUNHUAN[115] > 3
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[107]), 0x65303341, udg_dian2[109], ( 120.00 * I2R(udg_aXUNHUAN[115]) ))
call SetUnitAnimation(udg_danwei2[0], "death")
call UnitApplyTimedLife(udg_danwei2[0], 0x42487765, 0.50)
set udg_danwei2[0]=null
set udg_aXUNHUAN[115]=udg_aXUNHUAN[115] + 1
endloop
call UnitRemoveAbility(udg_danwei2[107], 0x4130394B)
else
endif
else
if ( ( udg_zhengshu2[107] <= 70 ) ) then
if ( ( udg_zhengshu2[107] == 60 ) ) then
set udg_danwei2[109]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[107]), 0x65303342, udg_dian2[109], 0.00)
call UnitApplyTimedLife(udg_danwei2[109], 0x42487765, 2.00)
else
endif
if ( ( udg_zhengshu2[107] >= 65 ) ) then
call SetUnitScale(udg_danwei2[109], ( ( I2R(udg_zhengshu2[107]) * 8.00 ) - 510.00 ), ( ( I2R(udg_zhengshu2[107]) * 8.00 ) - 510.00 ), ( ( I2R(udg_zhengshu2[107]) * 8.00 ) - 510.00 ))
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[109], ( 30.00 * ( I2R(udg_zhengshu2[107]) - 65.00 ) ), AngleBetweenPoints(udg_dian2[108], udg_dian2[107]))
if ( ( IsTerrainPathableBJ(udg_dian2[2], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[107], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[107], GetLocationY(udg_dian2[2]))
else
endif
call SetUnitFacing(udg_danwei2[107], AngleBetweenPoints(udg_dian2[108], udg_dian2[107]))
call RemoveLocation(udg_dian2[2])
call UnitAddAbility(udg_danwei2[108], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[108] , ( s__maphack_GetHeight(udg_danwei2[108]) - 50.00 ) , 0.00)
call UnitRemoveAbility(udg_danwei2[108], 0x41726176)
call UnitAddAbility(udg_danwei2[107], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[107] , ( s__maphack_GetHeight(udg_danwei2[107]) - 40.00 ) , 0.00)
call UnitRemoveAbility(udg_danwei2[107], 0x41726176)
else
endif
if ( ( udg_zhengshu2[107] == 70 ) ) then
call UnitDamageTarget(udg_danwei2[107], udg_danwei2[108], ( 200.00 + ( 1.80 * I2R(GetHeroStr(udg_danwei2[107], true)) ) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
call PlaySoundOnUnitBJ(gg_snd_MetalHeavySliceWood1, 100, udg_danwei2[107])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl", udg_dian2[109]))
call s__Unit_PauseUnitMU(udg_danwei2[108] , false , "超究武神霸斩")
call UnitAddAbility(udg_danwei2[108], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[108] , 0.00 , 0.00)
call UnitRemoveAbility(udg_danwei2[108], 0x41726176)
call UnitAddAbility(udg_danwei2[107], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[107] , 0.00 , 0.00)
call UnitRemoveAbility(udg_danwei2[107], 0x41726176)
else
endif
else
if ( ( udg_zhengshu2[107] <= 85 ) ) then
if ( ( udg_zhengshu2[107] <= 80 ) ) then
call SetUnitVertexColor(udg_danwei2[109], 255, 255, 255, ( 255 - ( 51 * ( udg_zhengshu2[107] - 75 ) ) ))
else
if ( ( udg_zhengshu2[107] == 81 ) ) then
call RemoveUnit(udg_danwei2[109])
else
endif
endif
else
call PauseTimerBJ(true, udg_times[107])
set udg_danwei2[107]=null
set udg_danwei2[108]=null
set udg_danwei2[109]=null
call RemoveLocation(udg_dian2[107])
call RemoveLocation(udg_dian2[108])
call RemoveLocation(udg_dian2[109])
endif
endif
endif
endif
else
call UnitRemoveAbility(udg_danwei2[107], 0x4130394B)
call s__Unit_PauseUnitMU(udg_danwei2[108] , false , "超究武神霸斩")
call UnitAddAbility(udg_danwei2[108], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[108] , 0.00 , 0.00)
call UnitRemoveAbility(udg_danwei2[108], 0x41726176)
call UnitAddAbility(udg_danwei2[107], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[107] , 0.00 , 0.00)
call UnitRemoveAbility(udg_danwei2[107], 0x41726176)
call PauseTimerBJ(true, udg_times[107])
set udg_danwei2[107]=null
set udg_danwei2[108]=null
set udg_danwei2[109]=null
call RemoveLocation(udg_dian2[107])
call RemoveLocation(udg_dian2[108])
call RemoveLocation(udg_dian2[109])
endif
endfunction
function InitTrig_chaojiu_2 takes nothing returns nothing
set gg_trg_chaojiu_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_chaojiu_2, udg_times[107])
call TriggerAddAction(gg_trg_chaojiu_2, function Trig_chaojiu_2Actions)
endfunction
function Trig_chaojiu_3Actions takes nothing returns nothing
set udg_Dian[89]=GetUnitLoc(udg_danwei2[107])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[107]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304B5A)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_danwei2[107])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
endfunction
function InitTrig_chaojiu_3 takes nothing returns nothing
set gg_trg_chaojiu_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_chaojiu_3, udg_jishiqi[148])
call TriggerAddAction(gg_trg_chaojiu_3, function Trig_chaojiu_3Actions)
endfunction
function Trig_hualongdianjing_1Actions takes nothing returns nothing
set udg_danwei2[110]=GetTriggerUnit()
set udg_danwei2[111]=GetSpellTargetUnit()
set udg_dian2[110]=GetUnitLoc(udg_danwei2[110])
set udg_dian2[111]=GetUnitLoc(udg_danwei2[111])
set udg_zhengshu2[110]=0
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\NightElf\\Blink\\BlinkCaster.mdl", udg_dian2[111]))
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[111], 50.00, AngleBetweenPoints(udg_dian2[111], udg_dian2[110]))
if ( ( IsTerrainPathableBJ(udg_dian2[2], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[110], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[110], GetLocationY(udg_dian2[2]))
else
endif
call UnitAddAbility(udg_danwei2[110], 0x4130394D)
call s__Unit_PauseUnitMU(udg_danwei2[110] , true , "黄龙点睛")
call s__Unit_PauseUnitMU(udg_danwei2[111] , true , "黄龙点睛目标")
call SetUnitTimeScale(udg_danwei2[110], 2.00)
call PlaySoundOnUnitBJ(gg_snd_MetalHeavySliceStone3, 100, udg_danwei2[110])
call StartTimerBJ(udg_times[110], false, 0.60)
call SetUnitAnimationByIndex(udg_danwei2[110], 12)
call UnitDamageTarget(udg_danwei2[110], udg_danwei2[111], ( 20.00 + ( 0.10 * I2R(GetHeroStr(udg_danwei2[110], true)) ) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
call RemoveLocation(udg_dian2[2])
endfunction
function InitTrig_hualongdianjing_1 takes nothing returns nothing
set gg_trg_hualongdianjing_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_hualongdianjing_1 , 3 , 0x4130394C)
call TriggerAddAction(gg_trg_hualongdianjing_1, function Trig_hualongdianjing_1Actions)
endfunction
function Trig_hualongdianjing_2Actions takes nothing returns nothing
set udg_zhengshu2[110]=( udg_zhengshu2[110] + 1 )
if ( ( IsUnitType(udg_danwei2[110], UNIT_TYPE_DEAD) == false ) ) then
if ( ( udg_zhengshu2[110] <= 14 ) ) then
call StopSoundBJ(gg_snd_MetalHeavySliceStone3, false)
call PlaySoundOnUnitBJ(gg_snd_MetalHeavySliceStone3, 100, udg_danwei2[110])
if ( ( udg_zhengshu2[110] == 1 ) ) then
call SetUnitAnimationByIndex(udg_danwei2[110], 4)
call StartTimerBJ(udg_times[110], false, 0.30)
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[111], 100.00, AngleBetweenPoints(udg_dian2[110], udg_dian2[111]))
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[111], 150.00, AngleBetweenPoints(udg_dian2[110], udg_dian2[111]))
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[110]), 0x65303343, udg_dian2[2], AngleBetweenPoints(udg_dian2[110], udg_dian2[111]))
call UnitApplyTimedLife(udg_danwei2[0], 0x42487765, 0.50)
call SetUnitAnimation(udg_danwei2[0], "death")
set udg_danwei2[0]=null
call UnitDamageTarget(udg_danwei2[110], udg_danwei2[111], ( 30.00 + ( 0.10 * I2R(GetHeroStr(udg_danwei2[110], true)) ) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
else
if ( ( udg_zhengshu2[110] == 2 ) ) then
call SetUnitAnimation(udg_danwei2[110], "spell slam")
call StartTimerBJ(udg_times[110], false, 0.30)
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[111], 200.00, AngleBetweenPoints(udg_dian2[110], udg_dian2[111]))
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[111], 250.00, AngleBetweenPoints(udg_dian2[110], udg_dian2[111]))
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[110]), 0x65303343, udg_dian2[2], AngleBetweenPoints(udg_dian2[110], udg_dian2[111]))
call UnitApplyTimedLife(udg_danwei2[0], 0x42487765, 0.50)
call SetUnitAnimation(udg_danwei2[0], "death")
set udg_danwei2[0]=null
call UnitDamageTarget(udg_danwei2[110], udg_danwei2[111], ( 30.00 + ( 0.10 * I2R(GetHeroStr(udg_danwei2[110], true)) ) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
else
if ( ( udg_zhengshu2[110] == 3 ) ) then
call SetUnitTimeScale(udg_danwei2[110], 8.00)
call StartTimerBJ(udg_times[110], false, 0.25)
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[111], 250.00, AngleBetweenPoints(udg_dian2[110], udg_dian2[111]))
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[111], 300.00, AngleBetweenPoints(udg_dian2[110], udg_dian2[111]))
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[110]), 0x65303343, udg_dian2[2], AngleBetweenPoints(udg_dian2[110], udg_dian2[111]))
call UnitApplyTimedLife(udg_danwei2[0], 0x42487765, 0.50)
call SetUnitAnimation(udg_danwei2[0], "death")
set udg_danwei2[0]=null
call UnitDamageTarget(udg_danwei2[110], udg_danwei2[111], ( 20.00 + ( 0.20 * I2R(GetHeroStr(udg_danwei2[110], true)) ) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
else
call UnitDamageTarget(udg_danwei2[110], udg_danwei2[111], ( 0.25 * I2R(GetHeroStr(udg_danwei2[110], true)) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl", udg_danwei2[110], "weapon"))
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[111], 250.00, AngleBetweenPoints(udg_dian2[110], udg_dian2[111]))
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[111], 300.00, AngleBetweenPoints(udg_dian2[110], udg_dian2[111]))
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[110]), 0x65303343, udg_dian2[2], AngleBetweenPoints(udg_dian2[110], udg_dian2[111]))
call SetUnitAnimation(udg_danwei2[0], "death")
call s__maphack_SetHeight(udg_danwei2[0] , s__maphack_GetHeight(udg_danwei2[111]) , 0.00)
call UnitApplyTimedLife(udg_danwei2[0], 0x42487765, 0.50)
set udg_danwei2[0]=null
call SetUnitAnimationByIndex(udg_danwei2[110], 0)
call UnitAddAbility(udg_danwei2[110], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[110] , ( s__maphack_GetHeight(udg_danwei2[110]) + 40.00 ) , 0.00)
call UnitRemoveAbility(udg_danwei2[110], 0x41726176)
call UnitAddAbility(udg_danwei2[111], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[111] , ( s__maphack_GetHeight(udg_danwei2[111]) + 40.00 ) , 0.00)
call UnitRemoveAbility(udg_danwei2[111], 0x41726176)
if ( ( udg_zhengshu2[110] <= 8 ) ) then
call StartTimerBJ(udg_times[110], false, 0.20)
else
if ( ( udg_zhengshu2[110] <= 10 ) ) then
call StartTimerBJ(udg_times[110], false, 0.17)
else
call StartTimerBJ(udg_times[110], false, 0.15)
endif
endif
endif
endif
endif
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[110], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[110], GetLocationY(udg_dian2[1]))
else
endif
if ( ( IsTerrainPathableBJ(udg_dian2[2], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[111], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[111], GetLocationY(udg_dian2[2]))
else
endif
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
else
if ( ( udg_zhengshu2[110] <= 30 ) ) then
if ( ( udg_zhengshu2[110] == 15 ) ) then
call SetUnitAnimationByIndex(udg_danwei2[110], 4)
call SetUnitTimeScale(udg_danwei2[110], 2.00)
call UnitRemoveAbility(udg_danwei2[110], 0x4130394D)
call StopSoundBJ(gg_snd_MetalHeavySliceFlesh3, false)
call PlaySoundOnUnitBJ(gg_snd_MetalHeavySliceFlesh3, 100, udg_danwei2[110])
call UnitDamageTarget(udg_danwei2[110], udg_danwei2[111], ( 100.00 * I2R(GetUnitAbilityLevel(udg_danwei2[110], 0x4130394C)) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
else
endif
call StartTimerBJ(udg_times[110], false, 0.04)
if ( ( udg_zhengshu2[110] <= 20 ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl", udg_danwei2[111], "chest"))
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[111], ( ( 50.00 * I2R(udg_zhengshu2[110]) ) - 400.00 ), AngleBetweenPoints(udg_dian2[110], udg_dian2[111]))
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[111], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[111], GetLocationY(udg_dian2[1]))
else
endif
call UnitAddAbility(udg_danwei2[111], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[111] , ( s__maphack_GetHeight(udg_danwei2[111]) - 80.00 ) , 0.00)
call UnitRemoveAbility(udg_danwei2[111], 0x41726176)
else
if ( ( udg_zhengshu2[110] == 21 ) ) then
call s__Unit_PauseUnitMU(udg_danwei2[111] , false , "黄龙点睛目标")
call UnitAddAbility(udg_danwei2[111], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[111] , 0.00 , 0.00)
call UnitRemoveAbility(udg_danwei2[111], 0x41726176)
call SetUnitTimeScale(udg_danwei2[110], 1.00)
else
endif
endif
call UnitAddAbility(udg_danwei2[110], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[110] , ( s__maphack_GetHeight(udg_danwei2[110]) - 30.00 ) , 0.00)
call UnitRemoveAbility(udg_danwei2[110], 0x41726176)
else
call s__Unit_PauseUnitMU(udg_danwei2[110] , false , "黄龙点睛")
call UnitAddAbility(udg_danwei2[110], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[110] , 0.00 , 0.00)
call UnitRemoveAbility(udg_danwei2[110], 0x41726176)
set udg_danwei2[110]=null
set udg_danwei2[111]=null
call RemoveLocation(udg_dian2[110])
call RemoveLocation(udg_dian2[111])
endif
endif
else
call UnitRemoveAbility(udg_danwei2[110], 0x4130394D)
call s__Unit_PauseUnitMU(udg_danwei2[111] , false , "黄龙点睛目标")
call UnitAddAbility(udg_danwei2[111], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[111] , 0.00 , 0.00)
call UnitRemoveAbility(udg_danwei2[111], 0x41726176)
call SetUnitTimeScale(udg_danwei2[110], 1.00)
call s__Unit_PauseUnitMU(udg_danwei2[110] , false , "黄龙点睛")
call UnitAddAbility(udg_danwei2[110], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[110] , 0.00 , 0.00)
call UnitRemoveAbility(udg_danwei2[110], 0x41726176)
set udg_danwei2[110]=null
set udg_danwei2[111]=null
call RemoveLocation(udg_dian2[110])
call RemoveLocation(udg_dian2[111])
endif
endfunction
function InitTrig_hualongdianjing_2 takes nothing returns nothing
set gg_trg_hualongdianjing_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_hualongdianjing_2, udg_times[110])
call TriggerAddAction(gg_trg_hualongdianjing_2, function Trig_hualongdianjing_2Actions)
endfunction
function Trig_yanshiqiang_1Func013Func003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitAliveBJ(udg_danwei2[1]) == true ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[123])) == true ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[1])
if ( ( ( ( ( AngleBetweenPoints(udg_dian2[123], udg_dian2[124]) - AngleBetweenPoints(udg_dian2[1], udg_dian2[0]) ) >= 270.00 ) and ( ( AngleBetweenPoints(udg_dian2[123], udg_dian2[124]) - AngleBetweenPoints(udg_dian2[1], udg_dian2[0]) ) <= 450.00 ) ) or ( ( ( AngleBetweenPoints(udg_dian2[123], udg_dian2[124]) - AngleBetweenPoints(udg_dian2[1], udg_dian2[0]) ) >= - 90.00 ) and ( ( AngleBetweenPoints(udg_dian2[123], udg_dian2[124]) - AngleBetweenPoints(udg_dian2[1], udg_dian2[0]) ) <= 90.00 ) ) or ( ( ( AngleBetweenPoints(udg_dian2[123], udg_dian2[124]) - AngleBetweenPoints(udg_dian2[1], udg_dian2[0]) ) >= - 450.00 ) and ( ( AngleBetweenPoints(udg_dian2[123], udg_dian2[124]) - AngleBetweenPoints(udg_dian2[1], udg_dian2[0]) ) <= - 270.00 ) ) ) ) then
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], 50.00, AngleBetweenPoints(udg_dian2[123], udg_dian2[124]))
else
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], 50.00, AngleBetweenPoints(udg_dian2[124], udg_dian2[123]))
endif
if ( ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[124]) == false ) ) then
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl", udg_dian2[2]))
call UnitDamageTarget(udg_danwei2[123], udg_danwei2[1], ( 0.00 + ( 1.50 * I2R(GetHeroInt(udg_danwei2[123], true)) ) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_HEAVY_BASH)
call GroupAddUnit(udg_danweizu2[124], udg_danwei2[1])
else
endif
if ( ( IsTerrainPathableBJ(udg_dian2[2], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[2]))
else
endif
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[2])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_yanshiqiang_1Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[123]=GetTriggerUnit()
set udg_dian2[123]=GetUnitLoc(udg_danwei2[123])
set udg_danwei2[1]=GetSpellTargetUnit()
call UnitAddAbility(udg_danwei2[123], 0x41304A49)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[123]), 0x41303958, false)
if ( ( udg_danwei2[1] != null ) ) then
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
if ( ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[123])) == true ) ) then
set udg_dian2[124]=PolarProjectionBJ(udg_dian2[1], 50.00, GetUnitFacing(udg_danwei2[1]))
else
set udg_dian2[124]=PolarProjectionBJ(udg_dian2[1], - 50.00, GetUnitFacing(udg_danwei2[1]))
endif
call RemoveLocation(udg_dian2[1])
else
set udg_dian2[124]=GetSpellTargetLoc()
endif
set udg_danwei2[1]=null
set udg_danweizu2[124]=CreateGroup()
set udg_danwei2[124]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[123]), 0x6530304F, udg_dian2[124], AngleBetweenPoints(udg_dian2[123], udg_dian2[124]))
if ( ( GetUnitAbilityLevel(udg_danwei2[123], 0x41303232) == 1 ) ) then
call UnitApplyTimedLife(udg_danwei2[124], 0x42544C46, ( 5.00 + ( GetUnitState(udg_danwei2[123], UNIT_STATE_MANA) / 500.00 ) ))
else
call UnitApplyTimedLife(udg_danwei2[124], 0x42544C46, 5.00)
endif
if ( ( GetUnitAbilityLevel(udg_danwei2[123], 0x41303958) == 5 ) ) then
call UnitAddAbility(udg_danwei2[124], 0x41303534)
else
if ( ( GetUnitAbilityLevel(udg_danwei2[123], 0x41303958) >= 3 ) ) then
call UnitAddAbility(udg_danwei2[124], 0x41303532)
else
endif
endif
set udg_aXUNHUAN[116]=1
loop
exitwhen udg_aXUNHUAN[116] > 7
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[124], ( 75.00 * ( I2R(udg_aXUNHUAN[116]) - 4.00 ) ), ( AngleBetweenPoints(udg_dian2[123], udg_dian2[124]) + 90.00 ))
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(150.00 , udg_dian2[1])
call ForGroupBJ(udg_xuanqu, function Trig_yanshiqiang_1Func013Func003A)
call DestroyGroup(udg_xuanqu)
if ( ( udg_aXUNHUAN[116] != 4 ) ) then
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[123]), 0x6530305A, udg_dian2[1], AngleBetweenPoints(udg_dian2[123], udg_dian2[124]))
if ( ( GetUnitAbilityLevel(udg_danwei2[123], 0x41303232) == 1 ) ) then
call UnitApplyTimedLife(udg_danwei2[0], 0x42544C46, ( 5.00 + ( GetUnitState(udg_danwei2[123], UNIT_STATE_MANA) / 500.00 ) ))
else
call UnitApplyTimedLife(udg_danwei2[0], 0x42544C46, 5.00)
endif
call GroupAddUnit(udg_danweizu2[123], udg_danwei2[0])
set udg_danwei2[0]=null
else
endif
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Undead\\ImpaleTargetDust\\ImpaleTargetDust.mdl", udg_dian2[1]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", udg_dian2[1]))
call RemoveLocation(udg_dian2[1])
set udg_aXUNHUAN[116]=udg_aXUNHUAN[116] + 1
endloop
call GroupClear(udg_danweizu2[124])
set udg_zhengshu2[123]=0
call StartTimerBJ(udg_times[123], true, 0.05)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_yanshiqiang_1 takes nothing returns nothing
set gg_trg_yanshiqiang_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_yanshiqiang_1 , 3 , 0x41303958)
call TriggerAddAction(gg_trg_yanshiqiang_1, function Trig_yanshiqiang_1Actions)
endfunction
function Trig_yanshiqiang_2Func003Func002Func003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitAliveBJ(udg_danwei2[1]) == true ) and ( GetUnitTypeId(udg_danwei2[1]) != 0x6530304F ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[1])
if ( ( ( ( ( AngleBetweenPoints(udg_dian2[123], udg_dian2[124]) - AngleBetweenPoints(udg_dian2[1], udg_dian2[0]) ) >= 270.00 ) and ( ( AngleBetweenPoints(udg_dian2[123], udg_dian2[124]) - AngleBetweenPoints(udg_dian2[1], udg_dian2[0]) ) <= 450.00 ) ) or ( ( ( AngleBetweenPoints(udg_dian2[123], udg_dian2[124]) - AngleBetweenPoints(udg_dian2[1], udg_dian2[0]) ) >= - 90.00 ) and ( ( AngleBetweenPoints(udg_dian2[123], udg_dian2[124]) - AngleBetweenPoints(udg_dian2[1], udg_dian2[0]) ) <= 90.00 ) ) or ( ( ( AngleBetweenPoints(udg_dian2[123], udg_dian2[124]) - AngleBetweenPoints(udg_dian2[1], udg_dian2[0]) ) >= - 450.00 ) and ( ( AngleBetweenPoints(udg_dian2[123], udg_dian2[124]) - AngleBetweenPoints(udg_dian2[1], udg_dian2[0]) ) <= - 270.00 ) ) ) ) then
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], 15.00, AngleBetweenPoints(udg_dian2[123], udg_dian2[124]))
else
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], 15.00, AngleBetweenPoints(udg_dian2[124], udg_dian2[123]))
endif
if ( ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[124]) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[123])) == true ) ) then
call UnitDamageTarget(udg_danwei2[123], udg_danwei2[1], ( 2.50 + ( 0.50 * I2R(GetUnitAbilityLevel(udg_danwei2[123], 0x41303958)) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_HERO) == true ) ) then
call UnitDamageTarget(udg_danwei2[124], udg_danwei2[124], 0.05, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
else
call UnitDamageTarget(udg_danwei2[124], udg_danwei2[124], 0.02, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
endif
call GroupAddUnit(udg_danweizu2[124], udg_danwei2[1])
else
endif
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", udg_dian2[2]))
if ( ( IsTerrainPathableBJ(udg_dian2[2], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[2]))
else
endif
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[2])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_yanshiqiang_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu2[123]=( udg_zhengshu2[123] + 1 )
if ( ( IsUnitType(udg_danwei2[124], UNIT_TYPE_DEAD) == false ) ) then
set udg_aXUNHUAN[117]=1
loop
exitwhen udg_aXUNHUAN[117] > 7
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[124], ( 75.00 * ( I2R(udg_aXUNHUAN[117]) - 4.00 ) ), ( AngleBetweenPoints(udg_dian2[123], udg_dian2[124]) + 90.00 ))
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(150.00 , udg_dian2[1])
call ForGroupBJ(udg_xuanqu, function Trig_yanshiqiang_2Func003Func002Func003A)
call DestroyGroup(udg_xuanqu)
if ( ( ( udg_zhengshu2[123] == 2 ) or ( udg_zhengshu2[123] == 4 ) or ( udg_zhengshu2[123] == 6 ) ) ) then
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[123]), 0x6530305A, udg_dian2[1], AngleBetweenPoints(udg_dian2[123], udg_dian2[124]))
if ( ( GetUnitAbilityLevel(udg_danwei2[123], 0x41303232) == 1 ) ) then
call UnitApplyTimedLife(udg_danwei2[0], 0x42544C46, ( ( 5.00 - ( 0.05 * I2R(udg_zhengshu2[123]) ) ) + ( GetUnitState(udg_danwei2[123], UNIT_STATE_MANA) / 500.00 ) ))
else
call UnitApplyTimedLife(udg_danwei2[0], 0x42544C46, ( 5.00 - ( 0.05 * I2R(udg_zhengshu2[123]) ) ))
endif
call s__maphack_SetHeight(udg_danwei2[0] , ( 75.00 * I2R(( udg_zhengshu2[123] / 2 )) ) , ( 300.00 * I2R(( udg_zhengshu2[123] / 2 )) ))
call GroupAddUnit(udg_danweizu2[123], udg_danwei2[0])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", udg_dian2[1]))
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[1])
else
endif
set udg_aXUNHUAN[117]=udg_aXUNHUAN[117] + 1
endloop
call GroupClear(udg_danweizu2[124])
else
call PauseTimer(udg_times[123])
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_yanshiqiang_2 takes nothing returns nothing
set gg_trg_yanshiqiang_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_yanshiqiang_2, udg_times[123])
call TriggerAddAction(gg_trg_yanshiqiang_2, function Trig_yanshiqiang_2Actions)
endfunction
function Trig_yanshiqiang_3Conditions takes nothing returns boolean
return ( ( GetDyingUnit() == udg_danwei2[124] ) )
endfunction
function Trig_yanshiqiang_3Func003A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
call KillUnit(udg_danwei2[0])
set udg_danwei2[0]=null
endfunction
function Trig_yanshiqiang_3Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call PauseTimer(udg_times[123])
call DestroyGroup(udg_danweizu2[124])
call ForGroupBJ(udg_danweizu2[123], function Trig_yanshiqiang_3Func003A)
call UnitRemoveAbility(udg_danwei2[123], 0x41304A49)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[123]), 0x41303958, true)
set udg_danwei2[123]=null
set udg_danwei2[124]=null
call RemoveLocation(udg_dian2[123])
call RemoveLocation(udg_dian2[124])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_yanshiqiang_3 takes nothing returns nothing
set gg_trg_yanshiqiang_3=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_yanshiqiang_3, EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gg_trg_yanshiqiang_3, Condition(function Trig_yanshiqiang_3Conditions))
call TriggerAddAction(gg_trg_yanshiqiang_3, function Trig_yanshiqiang_3Actions)
endfunction
function Trig_yanshiqiang_4Actions takes nothing returns nothing
call KillUnit(udg_danwei2[124])
endfunction
function InitTrig_yanshiqiang_4 takes nothing returns nothing
set gg_trg_yanshiqiang_4=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_yanshiqiang_4 , 3 , 0x41304A49)
call TriggerAddAction(gg_trg_yanshiqiang_4, function Trig_yanshiqiang_4Actions)
endfunction
function Trig_gangcilianchengFunc012A takes nothing returns nothing
set udg_danwei[233]=GetEnumUnit()
if ( ( IsUnitInGroup(udg_danwei[233], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei[233], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitAliveBJ(udg_danwei[233]) == true ) and ( IsUnitEnemy(udg_danwei[233], GetOwningPlayer(udg_danwei[230])) == true ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei[233])
call s__baka_IssueTargetOrder2(udg_danwei[231] , "thunderbolt" , udg_danwei[233])
if ( ( GetUnitAbilityLevel(udg_danwei[230], 0x41303232) == 1 ) ) then
call UnitDamageTarget(udg_danwei[230], udg_danwei[233], ( ( 50.00 + ( GetUnitState(udg_danwei[230], UNIT_STATE_MANA) * 0.10 ) ) + ( 50.00 * I2R(GetUnitAbilityLevel(udg_danwei[230], 0x4155696D)) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
call UnitDamageTarget(udg_danwei[230], udg_danwei[233], ( 50.00 + ( 50.00 * I2R(GetUnitAbilityLevel(udg_danwei[230], 0x4155696D)) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
endif
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Undead\\Impale\\ImpaleHitTarget.mdl", udg_dian2[0]))
call RemoveLocation(udg_dian2[0])
else
call GroupRemoveUnit(udg_danweizu[50], udg_danwei[233])
endif
set udg_danwei[233]=null
endfunction
function Trig_gangcilianchengActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei[230]=GetTriggerUnit()
call SetUnitAnimation(udg_danwei[230], "stand Victory")
set udg_dian[195]=GetUnitLoc(udg_danwei[230])
set udg_dian[196]=GetSpellTargetLoc()
set udg_danwei[231]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[230]), 0x65303130, udg_dian[196], 0.00)
call UnitApplyTimedLife(udg_danwei[231], 0x42487765, 0.50)
call UnitAddAbility(udg_danwei[231], 0x41303033)
set udg_aXUNHUAN[118]=1
loop
exitwhen udg_aXUNHUAN[118] > 5
set udg_aXUNHUAN[119]=1
loop
exitwhen udg_aXUNHUAN[119] > ( 6 + ( 2 * udg_aXUNHUAN[118] ) )
set udg_dian2[0]=PolarProjectionBJ(udg_dian[196], ( 75.00 * I2R(udg_aXUNHUAN[118]) ), ( ( 360.00 / ( 6.00 + ( I2R(udg_aXUNHUAN[118]) * 2.00 ) ) ) * I2R(udg_aXUNHUAN[119]) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Undead\\Impale\\ImpaleMissTarget.mdl", udg_dian2[0]))
call RemoveLocation(udg_dian2[0])
set udg_aXUNHUAN[119]=udg_aXUNHUAN[119] + 1
endloop
set udg_aXUNHUAN[118]=udg_aXUNHUAN[118] + 1
endloop
set udg_zhengshu2[103]=0
set udg_danweizu[50]=YDWEGetUnitsInRangeOfLocAllNull(400.00 , udg_dian[196])
call ForGroupBJ(udg_danweizu[50], function Trig_gangcilianchengFunc012A)
call StartTimerBJ(udg_times[103], true, 0.03)
call RemoveLocation(udg_dian[195])
call RemoveLocation(udg_dian[196])
set udg_danwei[230]=null
set udg_danwei[231]=null
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_gangciliancheng takes nothing returns nothing
set gg_trg_gangciliancheng=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_gangciliancheng , 3 , 0x4155696D)
call TriggerAddAction(gg_trg_gangciliancheng, function Trig_gangcilianchengActions)
endfunction
function Trig_gangciliancheng_2Func003Func001A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
call UnitAddAbility(udg_danwei2[0], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[0] , 0.00 , 0.00)
call UnitRemoveAbility(udg_danwei2[0], 0x41726176)
set udg_danwei2[0]=null
endfunction
function Trig_gangciliancheng_2Func003Func004A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
call UnitAddAbility(udg_danwei2[0], 0x41726176)
if ( ( udg_zhengshu2[103] <= 10 ) ) then
call s__maphack_SetHeight(udg_danwei2[0] , ( s__maphack_GetHeight(udg_danwei2[0]) + 30.00 ) , 0.00)
else
call s__maphack_SetHeight(udg_danwei2[0] , ( s__maphack_GetHeight(udg_danwei2[0]) - 30.00 ) , 0.00)
endif
call UnitRemoveAbility(udg_danwei2[0], 0x41726176)
set udg_danwei2[0]=null
endfunction
function Trig_gangciliancheng_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu2[103]=( udg_zhengshu2[103] + 1 )
if ( ( udg_zhengshu2[103] <= 20 ) ) then
call ForGroupBJ(udg_danweizu[50], function Trig_gangciliancheng_2Func003Func004A)
else
call ForGroupBJ(udg_danweizu[50], function Trig_gangciliancheng_2Func003Func001A)
call DestroyGroup(udg_danweizu[50])
call PauseTimer(udg_times[103])
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_gangciliancheng_2 takes nothing returns nothing
set gg_trg_gangciliancheng_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_gangciliancheng_2, udg_times[103])
call TriggerAddAction(gg_trg_gangciliancheng_2, function Trig_gangciliancheng_2Actions)
endfunction
function Trig_ganghuajiazhiConditions takes nothing returns boolean
return ( ( GetLearnedSkill() == 0x4173736B ) )
endfunction
function Trig_ganghuajiazhiActions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
if ( ( GetUnitAbilityLevel(udg_danwei2[0], 0x4173736B) == 1 ) ) then
call UnitAddAbility(udg_danwei2[0], 0x41304457)
else
call SetUnitAbilityLevel(udg_danwei2[0], 0x41304456, GetUnitAbilityLevel(udg_danwei2[0], 0x4173736B))
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_ganghuajiazhi takes nothing returns nothing
set gg_trg_ganghuajiazhi=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_ganghuajiazhi, EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(gg_trg_ganghuajiazhi, Condition(function Trig_ganghuajiazhiConditions))
call TriggerAddAction(gg_trg_ganghuajiazhi, function Trig_ganghuajiazhiActions)
endfunction
function Trig_zhenlizhimenFunc012A takes nothing returns nothing
set udg_danwei[236]=GetEnumUnit()
if ( ( IsUnitInGroup(udg_danwei[236], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei[236], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitAliveBJ(udg_danwei[236]) == true ) and ( IsUnitEnemy(udg_danwei[236], GetOwningPlayer(udg_danwei[234])) == true ) and ( GetUnitDefaultMoveSpeed(udg_danwei[236]) > 0.00 ) ) then
else
call GroupRemoveUnit(udg_danweizu[51], udg_danwei[236])
endif
set udg_danwei[236]=null
endfunction
function Trig_zhenlizhimenActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei[234]=GetTriggerUnit()
set udg_dian[199]=GetSpellTargetLoc()
set udg_dian[200]=GetUnitLoc(udg_danwei[234])
set udg_dian[201]=PolarProjectionBJ(udg_dian[200], 200.00, AngleBetweenPoints(udg_dian[199], udg_dian[200]))
set udg_danwei[235]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[234]), 0x65303146, udg_dian[201], AngleBetweenPoints(udg_dian[200], udg_dian[199]))
call UnitApplyTimedLife(udg_danwei[235], 0x42487765, 4.20)
call SetUnitAnimation(udg_danwei[235], "stand 2")
call SetUnitAnimation(udg_danwei[234], "stand Victory")
set udg_Danwei[172]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[234]), 0x65303846, udg_dian[199], 270.00)
set udg_danweizu[51]=YDWEGetUnitsInRangeOfLocAllNull(400.00 , udg_dian[199])
call ForGroupBJ(udg_danweizu[51], function Trig_zhenlizhimenFunc012A)
set udg_zhengshu2[102]=0
call StartTimerBJ(udg_times[102], true, 0.04)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_zhenlizhimen takes nothing returns nothing
set gg_trg_zhenlizhimen=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_zhenlizhimen , 3 , 0x41304133)
call TriggerAddAction(gg_trg_zhenlizhimen, function Trig_zhenlizhimenActions)
endfunction
function Trig_zhenlizhimen_2Func003Func002Func003Func003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitInGroup(udg_danwei2[1], udg_danweizu[51]) == true ) ) then
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], 20.00, AngleBetweenPoints(udg_dian[199], udg_dian[201]))
if ( ( IsTerrainPathableBJ(udg_dian2[2], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[2]))
else
endif
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_zhenlizhimen_2Func003Func002Func004A takes nothing returns nothing
set udg_danwei[236]=GetEnumUnit()
set udg_dian2[1]=GetUnitLoc(udg_danwei[236])
if ( ( udg_zhengshu2[102] <= 10 ) ) then
set udg_dian2[2]=PolarProjectionBJ(udg_dian[199], ( DistanceBetweenPoints(udg_dian[199], udg_dian2[1]) * ( 3.00 / 4.00 ) ), AngleBetweenPoints(udg_dian[199], udg_dian2[1]))
else
set udg_dian2[2]=PolarProjectionBJ(udg_dian[199], ( ( DistanceBetweenPoints(udg_dian[199], udg_dian[201]) + 150.00 ) * ( ( I2R(udg_zhengshu2[102]) - 10.00 ) / 30.00 ) ), AngleBetweenPoints(udg_dian[199], udg_dian[201]))
endif
if ( ( IsTerrainPathableBJ(udg_dian2[2], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei[236], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei[236], GetLocationY(udg_dian2[2]))
else
endif
set udg_danwei[236]=null
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
endfunction
function Trig_zhenlizhimen_2Func003Func002Func005Func001A takes nothing returns nothing
set udg_danwei[236]=GetEnumUnit()
call UnitDamageTarget(udg_danwei[234], udg_danwei[236], ( ( 3.50 * I2R(GetHeroInt(udg_danwei[234], true)) ) + ( I2R(GetUnitAbilityLevel(udg_danwei[234], 0x41304133)) * ( 0.50 * I2R(GetHeroInt(udg_danwei[234], true)) ) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
set udg_danwei[236]=null
endfunction
function Trig_zhenlizhimen_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu2[102]=( udg_zhengshu2[102] + 1 )
if ( ( udg_zhengshu2[102] <= 100 ) ) then
if ( ( udg_zhengshu2[102] <= 40 ) ) then
if ( ( udg_zhengshu2[102] <= 10 ) ) then
call SetUnitScale(udg_Danwei[172], ( 10.00 - ( 1.00 * I2R(udg_zhengshu2[102]) ) ), ( 10.00 - ( 1.00 * I2R(udg_zhengshu2[102]) ) ), ( 10.00 - ( 1.00 * I2R(udg_zhengshu2[102]) ) ))
if ( ( udg_zhengshu2[102] == 10 ) ) then
call KillUnit(udg_Danwei[172])
set udg_Danwei[172]=null
else
endif
else
endif
call ForGroupBJ(udg_danweizu[51], function Trig_zhenlizhimen_2Func003Func002Func004A)
if ( ( udg_zhengshu2[102] == 35 ) ) then
call ForGroupBJ(udg_danweizu[51], function Trig_zhenlizhimen_2Func003Func002Func005Func001A)
set udg_aXUNHUAN[120]=1
loop
exitwhen udg_aXUNHUAN[120] > 9
set udg_dian2[1]=PolarProjectionBJ(udg_dian[201], ( 50.00 * ( I2R(udg_aXUNHUAN[120]) - 5.00 ) ), ( AngleBetweenPoints(udg_dian[199], udg_dian[200]) + 90.00 ))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Undead\\UndeadDissipate\\UndeadDissipate.mdl", udg_dian2[1]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Undead\\DarkRitual\\DarkRitualTarget.mdl", udg_dian2[1]))
call RemoveLocation(udg_dian2[1])
set udg_aXUNHUAN[120]=udg_aXUNHUAN[120] + 1
endloop
else
endif
else
if ( ( udg_zhengshu2[102] == 58 ) ) then
call SetUnitTimeScale(udg_danwei[235], 0.00)
else
endif
set udg_aXUNHUAN[121]=1
loop
exitwhen udg_aXUNHUAN[121] > 9
set udg_dian2[0]=PolarProjectionBJ(udg_dian[201], ( 50.00 * ( I2R(udg_aXUNHUAN[121]) - 5.00 ) ), ( AngleBetweenPoints(udg_dian[199], udg_dian[200]) + 90.00 ))
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(100.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_zhenlizhimen_2Func003Func002Func003Func003A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[0])
set udg_aXUNHUAN[121]=udg_aXUNHUAN[121] + 1
endloop
endif
else
if ( ( udg_zhengshu2[102] <= 105 ) ) then
call SetUnitVertexColor(udg_danwei[235], 255, 255, 255, ( 51 * ( 105 - udg_zhengshu2[102] ) ))
else
call RemoveUnit(udg_danwei[235])
call DestroyGroup(udg_danweizu[51])
set udg_danwei[234]=null
set udg_danwei[235]=null
call RemoveLocation(udg_dian[199])
call RemoveLocation(udg_dian[200])
call RemoveLocation(udg_dian[201])
call PauseTimer(udg_times[102])
endif
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_zhenlizhimen_2 takes nothing returns nothing
set gg_trg_zhenlizhimen_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_zhenlizhimen_2, udg_times[102])
call TriggerAddAction(gg_trg_zhenlizhimen_2, function Trig_zhenlizhimen_2Actions)
endfunction
function Trig_xianzhezhishiActions takes nothing returns nothing
set udg_danwei[237]=GetTriggerUnit()
set udg_danwei[238]=GetSpellTargetUnit()
set udg_dian[202]=GetUnitLoc(udg_danwei[237])
set udg_dian[203]=GetUnitLoc(udg_danwei[238])
set udg_danwei[239]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[237]), 0x65303147, udg_dian[203], 0)
call UnitApplyTimedLife(udg_danwei[239], 0x42487765, 1.25)
call SetUnitAnimation(udg_danwei[239], "birth")
call AddLightningLoc("AFOD", udg_dian[202], udg_dian[203])
set udg_shandian[0]=bj_lastCreatedLightning
call AddUnitAnimationProperties(udg_danwei[237], "channel", true)
call s__Unit_PauseUnitMU(udg_danwei[237] , true , "贤者之石")
call s__Unit_PauseUnitMU(udg_danwei[238] , true , "贤者之石目标")
call YDWEJumpTimer(udg_danwei[239] , AngleBetweenPoints(udg_dian[203], udg_dian[202]) , DistanceBetweenPoints(udg_dian[203], udg_dian[202]) , 1.50 , 0.01 , 0.00)
call StartTimerBJ(udg_jishiqi[70], false, 1.50)
set udg_Danwei[37]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[237]), 0x65303649, udg_dian[202], 270.00)
call SetUnitManaBJ(udg_Danwei[37], 255.00)
call SetUnitColor(udg_Danwei[37], PLAYER_COLOR_YELLOW)
call SetUnitTimeScale(udg_Danwei[37], ( 1.00 / 1.25 ))
call GroupAddUnit(udg_Danweizu[37], udg_Danwei[37])
set udg_Danwei[37]=null
endfunction
function InitTrig_xianzhezhishi takes nothing returns nothing
set gg_trg_xianzhezhishi=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_xianzhezhishi , 3 , 0x41303232)
call TriggerAddAction(gg_trg_xianzhezhishi, function Trig_xianzhezhishiActions)
endfunction
function Trig_xianzhezhishi2Func002A takes nothing returns nothing
set udg_Danwei[37]=GetEnumUnit()
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[37])) + 1 ) == ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei[237])) + 1 ) ) ) then
call SetUnitTimeScale(udg_Danwei[37], 0.00)
call SetUnitManaBJ(udg_Danwei[37], 250.00)
else
endif
set udg_Danwei[37]=null
endfunction
function Trig_xianzhezhishi2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( R2I(GetUnitLifePercent(udg_danwei[238])) <= 33 ) and ( IsUnitDeadBJ(udg_danwei[237]) == false ) and ( IsUnitDeadBJ(udg_danwei[238]) == false ) ) then
if ( ( IsUnitType(udg_danwei[238], UNIT_TYPE_HERO) == true ) ) then
call SetUnitLifePercentBJ(udg_danwei[237], ( GetUnitLifePercent(udg_danwei[237]) + 25.00 ))
else
call SetUnitLifePercentBJ(udg_danwei[237], ( GetUnitLifePercent(udg_danwei[237]) + 10.00 ))
endif
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Undead\\UndeadDissipate\\UndeadDissipate.mdl", udg_dian[203]))
call UnitDamageTarget(udg_danwei[237], udg_danwei[238], 100000.00, true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call UnitDamageTarget(udg_danwei[237], udg_danwei[238], 100000.00, true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)
else
call UnitDamageTarget(udg_danwei[237], udg_danwei[238], ( GetUnitState(udg_danwei[237], UNIT_STATE_MANA) / 3.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
endif
call ForGroupBJ(udg_Danweizu[37], function Trig_xianzhezhishi2Func002A)
call s__Unit_PauseUnitMU(udg_danwei[237] , false , "贤者之石")
call s__Unit_PauseUnitMU(udg_danwei[238] , false , "贤者之石目标")
call AddUnitAnimationProperties(udg_danwei[237], "channel", false)
call DestroyLightning(udg_shandian[0])
set udg_danwei[237]=null
set udg_danwei[238]=null
call RemoveLocation(udg_dian[202])
call RemoveLocation(udg_dian[203])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_xianzhezhishi2 takes nothing returns nothing
set gg_trg_xianzhezhishi2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_xianzhezhishi2, udg_jishiqi[70])
call TriggerAddAction(gg_trg_xianzhezhishi2, function Trig_xianzhezhishi2Actions)
endfunction
function Trig_diyuhuoyan_1Actions takes nothing returns nothing
set udg_Danwei[42]=GetTriggerUnit()
set udg_dian[204]=GetUnitLoc(udg_Danwei[42])
set udg_dian[205]=GetSpellTargetLoc()
set bj_forLoopAIndex=244
set bj_forLoopAIndexEnd=248
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_danwei[bj_forLoopAIndex]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[42]), 0x65303149, udg_dian[204], AngleBetweenPoints(udg_dian[204], udg_dian[205]))
call GroupAddUnit(udg_DAZE[0], udg_danwei[bj_forLoopAIndex])
call GroupAddUnit(udg_DAZE[1], udg_danwei[bj_forLoopAIndex])
call UnitApplyTimedLife(udg_danwei[bj_forLoopAIndex], 0x42487765, 4.00)
call SetUnitTimeScale(udg_danwei[bj_forLoopAIndex], 0.00)
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call SetUnitManaBJ(udg_danwei[244], ( ( I2R(GetHeroInt(udg_Danwei[42], true)) * 0.20 ) + ( 8.00 * I2R(GetUnitAbilityLevel(udg_Danwei[42], 0x41303237)) ) ))
set udg_zhengshu[69]=0
call RemoveLocation(udg_dian[204])
call RemoveLocation(udg_dian[205])
call StartTimerBJ(udg_jishiqi[73], true, 0.02)
endfunction
function InitTrig_diyuhuoyan_1 takes nothing returns nothing
set gg_trg_diyuhuoyan_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_diyuhuoyan_1 , 3 , 0x41303237)
call TriggerAddAction(gg_trg_diyuhuoyan_1, function Trig_diyuhuoyan_1Actions)
endfunction
function Trig_diyuhuoyan_2Func001Func005Func002A takes nothing returns nothing
set udg_danwei[241]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[241], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei[241], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei[241], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei[241], GetOwningPlayer(udg_danwei[244])) == true ) ) then
call SetUnitManaBJ(udg_danwei[244], ( GetUnitState(udg_danwei[244], UNIT_STATE_MANA) * 0.99 ))
call UnitDamageTarget(udg_Danwei[42], udg_danwei[241], GetUnitState(udg_danwei[244], UNIT_STATE_MANA), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call UnitAddAbility(udg_danwei[241], 0x41304B55)
call GroupAddUnit(udg_danweizu2[394], udg_danwei[241])
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\CarrionSwarm\\CarrionSwarmDamage.mdl", udg_danwei[241], "chest"))
else
endif
set udg_danwei[241]=null
endfunction
function Trig_diyuhuoyan_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_zhengshu[69] <= 50 ) and ( IsUnitType(udg_danwei[244], UNIT_TYPE_DEAD) == false ) ) then
set udg_dian[204]=GetUnitLoc(udg_danwei[244])
set udg_dian[205]=PolarProjectionBJ(udg_dian[204], 40.00, GetUnitFacing(udg_danwei[244]))
set udg_zhengshu[69]=( udg_zhengshu[69] + 1 )
if ( ( udg_zhengshu[69] >= 15 ) ) then
set udg_danweizu[53]=YDWEGetUnitsInRangeOfLocAllNull(200.00 , udg_dian[204])
call ForGroupBJ(udg_danweizu[53], function Trig_diyuhuoyan_2Func001Func005Func002A)
call DestroyGroup(udg_danweizu[53])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayTarget.mdl", udg_dian[205]))
set udg_danwei[239]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[244]), 0x65303149, udg_dian[204], GetUnitFacing(udg_danwei[244]))
call SetUnitUserData(udg_danwei[239], 50)
call GroupAddUnit(udg_danweizu2[352], udg_danwei[239])
set udg_danwei[239]=null
set bj_forLoopAIndex=244
set bj_forLoopAIndexEnd=248
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ( ( IsTerrainPathableBJ(udg_dian[205], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_danwei[bj_forLoopAIndex], GetLocationX(udg_dian[205]))
call SetUnitY(udg_danwei[bj_forLoopAIndex], GetLocationY(udg_dian[205]))
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
else
endif
call RemoveLocation(udg_dian[204])
call RemoveLocation(udg_dian[205])
else
set udg_zhengshu[69]=0
call PauseTimer(udg_jishiqi[73])
set bj_forLoopAIndex=244
set bj_forLoopAIndexEnd=248
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call SetUnitUserData(udg_danwei[bj_forLoopAIndex], ( 40 + ( 5 * ( bj_forLoopAIndex - 243 ) ) ))
call GroupAddUnit(udg_danweizu2[352], udg_danwei[bj_forLoopAIndex])
set udg_danwei[bj_forLoopAIndex]=null
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
set udg_Danwei[42]=null
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_diyuhuoyan_2 takes nothing returns nothing
set gg_trg_diyuhuoyan_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_diyuhuoyan_2, udg_jishiqi[73])
call TriggerAddAction(gg_trg_diyuhuoyan_2, function Trig_diyuhuoyan_2Actions)
endfunction
function Trig_diyuhuoyan_3Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[352]) == false ) )
endfunction
function Trig_diyuhuoyan_3Func001Func002Func005A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
call UnitRemoveAbility(udg_danwei2[1], 0x41304B55)
call UnitRemoveBuffBJ(0x42303253, udg_danwei2[1])
set udg_danwei2[1]=null
endfunction
function Trig_diyuhuoyan_3Func001A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
if ( ( GetUnitUserData(udg_danwei2[0]) > 0 ) ) then
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
call SetUnitScale(udg_danwei2[0], ( I2R(GetUnitUserData(udg_danwei2[0])) * 0.10 ), ( I2R(GetUnitUserData(udg_danwei2[0])) * 0.10 ), ( I2R(GetUnitUserData(udg_danwei2[0])) * 0.10 ))
else
call GroupRemoveUnit(udg_danweizu2[352], udg_danwei2[0])
call UnitApplyTimedLife(udg_danwei2[0], 0x42487765, ( 0.02 * I2R(CountUnitsInGroup(udg_danweizu2[352])) ))
call ForGroupBJ(udg_danweizu2[394], function Trig_diyuhuoyan_3Func001Func002Func005A)
endif
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_diyuhuoyan_3Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[352], function Trig_diyuhuoyan_3Func001A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_diyuhuoyan_3 takes nothing returns nothing
set gg_trg_diyuhuoyan_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_diyuhuoyan_3, udg_Times[4])
call TriggerAddCondition(gg_trg_diyuhuoyan_3, Condition(function Trig_diyuhuoyan_3Conditions))
call TriggerAddAction(gg_trg_diyuhuoyan_3, function Trig_diyuhuoyan_3Actions)
endfunction
function Trig_lunrudao_1Actions takes nothing returns nothing
set udg_danwei[243]=GetSpellAbilityUnit()
set udg_dian[204]=GetUnitLoc(udg_danwei[243])
set udg_dian[206]=GetSpellTargetLoc()
set udg_zhengshu[68]=0
call IssuePointOrderByIdLoc(udg_danwei[243], 851986, udg_dian[206])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Demon\\DarkPortal\\DarkPortalTarget.mdl", udg_dian[204]))
call StartTimerBJ(udg_jishiqi[72], true, 0.02)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei[243]), 0x41303236, false)
call UnitAddAbility(udg_danwei[243], 0x4130344B)
call RemoveLocation(udg_dian[204])
endfunction
function InitTrig_lunrudao_1 takes nothing returns nothing
set gg_trg_lunrudao_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_lunrudao_1 , 3 , 0x41303236)
call TriggerAddAction(gg_trg_lunrudao_1, function Trig_lunrudao_1Actions)
endfunction
function Trig_lunrudao_2Actions takes nothing returns nothing
set udg_dian[204]=GetUnitLoc(udg_danwei[243])
set udg_dian[205]=PolarProjectionBJ(udg_dian[204], RMinBJ(( I2R(udg_zhengshu[68]) / 10.00 ), 80.00), AngleBetweenPoints(udg_dian[204], udg_dian[206]))
if ( ( DistanceBetweenPoints(udg_dian[204], udg_dian[206]) > 100.00 ) and ( IsUnitType(udg_danwei[243], UNIT_TYPE_DEAD) == false ) and ( UnitHasBuffBJ(udg_danwei[243], 0x42637963) == false ) and ( UnitHasBuffBJ(udg_danwei[243], 0x42637932) == false ) and ( UnitHasBuffBJ(udg_danwei[243], 0x4253544E) == false ) and ( UnitHasBuffBJ(udg_danwei[243], 0x42505345) == false ) ) then
if ( ( IsUnitPausedBJ(udg_danwei[243]) == false ) ) then
set udg_zhengshu[68]=( udg_zhengshu[68] + 1 )
call SetUnitVertexColor(udg_danwei[243], 128, 128, 128, IMaxBJ(( 255 - R2I(( DistanceBetweenPoints(udg_dian[204], udg_dian[206]) * 0.10 )) ), 50))
call SetUnitFacing(udg_danwei[243], AngleBetweenPoints(udg_dian[204], udg_dian[206]))
call SetUnitX(udg_danwei[243], GetLocationX(udg_dian[205]))
call SetUnitY(udg_danwei[243], GetLocationY(udg_dian[205]))
else
endif
else
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei[243]), 0x41303236, true)
call UnitRemoveAbility(udg_danwei[243], 0x4130344B)
call IssueImmediateOrderById(udg_danwei[243], 851972)
call PauseTimer(udg_jishiqi[72])
call SetUnitVertexColor(udg_danwei[243], 255, 255, 255, 255)
set udg_danwei[243]=null
call RemoveLocation(udg_dian[206])
endif
call RemoveLocation(udg_dian[204])
call RemoveLocation(udg_dian[205])
endfunction
function InitTrig_lunrudao_2 takes nothing returns nothing
set gg_trg_lunrudao_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_lunrudao_2, udg_jishiqi[72])
call TriggerAddAction(gg_trg_lunrudao_2, function Trig_lunrudao_2Actions)
endfunction
function Trig_lunrudao_3Actions takes nothing returns nothing
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei[243]), 0x41303236, true)
call UnitRemoveAbility(udg_danwei[243], 0x4130344B)
call PauseTimer(udg_jishiqi[72])
call SetUnitVertexColor(udg_danwei[243], 255, 255, 255, 255)
call IssueImmediateOrderById(udg_danwei[243], 851972)
set udg_danwei[243]=null
call RemoveLocation(udg_dian[206])
endfunction
function InitTrig_lunrudao_3 takes nothing returns nothing
set gg_trg_lunrudao_3=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_lunrudao_3 , 2 , 0x4130344B)
call TriggerAddAction(gg_trg_lunrudao_3, function Trig_lunrudao_3Actions)
endfunction
function Trig_xuhuan_1Actions takes nothing returns nothing
set udg_danwei[239]=GetSpellAbilityUnit()
set udg_danwei[240]=GetSpellTargetUnit()
set udg_dian[204]=GetUnitLoc(udg_danwei[239])
set udg_danwei[241]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[240]), 0x65303148, udg_dian[204], 0.00)
call SetUnitAbilityLevel(udg_danwei[241], 0x41303234, GetUnitAbilityLevel(udg_danwei[239], 0x41303235))
call s__baka_IssueTargetOrderById2(udg_danwei[241] , 852274 , udg_danwei[240])
call UnitApplyTimedLife(udg_danwei[241], 0x42487765, 0.50)
set udg_shishu2[20]=GetUnitState(udg_danwei[240], UNIT_STATE_LIFE)
set udg_danwei[239]=null
set udg_danwei[241]=null
call RemoveLocation(udg_dian[204])
endfunction
function InitTrig_xuhuan_1 takes nothing returns nothing
set gg_trg_xuhuan_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_xuhuan_1 , 3 , 0x41303235)
call TriggerAddAction(gg_trg_xuhuan_1, function Trig_xuhuan_1Actions)
endfunction
function Trig_xuhuan_2Conditions takes nothing returns boolean
return ( ( GetUnitTypeId(GetSummoningUnit()) == 0x65303148 ) and ( IsUnitIllusionBJ(GetSummonedUnit()) == true ) )
endfunction
function Trig_xuhuan_2Actions takes nothing returns nothing
set udg_danwei[242]=GetSummonedUnit()
set udg_danwei[239]=GetSummoningUnit()
set udg_dian[204]=GetUnitLoc(udg_danwei[240])
call SetUnitVertexColor(udg_danwei[242], 255, 255, 255, 125)
call SetUnitTimeScale(udg_danwei[242], 0.00)
call SetUnitFacing(udg_danwei[242], GetUnitFacing(udg_danwei[240]))
call SetUnitPathing(udg_danwei[242], false)
call s__Unit_PauseUnitMU(udg_danwei[242] , true , "虚幻梦境")
call SetUnitX(udg_danwei[242], GetLocationX(udg_dian[204]))
call SetUnitY(udg_danwei[242], GetLocationY(udg_dian[204]))
set udg_zhengshu2[20]=( 60 + ( 20 * GetUnitAbilityLevel(udg_danwei[239], 0x41303234) ) )
call StartTimerBJ(udg_jishiqi[71], true, 0.05)
set udg_danwei[239]=null
call RemoveLocation(udg_dian[204])
endfunction
function InitTrig_xuhuan_2 takes nothing returns nothing
set gg_trg_xuhuan_2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_xuhuan_2, EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(gg_trg_xuhuan_2, Condition(function Trig_xuhuan_2Conditions))
call TriggerAddAction(gg_trg_xuhuan_2, function Trig_xuhuan_2Actions)
endfunction
function Trig_xuhuan_3Actions takes nothing returns nothing
if ( ( udg_zhengshu2[20] >= 0 ) and ( IsUnitType(udg_danwei[242], UNIT_TYPE_DEAD) == false ) and ( UnitHasBuffBJ(udg_danwei[240], 0x42303033) == true ) and ( udg_shishu2[20] < ( GetUnitState(udg_danwei[240], UNIT_STATE_LIFE) + ( 200.00 + Pow(( 10000.00 * I2R(udg_zhengshu[( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei[240])) + 1 ) + 19 )]) ), 0.50) ) ) ) ) then
set udg_zhengshu2[20]=( udg_zhengshu2[20] - 1 )
call SetUnitLifePercentBJ(udg_danwei[240], RMinBJ(GetUnitLifePercent(udg_danwei[240]), GetUnitLifePercent(udg_danwei[242])))
call SetUnitLifePercentBJ(udg_danwei[242], RMinBJ(GetUnitLifePercent(udg_danwei[240]), GetUnitLifePercent(udg_danwei[242])))
call SetUnitManaPercentBJ(udg_danwei[240], RMinBJ(GetUnitManaPercent(udg_danwei[240]), GetUnitManaPercent(udg_danwei[242])))
call SetUnitManaPercentBJ(udg_danwei[242], RMinBJ(GetUnitManaPercent(udg_danwei[240]), GetUnitManaPercent(udg_danwei[242])))
call SetUnitLifePercentBJ(udg_danwei[240], RMaxBJ(GetUnitLifePercent(udg_danwei[242]), 1.00))
call SetUnitManaPercentBJ(udg_danwei[240], GetUnitManaPercent(udg_danwei[242]))
else
set udg_zhengshu2[20]=IMinBJ(( udg_zhengshu2[20] - 1 ), 0)
if ( ( udg_zhengshu2[20] >= - 20 ) ) then
if ( ( udg_zhengshu2[20] == - 1 ) ) then
call UnitRemoveBuffBJ(0x42303033, udg_danwei[240])
call ShowUnit(udg_danwei[242], false)
call UnitAddAbility(udg_danwei[242], 0x416C6F63)
set udg_dian[204]=GetUnitLoc(udg_danwei[242])
set udg_dian[205]=GetUnitLoc(udg_danwei[240])
if ( ( udg_danwei[242] != null ) ) then
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl", udg_dian[204]))
call SetUnitLifePercentBJ(udg_danwei[240], RMaxBJ(GetUnitLifePercent(udg_danwei[242]), 1.00))
call SetUnitX(udg_danwei[240], GetLocationX(udg_dian[204]))
call SetUnitY(udg_danwei[240], GetLocationY(udg_dian[204]))
else
endif
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl", udg_dian[205]))
call RemoveLocation(udg_dian[204])
call RemoveLocation(udg_dian[205])
else
endif
else
call RemoveUnit(udg_danwei[242])
set udg_danwei[240]=null
set udg_danwei[242]=null
endif
endif
endfunction
function InitTrig_xuhuan_3 takes nothing returns nothing
set gg_trg_xuhuan_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_xuhuan_3, udg_jishiqi[71])
call TriggerAddAction(gg_trg_xuhuan_3, function Trig_xuhuan_3Actions)
endfunction
function Trig_diyuweituo_1Actions takes nothing returns nothing
set udg_danwei[239]=GetTriggerUnit()
if ( ( UnitHasBuffBJ(udg_danwei[239], 0x42303034) == true ) and ( GetEventDamage() >= GetUnitState(udg_danwei[239], UNIT_STATE_LIFE) ) ) then
if ( ( ( IsUnitType(GetEventDamageSource(), UNIT_TYPE_STRUCTURE) == false ) or ( IsUnitAlly(GetTriggerUnit(), GetOwningPlayer(GetEventDamageSource())) == true ) ) ) then
call UnitRemoveBuffBJ(0x42303034, udg_danwei[239])
call SetUnitLifeBJ(udg_danwei[239], ( GetEventDamage() + GetUnitState(udg_danwei[239], UNIT_STATE_LIFE) ))
set udg_dian[204]=GetUnitLoc(udg_danwei[239])
set udg_danwei[241]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[239]), 0x6530314C, udg_dian[204], 0.00)
call s__baka_IssueTargetOrderById2(udg_danwei[241] , 852209 , udg_danwei[239])
call UnitApplyTimedLife(udg_danwei[241], 0x42487765, 0.50)
set udg_danwei[241]=null
call RemoveLocation(udg_dian[204])
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1 ) <= 10 ) ) then
set udg_danwei[250]=udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1 )]
else
set udg_danwei[250]=GetEventDamageSource()
endif
set udg_dian[204]=GetUnitLoc(udg_danwei[250])
set udg_dian[205]=PolarProjectionBJ(udg_dian[204], 128.00, ( GetUnitFacing(udg_danwei[250]) + 180.00 ))
set udg_aXUNHUAN[122]=1
loop
exitwhen udg_aXUNHUAN[122] > 3
set udg_danwei[241]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[239]), 0x6530314A, udg_dian[204], GetRandomReal(0, 360.00))
call UnitApplyTimedLife(udg_danwei[241], 0x42487765, 10.00)
set udg_danwei[241]=null
set udg_aXUNHUAN[122]=udg_aXUNHUAN[122] + 1
endloop
set udg_danwei[241]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[250]), 0x6530314E, udg_dian[205], AngleBetweenPoints(udg_dian[205], udg_dian[204]))
call s__baka_IssueTargetOrderById2(udg_danwei[241] , 852480 , udg_danwei[250])
call UnitApplyTimedLife(udg_danwei[241], 0x42487765, 6.00)
call SetUnitVertexColor(udg_danwei[241], 128, 128, 128, 128)
set udg_danwei[241]=null
call RemoveLocation(udg_dian[204])
call RemoveLocation(udg_dian[205])
else
call CreateTextTagUnitBJ("TRIGSTR_3338", udg_danwei[239], 64.00, 12.00, 100, 0.00, 0.00, 0)
call SetTextTagVelocity(bj_lastCreatedTextTag, 0.00, 0.05)
call SetTextTagPermanent(GetLastCreatedTextTag(), false)
call SetTextTagFadepoint(GetLastCreatedTextTag(), 2.00)
call SetTextTagLifespan(GetLastCreatedTextTag(), 3.00)
endif
else
endif
if ( ( UnitHasBuffBJ(udg_danwei[239], 0x42303037) == true ) and ( GetEventDamage() >= GetUnitState(udg_danwei[239], UNIT_STATE_LIFE) ) ) then
if ( ( IsUnitType(GetEventDamageSource(), UNIT_TYPE_STRUCTURE) == false ) ) then
call SetUnitLifeBJ(udg_danwei[239], ( GetEventDamage() + GetUnitState(udg_danwei[239], UNIT_STATE_LIFE) ))
else
call CreateTextTagUnitBJ("TRIGSTR_3339", udg_danwei[239], 64.00, 12.00, 100, 0.00, 0.00, 0)
call SetTextTagVelocity(bj_lastCreatedTextTag, 0.00, 0.05)
call SetTextTagPermanent(GetLastCreatedTextTag(), false)
call SetTextTagFadepoint(GetLastCreatedTextTag(), 2.00)
call SetTextTagLifespan(GetLastCreatedTextTag(), 3.00)
endif
else
endif
set udg_danwei[239]=null
endfunction
function InitTrig_diyuweituo_1 takes nothing returns nothing
set gg_trg_diyuweituo_1=CreateTrigger()
call YDWESyStemAnyUnitDamagedRegistTrigger(gg_trg_diyuweituo_1)
call TriggerAddAction(gg_trg_diyuweituo_1, function Trig_diyuweituo_1Actions)
endfunction
function Trig_diyuweituo_2Func012T takes nothing returns nothing
if ( ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x1472F467) == udg_zhengshu[s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei[249]))] ) ) then
call UnitRemoveBuffBJ(0x42637963, udg_danwei[249])
call UnitRemoveBuffBJ(0x42637932, udg_danwei[249])
call UnitRemoveBuffBJ(0x42303030, udg_danwei[249])
call UnitDamageTarget(udg_danwei[249], udg_danwei[250], ( Pow(( I2R(udg_zhengshu[( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei[249])) + 1 ) - 1 )]) + 1 ), 0.50) * 200.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call UnitDamageTarget(udg_danwei[250], udg_danwei[249], 1000000.00, true, false, ATTACK_TYPE_MAGIC, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call UnitDamageTarget(udg_danwei[250], udg_danwei[249], 1000000.00, true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_UNIVERSAL, WEAPON_TYPE_WHOKNOWS)
call KillUnit(udg_danwei[249])
set udg_dian[204]=GetUnitLoc(udg_danwei[249])
set udg_dian2[0]=GetUnitLoc(udg_danwei[250])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Undead\\RaiseSkeletonWarrior\\RaiseSkeleton.mdl", udg_dian[204]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Undead\\RaiseSkeletonWarrior\\RaiseSkeleton.mdl", udg_dian[204]))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Undead\\UndeadDissipate\\UndeadDissipate.mdl", udg_dian2[0]))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Undead\\UndeadDissipate\\UndeadDissipate.mdl", udg_dian2[0]))
else
endif
set udg_danwei[249]=null
set udg_danwei[250]=null
call RemoveLocation(udg_dian[204])
call RemoveLocation(udg_dian2[0])
endfunction
function Trig_diyuweituo_2Actions takes nothing returns nothing
local timer ydl_timer
local integer ydl_localvar_step=LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76)
set ydl_localvar_step=ydl_localvar_step + 3
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76, ydl_localvar_step)
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xECE825E7, ydl_localvar_step)
set udg_danwei[249]=GetSpellTargetUnit()
set udg_dian[204]=GetUnitLoc(udg_danwei[249])
call SetSoundPosition(gg_snd_xiaoaiRyinxiao, GetLocationX(udg_dian[204]), GetLocationY(udg_dian[204]), 500.00)
call PlaySoundBJ(gg_snd_xiaoaiRyinxiao)
call CreateTextTagUnitBJ("TRIGSTR_3340", udg_danwei[249], 64.00, 12.00, 100, 0.00, 0.00, 0)
call SetTextTagVelocity(bj_lastCreatedTextTag, 0.00, 0.05)
call SetTextTagPermanent(GetLastCreatedTextTag(), false)
call SetTextTagFadepoint(GetLastCreatedTextTag(), 2.00)
call SetTextTagLifespan(GetLastCreatedTextTag(), 3.00)
call RemoveLocation(udg_dian[204])
set ydl_timer=udg_jishiqi[74]
call SaveInteger(YDHT, GetHandleId(ydl_timer), 0x1472F467, udg_zhengshu[s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei[249]))])
call TimerStart(ydl_timer, 6.00, false, function Trig_diyuweituo_2Func012T)
call FlushChildHashtable(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step)
set ydl_timer=null
endfunction
function InitTrig_diyuweituo_2 takes nothing returns nothing
set gg_trg_diyuweituo_2=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_diyuweituo_2 , 3 , 0x41303241)
call TriggerAddAction(gg_trg_diyuweituo_2, function Trig_diyuweituo_2Actions)
endfunction
function Trig_yuanheng_1Func008A takes nothing returns nothing
set udg_danwei[241]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[241], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei[241], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei[241], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei[241], GetOwningPlayer(udg_danwei[251])) == true ) ) then
call UnitDamageTarget(udg_danwei[251], udg_danwei[241], ( I2R(GetHeroInt(udg_danwei[251], true)) * 4.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei[241]=null
endfunction
function Trig_yuanheng_1Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei[239]=GetTriggerUnit()
set udg_danwei[251]=GetTriggerUnit()
set udg_dian[208]=GetUnitLoc(udg_danwei[239])
set udg_aXUNHUAN[123]=1
loop
exitwhen udg_aXUNHUAN[123] > 20
set udg_danwei[241]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[239]), 0x6530314D, udg_dian[208], ( 18.00 * I2R(udg_aXUNHUAN[123]) ))
call UnitApplyTimedLife(udg_danwei[241], 0x42487765, ( 3.00 + ( 0.10 * I2R(udg_aXUNHUAN[123]) ) ))
set udg_danwei[241]=null
set udg_aXUNHUAN[123]=udg_aXUNHUAN[123] + 1
endloop
set udg_aXUNHUAN[124]=1
loop
exitwhen udg_aXUNHUAN[124] > 10
set udg_dian[204]=PolarProjectionBJ(udg_dian[208], 450.00, ( I2R(udg_aXUNHUAN[124]) * 36.00 ))
set udg_danwei[241]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[239]), 0x6530314B, udg_dian[204], ( I2R(udg_aXUNHUAN[124]) * 36.00 ))
call UnitApplyTimedLife(udg_danwei[241], 0x42487765, 4.00)
call GroupAddUnit(udg_danweizu[52], udg_danwei[241])
set udg_danwei[241]=null
call RemoveLocation(udg_dian[204])
set udg_aXUNHUAN[124]=udg_aXUNHUAN[124] + 1
endloop
set udg_danweizu[53]=YDWEGetUnitsInRangeOfLocAllNull(450.00 , udg_dian[208])
call ForGroupBJ(udg_danweizu[53], function Trig_yuanheng_1Func008A)
call DestroyGroup(udg_danweizu[53])
set udg_danwei[239]=null
call StartTimerBJ(udg_jishiqi[76], true, 0.05)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_yuanheng_1 takes nothing returns nothing
set gg_trg_yuanheng_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_yuanheng_1 , 3 , 0x41303242)
call TriggerAddAction(gg_trg_yuanheng_1, function Trig_yuanheng_1Actions)
endfunction
function Trig_yuanheng_2Func002A takes nothing returns nothing
set udg_danwei[241]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[241], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei[241], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei[241], GetOwningPlayer(udg_danwei[251])) == true ) ) then
set udg_dian[204]=GetUnitLoc(udg_danwei[241])
set udg_dian[205]=PolarProjectionBJ(udg_dian[208], 400.00, AngleBetweenPoints(udg_dian[204], udg_dian[208]))
if ( ( DistanceBetweenPoints(udg_dian[204], udg_dian[208]) > 400.00 ) ) then
call SetUnitX(udg_danwei[241], GetLocationX(udg_dian[205]))
call SetUnitY(udg_danwei[241], GetLocationY(udg_dian[205]))
else
endif
call RemoveLocation(udg_dian[204])
call RemoveLocation(udg_dian[205])
else
endif
set udg_danwei[241]=null
endfunction
function Trig_yuanheng_2Func004Func002Func002A takes nothing returns nothing
set udg_danwei[241]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[241], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei[241], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei[241], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei[241], GetOwningPlayer(udg_danwei[251])) == true ) ) then
call UnitDamageTarget(udg_danwei[251], udg_danwei[241], ( I2R(GetHeroInt(udg_danwei[251], true)) * 4.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei[241]=null
endfunction
function Trig_yuanheng_2Func004A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei[239]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[239], UNIT_TYPE_DEAD) == false ) ) then
set udg_dian[204]=GetUnitLoc(udg_danwei[239])
set udg_dian[205]=PolarProjectionBJ(udg_dian[208], 450.00, ( AngleBetweenPoints(udg_dian[208], udg_dian[204]) + 30.00 ))
call SetUnitX(udg_danwei[239], GetLocationX(udg_dian[205]))
call SetUnitY(udg_danwei[239], GetLocationY(udg_dian[205]))
call RemoveLocation(udg_dian[204])
call RemoveLocation(udg_dian[205])
else
set udg_danweizu[53]=YDWEGetUnitsInRangeOfLocAllNull(450.00 , udg_dian[208])
call ForGroupBJ(udg_danweizu[53], function Trig_yuanheng_2Func004Func002Func002A)
call DestroyGroup(udg_danweizu[53])
call GroupClear(udg_danweizu[52])
call PauseTimer(udg_jishiqi[76])
set udg_danwei[251]=null
call RemoveLocation(udg_dian[208])
endif
set udg_danwei[239]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_yuanheng_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danweizu[53]=YDWEGetUnitsInRangeOfLocAllNull(500.00 , udg_dian[208])
call ForGroupBJ(udg_danweizu[53], function Trig_yuanheng_2Func002A)
call DestroyGroup(udg_danweizu[53])
call ForGroupBJ(udg_danweizu[52], function Trig_yuanheng_2Func004A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_yuanheng_2 takes nothing returns nothing
set gg_trg_yuanheng_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_yuanheng_2, udg_jishiqi[76])
call TriggerAddAction(gg_trg_yuanheng_2, function Trig_yuanheng_2Actions)
endfunction
function Trig_diushouleiActions takes nothing returns nothing
set udg_danwei[254]=GetTriggerUnit()
set udg_dian[209]=GetUnitLoc(udg_danwei[254])
set udg_dian[210]=GetSpellTargetLoc()
set udg_danwei[255]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[254]), 0x6530314F, udg_dian[209], 0)
call PlaySoundOnUnitBJ(gg_snd_HeroShadowhunterMissileLaunch1, 100, udg_danwei[254])
call UnitApplyTimedLife(udg_danwei[255], 0x42487765, 1.00)
call YDWEJumpTimer(udg_danwei[255] , AngleBetweenPoints(udg_dian[209], udg_dian[210]) , DistanceBetweenPoints(udg_dian[209], udg_dian[210]) , 1.00 , 0.03 , 400.00)
call StartTimerBJ(udg_jishiqi[77], true, 0.04)
set udg_zhengshu2[376]=0
if ( ( GetUnitAbilityLevel(udg_danwei[254], 0x41304C49) > 0 ) ) then
set udg_zhengshuex[0]=GetUnitAbilityLevel(udg_danwei[254], 0x41304C49)
call UnitRemoveAbility(udg_danwei[254], 0x41304C49)
call UnitAddAbility(udg_danwei[254], 0x41304C49)
call SetUnitAbilityLevel(udg_danwei[254], 0x41304C49, udg_zhengshuex[0])
else
endif
endfunction
function InitTrig_diushoulei takes nothing returns nothing
set gg_trg_diushoulei=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_diushoulei , 3 , 0x41303244)
call TriggerAddAction(gg_trg_diushoulei, function Trig_diushouleiActions)
endfunction
function Trig_diushoulei2Func002Func001A takes nothing returns nothing
set udg_danwei[257]=GetEnumUnit()
call UnitAddAbility(udg_danwei[257], 0x41726176)
call s__maphack_SetHeight(udg_danwei[257] , 0.00 , 0.00)
call UnitRemoveAbility(udg_danwei[257], 0x41726176)
set udg_danwei[257]=null
endfunction
function Trig_diushoulei2Func002Func007Func001Func010A takes nothing returns nothing
set udg_danwei[257]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[257], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei[257], udg_danweizu2[369]) == false ) and ( IsUnitAliveBJ(udg_danwei[257]) == true ) and ( IsUnitEnemy(udg_danwei[257], GetOwningPlayer(udg_danwei[254])) == true ) ) then
call UnitDamageTarget(udg_danwei[254], udg_danwei[257], ( ( 200.00 + ( I2R(GetHeroAgi(udg_danwei[254], true)) * 2.00 ) ) + ( 150.00 * I2R(GetUnitAbilityLevel(udg_danwei[254], 0x41303244)) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
call GroupRemoveUnit(udg_danweizu[55], udg_danwei[257])
endif
set udg_danwei[257]=null
endfunction
function Trig_diushoulei2Func002Func007Func002A takes nothing returns nothing
set udg_danwei[257]=GetEnumUnit()
set udg_dian[212]=GetUnitLoc(udg_danwei[257])
set udg_dian2[0]=PolarProjectionBJ(udg_dian[212], ( RMaxBJ(( 325.00 - DistanceBetweenPoints(udg_dian[210], udg_dian[212]) ), 0.00) * 0.20 ), ( AngleBetweenPoints(udg_dian[210], udg_dian[212]) + GetRandomReal(- 60.00, 60.00) ))
if ( ( IsTerrainPathableBJ(udg_dian2[0], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei[257], GetLocationX(udg_dian2[0]))
call SetUnitY(udg_danwei[257], GetLocationY(udg_dian2[0]))
else
endif
call UnitAddAbility(udg_danwei[257], 0x41726176)
call s__maphack_SetHeight(udg_danwei[257] , ( s__maphack_GetHeight(udg_danwei[257]) - ( ( I2R(udg_zhengshu2[376]) - 35.00 ) * 5.00 ) ) , 0.00)
call UnitRemoveAbility(udg_danwei[257], 0x41726176)
set udg_danwei[257]=null
call RemoveLocation(udg_dian[212])
call RemoveLocation(udg_dian2[0])
endfunction
function Trig_diushoulei2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu2[376]=( udg_zhengshu2[376] + 1 )
if ( ( udg_zhengshu2[376] <= 45 ) ) then
if ( ( udg_zhengshu2[376] >= 25 ) ) then
if ( ( udg_zhengshu2[376] == 25 ) ) then
set udg_aXUNHUAN[128]=1
loop
exitwhen udg_aXUNHUAN[128] > 6
set udg_dian[211]=PolarProjectionBJ(udg_dian[210], GetRandomReal(25.00, 275.00), GetRandomReal(0, 360.00))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl", udg_dian[211]))
call RemoveLocation(udg_dian[211])
set udg_dian[211]=PolarProjectionBJ(udg_dian[210], GetRandomReal(25.00, 275.00), GetRandomReal(0, 360.00))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\Incinerate\\FireLordDeathExplode.mdl", udg_dian[211]))
call RemoveLocation(udg_dian[211])
set udg_aXUNHUAN[128]=udg_aXUNHUAN[128] + 1
endloop
set udg_danwei[256]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[254]), 0x65303150, udg_dian[210], 0)
call SetUnitTimeScale(udg_danwei[256], 0.01)
call UnitApplyTimedLife(udg_danwei[256], 0x42487765, 1.50)
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[254]), 0x65303150, udg_dian[210], 0)
call UnitApplyTimedLife(udg_danwei2[0], 0x42487765, 1.50)
set udg_danwei2[0]=null
set udg_danweizu[55]=YDWEGetUnitsInRangeOfLocAllNull(325.00 , udg_dian[210])
call ForGroupBJ(udg_danweizu[55], function Trig_diushoulei2Func002Func007Func001Func010A)
set udg_quyu[15]=null
else
endif
call ForGroupBJ(udg_danweizu[55], function Trig_diushoulei2Func002Func007Func002A)
else
endif
else
call ForGroupBJ(udg_danweizu[55], function Trig_diushoulei2Func002Func001A)
set udg_danwei[254]=null
set udg_danwei[255]=null
set udg_danwei[256]=null
call RemoveLocation(udg_dian[209])
call RemoveLocation(udg_dian[210])
call DestroyGroup(udg_danweizu[55])
call PauseTimer(udg_jishiqi[77])
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_diushoulei2 takes nothing returns nothing
set gg_trg_diushoulei2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_diushoulei2, udg_jishiqi[77])
call TriggerAddAction(gg_trg_diushoulei2, function Trig_diushoulei2Actions)
endfunction
function Trig_duochongjuji_1Actions takes nothing returns nothing
set udg_danwei[271]=GetTriggerUnit()
set udg_Zhengshu[116]=116
set udg_Shishu[udg_Zhengshu[116]]=GetRandomReal(0, 360.00)
set udg_Danwei[116]=GetSpellTargetUnit()
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei[271]), 0, 0, 5.00, ( ( "目标已锁定，当前目标数量： |cffffcc00" + ( I2S(( udg_Zhengshu[116] - 115 )) + ( " |r名，单体伤害：|cffff5050" + ( R2SW(( 100.00 * Pow(0.85, ( I2R(udg_Zhengshu[116]) - 116.00 )) ), 1, 0) + "%|r" ) ) ) ) + "" ))
set udg_Dian[116]=GetUnitLoc(udg_Danwei[116])
call UnitAddAbility(udg_Danwei[udg_Zhengshu[116]], 0x41304C4F)
call GroupAddUnit(udg_Danweizu[114], udg_Danwei[udg_Zhengshu[116]])
set udg_danwei[272]=GetSpellTargetUnit()
set udg_dian[216]=GetUnitLoc(udg_danwei[271])
set udg_zhengshu[71]=0
call StartTimerBJ(udg_jishiqi[78], false, 0.00)
set udg_Danwei[37]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[271]), 0x65303649, udg_dian[216], 270.00)
call SetUnitManaBJ(udg_Danwei[37], 255.00)
call SetUnitColor(udg_Danwei[37], PLAYER_COLOR_YELLOW)
call SetUnitTimeScale(udg_Danwei[37], ( 1.00 / 2.00 ))
call GroupAddUnit(udg_Danweizu[37], udg_Danwei[37])
set udg_Danwei[37]=null
if ( ( GetTriggerExecCount(GetTriggeringTrigger()) == 1 ) ) then
call TriggerRegisterPlayerSelectionEventBJ(gg_trg_duochongjuji_1_5, GetOwningPlayer(udg_danwei[271]), true)
else
endif
call EnableTrigger(gg_trg_duochongjuji_1_5)
call RemoveLocation(udg_dian[216])
if ( ( GetUnitAbilityLevel(udg_danwei[271], 0x41304C49) > 0 ) ) then
set udg_zhengshuex[0]=GetUnitAbilityLevel(udg_danwei[271], 0x41304C49)
call UnitRemoveAbility(udg_danwei[271], 0x41304C49)
call UnitAddAbility(udg_danwei[271], 0x41304C49)
call SetUnitAbilityLevel(udg_danwei[271], 0x41304C49, udg_zhengshuex[0])
else
endif
endfunction
function InitTrig_duochongjuji_1 takes nothing returns nothing
set gg_trg_duochongjuji_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_duochongjuji_1 , 3 , 0x41304C50)
call TriggerAddAction(gg_trg_duochongjuji_1, function Trig_duochongjuji_1Actions)
endfunction
function Trig_duochongjuji_1_5Conditions takes nothing returns boolean
return ( ( GetTriggerUnit() != udg_danwei[271] ) )
endfunction
function Trig_duochongjuji_1_5Actions takes nothing returns nothing
if ( ( udg_Zhengshu[116] < 120 ) and ( IsUnitInGroup(GetTriggerUnit(), udg_Danweizu[114]) == false ) and ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(udg_danwei[271])) == true ) ) then
set udg_dian2[0]=GetUnitLoc(GetTriggerUnit())
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_Dian[116]) < 1000.00 ) ) then
set udg_Zhengshu[116]=( udg_Zhengshu[116] + 1 )
set udg_Shishu[udg_Zhengshu[116]]=GetRandomReal(0, 360.00)
set udg_Danwei[udg_Zhengshu[116]]=GetTriggerUnit()
call UnitAddAbility(udg_Danwei[udg_Zhengshu[116]], 0x41304C4F)
call GroupAddUnit(udg_Danweizu[114], udg_Danwei[udg_Zhengshu[116]])
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei[271]), 0, 0, 5.00, ( ( "目标已锁定，当前目标数量： |cffffcc00" + ( I2S(( udg_Zhengshu[116] - 115 )) + ( " |r名，单体伤害：|cffff5050" + ( R2SW(( 100.00 * Pow(0.85, ( I2R(udg_Zhengshu[116]) - 116.00 )) ), 1, 0) + "%|r" ) ) ) ) + "" ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei[271]), 0, 0, 5.00, "TRIGSTR_6323")
endif
else
endif
call SelectUnitForPlayerSingle(udg_danwei[271], GetOwningPlayer(udg_danwei[271]))
endfunction
function InitTrig_duochongjuji_1_5 takes nothing returns nothing
set gg_trg_duochongjuji_1_5=CreateTrigger()
call TriggerAddCondition(gg_trg_duochongjuji_1_5, Condition(function Trig_duochongjuji_1_5Conditions))
call TriggerAddAction(gg_trg_duochongjuji_1_5, function Trig_duochongjuji_1_5Actions)
endfunction
function Trig_duochongjuji_2Func002Func003A takes nothing returns nothing
set udg_Danwei[37]=GetEnumUnit()
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[37])) + 1 ) == ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei[271])) + 1 ) ) ) then
call SetUnitColor(udg_Danwei[37], PLAYER_COLOR_LIGHT_GRAY)
call SetUnitTimeScale(udg_Danwei[37], 0.00)
call SetUnitManaBJ(udg_Danwei[37], 250.00)
else
endif
set udg_Danwei[37]=null
endfunction
function Trig_duochongjuji_2Func002Func007Func001A takes nothing returns nothing
set udg_Danwei[37]=GetEnumUnit()
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[37])) + 1 ) == ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei[271])) + 1 ) ) ) then
call SetUnitTimeScale(udg_Danwei[37], 0.00)
call SetUnitManaBJ(udg_Danwei[37], 250.00)
else
endif
set udg_Danwei[37]=null
endfunction
function Trig_duochongjuji_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu[71]=( udg_zhengshu[71] + 1 )
if ( ( udg_zhengshu[71] <= 40 ) and ( IsUnitType(udg_danwei[271], UNIT_TYPE_DEAD) == false ) ) then
if ( ( udg_zhengshu[71] == 1 ) ) then
set udg_Dian[89]=GetUnitLoc(udg_danwei[271])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[271]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304B57)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_danwei[271])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
call SetUnitAnimation(udg_danwei[271], "spell")
set udg_dian[216]=GetUnitLoc(udg_danwei[271])
set udg_dian[217]=GetUnitLoc(udg_danwei[272])
call SetUnitFacing(udg_danwei[271], AngleBetweenPoints(udg_dian[216], udg_dian[217]))
call RemoveLocation(udg_dian[216])
call RemoveLocation(udg_dian[217])
call StartTimerBJ(udg_jishiqi[78], true, 0.05)
else
endif
if ( ( udg_zhengshu[71] == 40 ) ) then
call ForGroupBJ(udg_Danweizu[37], function Trig_duochongjuji_2Func002Func007Func001A)
set udg_dian2[0]=GetUnitLoc(udg_danwei[271])
set udg_dian[217]=GetUnitLoc(udg_danwei[272])
call DisableTrigger(gg_trg_duochongjuji_1_5)
set udg_Zhengshu[117]=116
loop
exitwhen udg_Zhengshu[117] > udg_Zhengshu[116]
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[271]), 0x65303743, udg_dian2[0], AngleBetweenPoints(udg_dian2[0], udg_dian[217]))
call SetUnitUserData(udg_danwei2[1], udg_Zhengshu[117])
call SetUnitLifeBJ(udg_danwei2[1], 80.00)
call GroupAddUnit(udg_Danweizu[112], udg_danwei2[1])
set udg_danwei2[1]=null
set udg_aXUNHUAN[158]=1
loop
exitwhen udg_aXUNHUAN[158] > ( 9 - ( udg_Zhengshu[116] - 115 ) )
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[271]), 0x65303744, udg_dian2[0], AngleBetweenPoints(udg_dian2[0], udg_dian[217]))
call SetUnitUserData(udg_danwei2[1], udg_Zhengshu[117])
call GroupAddUnit(udg_Danweizu[113], udg_danwei2[1])
set udg_danwei2[1]=null
set udg_aXUNHUAN[158]=udg_aXUNHUAN[158] + 1
endloop
set udg_Zhengshu[117]=udg_Zhengshu[117] + 1
endloop
call StartTimerBJ(udg_Times[115], true, 0.01)
call PlaySoundBJ(gg_snd_m82a1)
set udg_dian[218]=PolarProjectionBJ(udg_dian2[0], 120.00, AngleBetweenPoints(udg_dian2[0], udg_dian[217]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\GyroCopter\\GyroCopterImpact.mdl", udg_dian[218]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\SteamTank\\SteamTankImpact.mdl", udg_dian[218]))
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian[217])
call RemoveLocation(udg_dian[218])
else
endif
else
set udg_Zhengshu[117]=116
loop
exitwhen udg_Zhengshu[117] > udg_Zhengshu[116]
call UnitRemoveAbility(udg_Danwei[udg_Zhengshu[117]], 0x41304C4F)
set udg_Zhengshu[117]=udg_Zhengshu[117] + 1
endloop
call DisableTrigger(gg_trg_duochongjuji_1_5)
call ForGroupBJ(udg_Danweizu[37], function Trig_duochongjuji_2Func002Func003A)
call PauseTimerBJ(true, udg_jishiqi[78])
call RemoveLocation(udg_dian[217])
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_duochongjuji_2 takes nothing returns nothing
set gg_trg_duochongjuji_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_duochongjuji_2, udg_jishiqi[78])
call TriggerAddAction(gg_trg_duochongjuji_2, function Trig_duochongjuji_2Actions)
endfunction
function Trig_duochongjuji_3Func001Func007Func003Func002Func003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( GetUnitUserData(udg_danwei2[0]) == GetUnitUserData(udg_danwei2[1]) ) ) then
call SetUnitFacing(udg_danwei2[1], udg_Shishu[GetUnitUserData(udg_danwei2[0])])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_duochongjuji_3Func001Func007Func003Func002Func006Func001A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( GetUnitUserData(udg_danwei2[0]) == GetUnitUserData(udg_danwei2[1]) ) ) then
call GroupRemoveUnit(udg_Danweizu[113], udg_danwei2[1])
call KillUnit(udg_danwei2[1])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_duochongjuji_3Func001Func007Func003Func002Func006Func006A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( GetUnitUserData(udg_danwei2[0]) == GetUnitUserData(udg_danwei2[1]) ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[1]))
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_duochongjuji_3Func001Func007Func003Func005Func001Func003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( GetUnitUserData(udg_danwei2[0]) == GetUnitUserData(udg_danwei2[1]) ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[2]))
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_duochongjuji_3Func001Func007Func003Func005Func007A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( GetUnitUserData(udg_danwei2[0]) == GetUnitUserData(udg_danwei2[1]) ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[1]))
call SetUnitFacing(udg_danwei2[1], AngleBetweenPoints(udg_dian2[0], udg_dian2[2]))
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_duochongjuji_3Func001Func007Func003Func005Func008A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( GetUnitUserData(udg_danwei2[0]) == GetUnitUserData(udg_danwei2[1]) ) ) then
call GroupRemoveUnit(udg_Danweizu[113], udg_danwei2[1])
call KillUnit(udg_danwei2[1])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_duochongjuji_3Func001Func007A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
if ( ( GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE) > 40.00 ) ) then
call SetUnitLifeBJ(udg_danwei2[0], ( GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE) - 1 ))
if ( ( GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE) > 60.00 ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], ( ( GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE) - 60.00 ) * 4.00 ), GetUnitFacing(udg_danwei2[0]))
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
call ForGroupBJ(udg_Danweizu[113], function Trig_duochongjuji_3Func001Func007Func003Func002Func006Func006A)
else
call ForGroupBJ(udg_Danweizu[113], function Trig_duochongjuji_3Func001Func007Func003Func002Func006Func001A)
call GroupRemoveUnit(udg_Danweizu[112], udg_danwei2[0])
call KillUnit(udg_danwei2[0])
endif
call RemoveLocation(udg_dian2[1])
else
set udg_dian2[2]=GetUnitLoc(udg_Danwei[GetUnitUserData(udg_danwei2[0])])
call SetUnitFacing(udg_danwei2[0], udg_Shishu[GetUnitUserData(udg_danwei2[0])])
call ForGroupBJ(udg_Danweizu[113], function Trig_duochongjuji_3Func001Func007Func003Func002Func003A)
call RemoveLocation(udg_dian2[2])
endif
else
set udg_dian2[2]=GetUnitLoc(udg_Danwei[GetUnitUserData(udg_danwei2[0])])
if ( ( GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE) > 10.00 ) ) then
call SetUnitLifeBJ(udg_danwei2[0], ( GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE) - 1 ))
set udg_dian2[3]=PolarProjectionBJ(udg_dian2[0], 30.00, udg_Shishu[GetUnitUserData(udg_danwei2[0])])
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[3], ( ( 40.00 - GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE) ) * 2.66 ), AngleBetweenPoints(udg_dian2[0], udg_dian2[2]))
call RemoveLocation(udg_dian2[3])
else
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 80.00, AngleBetweenPoints(udg_dian2[0], udg_dian2[2]))
endif
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_FLYABILITY) == false ) and ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[2]) > 100.00 ) ) then
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
call SetUnitFacing(udg_danwei2[0], AngleBetweenPoints(udg_dian2[0], udg_dian2[2]))
call ForGroupBJ(udg_Danweizu[113], function Trig_duochongjuji_3Func001Func007Func003Func005Func007A)
else
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[2]) < 100.00 ) ) then
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[2]))
call ForGroupBJ(udg_Danweizu[113], function Trig_duochongjuji_3Func001Func007Func003Func005Func001Func003A)
call UnitDamageTarget(udg_danwei[271], udg_Danwei[GetUnitUserData(udg_danwei2[0])], ( 1.00 * ( ( ( I2R(GetHeroAgi(udg_danwei[271], true)) * 5.00 ) + 350.00 ) * Pow(0.85, ( I2R(udg_Zhengshu[116]) - 116.00 )) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303742, udg_dian2[2], 0.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 1.00)
call SetUnitAnimation(udg_danwei2[1], "birth")
set udg_danwei2[1]=null
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[271]), 0x65303130, udg_dian2[2], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304236)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_Danwei[GetUnitUserData(udg_danwei2[0])])
set udg_Danwei[92]=null
else
endif
call ForGroupBJ(udg_Danweizu[113], function Trig_duochongjuji_3Func001Func007Func003Func005Func008A)
call GroupRemoveUnit(udg_Danweizu[112], udg_danwei2[0])
call KillUnit(udg_danwei2[0])
endif
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
endif
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_duochongjuji_3Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( IsUnitGroupEmptyBJ(udg_Danweizu[112]) == false ) ) then
call ForGroupBJ(udg_Danweizu[112], function Trig_duochongjuji_3Func001Func007A)
else
set udg_danwei[271]=null
set udg_danwei[272]=null
set udg_Zhengshu[117]=116
loop
exitwhen udg_Zhengshu[117] > udg_Zhengshu[116]
call UnitRemoveAbility(udg_Danwei[udg_Zhengshu[117]], 0x41304C4F)
set udg_Zhengshu[117]=udg_Zhengshu[117] + 1
endloop
call GroupClear(udg_Danweizu[112])
call GroupClear(udg_Danweizu[113])
call GroupClear(udg_Danweizu[114])
call PauseTimer(udg_Times[115])
call RemoveLocation(udg_Dian[116])
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_duochongjuji_3 takes nothing returns nothing
set gg_trg_duochongjuji_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_duochongjuji_3, udg_Times[115])
call TriggerAddAction(gg_trg_duochongjuji_3, function Trig_duochongjuji_3Actions)
endfunction
function Trig_houkongfanActions takes nothing returns nothing
set udg_danwei[273]=GetTriggerUnit()
set udg_danwei[274]=GetSpellTargetUnit()
set udg_dian[219]=GetUnitLoc(udg_danwei[273])
set udg_dian[220]=GetUnitLoc(udg_danwei[274])
set udg_zhengshu[135]=10
set udg_Shishu[96]=( DistanceBetweenPoints(udg_dian[219], udg_dian[220]) + 100.00 )
set udg_Shishu[97]=AngleBetweenPoints(udg_dian[219], udg_dian[220])
call UnitDamageTarget(udg_danwei[273], udg_danwei[274], ( ( 1.50 + ( 0.50 * I2R(GetUnitAbilityLevel(udg_danwei[273], 0x41303247)) ) ) * I2R(GetHeroAgi(udg_danwei[273], true)) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WOOD_HEAVY_BASH)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\GlaiveMissile\\GlaiveMissileTarget.mdl", udg_danwei[274], "chest"))
call RemoveLocation(udg_dian[219])
call RemoveLocation(udg_dian[220])
call StartTimerBJ(udg_jishiqi[138], true, 0.03)
endfunction
function InitTrig_houkongfan takes nothing returns nothing
set gg_trg_houkongfan=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_houkongfan , 3 , 0x41303247)
call TriggerAddAction(gg_trg_houkongfan, function Trig_houkongfanActions)
endfunction
function Trig_houkognfan2Actions takes nothing returns nothing
if ( ( IsUnitPausedBJ(udg_danwei[273]) == false ) ) then
if ( ( IsUnitType(udg_danwei[273], UNIT_TYPE_DEAD) == false ) and ( udg_zhengshu[135] > 0 ) ) then
set udg_zhengshu[135]=( udg_zhengshu[135] - 1 )
set udg_dian[219]=GetUnitLoc(udg_danwei[273])
set udg_dian[220]=GetUnitLoc(udg_danwei[274])
set udg_Dian[90]=PolarProjectionBJ(udg_dian[219], ( udg_Shishu[96] * 0.10 ), udg_Shishu[97])
if ( ( IsTerrainPathableBJ(udg_Dian[90], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei[273], GetLocationX(udg_Dian[90]))
call SetUnitY(udg_danwei[273], GetLocationY(udg_Dian[90]))
else
endif
call RemoveLocation(udg_Dian[90])
set udg_Dian[90]=PolarProjectionBJ(udg_dian[219], 100.00, udg_Shishu[97])
if ( ( DistanceBetweenPoints(udg_dian[219], udg_dian[220]) <= 120.00 ) and ( IsTerrainPathableBJ(udg_Dian[90], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei[274], GetLocationX(udg_Dian[90]))
call SetUnitY(udg_danwei[274], GetLocationY(udg_Dian[90]))
else
endif
call RemoveLocation(udg_Dian[90])
call RemoveLocation(udg_dian[219])
call RemoveLocation(udg_dian[220])
else
call PauseTimer(udg_jishiqi[138])
set udg_danwei[273]=null
set udg_danwei[274]=null
endif
else
endif
endfunction
function InitTrig_houkognfan2 takes nothing returns nothing
set gg_trg_houkognfan2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_houkognfan2, udg_jishiqi[138])
call TriggerAddAction(gg_trg_houkognfan2, function Trig_houkognfan2Actions)
endfunction
function Trig_chongjidan_1Conditions takes nothing returns boolean
return ( ( ( GetSpellAbilityId() == 0x41304C45 ) or ( GetSpellAbilityId() == 0x41304C46 ) ) )
endfunction
function Trig_chongjidan_1Actions takes nothing returns nothing
set udg_Danwei[110]=GetTriggerUnit()
if ( ( GetSpellAbilityId() == 0x41304C45 ) ) then
set udg_Zhengshu[113]=1
call UnitAddAbility(udg_Danwei[110], 0x41304C4D)
call StartTimerBJ(udg_Times[113], false, 10.00)
else
if ( ( udg_Zhengshu[113] > 0 ) ) then
set udg_Zhengshu[113]=( udg_Zhengshu[113] - 1 )
else
call UnitRemoveAbility(udg_Danwei[110], 0x41304C4D)
endif
endif
set udg_Dian[110]=GetUnitLoc(udg_Danwei[110])
set udg_Dian[111]=GetSpellTargetLoc()
set udg_Zhengshu[110]=27
call StartTimerBJ(udg_Times[110], false, 0.00)
call SetUnitAnimation(udg_Danwei[110], "spell")
call SetUnitFacing(udg_Danwei[110], AngleBetweenPoints(udg_Dian[110], udg_Dian[111]))
call RemoveLocation(udg_Dian[110])
if ( ( GetUnitAbilityLevel(udg_Danwei[110], 0x41304C49) > 0 ) ) then
set udg_zhengshuex[0]=GetUnitAbilityLevel(udg_Danwei[110], 0x41304C49)
call UnitRemoveAbility(udg_Danwei[110], 0x41304C49)
call UnitAddAbility(udg_Danwei[110], 0x41304C49)
call SetUnitAbilityLevel(udg_Danwei[110], 0x41304C49, udg_zhengshuex[0])
else
endif
endfunction
function InitTrig_chongjidan_1 takes nothing returns nothing
set gg_trg_chongjidan_1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_chongjidan_1, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_chongjidan_1, Condition(function Trig_chongjidan_1Conditions))
call TriggerAddAction(gg_trg_chongjidan_1, function Trig_chongjidan_1Actions)
endfunction
function Trig_chongjidan_2Func001Func001Func003Func009A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitDeadBJ(udg_danwei2[1]) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_Danwei[110])) == true ) ) then
else
call GroupRemoveUnit(udg_Danweizu[110], udg_danwei2[1])
endif
set udg_danwei2[1]=null
endfunction
function Trig_chongjidan_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_Zhengshu[110] == 27 ) ) then
set udg_Zhengshu[110]=( udg_Zhengshu[110] - 1 )
set udg_Dian[89]=GetUnitLoc(udg_Danwei[110])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[110]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304C47)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_Danwei[110])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
call StartTimerBJ(udg_Times[110], false, 0.30)
else
if ( ( udg_Zhengshu[110] == 26 ) ) then
call StopSoundBJ(gg_snd_GUN43, false)
call PlaySoundOnUnitBJ(gg_snd_GUN43, 100, udg_Danwei[110])
set udg_Zhengshu[110]=( udg_Zhengshu[110] - 1 )
set udg_Dian[110]=GetUnitLoc(udg_Danwei[110])
set udg_Shishu[112]=AngleBetweenPoints(udg_Dian[110], udg_Dian[111])
set udg_Danwei[111]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[110]), 0x65303738, udg_Dian[110], AngleBetweenPoints(udg_Dian[110], udg_Dian[111]))
call SetUnitColor(udg_Danwei[111], PLAYER_COLOR_CYAN)
call GroupAddUnit(udg_DAZE[0], udg_Danwei[111])
call GroupAddUnit(udg_DAZE[1], udg_Danwei[111])
set udg_Danwei[112]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[110]), 0x65303739, udg_Dian[110], AngleBetweenPoints(udg_Dian[110], udg_Dian[111]))
call RemoveLocation(udg_Dian[110])
call RemoveLocation(udg_Dian[111])
call StartTimerBJ(udg_Times[110], true, 0.01)
else
if ( ( udg_Zhengshu[110] <= 25 ) and ( udg_Zhengshu[110] > 0 ) ) then
set udg_Zhengshu[110]=( udg_Zhengshu[110] - 1 )
set udg_Dian[110]=GetUnitLoc(udg_Danwei[111])
set udg_Dian[111]=PolarProjectionBJ(udg_Dian[110], 60.00, GetUnitFacing(udg_Danwei[111]))
if ( ( IsTerrainPathableBJ(udg_Dian[111], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_Danwei[111], GetLocationX(udg_Dian[111]))
call SetUnitY(udg_Danwei[111], GetLocationY(udg_Dian[111]))
call SetUnitX(udg_Danwei[112], GetLocationX(udg_Dian[111]))
call SetUnitY(udg_Danwei[112], GetLocationY(udg_Dian[111]))
else
endif
set udg_Danweizu[110]=YDWEGetUnitsInRangeOfLocAllNull(100.00 , udg_Dian[110])
call ForGroupBJ(udg_Danweizu[110], function Trig_chongjidan_2Func001Func001Func003Func009A)
if ( ( IsUnitGroupEmptyBJ(udg_Danweizu[110]) == false ) ) then
call KillUnit(udg_Danwei[111])
call KillUnit(udg_Danwei[112])
set udg_Zhengshu[110]=40
set udg_Danwei[113]=FirstOfGroup(udg_Danweizu[110])
call UnitAddAbility(udg_Danwei[113], 0x41304F42)
call UnitDamageTarget(udg_Danwei[110], udg_Danwei[113], ( ( ( ( 0.00 + ( 25.00 * I2R(IMaxBJ(GetUnitAbilityLevel(udg_Danwei[110], 0x41304C45), GetUnitAbilityLevel(udg_Danwei[110], 0x41304C46))) ) ) + ( 1.50 * I2R(GetHeroAgi(udg_Danwei[110], true)) ) ) * 1.00 ) * 1.00 ), false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call UnitRemoveAbility(udg_Danwei[113], 0x41304F42)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl", udg_Danwei[113], "chest"))
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[113]), 0x65303130, udg_Dian[110], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304236)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_Danwei[113])
set udg_Danwei[92]=null
else
endif
call DestroyGroup(udg_Danweizu[110])
call RemoveLocation(udg_Dian[110])
call RemoveLocation(udg_Dian[111])
else
if ( ( udg_Zhengshu[110] > 30 ) ) then
set udg_Zhengshu[110]=( udg_Zhengshu[110] - 1 )
set udg_Dian[110]=GetUnitLoc(udg_Danwei[113])
set udg_Dian[111]=PolarProjectionBJ(udg_Dian[110], ( ( I2R(udg_Zhengshu[110]) - 25.00 ) * 2.00 ), udg_Shishu[112])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl", udg_Dian[110]))
if ( ( IsTerrainPathableBJ(udg_Dian[111], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_Danwei[113], GetLocationX(udg_Dian[111]))
call SetUnitY(udg_Danwei[113], GetLocationY(udg_Dian[111]))
else
endif
call RemoveLocation(udg_Dian[110])
call RemoveLocation(udg_Dian[111])
else
call KillUnit(udg_Danwei[111])
call KillUnit(udg_Danwei[112])
call PauseTimer(udg_Times[110])
endif
endif
endif
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_chongjidan_2 takes nothing returns nothing
set gg_trg_chongjidan_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_chongjidan_2, udg_Times[110])
call TriggerAddAction(gg_trg_chongjidan_2, function Trig_chongjidan_2Actions)
endfunction
function Trig_chongjidan_3Actions takes nothing returns nothing
call UnitRemoveAbility(udg_Danwei[110], 0x41304C4D)
endfunction
function InitTrig_chongjidan_3 takes nothing returns nothing
set gg_trg_chongjidan_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_chongjidan_3, udg_Times[113])
call TriggerAddAction(gg_trg_chongjidan_3, function Trig_chongjidan_3Actions)
endfunction
function Trig_baoliedan_1Conditions takes nothing returns boolean
return ( ( ( GetSpellAbilityId() == 0x41304C48 ) or ( GetSpellAbilityId() == 0x41304C4A ) ) )
endfunction
function Trig_baoliedan_1Actions takes nothing returns nothing
set udg_danwei[84]=null
set udg_Danwei[110]=GetTriggerUnit()
if ( ( GetSpellAbilityId() == 0x41304C48 ) ) then
set udg_Zhengshu[114]=0
call UnitAddAbility(udg_Danwei[110], 0x41304C4E)
call StartTimerBJ(udg_Times[114], false, 10.00)
else
if ( ( udg_Zhengshu[114] > 0 ) ) then
set udg_Zhengshu[114]=( udg_Zhengshu[114] - 1 )
else
call UnitRemoveAbility(udg_Danwei[110], 0x41304C4E)
endif
endif
set udg_Dian[112]=GetUnitLoc(udg_Danwei[110])
set udg_Dian[113]=GetSpellTargetLoc()
set udg_Zhengshu[111]=27
call StartTimerBJ(udg_Times[111], false, 0.00)
call SetUnitFacing(udg_Danwei[110], AngleBetweenPoints(udg_Dian[112], udg_Dian[113]))
call RemoveLocation(udg_Dian[112])
if ( ( GetUnitAbilityLevel(udg_Danwei[110], 0x41304C49) > 0 ) ) then
set udg_zhengshuex[0]=GetUnitAbilityLevel(udg_Danwei[110], 0x41304C49)
call UnitRemoveAbility(udg_Danwei[110], 0x41304C49)
call UnitAddAbility(udg_Danwei[110], 0x41304C49)
call SetUnitAbilityLevel(udg_Danwei[110], 0x41304C49, udg_zhengshuex[0])
else
endif
endfunction
function InitTrig_baoliedan_1 takes nothing returns nothing
set gg_trg_baoliedan_1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_baoliedan_1, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_baoliedan_1, Condition(function Trig_baoliedan_1Conditions))
call TriggerAddAction(gg_trg_baoliedan_1, function Trig_baoliedan_1Actions)
endfunction
function Trig_baoliedan_2Func001Func001Func003Func008A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( udg_danwei2[1] != udg_danwei[84] ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitDeadBJ(udg_danwei2[1]) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_Danwei[110])) == true ) ) then
set udg_Dian[113]=GetUnitLoc(udg_danwei2[1])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\RocketMissile\\RocketMissile.mdl", udg_Dian[113]))
call UnitDamageTarget(udg_Danwei[110], udg_danwei2[1], ( ( ( ( 0.00 + ( 25.00 * I2R(IMaxBJ(GetUnitAbilityLevel(udg_Danwei[110], 0x41304C48), GetUnitAbilityLevel(udg_Danwei[110], 0x41304C4A))) ) ) + ( 1.50 * I2R(GetHeroAgi(udg_Danwei[110], true)) ) ) * 1.00 ) * 1.00 ), false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call RemoveLocation(udg_Dian[113])
else
call GroupRemoveUnit(udg_Danweizu[110], udg_danwei2[1])
endif
set udg_danwei2[1]=null
endfunction
function Trig_baoliedan_2Func001Func001Func003Func019A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitDeadBJ(udg_danwei2[1]) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_Danwei[110])) == true ) ) then
else
call GroupRemoveUnit(udg_Danweizu[110], udg_danwei2[1])
endif
set udg_danwei2[1]=null
endfunction
function Trig_baoliedan_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_Zhengshu[111] == 27 ) ) then
set udg_Zhengshu[111]=( udg_Zhengshu[111] - 1 )
set udg_Dian[89]=GetUnitLoc(udg_Danwei[110])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[110]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304C47)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_Danwei[110])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
call StartTimerBJ(udg_Times[111], false, 0.30)
call SetUnitAnimation(udg_Danwei[110], "spell")
else
if ( ( udg_Zhengshu[111] == 26 ) ) then
call StopSoundBJ(gg_snd_GUN43, false)
call PlaySoundOnUnitBJ(gg_snd_GUN43, 100, udg_Danwei[110])
set udg_Zhengshu[111]=( udg_Zhengshu[111] - 1 )
set udg_Dian[112]=GetUnitLoc(udg_Danwei[110])
set udg_Danwei[114]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[110]), 0x65303738, udg_Dian[112], AngleBetweenPoints(udg_Dian[112], udg_Dian[113]))
call SetUnitColor(udg_Danwei[114], PLAYER_COLOR_RED)
call GroupAddUnit(udg_DAZE[0], udg_Danwei[114])
call GroupAddUnit(udg_DAZE[1], udg_Danwei[114])
set udg_Danwei[115]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[110]), 0x65303741, udg_Dian[112], AngleBetweenPoints(udg_Dian[112], udg_Dian[113]))
call RemoveLocation(udg_Dian[112])
call RemoveLocation(udg_Dian[113])
call StartTimerBJ(udg_Times[111], true, 0.01)
else
if ( ( udg_Zhengshu[111] > 0 ) ) then
set udg_Zhengshu[111]=( udg_Zhengshu[111] - 1 )
set udg_Dian[112]=GetUnitLoc(udg_Danwei[114])
set udg_Dian[113]=PolarProjectionBJ(udg_Dian[112], 60.00, GetUnitFacing(udg_Danwei[114]))
if ( ( IsTerrainPathableBJ(udg_Dian[113], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_Danwei[114], GetLocationX(udg_Dian[113]))
call SetUnitY(udg_Danwei[114], GetLocationY(udg_Dian[113]))
call SetUnitX(udg_Danwei[115], GetLocationX(udg_Dian[113]))
call SetUnitY(udg_Danwei[115], GetLocationY(udg_Dian[113]))
else
endif
set udg_Danweizu[110]=YDWEGetUnitsInRangeOfLocAllNull(100.00 , udg_Dian[112])
call ForGroupBJ(udg_Danweizu[110], function Trig_baoliedan_2Func001Func001Func003Func019A)
if ( ( IsUnitGroupEmptyBJ(udg_Danweizu[110]) == false ) ) then
set udg_Zhengshu[111]=0
set udg_danwei2[1]=FirstOfGroup(udg_Danweizu[110])
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
call SetUnitX(udg_Danwei[114], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_Danwei[114], GetLocationY(udg_dian2[1]))
call SetUnitX(udg_Danwei[115], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_Danwei[115], GetLocationY(udg_dian2[1]))
set udg_danwei[84]=FirstOfGroup(udg_Danweizu[110])
call UnitDamageTarget(udg_Danwei[110], udg_danwei2[1], ( ( ( ( 0.00 + ( 25.00 * I2R(IMaxBJ(GetUnitAbilityLevel(udg_Danwei[110], 0x41304C48), GetUnitAbilityLevel(udg_Danwei[110], 0x41304C4A))) ) ) + ( 1.50 * I2R(GetHeroAgi(udg_Danwei[110], true)) ) ) * 1.00 ) * 1.00 ), false, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[1])
else
endif
call DestroyGroup(udg_Danweizu[110])
call RemoveLocation(udg_Dian[112])
call RemoveLocation(udg_Dian[113])
else
set udg_Dian[112]=GetUnitLoc(udg_Danwei[114])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\SteamTank\\SteamTankImpact.mdl", udg_Dian[112]))
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=8
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_Dian[113]=PolarProjectionBJ(udg_Dian[112], 100.00, ( 45.00 * I2R(bj_forLoopAIndex) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\GyroCopter\\GyroCopterImpact.mdl", udg_Dian[113]))
call RemoveLocation(udg_Dian[113])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=12
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_Dian[113]=PolarProjectionBJ(udg_Dian[112], 150.00, ( 30.00 * I2R(bj_forLoopAIndex) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\GyroCopter\\GyroCopterImpact.mdl", udg_Dian[113]))
call RemoveLocation(udg_Dian[113])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=20
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_Dian[113]=PolarProjectionBJ(udg_Dian[112], 200.00, ( 18.00 * I2R(bj_forLoopAIndex) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\GyroCopter\\GyroCopterImpact.mdl", udg_Dian[113]))
call RemoveLocation(udg_Dian[113])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=25
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_Dian[113]=PolarProjectionBJ(udg_Dian[112], 250.00, ( 14.40 * I2R(bj_forLoopAIndex) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\GyroCopter\\GyroCopterImpact.mdl", udg_Dian[113]))
call RemoveLocation(udg_Dian[113])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
set udg_Danweizu[110]=YDWEGetUnitsInRangeOfLocAllNull(300.00 , udg_Dian[112])
call ForGroupBJ(udg_Danweizu[110], function Trig_baoliedan_2Func001Func001Func003Func008A)
call DestroyGroup(udg_Danweizu[110])
call RemoveLocation(udg_Dian[112])
call KillUnit(udg_Danwei[114])
call KillUnit(udg_Danwei[115])
call PauseTimer(udg_Times[111])
endif
endif
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_baoliedan_2 takes nothing returns nothing
set gg_trg_baoliedan_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_baoliedan_2, udg_Times[111])
call TriggerAddAction(gg_trg_baoliedan_2, function Trig_baoliedan_2Actions)
endfunction
function Trig_baoliedan_3Actions takes nothing returns nothing
call UnitRemoveAbility(udg_Danwei[110], 0x41304C4E)
endfunction
function InitTrig_baoliedan_3 takes nothing returns nothing
set gg_trg_baoliedan_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_baoliedan_3, udg_Times[114])
call TriggerAddAction(gg_trg_baoliedan_3, function Trig_baoliedan_3Actions)
endfunction
function Trig_huabu_1Actions takes nothing returns nothing
set udg_Danwei[110]=GetTriggerUnit()
set udg_Dian[114]=GetUnitLoc(udg_Danwei[110])
set udg_Dian[115]=GetSpellTargetLoc()
set udg_Zhengshu[112]=31
call StartTimerBJ(udg_Times[112], false, 0.00)
set udg_Shishu[110]=RMinBJ(DistanceBetweenPoints(udg_Dian[114], udg_Dian[115]), ( 275.00 + ( 25.00 * I2R(GetUnitAbilityLevel(udg_Danwei[110], 0x41304C49)) ) ))
set udg_Shishu[111]=AngleBetweenPoints(udg_Dian[114], udg_Dian[115])
call RemoveLocation(udg_Dian[114])
call RemoveLocation(udg_Dian[115])
endfunction
function InitTrig_huabu_1 takes nothing returns nothing
set gg_trg_huabu_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_huabu_1 , 3 , 0x41304C49)
call TriggerAddAction(gg_trg_huabu_1, function Trig_huabu_1Actions)
endfunction
function Trig_huabu_2Func001Func001Func001Func003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
call UnitRemoveAbility(udg_danwei2[1], 0x41304C5A)
call UnitRemoveBuffBJ(0x42303258, udg_danwei2[1])
set udg_danwei2[1]=null
endfunction
function Trig_huabu_2Func001Func001Func007A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitDeadBJ(udg_danwei2[1]) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_Danwei[110])) == true ) and ( IsUnitInGroup(udg_danwei2[1], udg_Danweizu[111]) == false ) ) then
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_HERO) == true ) ) then
call UnitDamageTarget(udg_Danwei[110], udg_danwei2[1], ( ( ( ( 10.00 + ( 10.00 * I2R(GetUnitAbilityLevel(udg_Danwei[110], 0x41304C49)) ) ) + ( 0.60 * I2R(GetHeroAgi(udg_Danwei[110], true)) ) ) * 1.00 ) * 1.00 ), false, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WOOD_HEAVY_BASH)
else
call UnitDamageTarget(udg_Danwei[110], udg_danwei2[1], ( ( ( ( 10.00 + ( 10.00 * I2R(GetUnitAbilityLevel(udg_Danwei[110], 0x41304C49)) ) ) + ( 0.60 * I2R(GetHeroAgi(udg_Danwei[110], true)) ) ) * 1.00 ) * 1.50 ), false, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WOOD_HEAVY_BASH)
endif
call UnitAddAbility(udg_danwei2[1], 0x41304C5A)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\GlaiveMissile\\GlaiveMissileTarget.mdl", udg_danwei2[1], "chest"))
call GroupAddUnit(udg_Danweizu[111], udg_danwei2[1])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_huabu_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_Zhengshu[112] == 31 ) ) then
set udg_Zhengshu[112]=( udg_Zhengshu[112] - 1 )
set udg_Dian[89]=GetUnitLoc(udg_Danwei[110])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[110]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304C47)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_Danwei[110])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
call StartTimerBJ(udg_Times[112], true, 0.03)
call SetUnitAnimationByIndex(udg_Danwei[110], 5)
call SetUnitTimeScale(udg_Danwei[110], 2.00)
else
if ( ( IsUnitType(udg_Danwei[110], UNIT_TYPE_DEAD) == false ) and ( udg_Zhengshu[112] > 20 ) ) then
set udg_Zhengshu[112]=( udg_Zhengshu[112] - 1 )
set udg_Dian[114]=GetUnitLoc(udg_Danwei[110])
set udg_Dian[115]=PolarProjectionBJ(udg_Dian[114], ( udg_Shishu[110] / 10.00 ), udg_Shishu[111])
if ( ( IsTerrainPathableBJ(udg_Dian[115], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_Danwei[110], GetLocationX(udg_Dian[115]))
call SetUnitY(udg_Danwei[110], GetLocationY(udg_Dian[115]))
else
endif
set udg_Danweizu[110]=YDWEGetUnitsInRangeOfLocAllNull(125.00 , udg_Dian[114])
call ForGroupBJ(udg_Danweizu[110], function Trig_huabu_2Func001Func001Func007A)
call DestroyGroup(udg_Danweizu[110])
call RemoveLocation(udg_Dian[114])
call RemoveLocation(udg_Dian[115])
if ( ( IsUnitGroupEmptyBJ(udg_Danweizu[111]) == true ) and ( udg_Zhengshu[112] == 20 ) ) then
call SetUnitManaBJ(udg_Danwei[110], ( GetUnitState(udg_Danwei[110], UNIT_STATE_MANA) + ( 40.00 * ( 0.55 + ( 0.05 * I2R(GetUnitAbilityLevel(udg_Danwei[110], 0x41304C49)) ) ) ) ))
else
endif
else
if ( ( udg_Zhengshu[112] > 0 ) ) then
set udg_Zhengshu[112]=( udg_Zhengshu[112] - 1 )
else
call ForGroupBJ(udg_Danweizu[111], function Trig_huabu_2Func001Func001Func001Func003A)
call GroupClear(udg_Danweizu[111])
call SetUnitTimeScale(udg_Danwei[110], 1.00)
call PauseTimer(udg_Times[112])
endif
endif
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_huabu_2 takes nothing returns nothing
set gg_trg_huabu_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_huabu_2, udg_Times[112])
call TriggerAddAction(gg_trg_huabu_2, function Trig_huabu_2Actions)
endfunction
function Trig_xiaoyefuka__1Conditions takes nothing returns boolean
return ( ( GetLearnedSkill() == 0x41303941 ) )
endfunction
function Trig_xiaoyefuka__1Actions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
if ( ( GetUnitAbilityLevel(udg_danwei2[0], 0x41303852) == 1 ) ) then
else
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41303941, false)
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_xiaoyefuka__1 takes nothing returns nothing
set gg_trg_xiaoyefuka__1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_xiaoyefuka__1, EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(gg_trg_xiaoyefuka__1, Condition(function Trig_xiaoyefuka__1Conditions))
call TriggerAddAction(gg_trg_xiaoyefuka__1, function Trig_xiaoyefuka__1Actions)
endfunction
function Trig_xiaoyefuka_0Conditions takes nothing returns boolean
return ( ( GetLearnedSkill() == 0x41304750 ) and ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true ) )
endfunction
function Trig_xiaoyefuka_0Actions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
if ( ( GetUnitAbilityLevel(udg_danwei2[0], 0x41304750) == 1 ) ) then
call UnitAddAbility(udg_danwei2[0], 0x41304655)
call UnitAddAbility(udg_danwei2[0], 0x41304756)
call UnitAddAbility(udg_danwei2[0], 0x41304755)
call UnitAddAbility(udg_danwei2[0], 0x41304752)
call UnitAddAbility(udg_danwei2[0], 0x41304753)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41304755, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41304752, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41304753, false)
if ( ( GetUnitAbilityLevel(udg_danwei2[0], 0x41303941) == 1 ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41303941, false)
else
endif
else
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_xiaoyefuka_0 takes nothing returns nothing
set gg_trg_xiaoyefuka_0=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_xiaoyefuka_0, EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(gg_trg_xiaoyefuka_0, Condition(function Trig_xiaoyefuka_0Conditions))
call TriggerAddAction(gg_trg_xiaoyefuka_0, function Trig_xiaoyefuka_0Actions)
endfunction
function Trig_xiaoyefuka_1Conditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41304756 ) )
endfunction
function Trig_xiaoyefuka_1Actions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
if ( ( GetUnitAbilityLevel(udg_danwei2[0], 0x4130325A) >= 1 ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41304755, true)
else
endif
if ( ( GetUnitAbilityLevel(udg_danwei2[0], 0x41303259) >= 1 ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41304752, true)
else
endif
if ( ( GetUnitAbilityLevel(udg_danwei2[0], 0x41303258) >= 1 ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41304753, true)
else
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41303941, true)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x4130325A, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41303259, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41303258, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41303249, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41303942, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41304655, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41304754, false)
call UnitAddAbility(udg_danwei2[0], 0x41303852)
call UnitRemoveAbility(udg_danwei2[0], 0x41304756)
set udg_danwei2[0]=null
endfunction
function InitTrig_xiaoyefuka_1 takes nothing returns nothing
set gg_trg_xiaoyefuka_1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_xiaoyefuka_1, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_xiaoyefuka_1, Condition(function Trig_xiaoyefuka_1Conditions))
call TriggerAddAction(gg_trg_xiaoyefuka_1, function Trig_xiaoyefuka_1Actions)
endfunction
function Trig_xiaoyefuka_2Conditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41303852 ) )
endfunction
function Trig_xiaoyefuka_2Actions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41304755, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41304752, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41304753, false)
if ( ( GetUnitAbilityLevel(udg_danwei2[0], 0x41303941) == 1 ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41303941, false)
else
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x4130325A, true)
if ( ( udg_zhengshu[79] == 0 ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41303259, true)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41303258, true)
else
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41303249, true)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41303942, true)
endif
if ( ( udg_zhengshu2[56] == 0 ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41304655, true)
else
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41304754, true)
call UnitAddAbility(udg_danwei2[0], 0x41304756)
call UnitRemoveAbility(udg_danwei2[0], 0x41303852)
set udg_danwei2[0]=null
endfunction
function InitTrig_xiaoyefuka_2 takes nothing returns nothing
set gg_trg_xiaoyefuka_2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_xiaoyefuka_2, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_xiaoyefuka_2, Condition(function Trig_xiaoyefuka_2Conditions))
call TriggerAddAction(gg_trg_xiaoyefuka_2, function Trig_xiaoyefuka_2Actions)
endfunction
function Trig_time_shoubiaoActions takes nothing returns nothing
set udg_danwei[282]=GetTriggerUnit()
set udg_dian[226]=GetUnitLoc(udg_danwei[282])
set udg_dian[227]=GetSpellTargetLoc()
set udg_danwei[283]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[282]), 0x65303153, udg_dian[227], 270.00)
set udg_zhengshu2[56]=0
set udg_zhengshu2[57]=R2I(AngleBetweenPoints(udg_dian[226], udg_dian[227]))
set udg_danweizu2[56]=CreateGroup()
call UnitAddAbility(udg_danwei[282], 0x41304754)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei[282]), 0x41304655, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei[282]), 0x41304754, true)
call RemoveLocation(udg_dian[226])
call RemoveLocation(udg_dian[227])
call StartTimerBJ(udg_times[56], true, 0.04)
endfunction
function InitTrig_time_shoubiao takes nothing returns nothing
set gg_trg_time_shoubiao=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_time_shoubiao , 3 , 0x41304655)
call TriggerAddAction(gg_trg_time_shoubiao, function Trig_time_shoubiaoActions)
endfunction
function Trig_time_shoubiao_2Func001Func005A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
call s__Unit_PauseUnitMU(udg_danwei2[0] , false , "特制时间手表")
call SetUnitTimeScale(udg_danwei2[0], 1.00)
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x75303053 ) ) then
call SetUnitVertexColor(udg_danwei2[0], 25, 25, 50, 255)
else
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x7530304B ) ) then
call SetUnitVertexColor(udg_danwei2[0], 255, 150, 150, 255)
else
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x75303059 ) ) then
call SetUnitVertexColor(udg_danwei2[0], 255, 200, 150, 255)
else
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x75303059 ) ) then
call SetUnitVertexColor(udg_danwei2[0], 255, 200, 150, 255)
else
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x75303058 ) ) then
call SetUnitVertexColor(udg_danwei2[0], 255, 200, 100, 255)
else
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x6E65666D ) and ( GetUnitAbilityLevel(udg_danwei2[0], 0x41304A53) == 1 ) ) then
call SetUnitVertexColor(udg_danwei2[0], 64, 64, 64, 150)
else
call SetUnitVertexColor(udg_danwei2[0], 255, 255, 255, 255)
endif
endif
endif
endif
endif
endif
set udg_danwei2[0]=null
endfunction
function Trig_time_shoubiao_2Func001Func014A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_DEAD) == false ) and ( IsUnitType(udg_danwei2[0], UNIT_TYPE_ANCIENT) == false ) and ( GetUnitTypeId(udg_danwei2[0]) != 0x48626C6D ) and ( GetUnitTypeId(udg_danwei2[0]) != 0x68677477 ) and ( IsUnitInGroup(udg_danwei2[0], udg_danweizu[56]) == false ) ) then
call s__Unit_PauseUnitMU(udg_danwei2[0] , true , "特制时间手表")
call GroupAddUnit(udg_danweizu2[56], udg_danwei2[0])
call SetUnitTimeScale(udg_danwei2[0], 0.00)
call SetUnitVertexColor(udg_danwei2[0], 128, 128, 128, 128)
else
endif
set udg_danwei2[0]=null
endfunction
function Trig_time_shoubiao_2Func001Func015A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[2]=GetUnitLoc(udg_danwei2[0])
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[2]) <= 200.00 ) ) then
else
call s__Unit_PauseUnitMU(udg_danwei2[0] , false , "特制时间手表")
call GroupRemoveUnit(udg_danweizu2[56], udg_danwei2[0])
call SetUnitTimeScale(udg_danwei2[0], 1.00)
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x75303053 ) ) then
call SetUnitVertexColor(udg_danwei2[0], 25, 25, 50, 255)
else
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x7530304B ) ) then
call SetUnitVertexColor(udg_danwei2[0], 255, 150, 150, 255)
else
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x75303059 ) ) then
call SetUnitVertexColor(udg_danwei2[0], 255, 200, 150, 255)
else
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x75303059 ) ) then
call SetUnitVertexColor(udg_danwei2[0], 255, 200, 150, 255)
else
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x75303058 ) ) then
call SetUnitVertexColor(udg_danwei2[0], 255, 200, 100, 255)
else
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x6E65666D ) and ( GetUnitAbilityLevel(udg_danwei2[0], 0x41304A53) == 1 ) ) then
call SetUnitVertexColor(udg_danwei2[0], 64, 64, 64, 150)
else
call SetUnitVertexColor(udg_danwei2[0], 255, 255, 255, 255)
endif
endif
endif
endif
endif
endif
endif
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[2])
endfunction
function Trig_time_shoubiao_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_zhengshu2[56] < 100 ) ) then
set udg_zhengshu2[56]=( udg_zhengshu2[56] + 1 )
set udg_dian2[0]=GetUnitLoc(udg_danwei[283])
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 8.00, I2R(udg_zhengshu2[57]))
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(200.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_time_shoubiao_2Func001Func014A)
call ForGroupBJ(udg_danweizu2[56], function Trig_time_shoubiao_2Func001Func015A)
call DestroyGroup(udg_xuanqu)
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_danwei[283], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei[283], GetLocationY(udg_dian2[1]))
else
set udg_zhengshu2[56]=100
endif
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
call UnitRemoveAbility(udg_danwei[282], 0x41304754)
set udg_zhengshu2[56]=0
if ( ( GetUnitAbilityLevel(udg_danwei[282], 0x41303852) == 1 ) ) then
else
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei[282]), 0x41304655, true)
endif
call ForGroupBJ(udg_danweizu2[56], function Trig_time_shoubiao_2Func001Func005A)
call DestroyGroup(udg_danweizu2[56])
call KillUnit(udg_danwei[283])
call PauseTimer(udg_times[56])
set udg_danwei[282]=null
set udg_danwei[283]=null
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_time_shoubiao_2 takes nothing returns nothing
set gg_trg_time_shoubiao_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_time_shoubiao_2, udg_times[56])
call TriggerAddAction(gg_trg_time_shoubiao_2, function Trig_time_shoubiao_2Actions)
endfunction
function Trig_shunyimoshu_1Actions takes nothing returns nothing
set udg_danwei2[93]=GetTriggerUnit()
set udg_dian2[93]=GetUnitLoc(udg_danwei2[93])
set udg_dian2[94]=GetUnitLoc(udg_danwei[283])
if ( ( DistanceBetweenPoints(udg_dian2[93], udg_dian2[94]) <= 2500.00 ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[94], 150.00, ( AngleBetweenPoints(udg_dian2[93], udg_dian2[94]) + 90.00 ))
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[94], 150.00, ( AngleBetweenPoints(udg_dian2[93], udg_dian2[94]) - 90.00 ))
set udg_danwei2[94]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[93]), 0x65303052, udg_dian2[93], AngleBetweenPoints(udg_dian2[93], udg_dian2[94]))
set udg_danwei2[95]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[93]), 0x65303052, udg_dian2[93], AngleBetweenPoints(udg_dian2[93], udg_dian2[94]))
set udg_danwei2[96]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[93]), 0x65303052, udg_dian2[1], AngleBetweenPoints(udg_dian2[93], udg_dian2[94]))
set udg_danwei2[97]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[93]), 0x65303052, udg_dian2[2], AngleBetweenPoints(udg_dian2[93], udg_dian2[94]))
set udg_zhengshu2[93]=0
call s__Unit_PauseUnitMU(udg_danwei2[93] , true , "瞬移魔术")
call UnitRemoveAbility(udg_danwei2[93], 0x41304754)
if ( ( GetUnitAbilityLevel(udg_danwei2[93], 0x41303852) == 1 ) ) then
else
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[93]), 0x41304655, true)
endif
call SetUnitVertexColor(udg_danwei2[93], 255, 255, 255, 0)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Polymorph\\PolyMorphDoneGround.mdl", udg_danwei2[93], "origin"))
set udg_aXUNHUAN[129]=94
loop
exitwhen udg_aXUNHUAN[129] > 97
call SetUnitVertexColor(udg_danwei2[udg_aXUNHUAN[129]], 255, 255, 255, 128)
call SetUnitAnimationByIndex(udg_danwei2[udg_aXUNHUAN[129]], 4)
set udg_aXUNHUAN[129]=udg_aXUNHUAN[129] + 1
endloop
call StartTimerBJ(udg_times[93], true, 0.03)
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
else
call UnitRemoveAbility(udg_danwei2[93], 0x41304754)
call UnitAddAbility(udg_danwei2[93], 0x41304754)
call SetUnitManaBJ(udg_danwei2[93], ( GetUnitState(udg_danwei2[93], UNIT_STATE_MANA) + 25.00 ))
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[93]), 0, 0, 10.00, "TRIGSTR_385")
call RemoveLocation(udg_dian2[93])
call RemoveLocation(udg_dian2[94])
endif
endfunction
function InitTrig_shunyimoshu_1 takes nothing returns nothing
set gg_trg_shunyimoshu_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_shunyimoshu_1 , 3 , 0x41304754)
call TriggerAddAction(gg_trg_shunyimoshu_1, function Trig_shunyimoshu_1Actions)
endfunction
function Trig_shunyimoshu_2Actions takes nothing returns nothing
set udg_zhengshu2[93]=( udg_zhengshu2[93] + 1 )
if ( ( udg_zhengshu2[93] <= 5 ) ) then
set udg_dian2[0]=PolarProjectionBJ(udg_dian2[93], ( 30.00 * I2R(udg_zhengshu2[93]) ), ( GetUnitFacing(udg_danwei2[94]) + 90.00 ))
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[93], ( 30.00 * I2R(udg_zhengshu2[93]) ), ( GetUnitFacing(udg_danwei2[95]) - 90.00 ))
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[94], ( 30.00 * I2R(( 5 - udg_zhengshu2[93] )) ), ( GetUnitFacing(udg_danwei2[96]) + 90.00 ))
set udg_dian2[3]=PolarProjectionBJ(udg_dian2[94], ( 30.00 * I2R(( 5 - udg_zhengshu2[93] )) ), ( GetUnitFacing(udg_danwei2[97]) - 90.00 ))
call SetUnitX(udg_danwei2[94], GetLocationX(udg_dian2[0]))
call SetUnitY(udg_danwei2[94], GetLocationY(udg_dian2[0]))
call SetUnitX(udg_danwei2[95], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[95], GetLocationY(udg_dian2[1]))
call SetUnitX(udg_danwei2[96], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[96], GetLocationY(udg_dian2[2]))
call SetUnitX(udg_danwei2[97], GetLocationX(udg_dian2[3]))
call SetUnitY(udg_danwei2[97], GetLocationY(udg_dian2[3]))
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
call RemoveLocation(udg_dian2[3])
else
if ( ( udg_zhengshu2[93] <= 15 ) ) then
if ( ( udg_zhengshu2[93] == 6 ) ) then
call SetUnitX(udg_danwei2[93], GetLocationX(udg_dian2[94]))
call SetUnitY(udg_danwei2[93], GetLocationY(udg_dian2[94]))
call SetUnitVertexColor(udg_danwei2[93], 255, 255, 255, 255)
call SetUnitAnimationByIndex(udg_danwei2[93], 4)
set udg_aXUNHUAN[130]=94
loop
exitwhen udg_aXUNHUAN[130] > 97
call RemoveUnit(udg_danwei2[udg_aXUNHUAN[130]])
set udg_danwei2[udg_aXUNHUAN[130]]=null
set udg_aXUNHUAN[130]=udg_aXUNHUAN[130] + 1
endloop
else
endif
else
call ResetUnitAnimation(udg_danwei2[93])
call s__Unit_PauseUnitMU(udg_danwei2[93] , false , "瞬移魔术")
call PauseTimer(udg_times[93])
set udg_danwei2[93]=null
call RemoveLocation(udg_dian2[93])
call RemoveLocation(udg_dian2[94])
endif
endif
endfunction
function InitTrig_shunyimoshu_2 takes nothing returns nothing
set gg_trg_shunyimoshu_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_shunyimoshu_2, udg_times[93])
call TriggerAddAction(gg_trg_shunyimoshu_2, function Trig_shunyimoshu_2Actions)
endfunction
function Trig_houzuoli_16Actions takes nothing returns nothing
if ( ( udg_zhengshu2[100] > 0 ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei[293])
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], ( I2R(udg_zhengshu2[100]) * 8.00 ), ( GetUnitFacing(udg_danwei[293]) + 180.00 ))
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei[293], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei[293], GetLocationY(udg_dian2[1]))
else
endif
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
set udg_zhengshu2[100]=( udg_zhengshu2[100] - 1 )
else
endif
endfunction
function InitTrig_houzuoli_16 takes nothing returns nothing
set gg_trg_houzuoli_16=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_houzuoli_16, udg_Times[4])
call TriggerAddAction(gg_trg_houzuoli_16, function Trig_houzuoli_16Actions)
endfunction
function Trig_tansheyinren_2_1Actions takes nothing returns nothing
set udg_danwei2[375]=GetTriggerUnit()
set udg_dian2[375]=GetUnitLoc(udg_danwei2[375])
set udg_dian2[376]=GetSpellTargetLoc()
set udg_danwei2[376]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[375]), 0x65303138, udg_dian2[375], AngleBetweenPoints(udg_dian2[375], udg_dian2[376]))
call SetUnitLifeBJ(udg_danwei2[376], ( 2.00 + ( 3.00 * I2R(GetUnitAbilityLevel(udg_danwei2[375], 0x41304750)) ) ))
call SetUnitManaBJ(udg_danwei2[376], 0.00)
call SetUnitTimeScale(udg_danwei2[376], 10.00)
set udg_zhengshu2[375]=0
set udg_danweizu2[380]=CreateGroup()
call StartTimerBJ(udg_times[375], true, 0.02)
set udg_danwei2[0]=GetTriggerUnit()
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41304755, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41304752, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41304753, false)
if ( ( GetUnitAbilityLevel(udg_danwei2[0], 0x41303941) == 1 ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41303941, false)
else
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x4130325A, true)
if ( ( udg_zhengshu[79] == 0 ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41303259, true)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41303258, true)
else
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41303249, true)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41303942, true)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41304655, true)
call UnitAddAbility(udg_danwei2[0], 0x41304756)
call UnitRemoveAbility(udg_danwei2[0], 0x41303852)
call SetUnitAbilityLevel(udg_danwei2[0], 0x41304756, 3)
call DisableTrigger(gg_trg_xiaoyefuka_1)
call IssueImmediateOrderById(udg_danwei2[0], 852526)
call EnableTrigger(gg_trg_xiaoyefuka_1)
set udg_danwei2[0]=null
endfunction
function InitTrig_tansheyinren_2_1 takes nothing returns nothing
set gg_trg_tansheyinren_2_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_tansheyinren_2_1 , 3 , 0x41304753)
call TriggerAddAction(gg_trg_tansheyinren_2_1, function Trig_tansheyinren_2_1Actions)
endfunction
function Trig_tansheyinren_2_2Conditions takes nothing returns boolean
return ( ( udg_zhengshu[79] == 0 ) )
endfunction
function Trig_tansheyinren_2_2Func002Func002Func005A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( udg_danwei2[1] != udg_danwei2[380] ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[375])) == true ) and ( IsUnitVisible(udg_danwei2[1], GetOwningPlayer(udg_danwei2[375])) == true ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[341]) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) ) then
else
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[1])
endif
set udg_danwei2[1]=null
endfunction
function Trig_tansheyinren_2_2Func002Func002Func014Func002A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( udg_danwei2[1] != udg_danwei2[380] ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[375])) == true ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[341]) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) ) then
else
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[1])
endif
set udg_danwei2[1]=null
endfunction
function Trig_tansheyinren_2_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu2[375]=( udg_zhengshu2[375] + 1 )
if ( ( GetUnitState(udg_danwei2[376], UNIT_STATE_LIFE) > 1.00 ) and ( udg_zhengshu2[375] <= 200 ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[376])
if ( ( GetUnitState(udg_danwei2[376], UNIT_STATE_MANA) < 505.00 ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 80.00, GetUnitFacing(udg_danwei2[376]))
if ( ( GetUnitState(udg_danwei2[376], UNIT_STATE_MANA) < 500.00 ) ) then
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(120.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_tansheyinren_2_2Func002Func002Func014Func002A)
if ( ( IsUnitGroupEmptyBJ(udg_xuanqu) == false ) ) then
set udg_danwei2[380]=GroupPickRandomUnit(udg_xuanqu)
call UnitDamageTarget(udg_danwei2[375], udg_danwei2[380], ( ( 0.30 * I2R(GetHeroAgi(udg_danwei2[375], true)) ) + 50.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_SONIC, WEAPON_TYPE_METAL_HEAVY_SLICE)
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[375]), 0x65303636, udg_dian2[0], 270.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 0.50)
call s__baka_IssueTargetOrderById2(udg_danwei2[1] , 852095 , udg_danwei2[380])
set udg_danwei2[1]=null
call SetUnitManaBJ(udg_danwei2[376], 500.00)
if ( ( IsUnitInGroup(udg_danwei2[380], udg_danweizu2[380]) == true ) ) then
call SetUnitLifeBJ(udg_danwei2[376], ( GetUnitState(udg_danwei2[376], UNIT_STATE_LIFE) - 1 ))
else
call GroupAddUnit(udg_danweizu2[380], udg_danwei2[380])
endif
else
endif
call DestroyGroup(udg_xuanqu)
else
endif
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_danwei2[376], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[376], GetLocationY(udg_dian2[1]))
call SetUnitManaBJ(udg_danwei2[376], ( GetUnitState(udg_danwei2[376], UNIT_STATE_MANA) + 1 ))
else
set udg_zhengshu2[375]=500
endif
call RemoveLocation(udg_dian2[1])
else
set udg_zhengshuex[0]=( R2I(GetUnitState(udg_danwei2[376], UNIT_STATE_LIFE)) - 0 )
call KillUnit(udg_danwei2[376])
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(800.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_tansheyinren_2_2Func002Func002Func005A)
if ( ( IsUnitGroupEmptyBJ(udg_xuanqu) == false ) ) then
set udg_danwei2[1]=GroupPickRandomUnit(udg_xuanqu)
set udg_dian2[2]=GetUnitLoc(udg_danwei2[1])
set udg_danwei2[376]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[375]), 0x65303138, udg_dian2[0], AngleBetweenPoints(udg_dian2[0], udg_dian2[2]))
else
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], 2400.00, ( AngleBetweenPoints(udg_dian2[0], udg_dian2[376]) + GetRandomReal(- 45.00, 45.00) ))
set udg_danwei2[376]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[375]), 0x65303138, udg_dian2[0], AngleBetweenPoints(udg_dian2[0], udg_dian2[2]))
endif
call DestroyGroup(udg_xuanqu)
call SetUnitLifeBJ(udg_danwei2[376], I2R(udg_zhengshuex[0]))
call SetUnitManaBJ(udg_danwei2[376], 0.00)
call StopSoundBJ(gg_snd_SpellShieldImpact1, false)
call PlaySoundOnUnitBJ(gg_snd_SpellShieldImpact1, 100, udg_danwei2[376])
call RemoveLocation(udg_dian2[2])
endif
call RemoveLocation(udg_dian2[0])
else
call KillUnit(udg_danwei2[376])
call DestroyGroup(udg_danweizu2[380])
call PauseTimer(udg_times[375])
call RemoveLocation(udg_dian2[375])
call RemoveLocation(udg_dian2[376])
set udg_danwei2[380]=null
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_tansheyinren_2_2 takes nothing returns nothing
set gg_trg_tansheyinren_2_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_tansheyinren_2_2, udg_times[375])
call TriggerAddCondition(gg_trg_tansheyinren_2_2, Condition(function Trig_tansheyinren_2_2Conditions))
call TriggerAddAction(gg_trg_tansheyinren_2_2, function Trig_tansheyinren_2_2Actions)
endfunction
function Trig_feidaoActions takes nothing returns nothing
set udg_danwei[292]=GetTriggerUnit()
set udg_danwei[293]=GetTriggerUnit()
set udg_dian[227]=GetUnitLoc(udg_danwei[292])
set udg_dian[228]=GetSpellTargetLoc()
set udg_dian[229]=PolarProjectionBJ(udg_dian[227], 75.00, AngleBetweenPoints(udg_dian[227], udg_dian[228]))
set udg_aXUNHUAN[131]=1
loop
exitwhen udg_aXUNHUAN[131] > 6
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[292]), 0x65303053, udg_dian[229], ( AngleBetweenPoints(udg_dian[227], udg_dian[228]) + ( 14.00 - ( 4.00 * I2R(udg_aXUNHUAN[131]) ) ) ))
call GroupAddUnit(udg_DAZE[0], udg_danwei2[0])
call GroupAddUnit(udg_DAZE[1], udg_danwei2[0])
call SetUnitLifeBJ(udg_danwei2[0], ( ( I2R(GetHeroAgi(udg_danwei[292], true)) / 4.00 ) + ( 10.00 * I2R(GetUnitAbilityLevel(udg_danwei[292], 0x41303258)) ) ))
call SetUnitManaBJ(udg_danwei2[0], ( AngleBetweenPoints(udg_dian[227], udg_dian[228]) + ( 514.00 - ( 4.00 * I2R(udg_aXUNHUAN[131]) ) ) ))
call SetUnitUserData(udg_danwei2[0], ( - 2 * udg_aXUNHUAN[131] ))
call GroupAddUnit(udg_danweizu2[92], udg_danwei2[0])
set udg_danwei2[0]=null
set udg_aXUNHUAN[131]=udg_aXUNHUAN[131] + 1
endloop
set udg_zhengshu2[100]=4
set udg_danwei[292]=null
call RemoveLocation(udg_dian[227])
call RemoveLocation(udg_dian[228])
call RemoveLocation(udg_dian[229])
endfunction
function InitTrig_feidao takes nothing returns nothing
set gg_trg_feidao=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_feidao , 3 , 0x41303258)
call TriggerAddAction(gg_trg_feidao, function Trig_feidaoActions)
endfunction
function Trig_feidao_the_worldActions takes nothing returns nothing
set udg_danwei[292]=GetTriggerUnit()
set udg_danwei[293]=GetTriggerUnit()
set udg_dian[227]=GetUnitLoc(udg_danwei[292])
set udg_dian[228]=GetSpellTargetLoc()
if ( ( udg_yuansu[50] == 0x41303942 ) ) then
set udg_aXUNHUAN[132]=1
loop
exitwhen udg_aXUNHUAN[132] > 3
set udg_dian[229]=PolarProjectionBJ(udg_dian[227], 75.00, ( AngleBetweenPoints(udg_dian[227], udg_dian[228]) + ( 36.00 - ( 18.00 * I2R(udg_aXUNHUAN[132]) ) ) ))
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[292]), 0x65303053, udg_dian[229], ( AngleBetweenPoints(udg_dian[227], udg_dian[228]) + ( 18.00 - ( 9.00 * I2R(udg_aXUNHUAN[132]) ) ) ))
call GroupAddUnit(udg_DAZE[0], udg_danwei2[0])
call GroupAddUnit(udg_DAZE[1], udg_danwei2[0])
call SetUnitLifeBJ(udg_danwei2[0], ( ( I2R(GetHeroAgi(udg_danwei[292], true)) / 4.00 ) + 50.00 ))
call SetUnitManaBJ(udg_danwei2[0], ( AngleBetweenPoints(udg_dian[227], udg_dian[228]) + ( 515.00 - ( 6.00 * I2R(udg_aXUNHUAN[132]) ) ) ))
call SetUnitUserData(udg_danwei2[0], 0)
call GroupAddUnit(udg_danweizu2[92], udg_danwei2[0])
set udg_danwei2[0]=null
call RemoveLocation(udg_dian[229])
set udg_aXUNHUAN[132]=udg_aXUNHUAN[132] + 1
endloop
else
set udg_aXUNHUAN[132]=1
loop
exitwhen udg_aXUNHUAN[132] > 4
set udg_dian[229]=PolarProjectionBJ(udg_dian[227], 75.00, ( AngleBetweenPoints(udg_dian[227], udg_dian[228]) + ( 30.00 - ( 12.00 * I2R(udg_aXUNHUAN[132]) ) ) ))
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[292]), 0x65303053, udg_dian[229], ( AngleBetweenPoints(udg_dian[227], udg_dian[228]) + ( 15.00 - ( 6.00 * I2R(udg_aXUNHUAN[132]) ) ) ))
call GroupAddUnit(udg_DAZE[0], udg_danwei2[0])
call GroupAddUnit(udg_DAZE[1], udg_danwei2[0])
call SetUnitLifeBJ(udg_danwei2[0], ( ( I2R(GetHeroAgi(udg_danwei[292], true)) / 4.00 ) + 50.00 ))
call SetUnitManaBJ(udg_danwei2[0], ( AngleBetweenPoints(udg_dian[227], udg_dian[228]) + ( 515.00 - ( 6.00 * I2R(udg_aXUNHUAN[132]) ) ) ))
call SetUnitUserData(udg_danwei2[0], 0)
call GroupAddUnit(udg_danweizu2[92], udg_danwei2[0])
set udg_danwei2[0]=null
call RemoveLocation(udg_dian[229])
set udg_aXUNHUAN[132]=udg_aXUNHUAN[132] + 1
endloop
endif
set udg_yuansu[50]=0x41303942
set udg_zhengshu2[100]=3
set udg_danwei[292]=null
call RemoveLocation(udg_dian[227])
call RemoveLocation(udg_dian[228])
endfunction
function InitTrig_feidao_the_world takes nothing returns nothing
set gg_trg_feidao_the_world=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_feidao_the_world , 3 , 0x41303942)
call TriggerAddAction(gg_trg_feidao_the_world, function Trig_feidao_the_worldActions)
endfunction
function Trig_feidao_2Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[92]) == false ) )
endfunction
function Trig_feidao_2Func003Func001Func004Func001Func004002003 takes nothing returns boolean
return ( ( ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(udg_danwei[293])) == true ) and ( ( IsUnitType(GetFilterUnit(), UNIT_TYPE_DEAD) == false ) and ( IsUnitType(GetFilterUnit(), UNIT_TYPE_FLYING) == false ) ) ) )
endfunction
function Trig_feidao_2Func003Func001Func004Func001Func005A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( GetUnitTypeId(udg_danwei2[1]) != 0x6F746F74 ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) ) then
else
call GroupRemoveUnit(udg_danweizu[58], udg_danwei2[1])
endif
set udg_danwei2[1]=null
endfunction
function Trig_feidao_2Func003Func001Func004Func001Func006Func001Func002Func001Func003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
set udg_dian2[2]=GetUnitLoc(udg_danwei2[1])
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( GetUnitTypeId(udg_danwei2[1]) != 0x6F746F74 ) and ( IsUnitVisible(udg_danwei2[1], GetOwningPlayer(udg_danwei[293])) == true ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei[293])) == true ) and ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[2]) >= 500.00 ) ) then
else
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[1])
endif
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[2])
endfunction
function Trig_feidao_2Func003Func001Func004Func001Func006Func001Func002A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( IsDestructableDeadBJ(GetEnumDestructable()) == false ) ) then
set udg_dian2[0]=GetDestructableLoc(GetEnumDestructable())
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(1200.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_feidao_2Func003Func001Func004Func001Func006Func001Func002Func001Func003A)
set udg_shishu2[0]=GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE)
call RemoveUnit(udg_danwei2[0])
call GroupRemoveUnit(udg_danweizu2[92], udg_danwei2[0])
set udg_danwei2[0]=null
if ( ( IsUnitGroupEmptyBJ(udg_xuanqu) == true ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 225.00, AngleBetweenPoints(udg_dian2[0], udg_dian[230]))
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[293]), 0x65303131, udg_dian2[1], AngleBetweenPoints(udg_dian2[0], udg_dian[230]))
call SetUnitManaBJ(udg_danwei2[0], ( AngleBetweenPoints(udg_dian2[0], udg_dian[230]) + 500.00 ))
else
set udg_danwei2[2]=FirstOfGroup(udg_xuanqu)
set udg_dian2[2]=GetUnitLoc(udg_danwei2[2])
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 225.00, AngleBetweenPoints(udg_dian2[0], udg_dian2[2]))
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[293]), 0x65303131, udg_dian2[1], AngleBetweenPoints(udg_dian2[0], udg_dian2[2]))
call SetUnitManaBJ(udg_danwei2[0], ( AngleBetweenPoints(udg_dian2[0], udg_dian2[2]) + 500.00 ))
set udg_danwei2[2]=null
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
endif
call GroupAddUnit(udg_DAZE[0], udg_danwei2[0])
call GroupAddUnit(udg_DAZE[1], udg_danwei2[0])
call SetUnitLifeBJ(udg_danwei2[0], udg_shishu2[0])
call GroupAddUnit(udg_danweizu2[92], udg_danwei2[0])
call DestroyGroup(udg_xuanqu)
call StopSoundBJ(gg_snd_SpellShieldImpact1, false)
call PlaySoundOnUnitBJ(gg_snd_SpellShieldImpact1, 100, udg_danwei2[0])
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
endif
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_feidao_2Func003Func001A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) + 1 ))
set udg_dian[230]=GetUnitLoc(udg_danwei2[0])
if ( ( GetUnitUserData(udg_danwei2[0]) <= 20 ) and ( IsUnitType(udg_danwei2[0], UNIT_TYPE_DEAD) == false ) and ( IsTerrainPathableBJ(udg_dian[230], PATHING_TYPE_FLYABILITY) == false ) ) then
if ( ( GetUnitUserData(udg_danwei2[0]) >= 0 ) ) then
set udg_dian[231]=PolarProjectionBJ(udg_dian[230], 70.00, ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) - 500.00 ))
call SetUnitPositionLoc(udg_danwei2[0], udg_dian[231])
set udg_danweizu[58]=YDWEGetUnitsInRangeOfLocMatchingNull(150.00 , udg_dian[230] , Condition(function Trig_feidao_2Func003Func001Func004Func001Func004002003))
call ForGroupBJ(udg_danweizu[58], function Trig_feidao_2Func003Func001Func004Func001Func005A)
if ( ( IsUnitGroupEmptyBJ(udg_danweizu[58]) == false ) ) then
set udg_danwei[294]=FirstOfGroup(udg_danweizu[58])
set udg_dian2[0]=GetUnitLoc(udg_danwei[294])
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 225.00, AngleBetweenPoints(udg_dian2[0], udg_dian[230]))
if ( ( IsUnitType(udg_danwei[294], UNIT_TYPE_STRUCTURE) == false ) ) then
call UnitDamageTarget(udg_danwei[293], udg_danwei[294], GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_SLICE)
call KillUnit(udg_danwei2[0])
call GroupRemoveUnit(udg_danweizu2[92], udg_danwei2[0])
set udg_danwei2[0]=null
else
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x65303053 ) ) then
set udg_shishu2[0]=GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE)
call RemoveUnit(udg_danwei2[0])
call GroupRemoveUnit(udg_danweizu2[92], udg_danwei2[0])
set udg_danwei2[0]=null
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[293]), 0x65303131, udg_dian2[1], AngleBetweenPoints(udg_dian2[0], udg_dian[230]))
call GroupAddUnit(udg_DAZE[0], udg_danwei2[0])
call GroupAddUnit(udg_DAZE[1], udg_danwei2[0])
call SetUnitLifeBJ(udg_danwei2[0], udg_shishu2[0])
call SetUnitManaBJ(udg_danwei2[0], ( AngleBetweenPoints(udg_dian2[0], udg_dian[230]) + 500.00 ))
call GroupAddUnit(udg_danweizu2[92], udg_danwei2[0])
call StopSoundBJ(gg_snd_SpellShieldImpact1, false)
call PlaySoundOnUnitBJ(gg_snd_SpellShieldImpact1, 100, udg_danwei2[0])
else
endif
endif
set udg_danwei[294]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x65303053 ) ) then
call YDWEEnumDestructablesInCircleBJNull(175.00 , udg_dian[230] , function Trig_feidao_2Func003Func001Func004Func001Func006Func001Func002A)
else
endif
endif
call DestroyGroup(udg_danweizu[58])
call RemoveLocation(udg_dian[231])
else
endif
else
call KillUnit(udg_danwei2[0])
call GroupRemoveUnit(udg_danweizu2[92], udg_danwei2[0])
set udg_danwei2[0]=null
endif
call RemoveLocation(udg_dian[230])
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_feidao_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_zhengshu[79] == 0 ) ) then
call ForGroupBJ(udg_danweizu2[92], function Trig_feidao_2Func003Func001A)
else
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_feidao_2 takes nothing returns nothing
set gg_trg_feidao_2=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_feidao_2, 0.04)
call TriggerAddCondition(gg_trg_feidao_2, Condition(function Trig_feidao_2Conditions))
call TriggerAddAction(gg_trg_feidao_2, function Trig_feidao_2Actions)
endfunction
function Trig_feidaoqishe_1Actions takes nothing returns nothing
set udg_danwei[295]=GetTriggerUnit()
set udg_danwei[293]=GetTriggerUnit()
set udg_dian[232]=GetSpellTargetLoc()
set udg_dian[233]=GetUnitLoc(udg_danwei[295])
set udg_dian2[1]=PolarProjectionBJ(udg_dian[233], 100.00, AngleBetweenPoints(udg_dian[232], udg_dian[233]))
set udg_aXUNHUAN[133]=1
loop
exitwhen udg_aXUNHUAN[133] > 4
set udg_dian2[0]=PolarProjectionBJ(udg_dian2[1], 75.00, ( AngleBetweenPoints(udg_dian[233], udg_dian[232]) + ( 25.00 - ( 10.00 * I2R(udg_aXUNHUAN[133]) ) ) ))
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[295]), 0x65303155, udg_dian2[0], ( AngleBetweenPoints(udg_dian[233], udg_dian[232]) + ( 6.00 - ( 4.00 * I2R(udg_aXUNHUAN[133]) ) ) ))
call GroupAddUnit(udg_DAZE[0], udg_danwei2[0])
call GroupAddUnit(udg_DAZE[1], udg_danwei2[0])
call GroupAddUnit(udg_danweizu[64], udg_danwei2[0])
call SetUnitLifeBJ(udg_danwei2[0], ( ( I2R(GetHeroAgi(udg_danwei[295], true)) / 5.00 ) + ( 6.00 * I2R(GetUnitAbilityLevel(udg_danwei[295], 0x41303259)) ) ))
call SetUnitUserData(udg_danwei2[0], 0)
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
set udg_aXUNHUAN[133]=udg_aXUNHUAN[133] + 1
endloop
set udg_aXUNHUAN[134]=1
loop
exitwhen udg_aXUNHUAN[134] > 5
set udg_dian2[0]=PolarProjectionBJ(udg_dian2[1], 150.00, ( AngleBetweenPoints(udg_dian[233], udg_dian[232]) + ( 30.00 - ( 10.00 * I2R(udg_aXUNHUAN[134]) ) ) ))
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[295]), 0x65303155, udg_dian2[0], ( AngleBetweenPoints(udg_dian[233], udg_dian[232]) + ( 8.00 - ( 4.00 * I2R(udg_aXUNHUAN[134]) ) ) ))
call GroupAddUnit(udg_DAZE[0], udg_danwei2[0])
call GroupAddUnit(udg_DAZE[1], udg_danwei2[0])
call GroupAddUnit(udg_danweizu[64], udg_danwei2[0])
call SetUnitLifeBJ(udg_danwei2[0], ( ( I2R(GetHeroAgi(udg_danwei[295], true)) / 5.00 ) + ( 6.00 * I2R(GetUnitAbilityLevel(udg_danwei[295], 0x41303259)) ) ))
call SetUnitUserData(udg_danwei2[0], 0)
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
set udg_aXUNHUAN[134]=udg_aXUNHUAN[134] + 1
endloop
set udg_zhengshu2[100]=5
set udg_danwei[295]=null
call RemoveLocation(udg_dian[232])
call RemoveLocation(udg_dian[233])
endfunction
function InitTrig_feidaoqishe_1 takes nothing returns nothing
set gg_trg_feidaoqishe_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_feidaoqishe_1 , 3 , 0x41303259)
call TriggerAddAction(gg_trg_feidaoqishe_1, function Trig_feidaoqishe_1Actions)
endfunction
function Trig_jishufeidaoqishe_1Actions takes nothing returns nothing
set udg_danwei2[391]=GetTriggerUnit()
set udg_dian2[391]=GetUnitLoc(udg_danwei2[391])
set udg_dian2[392]=GetSpellTargetLoc()
set udg_zhengshu2[391]=0
set udg_dian2[0]=PolarProjectionBJ(udg_dian2[391], 100.00, ( AngleBetweenPoints(udg_dian2[391], udg_dian2[392]) + 180.00 ))
set udg_danwei2[392]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[391]), 0x65303052, udg_dian2[0], AngleBetweenPoints(udg_dian2[391], udg_dian2[392]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\Polymorph\\PolyMorphDoneGround.mdl", udg_dian2[0]))
call RemoveLocation(udg_dian2[0])
call AddUnitAnimationProperties(udg_danwei2[392], "channel", true)
call SetUnitVertexColor(udg_danwei2[392], 255, 255, 255, 192)
call StartTimerBJ(udg_times[391], true, 0.05)
set udg_danwei2[0]=GetTriggerUnit()
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41304755, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41304752, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41304753, false)
if ( ( GetUnitAbilityLevel(udg_danwei2[0], 0x41303941) == 1 ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41303941, false)
else
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x4130325A, true)
if ( ( udg_zhengshu[79] == 0 ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41303259, true)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41303258, true)
else
call UnitAddAbility(udg_danwei2[392], 0x41303249)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41303249, true)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41303942, true)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41304655, true)
call UnitAddAbility(udg_danwei2[0], 0x41304756)
call UnitRemoveAbility(udg_danwei2[0], 0x41303852)
call SetUnitAbilityLevel(udg_danwei2[0], 0x41304756, 2)
call DisableTrigger(gg_trg_xiaoyefuka_1)
call IssueImmediateOrderById(udg_danwei2[0], 852526)
call EnableTrigger(gg_trg_xiaoyefuka_1)
set udg_danwei2[0]=null
endfunction
function InitTrig_jishufeidaoqishe_1 takes nothing returns nothing
set gg_trg_jishufeidaoqishe_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_jishufeidaoqishe_1 , 3 , 0x41304752)
call TriggerAddAction(gg_trg_jishufeidaoqishe_1, function Trig_jishufeidaoqishe_1Actions)
endfunction
function Trig_jishufeidaoqishe_2Actions takes nothing returns nothing
set udg_zhengshu2[391]=( udg_zhengshu2[391] + 1 )
if ( ( udg_zhengshu2[391] <= ( 25 + ( 5 * GetUnitAbilityLevel(udg_danwei2[391], 0x41304750) ) ) ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[392])
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 600.00, ( AngleBetweenPoints(udg_dian2[391], udg_dian2[392]) + 180.00 ))
if ( ( GetUnitAbilityLevel(udg_danwei2[392], 0x41303249) == 1 ) ) then
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], GetRandomReal(650.00, 850.00), ( AngleBetweenPoints(udg_dian2[391], udg_dian2[392]) + GetRandomReal(- 13.50, 13.50) ))
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[391]), 0x65303155, udg_dian2[2], ( AngleBetweenPoints(udg_dian2[391], udg_dian2[392]) + GetRandomReal(- 30.00, 30.00) ))
else
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], 675.00, ( AngleBetweenPoints(udg_dian2[391], udg_dian2[392]) + GetRandomReal(- 10.00, 10.00) ))
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[391]), 0x65303155, udg_dian2[2], AngleBetweenPoints(udg_dian2[1], udg_dian2[2]))
endif
call GroupAddUnit(udg_danweizu2[391], udg_danwei2[0])
if ( ( GetRandomInt(1, 7) == 1 ) ) then
else
call SetUnitVertexColor(udg_danwei2[0], 255, 255, 255, 64)
endif
call GroupAddUnit(udg_DAZE[0], udg_danwei2[0])
call GroupAddUnit(udg_DAZE[1], udg_danwei2[0])
call SetUnitLifeBJ(udg_danwei2[0], ( ( I2R(GetHeroAgi(udg_danwei2[391], true)) / 5.00 ) + ( 6.00 * I2R(GetUnitAbilityLevel(udg_danwei2[391], 0x41303259)) ) ))
call SetUnitManaBJ(udg_danwei2[0], GetRandomReal(20.00, 200.00))
call SetUnitUserData(udg_danwei2[0], ( 1300 / R2I(GetUnitState(udg_danwei2[0], UNIT_STATE_MANA)) ))
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
else
set udg_dian2[0]=GetUnitLoc(udg_danwei2[392])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\Polymorph\\PolyMorphDoneGround.mdl", udg_dian2[0]))
call RemoveLocation(udg_dian2[0])
call PauseTimer(udg_times[391])
call RemoveUnit(udg_danwei2[392])
set udg_danwei2[391]=null
set udg_danwei2[392]=null
call RemoveLocation(udg_dian2[391])
call RemoveLocation(udg_dian2[392])
endif
endfunction
function InitTrig_jishufeidaoqishe_2 takes nothing returns nothing
set gg_trg_jishufeidaoqishe_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_jishufeidaoqishe_2, udg_times[391])
call TriggerAddAction(gg_trg_jishufeidaoqishe_2, function Trig_jishufeidaoqishe_2Actions)
endfunction
function Trig_feidaoqishe_the_worldActions takes nothing returns nothing
set udg_danwei[295]=GetTriggerUnit()
set udg_danwei[293]=GetTriggerUnit()
set udg_dian[232]=GetSpellTargetLoc()
set udg_dian[233]=GetUnitLoc(udg_danwei[295])
if ( ( udg_yuansu[50] == 0x41303249 ) ) then
set udg_aXUNHUAN[135]=1
loop
exitwhen udg_aXUNHUAN[135] > 4
set udg_dian2[0]=PolarProjectionBJ(udg_dian[233], 50.00, ( AngleBetweenPoints(udg_dian[233], udg_dian[232]) + ( 37.50 - ( 15.00 * I2R(udg_aXUNHUAN[135]) ) ) ))
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[295]), 0x65303155, udg_dian2[0], ( AngleBetweenPoints(udg_dian[233], udg_dian[232]) + ( 10.00 - ( 4.00 * I2R(udg_aXUNHUAN[135]) ) ) ))
call GroupAddUnit(udg_DAZE[0], udg_danwei2[0])
call GroupAddUnit(udg_DAZE[1], udg_danwei2[0])
call GroupAddUnit(udg_danweizu[64], udg_danwei2[0])
call SetUnitLifeBJ(udg_danwei2[0], ( ( I2R(GetHeroAgi(udg_danwei[295], true)) / 5.00 ) + 30.00 ))
call SetUnitUserData(udg_danwei2[0], 0)
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
set udg_aXUNHUAN[135]=udg_aXUNHUAN[135] + 1
endloop
else
set udg_aXUNHUAN[135]=1
loop
exitwhen udg_aXUNHUAN[135] > 6
set udg_dian2[0]=PolarProjectionBJ(udg_dian[233], 50.00, ( AngleBetweenPoints(udg_dian[233], udg_dian[232]) + ( 35.00 - ( 10.00 * I2R(udg_aXUNHUAN[135]) ) ) ))
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[295]), 0x65303155, udg_dian2[0], ( AngleBetweenPoints(udg_dian[233], udg_dian[232]) + ( 10.50 - ( 3.00 * I2R(udg_aXUNHUAN[135]) ) ) ))
call GroupAddUnit(udg_DAZE[0], udg_danwei2[0])
call GroupAddUnit(udg_DAZE[1], udg_danwei2[0])
call GroupAddUnit(udg_danweizu[64], udg_danwei2[0])
call SetUnitLifeBJ(udg_danwei2[0], ( ( I2R(GetHeroAgi(udg_danwei[295], true)) / 5.00 ) + 30.00 ))
call SetUnitUserData(udg_danwei2[0], 0)
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
set udg_aXUNHUAN[135]=udg_aXUNHUAN[135] + 1
endloop
endif
set udg_yuansu[50]=0x41303249
set udg_zhengshu2[100]=4
set udg_danwei[295]=null
call RemoveLocation(udg_dian[232])
call RemoveLocation(udg_dian[233])
endfunction
function InitTrig_feidaoqishe_the_world takes nothing returns nothing
set gg_trg_feidaoqishe_the_world=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_feidaoqishe_the_world , 3 , 0x41303249)
call TriggerAddAction(gg_trg_feidaoqishe_the_world, function Trig_feidaoqishe_the_worldActions)
endfunction
function Trig_feidaoqishe_2Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu[64]) == false ) )
endfunction
function Trig_feidaoqishe_2Func001Func001Func002Func008A takes nothing returns nothing
set udg_danwei[328]=GetEnumUnit()
if ( ( IsUnitInGroup(udg_danwei[328], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei[328], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei[328], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei[328], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei[328], GetOwningPlayer(udg_danwei[329])) == true ) ) then
call UnitDamageTarget(udg_danwei[293], udg_danwei[328], GetUnitState(udg_danwei[329], UNIT_STATE_LIFE), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_SLICE)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl", udg_danwei[328], "chest"))
call SetUnitUserData(udg_danwei[329], 21)
else
endif
set udg_danwei[328]=null
endfunction
function Trig_feidaoqishe_2Func001Func001A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei[329]=GetEnumUnit()
if ( ( GetUnitUserData(udg_danwei[329]) <= 8 ) ) then
call SetUnitUserData(udg_danwei[329], ( GetUnitUserData(udg_danwei[329]) + 1 ))
set udg_dian[242]=GetUnitLoc(udg_danwei[329])
set udg_dian[243]=PolarProjectionBJ(udg_dian[242], 150.00, GetUnitFacing(udg_danwei[329]))
set udg_danweizu[61]=YDWEGetUnitsInRangeOfLocAllNull(125.00 , udg_dian[242])
call ForGroupBJ(udg_danweizu[61], function Trig_feidaoqishe_2Func001Func001Func002Func008A)
call DestroyGroup(udg_danweizu[61])
if ( ( IsTerrainPathableBJ(udg_dian[243], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_danwei[329], GetLocationX(udg_dian[243]))
call SetUnitY(udg_danwei[329], GetLocationY(udg_dian[243]))
else
call KillUnit(udg_danwei[329])
call GroupRemoveUnit(udg_danweizu[64], udg_danwei[329])
endif
call RemoveLocation(udg_dian[242])
call RemoveLocation(udg_dian[243])
else
call KillUnit(udg_danwei[329])
call GroupRemoveUnit(udg_danweizu[64], udg_danwei[329])
endif
set udg_danwei[329]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_feidaoqishe_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_zhengshu[79] == 0 ) ) then
call ForGroupBJ(udg_danweizu[64], function Trig_feidaoqishe_2Func001Func001A)
else
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_feidaoqishe_2 takes nothing returns nothing
set gg_trg_feidaoqishe_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_feidaoqishe_2, udg_Times[4])
call TriggerAddCondition(gg_trg_feidaoqishe_2, Condition(function Trig_feidaoqishe_2Conditions))
call TriggerAddAction(gg_trg_feidaoqishe_2, function Trig_feidaoqishe_2Actions)
endfunction
function Trig_feidaoqishe_2_jishuConditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[391]) == false ) )
endfunction
function Trig_feidaoqishe_2_jishuFunc001Func001Func002Func008A takes nothing returns nothing
set udg_danwei[328]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[328], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei[328], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei[328], UNIT_TYPE_DEAD) == false ) and ( IsUnitInGroup(udg_danwei[328], udg_danweizu2[369]) == false ) and ( IsUnitEnemy(udg_danwei[328], GetOwningPlayer(udg_danwei[329])) == true ) ) then
call UnitDamageTarget(udg_danwei[293], udg_danwei[328], ( GetUnitState(udg_danwei[329], UNIT_STATE_LIFE) * 0.70 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_SLICE)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl", udg_danwei[328], "chest"))
call SetUnitUserData(udg_danwei[329], - 1)
else
endif
set udg_danwei[328]=null
endfunction
function Trig_feidaoqishe_2_jishuFunc001Func001A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei[329]=GetEnumUnit()
if ( ( GetUnitUserData(udg_danwei[329]) >= 0 ) ) then
call SetUnitUserData(udg_danwei[329], ( GetUnitUserData(udg_danwei[329]) - 1 ))
set udg_dian[242]=GetUnitLoc(udg_danwei[329])
set udg_dian[243]=PolarProjectionBJ(udg_dian[242], GetUnitState(udg_danwei[329], UNIT_STATE_MANA), GetUnitFacing(udg_danwei[329]))
set udg_danweizu[61]=YDWEGetUnitsInRangeOfLocAllNull(115.00 , udg_dian[242])
call ForGroupBJ(udg_danweizu[61], function Trig_feidaoqishe_2_jishuFunc001Func001Func002Func008A)
call DestroyGroup(udg_danweizu[61])
if ( ( IsTerrainPathableBJ(udg_dian[243], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_danwei[329], GetLocationX(udg_dian[243]))
call SetUnitY(udg_danwei[329], GetLocationY(udg_dian[243]))
else
call KillUnit(udg_danwei[329])
call GroupRemoveUnit(udg_danweizu2[391], udg_danwei[329])
endif
call RemoveLocation(udg_dian[242])
call RemoveLocation(udg_dian[243])
else
call KillUnit(udg_danwei[329])
call GroupRemoveUnit(udg_danweizu[64], udg_danwei[329])
endif
set udg_danwei[329]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_feidaoqishe_2_jishuActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_zhengshu[79] == 0 ) ) then
call ForGroupBJ(udg_danweizu2[391], function Trig_feidaoqishe_2_jishuFunc001Func001A)
else
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_feidaoqishe_2_jishu takes nothing returns nothing
set gg_trg_feidaoqishe_2_jishu=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_feidaoqishe_2_jishu, udg_Times[4])
call TriggerAddCondition(gg_trg_feidaoqishe_2_jishu, Condition(function Trig_feidaoqishe_2_jishuConditions))
call TriggerAddAction(gg_trg_feidaoqishe_2_jishu, function Trig_feidaoqishe_2_jishuActions)
endfunction
function Trig_sharenmuou_1Actions takes nothing returns nothing
set udg_danwei2[373]=GetTriggerUnit()
set udg_danwei2[374]=GetSpellTargetUnit()
set udg_dian2[373]=GetUnitLoc(udg_danwei2[373])
set udg_dian2[374]=GetUnitLoc(udg_danwei2[374])
call StopSoundBJ(gg_snd_StrongDrinkMissile1, false)
call PlaySoundOnUnitBJ(gg_snd_StrongDrinkMissile1, 100, udg_danwei2[373])
set udg_zhengshu2[373]=0
call StartTimerBJ(udg_times[373], true, 0.06)
endfunction
function InitTrig_sharenmuou_1 takes nothing returns nothing
set gg_trg_sharenmuou_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_sharenmuou_1 , 3 , 0x4130325A)
call TriggerAddAction(gg_trg_sharenmuou_1, function Trig_sharenmuou_1Actions)
endfunction
function Trig_sharenmuou_2Conditions takes nothing returns boolean
return ( ( udg_zhengshu[79] == 0 ) )
endfunction
function Trig_sharenmuou_2Actions takes nothing returns nothing
if ( ( udg_zhengshu2[373] <= 10 ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[373])
set udg_dian2[1]=GetUnitLoc(udg_danwei2[374])
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[373]), 0x65303157, udg_dian2[0], ( ( AngleBetweenPoints(udg_dian2[373], udg_dian2[374]) + 90.00 ) + ( 18.00 * I2R(udg_zhengshu2[373]) ) ))
call SetUnitManaBJ(udg_danwei2[1], ( GetUnitFacing(udg_danwei2[1]) + 500.00 ))
call SetUnitUserData(udg_danwei2[1], 0)
call AddUnitAnimationProperties(udg_danwei2[1], "channel", false)
call SetUnitScale(udg_danwei2[1], 1, 1, 1)
call GroupAddUnit(udg_danweizu2[373], udg_danwei2[1])
set udg_danwei2[1]=null
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[373]), 0x65303157, udg_dian2[0], ( ( AngleBetweenPoints(udg_dian2[373], udg_dian2[374]) - 90.00 ) + ( 18.00 * I2R(udg_zhengshu2[373]) ) ))
call SetUnitManaBJ(udg_danwei2[1], ( GetUnitFacing(udg_danwei2[1]) + 500.00 ))
call SetUnitUserData(udg_danwei2[1], 0)
call AddUnitAnimationProperties(udg_danwei2[1], "channel", false)
call SetUnitScale(udg_danwei2[1], 1, 1, 1)
call GroupAddUnit(udg_danweizu2[373], udg_danwei2[1])
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
set udg_zhengshu2[373]=( udg_zhengshu2[373] + 1 )
else
call PauseTimer(udg_times[373])
endif
endfunction
function InitTrig_sharenmuou_2 takes nothing returns nothing
set gg_trg_sharenmuou_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_sharenmuou_2, udg_times[373])
call TriggerAddCondition(gg_trg_sharenmuou_2, Condition(function Trig_sharenmuou_2Conditions))
call TriggerAddAction(gg_trg_sharenmuou_2, function Trig_sharenmuou_2Actions)
endfunction
function Trig_sharenmuou_3Func001Func002Func003A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[2]=GetUnitLoc(udg_danwei2[0])
if ( ( GetUnitUserData(udg_danwei2[0]) <= 20 ) ) then
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) + 1 ))
if ( ( GetUnitUserData(udg_danwei2[0]) <= 10 ) ) then
set udg_dian2[3]=PolarProjectionBJ(udg_dian2[0], ( I2R(GetUnitUserData(udg_danwei2[0])) * 20.00 ), ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) - 500.00 ))
else
set udg_dian2[3]=PolarProjectionBJ(udg_dian2[0], 200.00, ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) - 500.00 ))
call SetUnitTimeScale(udg_danwei2[0], GetRandomReal(1.00, 2.00))
if ( ( GetUnitUserData(udg_danwei2[0]) == 11 ) ) then
call AddUnitAnimationProperties(udg_danwei2[0], "channel", true)
else
endif
if ( ( GetUnitUserData(udg_danwei2[0]) == 18 ) ) then
call AddUnitAnimationProperties(udg_danwei2[0], "channel", false)
else
endif
call SetUnitFacing(udg_danwei2[0], AngleBetweenPoints(udg_dian2[2], udg_dian2[1]))
endif
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[3]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[3]))
else
call SetUnitTimeScale(udg_danwei2[0], 1.00)
call SetUnitFacing(udg_danwei2[0], AngleBetweenPoints(udg_dian2[2], udg_dian2[1]))
set udg_dian2[3]=PolarProjectionBJ(udg_dian2[2], 60.00, AngleBetweenPoints(udg_dian2[2], udg_dian2[1]))
if ( ( DistanceBetweenPoints(udg_dian2[2], udg_dian2[1]) >= 80.00 ) ) then
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[3]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[3]))
else
call UnitDamageTarget(udg_danwei2[373], udg_danwei2[374], ( ( ( ( 1.50 / 22.00 ) * I2R(GetHeroAgi(udg_danwei2[373], true)) ) + ( ( 35.00 / 22.00 ) * I2R(GetUnitAbilityLevel(udg_danwei2[373], 0x4130325A)) ) ) * ( 1.00 + ( 0.01 * ( ( 1.00 / 15.00 ) * RMinBJ(DistanceBetweenPoints(udg_dian2[1], udg_dian2[374]), 1500.00) ) ) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_SONIC, WEAPON_TYPE_METAL_MEDIUM_SLICE)
call GroupRemoveUnit(udg_danweizu2[373], udg_danwei2[0])
call KillUnit(udg_danwei2[0])
endif
endif
call RemoveLocation(udg_dian2[2])
call RemoveLocation(udg_dian2[3])
set udg_danwei2[0]=null
endfunction
function Trig_sharenmuou_3Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( IsUnitGroupEmptyBJ(udg_danweizu2[373]) == false ) ) then
if ( ( udg_zhengshu[79] == 0 ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[373])
set udg_dian2[1]=GetUnitLoc(udg_danwei2[374])
call ForGroupBJ(udg_danweizu2[373], function Trig_sharenmuou_3Func001Func002Func003A)
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
endif
else
if ( ( udg_zhengshu2[373] > 10 ) ) then
set udg_danwei2[373]=null
set udg_danwei2[374]=null
call RemoveLocation(udg_dian2[373])
call RemoveLocation(udg_dian2[374])
else
endif
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_sharenmuou_3 takes nothing returns nothing
set gg_trg_sharenmuou_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_sharenmuou_3, udg_Times[4])
call TriggerAddAction(gg_trg_sharenmuou_3, function Trig_sharenmuou_3Actions)
endfunction
function Trig_yemuhuanyingsharengui_1Func010T takes nothing returns nothing
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei[307]), 0x41304755, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei[307]), 0x41304752, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei[307]), 0x41304753, false)
if ( ( GetUnitAbilityLevel(udg_danwei[307], 0x41303941) == 1 ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei[307]), 0x41303941, false)
else
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei[307]), 0x4130325A, true)
if ( ( udg_zhengshu[79] == 0 ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei[307]), 0x41303259, true)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei[307]), 0x41303258, true)
else
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei[307]), 0x41303249, true)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei[307]), 0x41303942, true)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei[307]), 0x41304655, true)
call UnitAddAbility(udg_danwei[307], 0x41304756)
call UnitRemoveAbility(udg_danwei[307], 0x41303852)
call SetUnitAbilityLevel(udg_danwei[307], 0x41304756, 1)
call DisableTrigger(gg_trg_xiaoyefuka_1)
call IssueImmediateOrderById(udg_danwei[307], 852526)
call EnableTrigger(gg_trg_xiaoyefuka_1)
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
endfunction
function Trig_yemuhuanyingsharengui_1Actions takes nothing returns nothing
local timer ydl_timer
set udg_danwei[307]=GetTriggerUnit()
set udg_danwei[308]=GetSpellTargetUnit()
set udg_dian[235]=GetUnitLoc(udg_danwei[307])
set udg_dian[236]=GetUnitLoc(udg_danwei[308])
set udg_dian[393]=GetUnitLoc(udg_danwei[308])
call StopSoundBJ(gg_snd_StrongDrinkMissile1, false)
call PlaySoundOnUnitBJ(gg_snd_StrongDrinkMissile1, 100, udg_danwei[307])
set udg_danweizu2[341]=CreateGroup()
set ydl_timer=CreateTimer()
call TimerStart(ydl_timer, 0.00, false, function Trig_yemuhuanyingsharengui_1Func010T)
set udg_aXUNHUAN[136]=1
loop
exitwhen udg_aXUNHUAN[136] > 9
set udg_dian2[0]=PolarProjectionBJ(udg_dian[235], 50.00, ( ( AngleBetweenPoints(udg_dian[235], udg_dian[236]) + 90.00 ) + ( 10.00 * I2R(udg_aXUNHUAN[136]) ) ))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[307]), 0x65303637, udg_dian[235], ( ( AngleBetweenPoints(udg_dian[235], udg_dian[236]) + 90.00 ) + ( 10.00 * I2R(udg_aXUNHUAN[136]) ) ))
call GroupAddUnit(udg_DAZE[0], udg_danwei2[1])
call GroupAddUnit(udg_DAZE[1], udg_danwei2[1])
call GroupAddUnit(udg_DAZE[2], udg_danwei2[1])
call SetUnitLifeBJ(udg_danwei2[1], I2R(( 118 - ( udg_aXUNHUAN[136] * 2 ) )))
call SetUnitManaBJ(udg_danwei2[1], ( GetUnitFacing(udg_danwei2[1]) + 0.00 ))
call SetUnitUserData(udg_danwei2[1], 80)
call GroupAddUnit(udg_danweizu2[340], udg_danwei2[1])
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
set udg_aXUNHUAN[136]=udg_aXUNHUAN[136] + 1
endloop
set udg_aXUNHUAN[137]=1
loop
exitwhen udg_aXUNHUAN[137] > 9
set udg_dian2[0]=PolarProjectionBJ(udg_dian[235], 50.00, ( ( AngleBetweenPoints(udg_dian[235], udg_dian[236]) - 90.00 ) + ( 10.00 * I2R(udg_aXUNHUAN[137]) ) ))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[307]), 0x65303637, udg_dian[235], ( ( AngleBetweenPoints(udg_dian[235], udg_dian[236]) - 90.00 ) + ( 10.00 * I2R(udg_aXUNHUAN[137]) ) ))
call GroupAddUnit(udg_DAZE[0], udg_danwei2[1])
call GroupAddUnit(udg_DAZE[1], udg_danwei2[1])
call GroupAddUnit(udg_DAZE[2], udg_danwei2[1])
call SetUnitLifeBJ(udg_danwei2[1], I2R(( 118 - ( udg_aXUNHUAN[137] * 2 ) )))
call SetUnitManaBJ(udg_danwei2[1], ( GetUnitFacing(udg_danwei2[1]) + 0.00 ))
call SetUnitUserData(udg_danwei2[1], 80)
call GroupAddUnit(udg_danweizu2[340], udg_danwei2[1])
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
set udg_aXUNHUAN[137]=udg_aXUNHUAN[137] + 1
endloop
call StartTimerBJ(udg_jishiqi[88], true, 0.03)
call RemoveLocation(udg_dian[236])
set ydl_timer=null
endfunction
function InitTrig_yemuhuanyingsharengui_1 takes nothing returns nothing
set gg_trg_yemuhuanyingsharengui_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_yemuhuanyingsharengui_1 , 3 , 0x41304755)
call TriggerAddAction(gg_trg_yemuhuanyingsharengui_1, function Trig_yemuhuanyingsharengui_1Actions)
endfunction
function Trig_yemuhuanyingsharengui_2Func003Func001A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
call SetUnitTimeScale(udg_danwei2[0], 0.00)
call SetUnitUserData(udg_danwei2[0], IMinBJ(GetUnitUserData(udg_danwei2[0]), 30))
call AddUnitAnimationProperties(udg_danwei2[0], "channel", false)
set udg_danwei2[0]=null
endfunction
function Trig_yemuhuanyingsharengui_2Func003Func003Func005Func003Func008Func002A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( udg_danwei2[1] != udg_danwei[308] ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei[307])) == true ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[341]) == false ) ) then
call UnitDamageTarget(udg_danwei[307], udg_danwei2[1], ( ( ( 1.50 * I2R(GetHeroAgi(udg_danwei[307], true)) ) + ( 75.00 * I2R(GetUnitAbilityLevel(udg_danwei[307], 0x41304750)) ) ) * ( 1.00 + ( 0.01 * ( ( 1.00 / 15.00 ) * RMinBJ(DistanceBetweenPoints(udg_dian[393], udg_dian[236]), 1500.00) ) ) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_SONIC, WEAPON_TYPE_METAL_MEDIUM_SLICE)
call GroupAddUnit(udg_danweizu2[341], udg_danwei2[1])
else
endif
set udg_danwei[328]=null
endfunction
function Trig_yemuhuanyingsharengui_2Func003Func003A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
call SetUnitTimeScale(udg_danwei2[0], 1.00)
if ( ( GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE) >= 100.00 ) ) then
call SetUnitLifeBJ(udg_danwei2[0], ( GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE) - 1 ))
else
if ( ( GetUnitUserData(udg_danwei2[0]) >= 60 ) ) then
call SetUnitManaBJ(udg_danwei2[0], ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) + 12.00 ))
call SetUnitFacing(udg_danwei2[0], GetUnitState(udg_danwei2[0], UNIT_STATE_MANA))
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 25.00, GetUnitState(udg_danwei2[0], UNIT_STATE_MANA))
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
call RemoveLocation(udg_dian2[1])
if ( ( GetUnitUserData(udg_danwei2[0]) == 60 ) ) then
call AddUnitAnimationProperties(udg_danwei2[0], "channel", false)
else
endif
else
if ( ( GetUnitUserData(udg_danwei2[0]) >= 0 ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian[235], ( DistanceBetweenPoints(udg_dian[235], udg_dian2[0]) + 5.00 ), ( AngleBetweenPoints(udg_dian[235], udg_dian2[0]) + 18.00 ))
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
if ( ( GetUnitUserData(udg_danwei2[0]) >= 20 ) ) then
call SetUnitFacing(udg_danwei2[0], AngleBetweenPoints(udg_dian[235], udg_dian2[0]))
else
call SetUnitFacing(udg_danwei2[0], AngleBetweenPoints(udg_dian2[0], udg_dian[236]))
endif
call RemoveLocation(udg_dian2[1])
else
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(125.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_yemuhuanyingsharengui_2Func003Func003Func005Func003Func008Func002A)
call DestroyGroup(udg_xuanqu)
if ( ( DistanceBetweenPoints(udg_dian[236], udg_dian2[0]) > 75.00 ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 70.00, AngleBetweenPoints(udg_dian2[0], udg_dian[236]))
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
call SetUnitFacing(udg_danwei2[0], AngleBetweenPoints(udg_dian2[0], udg_dian[236]))
call RemoveLocation(udg_dian2[1])
else
call UnitDamageTarget(udg_danwei[307], udg_danwei[308], ( ( ( ( 2.00 / 18.00 ) * I2R(GetHeroAgi(udg_danwei[307], true)) ) + ( ( 100.00 / 18.00 ) * I2R(GetUnitAbilityLevel(udg_danwei[307], 0x41304750)) ) ) * ( 1.00 + ( 0.01 * ( ( 1.00 / 15.00 ) * RMinBJ(DistanceBetweenPoints(udg_dian[393], udg_dian[236]), 1500.00) ) ) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_SONIC, WEAPON_TYPE_METAL_MEDIUM_SLICE)
call GroupRemoveUnit(udg_danweizu2[340], udg_danwei2[0])
call KillUnit(udg_danwei2[0])
endif
endif
endif
endif
call RemoveLocation(udg_dian2[0])
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_yemuhuanyingsharengui_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_dian[236]=GetUnitLoc(udg_danwei[308])
set udg_dian[239]=GetUnitLoc(udg_danwei[307])
if ( ( udg_zhengshu[79] == 0 ) ) then
call ForGroupBJ(udg_danweizu2[340], function Trig_yemuhuanyingsharengui_2Func003Func003A)
if ( ( IsUnitGroupEmptyBJ(udg_danweizu2[340]) == true ) ) then
set udg_danwei[307]=null
set udg_danwei[308]=null
call PauseTimer(udg_jishiqi[88])
call DestroyGroup(udg_danweizu2[341])
call RemoveLocation(udg_dian[235])
call RemoveLocation(udg_dian[393])
else
endif
else
call ForGroupBJ(udg_danweizu2[340], function Trig_yemuhuanyingsharengui_2Func003Func001A)
endif
call RemoveLocation(udg_dian[236])
call RemoveLocation(udg_dian[239])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_yemuhuanyingsharengui_2 takes nothing returns nothing
set gg_trg_yemuhuanyingsharengui_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_yemuhuanyingsharengui_2, udg_jishiqi[88])
call TriggerAddAction(gg_trg_yemuhuanyingsharengui_2, function Trig_yemuhuanyingsharengui_2Actions)
endfunction
function Trig_the_world_1Actions takes nothing returns nothing
set udg_yuansu[50]=0x41303941
set udg_danwei[322]=GetTriggerUnit()
set udg_dian[240]=GetUnitLoc(udg_danwei[322])
set udg_danwei[324]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[322]), 0x65303159, udg_dian[240], 270.00)
call PlaySoundOnUnitBJ(gg_snd_PossessionMissileHit1, 100, udg_danwei[322])
call UnitApplyTimedLife(udg_danwei[324], 0x42487765, 5.00)
call SetUnitTimeScalePercent(udg_danwei[324], 250.00)
call SetUnitVertexColor(udg_danwei[324], 100, 100, 100, 100)
call SetUnitAnimationByIndex(udg_danwei[322], 3)
set udg_danweizu[60]=CreateGroup()
call StartTimerBJ(udg_times[99], false, 1.00)
set udg_Danwei[37]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[322]), 0x65303649, udg_dian[240], 270.00)
call SetUnitManaBJ(udg_Danwei[37], 255.00)
call SetUnitColor(udg_Danwei[37], PLAYER_COLOR_BLUE)
call s__maphack_SetHeight(udg_Danwei[37] , 275.00 , 0.00)
call SetUnitTimeScale(udg_Danwei[37], ( 1.00 / 1.00 ))
call GroupAddUnit(udg_Danweizu[37], udg_Danwei[37])
set udg_Danwei[37]=null
set udg_danwei2[0]=GetTriggerUnit()
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41304755, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41304752, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41304753, false)
if ( ( GetUnitAbilityLevel(udg_danwei2[0], 0x41303941) == 1 ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41303941, false)
else
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x4130325A, true)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41303259, true)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41303258, true)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41304655, true)
call UnitAddAbility(udg_danwei2[0], 0x41304756)
call UnitRemoveAbility(udg_danwei2[0], 0x41303852)
call SetUnitAbilityLevel(udg_danwei2[0], 0x41304756, 4)
call DisableTrigger(gg_trg_xiaoyefuka_1)
call IssueImmediateOrderById(udg_danwei2[0], 852526)
call EnableTrigger(gg_trg_xiaoyefuka_1)
set udg_danwei2[0]=null
endfunction
function InitTrig_the_world_1 takes nothing returns nothing
set gg_trg_the_world_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_the_world_1 , 3 , 0x41303941)
call TriggerAddAction(gg_trg_the_world_1, function Trig_the_world_1Actions)
endfunction
function Trig_the_world_2Func009Func002A takes nothing returns nothing
set udg_Danwei[37]=GetEnumUnit()
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[37])) + 1 ) == ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei[322])) + 1 ) ) ) then
call SetUnitColor(udg_Danwei[37], PLAYER_COLOR_CYAN)
call SetUnitTimeScale(udg_Danwei[37], ( 0.00 - ( 1.00 / 4.00 ) ))
else
endif
set udg_Danwei[37]=null
endfunction
function Trig_the_world_2Func009Func005A takes nothing returns nothing
set udg_Danwei[37]=GetEnumUnit()
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[37])) + 1 ) == ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei[322])) + 1 ) ) ) then
call SetUnitColor(udg_Danwei[37], PLAYER_COLOR_LIGHT_GRAY)
call SetUnitTimeScale(udg_Danwei[37], ( 0.00 - ( 1.00 / 4.00 ) ))
else
endif
set udg_Danwei[37]=null
endfunction
function Trig_the_world_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call SetUnitVertexColor(udg_danwei[324], 255, 255, 255, 255)
if ( ( GetUnitAbilityLevel(udg_danwei[322], 0x41304756) == 1 ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei[322]), 0x41304752, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei[322]), 0x41304753, false)
else
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei[322]), 0x41303259, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei[322]), 0x41303258, false)
endif
call UnitAddAbility(udg_danwei[322], 0x41303249)
call UnitAddAbility(udg_danwei[322], 0x41303942)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei[322]), 0x41303249, true)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei[322]), 0x41303942, true)
call PlaySoundOnUnitBJ(gg_snd_ManaShieldCaster1, 100, udg_danwei[322])
if ( ( IsUnitAliveBJ(udg_danwei[322]) == true ) ) then
set udg_zhengshu[79]=0
call ForGroupBJ(udg_Danweizu[37], function Trig_the_world_2Func009Func005A)
else
set udg_zhengshu[79]=85
call ForGroupBJ(udg_Danweizu[37], function Trig_the_world_2Func009Func002A)
endif
call StartTimerBJ(udg_jishiqi[89], true, 0.05)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_the_world_2 takes nothing returns nothing
set gg_trg_the_world_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_the_world_2, udg_times[99])
call TriggerAddAction(gg_trg_the_world_2, function Trig_the_world_2Actions)
endfunction
function Trig_the_world_3Func003Func004A takes nothing returns nothing
set udg_danwei[323]=GetEnumUnit()
if ( ( udg_danwei[323] != udg_danwei[322] ) and ( IsUnitType(udg_danwei[323], UNIT_TYPE_ANCIENT) == false ) and ( GetUnitTypeId(udg_danwei[323]) != 0x68677477 ) and ( IsUnitType(udg_danwei[323], UNIT_TYPE_DEAD) == false ) ) then
call SetUnitTimeScale(udg_danwei[323], 0.00)
call SetUnitVertexColor(udg_danwei[323], 128, 128, 128, 128)
call s__Unit_PauseUnitMU(udg_danwei[323] , true , "咲夜的世界")
call GroupAddUnit(udg_danweizu[60], udg_danwei[323])
else
endif
set udg_danwei[323]=null
endfunction
function Trig_the_world_3Func003Func006A takes nothing returns nothing
set udg_danwei[323]=GetEnumUnit()
call SetUnitTimeScale(udg_danwei[323], 1.00)
if ( ( GetUnitTypeId(udg_danwei[323]) == 0x75303053 ) ) then
call SetUnitVertexColor(udg_danwei[323], 25, 25, 50, 255)
else
if ( ( GetUnitTypeId(udg_danwei[323]) == 0x7530304B ) ) then
call SetUnitVertexColor(udg_danwei[323], 255, 150, 150, 255)
else
if ( ( GetUnitTypeId(udg_danwei[323]) == 0x75303059 ) ) then
call SetUnitVertexColor(udg_danwei[323], 255, 200, 150, 255)
else
if ( ( GetUnitTypeId(udg_danwei[323]) == 0x75303059 ) ) then
call SetUnitVertexColor(udg_danwei[323], 255, 200, 150, 255)
else
if ( ( GetUnitTypeId(udg_danwei[323]) == 0x75303058 ) ) then
call SetUnitVertexColor(udg_danwei[323], 255, 200, 100, 255)
else
if ( ( GetUnitTypeId(udg_danwei[323]) == 0x6E65666D ) and ( GetUnitAbilityLevel(udg_danwei[323], 0x41304A53) == 1 ) ) then
call SetUnitVertexColor(udg_danwei[323], 64, 64, 64, 150)
else
call SetUnitVertexColor(udg_danwei[323], 255, 255, 255, 255)
endif
endif
endif
endif
endif
endif
call s__Unit_PauseUnitMU(udg_danwei[323] , false , "咲夜的世界")
set udg_danwei[323]=null
endfunction
function Trig_the_world_3Func003Func012A takes nothing returns nothing
set udg_Danwei[37]=GetEnumUnit()
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[37])) + 1 ) == ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei[322])) + 1 ) ) ) then
call SetUnitTimeScale(udg_Danwei[37], 0.00)
call SetUnitManaBJ(udg_Danwei[37], 250.00)
else
endif
set udg_Danwei[37]=null
endfunction
function Trig_the_world_3Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu[79]=( udg_zhengshu[79] + 1 )
if ( ( udg_zhengshu[79] < 80 ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei[322]), 0x41303259, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei[322]), 0x41303258, false)
set udg_danweizu[59]=YDWEGetUnitsInRangeOfLocAllNull(1200.00 , udg_dian[240])
call ForGroupBJ(udg_danweizu[59], function Trig_the_world_3Func003Func004A)
call DestroyGroup(udg_danweizu[59])
else
call ForGroupBJ(udg_danweizu[60], function Trig_the_world_3Func003Func006A)
call DestroyGroup(udg_danweizu[60])
set udg_zhengshu[79]=0
if ( ( GetUnitAbilityLevel(udg_danwei[322], 0x41303852) == 1 ) ) then
if ( ( GetUnitAbilityLevel(udg_danwei[322], 0x41303259) >= 1 ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei[322]), 0x41304752, true)
else
endif
if ( ( GetUnitAbilityLevel(udg_danwei[322], 0x41303258) >= 1 ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei[322]), 0x41304753, true)
else
endif
else
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei[322]), 0x41303259, true)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei[322]), 0x41303258, true)
endif
call UnitRemoveAbility(udg_danwei[322], 0x41303249)
call UnitRemoveAbility(udg_danwei[322], 0x41303942)
call ForGroupBJ(udg_Danweizu[37], function Trig_the_world_3Func003Func012A)
call KillUnit(udg_danwei[324])
set udg_danwei[322]=null
set udg_danwei[324]=null
call PauseTimer(udg_jishiqi[89])
call RemoveLocation(udg_dian[240])
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_the_world_3 takes nothing returns nothing
set gg_trg_the_world_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_the_world_3, udg_jishiqi[89])
call TriggerAddAction(gg_trg_the_world_3, function Trig_the_world_3Actions)
endfunction
function Trig_chaosuzaishengActions takes nothing returns nothing
set udg_danwei[333]=GetTriggerUnit()
set udg_dian[248]=GetUnitLoc(udg_danwei[333])
set udg_danwei[334]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[333]), 0x65303235, udg_dian[248], 0)
set udg_danwei[335]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[333]), 0x65303234, udg_dian[248], 0)
call UnitApplyTimedLife(udg_danwei[334], 0x42487765, 0.30)
call UnitApplyTimedLife(udg_danwei[335], 0x42487765, 0.40)
call SetUnitTimeScale(udg_danwei[335], 1.50)
set udg_danwei[334]=null
set udg_zhengshu[86]=0
call StartTimerBJ(udg_jishiqi[97], true, 0.05)
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl", udg_dian[248]))
call RemoveLocation(udg_dian[248])
endfunction
function InitTrig_chaosuzaisheng takes nothing returns nothing
set gg_trg_chaosuzaisheng=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_chaosuzaisheng , 3 , 0x4130344E)
call TriggerAddAction(gg_trg_chaosuzaisheng, function Trig_chaosuzaishengActions)
endfunction
function Trig_chaosuzaisheng2Func002Func006A takes nothing returns nothing
set udg_danwei[334]=GetEnumUnit()
if ( ( IsUnitAliveBJ(udg_danwei[334]) == true ) and ( IsUnitType(udg_danwei[334], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei[334], udg_danweizu2[369]) == false ) and ( IsUnitEnemy(udg_danwei[334], GetOwningPlayer(udg_danwei[333])) == true ) ) then
set udg_dian[246]=GetUnitLoc(udg_danwei[334])
set udg_dian2[0]=PolarProjectionBJ(udg_dian[246], 40.00, AngleBetweenPoints(udg_dian[248], udg_dian[246]))
if ( ( udg_zhengshu[86] == 1 ) ) then
call UnitDamageTarget(udg_danwei[333], udg_danwei[334], ( ( 40.00 + ( 40.00 * I2R(GetUnitAbilityLevel(udg_danwei[333], 0x4130344E)) ) ) + I2R(GetHeroAgi(udg_danwei[333], true)) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
set udg_danwei[336]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[334]), 0x65303130, udg_dian[248], 0)
call UnitApplyTimedLife(udg_danwei[336], 0x42487765, 0.50)
call UnitAddAbility(udg_danwei[336], 0x41303033)
call s__baka_IssueTargetOrder2(udg_danwei[336] , "thunderbolt" , udg_danwei[334])
set udg_danwei[336]=null
else
endif
if ( ( IsTerrainPathableBJ(udg_dian2[0], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_danwei[334], GetLocationX(udg_dian2[0]))
call SetUnitY(udg_danwei[334], GetLocationY(udg_dian2[0]))
else
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SpiritOfVengeanceMissile\\SpiritOfVengeanceMissile.mdl", udg_danwei[334], "chest"))
call RemoveLocation(udg_dian[246])
else
endif
set udg_danwei[334]=null
endfunction
function Trig_chaosuzaisheng2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu[86]=( udg_zhengshu[86] + 1 )
if ( ( udg_zhengshu[86] <= 10 ) ) then
set udg_dian[248]=GetUnitLoc(udg_danwei[333])
set udg_danweizu[66]=YDWEGetUnitsInRangeOfLocAllNull(400.00 , udg_dian[248])
call ForGroupBJ(udg_danweizu[66], function Trig_chaosuzaisheng2Func002Func006A)
call DestroyGroup(udg_danweizu[66])
call RemoveLocation(udg_dian[248])
else
set udg_danwei[333]=GetTriggerUnit()
set udg_danwei[335]=null
call PauseTimer(udg_jishiqi[97])
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_chaosuzaisheng2 takes nothing returns nothing
set gg_trg_chaosuzaisheng2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_chaosuzaisheng2, udg_jishiqi[97])
call TriggerAddAction(gg_trg_chaosuzaisheng2, function Trig_chaosuzaisheng2Actions)
endfunction
function Trig_shunbu_1Func005T takes nothing returns nothing
if ( ( IsUnitPausedBJ(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x458B7DE9)) == false ) ) then
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x300B6E6B, ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x300B6E6B) - 1 ))
if ( ( s__process_IsEnable(LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x23F1A87D)) == true ) and ( IsUnitType(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x458B7DE9), UNIT_TYPE_DEAD) == false ) and ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x300B6E6B) > 0 ) ) then
call s__Unit_Move(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x458B7DE9) , LoadReal(YDHT, GetHandleId(GetExpiredTimer()), 0xDA9511F2) , 70.00)
else
call IssueImmediateOrderById(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x458B7DE9), 851972)
call SetUnitVertexColor(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x458B7DE9), 255, 255, 255, 255)
call s__process_Remove(LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x23F1A87D))
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
endif
else
endif
endfunction
function Trig_shunbu_1Actions takes nothing returns nothing
local timer ydl_timer
local integer ydl_localvar_step=LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76)
set ydl_localvar_step=ydl_localvar_step + 3
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76, ydl_localvar_step)
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xECE825E7, ydl_localvar_step)
call SaveLocationHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x5B0D7524, GetSpellTargetLoc())
call IssuePointOrderByIdLoc(GetTriggerUnit(), 851986, LoadLocationHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x5B0D7524))
call SaveReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x300B6E6B, ( RMinBJ(( ( 600.00 + ( 2.00 * I2R(GetHeroAgi(GetTriggerUnit(), true)) ) ) * ( ( ( GetUnitLifePercent(GetTriggerUnit()) / 2.00 ) + 50.00 ) / 100.00 ) ), s__math_U2L(GetTriggerUnit() , LoadLocationHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x5B0D7524) , 0 , false)) / 70.00 ))
set ydl_timer=CreateTimer()
call SaveInteger(YDHT, GetHandleId(ydl_timer), 0x300B6E6B, R2I(LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x300B6E6B)))
call SaveReal(YDHT, GetHandleId(ydl_timer), 0xDA9511F2, s__math_U2L(GetTriggerUnit() , LoadLocationHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x5B0D7524) , 1 , true))
call SaveInteger(YDHT, GetHandleId(ydl_timer), 0x23F1A87D, s__process_Create(GetTriggerUnit() , "移动" , 100 , true))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x458B7DE9, GetTriggerUnit())
call TimerStart(ydl_timer, 0.02, true, function Trig_shunbu_1Func005T)
call FlushChildHashtable(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step)
set ydl_timer=null
endfunction
function InitTrig_shunbu_1 takes nothing returns nothing
set gg_trg_shunbu_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_shunbu_1 , 3 , 0x41303439)
call TriggerAddAction(gg_trg_shunbu_1, function Trig_shunbu_1Actions)
endfunction
function Trig_wanjieActions takes nothing returns nothing
set udg_danwei2[1]=GetTriggerUnit()
set udg_dian[249]=GetUnitLoc(udg_danwei2[1])
call SetSoundPosition(gg_snd_00fb_0000, GetLocationX(udg_dian[249]), GetLocationY(udg_dian[249]), 500.00)
call PlaySoundBJ(gg_snd_00fb_0000)
call StartTimerBJ(udg_jishiqi[124], false, 1.00)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[1]), 0x41303845, false)
call UnitAddAbility(udg_danwei2[1], 0x41303453)
call UnitMakeAbilityPermanent(udg_danwei2[1], true, 0x41303453)
set udg_danwei[459]=GetTriggerUnit()
call StartTimerBJ(udg_jishiqi[146], false, 0.00)
set udg_danwei2[1]=null
endfunction
function InitTrig_wanjie takes nothing returns nothing
set gg_trg_wanjie=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_wanjie , 3 , 0x41303845)
call TriggerAddAction(gg_trg_wanjie, function Trig_wanjieActions)
endfunction
function Trig_wanjie3Actions takes nothing returns nothing
call StopSoundBJ(gg_snd_00fb_0000, false)
call SetSoundPosition(gg_snd_00fb_0001, GetLocationX(udg_dian[249]), GetLocationY(udg_dian[249]), 500.00)
call PlaySoundBJ(gg_snd_00fb_0001)
call RemoveLocation(udg_dian[249])
call StartTimerBJ(udg_jishiqi[150], true, 0.03)
set udg_zhengshu[141]=R2I(( ( 30.00 + ( 10.00 * I2R(GetUnitAbilityLevel(udg_danwei[459], 0x41303845)) ) ) / 0.03 ))
call UnitAddAbility(udg_danwei[459], 0x41305031)
call UnitRemoveAbility(udg_danwei[459], 0x41305031)
call SetUnitTimeScale(udg_danwei[459], 1)
call SetUnitAnimationByIndex(udg_danwei[459], 12)
set udg_piaofuwenzi[4]=CreateTextTag()
call SetTextTagTextBJ(udg_piaofuwenzi[4], ( "" + R2SW(( I2R(udg_zhengshu[141]) * 0.03 ), 1, 1) ), 12.00)
call SetTextTagPos(udg_piaofuwenzi[4], ( GetUnitX(udg_danwei[459]) - 15.00 ), GetUnitY(udg_danwei[459]), ( s__maphack_GetHeight(udg_danwei[459]) + 210.00 ))
call SetTextTagColor(udg_piaofuwenzi[4], 125, 50, 255, 255)
call SetTextTagVisibility(udg_piaofuwenzi[4], false)
set udg_wanjiazu[0]=CreateForce()
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ( ( IsUnitAlly(udg_danwei[459], s__baka_SPlayer(bj_forLoopAIndex - 1)) == true ) ) then
call ForceAddPlayer(udg_wanjiazu[0], s__baka_SPlayer(bj_forLoopAIndex - 1))
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call ShowTextTagForceBJ(true, udg_piaofuwenzi[4], udg_wanjiazu[0])
call DestroyForce(udg_wanjiazu[0])
endfunction
function InitTrig_wanjie3 takes nothing returns nothing
set gg_trg_wanjie3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_wanjie3, udg_jishiqi[124])
call TriggerAddAction(gg_trg_wanjie3, function Trig_wanjie3Actions)
endfunction
function Trig_wanjie_0_5Actions takes nothing returns nothing
set udg_Dian[89]=GetUnitLoc(udg_danwei[459])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[459]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304B56)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_danwei[459])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
call SetUnitTimeScale(udg_danwei[459], 1.40)
call SetUnitAnimationByIndex(udg_danwei[459], 6)
endfunction
function InitTrig_wanjie_0_5 takes nothing returns nothing
set gg_trg_wanjie_0_5=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_wanjie_0_5, udg_jishiqi[146])
call TriggerAddAction(gg_trg_wanjie_0_5, function Trig_wanjie_0_5Actions)
endfunction
function Trig_wanjie_4Actions takes nothing returns nothing
if ( ( IsUnitPausedBJ(udg_danwei[459]) == false ) ) then
if ( ( udg_zhengshu[141] > 0 ) and ( IsUnitType(udg_danwei[459], UNIT_TYPE_DEAD) == false ) ) then
set udg_zhengshu[141]=( udg_zhengshu[141] - 1 )
call SetTextTagTextBJ(udg_piaofuwenzi[4], ( "" + R2SW(( I2R(udg_zhengshu[141]) * 0.03 ), 1, 1) ), 12.00)
call SetTextTagPos(udg_piaofuwenzi[4], ( GetUnitX(udg_danwei[459]) - 15.00 ), GetUnitY(udg_danwei[459]), ( s__maphack_GetHeight(udg_danwei[459]) + 210.00 ))
else
call UnitAddAbility(udg_danwei[459], 0x41305030)
call UnitRemoveAbility(udg_danwei[459], 0x41305030)
if ( ( udg_Zhengshu[176] > 0 ) ) then
call StartTimerBJ(udg_jishiqi[177], true, 0.05)
set udg_zhengshu[89]=0
call UnitRemoveAbility(udg_danwei[459], 0x41305046)
if ( ( udg_Zhengshu[176] == 1 ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei[459]), 0x4130344F, true)
call UnitRemoveAbility(udg_danwei[459], 0x41304F5A)
else
endif
set udg_Zhengshu[176]=0
else
endif
call UnitRemoveAbility(udg_danwei[459], 0x41305045)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei[459]), 0x41303845, true)
call UnitRemoveAbility(udg_danwei[459], 0x41303453)
call UnitRemoveBuffBJ(0x4230304C, udg_danwei[459])
call SetTextTagPermanent(udg_piaofuwenzi[4], false)
call SetTextTagAge(udg_piaofuwenzi[4], 0)
call SetTextTagLifespan(udg_piaofuwenzi[4], 0.50)
call SetTextTagFadepoint(udg_piaofuwenzi[4], 0.10)
call PauseTimer(udg_jishiqi[150])
endif
else
endif
endfunction
function InitTrig_wanjie_4 takes nothing returns nothing
set gg_trg_wanjie_4=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_wanjie_4, udg_jishiqi[150])
call TriggerAddAction(gg_trg_wanjie_4, function Trig_wanjie_4Actions)
endfunction
function Trig_xuhua_1Actions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
set udg_dian[254]=GetUnitLoc(udg_danwei2[0])
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41303453, false)
call UnitAddAbility(udg_danwei2[0], 0x41305045)
call UnitAddAbility(udg_danwei2[0], 0x4130344D)
call GroupAddUnit(udg_danweizu2[2], udg_danwei2[0])
if ( ( GetUnitAbilityLevel(udg_danwei2[0], 0x41303845) == 1 ) ) then
call UnitAddAbility(udg_danwei2[0], 0x41303438)
else
if ( ( GetUnitAbilityLevel(udg_danwei2[0], 0x41303845) == 2 ) ) then
call UnitAddAbility(udg_danwei2[0], 0x41303442)
else
call UnitAddAbility(udg_danwei2[0], 0x41303443)
endif
endif
set udg_danwei[341]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303238, udg_dian[254], 0)
call UnitApplyTimedLife(udg_danwei[341], 0x42487765, 2.00)
set udg_danwei[341]=null
set udg_danwei2[0]=null
call RemoveLocation(udg_dian[254])
endfunction
function InitTrig_xuhua_1 takes nothing returns nothing
set gg_trg_xuhua_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_xuhua_1 , 3 , 0x41303453)
call TriggerAddAction(gg_trg_xuhua_1, function Trig_xuhua_1Actions)
endfunction
function Trig_xuhua_2Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[2]) == false ) )
endfunction
function Trig_xuhua_2Func001A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
if ( ( UnitHasBuffBJ(udg_danwei2[0], 0x4230304C) == true ) and ( IsUnitType(udg_danwei2[0], UNIT_TYPE_DEAD) == false ) ) then
else
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41303453, true)
call UnitRemoveAbility(udg_danwei2[0], 0x41305045)
call UnitRemoveAbility(udg_danwei2[0], 0x4130344D)
call UnitRemoveAbility(udg_danwei2[0], 0x41303438)
call UnitRemoveAbility(udg_danwei2[0], 0x41303442)
call UnitRemoveAbility(udg_danwei2[0], 0x41303443)
call SetUnitLifeBJ(udg_danwei2[0], RMaxBJ(( GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE) - ( GetUnitState(udg_danwei2[0], UNIT_STATE_MAX_LIFE) * 0.15 ) ), 1.00))
call GroupRemoveUnit(udg_danweizu2[2], udg_danwei2[0])
endif
set udg_danwei2[0]=null
endfunction
function Trig_xuhua_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[2], function Trig_xuhua_2Func001A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_xuhua_2 takes nothing returns nothing
set gg_trg_xuhua_2=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_xuhua_2, 0.50)
call TriggerAddCondition(gg_trg_xuhua_2, Condition(function Trig_xuhua_2Conditions))
call TriggerAddAction(gg_trg_xuhua_2, function Trig_xuhua_2Actions)
endfunction
function Trig_zuihoudeyueyaActions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
set udg_dian[254]=GetUnitLoc(udg_danwei2[0])
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\darknova.mdx", udg_dian[254]))
call RemoveLocation(udg_dian[254])
set udg_Zhengshu[176]=1
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41303453, true)
call UnitRemoveAbility(udg_danwei2[0], 0x41305045)
call UnitRemoveAbility(udg_danwei2[0], 0x4130344D)
call UnitRemoveAbility(udg_danwei2[0], 0x41303438)
call UnitRemoveAbility(udg_danwei2[0], 0x41303442)
call UnitRemoveAbility(udg_danwei2[0], 0x41303443)
call GroupRemoveUnit(udg_danweizu2[2], udg_danwei2[0])
call UnitAddAbility(udg_danwei2[0], 0x41305046)
call UnitAddAbility(udg_danwei2[0], 0x41304F5A)
call UnitMakeAbilityPermanent(udg_danwei2[0], true, 0x41304F5A)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x4130344F, false)
call SetUnitManaPercentBJ(udg_danwei2[0], 100)
call UnitRemoveBuffBJ(0x4230304C, udg_danwei2[0])
set udg_zhengshu[141]=R2I(( 10.00 / 0.03 ))
call SetTextTagColor(udg_piaofuwenzi[4], 128, 128, 255, 255)
set udg_danwei2[0]=null
endfunction
function InitTrig_zuihoudeyueya takes nothing returns nothing
set gg_trg_zuihoudeyueya=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_zuihoudeyueya , 3 , 0x41305045)
call TriggerAddAction(gg_trg_zuihoudeyueya, function Trig_zuihoudeyueyaActions)
endfunction
function Trig_yueyatianchongFunc008Func004A takes nothing returns nothing
set udg_danwei[340]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[340], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei[340], udg_danweizu2[369]) == false ) and ( IsUnitAliveBJ(udg_danwei[340]) == true ) and ( IsUnitEnemy(udg_danwei[340], GetOwningPlayer(udg_danwei[336])) == true ) and ( IsUnitInGroup(udg_danwei[340], udg_danweizu[68]) == false ) ) then
call UnitDamageTarget(udg_danwei[336], udg_danwei[340], udg_shishu2[339], true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", udg_danwei[340], "chest"))
call GroupAddUnit(udg_danweizu[68], udg_danwei[340])
else
endif
set udg_danwei[340]=null
endfunction
function Trig_yueyatianchongFunc008Func009A takes nothing returns nothing
set udg_danwei[340]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[340], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei[340], udg_danweizu2[369]) == false ) and ( IsUnitAliveBJ(udg_danwei[340]) == true ) and ( IsUnitEnemy(udg_danwei[340], GetOwningPlayer(udg_danwei[336])) == true ) and ( IsUnitInGroup(udg_danwei[340], udg_danweizu[68]) == false ) ) then
call UnitDamageTarget(udg_danwei[336], udg_danwei[340], udg_shishu2[339], true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Demon\\DemonBoltImpact\\DemonBoltImpact.mdl", udg_danwei[340], "chest"))
call GroupAddUnit(udg_danweizu[68], udg_danwei[340])
else
endif
set udg_danwei[340]=null
endfunction
function Trig_yueyatianchongActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei[336]=GetTriggerUnit()
set udg_dian[250]=GetUnitLoc(udg_danwei[336])
set udg_dian[251]=GetSpellTargetLoc()
set udg_zhengshu[87]=0
call SetSoundPosition(gg_snd_yueyatianchongyinxiao, GetLocationX(udg_dian[250]), GetLocationY(udg_dian[250]), 500.00)
call PlaySoundBJ(gg_snd_yueyatianchongyinxiao)
if ( ( GetUnitTypeId(udg_danwei[336]) == 0x4E303043 ) ) then
set udg_shishu2[339]=( ( 3.00 * I2R(GetHeroAgi(udg_danwei[336], true)) ) + ( 60.00 * I2R(GetUnitAbilityLevel(udg_danwei[336], 0x41303441)) ) )
set udg_aXUNHUAN[138]=1
loop
exitwhen udg_aXUNHUAN[138] > 9
set udg_dian2[0]=PolarProjectionBJ(udg_dian[250], 90.00, ( 40.00 * I2R(udg_aXUNHUAN[138]) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosDone.mdl", udg_dian2[0]))
call RemoveLocation(udg_dian2[0])
set udg_aXUNHUAN[138]=udg_aXUNHUAN[138] + 1
endloop
set udg_danweizu[67]=YDWEGetUnitsInRangeOfLocAllNull(225.00 , udg_dian[250])
call ForGroupBJ(udg_danweizu[67], function Trig_yueyatianchongFunc008Func009A)
call DestroyGroup(udg_danweizu[67])
set udg_shishu2[338]=0.50
set udg_aXUNHUAN[139]=1
loop
exitwhen udg_aXUNHUAN[139] > 20
if ( ( udg_aXUNHUAN[139] <= 10 ) ) then
set udg_shishu2[338]=( udg_shishu2[338] + 0.35 )
else
set udg_shishu2[338]=( udg_shishu2[338] - 0.35 )
endif
set udg_dian2[1]=PolarProjectionBJ(udg_dian[250], ( Pow(udg_shishu2[338], 0.50) * 75.00 ), AngleBetweenPoints(udg_dian[250], udg_dian[251]))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[336]), 0x65303237, udg_dian2[1], AngleBetweenPoints(udg_dian[250], udg_dian[251]))
call GroupAddUnit(udg_DAZE[0], udg_danwei2[1])
call GroupAddUnit(udg_DAZE[1], udg_danwei2[1])
if ( ( udg_aXUNHUAN[139] == 10 ) ) then
set udg_danwei[337]=udg_danwei2[1]
else
endif
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 1.00)
call s__maphack_SetHeight(udg_danwei2[1] , ( I2R(udg_aXUNHUAN[139]) * 25.00 ) , 0.00)
call SetUnitVertexColor(udg_danwei2[1], 255, 255, 255, 0)
call GroupAddUnit(udg_danweizu2[338], udg_danwei2[1])
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[1])
set udg_dian2[1]=PolarProjectionBJ(udg_dian[250], ( ( Pow(udg_shishu2[338], 0.50) * 75.00 ) - 125.00 ), AngleBetweenPoints(udg_dian[250], udg_dian[251]))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[336]), 0x6530354A, udg_dian2[1], AngleBetweenPoints(udg_dian[250], udg_dian[251]))
call GroupAddUnit(udg_DAZE[0], udg_danwei2[1])
call GroupAddUnit(udg_DAZE[1], udg_danwei2[1])
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 1.00)
call SetUnitTimeScale(udg_danwei2[1], 0.00)
call s__maphack_SetHeight(udg_danwei2[1] , ( I2R(udg_aXUNHUAN[139]) * 25.00 ) , 0.00)
call GroupAddUnit(udg_danweizu2[338], udg_danwei2[1])
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[1])
set udg_aXUNHUAN[139]=udg_aXUNHUAN[139] + 1
endloop
call EnableTrigger(gg_trg_yueyatianchong_hei)
else
set udg_shishu2[339]=( ( 2.00 * I2R(GetHeroAgi(udg_danwei[336], true)) ) + ( 40.00 * I2R(GetUnitAbilityLevel(udg_danwei[336], 0x41303441)) ) )
set udg_aXUNHUAN[140]=1
loop
exitwhen udg_aXUNHUAN[140] > 9
set udg_dian2[0]=PolarProjectionBJ(udg_dian[250], 90.00, ( 40.00 * I2R(udg_aXUNHUAN[140]) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\GryphonRiderMissile\\GryphonRiderMissile.mdl", udg_dian2[0]))
call RemoveLocation(udg_dian2[0])
set udg_aXUNHUAN[140]=udg_aXUNHUAN[140] + 1
endloop
set udg_danweizu[67]=YDWEGetUnitsInRangeOfLocAllNull(225.00 , udg_dian[250])
call ForGroupBJ(udg_danweizu[67], function Trig_yueyatianchongFunc008Func004A)
call DestroyGroup(udg_danweizu[67])
set udg_shishu2[338]=1.50
set udg_aXUNHUAN[141]=1
loop
exitwhen udg_aXUNHUAN[141] > 20
if ( ( udg_aXUNHUAN[141] <= 10 ) ) then
set udg_shishu2[338]=( udg_shishu2[338] + 0.50 )
else
set udg_shishu2[338]=( udg_shishu2[338] - 0.50 )
endif
set udg_dian2[1]=PolarProjectionBJ(udg_dian[250], ( Pow(udg_shishu2[338], 1.50) * 10.00 ), AngleBetweenPoints(udg_dian[250], udg_dian[251]))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[336]), 0x65303233, udg_dian2[1], AngleBetweenPoints(udg_dian[250], udg_dian[251]))
call GroupAddUnit(udg_DAZE[0], udg_danwei2[1])
call GroupAddUnit(udg_DAZE[1], udg_danwei2[1])
if ( ( udg_aXUNHUAN[141] == 10 ) ) then
set udg_danwei[337]=udg_danwei2[1]
else
endif
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 1.00)
call s__maphack_SetHeight(udg_danwei2[1] , ( I2R(udg_aXUNHUAN[141]) * 25.00 ) , 0.00)
call SetUnitScale(udg_danwei2[1], udg_shishu2[338], udg_shishu2[338], udg_shishu2[338])
call GroupAddUnit(udg_danweizu2[338], udg_danwei2[1])
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[1])
set udg_aXUNHUAN[141]=udg_aXUNHUAN[141] + 1
endloop
call EnableTrigger(gg_trg_yueyatianchong2)
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_yueyatianchong takes nothing returns nothing
set gg_trg_yueyatianchong=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_yueyatianchong , 3 , 0x41303441)
call TriggerAddAction(gg_trg_yueyatianchong, function Trig_yueyatianchongActions)
endfunction
function Trig_yueyatianchong2Func005A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[1])
if ( ( IsTerrainPathableBJ(udg_dian2[0], PATHING_TYPE_FLYABILITY) == false ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 60.00, AngleBetweenPoints(udg_dian[250], udg_dian[251]))
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[1]))
call RemoveLocation(udg_dian2[1])
else
set udg_zhengshu[87]=32
endif
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
endfunction
function Trig_yueyatianchong2Func007A takes nothing returns nothing
set udg_danwei[340]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[340], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei[340], udg_danweizu2[369]) == false ) and ( IsUnitAliveBJ(udg_danwei[340]) == true ) and ( IsUnitEnemy(udg_danwei[340], GetOwningPlayer(udg_danwei[336])) == true ) and ( IsUnitInGroup(udg_danwei[340], udg_danweizu[68]) == false ) ) then
call UnitDamageTarget(udg_danwei[336], udg_danwei[340], udg_shishu2[339], true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Bolt\\BoltImpact.mdl", udg_danwei[340], "chest"))
call GroupAddUnit(udg_danweizu[68], udg_danwei[340])
else
endif
set udg_danwei[340]=null
endfunction
function Trig_yueyatianchong2Func011Func003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
call KillUnit(udg_danwei2[1])
set udg_danwei2[1]=null
endfunction
function Trig_yueyatianchong2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu[87]=( udg_zhengshu[87] + 1 )
set udg_dian[252]=GetUnitLoc(udg_danwei[337])
set udg_dian[253]=PolarProjectionBJ(udg_dian[252], 60.00, AngleBetweenPoints(udg_dian[250], udg_dian[251]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\GryphonRiderMissile\\GryphonRiderMissile.mdl", udg_dian[252]))
call ForGroupBJ(udg_danweizu2[338], function Trig_yueyatianchong2Func005A)
set udg_danweizu[67]=YDWEGetUnitsInRangeOfLocAllNull(225.00 , udg_dian[252])
call ForGroupBJ(udg_danweizu[67], function Trig_yueyatianchong2Func007A)
call DestroyGroup(udg_danweizu[67])
call RemoveLocation(udg_dian[252])
call RemoveLocation(udg_dian[253])
if ( ( udg_zhengshu[87] == 32 ) ) then
call GroupClear(udg_danweizu[68])
call GroupClear(udg_danweizu2[338])
call ForGroupBJ(udg_danweizu2[338], function Trig_yueyatianchong2Func011Func003A)
set udg_danwei[336]=null
set udg_danwei[337]=null
call RemoveLocation(udg_dian[250])
call RemoveLocation(udg_dian[251])
call DisableTrigger(GetTriggeringTrigger())
else
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_yueyatianchong2 takes nothing returns nothing
set gg_trg_yueyatianchong2=CreateTrigger()
call DisableTrigger(gg_trg_yueyatianchong2)
call TriggerRegisterTimerExpireEvent(gg_trg_yueyatianchong2, udg_Times[3])
call TriggerAddAction(gg_trg_yueyatianchong2, function Trig_yueyatianchong2Actions)
endfunction
function Trig_yueyatianchong_heiFunc006A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[1])
if ( ( IsTerrainPathableBJ(udg_dian2[0], PATHING_TYPE_FLYABILITY) == false ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 60.00, AngleBetweenPoints(udg_dian[250], udg_dian[251]))
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[1]))
call RemoveLocation(udg_dian2[1])
else
set udg_zhengshu[87]=32
endif
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
endfunction
function Trig_yueyatianchong_heiFunc008A takes nothing returns nothing
set udg_danwei[340]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[340], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei[340], udg_danweizu2[369]) == false ) and ( IsUnitAliveBJ(udg_danwei[340]) == true ) and ( IsUnitEnemy(udg_danwei[340], GetOwningPlayer(udg_danwei[336])) == true ) and ( IsUnitInGroup(udg_danwei[340], udg_danweizu[68]) == false ) ) then
call UnitDamageTarget(udg_danwei[336], udg_danwei[340], udg_shishu2[339], true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Demon\\DemonBoltImpact\\DemonBoltImpact.mdl", udg_danwei[340], "chest"))
call GroupAddUnit(udg_danweizu[68], udg_danwei[340])
else
endif
set udg_danwei[340]=null
endfunction
function Trig_yueyatianchong_heiFunc012Func003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
call KillUnit(udg_danwei2[1])
set udg_danwei2[1]=null
endfunction
function Trig_yueyatianchong_heiActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu[87]=( udg_zhengshu[87] + 1 )
set udg_dian[252]=GetUnitLoc(udg_danwei[337])
set udg_dian[253]=PolarProjectionBJ(udg_dian[252], 60.00, AngleBetweenPoints(udg_dian[250], udg_dian[251]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosDone.mdl", udg_dian[252]))
call ForGroupBJ(udg_danweizu2[338], function Trig_yueyatianchong_heiFunc006A)
set udg_danweizu[67]=YDWEGetUnitsInRangeOfLocAllNull(225.00 , udg_dian[252])
call ForGroupBJ(udg_danweizu[67], function Trig_yueyatianchong_heiFunc008A)
call DestroyGroup(udg_danweizu[67])
call RemoveLocation(udg_dian[253])
call RemoveLocation(udg_dian[252])
if ( ( udg_zhengshu[87] == 32 ) ) then
call GroupClear(udg_danweizu[68])
call GroupClear(udg_danweizu2[338])
call ForGroupBJ(udg_danweizu2[338], function Trig_yueyatianchong_heiFunc012Func003A)
set udg_danwei[336]=null
set udg_danwei[337]=null
call RemoveLocation(udg_dian[250])
call RemoveLocation(udg_dian[251])
call DisableTrigger(GetTriggeringTrigger())
else
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_yueyatianchong_hei takes nothing returns nothing
set gg_trg_yueyatianchong_hei=CreateTrigger()
call DisableTrigger(gg_trg_yueyatianchong_hei)
call TriggerRegisterTimerExpireEvent(gg_trg_yueyatianchong_hei, udg_Times[3])
call TriggerAddAction(gg_trg_yueyatianchong_hei, function Trig_yueyatianchong_heiActions)
endfunction
function Trig_shunbuzhanActions takes nothing returns nothing
set udg_danwei[342]=GetTriggerUnit()
set udg_danwei[356]=GetSpellTargetUnit()
set udg_dian[255]=GetUnitLoc(udg_danwei[342])
set udg_dian[256]=GetUnitLoc(udg_danwei[356])
set udg_zhengshu[88]=0
set udg_zhengshu[89]=0
call EnableTrigger(gg_trg_shunbuzhan2)
if ( ( GetUnitTypeId(udg_danwei[342]) == 0x4E303043 ) ) then
call StartTimerBJ(udg_jishiqi[98], true, 0.06)
else
call StartTimerBJ(udg_jishiqi[98], true, 0.10)
endif
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei[342]), 0x41305045, false)
call StartTimerBJ(udg_jishiqi[176], false, 65.00)
set udg_Zhengshu[176]=0
endfunction
function InitTrig_shunbuzhan takes nothing returns nothing
set gg_trg_shunbuzhan=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_shunbuzhan , 3 , 0x4130344F)
call TriggerAddAction(gg_trg_shunbuzhan, function Trig_shunbuzhanActions)
endfunction
function Trig_wuyue_1Actions takes nothing returns nothing
set udg_danwei[342]=GetTriggerUnit()
set udg_dian[255]=GetUnitLoc(udg_danwei[342])
set udg_dian[256]=GetSpellTargetLoc()
set udg_zhengshu[88]=0
call PlaySoundAtPointBJ(gg_snd_wy4, 100, udg_dian[255], 500.00)
set udg_dian[257]=PolarProjectionBJ(udg_dian[255], 200.00, AngleBetweenPoints(udg_dian[255], udg_dian[256]))
call EnableTrigger(gg_trg_wuyue2)
call StartTimerBJ(udg_jishiqi[98], true, 0.02)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei[342]), 0x41305045, false)
call StartTimerBJ(udg_jishiqi[176], false, 150.00)
set udg_Zhengshu[176]=2
endfunction
function InitTrig_wuyue_1 takes nothing returns nothing
set gg_trg_wuyue_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_wuyue_1 , 3 , 0x41304F5A)
call TriggerAddAction(gg_trg_wuyue_1, function Trig_wuyue_1Actions)
endfunction
function Trig_wuyuesbzActions takes nothing returns nothing
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei[342]), 0x4130344F, true)
call UnitRemoveAbility(udg_danwei[342], 0x41304F5A)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei[342]), 0x41305045, true)
endfunction
function InitTrig_wuyuesbz takes nothing returns nothing
set gg_trg_wuyuesbz=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_wuyuesbz, udg_jishiqi[176])
call TriggerAddAction(gg_trg_wuyuesbz, function Trig_wuyuesbzActions)
endfunction
function Trig_shunbuzhan2Actions takes nothing returns nothing
set udg_zhengshu[88]=( udg_zhengshu[88] + 1 )
if ( ( udg_zhengshu[88] < 13 ) ) then
set udg_dian[( 256 + udg_zhengshu[88] )]=PolarProjectionBJ(udg_dian[256], 384.00, ( 30.00 * I2R(udg_zhengshu[88]) ))
set udg_danwei[( 342 + udg_zhengshu[88] )]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[342]), 0x65303239, udg_dian[( 256 + udg_zhengshu[88] )], AngleBetweenPoints(udg_dian[( 256 + udg_zhengshu[88] )], udg_dian[256]))
if ( ( GetUnitTypeId(udg_danwei[342]) == 0x4E303043 ) ) then
call AddUnitAnimationProperties(udg_danwei[( 342 + udg_zhengshu[88] )], "alternate", true)
else
endif
call SetUnitVertexColor(udg_danwei[( 342 + udg_zhengshu[88] )], 255, 255, 255, 125)
call UnitApplyTimedLife(udg_danwei[( 342 + udg_zhengshu[88] )], 0x42487765, 1.50)
else
if ( ( udg_zhengshu[89] <= 12 ) ) then
set udg_zhengshu[89]=( udg_zhengshu[89] + 1 )
call YDWEJumpTimer(udg_danwei[( 342 + udg_zhengshu[89] )] , AngleBetweenPoints(udg_dian[( 256 + udg_zhengshu[89] )], udg_dian[256]) , 1500.00 , 0.25 , 0.03 , 0.00)
call SetUnitAnimation(udg_danwei[( 342 + udg_zhengshu[89] )], "attack")
call SetUnitTimeScale(udg_danwei[( 342 + udg_zhengshu[89] )], 2.00)
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl", udg_dian[256]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\NightElf\\Blink\\BlinkCaster.mdl", udg_dian[( 256 + udg_zhengshu[89] )]))
call UnitDamageTarget(udg_danwei[342], udg_danwei[356], ( 0.50 * I2R(GetHeroAgi(udg_danwei[342], true)) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
else
endif
endif
if ( ( udg_zhengshu[88] == 25 ) ) then
set udg_danwei[356]=null
call RemoveLocation(udg_dian[255])
set bj_forLoopAIndex=343
set bj_forLoopAIndexEnd=355
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_danwei[bj_forLoopAIndex]=null
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
set bj_forLoopAIndex=257
set bj_forLoopAIndexEnd=268
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call RemoveLocation(udg_dian[bj_forLoopAIndex])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call PauseTimer(udg_jishiqi[98])
call DisableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function InitTrig_shunbuzhan2 takes nothing returns nothing
set gg_trg_shunbuzhan2=CreateTrigger()
call DisableTrigger(gg_trg_shunbuzhan2)
call TriggerRegisterTimerExpireEvent(gg_trg_shunbuzhan2, udg_jishiqi[98])
call TriggerAddAction(gg_trg_shunbuzhan2, function Trig_shunbuzhan2Actions)
endfunction
function Trig_wuyue2Func002Func011Func004A takes nothing returns nothing
set udg_danwei[345]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[345], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitDeadBJ(udg_danwei[345]) == false ) and ( IsUnitEnemy(udg_danwei[345], GetOwningPlayer(udg_danwei[342])) == true ) and ( IsUnitInGroup(udg_danwei[345], udg_danweizu[152]) == false ) ) then
call UnitDamageTarget(udg_danwei[342], udg_danwei[345], ( ( ( ( GetUnitState(udg_danwei[344], UNIT_STATE_MAX_LIFE) * 0.33 ) + ( 3.00 * I2R(GetHeroAgi(udg_danwei[342], true)) ) ) * ( 1.00 + ( ( 0.05 / 2.00 ) * ( GetUnitState(udg_danwei[342], UNIT_STATE_MANA) / 100.00 ) ) ) ) * 1.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call GroupAddUnit(udg_danweizu[152], udg_danwei[345])
else
endif
set udg_danwei[345]=null
endfunction
function Trig_wuyue2Func002Func011A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei[344]=GetEnumUnit()
set udg_dian[259]=GetUnitLoc(udg_danwei[344])
set udg_danweizu[151]=YDWEGetUnitsInRangeOfLocAllNull(275.00 , udg_dian[259])
call ForGroupBJ(udg_danweizu[151], function Trig_wuyue2Func002Func011Func004A)
call DestroyGroup(udg_danweizu[151])
set udg_danwei[344]=null
call RemoveLocation(udg_dian[259])
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_wuyue2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu[88]=( udg_zhengshu[88] + 1 )
if ( ( udg_zhengshu[88] <= 34 ) ) then
set udg_dian[258]=PolarProjectionBJ(udg_dian[257], ( 60.00 * I2R(udg_zhengshu[88]) ), AngleBetweenPoints(udg_dian[255], udg_dian[256]))
set udg_danwei[343]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[342]), 0x65303841, udg_dian[258], AngleBetweenPoints(udg_dian[255], udg_dian[256]))
call GroupAddUnit(udg_danweizu[150], udg_danwei[343])
call SetUnitScalePercent(udg_danwei[343], ( 100.00 + ( 6.00 * I2R(udg_zhengshu[88]) ) ), ( 100.00 + ( 6.00 * I2R(udg_zhengshu[88]) ) ), ( 100.00 + ( 6.00 * I2R(udg_zhengshu[88]) ) ))
call UnitApplyTimedLife(udg_danwei[343], 0x42487765, ( 2.00 - ( 0.02 * I2R(udg_zhengshu[88]) ) ))
call ForGroupBJ(udg_danweizu[150], function Trig_wuyue2Func002Func011A)
set udg_danwei[343]=null
call RemoveLocation(udg_dian[258])
else
call GroupClear(udg_danweizu[150])
call GroupClear(udg_danweizu[152])
call DisableTrigger(GetTriggeringTrigger())
call PauseTimer(udg_jishiqi[98])
call RemoveLocation(udg_dian[257])
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_wuyue2 takes nothing returns nothing
set gg_trg_wuyue2=CreateTrigger()
call DisableTrigger(gg_trg_wuyue2)
call TriggerRegisterTimerExpireEvent(gg_trg_wuyue2, udg_jishiqi[98])
call TriggerAddAction(gg_trg_wuyue2, function Trig_wuyue2Actions)
endfunction
function Trig_wuyue3Actions takes nothing returns nothing
set udg_zhengshu[89]=( udg_zhengshu[89] + 1 )
if ( ( udg_zhengshu[89] <= 600 ) ) then
if ( ( udg_zhengshu[89] <= 100 ) ) then
call SetUnitManaBJ(udg_danwei[459], ( GetUnitState(udg_danwei[459], UNIT_STATE_MANA) - ( GetUnitState(udg_danwei[459], UNIT_STATE_MAX_MANA) * 0.02 ) ))
else
call SetUnitManaBJ(udg_danwei[459], 0.00)
endif
else
call PauseTimer(udg_jishiqi[177])
endif
endfunction
function InitTrig_wuyue3 takes nothing returns nothing
set gg_trg_wuyue3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_wuyue3, udg_jishiqi[177])
call TriggerAddAction(gg_trg_wuyue3, function Trig_wuyue3Actions)
endfunction
function Trig_zishenyidong_1Actions takes nothing returns nothing
set udg_danwei2[21]=GetSpellAbilityUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[21])
if ( ( GetSpellTargetUnit() != null ) ) then
set udg_dian2[1]=GetUnitLoc(GetSpellTargetUnit())
else
set udg_dian2[1]=GetSpellTargetLoc()
endif
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], RMinBJ(( 300.00 + ( I2R(GetHeroAgi(udg_danwei2[21], true)) * 2.00 ) ), DistanceBetweenPoints(udg_dian2[0], udg_dian2[1])), AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
set udg_danwei2[22]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[21]), 0x65303241, udg_dian2[0], AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
call StopSoundBJ(gg_snd_BlinkArrival1, false)
call PlaySoundOnUnitBJ(gg_snd_BlinkArrival1, 100, udg_danwei2[21])
if ( ( IsTerrainPathableBJ(udg_dian2[2], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_danwei2[21], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[21], GetLocationY(udg_dian2[2]))
else
endif
call StartTimerBJ(udg_times[21], true, 0.04)
call SetUnitVertexColor(udg_danwei2[21], 255, 255, 255, 0)
call SetUnitVertexColor(udg_danwei2[22], 255, 255, 255, 210)
set udg_zhengshu2[21]=6
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
endfunction
function InitTrig_zishenyidong_1 takes nothing returns nothing
set gg_trg_zishenyidong_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_zishenyidong_1 , 3 , 0x41303335)
call s__Event_AnyUnitSkill(gg_trg_zishenyidong_1 , 3 , 0x4130514F)
call TriggerAddAction(gg_trg_zishenyidong_1, function Trig_zishenyidong_1Actions)
endfunction
function Trig_zishenyidong_2Actions takes nothing returns nothing
if ( ( udg_zhengshu2[21] > 0 ) ) then
set udg_zhengshu2[21]=( udg_zhengshu2[21] - 1 )
call SetUnitVertexColor(udg_danwei2[21], 255, 255, 255, ( 255 - ( 42 * udg_zhengshu2[21] ) ))
call SetUnitVertexColor(udg_danwei2[22], 255, 255, 255, ( 30 * udg_zhengshu2[21] ))
else
call PauseTimer(udg_times[21])
call SetUnitVertexColor(udg_danwei2[21], 255, 255, 255, 255)
call RemoveUnit(udg_danwei2[22])
set udg_danwei2[21]=null
set udg_danwei2[22]=null
endif
endfunction
function InitTrig_zishenyidong_2 takes nothing returns nothing
set gg_trg_zishenyidong_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_zishenyidong_2, udg_times[21])
call TriggerAddAction(gg_trg_zishenyidong_2, function Trig_zishenyidong_2Actions)
endfunction
function Trig_yidongjinzhiActions takes nothing returns nothing
if ( ( GetEventDamage() > 0.00 ) and ( ( GetUnitAbilityLevel(GetTriggerUnit(), 0x41303335) > 0 ) or ( GetUnitAbilityLevel(GetTriggerUnit(), 0x4130514F) > 0 ) ) and ( ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1 ) <= 10 ) ) or ( IsUnitType(GetEventDamageSource(), UNIT_TYPE_STRUCTURE) == true ) or ( GetUnitTypeId(GetEventDamageSource()) == 0x68303035 ) or ( GetUnitTypeId(GetEventDamageSource()) == 0x68303033 ) or ( GetUnitTypeId(GetEventDamageSource()) == 0x68303034 ) or ( GetUnitTypeId(GetEventDamageSource()) == 0x68303031 ) or ( GetUnitTypeId(GetEventDamageSource()) == 0x68303039 ) or ( GetUnitTypeId(GetEventDamageSource()) == 0x68303041 ) or ( udg_Points >= 0 ) ) and ( IsUnitIllusionBJ(GetTriggerUnit()) == false ) ) then
set udg_danwei2[23]=GetTriggerUnit()
set udg_tempReal[0]=( 10.00 * ( GetEventDamage() / GetUnitState(udg_danwei2[23], UNIT_STATE_MAX_LIFE) ) )
set udg_tempReal[0]=( udg_tempReal[0] + TimerGetRemaining(udg_times[23]) )
set udg_tempReal[0]=RMinBJ(5.00, RMaxBJ(0.50, udg_tempReal[0]))
call UnitAddAbility(udg_danwei2[23], 0x41305150)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[23]), 0x41305150, false)
call StartTimerBJ(udg_times[23], false, udg_tempReal[0])
else
endif
endfunction
function InitTrig_yidongjinzhi takes nothing returns nothing
set gg_trg_yidongjinzhi=CreateTrigger()
call YDWESyStemAnyUnitDamagedRegistTrigger(gg_trg_yidongjinzhi)
call TriggerAddAction(gg_trg_yidongjinzhi, function Trig_yidongjinzhiActions)
endfunction
function Trig_yidongjinzhi_2Actions takes nothing returns nothing
call UnitRemoveAbility(udg_danwei2[23], 0x41305150)
set udg_danwei2[23]=null
endfunction
function InitTrig_yidongjinzhi_2 takes nothing returns nothing
set gg_trg_yidongjinzhi_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_yidongjinzhi_2, udg_times[23])
call TriggerAddAction(gg_trg_yidongjinzhi_2, function Trig_yidongjinzhi_2Actions)
endfunction
function Trig_tieshi_1Conditions takes nothing returns boolean
return ( ( ( GetSpellAbilityId() == 0x41303459 ) or ( GetSpellAbilityId() == 0x4130345A ) ) )
endfunction
function Trig_tieshi_1Actions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
set udg_danwei2[30]=GetTriggerUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[1]=GetSpellTargetLoc()
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303242, udg_dian2[0], AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
call SaveInteger(YDHT, GetHandleId(udg_danwei2[0]), 0x1C39CACE, GetUnitAbilityLevel(udg_danwei2[0], GetSpellAbilityId()))
call GroupAddUnit(udg_DAZE[0], udg_danwei2[1])
call SetUnitLifeBJ(udg_danwei2[1], ( 25.00 + ( I2R(GetHeroAgi(udg_danwei2[0], true)) * 0.50 ) ))
call SetUnitUserData(udg_danwei2[1], 0)
call SetUnitColor(udg_danwei2[1], PLAYER_COLOR_LIGHT_GRAY)
call GroupAddUnit(udg_danweizu2[24], udg_danwei2[1])
if ( ( GetSpellAbilityId() == 0x41303459 ) ) then
set udg_zhengshu2[24]=( 2 + GetUnitAbilityLevel(udg_danwei2[0], 0x41303459) )
call UnitAddAbility(udg_danwei2[0], 0x4130345A)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41303459, false)
call StartTimerBJ(udg_times[30], false, 10.00)
else
set udg_zhengshu2[24]=( udg_zhengshu2[24] - 1 )
if ( ( udg_zhengshu2[24] == 0 ) ) then
call UnitRemoveAbility(udg_danwei2[0], 0x4130345A)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), 0x41303459, true)
else
endif
endif
set udg_danwei2[0]=null
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
endfunction
function InitTrig_tieshi_1 takes nothing returns nothing
set gg_trg_tieshi_1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_tieshi_1, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_tieshi_1, Condition(function Trig_tieshi_1Conditions))
call TriggerAddAction(gg_trg_tieshi_1, function Trig_tieshi_1Actions)
endfunction
function Trig_tieshi_2Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[24]) == false ) )
endfunction
function Trig_tieshi_2Func001Func003Func009A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call SetUnitUserData(udg_danwei2[0], 10)
if ( ( LoadBoolean(YDHT, GetHandleId(GetTriggeringTrigger()) * LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xECE825E7), 0xFA4993B9) == true ) ) then
call UnitAddAbility(udg_danwei2[1], 0x41304F42)
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[1], GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call UnitRemoveAbility(udg_danwei2[1], 0x41304F42)
else
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[1], GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
endif
if ( ( LoadInteger(YDHT, GetHandleId(udg_danwei2[1]), 0xC7DA9264) == 0 ) ) then
call SaveInteger(YDHT, GetHandleId(udg_danwei2[1]), 0xC7DA9264, LoadInteger(YDHT, GetHandleId(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[0])) + 1 )]), 0x1C39CACE))
call SaveInteger(YDHT, GetHandleId(udg_danwei2[1]), 0x608E3B89, 1)
call GroupAddUnit(udg_danweizu2[29], udg_danwei2[1])
else
call SaveInteger(YDHT, GetHandleId(udg_danwei2[1]), 0xC7DA9264, ( LoadInteger(YDHT, GetHandleId(udg_danwei2[1]), 0xC7DA9264) + 1 ))
call SetUnitAbilityLevel(udg_danwei2[0], 0x41303535, IMinBJ(17, LoadInteger(YDHT, GetHandleId(udg_danwei2[1]), 0xC7DA9264)))
call SaveInteger(YDHT, GetHandleId(udg_danwei2[1]), 0x608E3B89, ( LoadInteger(YDHT, GetHandleId(udg_danwei2[1]), 0x608E3B89) + 1 ))
if ( ( ModuloInteger(LoadInteger(YDHT, GetHandleId(udg_danwei2[1]), 0x608E3B89), 5) == 0 ) ) then
call s__baka_IssueTargetOrderById2(udg_danwei2[0] , 852095 , udg_danwei2[1])
else
endif
endif
call s__baka_IssueTargetOrderById2(udg_danwei2[0] , 852075 , udg_danwei2[1])
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\WardenMissile\\WardenMissile.mdl", udg_danwei2[1], "chest"))
call DestroyEffect(AddSpecialEffectTarget("abilities\\weapons\\WyvernSpear\\WyvernSpearMissile.mdl", udg_danwei2[1], "chest"))
else
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[1])
endif
set udg_danwei2[1]=null
endfunction
function Trig_tieshi_2Func001A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
if ( ( GetUnitUserData(udg_danwei2[0]) < 10 ) and ( IsTerrainPathableBJ(udg_dian2[0], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) + 1 ))
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 100.00, GetUnitFacing(udg_danwei2[0]))
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(100.00 , udg_dian2[0])
if ( ( GetRandomInt(1, 4) == 3 ) ) then
call SaveBoolean(YDHT, GetHandleId(GetTriggeringTrigger()) * LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xECE825E7), 0xFA4993B9, true)
else
endif
call ForGroupBJ(udg_xuanqu, function Trig_tieshi_2Func001Func003Func009A)
if ( ( IsUnitGroupEmptyBJ(udg_xuanqu) == false ) ) then
set udg_danwei2[1]=GroupPickRandomUnit(udg_xuanqu)
set udg_zhengshuex[0]=GetRandomInt(1, 3)
if ( ( udg_zhengshuex[0] == 1 ) ) then
call StopSoundBJ(gg_snd_MetalLightChopMetal1, false)
call PlaySoundOnUnitBJ(gg_snd_MetalLightChopMetal1, 100, udg_danwei2[1])
else
if ( ( udg_zhengshuex[0] == 2 ) ) then
call StopSoundBJ(gg_snd_MetalLightChopMetal201, false)
call PlaySoundOnUnitBJ(gg_snd_MetalLightChopMetal201, 100, udg_danwei2[1])
else
call StopSoundBJ(gg_snd_MetalLightChopMetal201, false)
call PlaySoundOnUnitBJ(gg_snd_MetalLightChopMetal3, 100, udg_danwei2[1])
endif
endif
set udg_danwei2[1]=null
else
endif
call DestroyGroup(udg_xuanqu)
call SetUnitPositionLoc(udg_danwei2[0], udg_dian2[1])
call RemoveLocation(udg_dian2[1])
else
call KillUnit(udg_danwei2[0])
call GroupRemoveUnit(udg_danweizu2[24], udg_danwei2[0])
endif
call RemoveLocation(udg_dian2[0])
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_tieshi_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
local integer ydl_localvar_step=LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76)
set ydl_localvar_step=ydl_localvar_step + 3
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76, ydl_localvar_step)
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xECE825E7, ydl_localvar_step)
call ForGroupBJ(udg_danweizu2[24], function Trig_tieshi_2Func001A)
call FlushChildHashtable(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_tieshi_2 takes nothing returns nothing
set gg_trg_tieshi_2=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_tieshi_2, 0.04)
call TriggerAddCondition(gg_trg_tieshi_2, Condition(function Trig_tieshi_2Conditions))
call TriggerAddAction(gg_trg_tieshi_2, function Trig_tieshi_2Actions)
endfunction
function Trig_tieshi_3Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[29]) == false ) )
endfunction
function Trig_tieshi_3Func001A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
if ( ( UnitHasBuffBJ(udg_danwei2[0], 0x42303048) == true ) and ( IsUnitType(udg_danwei2[0], UNIT_TYPE_DEAD) == false ) ) then
else
call SaveInteger(YDHT, GetHandleId(udg_danwei2[0]), 0xC7DA9264, 0)
call SaveInteger(YDHT, GetHandleId(udg_danwei2[0]), 0x608E3B89, 0)
call GroupRemoveUnit(udg_danweizu2[29], udg_danwei2[0])
endif
set udg_danwei2[0]=null
endfunction
function Trig_tieshi_3Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[29], function Trig_tieshi_3Func001A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_tieshi_3 takes nothing returns nothing
set gg_trg_tieshi_3=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_tieshi_3, 0.20)
call TriggerAddCondition(gg_trg_tieshi_3, Condition(function Trig_tieshi_3Conditions))
call TriggerAddAction(gg_trg_tieshi_3, function Trig_tieshi_3Actions)
endfunction
function Trig_tieshi_4Actions takes nothing returns nothing
call UnitRemoveAbility(udg_danwei2[30], 0x4130345A)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[30]), 0x41303459, true)
set udg_danwei2[30]=null
endfunction
function InitTrig_tieshi_4 takes nothing returns nothing
set gg_trg_tieshi_4=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_tieshi_4, udg_times[30])
call TriggerAddAction(gg_trg_tieshi_4, function Trig_tieshi_4Actions)
endfunction
function Trig_chumoyidong_starConditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41303457 ) )
endfunction
function Trig_chumoyidong_starFunc008A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( udg_danwei2[0] != udg_danwei2[1] ) and ( GetUnitTypeId(udg_danwei2[1]) != 0x6530304F ) and ( ( GetUnitTypeId(udg_danwei2[1]) == 0x65303244 ) or ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) ) then
else
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[1])
endif
set udg_danwei2[1]=null
endfunction
function Trig_chumoyidong_starActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetSpellAbilityUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[1]=GetSpellTargetLoc()
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], RMinBJ(( 500.00 + ( I2R(GetHeroAgi(udg_danwei2[0], true)) * 4.00 ) ), DistanceBetweenPoints(udg_dian2[0], udg_dian2[1])), AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(200.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_chumoyidong_starFunc008A)
if ( ( ( IsUnitGroupEmptyBJ(udg_xuanqu) == true ) ) ) then
call IssueImmediateOrderById(udg_danwei2[0], 851972)
else
endif
call DestroyGroup(udg_xuanqu)
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_chumoyidong_star takes nothing returns nothing
set gg_trg_chumoyidong_star=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_chumoyidong_star, EVENT_PLAYER_UNIT_SPELL_CHANNEL)
call TriggerAddCondition(gg_trg_chumoyidong_star, Condition(function Trig_chumoyidong_starConditions))
call TriggerAddAction(gg_trg_chumoyidong_star, function Trig_chumoyidong_starActions)
endfunction
function Trig_chumoyidongConditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41303457 ) )
endfunction
function Trig_chumoyidongFunc007Func001Func005A takes nothing returns nothing
set udg_dian2[4]=GetDestructableLoc(GetEnumDestructable())
if ( ( IsDestructableDeadBJ(GetEnumDestructable()) == false ) and ( DistanceBetweenPoints(udg_dian2[3], udg_dian2[4]) <= 100.00 ) ) then
call RemoveLocation(udg_dian2[2])
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], ( I2R(bj_forLoopAIndex) * 50.00 ), AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
set udg_buer2[20]=true
else
endif
call RemoveLocation(udg_dian2[4])
endfunction
function Trig_chumoyidongFunc011A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( udg_danwei2[0] != udg_danwei2[1] ) and ( GetUnitTypeId(udg_danwei2[1]) != 0x6530304F ) and ( ( GetUnitTypeId(udg_danwei2[1]) == 0x65303244 ) or ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) ) then
if ( ( GetUnitMoveSpeed(udg_danwei2[1]) > 0.00 ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[2]))
else
call SetUnitPositionLoc(udg_danwei2[1], udg_dian2[2])
endif
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_chumoyidongActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetSpellAbilityUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[1]=GetSpellTargetLoc()
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], RMinBJ(( 500.00 + ( I2R(GetHeroAgi(udg_danwei2[0], true)) * 3.00 ) ), DistanceBetweenPoints(udg_dian2[0], udg_dian2[1])), AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
set udg_buer2[20]=false
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=( R2I(DistanceBetweenPoints(udg_dian2[0], udg_dian2[2])) / 50 )
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ( ( udg_buer2[20] == false ) ) then
set udg_dian2[3]=PolarProjectionBJ(udg_dian2[0], ( I2R(bj_forLoopAIndex) * 50.00 ), AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
if ( ( IsTerrainPathableBJ(udg_dian2[3], PATHING_TYPE_WALKABILITY) == true ) ) then
call RemoveLocation(udg_dian2[2])
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], ( I2R(bj_forLoopAIndex) * 50.00 ), AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
set udg_buer2[20]=true
else
endif
set udg_quyu[0]=RectFromCenterSizeBJ(udg_dian2[3], 200.00, 200.00)
call EnumDestructablesInRectAll(udg_quyu[0], function Trig_chumoyidongFunc007Func001Func005A)
call RemoveRect(udg_quyu[0])
call RemoveLocation(udg_dian2[3])
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(200.00 , udg_dian2[0])
call StopSoundBJ(gg_snd_BlinkArrival1, false)
call PlaySoundOnUnitBJ(gg_snd_BlinkArrival1, 100, udg_danwei2[0])
call ForGroupBJ(udg_xuanqu, function Trig_chumoyidongFunc011A)
call DestroyGroup(udg_xuanqu)
set udg_danwei2[2]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303243, udg_dian2[2], 0.00)
set ydl_group=CreateGroup()
call GroupEnumUnitsInRange(ydl_group, GetLocationX(udg_dian2[2]), GetLocationY(udg_dian2[2]), 232.00, null)
loop
set ydl_unit=FirstOfGroup(ydl_group)
exitwhen ydl_unit == null
call GroupRemoveUnit(ydl_group, ydl_unit)
if ( ( IsUnitType(ydl_unit, UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(ydl_unit, UNIT_TYPE_FLYING) == false ) and ( IsUnitType(ydl_unit, UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(ydl_unit, GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call UnitDamageTarget(udg_danwei2[0], ydl_unit, RMaxBJ(( I2R(GetHeroAgi(udg_danwei2[0], true)) * 1.00 ), 0.00), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
endloop
call DestroyGroup(ydl_group)
call SetUnitAbilityLevel(udg_danwei2[2], 0x41303537, GetUnitAbilityLevel(udg_danwei2[0], 0x41303457))
call UnitApplyTimedLife(udg_danwei2[2], 0x42487765, 1.00)
call IssueImmediateOrderById(udg_danwei2[2], 852096)
set udg_danwei2[2]=null
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_chumoyidong takes nothing returns nothing
set gg_trg_chumoyidong=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_chumoyidong, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_chumoyidong, Condition(function Trig_chumoyidongConditions))
call TriggerAddAction(gg_trg_chumoyidong, function Trig_chumoyidongActions)
endfunction
function Trig_shoukaoActions takes nothing returns nothing
set udg_danwei2[25]=GetTriggerUnit()
set udg_danwei2[26]=GetSpellTargetUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[26])
set udg_danwei2[27]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[25]), 0x65303244, udg_dian2[0], 0.00)
if ( ( GetUnitAbilityLevel(udg_danwei2[25], 0x41303531) == 2 ) ) then
call UnitAddAbility(udg_danwei2[27], 0x41303532)
else
if ( ( GetUnitAbilityLevel(udg_danwei2[25], 0x41303531) == 3 ) ) then
call UnitAddAbility(udg_danwei2[27], 0x41303534)
else
endif
endif
call PlaySoundOnUnitBJ(gg_snd_StasisTrapBirth, 100, udg_danwei2[27])
set udg_shandian[7]=AddLightningEx("SPLK", false, GetLocationX(udg_dian2[0]), GetLocationY(udg_dian2[0]), ( GetLocationZ(udg_dian2[0]) + 200.00 ), GetLocationX(udg_dian2[0]), GetLocationY(udg_dian2[0]), ( GetLocationZ(udg_dian2[0]) + 50.00 ))
call UnitDamageTarget(udg_danwei2[25], udg_danwei2[26], I2R(GetHeroAgi(udg_danwei2[25], true)), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
set udg_zhengshu2[25]=0
call StartTimerBJ(udg_times[25], true, 0.05)
endfunction
function InitTrig_shoukao takes nothing returns nothing
set gg_trg_shoukao=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_shoukao , 3 , 0x41303531)
call TriggerAddAction(gg_trg_shoukao, function Trig_shoukaoActions)
endfunction
function Trig_shoukao_2Actions takes nothing returns nothing
set udg_zhengshu2[25]=( udg_zhengshu2[25] + 1 )
if ( ( udg_zhengshu2[25] <= 200 ) and ( UnitHasBuffBJ(udg_danwei2[26], 0x4230304D) == true ) and ( IsUnitType(udg_danwei2[26], UNIT_TYPE_DEAD) == false ) and ( IsUnitType(udg_danwei2[27], UNIT_TYPE_DEAD) == false ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[27])
set udg_dian2[1]=GetUnitLoc(udg_danwei2[26])
call UnitRemoveBuffBJ(0x42303059, udg_danwei2[26])
call MoveLightningEx(udg_shandian[7], false, GetLocationX(udg_dian2[0]), GetLocationY(udg_dian2[0]), ( GetLocationZ(udg_dian2[0]) + 200.00 ), GetLocationX(udg_dian2[1]), GetLocationY(udg_dian2[1]), ( GetLocationZ(udg_dian2[1]) + 50.00 ))
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) > 100.00 ) ) then
call SetUnitLifeBJ(udg_danwei2[27], ( GetUnitState(udg_danwei2[27], UNIT_STATE_LIFE) - 0.04 ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", udg_dian2[0]))
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], 100.00, AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
call SetUnitX(udg_danwei2[26], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[26], GetLocationY(udg_dian2[2]))
call RemoveLocation(udg_dian2[2])
else
endif
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
call UnitRemoveBuffBJ(0x42637963, udg_danwei2[26])
call UnitRemoveBuffBJ(0x42637932, udg_danwei2[26])
set udg_dian2[0]=GetUnitLoc(udg_danwei2[27])
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[25]), 0x65303130, udg_dian2[0], 0.00)
call UnitAddAbility(udg_danwei2[0], 0x41304449)
call s__baka_IssueTargetOrderById2(udg_danwei2[0] , 852095 , udg_danwei2[26])
call UnitApplyTimedLife(udg_danwei2[0], 0x42487765, 0.50)
call DestroyLightning(udg_shandian[7])
call PauseTimer(udg_times[25])
call UnitRemoveBuffBJ(0x4230304D, udg_danwei2[26])
call RemoveUnit(udg_danwei2[27])
set udg_danwei2[25]=null
set udg_danwei2[26]=null
set udg_danwei2[27]=null
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
endif
endfunction
function InitTrig_shoukao_2 takes nothing returns nothing
set gg_trg_shoukao_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_shoukao_2, udg_times[25])
call TriggerAddAction(gg_trg_shoukao_2, function Trig_shoukao_2Actions)
endfunction
function Trig_duochongtieshiActions takes nothing returns nothing
set udg_danwei2[28]=GetTriggerUnit()
set udg_zhengshu2[28]=0
call StartTimerBJ(udg_times[28], true, 0.08)
set udg_dian2[0]=GetUnitLoc(udg_danwei2[28])
set udg_Danwei[37]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[28]), 0x65303649, udg_dian2[0], 270.00)
call SetUnitManaBJ(udg_Danwei[37], 255.00)
call SetUnitColor(udg_Danwei[37], PLAYER_COLOR_ORANGE)
call SetUnitTimeScale(udg_Danwei[37], ( 1.00 / 1.60 ))
call GroupAddUnit(udg_Danweizu[37], udg_Danwei[37])
set udg_Danwei[37]=null
call RemoveLocation(udg_dian2[0])
call StartTimerBJ(udg_jishiqi[147], false, 0.00)
endfunction
function InitTrig_duochongtieshi takes nothing returns nothing
set gg_trg_duochongtieshi=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_duochongtieshi , 3 , 0x41303536)
call TriggerAddAction(gg_trg_duochongtieshi, function Trig_duochongtieshiActions)
endfunction
function Trig_duochongtieshi_2Func002Func002Func001A takes nothing returns nothing
set udg_Danwei[37]=GetEnumUnit()
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[37])) + 1 ) == ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[28])) + 1 ) ) ) then
call SetUnitTimeScale(udg_Danwei[37], 0.00)
call SetUnitManaBJ(udg_Danwei[37], 250.00)
else
endif
set udg_Danwei[37]=null
endfunction
function Trig_duochongtieshi_2Func002Func002Func006A takes nothing returns nothing
set udg_danwei2[2]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[2], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[2], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[2], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[2], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[2], GetOwningPlayer(udg_danwei2[28])) == true ) ) then
else
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[2])
endif
set udg_danwei2[2]=null
endfunction
function Trig_duochongtieshi_2Func002Func011Func001A takes nothing returns nothing
set udg_Danwei[37]=GetEnumUnit()
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[37])) + 1 ) == ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[28])) + 1 ) ) ) then
call SetUnitTimeScale(udg_Danwei[37], ( 0.00 - ( 1.00 / 1.60 ) ))
else
endif
set udg_Danwei[37]=null
endfunction
function Trig_duochongtieshi_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu2[28]=( udg_zhengshu2[28] + 1 )
if ( ( udg_zhengshu2[28] <= 20 ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[28])
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 100.00, ( GetUnitFacing(udg_danwei2[28]) - ( 30.00 - ( I2R(udg_zhengshu2[28]) * 3.00 ) ) ))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[28]), 0x65303242, udg_dian2[1], ( GetUnitFacing(udg_danwei2[28]) - ( 30.00 - ( I2R(udg_zhengshu2[28]) * 3.00 ) ) ))
call SetUnitTimeScale(udg_danwei2[1], 0.00)
call SetUnitColor(udg_danwei2[1], PLAYER_COLOR_LIGHT_GRAY)
call GroupAddUnit(udg_danweizu2[28], udg_danwei2[1])
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[0])
if ( ( udg_zhengshu2[28] == 20 ) ) then
call ForGroupBJ(udg_Danweizu[37], function Trig_duochongtieshi_2Func002Func011Func001A)
else
endif
else
if ( ( udg_zhengshu2[28] <= 40 ) ) then
set udg_danwei2[0]=GroupPickRandomUnit(udg_danweizu2[28])
set udg_dian2[0]=GetUnitLoc(udg_danwei2[28])
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 500.00, GetUnitFacing(udg_danwei2[0]))
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(500.00 , udg_dian2[1])
call ForGroupBJ(udg_xuanqu, function Trig_duochongtieshi_2Func002Func002Func006A)
if ( ( IsUnitGroupEmptyBJ(udg_xuanqu) == true ) ) then
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], GetRandomReal(0.00, 300.00), GetRandomReal(0, 360.00))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[28]), 0x65303242, udg_dian2[2], GetRandomReal(0, 360.00))
call RemoveLocation(udg_dian2[2])
else
set udg_danwei2[2]=GroupPickRandomUnit(udg_xuanqu)
set udg_dian2[2]=GetUnitLoc(udg_danwei2[2])
set udg_dian2[3]=PolarProjectionBJ(udg_dian2[2], GetRandomReal(400.00, 1000.00), GetRandomReal(0, 360.00))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[28]), 0x65303242, udg_dian2[2], AngleBetweenPoints(udg_dian2[3], udg_dian2[2]))
call RemoveLocation(udg_dian2[2])
call RemoveLocation(udg_dian2[3])
set udg_danwei2[2]=null
endif
call GroupAddUnit(udg_DAZE[0], udg_danwei2[1])
call DestroyGroup(udg_xuanqu)
call SetUnitLifeBJ(udg_danwei2[1], ( 25.00 + ( I2R(GetHeroAgi(udg_danwei2[28], true)) * 0.50 ) ))
call SetUnitUserData(udg_danwei2[1], 0)
call SetUnitColor(udg_danwei2[1], PLAYER_COLOR_LIGHT_GRAY)
call SetUnitTimeScale(udg_danwei2[1], 1.00)
call GroupAddUnit(udg_danweizu2[24], udg_danwei2[1])
call GroupRemoveUnit(udg_danweizu2[28], udg_danwei2[0])
call RemoveUnit(udg_danwei2[0])
set udg_danwei2[0]=null
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
call ForGroupBJ(udg_Danweizu[37], function Trig_duochongtieshi_2Func002Func002Func001A)
call PauseTimer(udg_times[28])
set udg_danwei2[28]=null
endif
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_duochongtieshi_2 takes nothing returns nothing
set gg_trg_duochongtieshi_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_duochongtieshi_2, udg_times[28])
call TriggerAddAction(gg_trg_duochongtieshi_2, function Trig_duochongtieshi_2Actions)
endfunction
function Trig_duochongtieshi_3Actions takes nothing returns nothing
set udg_Dian[89]=GetUnitLoc(udg_danwei2[28])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[28]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304B59)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_danwei2[28])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
endfunction
function InitTrig_duochongtieshi_3 takes nothing returns nothing
set gg_trg_duochongtieshi_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_duochongtieshi_3, udg_jishiqi[147])
call TriggerAddAction(gg_trg_duochongtieshi_3, function Trig_duochongtieshi_3Actions)
endfunction
function Trig_feituiActions takes nothing returns nothing
set udg_danwei[360]=GetTriggerUnit()
set udg_dian[270]=GetSpellTargetLoc()
set udg_dian[271]=GetUnitLoc(udg_danwei[360])
set udg_zhengshu[90]=0
call SetUnitTimeScale(udg_danwei[360], 6.00)
call SetUnitAnimation(udg_danwei[360], "spell two")
set udg_texiao[26]=AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Shockwave\\ShockwaveMissile.mdl", udg_danwei[360], "origin")
call GroupClear(udg_danweizu2[115])
call StartTimerBJ(udg_jishiqi[100], true, 0.03)
endfunction
function InitTrig_feitui takes nothing returns nothing
set gg_trg_feitui=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_feitui , 3 , 0x41303637)
call TriggerAddAction(gg_trg_feitui, function Trig_feituiActions)
endfunction
function Trig_feitui2Func001Func002Func016A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei[360])) == true ) ) then
if ( ( UnitHasBuffBJ(udg_danwei[360], 0x42303053) == true ) ) then
call UnitDamageTarget(udg_danwei[360], udg_danwei2[1], ( 0.20 * I2R(GetHeroStr(udg_danwei[360], true)) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
if ( ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[115]) == false ) ) then
call UnitDamageTarget(udg_danwei[360], udg_danwei2[1], ( 50.00 + ( 50.00 * I2R(GetUnitAbilityLevel(udg_danwei[360], 0x41303637)) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WOOD_HEAVY_BASH)
call GroupAddUnit(udg_danweizu2[115], udg_danwei2[1])
else
endif
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_feitui2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( ( IsUnitPausedBJ(udg_danwei[360]) == false ) or ( IsUnitType(udg_danwei[360], UNIT_TYPE_DEAD) == true ) ) ) then
set udg_zhengshu[90]=( udg_zhengshu[90] + 1 )
if ( ( IsUnitAliveBJ(udg_danwei[360]) == true ) and ( udg_zhengshu[90] <= 20 ) ) then
set udg_dian[272]=GetUnitLoc(udg_danwei[360])
set udg_dian[273]=PolarProjectionBJ(udg_dian[272], 50.00, AngleBetweenPoints(udg_dian[271], udg_dian[270]))
if ( ( IsTerrainPathableBJ(udg_dian[273], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_danwei[360], GetLocationX(udg_dian[273]))
call SetUnitY(udg_danwei[360], GetLocationY(udg_dian[273]))
else
endif
call SetUnitFacing(udg_danwei[360], AngleBetweenPoints(udg_dian[271], udg_dian[270]))
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(250.00 , udg_dian[272])
call ForGroupBJ(udg_xuanqu, function Trig_feitui2Func001Func002Func016A)
call DestroyGroup(udg_xuanqu)
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", udg_dian[273]))
call RemoveLocation(udg_dian[272])
call RemoveLocation(udg_dian[273])
else
call GroupClear(udg_danweizu2[115])
call PauseTimer(udg_jishiqi[100])
call DestroyEffect(udg_texiao[26])
call SetUnitTimeScale(udg_danwei[360], 1.00)
set udg_danwei[360]=null
set udg_danwei[361]=null
call RemoveLocation(udg_dian[270])
call RemoveLocation(udg_dian[271])
endif
else
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_feitui2 takes nothing returns nothing
set gg_trg_feitui2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_feitui2, udg_jishiqi[100])
call TriggerAddAction(gg_trg_feitui2, function Trig_feitui2Actions)
endfunction
function Trig_zhanzhengjiantaFunc010A takes nothing returns nothing
set udg_danwei[364]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[364], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei[364], udg_danweizu2[369]) == false ) and ( IsUnitAliveBJ(udg_danwei[364]) == true ) and ( IsUnitEnemy(udg_danwei[364], GetOwningPlayer(udg_danwei[362])) == true ) ) then
call UnitDamageTarget(udg_danwei[362], udg_danwei[364], ( ( ( 2.50 / 6.00 ) * I2R(GetHeroStr(udg_danwei[362], true)) ) + ( ( 50.00 / 6.00 ) * I2R(( GetUnitAbilityLevel(udg_danwei[362], 0x414F7773) - 0 )) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_BASH)
else
endif
set udg_danwei[364]=null
endfunction
function Trig_zhanzhengjiantaActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei[362]=GetTriggerUnit()
set udg_dian[275]=GetUnitLoc(udg_danwei[362])
set udg_danweizu[70]=YDWEGetUnitsInRangeOfLocAllNull(300.00 , udg_dian[275])
set udg_danwei[363]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[362]), 0x6530324F, udg_dian[275], 0)
call SetUnitVertexColor(udg_danwei[363], 255, 255, 255, 0)
call UnitAddAbility(udg_danwei[363], 0x41303639)
call IssueImmediateOrder(udg_danwei[363], "stomp")
call UnitApplyTimedLife(udg_danwei[363], 0x42487765, 0.50)
call ForGroupBJ(udg_danweizu[70], function Trig_zhanzhengjiantaFunc010A)
call DestroyGroup(udg_danweizu[70])
set udg_danwei[363]=null
call RemoveLocation(udg_dian[275])
if ( ( UnitHasBuffBJ(udg_danwei[362], 0x42303053) == true ) ) then
set udg_zhengshu[91]=6
call StartTimerBJ(udg_jishiqi[101], true, 0.30)
else
set udg_zhengshu[91]=5
call StartTimerBJ(udg_jishiqi[101], true, 0.40)
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_zhanzhengjianta takes nothing returns nothing
set gg_trg_zhanzhengjianta=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_zhanzhengjianta , 3 , 0x414F7773)
call TriggerAddAction(gg_trg_zhanzhengjianta, function Trig_zhanzhengjiantaActions)
endfunction
function Trig_zhanzhengjianta2Func001Func001Func011A takes nothing returns nothing
set udg_danwei[364]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[364], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei[364], udg_danweizu2[369]) == false ) and ( IsUnitAliveBJ(udg_danwei[364]) == true ) and ( IsUnitEnemy(udg_danwei[364], GetOwningPlayer(udg_danwei[362])) == true ) ) then
call UnitDamageTarget(udg_danwei[362], udg_danwei[364], ( ( ( 2.50 / 6.00 ) * I2R(GetHeroStr(udg_danwei[362], true)) ) + ( ( 50.00 / 6.00 ) * I2R(( GetUnitAbilityLevel(udg_danwei[362], 0x414F7773) - 0 )) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_BASH)
else
endif
set udg_danwei[364]=null
endfunction
function Trig_zhanzhengjianta2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( ( IsUnitPausedBJ(udg_danwei[363]) == false ) or ( IsUnitType(udg_danwei[363], UNIT_TYPE_DEAD) == true ) ) ) then
if ( ( udg_zhengshu[91] > 0 ) ) then
set udg_zhengshu[91]=( udg_zhengshu[91] - 1 )
set udg_dian[275]=GetUnitLoc(udg_danwei[362])
set udg_danweizu[70]=YDWEGetUnitsInRangeOfLocAllNull(300.00 , udg_dian[275])
set udg_danwei[363]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[362]), 0x6530324F, udg_dian[275], 0)
call SetUnitVertexColor(udg_danwei[363], 255, 255, 255, 0)
call UnitAddAbility(udg_danwei[363], 0x41303639)
call IssueImmediateOrder(udg_danwei[363], "stomp")
call UnitApplyTimedLife(udg_danwei[363], 0x42487765, 0.50)
call ForGroupBJ(udg_danweizu[70], function Trig_zhanzhengjianta2Func001Func001Func011A)
call DestroyGroup(udg_danweizu[70])
set udg_danwei[363]=null
call RemoveLocation(udg_dian[275])
else
set udg_danwei[362]=null
call PauseTimer(udg_jishiqi[101])
endif
else
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_zhanzhengjianta2 takes nothing returns nothing
set gg_trg_zhanzhengjianta2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_zhanzhengjianta2, udg_jishiqi[101])
call TriggerAddAction(gg_trg_zhanzhengjianta2, function Trig_zhanzhengjianta2Actions)
endfunction
function Trig_lianjiActions takes nothing returns nothing
set udg_danwei[365]=GetTriggerUnit()
set udg_danwei[366]=GetSpellTargetUnit()
set udg_dian[276]=GetUnitLoc(udg_danwei[365])
set udg_dian[277]=GetUnitLoc(udg_danwei[366])
set udg_zhengshu[92]=0
call UnitAddAbility(udg_danwei[365], 0x41303130)
call StartTimerBJ(udg_jishiqi[102], true, 0.10)
set udg_danwei[367]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[365]), 0x65303130, udg_dian[276], 0)
call UnitApplyTimedLife(udg_danwei[367], 0x42487765, 1.00)
call s__baka_IssueTargetOrder2(udg_danwei[367] , "bloodlust" , udg_danwei[365])
set udg_danwei[367]=null
endfunction
function InitTrig_lianji takes nothing returns nothing
set gg_trg_lianji=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_lianji , 3 , 0x41303641)
call TriggerAddAction(gg_trg_lianji, function Trig_lianjiActions)
endfunction
function Trig_lianji2Actions takes nothing returns nothing
if ( ( ( IsUnitPausedBJ(udg_danwei[365]) == false ) or ( IsUnitType(udg_danwei[365], UNIT_TYPE_DEAD) == true ) ) ) then
set udg_zhengshu[92]=( udg_zhengshu[92] + 1 )
if ( ( udg_zhengshu[92] <= 19 ) and ( IsUnitDeadBJ(udg_danwei[365]) == false ) and ( IsUnitDeadBJ(udg_danwei[366]) == false ) ) then
set udg_dian[278]=GetUnitLoc(udg_danwei[365])
set udg_dian[279]=PolarProjectionBJ(udg_dian[276], 500.00, ( AngleBetweenPoints(udg_dian[276], udg_dian[278]) + 144.00 ))
call UnitDamageTarget(udg_danwei[365], udg_danwei[366], ( 0.35 * I2R(GetHeroStr(udg_danwei[365], true)) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WOOD_HEAVY_BASH)
call SetUnitX(udg_danwei[365], GetLocationX(udg_dian[279]))
call SetUnitY(udg_danwei[365], GetLocationY(udg_dian[279]))
call SetUnitY(udg_danwei[366], GetLocationY(udg_dian[279]))
call SetUnitX(udg_danwei[366], GetLocationX(udg_dian[279]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl", udg_dian[279]))
call RemoveLocation(udg_dian[279])
call RemoveLocation(udg_dian[278])
else
call UnitRemoveAbility(udg_danwei[365], 0x41303130)
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl", udg_dian[276]))
call SetUnitX(udg_danwei[365], GetLocationX(udg_dian[276]))
call SetUnitY(udg_danwei[365], GetLocationY(udg_dian[276]))
call SetUnitY(udg_danwei[366], GetLocationY(udg_dian[276]))
call SetUnitX(udg_danwei[366], GetLocationX(udg_dian[276]))
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=5
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=3
loop
exitwhen bj_forLoopBIndex > bj_forLoopBIndexEnd
set udg_dian[281]=PolarProjectionBJ(udg_dian[276], ( ( 75.00 * I2R(bj_forLoopBIndex) ) + 100.00 ), ( ( 72.00 * I2R(bj_forLoopAIndex) ) + 45.00 ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", udg_dian[281]))
call RemoveLocation(udg_dian[281])
set bj_forLoopBIndex=bj_forLoopBIndex + 1
endloop
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call PauseTimer(udg_jishiqi[102])
set udg_danwei[365]=null
set udg_danwei[366]=null
call RemoveLocation(udg_dian[276])
call RemoveLocation(udg_dian[277])
endif
else
endif
endfunction
function InitTrig_lianji2 takes nothing returns nothing
set gg_trg_lianji2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_lianji2, udg_jishiqi[102])
call TriggerAddAction(gg_trg_lianji2, function Trig_lianji2Actions)
endfunction
function Trig_yexingkuangben_1Actions takes nothing returns nothing
set udg_danwei2[43]=GetTriggerUnit()
set udg_dian2[44]=GetUnitLoc(udg_danwei2[43])
call StartTimerBJ(udg_times[43], true, 0.03)
set udg_zhengshu[140]=R2I(( ( 15.00 + ( 5.00 * I2R(GetUnitAbilityLevel(udg_danwei2[43], 0x41303649)) ) ) / 0.03 ))
set udg_piaofuwenzi[3]=CreateTextTag()
call SetTextTagTextBJ(udg_piaofuwenzi[3], ( "野性狂奔：" + R2SW(( I2R(udg_zhengshu[140]) * 0.03 ), 1, 1) ), 11.00)
call SetTextTagPos(udg_piaofuwenzi[3], ( GetUnitX(udg_danwei2[43]) - 75.00 ), GetUnitY(udg_danwei2[43]), ( s__maphack_GetHeight(udg_danwei2[43]) + 150.00 ))
call SetTextTagColor(udg_piaofuwenzi[3], 255, 128, 0, 255)
call SetTextTagVisibility(udg_piaofuwenzi[3], false)
set udg_wanjiazu[0]=CreateForce()
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ( ( IsUnitAlly(udg_danwei2[43], s__baka_SPlayer(bj_forLoopAIndex - 1)) == true ) ) then
call ForceAddPlayer(udg_wanjiazu[0], s__baka_SPlayer(bj_forLoopAIndex - 1))
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call ShowTextTagForceBJ(true, udg_piaofuwenzi[3], udg_wanjiazu[0])
call DestroyForce(udg_wanjiazu[0])
endfunction
function InitTrig_yexingkuangben_1 takes nothing returns nothing
set gg_trg_yexingkuangben_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_yexingkuangben_1 , 3 , 0x41303649)
call TriggerAddAction(gg_trg_yexingkuangben_1, function Trig_yexingkuangben_1Actions)
endfunction
function Trig_yexingkuangben_2Actions takes nothing returns nothing
if ( ( IsUnitPausedBJ(udg_danwei2[43]) == false ) ) then
if ( ( UnitHasBuffBJ(udg_danwei2[43], 0x42303053) == true ) and ( IsUnitType(udg_danwei2[43], UNIT_TYPE_DEAD) == false ) ) then
set udg_zhengshu[140]=( udg_zhengshu[140] - 1 )
call SetTextTagTextBJ(udg_piaofuwenzi[3], ( "野性狂奔：" + R2SW(( I2R(udg_zhengshu[140]) * 0.03 ), 1, 1) ), 11.00)
call SetTextTagPos(udg_piaofuwenzi[3], ( GetUnitX(udg_danwei2[43]) - 75.00 ), GetUnitY(udg_danwei2[43]), ( s__maphack_GetHeight(udg_danwei2[43]) + 150.00 ))
set udg_dian2[43]=GetUnitLoc(udg_danwei2[43])
if ( ( DistanceBetweenPoints(udg_dian2[43], udg_dian2[44]) >= 15.00 ) ) then
set udg_dian2[45]=PolarProjectionBJ(udg_dian2[43], ( 5.00 + I2R(GetUnitAbilityLevel(udg_danwei2[43], 0x41303649)) ), AngleBetweenPoints(udg_dian2[44], udg_dian2[43]))
call SetUnitY(udg_danwei2[43], GetLocationY(udg_dian2[45]))
call SetUnitX(udg_danwei2[43], GetLocationX(udg_dian2[45]))
if ( ( UnitHasBuffBJ(udg_danwei2[43], 0x42303054) == false ) ) then
call SetUnitLifeBJ(udg_danwei2[43], RMaxBJ(( GetUnitState(udg_danwei2[43], UNIT_STATE_LIFE) - ( GetUnitState(udg_danwei2[43], UNIT_STATE_MAX_LIFE) / 2500.00 ) ), 1.00))
else
endif
call RemoveLocation(udg_dian2[45])
else
endif
call RemoveLocation(udg_dian2[43])
call RemoveLocation(udg_dian2[44])
set udg_dian2[44]=GetUnitLoc(udg_danwei2[43])
else
if ( ( udg_zhengshu[140] > 0 ) ) then
call SetTextTagColor(udg_piaofuwenzi[3], 64, 64, 64, 255)
else
endif
call SetTextTagPermanent(udg_piaofuwenzi[3], false)
call SetTextTagAge(udg_piaofuwenzi[3], 0)
call SetTextTagLifespan(udg_piaofuwenzi[3], 0.50)
call SetTextTagFadepoint(udg_piaofuwenzi[3], 0.10)
call UnitRemoveBuffsExBJ(bj_BUFF_POLARITY_NEGATIVE, bj_BUFF_RESIST_EITHER, udg_danwei2[43], false, false)
call UnitRemoveAbility(udg_danwei2[43], 0x4253544E)
call UnitRemoveAbility(udg_danwei2[43], 0x42505345)
set udg_danwei2[43]=null
call RemoveLocation(udg_dian2[44])
call PauseTimer(udg_times[43])
endif
else
endif
endfunction
function InitTrig_yexingkuangben_2 takes nothing returns nothing
set gg_trg_yexingkuangben_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_yexingkuangben_2, udg_times[43])
call TriggerAddAction(gg_trg_yexingkuangben_2, function Trig_yexingkuangben_2Actions)
endfunction
function Trig_zhanshenzhufu_1Actions takes nothing returns nothing
set udg_Danwei[121]=GetTriggerUnit()
call StartTimerBJ(udg_Times[121], true, 0.03)
set udg_Zhengshu[120]=21
set udg_Zhengshu[121]=501
call EnableTrigger(gg_trg_zhanshenzhufu_3)
endfunction
function InitTrig_zhanshenzhufu_1 takes nothing returns nothing
set gg_trg_zhanshenzhufu_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_zhanshenzhufu_1 , 3 , 0x41303643)
call TriggerAddAction(gg_trg_zhanshenzhufu_1, function Trig_zhanshenzhufu_1Actions)
endfunction
function Trig_zhanshenzhufu_2Func001Func007Func006A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitDeadBJ(udg_danwei2[1]) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_Danwei[121])) == true ) and ( IsUnitInGroup(udg_danwei2[1], udg_Danweizu[121]) == false ) ) then
call UnitDamageTarget(udg_Danwei[121], udg_danwei2[1], ( ( 1.00 * I2R(GetHeroStr(udg_Danwei[121], true)) ) + ( 50.00 + ( 20.00 * I2R(GetUnitAbilityLevel(udg_Danwei[121], 0x41303643)) ) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_danwei2[1])
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", udg_danwei2[1], "chest"))
call GroupAddUnit(udg_Danweizu[121], udg_danwei2[1])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_zhanshenzhufu_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( ( ( udg_Zhengshu[120] <= 20 ) and ( udg_Zhengshu[120] > 0 ) ) or ( ( IsUnitType(udg_Danwei[121], UNIT_TYPE_DEAD) == false ) and ( ( ( udg_Zhengshu[121] <= 500 ) and ( udg_Zhengshu[121] > 0 ) ) or ( UnitHasBuffBJ(udg_Danwei[121], 0x42303054) == true ) ) ) ) ) then
if ( ( UnitHasBuffBJ(udg_Danwei[121], 0x42303054) == true ) ) then
call SetUnitLifeBJ(udg_Danwei[121], ( GetUnitState(udg_Danwei[121], UNIT_STATE_LIFE) + ( GetUnitState(udg_Danwei[121], UNIT_STATE_MAX_LIFE) / 2500.00 ) ))
if ( ( UnitHasBuffBJ(udg_Danwei[121], 0x42505345) == true ) and ( udg_Zhengshu[120] == 21 ) ) then
set udg_Zhengshu[120]=( udg_Zhengshu[120] - 1 )
set udg_Dian[121]=GetUnitLoc(udg_Danwei[121])
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\reddrum.mdx", udg_Dian[121]))
else
endif
else
endif
if ( ( udg_Zhengshu[120] <= 20 ) and ( udg_Zhengshu[120] > 0 ) ) then
set udg_Zhengshu[120]=( udg_Zhengshu[120] - 1 )
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[121]), 0x65303130, udg_Dian[121], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304236)
set udg_Danweizu[91]=YDWEGetUnitsInRangeOfLocAllNull(( 500.00 - ( 22.50 * I2R(udg_Zhengshu[120]) ) ) , udg_Dian[121])
call ForGroupBJ(udg_Danweizu[91], function Trig_zhanshenzhufu_2Func001Func007Func006A)
call DestroyGroup(udg_Danweizu[91])
set udg_Danwei[92]=null
if ( ( udg_Zhengshu[120] == 0 ) ) then
call GroupClear(udg_Danweizu[121])
call RemoveLocation(udg_Dian[121])
else
endif
else
endif
if ( ( udg_Zhengshu[121] <= 500 ) and ( udg_Zhengshu[121] > 0 ) ) then
if ( ( IsUnitPausedBJ(udg_Danwei[121]) == false ) ) then
set udg_Zhengshu[121]=( udg_Zhengshu[121] - 1 )
if ( ( udg_Zhengshu[121] == 0 ) ) then
call UnitRemoveAbility(udg_Danwei[121], 0x41304A42)
call UnitRemoveAbility(udg_Danwei[121], 0x41304C51)
else
endif
else
endif
else
endif
else
call DisableTrigger(gg_trg_zhanshenzhufu_3)
set udg_Zhengshu[121]=0
call UnitRemoveAbility(udg_Danwei[121], 0x41304A42)
call UnitRemoveAbility(udg_Danwei[121], 0x41304C51)
call PauseTimer(udg_Times[121])
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_zhanshenzhufu_2 takes nothing returns nothing
set gg_trg_zhanshenzhufu_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_zhanshenzhufu_2, udg_Times[121])
call TriggerAddAction(gg_trg_zhanshenzhufu_2, function Trig_zhanshenzhufu_2Actions)
endfunction
function Trig_zhanshenzhufu_3Conditions takes nothing returns boolean
return ( ( udg_Zhengshu[121] == 501 ) and ( GetSpellTargetUnit() != null ) and ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true ) )
endfunction
function Trig_zhanshenzhufu_3Actions takes nothing returns nothing
if ( ( UnitHasBuffBJ(GetSpellTargetUnit(), 0x42303054) == true ) and ( IsUnitEnemy(GetTriggerUnit(), GetOwningPlayer(udg_Danwei[121])) == true ) ) then
set udg_Zhengshu[121]=500
call UnitAddAbility(udg_Danwei[121], 0x41304A42)
call UnitAddAbility(udg_Danwei[121], 0x41304C51)
call SetUnitAbilityLevel(udg_Danwei[121], 0x41304C53, GetUnitAbilityLevel(udg_Danwei[121], 0x41303643))
call DisableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function InitTrig_zhanshenzhufu_3 takes nothing returns nothing
set gg_trg_zhanshenzhufu_3=CreateTrigger()
call DisableTrigger(gg_trg_zhanshenzhufu_3)
call TriggerRegisterAnyUnitEventBJ(gg_trg_zhanshenzhufu_3, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_zhanshenzhufu_3, Condition(function Trig_zhanshenzhufu_3Conditions))
call TriggerAddAction(gg_trg_zhanshenzhufu_3, function Trig_zhanshenzhufu_3Actions)
endfunction
function Trig_zhonglifeixing_starConditions takes nothing returns boolean
return ( ( ( GetSpellAbilityId() == 0x41304949 ) or ( GetSpellAbilityId() == 0x4130494A ) ) )
endfunction
function Trig_zhonglifeixing_starFunc004Func003Func001T takes nothing returns nothing
call SetPlayerAbilityAvailable(GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x458B7DE9)), 0x41304949, true)
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
endfunction
function Trig_zhonglifeixing_starActions takes nothing returns nothing
local timer ydl_timer
set udg_danwei2[67]=GetTriggerUnit()
if ( ( GetTriggerExecCount(GetTriggeringTrigger()) == 1 ) ) then
call TriggerRegisterUnitEvent(gg_trg_zhonglifeixing_1, udg_danwei2[67], EVENT_UNIT_ISSUED_TARGET_ORDER)
call TriggerRegisterUnitEvent(gg_trg_zhonglifeixing_1, udg_danwei2[67], EVENT_UNIT_ISSUED_POINT_ORDER)
call TriggerRegisterUnitEvent(gg_trg_zhonglifeixing_2, udg_danwei2[67], EVENT_UNIT_ISSUED_ORDER)
call UnitAddAbility(udg_danwei2[67], 0x4130494A)
else
endif
if ( ( IsTriggerEnabled(gg_trg_zhonglifeixing_move) == true ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[67]), 0x4130494A, false)
if ( ( s__sys_isIn11() == true ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[67]), 0x41304949, true)
call SetUnitRescueRange(udg_danwei2[67], - 2)
else
set ydl_timer=CreateTimer()
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x458B7DE9, GetTriggerUnit())
call TimerStart(ydl_timer, 1.00, false, function Trig_zhonglifeixing_starFunc004Func003Func001T)
endif
call DisableTrigger(gg_trg_zhonglifeixing_1)
call DisableTrigger(gg_trg_zhonglifeixing_move)
call UnitRemoveAbility(udg_danwei2[67], 0x41305041)
call UnitRemoveBuffBJ(0x42303353, udg_danwei2[67])
call SetUnitTurnSpeed(udg_danwei2[67], GetUnitDefaultTurnSpeed(udg_danwei2[67]))
call ResetUnitAnimation(udg_danwei2[67])
set udg_zhengshu2[68]=0
set udg_danwei2[67]=null
set udg_danwei2[68]=null
else
if ( ( GetUnitManaPercent(udg_danwei2[67]) >= 10.00 ) ) then
call SetUnitManaPercentBJ(udg_danwei2[67], ( GetUnitManaPercent(udg_danwei2[67]) - 5.00 ))
call SaveReal(YDHT, GetHandleId(udg_danwei2[67]), 0x36819224, 0.00)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[67]), 0x41304949, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[67]), 0x4130494A, true)
call EnableTrigger(gg_trg_zhonglifeixing_1)
call EnableTrigger(gg_trg_zhonglifeixing_move)
else
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[67]), 0, 0, 10.00, "TRIGSTR_4140")
set udg_danwei2[67]=null
endif
endif
set ydl_timer=null
endfunction
function InitTrig_zhonglifeixing_star takes nothing returns nothing
set gg_trg_zhonglifeixing_star=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_zhonglifeixing_star, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_zhonglifeixing_star, Condition(function Trig_zhonglifeixing_starConditions))
call TriggerAddAction(gg_trg_zhonglifeixing_star, function Trig_zhonglifeixing_starActions)
endfunction
function Trig_zhonglifeixing_1Conditions takes nothing returns boolean
return ( ( udg_Zhengshu[177] >= 0 ) )
endfunction
function Trig_zhonglifeixing_1Actions takes nothing returns nothing
local integer ydl_localvar_step=LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76)
set ydl_localvar_step=ydl_localvar_step + 3
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76, ydl_localvar_step)
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xECE825E7, ydl_localvar_step)
call RemoveLocation(udg_dian2[68])
call SaveLocationHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x61E1A70B, GetUnitLoc(udg_danwei2[67]))
call PauseTimer(udg_times[67])
if ( ( GetOrderTargetUnit() == null ) ) then
if ( ( GetOrderTargetItem() != null ) ) then
call SaveLocationHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x4D6303C9, GetItemLoc(GetOrderTargetItem()))
else
if ( ( GetOrderTargetDestructable() != null ) ) then
call SaveLocationHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x4D6303C9, GetDestructableLoc(GetOrderTargetDestructable()))
else
call SaveLocationHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x4D6303C9, GetOrderPointLoc())
endif
endif
set udg_dian2[68]=LoadLocationHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x4D6303C9)
if ( ( IsUnitType(udg_danwei2[67], UNIT_TYPE_DEAD) == false ) and ( DistanceBetweenPoints(LoadLocationHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x61E1A70B), LoadLocationHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x4D6303C9)) >= 150.00 ) and ( IsTerrainPathableBJ(LoadLocationHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x4D6303C9), PATHING_TYPE_FLYABILITY) == false ) ) then
if ( ( GetIssuedOrderIdBJ() == String2OrderIdBJ("smart") ) ) then
set udg_zhengshu2[67]=1
else
set udg_zhengshu2[67]=0
endif
call StartTimerBJ(udg_times[67], true, 0.03)
set udg_zhengshu2[68]=IMinBJ(( IMaxBJ(udg_zhengshu2[68], 20) + 15 ), ( 40 + ( 5 * GetUnitAbilityLevel(udg_danwei2[67], 0x41304949) ) ))
call SetUnitManaBJ(udg_danwei2[67], ( GetUnitState(udg_danwei2[67], UNIT_STATE_MANA) - ( 1.00 * ( ( GetUnitState(udg_danwei2[67], UNIT_STATE_MAX_MANA) / ( 100.00 / 1.00 ) ) + 15.00 ) ) ))
call SaveReal(YDHT, GetHandleId(udg_danwei2[67]), 0x36819224, ( LoadReal(YDHT, GetHandleId(udg_danwei2[67]), 0x36819224) + ( 15.00 + ( 0.01 * GetUnitState(udg_danwei2[67], UNIT_STATE_MAX_MANA) ) ) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", LoadLocationHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x61E1A70B)))
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[67]), 0x65303849, LoadLocationHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x61E1A70B), 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call GroupAddUnit(udg_Danweizu[178], udg_Danwei[92])
set udg_Danwei[92]=null
else
call UnitRemoveAbility(udg_danwei2[67], 0x41305041)
call UnitRemoveBuffBJ(0x42303353, udg_danwei2[67])
call SetUnitTurnSpeed(udg_danwei2[67], GetUnitDefaultTurnSpeed(udg_danwei2[67]))
set udg_zhengshu2[68]=0
endif
else
call SaveLocationHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x4D6303C9, GetUnitLoc(GetOrderTargetUnit()))
set udg_dian2[68]=LoadLocationHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x4D6303C9)
if ( ( IsUnitType(udg_danwei2[67], UNIT_TYPE_DEAD) == false ) and ( DistanceBetweenPoints(LoadLocationHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x61E1A70B), LoadLocationHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x4D6303C9)) >= 150.00 ) ) then
set udg_zhengshu2[67]=0
call StartTimerBJ(udg_times[67], true, 0.03)
set udg_zhengshu2[68]=IMinBJ(( IMaxBJ(udg_zhengshu2[68], 20) + 15 ), ( 40 + ( 5 * GetUnitAbilityLevel(udg_danwei2[67], 0x41304949) ) ))
call SetUnitManaBJ(udg_danwei2[67], ( GetUnitState(udg_danwei2[67], UNIT_STATE_MANA) - ( 1.00 * ( ( GetUnitState(udg_danwei2[67], UNIT_STATE_MAX_MANA) / ( 100.00 / 1.00 ) ) + 15.00 ) ) ))
call SaveReal(YDHT, GetHandleId(udg_danwei2[67]), 0x36819224, ( LoadReal(YDHT, GetHandleId(udg_danwei2[67]), 0x36819224) + ( 15.00 + ( 0.01 * GetUnitState(udg_danwei2[67], UNIT_STATE_MAX_MANA) ) ) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", LoadLocationHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x61E1A70B)))
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[67]), 0x65303849, LoadLocationHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x61E1A70B), 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call GroupAddUnit(udg_Danweizu[178], udg_Danwei[92])
set udg_Danwei[92]=null
else
call UnitRemoveAbility(udg_danwei2[67], 0x41305041)
call UnitRemoveBuffBJ(0x42303353, udg_danwei2[67])
call SetUnitTurnSpeed(udg_danwei2[67], GetUnitDefaultTurnSpeed(udg_danwei2[67]))
set udg_zhengshu2[68]=0
endif
endif
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x61E1A70B))
call FlushChildHashtable(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step)
endfunction
function InitTrig_zhonglifeixing_1 takes nothing returns nothing
set gg_trg_zhonglifeixing_1=CreateTrigger()
call TriggerAddCondition(gg_trg_zhonglifeixing_1, Condition(function Trig_zhonglifeixing_1Conditions))
call TriggerAddAction(gg_trg_zhonglifeixing_1, function Trig_zhonglifeixing_1Actions)
endfunction
function Trig_zhonglifeixing_2Actions takes nothing returns nothing
call UnitRemoveAbility(udg_danwei2[67], 0x41305041)
call UnitRemoveBuffBJ(0x42303353, udg_danwei2[67])
call SetUnitTurnSpeed(udg_danwei2[67], GetUnitDefaultTurnSpeed(udg_danwei2[67]))
call ResetUnitAnimation(udg_danwei2[67])
call PauseTimer(udg_times[67])
set udg_zhengshu2[68]=0
endfunction
function InitTrig_zhonglifeixing_2 takes nothing returns nothing
set gg_trg_zhonglifeixing_2=CreateTrigger()
call TriggerAddAction(gg_trg_zhonglifeixing_2, function Trig_zhonglifeixing_2Actions)
endfunction
function Trig_zhonglifeixing_3Actions takes nothing returns nothing
if ( ( IsUnitType(udg_danwei2[67], UNIT_TYPE_DEAD) == false ) ) then
call StartTimerBJ(udg_times[67], true, 0.03)
call DisableTrigger(GetTriggeringTrigger())
else
endif
endfunction
function InitTrig_zhonglifeixing_3 takes nothing returns nothing
set gg_trg_zhonglifeixing_3=CreateTrigger()
call DisableTrigger(gg_trg_zhonglifeixing_3)
call TriggerRegisterTimerEventPeriodic(gg_trg_zhonglifeixing_3, 0.10)
call TriggerAddAction(gg_trg_zhonglifeixing_3, function Trig_zhonglifeixing_3Actions)
endfunction
function Trig_zhonglifeixing_moveFunc001Func001Func004Func001T takes nothing returns nothing
call SetPlayerAbilityAvailable(GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x62274AD0)), 0x41304949, true)
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
endfunction
function Trig_zhonglifeixing_moveFunc001Func001Func014Func002Func019A takes nothing returns nothing
call SetUnitX(GetEnumUnit(), GetLocationX(udg_dian2[0]))
call SetUnitY(GetEnumUnit(), GetLocationY(udg_dian2[0]))
endfunction
function Trig_zhonglifeixing_moveFunc001Func005Func001T takes nothing returns nothing
call SetPlayerAbilityAvailable(GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x62274AD0)), 0x41304949, true)
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
endfunction
function Trig_zhonglifeixing_moveActions takes nothing returns nothing
local timer ydl_timer
local group ydl_group
local unit ydl_unit
local integer ydl_localvar_step=LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76)
set ydl_localvar_step=ydl_localvar_step + 3
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76, ydl_localvar_step)
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xECE825E7, ydl_localvar_step)
if ( ( GetUnitManaPercent(udg_danwei2[67]) >= 5.00 ) ) then
if ( ( LoadReal(YDHT, GetHandleId(udg_danwei2[67]), 0x36819224) < ( GetUnitState(udg_danwei2[67], UNIT_STATE_MAX_MANA) * ( 0.35 + ( 0.05 * I2R(GetUnitAbilityLevel(udg_danwei2[67], 0x41304949)) ) ) ) ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[67])
if ( ( udg_Zhengshu[177] == - 1 ) ) then
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], ( ( ( 4.50 + ( 1.50 * I2R(GetUnitAbilityLevel(udg_danwei2[67], 0x41304949)) ) ) + ( GetUnitDefaultMoveSpeed(udg_danwei2[67]) * 0.03 ) ) * ( I2R(udg_zhengshu2[68]) / 25.00 ) ), AngleBetweenPoints(udg_dian2[0], udg_dian2[68]))
else
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], ( ( ( 4.50 + ( 1.50 * I2R(GetUnitAbilityLevel(udg_danwei2[67], 0x41304949)) ) ) + ( GetUnitDefaultMoveSpeed(udg_danwei2[67]) * 0.03 ) ) * ( I2R(udg_zhengshu2[68]) / 20.00 ) ), AngleBetweenPoints(udg_dian2[0], udg_dian2[68]))
endif
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[68]) >= 150.00 ) and ( IsUnitType(udg_danwei2[67], UNIT_TYPE_DEAD) == false ) ) then
if ( ( IsUnitPausedBJ(udg_danwei2[67]) == false ) and ( IsUnitType(udg_danwei2[67], UNIT_TYPE_STUNNED) == false ) and ( IsUnitType(udg_danwei2[67], UNIT_TYPE_SNARED) == false ) and ( UnitHasBuffBJ(udg_danwei2[67], 0x42303038) == false ) and ( UnitHasBuffBJ(udg_danwei2[67], 0x4230304D) == false ) and ( UnitHasBuffBJ(udg_danwei2[67], 0x42303046) == false ) and ( UnitHasBuffBJ(udg_danwei2[67], 0x42303146) == false ) and ( UnitHasBuffBJ(udg_danwei2[67], 0x4230304A) == false ) and ( UnitHasBuffBJ(udg_danwei2[67], 0x42637963) == false ) and ( UnitHasBuffBJ(udg_danwei2[67], 0x42637932) == false ) and ( UnitHasBuffBJ(udg_danwei2[67], 0x4253544E) == false ) and ( UnitHasBuffBJ(udg_danwei2[67], 0x42505345) == false ) ) then
set udg_zhengshu2[68]=IMaxBJ(R2I(( ( I2R(udg_zhengshu2[68]) * 0.99 ) - 1.00 )), 20)
call UnitAddAbility(udg_danwei2[67], 0x41305041)
call SetUnitAnimationByIndex(udg_danwei2[67], 9)
call SetUnitX(udg_danwei2[67], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[67], GetLocationY(udg_dian2[2]))
call ForGroupBJ(udg_Danweizu[178], function Trig_zhonglifeixing_moveFunc001Func001Func014Func002Func019A)
call SetUnitFacing(udg_danwei2[67], AngleBetweenPoints(udg_dian2[0], udg_dian2[68]))
call SetUnitTurnSpeed(udg_danwei2[67], 0.00)
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\BansheeMissile\\BansheeMissile.mdl", udg_dian2[0]))
call SetUnitManaBJ(udg_danwei2[67], ( GetUnitState(udg_danwei2[67], UNIT_STATE_MANA) - ( 0.03 * ( ( GetUnitState(udg_danwei2[67], UNIT_STATE_MAX_MANA) / ( 100.00 / 1.00 ) ) + 15.00 ) ) ))
call SaveReal(YDHT, GetHandleId(udg_danwei2[67]), 0x36819224, ( LoadReal(YDHT, GetHandleId(udg_danwei2[67]), 0x36819224) + ( 0.03 * ( 15.00 + ( 0.01 * GetUnitState(udg_danwei2[67], UNIT_STATE_MAX_MANA) ) ) ) ))
if ( ( RectContainsLoc(gg_rct_xuechi_1, udg_dian2[0]) == false ) and ( RectContainsLoc(gg_rct_xuechi_2, udg_dian2[0]) == false ) ) then
call UnitRemoveBuffBJ(0x4261726D, udg_danwei2[67])
else
endif
else
set udg_zhengshu2[68]=0
endif
else
if ( ( udg_zhengshu2[67] == 1 ) ) then
call IssueImmediateOrderById(udg_danwei2[67], 851972)
else
endif
call ResetUnitAnimation(udg_danwei2[67])
call UnitRemoveAbility(udg_danwei2[67], 0x41305041)
call UnitRemoveBuffBJ(0x42303353, udg_danwei2[67])
call SetUnitTurnSpeed(udg_danwei2[67], GetUnitDefaultTurnSpeed(udg_danwei2[67]))
call PauseTimer(udg_times[67])
set udg_zhengshu2[68]=0
endif
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[2])
else
set udg_zhengshu2[68]=0
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[67]), 0, 0, 10.00, "TRIGSTR_8303")
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[67]), 0x4130494A, false)
if ( ( s__sys_isIn11() == true ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[67]), 0x41304949, true)
call SetUnitRescueRange(udg_danwei2[67], - 1)
else
set ydl_timer=CreateTimer()
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x62274AD0, udg_danwei2[67])
call TimerStart(ydl_timer, 2.00, false, function Trig_zhonglifeixing_moveFunc001Func001Func004Func001T)
endif
call UnitRemoveAbility(udg_danwei2[67], 0x41305041)
call UnitRemoveBuffBJ(0x42303353, udg_danwei2[67])
call SetUnitTurnSpeed(udg_danwei2[67], GetUnitDefaultTurnSpeed(udg_danwei2[67]))
call ResetUnitAnimation(udg_danwei2[67])
call DisableTrigger(gg_trg_zhonglifeixing_1)
call DisableTrigger(gg_trg_zhonglifeixing_move)
call PauseTimer(udg_times[67])
endif
else
set udg_zhengshu2[68]=0
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei2[67]), 0, 0, 10.00, "TRIGSTR_8304")
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[67]), 0x4130494A, false)
if ( ( s__sys_isIn11() == true ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[67]), 0x41304949, true)
call SetUnitRescueRange(udg_danwei2[67], - 2)
else
set ydl_timer=CreateTimer()
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x62274AD0, udg_danwei2[67])
call TimerStart(ydl_timer, 1.00, false, function Trig_zhonglifeixing_moveFunc001Func005Func001T)
endif
call UnitRemoveAbility(udg_danwei2[67], 0x41305041)
call UnitRemoveBuffBJ(0x42303353, udg_danwei2[67])
call SetUnitTurnSpeed(udg_danwei2[67], GetUnitDefaultTurnSpeed(udg_danwei2[67]))
call ResetUnitAnimation(udg_danwei2[67])
call DisableTrigger(gg_trg_zhonglifeixing_1)
call DisableTrigger(gg_trg_zhonglifeixing_move)
call PauseTimer(udg_times[67])
endif
call FlushChildHashtable(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step)
set ydl_timer=null
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_zhonglifeixing_move takes nothing returns nothing
set gg_trg_zhonglifeixing_move=CreateTrigger()
call DisableTrigger(gg_trg_zhonglifeixing_move)
call TriggerRegisterTimerExpireEvent(gg_trg_zhonglifeixing_move, udg_times[67])
call TriggerAddAction(gg_trg_zhonglifeixing_move, function Trig_zhonglifeixing_moveActions)
endfunction
function Trig_shiliangfantan_1Actions takes nothing returns nothing
set udg_danwei[370]=GetTriggerUnit()
call AddSpecialEffectTargetUnitBJ("chest", udg_danwei[370], "war3mapImported\\defensive barrier big.mdx")
set udg_texiao[25]=bj_lastCreatedEffect
set udg_shishu2ex[2]=0.00
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei[370]), 0x41303835, false)
call UnitAddAbility(udg_danwei[370], 0x41304E58)
call EnableTrigger(gg_trg_shiliangfantan2)
set udg_buer2[336]=false
set udg_shishu2[340]=0.00
set udg_shishu2ex[1]=0.00
set udg_Zhengshu[177]=1
if ( ( GetTriggerExecCount(GetTriggeringTrigger()) == 1 ) ) then
call TriggerRegisterUnitEvent(gg_trg_shiliangfantan2, udg_danwei[370], EVENT_UNIT_DAMAGED)
else
endif
call StartTimerBJ(udg_times[101], false, 3.00)
endfunction
function InitTrig_shiliangfantan_1 takes nothing returns nothing
set gg_trg_shiliangfantan_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_shiliangfantan_1 , 3 , 0x41303835)
call TriggerAddAction(gg_trg_shiliangfantan_1, function Trig_shiliangfantan_1Actions)
endfunction
function Trig_shiliangfantan_1_5Actions takes nothing returns nothing
if ( ( GetUnitManaPercent(udg_danwei[370]) > 15.00 ) ) then
call StartTimerBJ(udg_times[101], false, ( TimerGetRemaining(udg_times[101]) + 3.00 ))
call SetUnitManaBJ(udg_danwei[370], ( GetUnitState(udg_danwei[370], UNIT_STATE_MANA) - ( GetUnitState(udg_danwei[370], UNIT_STATE_MAX_MANA) * 0.15 ) ))
else
call DisplayTimedTextToPlayer(GetOwningPlayer(udg_danwei[370]), 0, 0, 10.00, "TRIGSTR_5033")
endif
call StartTimerBJ(udg_Times[152], false, 0.10)
endfunction
function InitTrig_shiliangfantan_1_5 takes nothing returns nothing
set gg_trg_shiliangfantan_1_5=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_shiliangfantan_1_5 , 3 , 0x41304E58)
call TriggerAddAction(gg_trg_shiliangfantan_1_5, function Trig_shiliangfantan_1_5Actions)
endfunction
function Trig_shiliangfantan_1_6Actions takes nothing returns nothing
call UnitRemoveAbility(udg_danwei[370], 0x41304E58)
endfunction
function InitTrig_shiliangfantan_1_6 takes nothing returns nothing
set gg_trg_shiliangfantan_1_6=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_shiliangfantan_1_6, udg_Times[152])
call TriggerAddAction(gg_trg_shiliangfantan_1_6, function Trig_shiliangfantan_1_6Actions)
endfunction
function Trig_shiliangfantan_1_7Actions takes nothing returns nothing
set udg_Zhengshu[177]=0
endfunction
function InitTrig_shiliangfantan_1_7 takes nothing returns nothing
set gg_trg_shiliangfantan_1_7=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_shiliangfantan_1_7, udg_Times[177])
call TriggerAddAction(gg_trg_shiliangfantan_1_7, function Trig_shiliangfantan_1_7Actions)
endfunction
function Trig_shiliangfantan2Conditions takes nothing returns boolean
return ( ( GetEventDamage() > 0.00 ) )
endfunction
function Trig_shiliangfantan2Actions takes nothing returns nothing
if ( ( GetUnitState(udg_danwei[370], UNIT_STATE_MANA) > ( GetEventDamage() * 0.60 ) ) ) then
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1 ) <= 10 ) ) then
set udg_danwei[371]=udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1 )]
else
set udg_danwei[371]=GetEventDamageSource()
endif
if ( ( udg_shishu2ex[1] == 0.00 ) ) then
set udg_shishu2ex[1]=GetUnitState(udg_danwei[370], UNIT_STATE_LIFE)
call SetUnitLifePercentBJ(udg_danwei[370], 100)
call StartTimerBJ(udg_times[66], false, 0.00)
else
endif
call DisableTrigger(GetTriggeringTrigger())
call UnitDamageTarget(udg_danwei[370], udg_danwei[371], GetEventDamage(), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_UNIVERSAL, WEAPON_TYPE_WHOKNOWS)
call EnableTrigger(GetTriggeringTrigger())
call SetUnitManaBJ(udg_danwei[370], ( GetUnitState(udg_danwei[370], UNIT_STATE_MANA) - ( GetEventDamage() * 0.60 ) ))
set udg_shishu2[340]=( udg_shishu2[340] + GetEventDamage() )
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\DragonHawkMissile\\DragonHawkMissile.mdl", udg_danwei[371], "chest"))
set udg_danwei[371]=null
set udg_shishu2ex[2]=( udg_shishu2ex[2] + GetEventDamage() )
if ( ( udg_shishu2ex[2] > ( ( 125.00 * I2R(GetUnitAbilityLevel(udg_danwei[370], 0x41303835)) ) - 124.00 ) ) and ( udg_buer2[336] == false ) ) then
call CreateTextTagUnitBJ("TRIGSTR_3077", udg_danwei[370], 0, 12.00, 0.00, 75.00, 100, 0)
call SetTextTagVelocity(bj_lastCreatedTextTag, 0.00, 0.05)
call SetTextTagPermanent(bj_lastCreatedTextTag, false)
call SetTextTagFadepoint(bj_lastCreatedTextTag, 1.50)
call SetTextTagLifespan(bj_lastCreatedTextTag, 2.00)
call SetTextTagVisibility(bj_lastCreatedTextTag, false)
set udg_wanjiazu[0]=CreateForce()
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ( ( GetOwningPlayer(udg_danwei[370]) == s__baka_SPlayer(bj_forLoopAIndex - 1) ) ) then
call ForceAddPlayer(udg_wanjiazu[0], s__baka_SPlayer(bj_forLoopAIndex - 1))
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call ShowTextTagForceBJ(true, bj_lastCreatedTextTag, udg_wanjiazu[0])
call DestroyForce(udg_wanjiazu[0])
set udg_buer2[336]=true
else
endif
else
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei[370]), 0x41303835, true)
call UnitRemoveAbility(udg_danwei[370], 0x41304E58)
call PauseTimer(udg_times[101])
set udg_Zhengshu[177]=0
call DisableTrigger(gg_trg_shiliangfantan2)
call DestroyEffect(udg_texiao[25])
endif
endfunction
function InitTrig_shiliangfantan2 takes nothing returns nothing
set gg_trg_shiliangfantan2=CreateTrigger()
call DisableTrigger(gg_trg_shiliangfantan2)
call TriggerAddCondition(gg_trg_shiliangfantan2, Condition(function Trig_shiliangfantan2Conditions))
call TriggerAddAction(gg_trg_shiliangfantan2, function Trig_shiliangfantan2Actions)
endfunction
function Trig_shanghaimianyiActions takes nothing returns nothing
call SetUnitLifeBJ(udg_danwei[370], udg_shishu2ex[1])
set udg_shishu2ex[1]=0.00
endfunction
function InitTrig_shanghaimianyi takes nothing returns nothing
set gg_trg_shanghaimianyi=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_shanghaimianyi, udg_times[66])
call TriggerAddAction(gg_trg_shanghaimianyi, function Trig_shanghaimianyiActions)
endfunction
function Trig_shiliangfantan3Actions takes nothing returns nothing
call SetUnitInvulnerable(udg_danwei[370], false)
call UnitRemoveAbility(udg_danwei[370], 0x41304E58)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei[370]), 0x41303835, true)
if ( ( udg_buer2[336] == false ) ) then
set udg_zhengshu[102]=GetUnitAbilityLevel(udg_danwei[370], 0x41303835)
call UnitRemoveAbility(udg_danwei[370], 0x41303835)
call UnitAddAbility(udg_danwei[370], 0x41303835)
call SetUnitAbilityLevel(udg_danwei[370], 0x41303835, udg_zhengshu[102])
else
endif
set udg_Zhengshu[177]=0
call DisableTrigger(gg_trg_shiliangfantan2)
call DestroyEffect(udg_texiao[25])
endfunction
function InitTrig_shiliangfantan3 takes nothing returns nothing
set gg_trg_shiliangfantan3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_shiliangfantan3, udg_times[101])
call TriggerAddAction(gg_trg_shiliangfantan3, function Trig_shiliangfantan3Actions)
endfunction
function Trig_blood_1Actions takes nothing returns nothing
set udg_danwei2[62]=GetTriggerUnit()
set udg_danwei2[63]=GetSpellTargetUnit()
set udg_zhengshu2[62]=0
call StartTimerBJ(udg_times[62], true, 0.10)
set udg_dian2[0]=GetUnitLoc(udg_danwei2[62])
set udg_Danwei[37]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[62]), 0x65303649, udg_dian2[0], 270.00)
call SetUnitManaBJ(udg_Danwei[37], 255.00)
call SetUnitColor(udg_Danwei[37], PLAYER_COLOR_YELLOW)
call SetUnitTimeScale(udg_Danwei[37], ( 1.00 / 2.00 ))
call GroupAddUnit(udg_Danweizu[37], udg_Danwei[37])
set udg_Danwei[37]=null
call RemoveLocation(udg_dian2[0])
endfunction
function InitTrig_blood_1 takes nothing returns nothing
set gg_trg_blood_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_blood_1 , 3 , 0x41303833)
call TriggerAddAction(gg_trg_blood_1, function Trig_blood_1Actions)
endfunction
function Trig_blood_2Func003Func001A takes nothing returns nothing
set udg_Danwei[37]=GetEnumUnit()
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[37])) + 1 ) == ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[62])) + 1 ) ) ) then
if ( ( udg_zhengshu2[62] >= 20 ) ) then
call SetUnitColor(udg_Danwei[37], PLAYER_COLOR_RED)
else
call SetUnitColor(udg_Danwei[37], PLAYER_COLOR_LIGHT_GRAY)
endif
call SetUnitTimeScale(udg_Danwei[37], 0.00)
call SetUnitManaBJ(udg_Danwei[37], 250.00)
else
endif
set udg_Danwei[37]=null
endfunction
function Trig_blood_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu2[62]=( udg_zhengshu2[62] + 1 )
set udg_dian2[0]=GetUnitLoc(udg_danwei2[63])
if ( ( udg_zhengshu2[62] < 20 ) and ( UnitHasBuffBJ(udg_danwei2[63], 0x42303136) == true ) and ( IsUnitType(udg_danwei2[62], UNIT_TYPE_DEAD) == false ) and ( IsUnitType(udg_danwei2[63], UNIT_TYPE_DEAD) == false ) ) then
call SetUnitLifeBJ(udg_danwei2[63], RMaxBJ(( GetUnitState(udg_danwei2[63], UNIT_STATE_LIFE) - ( 5.00 + ( 5.00 * I2R(GetUnitAbilityLevel(udg_danwei2[62], 0x41303833)) ) ) ), 1.00))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodSorceress.mdl", udg_dian2[0]))
else
call ForGroupBJ(udg_Danweizu[37], function Trig_blood_2Func003Func001A)
if ( ( udg_zhengshu2[62] >= 20 ) ) then
set udg_aXUNHUAN[142]=1
loop
exitwhen udg_aXUNHUAN[142] > ( 11 - R2I(( GetUnitLifePercent(udg_danwei2[63]) / 10.00 )) )
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Human\\HumanLargeDeathExplode\\HumanLargeDeathExplode.mdl", udg_dian2[0]))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", udg_dian2[0]))
set udg_aXUNHUAN[142]=udg_aXUNHUAN[142] + 1
endloop
call UnitDamageTarget(udg_danwei2[62], udg_danwei2[63], ( ( GetUnitState(udg_danwei2[63], UNIT_STATE_MAX_LIFE) - GetUnitState(udg_danwei2[63], UNIT_STATE_LIFE) ) * 0.40 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
call UnitDamageTarget(udg_danwei2[62], udg_danwei2[63], ( ( GetUnitState(udg_danwei2[63], UNIT_STATE_MAX_LIFE) - GetUnitState(udg_danwei2[63], UNIT_STATE_LIFE) ) * 0.20 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
if ( ( IsUnitType(udg_danwei2[63], UNIT_TYPE_DEAD) == true ) ) then
set udg_aXUNHUAN[143]=1
loop
exitwhen udg_aXUNHUAN[143] > 5
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Human\\HumanLargeDeathExplode\\HumanLargeDeathExplode.mdl", udg_dian2[0]))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", udg_dian2[0]))
set udg_aXUNHUAN[143]=udg_aXUNHUAN[143] + 1
endloop
else
set udg_aXUNHUAN[144]=1
loop
exitwhen udg_aXUNHUAN[144] > ( 6 - R2I(( GetUnitLifePercent(udg_danwei2[63]) / 20.00 )) )
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Human\\HumanLargeDeathExplode\\HumanLargeDeathExplode.mdl", udg_dian2[0]))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", udg_dian2[0]))
set udg_aXUNHUAN[144]=udg_aXUNHUAN[144] + 1
endloop
endif
endif
call PauseTimer(udg_times[62])
call IssueImmediateOrderById(udg_danwei2[62], 851972)
call UnitRemoveBuffBJ(0x42303136, udg_danwei2[63])
set udg_danwei2[62]=null
set udg_danwei2[63]=null
endif
call RemoveLocation(udg_dian2[0])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_blood_2 takes nothing returns nothing
set gg_trg_blood_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_blood_2, udg_times[62])
call TriggerAddAction(gg_trg_blood_2, function Trig_blood_2Actions)
endfunction
function Trig_dongliangchongji_1Actions takes nothing returns nothing
set udg_danwei[375]=GetTriggerUnit()
set udg_danwei[376]=GetSpellTargetUnit()
call PlaySoundOnUnitBJ(gg_snd_yifangw2, 100, udg_danwei[375])
set udg_dian[287]=GetSpellTargetLoc()
set udg_dian[288]=GetUnitLoc(udg_danwei[375])
set udg_dian[289]=GetUnitLoc(udg_danwei[376])
set udg_zhengshu[102]=0
if ( ( ( udg_danwei[376] == null ) or ( udg_danwei[376] == udg_danwei[375] ) ) ) then
set udg_danweizu[72]=CreateGroup()
set udg_zhengshu2[64]=0
call StartTimerBJ(udg_times[64], true, 0.02)
else
set udg_zhengshu2[65]=0
call StartTimerBJ(udg_times[65], true, 0.04)
endif
endfunction
function InitTrig_dongliangchongji_1 takes nothing returns nothing
set gg_trg_dongliangchongji_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_dongliangchongji_1 , 3 , 0x41303832)
call TriggerAddAction(gg_trg_dongliangchongji_1, function Trig_dongliangchongji_1Actions)
endfunction
function Trig_dongliangchongji_2AFunc002Func016A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei[375])) == true ) ) then
set udg_dian2[2]=GetUnitLoc(udg_danwei2[1])
set udg_dian2[3]=PolarProjectionBJ(udg_dian2[2], 30.00, AngleBetweenPoints(udg_dian2[2], udg_dian[287]))
if ( ( IsTerrainPathableBJ(udg_dian2[3], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[3]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[3]))
call IssueImmediateOrderById(udg_danwei2[1], 851972)
else
endif
if ( ( IsUnitInGroup(udg_danwei2[1], udg_danweizu[72]) == false ) ) then
call UnitDamageTarget(udg_danwei[375], udg_danwei2[1], ( ( I2R(GetHeroInt(udg_danwei[375], true)) + 40.00 ) + ( 40.00 * I2R(GetUnitAbilityLevel(udg_danwei[375], 0x41303832)) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call GroupAddUnit(udg_danweizu[72], udg_danwei2[1])
else
endif
call RemoveLocation(udg_dian2[2])
call RemoveLocation(udg_dian2[3])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_dongliangchongji_2AActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu2[64]=( udg_zhengshu2[64] + 1 )
if ( ( udg_zhengshu2[64] < 30 ) ) then
if ( ( udg_zhengshu2[64] < 20 ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian[288], ( 16.00 * I2R(udg_zhengshu2[64]) ), ( AngleBetweenPoints(udg_dian[288], udg_dian[287]) + ( 35.00 * I2R(udg_zhengshu2[64]) ) ))
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[375]), 0x65303334, udg_dian2[1], ( AngleBetweenPoints(udg_dian[288], udg_dian[287]) + ( 40.00 * I2R(udg_zhengshu2[64]) ) ))
call UnitApplyTimedLife(udg_danwei2[0], 0x42487765, 0.05)
set udg_danwei2[0]=null
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Orc\\EarthQuake\\EarthQuakeTarget.mdl", udg_dian2[1]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", udg_dian2[1]))
else
set udg_dian2[0]=PolarProjectionBJ(udg_dian[288], ( ( DistanceBetweenPoints(udg_dian[288], udg_dian[287]) / 10.00 ) * ( I2R(udg_zhengshu2[64]) - 20.00 ) ), AngleBetweenPoints(udg_dian[288], udg_dian[287]))
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], ( 800.00 - ( 24.00 * I2R(udg_zhengshu2[64]) ) ), ( DistanceBetweenPoints(udg_dian[288], udg_dian[287]) + ( 35.00 * I2R(udg_zhengshu2[64]) ) ))
call RemoveLocation(udg_dian2[0])
endif
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[375]), 0x65303334, udg_dian2[1], ( AngleBetweenPoints(udg_dian[288], udg_dian[287]) + ( 40.00 * I2R(udg_zhengshu2[64]) ) ))
call UnitApplyTimedLife(udg_danwei2[0], 0x42487765, 0.05)
set udg_danwei2[0]=null
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Orc\\EarthQuake\\EarthQuakeTarget.mdl", udg_dian2[1]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", udg_dian2[1]))
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(150.00 , udg_dian2[1])
call ForGroupBJ(udg_xuanqu, function Trig_dongliangchongji_2AFunc002Func016A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[1])
else
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\Volcano\\VolcanoDeath.mdl", udg_dian[287]))
call DestroyGroup(udg_danweizu[72])
call PauseTimer(udg_times[64])
set udg_danwei[375]=null
set udg_danwei[376]=null
call RemoveLocation(udg_dian[287])
call RemoveLocation(udg_dian[288])
call RemoveLocation(udg_dian[289])
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_dongliangchongji_2A takes nothing returns nothing
set gg_trg_dongliangchongji_2A=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_dongliangchongji_2A, udg_times[64])
call TriggerAddAction(gg_trg_dongliangchongji_2A, function Trig_dongliangchongji_2AActions)
endfunction
function Trig_dongliangchongji_2BFunc003Func006A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( udg_danwei2[1] != udg_danwei[375] ) and ( udg_danwei2[1] != udg_danwei[376] ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) ) then
set udg_zhengshu2[65]=- 1
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_dongliangchongji_2BFunc003Func008A takes nothing returns nothing
if ( ( IsDestructableDeadBJ(GetEnumDestructable()) == false ) ) then
set udg_zhengshu2[65]=- 1
else
endif
endfunction
function Trig_dongliangchongji_2BFunc004Func005A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei[375])) == true ) ) then
call UnitDamageTarget(udg_danwei[375], udg_danwei2[1], ( ( I2R(GetHeroInt(udg_danwei[375], true)) + 40.00 ) + ( 40.00 * I2R(GetUnitAbilityLevel(udg_danwei[375], 0x41303832)) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_dongliangchongji_2BActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu2[65]=( udg_zhengshu2[65] + 1 )
set udg_dian2[0]=GetUnitLoc(udg_danwei[376])
if ( ( udg_zhengshu2[65] < 15 ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 50.00, AngleBetweenPoints(udg_dian[288], udg_dian[289]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", udg_dian2[1]))
if ( ( udg_zhengshu2[65] == 1 ) ) then
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[375]), 0x65303335, udg_dian2[0], AngleBetweenPoints(udg_dian[288], udg_dian[289]))
call UnitApplyTimedLife(udg_danwei2[0], 0x42487765, 0.80)
set udg_danwei2[0]=null
call UnitDamageTarget(udg_danwei[375], udg_danwei[376], ( I2R(GetHeroInt(udg_danwei[375], true)) * 3.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl", udg_danwei[376], "chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\StormBolt\\StormBoltMissile.mdl", udg_danwei[376], "chest"))
else
endif
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitPositionLoc(udg_danwei[376], udg_dian2[1])
else
set udg_zhengshu2[65]=- 1
endif
set udg_danweizu[72]=YDWEGetUnitsInRangeOfLocAllNull(100.00 , udg_dian2[1])
call ForGroupBJ(udg_danweizu[72], function Trig_dongliangchongji_2BFunc003Func006A)
call DestroyGroup(udg_danweizu[72])
call YDWEEnumDestructablesInCircleBJNull(100.00 , udg_dian2[1] , function Trig_dongliangchongji_2BFunc003Func008A)
call RemoveLocation(udg_dian2[1])
else
call PauseTimer(udg_times[65])
set udg_danwei[375]=null
set udg_danwei[376]=null
call RemoveLocation(udg_dian[287])
call RemoveLocation(udg_dian[288])
call RemoveLocation(udg_dian[289])
endif
if ( ( udg_zhengshu2[65] == - 1 ) ) then
set udg_zhengshu2[65]=20
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=3
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 75.00, ( 120.00 * I2R(bj_forLoopAIndex) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Orc\\EarthQuake\\EarthQuakeTarget.mdl", udg_dian2[1]))
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[375]), 0x65303334, udg_dian2[1], ( 120.00 * I2R(bj_forLoopAIndex) ))
call UnitApplyTimedLife(udg_danwei2[0], 0x42487765, 0.05)
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[1])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\Volcano\\VolcanoDeath.mdl", udg_dian2[0]))
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(300.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_dongliangchongji_2BFunc004Func005A)
call DestroyGroup(udg_xuanqu)
else
endif
call RemoveLocation(udg_dian2[0])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_dongliangchongji_2B takes nothing returns nothing
set gg_trg_dongliangchongji_2B=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_dongliangchongji_2B, udg_times[65])
call TriggerAddAction(gg_trg_dongliangchongji_2B, function Trig_dongliangchongji_2BActions)
endfunction
function Trig_doom_1Actions takes nothing returns nothing
set udg_danwei2[69]=GetSpellAbilityUnit()
set udg_danwei2[70]=GetSpellTargetUnit()
set udg_danweizu2[69]=CreateGroup()
set udg_zhengshu2[69]=0
set udg_zhengshu2[70]=0
call UnitShareVision(udg_danwei2[70], GetOwningPlayer(udg_danwei2[69]), true)
call PlaySoundOnUnitBJ(gg_snd_ShimmeringPortalBirth, 100, udg_danwei2[69])
call StartTimerBJ(udg_times[69], true, 0.03)
call DisableTrigger(gg_trg_zhonglifeixing_2)
call DisableTrigger(gg_trg_zhonglifeixing_3)
set udg_dian2[0]=GetUnitLoc(udg_danwei2[69])
set udg_Danwei[37]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[69]), 0x65303649, udg_dian2[0], 270.00)
call SetUnitManaBJ(udg_Danwei[37], 255.00)
call SetUnitColor(udg_Danwei[37], PLAYER_COLOR_LIGHT_GRAY)
call SetUnitTimeScale(udg_Danwei[37], ( 1.00 / 5.00 ))
call GroupAddUnit(udg_Danweizu[37], udg_Danwei[37])
set udg_Danwei[37]=null
call RemoveLocation(udg_dian2[0])
set udg_danwei2[68]=null
call PauseTimer(udg_times[67])
endfunction
function InitTrig_doom_1 takes nothing returns nothing
set gg_trg_doom_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_doom_1 , 3 , 0x41303839)
call TriggerAddAction(gg_trg_doom_1, function Trig_doom_1Actions)
endfunction
function Trig_doom_2Func005Func004Func002A takes nothing returns nothing
set udg_Danwei[37]=GetEnumUnit()
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[37])) + 1 ) == ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[69])) + 1 ) ) ) then
call SetUnitColor(udg_Danwei[37], PLAYER_COLOR_CYAN)
else
endif
set udg_Danwei[37]=null
endfunction
function Trig_doom_2Func005Func005A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_DEAD) == false ) ) then
set udg_dian2[1]=GetUnitLoc(udg_danwei2[0])
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) >= 50.00 ) ) then
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) - 16.00 ), ( AngleBetweenPoints(udg_dian2[0], udg_dian2[1]) - 7.00 ))
else
call SetUnitTimeScale(udg_danwei2[0], 1.00)
set udg_dian2[2]=GetUnitLoc(udg_danwei2[69])
endif
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[2]))
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
else
call GroupRemoveUnit(udg_danweizu2[69], udg_danwei2[0])
call RemoveUnit(udg_danwei2[0])
endif
set udg_danwei2[0]=null
endfunction
function Trig_doom_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu2[69]=( udg_zhengshu2[69] + 1 )
set udg_dian2[0]=GetUnitLoc(udg_danwei2[69])
set udg_dian2[3]=GetUnitLoc(udg_danwei2[70])
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[3]) >= 1500.00 ) ) then
call IssueImmediateOrderById(udg_danwei2[69], 851972)
else
call SetUnitFacing(udg_danwei2[69], AngleBetweenPoints(udg_dian2[0], udg_dian2[3]))
endif
if ( ( udg_zhengshu2[69] >= 20 ) ) then
set udg_zhengshu2[70]=( udg_zhengshu2[70] + 1 )
if ( ( udg_zhengshu2[70] == 3 ) ) then
set udg_zhengshu2[70]=0
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], GetRandomReal(300.00, 500.00), GetRandomReal(0, 360.00))
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[69]), 0x65303336, udg_dian2[1], AngleBetweenPoints(udg_dian2[1], udg_dian2[0]))
call UnitApplyTimedLife(udg_danwei2[0], 0x42487765, 1.25)
call SetUnitTimeScale(udg_danwei2[0], 0.05)
call SetUnitScale(udg_danwei2[0], ( 0.60 + ( 0.03 * I2R(udg_zhengshu2[69]) ) ), ( 0.60 + ( 0.03 * I2R(udg_zhengshu2[69]) ) ), ( 0.60 + ( 0.03 * I2R(udg_zhengshu2[69]) ) ))
call s__maphack_SetHeight(udg_danwei2[0] , GetRandomReal(0.00, 600.00) , 0.00)
call s__maphack_SetHeight(udg_danwei2[0] , 300.00 , 600.00)
call GroupAddUnit(udg_danweizu2[69], udg_danwei2[0])
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[1])
else
endif
if ( ( udg_zhengshu2[69] == 40 ) ) then
call ForGroupBJ(udg_Danweizu[37], function Trig_doom_2Func005Func004Func002A)
else
endif
call ForGroupBJ(udg_danweizu2[69], function Trig_doom_2Func005Func005A)
else
endif
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[3])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_doom_2 takes nothing returns nothing
set gg_trg_doom_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_doom_2, udg_times[69])
call TriggerAddAction(gg_trg_doom_2, function Trig_doom_2Actions)
endfunction
function Trig_doom_3Func004A takes nothing returns nothing
set udg_Danwei[37]=GetEnumUnit()
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[37])) + 1 ) == ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[69])) + 1 ) ) ) then
call SetUnitTimeScale(udg_Danwei[37], 0.00)
call SetUnitManaBJ(udg_Danwei[37], 250.00)
else
endif
set udg_Danwei[37]=null
endfunction
function Trig_doom_3Func005Func009A takes nothing returns nothing
set udg_Danwei[21]=GetEnumUnit()
call SetUnitX(udg_Danwei[21], GetLocationX(udg_Dian[21]))
call SetUnitY(udg_Danwei[21], GetLocationY(udg_Dian[21]))
call SetUnitScale(udg_Danwei[21], 10.00, 10.00, 10.00)
set udg_Danwei[21]=null
endfunction
function Trig_doom_3Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call DisableTrigger(GetTriggeringTrigger())
call PauseTimer(udg_times[69])
set udg_zhengshu2[70]=0
call ForGroupBJ(udg_Danweizu[37], function Trig_doom_3Func004A)
if ( ( udg_zhengshu2[69] >= 40 ) ) then
call StopSoundBJ(gg_snd_ShimmeringPortalBirth, false)
call PlaySoundOnUnitBJ(gg_snd_NightElfBuildingDeathLarge1, 100, udg_danwei2[69])
call StartTimerBJ(udg_times[70], true, 0.04)
set udg_Dian[21]=GetUnitLoc(udg_danwei2[70])
call ForGroupBJ(udg_danweizu2[69], function Trig_doom_3Func005Func009A)
call GroupClear(udg_danweizu2[69])
call DestroyGroup(udg_danweizu2[69])
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl", udg_Dian[21]))
set udg_aXUNHUAN[145]=1
loop
exitwhen udg_aXUNHUAN[145] > 4
set udg_aXUNHUAN[146]=1
loop
exitwhen udg_aXUNHUAN[146] > ( 6 + ( 2 * udg_aXUNHUAN[145] ) )
set udg_Dian[22]=PolarProjectionBJ(udg_Dian[21], ( 100.00 * I2R(udg_aXUNHUAN[145]) ), ( ( 360.00 / ( 6.00 + ( I2R(udg_aXUNHUAN[145]) * 2.00 ) ) ) * I2R(udg_aXUNHUAN[146]) ))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl", udg_Dian[22]))
call RemoveLocation(udg_Dian[22])
set udg_aXUNHUAN[146]=udg_aXUNHUAN[146] + 1
endloop
set udg_Danwei[21]=CreateUnit(GetOwningPlayer(udg_danwei2[69]), 0x65303039, GetLocationX(udg_Dian[21]), GetLocationY(udg_Dian[21]), 0.00)
call UnitApplyTimedLife(udg_Danwei[21], 0x42487765, 0.50)
set udg_Danwei[21]=null
set udg_aXUNHUAN[145]=udg_aXUNHUAN[145] + 1
endloop
call RemoveLocation(udg_Dian[21])
else
call UnitShareVision(udg_danwei2[70], GetOwningPlayer(udg_danwei2[69]), false)
set udg_danwei2[69]=null
set udg_danwei2[70]=null
endif
call EnableTrigger(GetTriggeringTrigger())
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_doom_3 takes nothing returns nothing
set gg_trg_doom_3=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_doom_3 , 4 , 0x41303839)
call s__Event_AnyUnitSkill(gg_trg_doom_3 , 5 , 0x41303839)
call TriggerAddAction(gg_trg_doom_3, function Trig_doom_3Actions)
endfunction
function Trig_doom_4Func004Func006A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[69])) == true ) ) then
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
if ( ( udg_danwei2[1] == udg_danwei2[70] ) ) then
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], 25.00, AngleBetweenPoints(udg_dian2[3], udg_dian2[0]))
else
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], 25.00, AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
endif
call UnitDamageTarget(udg_danwei2[69], udg_danwei2[1], ( ( 0.01 * 0.30 ) * ( I2R(GetHeroInt(udg_danwei2[69], true)) * ( 68.00 + ( I2R(udg_zhengshu2[69]) * 0.80 ) ) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
if ( ( IsTerrainPathableBJ(udg_dian2[2], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitPositionLoc(udg_danwei2[1], udg_dian2[2])
else
endif
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_doom_4Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu2[70]=( udg_zhengshu2[70] + 1 )
set udg_dian2[0]=GetUnitLoc(udg_danwei2[70])
set udg_dian2[3]=GetUnitLoc(udg_danwei2[69])
if ( ( udg_zhengshu2[70] <= 20 ) ) then
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(500.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_doom_4Func004Func006A)
call DestroyGroup(udg_xuanqu)
else
call UnitShareVision(udg_danwei2[70], GetOwningPlayer(udg_danwei2[69]), false)
call PauseTimer(udg_times[70])
set udg_danwei2[69]=null
set udg_danwei2[70]=null
endif
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[3])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_doom_4 takes nothing returns nothing
set gg_trg_doom_4=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_doom_4, udg_times[70])
call TriggerAddAction(gg_trg_doom_4, function Trig_doom_4Actions)
endfunction
function Trig_dierjiefang_1Actions takes nothing returns nothing
set udg_danwei[400]=GetTriggerUnit()
set udg_dian[300]=GetUnitLoc(udg_danwei[400])
call SetSoundPosition(gg_snd_linaliR3, GetLocationX(udg_dian[300]), GetLocationY(udg_dian[300]), 300.00)
call PlaySoundBJ(gg_snd_linaliR3)
call AddSpecialEffectTargetUnitBJ("origin", udg_danwei[400], "war3mapImported\\EnergyHands.mdx")
set udg_texiao[50]=bj_lastCreatedEffect
if ( ( IsUnitVisible(udg_danwei[400], GetLocalPlayer()) == true ) ) then
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\ForestBolt.mdx", udg_dian[300]))
else
call DestroyEffect(AddSpecialEffectLoc("", udg_dian[300]))
endif
call UnitAddAbility(udg_danwei[400], 0x41726176)
call UnitRemoveAbility(udg_danwei[400], 0x41726176)
call EnableTrigger(gg_trg_dierjiefang_2)
call EnableTrigger(gg_trg_dierjiefang_2_5)
call StartTimerBJ(udg_jishiqi[120], true, 0.02)
set udg_zhengshu2[284]=0
set udg_zhengshu2[285]=0
set udg_dian2[284]=GetUnitLoc(udg_danwei[400])
call RemoveLocation(udg_dian[300])
set udg_piaofuwenzi[7]=CreateTextTag()
call SetTextTagTextBJ(udg_piaofuwenzi[7], ( "第二解放：" + R2SW(( ( ( 201.00 + ( 100.00 * I2R(GetUnitAbilityLevel(udg_danwei[400], 0x41304447)) ) ) - I2R(udg_zhengshu2[284]) ) * 0.02 ), 1, 1) ), 11.00)
call SetTextTagPos(udg_piaofuwenzi[7], ( GetUnitX(udg_danwei[400]) - 60.00 ), GetUnitY(udg_danwei[400]), ( s__maphack_GetHeight(udg_danwei[400]) + 200.00 ))
call SetTextTagColor(udg_piaofuwenzi[7], 0, 200, 255, 255)
call SetTextTagVisibility(udg_piaofuwenzi[7], false)
set udg_wanjiazu[0]=CreateForce()
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ( ( IsUnitAlly(udg_danwei[400], s__baka_SPlayer(bj_forLoopAIndex - 1)) == true ) ) then
call ForceAddPlayer(udg_wanjiazu[0], s__baka_SPlayer(bj_forLoopAIndex - 1))
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call ShowTextTagForceBJ(true, udg_piaofuwenzi[7], udg_wanjiazu[0])
call DestroyForce(udg_wanjiazu[0])
endfunction
function InitTrig_dierjiefang_1 takes nothing returns nothing
set gg_trg_dierjiefang_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_dierjiefang_1 , 3 , 0x41304447)
call TriggerAddAction(gg_trg_dierjiefang_1, function Trig_dierjiefang_1Actions)
endfunction
function Trig_dierjiefang_2Conditions takes nothing returns boolean
return ( ( GetAttacker() == udg_danwei[400] ) )
endfunction
function Trig_dierjiefang_2Actions takes nothing returns nothing
if ( ( ( udg_danwei[402] == null ) or ( GetAttackedUnitBJ() != udg_danwei[402] ) ) and ( IsUnitEnemy(GetAttackedUnitBJ(), GetOwningPlayer(udg_danwei[400])) == true ) ) then
set udg_danwei[402]=GetAttackedUnitBJ()
set udg_zhengshu[110]=0
call StartTimerBJ(udg_jishiqi[121], false, 0.20)
else
endif
endfunction
function InitTrig_dierjiefang_2 takes nothing returns nothing
set gg_trg_dierjiefang_2=CreateTrigger()
call DisableTrigger(gg_trg_dierjiefang_2)
call TriggerRegisterAnyUnitEventBJ(gg_trg_dierjiefang_2, EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(gg_trg_dierjiefang_2, Condition(function Trig_dierjiefang_2Conditions))
call TriggerAddAction(gg_trg_dierjiefang_2, function Trig_dierjiefang_2Actions)
endfunction
function Trig_dierjiefang_2_5Conditions takes nothing returns boolean
return ( ( GetTriggerUnit() == udg_danwei[400] ) )
endfunction
function Trig_dierjiefang_2_5Actions takes nothing returns nothing
call PauseTimer(udg_jishiqi[121])
set udg_danwei[402]=null
set udg_zhengshu[110]=0
endfunction
function InitTrig_dierjiefang_2_5 takes nothing returns nothing
set gg_trg_dierjiefang_2_5=CreateTrigger()
call DisableTrigger(gg_trg_dierjiefang_2_5)
call TriggerRegisterAnyUnitEventBJ(gg_trg_dierjiefang_2_5, EVENT_PLAYER_UNIT_DEATH)
call TriggerRegisterAnyUnitEventBJ(gg_trg_dierjiefang_2_5, EVENT_PLAYER_UNIT_ISSUED_ORDER)
call TriggerRegisterAnyUnitEventBJ(gg_trg_dierjiefang_2_5, EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)
call TriggerRegisterAnyUnitEventBJ(gg_trg_dierjiefang_2_5, EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(gg_trg_dierjiefang_2_5, Condition(function Trig_dierjiefang_2_5Conditions))
call TriggerAddAction(gg_trg_dierjiefang_2_5, function Trig_dierjiefang_2_5Actions)
endfunction
function Trig_dierjiefang_3Actions takes nothing returns nothing
set udg_zhengshu[110]=( udg_zhengshu[110] + 1 )
set udg_dian[300]=GetUnitLoc(udg_danwei[400])
set udg_dian[304]=GetUnitLoc(udg_danwei[402])
if ( ( udg_danwei[402] != null ) and ( IsUnitPausedBJ(udg_danwei[400]) == false ) and ( IsUnitType(udg_danwei[400], UNIT_TYPE_DEAD) == false ) and ( IsUnitType(udg_danwei[402], UNIT_TYPE_DEAD) == false ) and ( udg_zhengshu2[284] <= ( 200 + ( 100 * GetUnitAbilityLevel(udg_danwei[400], 0x41304447) ) ) ) and ( DistanceBetweenPoints(udg_dian[300], udg_dian[304]) <= 400.00 ) ) then
set udg_dian[302]=PolarProjectionBJ(udg_dian[304], GetRandomReal(75.00, 200.00), GetRandomReal(0, 360.00))
call SetUnitX(udg_danwei[400], GetLocationX(udg_dian[302]))
call SetUnitY(udg_danwei[400], GetLocationY(udg_dian[302]))
call s__maphack_SetHeight(udg_danwei[400] , GetRandomReal(150.00, 300.00) , 0.00)
if ( ( IsUnitVisible(udg_danwei[400], GetLocalPlayer()) == true ) ) then
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\NightElf\\Blink\\BlinkCaster.mdl", udg_dian[304]))
else
call DestroyEffect(AddSpecialEffectLoc("", udg_dian[304]))
endif
if ( ( IsUnitType(udg_danwei[402], UNIT_TYPE_STRUCTURE) == true ) ) then
call UnitDamageTarget(udg_danwei[400], udg_danwei[402], ( GetRandomReal(0.45, 0.55) * ( ( ( I2R(GetHeroAgi(udg_danwei[400], true)) * 0.08 ) + ( 2.50 * I2R(GetUnitAbilityLevel(udg_danwei[400], 0x41304447)) ) ) * 1.00 ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call UnitDamageTarget(udg_danwei[400], udg_danwei[402], ( GetRandomReal(0.45, 0.55) * ( ( ( I2R(GetHeroAgi(udg_danwei[400], true)) * 0.08 ) + ( 2.50 * I2R(GetUnitAbilityLevel(udg_danwei[400], 0x41304447)) ) ) * 1.00 ) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)
else
call UnitDamageTarget(udg_danwei[400], udg_danwei[402], ( GetRandomReal(0.45, 0.55) * ( ( ( I2R(GetHeroAgi(udg_danwei[400], true)) * 0.15 ) + ( 5.00 * I2R(GetUnitAbilityLevel(udg_danwei[400], 0x41304447)) ) ) * 1.00 ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call UnitDamageTarget(udg_danwei[400], udg_danwei[402], ( GetRandomReal(0.45, 0.55) * ( ( ( I2R(GetHeroAgi(udg_danwei[400], true)) * 0.15 ) + ( 5.00 * I2R(GetUnitAbilityLevel(udg_danwei[400], 0x41304447)) ) ) * 1.00 ) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS)
endif
call StopSoundBJ(gg_snd_MetalHeavyChopFlesh3, false)
call PlaySoundOnUnitBJ(gg_snd_MetalHeavyChopFlesh3, 100, udg_danwei[400])
call StartTimerBJ(udg_jishiqi[121], false, ( 0.20 - ( 0.01 * RMinBJ(I2R(udg_zhengshu[110]), 10.00) ) ))
call RemoveLocation(udg_dian[302])
else
call PauseTimer(udg_jishiqi[121])
set udg_danwei[402]=null
set udg_zhengshu[110]=0
endif
call RemoveLocation(udg_dian[304])
call RemoveLocation(udg_dian[300])
endfunction
function InitTrig_dierjiefang_3 takes nothing returns nothing
set gg_trg_dierjiefang_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_dierjiefang_3, udg_jishiqi[121])
call TriggerAddAction(gg_trg_dierjiefang_3, function Trig_dierjiefang_3Actions)
endfunction
function Trig_dierjiefang_4Func003Func009A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
call KillUnit(udg_danwei2[0])
set udg_danwei2[0]=null
endfunction
function Trig_dierjiefang_4Func003Func012Func004A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
if ( ( ( ( udg_zhengshu[110] > 0 ) and ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) > 0.00 ) ) or ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) > 25.00 ) ) ) then
call SetUnitManaBJ(udg_danwei2[0], ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) - 1 ))
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) + 15 ))
call SetUnitFacing(udg_danwei2[0], ( I2R(GetUnitUserData(udg_danwei2[0])) + 90.00 ))
if ( ( udg_zhengshu[110] > 0 ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[285], ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) * 10.00 ), I2R(GetUnitUserData(udg_danwei2[0])))
else
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[285], ( ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) - 30.00 ) * 10.00 ), I2R(GetUnitUserData(udg_danwei2[0])))
endif
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
call s__maphack_SetHeight(udg_danwei2[0] , ( s__maphack_GetHeight(udg_danwei[400]) + 50.00 ) , 0.00)
call RemoveLocation(udg_dian2[1])
else
call KillUnit(udg_danwei2[0])
call GroupRemoveUnit(udg_danweizu2[284], udg_danwei2[0])
endif
set udg_danwei2[0]=null
endfunction
function Trig_dierjiefang_4Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( IsUnitPausedBJ(udg_danwei[400]) == false ) ) then
if ( ( udg_zhengshu[110] > 0 ) ) then
set udg_zhengshu2[284]=IMinBJ(( udg_zhengshu2[284] + 1 ), ( 200 + ( 100 * GetUnitAbilityLevel(udg_danwei[400], 0x41304447) ) ))
else
set udg_zhengshu2[284]=( udg_zhengshu2[284] + 1 )
endif
call SetTextTagTextBJ(udg_piaofuwenzi[7], ( "第二解放：" + R2SW(( ( ( 201.00 + ( 100.00 * I2R(GetUnitAbilityLevel(udg_danwei[400], 0x41304447)) ) ) - I2R(udg_zhengshu2[284]) ) * 0.02 ), 1, 1) ), 11.00)
call SetTextTagPos(udg_piaofuwenzi[7], ( GetUnitX(udg_danwei[400]) - 60.00 ), GetUnitY(udg_danwei[400]), ( s__maphack_GetHeight(udg_danwei[400]) + 200.00 ))
else
endif
set udg_zhengshu2[285]=( udg_zhengshu2[285] + 1 )
if ( ( udg_zhengshu2[284] <= ( 200 + ( 100 * GetUnitAbilityLevel(udg_danwei[400], 0x41304447) ) ) ) and ( IsUnitType(udg_danwei[400], UNIT_TYPE_DEAD) == false ) ) then
if ( ( UnitHasBuffBJ(udg_danwei[400], 0x42707267) == false ) ) then
set udg_dian2[285]=GetUnitLoc(udg_danwei[400])
call s__maphack_SetHeight(udg_danwei[400] , ( s__maphack_GetHeight(udg_danwei[400]) - 15.00 ) , 0.00)
if ( ( DistanceBetweenPoints(udg_dian2[284], udg_dian2[285]) <= ( GetUnitMoveSpeed(udg_danwei[400]) * ( 0.02 * 1.10 ) ) ) and ( DistanceBetweenPoints(udg_dian2[284], udg_dian2[285]) >= ( GetUnitMoveSpeed(udg_danwei[400]) * ( 0.02 * 0.90 ) ) ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[285], 15.00, AngleBetweenPoints(udg_dian2[284], udg_dian2[285]))
call SetUnitX(udg_danwei[400], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei[400], GetLocationY(udg_dian2[1]))
call RemoveLocation(udg_dian2[1])
else
endif
else
endif
if ( ( udg_buer2[284] == true ) ) then
set udg_buer2[284]=false
call ForGroupBJ(udg_danweizu2[284], function Trig_dierjiefang_4Func003Func012Func004A)
else
set udg_buer2[284]=true
endif
if ( ( udg_zhengshu2[285] == 5 ) ) then
set udg_zhengshu2[285]=0
if ( ( udg_zhengshu[110] > 0 ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[285], 500.00, ( I2R(udg_zhengshu2[284]) * 21.00 ))
else
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[285], 200.00, ( I2R(udg_zhengshu2[284]) * 21.00 ))
endif
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[400]), 0x65303536, udg_dian2[1], ( AngleBetweenPoints(udg_dian2[285], udg_dian2[1]) + 90.00 ))
call SetUnitManaBJ(udg_danwei2[1], 50.00)
call SetUnitUserData(udg_danwei2[1], R2I(AngleBetweenPoints(udg_dian2[285], udg_dian2[1])))
call s__maphack_SetHeight(udg_danwei2[1] , ( s__maphack_GetHeight(udg_danwei[400]) + 50.00 ) , 0.00)
call GroupAddUnit(udg_danweizu2[284], udg_danwei2[1])
set udg_danwei2[1]=null
else
endif
call RemoveLocation(udg_dian2[284])
call RemoveLocation(udg_dian2[285])
set udg_dian2[284]=GetUnitLoc(udg_danwei[400])
else
set udg_zhengshu2[284]=0
set udg_zhengshu2[285]=0
call SetTextTagPermanent(udg_piaofuwenzi[7], false)
call SetTextTagAge(udg_piaofuwenzi[7], 0)
call SetTextTagLifespan(udg_piaofuwenzi[7], 0.25)
call SetTextTagFadepoint(udg_piaofuwenzi[7], 0.10)
call PauseTimer(udg_jishiqi[120])
call ForGroupBJ(udg_danweizu2[284], function Trig_dierjiefang_4Func003Func009A)
call GroupClear(udg_danweizu2[284])
call s__maphack_SetHeight(udg_danwei[400] , 0.00 , 0.00)
call DisableTrigger(gg_trg_dierjiefang_2)
call DisableTrigger(gg_trg_dierjiefang_2_5)
call DestroyEffect(udg_texiao[50])
set udg_danwei[400]=null
call RemoveLocation(udg_dian2[284])
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_dierjiefang_4 takes nothing returns nothing
set gg_trg_dierjiefang_4=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_dierjiefang_4, udg_jishiqi[120])
call TriggerAddAction(gg_trg_dierjiefang_4, function Trig_dierjiefang_4Actions)
endfunction
function Trig_yinjiaActions takes nothing returns nothing
set udg_danwei[403]=GetTriggerUnit()
set udg_dian[305]=GetUnitLoc(udg_danwei[403])
set udg_dian[306]=GetSpellTargetLoc()
set udg_zhengshu[111]=0
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl", udg_danwei[403], "hand"))
call StartTimerBJ(udg_jishiqi[122], false, 0.00)
endfunction
function InitTrig_yinjia takes nothing returns nothing
set gg_trg_yinjia=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_yinjia , 3 , 0x41304448)
call TriggerAddAction(gg_trg_yinjia, function Trig_yinjiaActions)
endfunction
function Trig_yinjia2Func002Func003Func005A takes nothing returns nothing
set udg_danwei[404]=GetEnumUnit()
set udg_dian[308]=GetUnitLoc(udg_danwei[404])
if ( ( IsUnitType(udg_danwei[404], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei[404], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei[404], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei[404], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei[404], GetOwningPlayer(udg_danwei[403])) == true ) ) then
if ( ( R2I(DistanceBetweenPoints(udg_dian[308], udg_dian[306])) >= 50 ) ) then
set udg_dian[309]=PolarProjectionBJ(udg_dian[308], ( DistanceBetweenPoints(udg_dian[306], udg_dian[308]) * 0.15 ), AngleBetweenPoints(udg_dian[308], udg_dian[306]))
call SetUnitX(udg_danwei[404], GetLocationX(udg_dian[309]))
call SetUnitY(udg_danwei[404], GetLocationY(udg_dian[309]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\DragonHawkMissile\\DragonHawkMissile.mdl", udg_dian[308]))
call RemoveLocation(udg_dian[309])
else
endif
else
call GroupRemoveUnit(udg_danweizu[110], udg_danwei[404])
endif
set udg_danwei[404]=null
call RemoveLocation(udg_dian[308])
endfunction
function Trig_yinjia2Func002Func004Func008A takes nothing returns nothing
set udg_danwei[404]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[404], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei[404], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei[404], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei[404], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei[404], GetOwningPlayer(udg_danwei[403])) == true ) ) then
call s__baka_IssueTargetOrder2(udg_danwei2[1] , "thunderbolt" , udg_danwei[404])
else
endif
set udg_danwei[404]=null
endfunction
function Trig_yinjia2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu[111]=( udg_zhengshu[111] + 1 )
if ( ( udg_zhengshu[111] <= 35 ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei[403])
set udg_zhengshu[110]=10
if ( ( udg_zhengshu[111] <= 7 ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Blink\\BlinkTarget.mdl", udg_danwei[403], "origin"))
call StartTimerBJ(udg_jishiqi[122], false, 0.04)
set udg_dian2[1]=PolarProjectionBJ(udg_dian[305], ( 30.00 * I2R(udg_zhengshu[111]) ), ( AngleBetweenPoints(udg_dian[306], udg_dian[305]) + 0.00 ))
else
set udg_dian2[1]=PolarProjectionBJ(udg_dian[306], 250.00, ( AngleBetweenPoints(udg_dian[306], udg_dian2[0]) + 102.86 ))
if ( ( udg_zhengshu[111] <= 14 ) ) then
call StartTimerBJ(udg_jishiqi[122], false, 0.10)
else
call StartTimerBJ(udg_jishiqi[122], false, 0.03)
endif
set udg_danweizu[110]=YDWEGetUnitsInRangeOfLocAllNull(300.00 , udg_dian[306])
call ForGroupBJ(udg_danweizu[110], function Trig_yinjia2Func002Func003Func005A)
set udg_dian2[2]=PolarProjectionBJ(udg_dian[306], GetRandomReal(100.00, 200.00), GetRandomReal(0, 360.00))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\NightElf\\Blink\\BlinkCaster.mdl", udg_dian2[2]))
if ( ( IsUnitGroupEmptyBJ(udg_danweizu[110]) == false ) ) then
set udg_dian2[3]=PolarProjectionBJ(udg_dian[306], GetRandomReal(75.00, 150.00), GetRandomReal(0, 360.00))
set udg_danwei[404]=GroupPickRandomUnit(udg_danweizu[110])
call UnitDamageTarget(udg_danwei[403], udg_danwei[404], ( ( ( 4.00 * I2R(GetHeroAgi(udg_danwei[403], true)) ) + ( - 25.00 + ( 35.00 * I2R(GetUnitAbilityLevel(udg_danwei[403], 0x41304448)) ) ) ) / 28.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_BASH)
if ( ( IsTerrainPathableBJ(udg_dian2[2], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei[404], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei[404], GetLocationY(udg_dian2[2]))
else
endif
call GroupRemoveUnit(udg_danweizu[110], udg_danwei[404])
set udg_danwei[404]=null
call RemoveLocation(udg_dian2[3])
else
endif
if ( ( IsUnitGroupEmptyBJ(udg_danweizu[110]) == false ) ) then
set udg_dian2[3]=PolarProjectionBJ(udg_dian[306], GetRandomReal(75.00, 150.00), GetRandomReal(0, 360.00))
set udg_danwei[404]=GroupPickRandomUnit(udg_danweizu[110])
call UnitDamageTarget(udg_danwei[403], udg_danwei[404], ( ( ( 4.00 * I2R(GetHeroAgi(udg_danwei[403], true)) ) + ( - 25.00 + ( 35.00 * I2R(GetUnitAbilityLevel(udg_danwei[403], 0x41304448)) ) ) ) / 28.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_BASH)
if ( ( IsTerrainPathableBJ(udg_dian2[2], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei[404], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei[404], GetLocationY(udg_dian2[2]))
else
endif
call GroupRemoveUnit(udg_danweizu[110], udg_danwei[404])
set udg_danwei[404]=null
call RemoveLocation(udg_dian2[3])
else
endif
call RemoveLocation(udg_dian2[2])
call DestroyGroup(udg_danweizu[110])
endif
if ( ( udg_zhengshu[111] == 8 ) ) then
call SetUnitAnimationByIndex(udg_danwei[403], 5)
if ( ( IsTerrainPathableBJ(udg_dian[306], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei[403], GetLocationX(udg_dian[306]))
call SetUnitY(udg_danwei[403], GetLocationY(udg_dian[306]))
else
endif
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[403]), 0x65303130, udg_dian[306], 0)
call UnitAddAbility(udg_danwei2[1], 0x41304449)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 0.50)
set udg_danweizu[110]=YDWEGetUnitsInRangeOfLocAllNull(300.00 , udg_dian[306])
call ForGroupBJ(udg_danweizu[110], function Trig_yinjia2Func002Func004Func008A)
call DestroyGroup(udg_danweizu[110])
set udg_danwei2[1]=null
else
endif
if ( ( IsTerrainPathableBJ(udg_dian[306], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_danwei[403], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei[403], GetLocationY(udg_dian2[1]))
else
endif
call UnitAddAbility(udg_danwei[403], 0x41726176)
if ( ( s__maphack_GetHeight(udg_danwei[403]) <= 10.00 ) ) then
call s__maphack_SetHeight(udg_danwei[403] , 300.00 , 0.00)
else
call s__maphack_SetHeight(udg_danwei[403] , 0.00 , 0.00)
endif
call UnitRemoveAbility(udg_danwei[403], 0x41726176)
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
call UnitAddAbility(udg_danwei[403], 0x41726176)
call s__maphack_SetHeight(udg_danwei[403] , 0.00 , 0.00)
call UnitRemoveAbility(udg_danwei[403], 0x41726176)
set udg_danwei[403]=null
set udg_zhengshu[110]=0
call RemoveLocation(udg_dian[305])
call RemoveLocation(udg_dian[306])
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_yinjia2 takes nothing returns nothing
set gg_trg_yinjia2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_yinjia2, udg_jishiqi[122])
call TriggerAddAction(gg_trg_yinjia2, function Trig_yinjia2Actions)
endfunction
function Trig_tiejia_1Actions takes nothing returns nothing
set udg_danwei2[262]=GetTriggerUnit()
set udg_danwei2[263]=GetSpellTargetUnit()
set udg_dian2[262]=GetUnitLoc(udg_danwei2[262])
set udg_dian2[263]=GetUnitLoc(udg_danwei2[263])
call PlaySoundOnUnitBJ(gg_snd_linaliD2, 100, udg_danwei2[262])
set udg_zhengshu2[262]=0
set udg_zhengshu2[263]=0
call StartTimerBJ(udg_times[262], false, 0.02)
call StartTimerBJ(udg_Times[155], false, 0.00)
endfunction
function InitTrig_tiejia_1 takes nothing returns nothing
set gg_trg_tiejia_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_tiejia_1 , 3 , 0x4130444E)
call TriggerAddAction(gg_trg_tiejia_1, function Trig_tiejia_1Actions)
endfunction
function Trig_tiejia_2Func004Func004Func006Func001Func001Func001Func015A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[262])) == true ) ) then
call UnitDamageTarget(udg_danwei2[262], udg_danwei2[1], ( ( I2R(GetHeroAgi(udg_danwei2[262], true)) * 3.00 ) + 100.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_tiejia_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu2[262]=( udg_zhengshu2[262] + 1 )
call SetUnitX(udg_danwei2[263], GetLocationX(udg_dian2[263]))
call SetUnitY(udg_danwei2[263], GetLocationY(udg_dian2[263]))
if ( ( udg_zhengshu2[262] <= 5 ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[262], ( ( DistanceBetweenPoints(udg_dian2[262], udg_dian2[263]) / 5.00 ) * I2R(udg_zhengshu2[262]) ), AngleBetweenPoints(udg_dian2[262], udg_dian2[263]))
call SetUnitX(udg_danwei2[262], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[262], GetLocationY(udg_dian2[1]))
call RemoveLocation(udg_dian2[1])
call StartTimerBJ(udg_times[262], false, 0.02)
else
set udg_zhengshu[110]=10
call SetUnitX(udg_danwei2[262], GetLocationX(udg_dian2[263]))
call SetUnitY(udg_danwei2[262], GetLocationY(udg_dian2[263]))
if ( ( udg_zhengshu2[262] <= 25 ) ) then
if ( ( udg_zhengshu2[262] == 6 ) ) then
call SetUnitAnimation(udg_danwei2[262], "attack")
call UnitDamageTarget(udg_danwei2[262], udg_danwei2[263], ( ( I2R(GetHeroAgi(udg_danwei2[262], true)) * 1.00 ) + 0.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
if ( ( udg_zhengshu2[284] <= ( 200 + ( 100 * GetUnitAbilityLevel(udg_danwei2[262], 0x41304447) ) ) ) ) then
call DisableTrigger(gg_trg_dierjiefang_2_5)
set udg_danwei[402]=udg_danwei2[263]
set udg_zhengshu[110]=0
call StartTimerBJ(udg_jishiqi[121], false, 0.25)
else
endif
else
endif
if ( ( udg_zhengshu2[262] == 15 ) ) then
call SetUnitAnimation(udg_danwei2[262], "spell slam")
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl", udg_danwei2[262], "origin"))
else
endif
if ( ( udg_zhengshu2[262] >= 15 ) and ( udg_zhengshu2[262] <= 20 ) ) then
call UnitAddAbility(udg_danwei2[263], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[263] , ( s__maphack_GetHeight(udg_danwei2[263]) + 30.00 ) , 0.00)
call UnitRemoveAbility(udg_danwei2[263], 0x41726176)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\StormBolt\\StormBoltMissile.mdl", udg_danwei2[263], "chest"))
else
endif
call StartTimerBJ(udg_times[262], false, 0.04)
else
if ( ( udg_zhengshu2[262] <= 35 ) ) then
call UnitAddAbility(udg_danwei2[262], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[262] , ( s__maphack_GetHeight(udg_danwei2[262]) + 100.00 ) , 0.00)
call UnitRemoveAbility(udg_danwei2[262], 0x41726176)
call StartTimerBJ(udg_times[262], false, 0.03)
if ( ( udg_zhengshu2[262] == 35 ) ) then
call SetUnitAnimation(udg_danwei2[262], "attack slam")
else
endif
else
if ( ( udg_zhengshu2[262] <= 50 ) ) then
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[263]), 0x65303431, udg_dian2[263], 270.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 2.00)
call SetUnitAnimation(udg_danwei2[1], "birth")
call SetUnitTimeScale(udg_danwei2[1], 5.00)
call s__maphack_SetHeight(udg_danwei2[1] , s__maphack_GetHeight(udg_danwei2[262]) , 0.00)
set udg_danwei2[1]=null
call UnitAddAbility(udg_danwei2[262], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[262] , ( s__maphack_GetHeight(udg_danwei2[262]) - 50.00 ) , 0.00)
call UnitRemoveAbility(udg_danwei2[262], 0x41726176)
call StartTimerBJ(udg_times[262], false, 0.03)
else
if ( ( udg_zhengshu2[262] <= 60 ) ) then
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[263]), 0x65303431, udg_dian2[263], 270.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 2.00)
call SetUnitAnimation(udg_danwei2[1], "birth")
call SetUnitTimeScale(udg_danwei2[1], 3.00)
call SetUnitScale(udg_danwei2[1], 0.70, 0.70, 0.70)
call s__maphack_SetHeight(udg_danwei2[1] , s__maphack_GetHeight(udg_danwei2[262]) , 0.00)
set udg_danwei2[1]=null
call UnitAddAbility(udg_danwei2[262], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[262] , ( s__maphack_GetHeight(udg_danwei2[262]) - 10.00 ) , 0.00)
call UnitRemoveAbility(udg_danwei2[262], 0x41726176)
call UnitAddAbility(udg_danwei2[263], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[263] , ( s__maphack_GetHeight(udg_danwei2[263]) - 10.00 ) , 0.00)
call UnitRemoveAbility(udg_danwei2[263], 0x41726176)
call UnitDamageTarget(udg_danwei2[262], udg_danwei2[263], ( ( I2R(GetHeroAgi(udg_danwei2[262], true)) / 20.00 ) + 10.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call StopSoundBJ(gg_snd_WoodHeavyBashStone3, false)
call PlaySoundAtPointBJ(gg_snd_WoodHeavyBashStone3, 100, udg_dian2[263], ( GetLocationZ(udg_dian2[263]) + 400.00 ))
if ( ( udg_zhengshu2[263] == 0 ) ) then
set udg_zhengshu2[263]=1
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosTarget.mdl", udg_dian2[263]))
else
set udg_zhengshu2[263]=0
endif
call StartTimerBJ(udg_times[262], false, 0.07)
else
if ( ( udg_zhengshu2[262] <= 70 ) ) then
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[263]), 0x65303431, udg_dian2[263], 270.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 2.00)
call SetUnitAnimation(udg_danwei2[1], "birth")
call SetUnitTimeScale(udg_danwei2[1], 3.00)
call SetUnitScale(udg_danwei2[1], 1.20, 1.20, 1.20)
call s__maphack_SetHeight(udg_danwei2[1] , s__maphack_GetHeight(udg_danwei2[262]) , 0.00)
set udg_danwei2[1]=null
call UnitAddAbility(udg_danwei2[262], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[262] , ( s__maphack_GetHeight(udg_danwei2[262]) - 5.00 ) , 0.00)
call UnitRemoveAbility(udg_danwei2[262], 0x41726176)
call UnitAddAbility(udg_danwei2[263], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[263] , ( s__maphack_GetHeight(udg_danwei2[263]) - 5.00 ) , 0.00)
call UnitRemoveAbility(udg_danwei2[263], 0x41726176)
call UnitDamageTarget(udg_danwei2[262], udg_danwei2[263], ( ( I2R(GetHeroAgi(udg_danwei2[262], true)) / 20.00 ) + 10.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call StopSoundBJ(gg_snd_WoodHeavyBashStone3, false)
call PlaySoundAtPointBJ(gg_snd_WoodHeavyBashStone3, 100, udg_dian2[263], ( GetLocationZ(udg_dian2[263]) + 400.00 ))
if ( ( udg_zhengshu2[263] == 0 ) ) then
set udg_zhengshu2[263]=1
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl", udg_dian2[263]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosTarget.mdl", udg_dian2[263]))
else
set udg_zhengshu2[263]=0
endif
call StartTimerBJ(udg_times[262], false, 0.05)
else
call UnitAddAbility(udg_danwei2[262], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[262] , 0.00 , 0.00)
call UnitRemoveAbility(udg_danwei2[262], 0x41726176)
call UnitAddAbility(udg_danwei2[263], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[263] , 0.00 , 0.00)
call UnitRemoveAbility(udg_danwei2[263], 0x41726176)
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[263]), 0x65303431, udg_dian2[263], 270.00)
call SetUnitAnimation(udg_danwei2[1], "birth")
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 3.00)
call SetUnitTimeScale(udg_danwei2[1], 2.00)
call SetUnitScale(udg_danwei2[1], 3.00, 3.00, 3.00)
call s__maphack_SetHeight(udg_danwei2[1] , s__maphack_GetHeight(udg_danwei2[262]) , 0.00)
set udg_danwei2[1]=null
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(350.00 , udg_dian2[263])
call ForGroupBJ(udg_xuanqu, function Trig_tiejia_2Func004Func004Func006Func001Func001Func001Func015A)
call DestroyGroup(udg_xuanqu)
call StopSoundBJ(gg_snd_BuildingDeathLargeHuman01, false)
call PlaySoundOnUnitBJ(gg_snd_BuildingDeathLargeHuman01, 100, udg_danwei2[262])
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\NewMassiveEX.mdx", udg_dian2[263]))
if ( ( udg_zhengshu2[284] <= ( 200 + ( 100 * GetUnitAbilityLevel(udg_danwei2[262], 0x41304447) ) ) ) ) then
call EnableTrigger(gg_trg_dierjiefang_2_5)
set udg_zhengshu[110]=0
else
endif
set udg_danwei2[262]=null
set udg_danwei2[263]=null
call RemoveLocation(udg_dian2[262])
call RemoveLocation(udg_dian2[263])
endif
endif
endif
endif
endif
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_tiejia_2 takes nothing returns nothing
set gg_trg_tiejia_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_tiejia_2, udg_times[262])
call TriggerAddAction(gg_trg_tiejia_2, function Trig_tiejia_2Actions)
endfunction
function Trig_tiejia_3Actions takes nothing returns nothing
set udg_Dian[89]=GetUnitLoc(udg_danwei2[262])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[262]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304B5A)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_danwei2[262])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
endfunction
function InitTrig_tiejia_3 takes nothing returns nothing
set gg_trg_tiejia_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_tiejia_3, udg_Times[155])
call TriggerAddAction(gg_trg_tiejia_3, function Trig_tiejia_3Actions)
endfunction
function Trig_yuanwuwufengActions takes nothing returns nothing
set udg_danwei[405]=GetTriggerUnit()
set udg_danwei[406]=GetSpellTargetUnit()
set udg_dian[310]=GetUnitLoc(udg_danwei[405])
call SetSoundPosition(gg_snd_linaliQ2, GetLocationX(udg_dian[310]), GetLocationY(udg_dian[310]), 0)
call PlaySoundBJ(gg_snd_linaliQ2)
set udg_danweizu2[266]=CreateGroup()
if ( ( udg_danwei[406] != null ) ) then
set udg_dian[311]=GetUnitLoc(udg_danwei[406])
if ( ( DistanceBetweenPoints(udg_dian[310], udg_dian[311]) <= 400.00 ) ) then
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[405]), 0x65303130, udg_dian[310], 0)
call UnitAddAbility(udg_danwei2[1], 0x41303551)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 0.50)
call s__baka_IssueTargetOrder2(udg_danwei2[1] , "thunderbolt" , udg_danwei[406])
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\StormBolt\\StormBoltMissile.mdl", udg_danwei[406], "chest"))
set udg_shishu2[266]=1.00
call StartTimerBJ(udg_jishiqi[123], true, 0.01)
set udg_danwei2[1]=null
else
set udg_shishu2[266]=0.00
call StartTimerBJ(udg_jishiqi[123], true, ( 0.03 / 2.00 ))
endif
else
set udg_dian[311]=GetSpellTargetLoc()
set udg_shishu2[266]=2.00
call StartTimerBJ(udg_jishiqi[123], true, 0.03)
endif
set udg_zhengshu2[266]=0
endfunction
function InitTrig_yuanwuwufeng takes nothing returns nothing
set gg_trg_yuanwuwufeng=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_yuanwuwufeng , 3 , 0x41304450)
call TriggerAddAction(gg_trg_yuanwuwufeng, function Trig_yuanwuwufengActions)
endfunction
function Trig_yuanwuwufeng2Func002Func001Func012A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei[405])) == true ) ) then
set udg_dian2[6]=GetUnitLoc(udg_danwei2[1])
set udg_dian2[7]=PolarProjectionBJ(udg_dian2[6], 10.00, AngleBetweenPoints(udg_dian2[2], udg_dian2[6]))
call UnitDamageTarget(udg_danwei[405], udg_danwei2[1], ( I2R(GetHeroAgi(udg_danwei[405], true)) * 0.20 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
if ( ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[266]) == false ) ) then
call UnitDamageTarget(udg_danwei[405], udg_danwei2[1], ( 0.00 + ( 50.00 * I2R(GetUnitAbilityLevel(udg_danwei[405], 0x41304450)) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call GroupAddUnit(udg_danweizu2[266], udg_danwei2[1])
else
endif
if ( ( IsTerrainPathableBJ(udg_dian2[7], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[7]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[7]))
else
endif
call RemoveLocation(udg_dian2[6])
call RemoveLocation(udg_dian2[7])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_yuanwuwufeng2Func002Func002Func002Func005Func010A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei[405])) == true ) ) then
set udg_dian2[6]=GetUnitLoc(udg_danwei2[1])
set udg_dian2[7]=PolarProjectionBJ(udg_dian2[6], 10.00, AngleBetweenPoints(udg_dian[310], udg_dian[311]))
call UnitDamageTarget(udg_danwei[405], udg_danwei2[1], ( I2R(GetHeroAgi(udg_danwei[405], true)) * 0.20 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
if ( ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[266]) == false ) ) then
call UnitDamageTarget(udg_danwei[405], udg_danwei2[1], ( 0.00 + ( 50.00 * I2R(GetUnitAbilityLevel(udg_danwei[405], 0x41304450)) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call GroupAddUnit(udg_danweizu2[266], udg_danwei2[1])
else
endif
if ( ( IsTerrainPathableBJ(udg_dian2[7], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[7]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[7]))
else
endif
call RemoveLocation(udg_dian2[6])
call RemoveLocation(udg_dian2[7])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_yuanwuwufeng2Func002Func002Func002Func018A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei[405])) == true ) ) then
set udg_dian2[6]=GetUnitLoc(udg_danwei2[1])
set udg_dian2[7]=PolarProjectionBJ(udg_dian2[6], 10.00, AngleBetweenPoints(udg_dian[310], udg_dian2[6]))
call UnitDamageTarget(udg_danwei[405], udg_danwei2[1], ( I2R(GetHeroAgi(udg_danwei[405], true)) * 0.15 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
if ( ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[266]) == false ) ) then
call UnitDamageTarget(udg_danwei[405], udg_danwei2[1], ( 0.00 + ( 50.00 * I2R(GetUnitAbilityLevel(udg_danwei[405], 0x41304450)) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call GroupAddUnit(udg_danweizu2[266], udg_danwei2[1])
else
endif
if ( ( IsTerrainPathableBJ(udg_dian2[7], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[7]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[7]))
else
endif
call RemoveLocation(udg_dian2[6])
call RemoveLocation(udg_dian2[7])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_yuanwuwufeng2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu2[266]=( udg_zhengshu2[266] + 1 )
if ( ( udg_shishu2[266] == 2.00 ) ) then
if ( ( udg_zhengshu2[266] <= 45 ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian[310], ( 30.00 * I2R(udg_zhengshu2[266]) ), AngleBetweenPoints(udg_dian[310], udg_dian[311]))
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], ( ( 294.00 - ( 6.00 * I2R(udg_zhengshu2[266]) ) ) * SinBJ(( I2R(udg_zhengshu2[266]) * 24.00 )) ), ( AngleBetweenPoints(udg_dian[310], udg_dian[311]) - 90.00 ))
set udg_dian2[3]=PolarProjectionBJ(udg_dian[310], ( 30.00 * I2R(( udg_zhengshu2[266] - 1 )) ), AngleBetweenPoints(udg_dian[310], udg_dian[311]))
set udg_dian2[4]=PolarProjectionBJ(udg_dian2[3], ( ( 300.00 - ( 6.00 * I2R(udg_zhengshu2[266]) ) ) * SinBJ(( I2R(( udg_zhengshu2[266] - 1 )) * 24.00 )) ), ( AngleBetweenPoints(udg_dian[310], udg_dian[311]) - 90.00 ))
set udg_dian2[5]=PolarProjectionBJ(udg_dian2[2], 50.00, AngleBetweenPoints(udg_dian2[2], udg_dian2[4]))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[405]), 0x65303531, udg_dian2[5], AngleBetweenPoints(udg_dian2[4], udg_dian2[2]))
call SetUnitAnimation(udg_danwei2[1], "death")
call SetUnitTimeScale(udg_danwei2[1], 2.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 0.50)
set udg_danwei2[1]=null
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(225.00 , udg_dian2[2])
call ForGroupBJ(udg_xuanqu, function Trig_yuanwuwufeng2Func002Func001Func012A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
call RemoveLocation(udg_dian2[3])
call RemoveLocation(udg_dian2[4])
call RemoveLocation(udg_dian2[5])
else
call PauseTimer(udg_jishiqi[123])
set udg_danwei[405]=null
set udg_danwei[406]=null
call RemoveLocation(udg_dian[310])
call RemoveLocation(udg_dian[311])
endif
else
if ( ( udg_zhengshu2[266] <= 24 ) ) then
if ( ( udg_shishu2[266] == 1.00 ) ) then
set udg_dian2[2]=PolarProjectionBJ(udg_dian[311], ( 10.00 * I2R(udg_zhengshu2[266]) ), AngleBetweenPoints(udg_dian[310], udg_dian[311]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl", udg_dian2[2]))
if ( ( IsTerrainPathableBJ(udg_dian2[2], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei[406], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei[406], GetLocationY(udg_dian2[2]))
else
endif
call RemoveLocation(udg_dian2[2])
if ( ( udg_zhengshu2[266] <= 8 ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian[310], ( 70.00 * I2R(udg_zhengshu2[266]) ), AngleBetweenPoints(udg_dian[310], udg_dian[311]))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[405]), 0x65303531, udg_dian2[1], AngleBetweenPoints(udg_dian[310], udg_dian[311]))
call SetUnitAnimation(udg_danwei2[1], "death")
call SetUnitTimeScale(udg_danwei2[1], 2.00)
call SetUnitScale(udg_danwei2[1], ( 0.50 - ( I2R(udg_zhengshu2[266]) * 0.06 ) ), ( 0.50 - ( I2R(udg_zhengshu2[266]) * 0.06 ) ), ( 0.50 - ( I2R(udg_zhengshu2[266]) * 0.06 ) ))
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 0.50)
set udg_danwei2[1]=null
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(225.00 , udg_dian2[1])
call ForGroupBJ(udg_xuanqu, function Trig_yuanwuwufeng2Func002Func002Func002Func005Func010A)
call DestroyGroup(udg_xuanqu)
else
endif
else
set udg_dian2[1]=PolarProjectionBJ(udg_dian[310], ( 50.00 * I2R(udg_zhengshu2[266]) ), AngleBetweenPoints(udg_dian[310], udg_dian[311]))
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], ( 100.00 * SinBJ(( I2R(udg_zhengshu2[266]) * 15.00 )) ), ( AngleBetweenPoints(udg_dian[310], udg_dian[311]) - 90.00 ))
set udg_dian2[3]=PolarProjectionBJ(udg_dian[310], ( 50.00 * I2R(( udg_zhengshu2[266] - 1 )) ), AngleBetweenPoints(udg_dian[310], udg_dian[311]))
set udg_dian2[4]=PolarProjectionBJ(udg_dian2[3], ( 100.00 * SinBJ(( I2R(( udg_zhengshu2[266] - 1 )) * 15.00 )) ), ( AngleBetweenPoints(udg_dian[310], udg_dian[311]) - 90.00 ))
set udg_dian2[5]=PolarProjectionBJ(udg_dian2[2], 50.00, AngleBetweenPoints(udg_dian2[2], udg_dian2[4]))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[405]), 0x65303531, udg_dian2[5], AngleBetweenPoints(udg_dian2[4], udg_dian2[2]))
call SetUnitAnimation(udg_danwei2[1], "death")
call SetUnitTimeScale(udg_danwei2[1], 2.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 0.50)
set udg_danwei2[1]=null
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(225.00 , udg_dian2[2])
call ForGroupBJ(udg_xuanqu, function Trig_yuanwuwufeng2Func002Func002Func002Func018A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
call RemoveLocation(udg_dian2[3])
call RemoveLocation(udg_dian2[4])
call RemoveLocation(udg_dian2[5])
endif
else
call DestroyGroup(udg_danweizu2[266])
call PauseTimer(udg_jishiqi[123])
set udg_danwei[405]=null
set udg_danwei[406]=null
call RemoveLocation(udg_dian[310])
call RemoveLocation(udg_dian[311])
endif
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_yuanwuwufeng2 takes nothing returns nothing
set gg_trg_yuanwuwufeng2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_yuanwuwufeng2, udg_jishiqi[123])
call TriggerAddAction(gg_trg_yuanwuwufeng2, function Trig_yuanwuwufeng2Actions)
endfunction
function Trig_yinsufengbao_1Actions takes nothing returns nothing
set udg_danwei2[286]=GetTriggerUnit()
set udg_dian2[286]=GetUnitLoc(udg_danwei2[286])
set udg_dian2[287]=GetSpellTargetLoc()
set udg_zhengshu2[286]=( IMinBJ(( ( ( 325 + ( 2 * GetHeroAgi(udg_danwei2[286], true) ) ) + ( 75 * GetUnitAbilityLevel(udg_danwei2[286], 0x41304451) ) ) * 1 ), R2I(DistanceBetweenPoints(udg_dian2[286], udg_dian2[287]))) / 12 )
set udg_zhengshu2[287]=12
call PlaySoundAtPointBJ(gg_snd_WindWalk, 100, udg_dian2[286], ( GetLocationZ(udg_dian2[286]) + 400.00 ))
call IssuePointOrderByIdLoc(udg_danwei2[286], 851986, udg_dian2[287])
call StartTimerBJ(udg_times[286], true, 0.03)
endfunction
function InitTrig_yinsufengbao_1 takes nothing returns nothing
set gg_trg_yinsufengbao_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_yinsufengbao_1 , 3 , 0x41304451)
call TriggerAddAction(gg_trg_yinsufengbao_1, function Trig_yinsufengbao_1Actions)
endfunction
function Trig_yinsufengbao_2Func001Func002Func009A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( udg_danwei2[1] != udg_danwei2[286] ) ) then
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[2]))
else
endif
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_yinsufengbao_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( ( IsUnitPausedBJ(udg_danwei2[286]) == false ) or ( IsUnitType(udg_danwei2[286], UNIT_TYPE_DEAD) == true ) ) ) then
set udg_zhengshu2[287]=( udg_zhengshu2[287] - 1 )
if ( ( udg_zhengshu2[287] >= 0 ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[286])
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], I2R(udg_zhengshu2[286]), AngleBetweenPoints(udg_dian2[286], udg_dian2[287]))
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], 75.00, AngleBetweenPoints(udg_dian2[286], udg_dian2[287]))
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_danwei2[286], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[286], GetLocationY(udg_dian2[1]))
else
endif
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(175.00 , udg_dian2[2])
call ForGroupBJ(udg_xuanqu, function Trig_yinsufengbao_2Func001Func002Func009A)
call DestroyGroup(udg_xuanqu)
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[286]), 0x65303537, udg_dian2[1], AngleBetweenPoints(udg_dian2[287], udg_dian2[286]))
call SetUnitTimeScale(udg_danwei2[1], 5.00)
call SetUnitScale(udg_danwei2[1], RMaxBJ(( 0.50 + ( I2R(( 12 - udg_zhengshu2[287] )) * 0.10 ) ), 0.20), RMaxBJ(( 0.50 + ( I2R(( 12 - udg_zhengshu2[287] )) * 0.10 ) ), 0.20), RMaxBJ(( 0.50 + ( I2R(( 12 - udg_zhengshu2[287] )) * 0.10 ) ), 0.20))
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 0.40)
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
call PauseTimer(udg_times[286])
call IssueImmediateOrderById(udg_danwei2[286], 851972)
set udg_danwei2[286]=null
call RemoveLocation(udg_dian2[286])
call RemoveLocation(udg_dian2[287])
endif
else
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_yinsufengbao_2 takes nothing returns nothing
set gg_trg_yinsufengbao_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_yinsufengbao_2, udg_times[286])
call TriggerAddAction(gg_trg_yinsufengbao_2, function Trig_yinsufengbao_2Actions)
endfunction
function Trig_comboActions takes nothing returns nothing
set udg_zhengshu2[84]=0
endfunction
function InitTrig_combo takes nothing returns nothing
set gg_trg_combo=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_combo, udg_times[84])
call TriggerAddAction(gg_trg_combo, function Trig_comboActions)
endfunction
function Trig_yefu_tuji_1Actions takes nothing returns nothing
call PauseTimer(udg_times[84])
call StartTimerBJ(udg_times[84], false, 2.00)
set udg_danwei2[85]=GetSpellAbilityUnit()
set udg_danwei2[86]=GetSpellTargetUnit()
set udg_dian2[1]=GetUnitLoc(udg_danwei2[85])
set udg_dian2[2]=GetUnitLoc(udg_danwei2[86])
set udg_dian2[85]=PolarProjectionBJ(udg_dian2[1], 400.00, AngleBetweenPoints(udg_dian2[2], udg_dian2[1]))
set udg_zhengshu2[85]=0
call StartTimerBJ(udg_times[85], true, 0.03)
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
call RemoveLocation(udg_dian2[3])
call StartTimerBJ(udg_jishiqi[143], false, 0.00)
endfunction
function InitTrig_yefu_tuji_1 takes nothing returns nothing
set gg_trg_yefu_tuji_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_yefu_tuji_1 , 3 , 0x4130384F)
call TriggerAddAction(gg_trg_yefu_tuji_1, function Trig_yefu_tuji_1Actions)
endfunction
function Trig_yefu_tuji_2Func001Func004Func004Func002Func002Func003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( udg_danwei2[1] != udg_danwei2[86] ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[85])) == true ) ) then
set udg_dian2[3]=GetUnitLoc(udg_danwei2[1])
set udg_dian2[4]=PolarProjectionBJ(udg_dian2[3], 35.00, AngleBetweenPoints(udg_dian2[86], udg_dian2[3]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", udg_dian2[4]))
if ( ( IsTerrainPathableBJ(udg_dian2[4], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[4]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[4]))
else
endif
call RemoveLocation(udg_dian2[3])
call RemoveLocation(udg_dian2[4])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_yefu_tuji_2Func001Func004Func004Func002Func002Func011Func018A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[85])) == true ) ) then
call UnitDamageTarget(udg_danwei2[85], udg_danwei2[1], ( 35.00 + ( 35.00 * I2R(GetUnitAbilityLevel(udg_danwei2[85], 0x4130384F)) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_yefu_tuji_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( IsUnitPausedBJ(udg_danwei2[85]) == false ) ) then
set udg_zhengshu2[85]=( udg_zhengshu2[85] + 1 )
set udg_dian2[1]=GetUnitLoc(udg_danwei2[85])
if ( ( udg_zhengshu2[85] <= 40 ) ) then
if ( ( udg_zhengshu2[85] <= 10 ) ) then
call UnitAddAbility(udg_danwei2[85], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[85] , ( s__maphack_GetHeight(udg_danwei2[85]) + 50.00 ) , 0.00)
call UnitRemoveAbility(udg_danwei2[85], 0x41726176)
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], 35.00, AngleBetweenPoints(udg_dian2[1], udg_dian2[85]))
call SetUnitX(udg_danwei2[85], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[85], GetLocationY(udg_dian2[2]))
call RemoveLocation(udg_dian2[2])
else
if ( ( udg_zhengshu2[85] <= 20 ) ) then
if ( ( udg_zhengshu2[85] == 20 ) ) then
set udg_dian2[86]=GetUnitLoc(udg_danwei2[86])
call SetUnitAnimationByIndex(udg_danwei2[85], 7)
call UnitAddAbility(udg_danwei2[85], 0x41303847)
call SetUnitTimeScale(udg_danwei2[85], 3.00)
call PlaySoundOnUnitBJ(gg_snd_HeroDemonMissileLaunch1, 100, udg_danwei2[85])
else
endif
else
if ( ( udg_zhengshu2[85] <= 30 ) ) then
call UnitAddAbility(udg_danwei2[85], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[85] , ( s__maphack_GetHeight(udg_danwei2[85]) - 50.00 ) , 0.00)
call UnitRemoveAbility(udg_danwei2[85], 0x41726176)
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[85], ( ( DistanceBetweenPoints(udg_dian2[85], udg_dian2[86]) / 10.00 ) * ( I2R(udg_zhengshu2[85]) - 20.00 ) ), AngleBetweenPoints(udg_dian2[85], udg_dian2[86]))
call SetUnitX(udg_danwei2[85], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[85], GetLocationY(udg_dian2[2]))
call RemoveLocation(udg_dian2[2])
if ( ( udg_zhengshu2[85] == 30 ) ) then
call PlaySoundOnUnitBJ(gg_snd_ImpaleHit, 100, udg_danwei2[85])
call UnitRemoveAbility(udg_danwei2[85], 0x41303847)
call SetUnitTimeScale(udg_danwei2[85], 1.00)
set udg_danwei2[2]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[85]), 0x65303056, udg_dian2[1], 0.00)
call SetUnitTimeScale(udg_danwei2[2], 0.10)
call UnitApplyTimedLife(udg_danwei2[2], 0x42487765, 1.00)
set udg_danwei2[2]=null
set udg_danwei2[2]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[85]), 0x65303338, udg_dian2[1], 0.00)
call UnitApplyTimedLife(udg_danwei2[2], 0x42487765, 0.50)
call s__baka_IssueTargetOrderById2(udg_danwei2[2] , 852075 , udg_danwei2[86])
set udg_danwei2[2]=null
call UnitDamageTarget(udg_danwei2[85], udg_danwei2[86], I2R(GetHeroAgi(udg_danwei2[85], true)), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
set udg_zhengshu2[84]=( udg_zhengshu2[84] + 1 )
call PauseTimer(udg_times[84])
call StartTimerBJ(udg_times[84], false, 2.00)
if ( ( udg_zhengshu2[84] > 1 ) ) then
call UnitDamageTarget(udg_danwei2[85], udg_danwei2[86], ( I2R(GetHeroAgi(udg_danwei2[85], true)) * 0.50 ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
call CreateTextTagLocBJ(( I2S(udg_zhengshu2[84]) + " Hit!" ), udg_dian2[1], 0, 12.00, 100, 0.00, 0.00, 0)
call SetTextTagPermanent(GetLastCreatedTextTag(), false)
call SetTextTagVelocity(bj_lastCreatedTextTag, 0.00, 0.06)
call SetTextTagFadepoint(GetLastCreatedTextTag(), 1.50)
call SetTextTagLifespan(GetLastCreatedTextTag(), 2.00)
call SetTextTagVisibility(bj_lastCreatedTextTag, false)
set udg_wanjiazu[0]=CreateForce()
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ( ( IsUnitVisible(udg_danwei2[85], s__baka_SPlayer(bj_forLoopAIndex - 1)) == true ) ) then
call ForceAddPlayer(udg_wanjiazu[0], s__baka_SPlayer(bj_forLoopAIndex - 1))
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call ShowTextTagForceBJ(true, bj_lastCreatedTextTag, udg_wanjiazu[0])
call DestroyForce(udg_wanjiazu[0])
else
endif
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(300.00 , udg_dian2[86])
call ForGroupBJ(udg_xuanqu, function Trig_yefu_tuji_2Func001Func004Func004Func002Func002Func011Func018A)
call DestroyGroup(udg_xuanqu)
else
endif
else
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(300.00 , udg_dian2[86])
call ForGroupBJ(udg_xuanqu, function Trig_yefu_tuji_2Func001Func004Func004Func002Func002Func003A)
call DestroyGroup(udg_xuanqu)
endif
endif
endif
else
call UnitAddAbility(udg_danwei2[85], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[85] , GetUnitDefaultFlyHeight(udg_danwei2[85]) , 0.00)
call UnitRemoveAbility(udg_danwei2[85], 0x41726176)
set udg_danwei2[85]=null
set udg_danwei2[86]=null
call RemoveLocation(udg_dian2[85])
call RemoveLocation(udg_dian2[86])
call PauseTimer(udg_times[85])
endif
call RemoveLocation(udg_dian2[1])
else
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_yefu_tuji_2 takes nothing returns nothing
set gg_trg_yefu_tuji_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_yefu_tuji_2, udg_times[85])
call TriggerAddAction(gg_trg_yefu_tuji_2, function Trig_yefu_tuji_2Actions)
endfunction
function Trig_yefu_tuji_3Actions takes nothing returns nothing
set udg_Dian[89]=GetUnitLoc(udg_danwei2[85])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[85]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x4130475A)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_danwei2[85])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
endfunction
function InitTrig_yefu_tuji_3 takes nothing returns nothing
set gg_trg_yefu_tuji_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_yefu_tuji_3, udg_jishiqi[143])
call TriggerAddAction(gg_trg_yefu_tuji_3, function Trig_yefu_tuji_3Actions)
endfunction
function Trig_emo_1Func009A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[91])) == true ) ) then
call GroupAddUnit(udg_danweizu2[91], udg_danwei2[1])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_emo_1Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call PauseTimer(udg_times[84])
call StartTimerBJ(udg_times[84], false, 2.00)
set udg_danwei2[91]=GetTriggerUnit()
set udg_dian2[1]=GetUnitLoc(udg_danwei2[91])
set udg_zhengshu2[91]=0
set udg_danweizu2[91]=CreateGroup()
call StartTimerBJ(udg_times[91], true, 0.03)
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(350.00 , udg_dian2[1])
call ForGroupBJ(udg_xuanqu, function Trig_emo_1Func009A)
call DestroyGroup(udg_xuanqu)
call StartTimerBJ(udg_jishiqi[141], false, 0.00)
call RemoveLocation(udg_dian2[1])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_emo_1 takes nothing returns nothing
set gg_trg_emo_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_emo_1 , 3 , 0x41303049)
call TriggerAddAction(gg_trg_emo_1, function Trig_emo_1Actions)
endfunction
function Trig_emo_2Func001Func003Func003Func002A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
set udg_dian2[3]=GetUnitLoc(udg_danwei2[1])
set udg_dian2[4]=PolarProjectionBJ(udg_dian2[3], 50.00, AngleBetweenPoints(udg_dian2[1], udg_dian2[2]))
if ( ( IsTerrainPathableBJ(udg_dian2[4], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[4]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[4]))
else
endif
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", udg_dian2[4]))
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[3])
call RemoveLocation(udg_dian2[4])
endfunction
function Trig_emo_2Func001Func003Func003Func003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
set udg_dian2[3]=GetUnitLoc(udg_danwei2[1])
set udg_dian2[4]=PolarProjectionBJ(udg_dian2[1], ( ( DistanceBetweenPoints(udg_dian2[1], udg_dian2[3]) * 0.95 ) - 5.00 ), ( AngleBetweenPoints(udg_dian2[1], udg_dian2[3]) + 18.00 ))
if ( ( IsTerrainPathableBJ(udg_dian2[4], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[4]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[4]))
else
endif
call SetUnitLifeBJ(udg_danwei2[1], RMaxBJ(( GetUnitState(udg_danwei2[1], UNIT_STATE_LIFE) - ( 2.00 * I2R(GetUnitAbilityLevel(udg_danwei2[91], 0x41303049)) ) ), 1.00))
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_HERO) == true ) ) then
call SetUnitLifeBJ(udg_danwei2[91], ( GetUnitState(udg_danwei2[91], UNIT_STATE_LIFE) + ( 1.50 * I2R(GetUnitAbilityLevel(udg_danwei2[91], 0x41303049)) ) ))
else
call SetUnitLifeBJ(udg_danwei2[91], ( GetUnitState(udg_danwei2[91], UNIT_STATE_LIFE) + ( 0.50 * I2R(GetUnitAbilityLevel(udg_danwei2[91], 0x41303049)) ) ))
endif
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\Feedback\\SpellBreakerAttack.mdl", udg_dian2[4]))
if ( ( udg_zhengshu2[91] <= 10 ) ) then
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", udg_danwei2[1], "chest"))
else
endif
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[3])
call RemoveLocation(udg_dian2[4])
endfunction
function Trig_emo_2Func001Func003Func003Func005Func003Func007A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( udg_zhengshu2[84] > 1 ) ) then
call UnitDamageTarget(udg_danwei2[91], udg_danwei2[1], ( I2R(GetHeroAgi(udg_danwei2[91], true)) * 0.50 ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
else
endif
call UnitDamageTarget(udg_danwei2[91], udg_danwei2[1], ( 2.00 * I2R(GetHeroAgi(udg_danwei2[91], true)) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
set udg_danwei2[1]=null
endfunction
function Trig_emo_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( IsUnitPausedBJ(udg_danwei2[91]) == false ) ) then
set udg_zhengshu2[91]=( udg_zhengshu2[91] + 1 )
if ( ( udg_zhengshu2[91] <= 30 ) ) then
set udg_dian2[1]=GetUnitLoc(udg_danwei2[91])
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], 100.00, GetUnitFacing(udg_danwei2[91]))
if ( ( udg_zhengshu2[91] <= 20 ) ) then
if ( ( IsUnitGroupEmptyBJ(udg_danweizu2[91]) == false ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Heal\\HealTarget.mdl", udg_danwei2[91], "chest"))
else
endif
call ForGroupBJ(udg_danweizu2[91], function Trig_emo_2Func001Func003Func003Func003A)
if ( ( udg_zhengshu2[91] == 10 ) ) then
call SetUnitAnimationByIndex(udg_danwei2[91], 7)
else
endif
if ( ( udg_zhengshu2[91] == 20 ) ) then
set udg_aXUNHUAN[147]=1
loop
exitwhen udg_aXUNHUAN[147] > 3
set udg_dian2[3]=PolarProjectionBJ(udg_dian2[1], 150.00, ( AngleBetweenPoints(udg_dian2[1], udg_dian2[2]) + ( 120.00 * I2R(udg_aXUNHUAN[147]) ) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl", udg_dian2[3]))
call RemoveLocation(udg_dian2[3])
set udg_aXUNHUAN[147]=udg_aXUNHUAN[147] + 1
endloop
call PlaySoundOnUnitBJ(gg_snd_TheBlackArrow, 100, udg_danwei2[91])
if ( ( IsUnitGroupEmptyBJ(udg_danweizu2[91]) == false ) ) then
call PlaySoundOnUnitBJ(gg_snd_MetalHeavySliceFlesh1, 100, udg_danwei2[91])
set udg_zhengshu2[84]=( udg_zhengshu2[84] + 1 )
call PauseTimer(udg_times[84])
call StartTimerBJ(udg_times[84], false, 2.00)
if ( ( udg_zhengshu2[84] > 1 ) ) then
call CreateTextTagLocBJ(( I2S(udg_zhengshu2[84]) + " Hit!" ), udg_dian2[2], 0, 12.00, 100, 0.00, 0.00, 0)
call SetTextTagPermanent(GetLastCreatedTextTag(), false)
call SetTextTagVelocity(bj_lastCreatedTextTag, 0.00, 0.06)
call SetTextTagFadepoint(GetLastCreatedTextTag(), 1.50)
call SetTextTagLifespan(GetLastCreatedTextTag(), 2.00)
call SetTextTagVisibility(bj_lastCreatedTextTag, false)
set udg_wanjiazu[0]=CreateForce()
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ( ( IsUnitVisible(udg_danwei2[91], s__baka_SPlayer(bj_forLoopAIndex - 1)) == true ) ) then
call ForceAddPlayer(udg_wanjiazu[0], s__baka_SPlayer(bj_forLoopAIndex - 1))
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call ShowTextTagForceBJ(true, bj_lastCreatedTextTag, udg_wanjiazu[0])
call DestroyForce(udg_wanjiazu[0])
else
endif
call ForGroupBJ(udg_danweizu2[91], function Trig_emo_2Func001Func003Func003Func005Func003Func007A)
else
endif
else
endif
else
call ForGroupBJ(udg_danweizu2[91], function Trig_emo_2Func001Func003Func003Func002A)
endif
call RemoveLocation(udg_dian2[2])
call RemoveLocation(udg_dian2[1])
else
set udg_danwei2[91]=null
call DestroyGroup(udg_danweizu2[91])
call PauseTimer(udg_times[91])
endif
else
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_emo_2 takes nothing returns nothing
set gg_trg_emo_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_emo_2, udg_times[91])
call TriggerAddAction(gg_trg_emo_2, function Trig_emo_2Actions)
endfunction
function Trig_emo_3Actions takes nothing returns nothing
set udg_Dian[89]=GetUnitLoc(udg_danwei2[91])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[91]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304B4F)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_danwei2[91])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
endfunction
function InitTrig_emo_3 takes nothing returns nothing
set gg_trg_emo_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_emo_3, udg_jishiqi[141])
call TriggerAddAction(gg_trg_emo_3, function Trig_emo_3Actions)
endfunction
function Trig_Damon_Lord_Walk_0Conditions takes nothing returns boolean
return ( ( GetLearnedSkill() == 0x41303934 ) and ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true ) )
endfunction
function Trig_Damon_Lord_Walk_0Actions takes nothing returns nothing
set udg_Danwei[20]=GetTriggerUnit()
if ( ( GetUnitAbilityLevel(udg_Danwei[20], 0x41303934) == 1 ) ) then
set udg_Zhengshu[19]=2
else
endif
set udg_Danwei[20]=null
endfunction
function InitTrig_Damon_Lord_Walk_0 takes nothing returns nothing
set gg_trg_Damon_Lord_Walk_0=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Damon_Lord_Walk_0, EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(gg_trg_Damon_Lord_Walk_0, Condition(function Trig_Damon_Lord_Walk_0Conditions))
call TriggerAddAction(gg_trg_Damon_Lord_Walk_0, function Trig_Damon_Lord_Walk_0Actions)
endfunction
function Trig_Damon_Lord_Walk_1Actions takes nothing returns nothing
set udg_Danwei[20]=GetSpellAbilityUnit()
set udg_dian2[0]=GetUnitLoc(udg_Danwei[20])
set udg_Danwei[19]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[20]), 0x65303338, udg_dian2[0], GetUnitFacing(udg_Danwei[20]))
call StopSoundBJ(gg_snd_HeroDemonMissileLaunch2, false)
call PlaySoundOnUnitBJ(gg_snd_HeroDemonMissileLaunch2, 100, udg_Danwei[20])
set udg_Zhengshu[17]=0
set udg_Zhengshu[20]=0
call StartTimerBJ(udg_Times[19], true, 0.02)
call PauseTimer(udg_Times[20])
call StartTimerBJ(udg_Times[20], false, ( 10.00 - ( 1.00 * I2R(GetUnitAbilityLevel(udg_Danwei[20], 0x41303934)) ) ))
set udg_Danweizu[20]=CreateGroup()
call SetUnitTurnSpeed(udg_Danwei[20], 0.00)
call SetUnitAnimation(udg_Danwei[20], "spell")
call RemoveLocation(udg_dian2[0])
call StartTimerBJ(udg_jishiqi[151], false, 0.00)
endfunction
function InitTrig_Damon_Lord_Walk_1 takes nothing returns nothing
set gg_trg_Damon_Lord_Walk_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_Damon_Lord_Walk_1 , 3 , 0x41303934)
call TriggerAddAction(gg_trg_Damon_Lord_Walk_1, function Trig_Damon_Lord_Walk_1Actions)
endfunction
function Trig_Damon_Lord_Walk_2Func001Func002Func019A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_Danweizu[20]) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_Danwei[20])) == true ) ) then
set udg_Zhengshu[17]=( udg_Zhengshu[17] + 1 )
if ( ( udg_Zhengshu[17] == 1 ) ) then
call PlaySoundOnUnitBJ(gg_snd_MetalHeavySliceFlesh2, 100, udg_danwei2[1])
set udg_zhengshu2[84]=( udg_zhengshu2[84] + 1 )
call PauseTimer(udg_times[84])
call StartTimerBJ(udg_times[84], false, 2.00)
if ( ( udg_zhengshu2[84] > 1 ) ) then
call UnitDamageTarget(udg_Danwei[20], udg_danwei2[1], ( I2R(GetHeroAgi(udg_Danwei[20], true)) * 0.50 ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
call CreateTextTagLocBJ(( I2S(udg_zhengshu2[84]) + " Hit!" ), udg_dian2[0], 0, 12.00, 100, 0.00, 0.00, 0)
call SetTextTagPermanent(GetLastCreatedTextTag(), false)
call SetTextTagVelocity(bj_lastCreatedTextTag, 0.00, 0.06)
call SetTextTagFadepoint(GetLastCreatedTextTag(), 1.50)
call SetTextTagLifespan(GetLastCreatedTextTag(), 2.00)
call SetTextTagVisibility(bj_lastCreatedTextTag, false)
set udg_wanjiazu[0]=CreateForce()
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ( ( IsUnitVisible(udg_Danwei[20], s__baka_SPlayer(bj_forLoopAIndex - 1)) == true ) ) then
call ForceAddPlayer(udg_wanjiazu[0], s__baka_SPlayer(bj_forLoopAIndex - 1))
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call ShowTextTagForceBJ(true, bj_lastCreatedTextTag, udg_wanjiazu[0])
call DestroyForce(udg_wanjiazu[0])
else
endif
else
endif
call GroupAddUnit(udg_Danweizu[20], udg_danwei2[1])
call UnitDamageTarget(udg_Danwei[20], udg_danwei2[1], ( ( 20.00 * I2R(GetUnitAbilityLevel(udg_Danwei[20], 0x41303934)) ) + ( 1.00 * I2R(GetHeroAgi(udg_Danwei[20], true)) ) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_HEAVY_SLICE)
call s__baka_IssueTargetOrderById2(udg_Danwei[19] , 852075 , udg_danwei2[1])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_Damon_Lord_Walk_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( IsUnitPausedBJ(udg_Danwei[20]) == false ) ) then
if ( ( udg_Zhengshu[20] < 10 ) ) then
set udg_Zhengshu[20]=( udg_Zhengshu[20] + 1 )
set udg_dian2[0]=GetUnitLoc(udg_Danwei[20])
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 60.00, GetUnitFacing(udg_Danwei[20]))
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_Danwei[20], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_Danwei[20], GetLocationY(udg_dian2[1]))
else
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SerpentWardMissile\\SerpentWardMissile.mdl", udg_Danwei[20], "hand left"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SerpentWardMissile\\SerpentWardMissile.mdl", udg_Danwei[20], "hand right"))
call SetUnitVertexColor(udg_Danwei[20], 255, 255, 255, ( 26 * udg_Zhengshu[20] ))
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(125.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_Damon_Lord_Walk_2Func001Func002Func019A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
call RemoveUnit(udg_Danwei[19])
call DestroyGroup(udg_Danweizu[20])
set udg_Zhengshu[18]=GetUnitAbilityLevel(udg_Danwei[20], 0x41303934)
set udg_Zhengshu[19]=( udg_Zhengshu[19] - 1 )
if ( ( udg_Zhengshu[17] >= 1 ) and ( udg_Zhengshu[19] > 0 ) ) then
call UnitRemoveAbility(udg_Danwei[20], 0x41303934)
call UnitAddAbility(udg_Danwei[20], 0x41303934)
call SetUnitAbilityLevel(udg_Danwei[20], 0x41303934, udg_Zhengshu[18])
else
endif
call PauseTimer(udg_Times[19])
call SetUnitTurnSpeed(udg_Danwei[20], GetUnitDefaultTurnSpeed(udg_Danwei[20]))
set udg_Danwei[19]=null
set udg_Danwei[20]=null
endif
else
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_Damon_Lord_Walk_2 takes nothing returns nothing
set gg_trg_Damon_Lord_Walk_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_Damon_Lord_Walk_2, udg_Times[19])
call TriggerAddAction(gg_trg_Damon_Lord_Walk_2, function Trig_Damon_Lord_Walk_2Actions)
endfunction
function Trig_Damon_Lord_Walk_3Actions takes nothing returns nothing
set udg_Zhengshu[19]=2
endfunction
function InitTrig_Damon_Lord_Walk_3 takes nothing returns nothing
set gg_trg_Damon_Lord_Walk_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_Damon_Lord_Walk_3, udg_Times[20])
call TriggerAddAction(gg_trg_Damon_Lord_Walk_3, function Trig_Damon_Lord_Walk_3Actions)
endfunction
function Trig_Damon_Lord_Walk_4Actions takes nothing returns nothing
set udg_Dian[89]=GetUnitLoc(udg_Danwei[20])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[20]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304C36)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_Danwei[20])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
endfunction
function InitTrig_Damon_Lord_Walk_4 takes nothing returns nothing
set gg_trg_Damon_Lord_Walk_4=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_Damon_Lord_Walk_4, udg_jishiqi[151])
call TriggerAddAction(gg_trg_Damon_Lord_Walk_4, function Trig_Damon_Lord_Walk_4Actions)
endfunction
function Trig_shenqiang_1Actions takes nothing returns nothing
set udg_danwei2[71]=GetSpellAbilityUnit()
set udg_danwei2[72]=GetSpellTargetUnit()
set udg_dian2[1]=GetUnitLoc(udg_danwei2[71])
set udg_dian2[2]=GetUnitLoc(udg_danwei2[72])
set udg_dian2[3]=PolarProjectionBJ(udg_dian2[1], 400.00, AngleBetweenPoints(udg_dian2[2], udg_dian2[1]))
set udg_danwei2[73]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[71]), 0x6530325A, udg_dian2[3], AngleBetweenPoints(udg_dian2[1], udg_dian2[2]))
call GroupAddUnit(udg_DAZE[0], udg_danwei2[73])
call GroupAddUnit(udg_DAZE[1], udg_danwei2[73])
set udg_zhengshu2[71]=0
set udg_zhengshu2[72]=0
set udg_zhengshu2[73]=0
call SetUnitTimeScale(udg_danwei2[73], 2.00)
call PlaySoundOnUnitBJ(gg_snd_CrippleTarget1, 100, udg_danwei2[71])
call StartTimerBJ(udg_times[71], true, 0.05)
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
call RemoveLocation(udg_dian2[3])
endfunction
function InitTrig_shenqiang_1 takes nothing returns nothing
set gg_trg_shenqiang_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_shenqiang_1 , 3 , 0x41303830)
call TriggerAddAction(gg_trg_shenqiang_1, function Trig_shenqiang_1Actions)
endfunction
function Trig_shenqiang_2Func004Func002A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[71])) == true ) ) then
call UnitDamageTarget(udg_danwei2[71], udg_danwei2[1], ( ( 3.00 + ( I2R(GetHeroAgi(udg_danwei2[73], true)) * 0.05 ) ) + ( 6.00 * I2R(GetUnitAbilityLevel(udg_danwei2[71], 0x41303830)) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
if ( ( udg_danwei2[1] == udg_danwei2[72] ) ) then
if ( ( udg_zhengshu2[72] == 3 ) ) then
if ( ( udg_zhengshu2[73] < 4 ) ) then
call StopSoundBJ(gg_snd_MetalHeavySliceFlesh3, false)
call PlaySoundOnUnitBJ(gg_snd_MetalHeavySliceFlesh3, 100, udg_danwei2[1])
else
call StopSoundBJ(gg_snd_MetalHeavySliceMetal2, false)
call PlaySoundOnUnitBJ(gg_snd_MetalHeavySliceMetal2, 100, udg_danwei2[1])
endif
set udg_dian2[0]=GetUnitLoc(udg_danwei2[72])
set udg_dian2[4]=PolarProjectionBJ(udg_dian2[0], 50.00, GetUnitFacing(udg_danwei2[73]))
set udg_dian2[5]=PolarProjectionBJ(udg_dian2[1], 50.00, GetUnitFacing(udg_danwei2[73]))
if ( ( IsTerrainPathableBJ(udg_dian2[4], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[72], GetLocationX(udg_dian2[4]))
call SetUnitY(udg_danwei2[72], GetLocationY(udg_dian2[4]))
else
endif
call SetUnitX(udg_danwei2[73], GetLocationX(udg_dian2[5]))
call SetUnitY(udg_danwei2[73], GetLocationY(udg_dian2[5]))
call IssueImmediateOrderById(udg_danwei2[72], 851972)
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[4])
call RemoveLocation(udg_dian2[5])
set udg_zhengshu2[72]=0
set udg_zhengshu2[73]=( udg_zhengshu2[73] + 1 )
set udg_zhengshu2[84]=( udg_zhengshu2[84] + 1 )
call PauseTimer(udg_times[84])
call StartTimerBJ(udg_times[84], false, 2.00)
if ( ( udg_zhengshu2[84] > 1 ) ) then
call UnitDamageTarget(udg_danwei2[71], udg_danwei2[1], ( I2R(GetHeroAgi(udg_danwei2[71], true)) * 0.25 ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
call CreateTextTagLocBJ(( I2S(udg_zhengshu2[84]) + " Hit!" ), udg_dian2[3], 0, 12.00, 100, 0.00, 0.00, 0)
call SetTextTagPermanent(GetLastCreatedTextTag(), false)
call SetTextTagVelocity(bj_lastCreatedTextTag, 0.00, 0.06)
call SetTextTagFadepoint(GetLastCreatedTextTag(), 1.50)
call SetTextTagLifespan(GetLastCreatedTextTag(), 2.00)
call SetTextTagVisibility(bj_lastCreatedTextTag, false)
set udg_wanjiazu[0]=CreateForce()
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ( ( IsUnitVisible(udg_danwei2[71], s__baka_SPlayer(bj_forLoopAIndex - 1)) == true ) ) then
call ForceAddPlayer(udg_wanjiazu[0], s__baka_SPlayer(bj_forLoopAIndex - 1))
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call ShowTextTagForceBJ(true, bj_lastCreatedTextTag, udg_wanjiazu[0])
call DestroyForce(udg_wanjiazu[0])
else
endif
else
set udg_zhengshu2[72]=( udg_zhengshu2[72] + 1 )
endif
else
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[1])
endif
else
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[1])
endif
set udg_danwei2[1]=null
endfunction
function Trig_shenqiang_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu2[71]=( udg_zhengshu2[71] + 1 )
set udg_dian2[1]=GetUnitLoc(udg_danwei2[73])
set udg_dian2[3]=PolarProjectionBJ(udg_dian2[1], 400.00, GetUnitFacing(udg_danwei2[73]))
if ( ( udg_zhengshu2[71] <= 30 ) and ( udg_zhengshu2[73] <= 4 ) and ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_FLYABILITY) == false ) ) then
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(225.00 , udg_dian2[3])
call ForGroupBJ(udg_xuanqu, function Trig_shenqiang_2Func004Func002A)
if ( ( IsUnitGroupEmptyBJ(udg_xuanqu) == true ) ) then
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], 100.00, GetUnitFacing(udg_danwei2[73]))
else
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], 10.00, GetUnitFacing(udg_danwei2[73]))
endif
call SetUnitX(udg_danwei2[73], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[73], GetLocationY(udg_dian2[2]))
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[2])
set udg_aXUNHUAN[148]=1
loop
exitwhen udg_aXUNHUAN[148] > 4
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[3], ( 35.00 * I2R(udg_aXUNHUAN[148]) ), GetUnitFacing(udg_danwei2[73]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\AncestralGuardianMissile\\AncestralGuardianMissile.mdl", udg_dian2[2]))
call RemoveLocation(udg_dian2[2])
set udg_aXUNHUAN[148]=udg_aXUNHUAN[148] + 1
endloop
else
call KillUnit(udg_danwei2[73])
set udg_danwei2[71]=null
set udg_danwei2[72]=null
set udg_danwei2[73]=null
call PauseTimer(udg_times[71])
endif
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[3])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_shenqiang_2 takes nothing returns nothing
set gg_trg_shenqiang_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_shenqiang_2, udg_times[71])
call TriggerAddAction(gg_trg_shenqiang_2, function Trig_shenqiang_2Actions)
endfunction
function Trig_hongmo_1Actions takes nothing returns nothing
set udg_danwei2[77]=GetSpellAbilityUnit()
set udg_dian2[77]=GetUnitLoc(udg_danwei2[77])
set udg_zhengshu2[77]=0
set udg_danweizu2[77]=CreateGroup()
call PlaySoundOnUnitBJ(gg_snd_parFir00, 100, udg_danwei2[77])
call SetUnitAnimation(udg_danwei2[77], "spell channel")
call StartTimerBJ(udg_times[77], true, 0.05)
call UnitAddAbility(udg_danwei2[77], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[77] , 300.00 , 450.00)
call UnitRemoveAbility(udg_danwei2[77], 0x41726176)
call PauseTimer(udg_times[84])
call StartTimerBJ(udg_jishiqi[142], false, 0.00)
endfunction
function InitTrig_hongmo_1 takes nothing returns nothing
set gg_trg_hongmo_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_hongmo_1 , 3 , 0x41303939)
call TriggerAddAction(gg_trg_hongmo_1, function Trig_hongmo_1Actions)
endfunction
function Trig_hongmo_2Func001Func003Func008Func002Func001A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
call UnitAddAbility(udg_danwei2[1], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[1] , 0.00 , 600.00)
call UnitRemoveAbility(udg_danwei2[1], 0x41726176)
call s__Unit_PauseUnitMU(udg_danwei2[1] , false , "红色不夜城")
set udg_danwei2[1]=null
endfunction
function Trig_hongmo_2Func001Func003Func008Func007A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[77])) == true ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[1])
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[77], RMaxBJ(( DistanceBetweenPoints(udg_dian2[0], udg_dian2[77]) - 10.00 ), 150.00), AngleBetweenPoints(udg_dian2[77], udg_dian2[0]))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl", udg_danwei2[1], "chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\LordofFlameMissile\\LordofFlameMissile.mdl", udg_danwei2[1], "chest"))
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[1]))
call UnitAddAbility(udg_danwei2[1], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[1] , ( s__maphack_GetHeight(udg_danwei2[1]) + 10.00 ) , 0.00)
call UnitRemoveAbility(udg_danwei2[1], 0x41726176)
call UnitDamageTarget(udg_danwei2[77], udg_danwei2[1], ( 12.50 + ( ( I2R(GetHeroAgi(udg_danwei2[77], true)) / 40.00 ) * ( 2.00 + ( I2R(udg_zhengshu2[84]) * 0.50 ) ) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call s__Unit_PauseUnitMU(udg_danwei2[1] , true , "红色不夜城")
call GroupAddUnit(udg_danweizu2[77], udg_danwei2[1])
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_hongmo_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( IsUnitPausedBJ(udg_danwei2[77]) == false ) ) then
set udg_zhengshu2[77]=( udg_zhengshu2[77] + 1 )
if ( ( udg_zhengshu2[77] <= 70 ) ) then
if ( ( udg_zhengshu2[77] <= 40 ) ) then
if ( ( ( udg_zhengshu2[77] == 10 ) or ( udg_zhengshu2[77] == 20 ) or ( udg_zhengshu2[77] == 30 ) or ( udg_zhengshu2[77] == 40 ) ) ) then
call StopSoundBJ(gg_snd_parFir00, false)
call PlaySoundOnUnitBJ(gg_snd_parFir00, 100, udg_danwei2[77])
else
endif
if ( ( udg_zhengshu2[77] <= 16 ) and ( ( I2R(udg_zhengshu2[77]) / 2.00 ) == I2R(( udg_zhengshu2[77] / 2 )) ) ) then
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[77]), 0x65303330, udg_dian2[77], 270.00)
call UnitApplyTimedLife(udg_danwei2[0], 0x42487765, 2.00)
call s__maphack_SetHeight(udg_danwei2[0] , ( 100.00 + ( 25.00 * I2R(udg_zhengshu2[77]) ) ) , 0.00)
call SetUnitTimeScale(udg_danwei2[0], 0.70)
call SetUnitAnimation(udg_danwei2[0], "birth")
set udg_danwei2[0]=null
else
endif
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(400.00 , udg_dian2[77])
call ForGroupBJ(udg_xuanqu, function Trig_hongmo_2Func001Func003Func008Func007A)
call DestroyGroup(udg_xuanqu)
else
if ( ( udg_zhengshu2[77] == 50 ) ) then
call ForGroupBJ(udg_danweizu2[77], function Trig_hongmo_2Func001Func003Func008Func002Func001A)
call GroupClear(udg_danweizu2[77])
call DestroyGroup(udg_danweizu2[77])
else
endif
if ( ( udg_zhengshu2[77] == 60 ) ) then
call AddUnitAnimationProperties(udg_danwei2[77], "channel", false)
call UnitAddAbility(udg_danwei2[77], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[77] , 0.00 , 600.00)
call UnitRemoveAbility(udg_danwei2[77], 0x41726176)
else
endif
endif
else
call StartTimerBJ(udg_times[84], false, 0.00)
call UnitAddAbility(udg_danwei2[77], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[77] , 0.00 , 0.00)
call UnitRemoveAbility(udg_danwei2[77], 0x41726176)
call PauseTimer(udg_times[77])
set udg_danwei2[77]=null
call RemoveLocation(udg_dian2[77])
endif
else
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_hongmo_2 takes nothing returns nothing
set gg_trg_hongmo_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_hongmo_2, udg_times[77])
call TriggerAddAction(gg_trg_hongmo_2, function Trig_hongmo_2Actions)
endfunction
function Trig_hongmo_3Actions takes nothing returns nothing
set udg_Dian[89]=GetUnitLoc(udg_danwei2[77])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[77]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x4130384E)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_danwei2[77])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
endfunction
function InitTrig_hongmo_3 takes nothing returns nothing
set gg_trg_hongmo_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_hongmo_3, udg_jishiqi[142])
call TriggerAddAction(gg_trg_hongmo_3, function Trig_hongmo_3Actions)
endfunction
function Trig_yuansuzuheActions takes nothing returns nothing
set udg_yuansu[0]=0x41304654
set udg_yuansu[1]=0x41304336
set udg_yuansu[2]=0x41304337
set udg_yuansu[3]=0x41304338
set udg_yuansu[4]=0x41304339
set udg_yuansu[5]=0x41304341
set udg_yuansu[6]=0x41304346
set udg_yuansu[7]=0x41304343
set udg_yuansu[8]=0x41304347
set udg_yuansu[9]=0x41304349
set udg_yuansu[10]=0x4130434C
set udg_yuansu[11]=0x41304345
set udg_yuansu[12]=0x41304344
set udg_yuansu[13]=0x41304348
set udg_yuansu[14]=0x4130434A
set udg_yuansu[15]=0x4130434B
set udg_yuansu[16]=0x41304353
set udg_yuansu[17]=0x41304356
set udg_yuansu[18]=0x41304352
set udg_yuansu[19]=0x41304355
set udg_yuansu[20]=0x41304354
set udg_yuansu[21]=0x41304357
set udg_yuansu[22]=0x41304431
set udg_yuansu[23]=0x41304430
set udg_yuansu[24]=0x41304350
set udg_yuansu[25]=0x4130435A
set udg_yuansu[26]=0x41304351
set udg_yuansu[27]=0x4130434D
set udg_yuansu[28]=0x41304359
set udg_yuansu[29]=0x41304358
set udg_yuansu[30]=0x41304433
set udg_yuansu[31]=0x4130434F
set udg_yuansu[32]=0x4130434E
set udg_yuansu[33]=0x41304632
set udg_yuansu[34]=0x41304432
set udg_zhengshu2[202]=- 1
set udg_attackforce[0]=0x41304730
set udg_attackforce[1]=0x4130465A
set udg_attackforce[2]=0x41304731
set udg_attackforce[3]=0x41304732
set udg_attackforce[4]=0x41304733
set udg_attackforce[5]=0x41304734
set udg_attackforce[6]=0x41304735
set udg_attackforce[7]=0x41304736
set udg_attackforce[8]=0x41304737
set udg_attackforce[9]=0x41304738
set udg_attackforce[10]=0x41304739
set udg_attackforce[11]=0x41304741
set udg_Defense[0]=0x41303547
set udg_Defense[1]=0x41304955
set udg_Defense[2]=0x41304956
set udg_Defense[3]=0x41304957
set udg_Defense[4]=0x41304958
set udg_Defense[5]=0x41304959
set udg_Defense[6]=0x4130495A
set udg_Defense[7]=0x41304A30
set udg_Defense[8]=0x41304A31
set udg_Defense[9]=0x41304A32
set udg_Defense[10]=0x41304A33
set udg_Defense[11]=0x41304A34
set udg_mp[0]=0x41304B37
set udg_mp[1]=0x41304B38
set udg_mp[2]=0x41304B39
set udg_mp[3]=0x41304B41
set udg_mp[4]=0x41304B42
set udg_mp[5]=0x41304B43
set udg_mp[6]=0x41304B44
set udg_mp[7]=0x41304B45
set udg_mp[8]=0x41304B46
set udg_mp[9]=0x41304B47
set udg_mp[10]=0x41304B48
set udg_mp[11]=0x41304B49
set udg_mp[12]=0x41304B4A
set udg_mp[13]=0x41304B4B
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_aXUNHUAN[198]=0
loop
exitwhen udg_aXUNHUAN[198] > 11
call SetPlayerAbilityAvailable(s__baka_SPlayer(bj_forLoopAIndex - 1), udg_Defense[udg_aXUNHUAN[198]], false)
set udg_aXUNHUAN[198]=udg_aXUNHUAN[198] + 1
endloop
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
endfunction
function InitTrig_yuansuzuhe takes nothing returns nothing
set gg_trg_yuansuzuhe=CreateTrigger()
call TriggerRegisterTimerEventSingle(gg_trg_yuansuzuhe, 0.00)
call TriggerAddAction(gg_trg_yuansuzuhe, function Trig_yuansuzuheActions)
endfunction
function Trig_yuansupeizhi_0Conditions takes nothing returns boolean
return ( ( ( GetLearnedSkill() == 0x41304334 ) or ( GetLearnedSkill() == 0x41304335 ) or ( GetLearnedSkill() == 0x41304453 ) ) and ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true ) )
endfunction
function Trig_yuansupeizhi_0Actions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
if ( ( ( GetLearnedSkill() == 0x41304334 ) or ( GetLearnedSkill() == 0x41304335 ) ) and ( ( ( GetUnitAbilityLevel(udg_danwei2[0], 0x41304334) == 1 ) and ( GetUnitAbilityLevel(udg_danwei2[0], 0x41304335) == 0 ) ) or ( ( GetUnitAbilityLevel(udg_danwei2[0], 0x41304334) == 0 ) and ( GetUnitAbilityLevel(udg_danwei2[0], 0x41304335) == 1 ) ) ) ) then
set udg_danwei2[264]=GetTriggerUnit()
call UnitAddAbility(udg_danwei2[0], udg_yuansu[0])
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=33
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call UnitAddAbility(udg_danwei2[0], udg_yuansu[bj_forLoopAIndex])
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[bj_forLoopAIndex], false)
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call EnableTrigger(gg_trg_yuansu_cdlevel)
else
endif
if ( ( GetLearnedSkill() == 0x41304334 ) and ( GetUnitAbilityLevel(udg_danwei2[0], 0x41304334) == 1 ) ) then
set udg_aXUNHUAN[149]=1
loop
exitwhen udg_aXUNHUAN[149] > 2
if ( ( udg_zhengshu2[202] != 0 ) and ( udg_zhengshu2[202] != 1 ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[udg_aXUNHUAN[149]], false)
else
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[udg_aXUNHUAN[149]], true)
endif
set udg_aXUNHUAN[149]=udg_aXUNHUAN[149] + 1
endloop
set udg_aXUNHUAN[150]=1
loop
exitwhen udg_aXUNHUAN[150] > 10
call SetPlayerTechResearchedSwap(0x52303034, 1, s__baka_SPlayer(udg_aXUNHUAN[150] - 1))
set udg_aXUNHUAN[150]=udg_aXUNHUAN[150] + 1
endloop
else
endif
if ( ( GetLearnedSkill() == 0x41304335 ) and ( GetUnitAbilityLevel(udg_danwei2[0], 0x41304335) == 1 ) ) then
set udg_aXUNHUAN[151]=3
loop
exitwhen udg_aXUNHUAN[151] > 5
if ( ( udg_zhengshu2[202] != 0 ) and ( udg_zhengshu2[202] != 1 ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[udg_aXUNHUAN[151]], false)
else
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[udg_aXUNHUAN[151]], true)
endif
set udg_aXUNHUAN[151]=udg_aXUNHUAN[151] + 1
endloop
set udg_aXUNHUAN[152]=1
loop
exitwhen udg_aXUNHUAN[152] > 10
call SetPlayerTechResearchedSwap(0x52303035, 1, s__baka_SPlayer(udg_aXUNHUAN[152] - 1))
set udg_aXUNHUAN[152]=udg_aXUNHUAN[152] + 1
endloop
else
endif
if ( ( GetLearnedSkill() == 0x41304453 ) and ( GetUnitAbilityLevel(udg_danwei2[0], 0x41304453) == 1 ) ) then
set udg_aXUNHUAN[153]=1
loop
exitwhen udg_aXUNHUAN[153] > 10
call SetPlayerTechResearchedSwap(0x52303032, 1, s__baka_SPlayer(udg_aXUNHUAN[153] - 1))
set udg_aXUNHUAN[153]=udg_aXUNHUAN[153] + 1
endloop
else
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_yuansupeizhi_0 takes nothing returns nothing
set gg_trg_yuansupeizhi_0=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_yuansupeizhi_0, EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(gg_trg_yuansupeizhi_0, Condition(function Trig_yuansupeizhi_0Conditions))
call TriggerAddAction(gg_trg_yuansupeizhi_0, function Trig_yuansupeizhi_0Actions)
endfunction
function Trig_yuansupeizhi_1Conditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41304654 ) )
endfunction
function Trig_yuansupeizhi_1Actions takes nothing returns nothing
set udg_danwei2[264]=GetTriggerUnit()
set udg_danwei2[0]=GetSpellAbilityUnit()
set udg_zhengshu2[202]=0
set udg_aXUNHUAN[154]=1
loop
exitwhen udg_aXUNHUAN[154] > 5
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[udg_aXUNHUAN[154]], true)
set udg_aXUNHUAN[154]=udg_aXUNHUAN[154] + 1
endloop
set udg_aXUNHUAN[155]=6
loop
exitwhen udg_aXUNHUAN[155] > 33
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[udg_aXUNHUAN[155]], false)
set udg_aXUNHUAN[155]=udg_aXUNHUAN[155] + 1
endloop
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[0], false)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[34], false)
set udg_danwei2[0]=null
endfunction
function InitTrig_yuansupeizhi_1 takes nothing returns nothing
set gg_trg_yuansupeizhi_1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_yuansupeizhi_1, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_yuansupeizhi_1, Condition(function Trig_yuansupeizhi_1Conditions))
call TriggerAddAction(gg_trg_yuansupeizhi_1, function Trig_yuansupeizhi_1Actions)
endfunction
function Trig_yuansupeizhi_2Actions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=5
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[bj_forLoopAIndex], false)
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[0], true)
if ( ( ( udg_zhengshu2[202] == 0 ) or ( udg_zhengshu2[202] == 1 ) ) ) then
set udg_zhengshu2[3]=GetUnitAbilityLevel(udg_danwei2[264], 0x41304654)
call UnitRemoveAbility(udg_danwei2[264], 0x41304654)
call UnitAddAbility(udg_danwei2[264], 0x41304654)
call SetUnitAbilityLevel(udg_danwei2[264], 0x41304654, udg_zhengshu2[3])
else
endif
set udg_zhengshu2[202]=2
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[34], true)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[( udg_zhengshu2[200] + 5 )], true)
if ( ( udg_zhengshu2[200] == udg_zhengshu2[201] ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[( udg_zhengshu2[200] + 10 )], true)
if ( ( udg_zhengshu2[200] < 3 ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[31], true)
else
if ( ( udg_zhengshu2[200] < 5 ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[32], true)
else
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[33], true)
endif
endif
else
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[( udg_zhengshu2[201] + 15 )], true)
if ( ( ( ( udg_zhengshu2[200] == 1 ) and ( udg_zhengshu2[201] == 2 ) ) or ( ( udg_zhengshu2[200] == 2 ) and ( udg_zhengshu2[201] == 1 ) ) ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[21], true)
else
endif
if ( ( ( ( udg_zhengshu2[200] == 1 ) and ( udg_zhengshu2[201] == 3 ) ) or ( ( udg_zhengshu2[200] == 3 ) and ( udg_zhengshu2[201] == 1 ) ) ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[22], true)
else
endif
if ( ( ( ( udg_zhengshu2[200] == 1 ) and ( udg_zhengshu2[201] == 4 ) ) or ( ( udg_zhengshu2[200] == 4 ) and ( udg_zhengshu2[201] == 1 ) ) ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[23], true)
else
endif
if ( ( ( ( udg_zhengshu2[200] == 1 ) and ( udg_zhengshu2[201] == 5 ) ) or ( ( udg_zhengshu2[200] == 5 ) and ( udg_zhengshu2[201] == 1 ) ) ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[24], true)
else
endif
if ( ( ( ( udg_zhengshu2[200] == 2 ) and ( udg_zhengshu2[201] == 3 ) ) or ( ( udg_zhengshu2[200] == 3 ) and ( udg_zhengshu2[201] == 2 ) ) ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[25], true)
else
endif
if ( ( ( ( udg_zhengshu2[200] == 2 ) and ( udg_zhengshu2[201] == 4 ) ) or ( ( udg_zhengshu2[200] == 4 ) and ( udg_zhengshu2[201] == 2 ) ) ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[26], true)
else
endif
if ( ( ( ( udg_zhengshu2[200] == 2 ) and ( udg_zhengshu2[201] == 5 ) ) or ( ( udg_zhengshu2[200] == 5 ) and ( udg_zhengshu2[201] == 2 ) ) ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[27], true)
else
endif
if ( ( ( ( udg_zhengshu2[200] == 3 ) and ( udg_zhengshu2[201] == 4 ) ) or ( ( udg_zhengshu2[200] == 4 ) and ( udg_zhengshu2[201] == 3 ) ) ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[28], true)
else
endif
if ( ( ( ( udg_zhengshu2[200] == 3 ) and ( udg_zhengshu2[201] == 5 ) ) or ( ( udg_zhengshu2[200] == 5 ) and ( udg_zhengshu2[201] == 3 ) ) ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[29], true)
else
endif
if ( ( ( ( udg_zhengshu2[200] == 4 ) and ( udg_zhengshu2[201] == 5 ) ) or ( ( udg_zhengshu2[200] == 5 ) and ( udg_zhengshu2[201] == 4 ) ) ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[30], true)
else
endif
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_yuansupeizhi_2 takes nothing returns nothing
set gg_trg_yuansupeizhi_2=CreateTrigger()
call TriggerAddAction(gg_trg_yuansupeizhi_2, function Trig_yuansupeizhi_2Actions)
endfunction
function Trig_yuansupeizhi_2_5Actions takes nothing returns nothing
set udg_aXUNHUAN[156]=1
loop
exitwhen udg_aXUNHUAN[156] > 5
call SetPlayerAbilityAvailable(GetTriggerPlayer(), udg_yuansu[udg_aXUNHUAN[156]], false)
set udg_aXUNHUAN[156]=udg_aXUNHUAN[156] + 1
endloop
call SetPlayerAbilityAvailable(GetTriggerPlayer(), udg_yuansu[0], true)
if ( ( ( udg_zhengshu2[202] == 0 ) or ( udg_zhengshu2[202] == 1 ) ) ) then
set udg_zhengshu2[3]=GetUnitAbilityLevel(udg_danwei2[264], 0x41304654)
call UnitRemoveAbility(udg_danwei2[264], 0x41304654)
call UnitAddAbility(udg_danwei2[264], 0x41304654)
call SetUnitAbilityLevel(udg_danwei2[264], 0x41304654, udg_zhengshu2[3])
else
endif
set udg_zhengshu2[202]=2
call SetPlayerAbilityAvailable(GetTriggerPlayer(), udg_yuansu[34], true)
call SetPlayerAbilityAvailable(GetTriggerPlayer(), udg_yuansu[( udg_zhengshu2[200] + 5 )], true)
if ( ( udg_zhengshu2[200] == udg_zhengshu2[201] ) ) then
call SetPlayerAbilityAvailable(GetTriggerPlayer(), udg_yuansu[( udg_zhengshu2[200] + 10 )], true)
if ( ( udg_zhengshu2[200] < 3 ) ) then
call SetPlayerAbilityAvailable(GetTriggerPlayer(), udg_yuansu[31], true)
else
if ( ( udg_zhengshu2[200] < 5 ) ) then
call SetPlayerAbilityAvailable(GetTriggerPlayer(), udg_yuansu[32], true)
else
call SetPlayerAbilityAvailable(GetTriggerPlayer(), udg_yuansu[33], true)
endif
endif
else
call SetPlayerAbilityAvailable(GetTriggerPlayer(), udg_yuansu[( udg_zhengshu2[201] + 15 )], true)
if ( ( ( ( udg_zhengshu2[200] == 1 ) and ( udg_zhengshu2[201] == 2 ) ) or ( ( udg_zhengshu2[200] == 2 ) and ( udg_zhengshu2[201] == 1 ) ) ) ) then
call SetPlayerAbilityAvailable(GetTriggerPlayer(), udg_yuansu[21], true)
else
endif
if ( ( ( ( udg_zhengshu2[200] == 1 ) and ( udg_zhengshu2[201] == 3 ) ) or ( ( udg_zhengshu2[200] == 3 ) and ( udg_zhengshu2[201] == 1 ) ) ) ) then
call SetPlayerAbilityAvailable(GetTriggerPlayer(), udg_yuansu[22], true)
else
endif
if ( ( ( ( udg_zhengshu2[200] == 1 ) and ( udg_zhengshu2[201] == 4 ) ) or ( ( udg_zhengshu2[200] == 4 ) and ( udg_zhengshu2[201] == 1 ) ) ) ) then
call SetPlayerAbilityAvailable(GetTriggerPlayer(), udg_yuansu[23], true)
else
endif
if ( ( ( ( udg_zhengshu2[200] == 1 ) and ( udg_zhengshu2[201] == 5 ) ) or ( ( udg_zhengshu2[200] == 5 ) and ( udg_zhengshu2[201] == 1 ) ) ) ) then
call SetPlayerAbilityAvailable(GetTriggerPlayer(), udg_yuansu[24], true)
else
endif
if ( ( ( ( udg_zhengshu2[200] == 2 ) and ( udg_zhengshu2[201] == 3 ) ) or ( ( udg_zhengshu2[200] == 3 ) and ( udg_zhengshu2[201] == 2 ) ) ) ) then
call SetPlayerAbilityAvailable(GetTriggerPlayer(), udg_yuansu[25], true)
else
endif
if ( ( ( ( udg_zhengshu2[200] == 2 ) and ( udg_zhengshu2[201] == 4 ) ) or ( ( udg_zhengshu2[200] == 4 ) and ( udg_zhengshu2[201] == 2 ) ) ) ) then
call SetPlayerAbilityAvailable(GetTriggerPlayer(), udg_yuansu[26], true)
else
endif
if ( ( ( ( udg_zhengshu2[200] == 2 ) and ( udg_zhengshu2[201] == 5 ) ) or ( ( udg_zhengshu2[200] == 5 ) and ( udg_zhengshu2[201] == 2 ) ) ) ) then
call SetPlayerAbilityAvailable(GetTriggerPlayer(), udg_yuansu[27], true)
else
endif
if ( ( ( ( udg_zhengshu2[200] == 3 ) and ( udg_zhengshu2[201] == 4 ) ) or ( ( udg_zhengshu2[200] == 4 ) and ( udg_zhengshu2[201] == 3 ) ) ) ) then
call SetPlayerAbilityAvailable(GetTriggerPlayer(), udg_yuansu[28], true)
else
endif
if ( ( ( ( udg_zhengshu2[200] == 3 ) and ( udg_zhengshu2[201] == 5 ) ) or ( ( udg_zhengshu2[200] == 5 ) and ( udg_zhengshu2[201] == 3 ) ) ) ) then
call SetPlayerAbilityAvailable(GetTriggerPlayer(), udg_yuansu[29], true)
else
endif
if ( ( ( ( udg_zhengshu2[200] == 4 ) and ( udg_zhengshu2[201] == 5 ) ) or ( ( udg_zhengshu2[200] == 5 ) and ( udg_zhengshu2[201] == 4 ) ) ) ) then
call SetPlayerAbilityAvailable(GetTriggerPlayer(), udg_yuansu[30], true)
else
endif
endif
endfunction
function InitTrig_yuansupeizhi_2_5 takes nothing returns nothing
set gg_trg_yuansupeizhi_2_5=CreateTrigger()
call TriggerAddAction(gg_trg_yuansupeizhi_2_5, function Trig_yuansupeizhi_2_5Actions)
endfunction
function Trig_yuansupeizhi_3Conditions takes nothing returns boolean
return ( ( ( GetSpellAbilityId() == 0x41304336 ) or ( GetSpellAbilityId() == 0x41304337 ) or ( GetSpellAbilityId() == 0x41304338 ) or ( GetSpellAbilityId() == 0x41304339 ) or ( GetSpellAbilityId() == 0x41304341 ) ) )
endfunction
function Trig_yuansupeizhi_3Actions takes nothing returns nothing
set udg_danwei2[264]=GetTriggerUnit()
set udg_danwei2[0]=GetSpellAbilityUnit()
set udg_zhengshu2[202]=( udg_zhengshu2[202] + 1 )
if ( ( udg_zhengshu2[202] == 1 ) ) then
if ( ( GetSpellAbilityId() == 0x41304336 ) ) then
set udg_zhengshu2[200]=1
else
endif
if ( ( GetSpellAbilityId() == 0x41304337 ) ) then
set udg_zhengshu2[200]=2
else
endif
if ( ( GetSpellAbilityId() == 0x41304338 ) ) then
set udg_zhengshu2[200]=3
else
endif
if ( ( GetSpellAbilityId() == 0x41304339 ) ) then
set udg_zhengshu2[200]=4
else
endif
if ( ( GetSpellAbilityId() == 0x41304341 ) ) then
set udg_zhengshu2[200]=5
else
endif
else
if ( ( udg_zhengshu2[202] == 2 ) ) then
if ( ( GetTriggerExecCount(GetTriggeringTrigger()) == 2 ) ) then
call TriggerRegisterUnitEvent(gg_trg_yuansupeizhi_2, udg_danwei2[0], EVENT_UNIT_DESELECTED)
call TriggerRegisterPlayerEventEndCinematic(gg_trg_yuansupeizhi_2_5, GetOwningPlayer(udg_danwei2[0]))
else
endif
if ( ( GetSpellAbilityId() == 0x41304336 ) ) then
set udg_zhengshu2[201]=1
else
endif
if ( ( GetSpellAbilityId() == 0x41304337 ) ) then
set udg_zhengshu2[201]=2
else
endif
if ( ( GetSpellAbilityId() == 0x41304338 ) ) then
set udg_zhengshu2[201]=3
else
endif
if ( ( GetSpellAbilityId() == 0x41304339 ) ) then
set udg_zhengshu2[201]=4
else
endif
if ( ( GetSpellAbilityId() == 0x41304341 ) ) then
set udg_zhengshu2[201]=5
else
endif
set udg_aXUNHUAN[157]=1
loop
exitwhen udg_aXUNHUAN[157] > 5
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[udg_aXUNHUAN[157]], false)
set udg_aXUNHUAN[157]=udg_aXUNHUAN[157] + 1
endloop
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[0], true)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[34], true)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[( udg_zhengshu2[200] + 5 )], true)
set udg_zhengshu2[3]=GetUnitAbilityLevel(udg_danwei2[0], 0x41304654)
call UnitRemoveAbility(udg_danwei2[0], 0x41304654)
call UnitAddAbility(udg_danwei2[0], 0x41304654)
call SetUnitAbilityLevel(udg_danwei2[0], 0x41304654, udg_zhengshu2[3])
if ( ( udg_zhengshu2[200] == udg_zhengshu2[201] ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[( udg_zhengshu2[200] + 10 )], true)
if ( ( udg_zhengshu2[200] < 3 ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[31], true)
else
if ( ( udg_zhengshu2[200] < 5 ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[32], true)
else
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[33], true)
endif
endif
else
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[( udg_zhengshu2[201] + 15 )], true)
if ( ( ( ( udg_zhengshu2[200] == 1 ) and ( udg_zhengshu2[201] == 2 ) ) or ( ( udg_zhengshu2[200] == 2 ) and ( udg_zhengshu2[201] == 1 ) ) ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[21], true)
else
endif
if ( ( ( ( udg_zhengshu2[200] == 1 ) and ( udg_zhengshu2[201] == 3 ) ) or ( ( udg_zhengshu2[200] == 3 ) and ( udg_zhengshu2[201] == 1 ) ) ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[22], true)
else
endif
if ( ( ( ( udg_zhengshu2[200] == 1 ) and ( udg_zhengshu2[201] == 4 ) ) or ( ( udg_zhengshu2[200] == 4 ) and ( udg_zhengshu2[201] == 1 ) ) ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[23], true)
else
endif
if ( ( ( ( udg_zhengshu2[200] == 1 ) and ( udg_zhengshu2[201] == 5 ) ) or ( ( udg_zhengshu2[200] == 5 ) and ( udg_zhengshu2[201] == 1 ) ) ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[24], true)
else
endif
if ( ( ( ( udg_zhengshu2[200] == 2 ) and ( udg_zhengshu2[201] == 3 ) ) or ( ( udg_zhengshu2[200] == 3 ) and ( udg_zhengshu2[201] == 2 ) ) ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[25], true)
else
endif
if ( ( ( ( udg_zhengshu2[200] == 2 ) and ( udg_zhengshu2[201] == 4 ) ) or ( ( udg_zhengshu2[200] == 4 ) and ( udg_zhengshu2[201] == 2 ) ) ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[26], true)
else
endif
if ( ( ( ( udg_zhengshu2[200] == 2 ) and ( udg_zhengshu2[201] == 5 ) ) or ( ( udg_zhengshu2[200] == 5 ) and ( udg_zhengshu2[201] == 2 ) ) ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[27], true)
else
endif
if ( ( ( ( udg_zhengshu2[200] == 3 ) and ( udg_zhengshu2[201] == 4 ) ) or ( ( udg_zhengshu2[200] == 4 ) and ( udg_zhengshu2[201] == 3 ) ) ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[28], true)
else
endif
if ( ( ( ( udg_zhengshu2[200] == 3 ) and ( udg_zhengshu2[201] == 5 ) ) or ( ( udg_zhengshu2[200] == 5 ) and ( udg_zhengshu2[201] == 3 ) ) ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[29], true)
else
endif
if ( ( ( ( udg_zhengshu2[200] == 4 ) and ( udg_zhengshu2[201] == 5 ) ) or ( ( udg_zhengshu2[200] == 5 ) and ( udg_zhengshu2[201] == 4 ) ) ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_danwei2[0]), udg_yuansu[30], true)
else
endif
endif
else
endif
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_yuansupeizhi_3 takes nothing returns nothing
set gg_trg_yuansupeizhi_3=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_yuansupeizhi_3, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_yuansupeizhi_3, Condition(function Trig_yuansupeizhi_3Conditions))
call TriggerAddAction(gg_trg_yuansupeizhi_3, function Trig_yuansupeizhi_3Actions)
endfunction
function Trig_linglihuifuConditions takes nothing returns boolean
return ( ( GetLearnedSkill() == 0x4130444C ) and ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true ) )
endfunction
function Trig_linglihuifuActions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
if ( ( GetUnitAbilityLevel(udg_danwei2[0], 0x4130444C) == 1 ) ) then
call UnitAddAbility(udg_danwei2[0], 0x4130444D)
set udg_danwei2[264]=GetTriggerUnit()
else
endif
call SetUnitAbilityLevel(udg_danwei2[0], 0x4130444A, GetUnitAbilityLevel(udg_danwei2[0], 0x4130444C))
set udg_danwei2[0]=null
endfunction
function InitTrig_linglihuifu takes nothing returns nothing
set gg_trg_linglihuifu=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_linglihuifu, EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(gg_trg_linglihuifu, Condition(function Trig_linglihuifuConditions))
call TriggerAddAction(gg_trg_linglihuifu, function Trig_linglihuifuActions)
endfunction
function Trig_yuansu_lv24Actions takes nothing returns nothing
if ( ( GetUnitLevel(GetTriggerUnit()) >= 6 ) ) then
call SetPlayerTechResearchedSwap(0x52303033, 1, GetOwningPlayer(GetTriggerUnit()))
else
endif
if ( ( GetUnitLevel(GetTriggerUnit()) >= 24 ) ) then
call SetPlayerTechResearchedSwap(0x52303031, 1, GetOwningPlayer(GetTriggerUnit()))
else
endif
endfunction
function InitTrig_yuansu_lv24 takes nothing returns nothing
set gg_trg_yuansu_lv24=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_yuansu_lv24, EVENT_PLAYER_HERO_LEVEL)
call TriggerAddAction(gg_trg_yuansu_lv24, function Trig_yuansu_lv24Actions)
endfunction
function Trig_yuansu_cdlevelActions takes nothing returns nothing
if ( ( udg_zhengshu2[374] == 0 ) ) then
call SetUnitAbilityLevel(udg_danwei2[264], 0x41304654, IMaxBJ(( GetUnitAbilityLevel(udg_danwei2[264], 0x41304654) - 1 ), 1))
else
set udg_zhengshu2[374]=( udg_zhengshu2[374] - 1 )
endif
endfunction
function InitTrig_yuansu_cdlevel takes nothing returns nothing
set gg_trg_yuansu_cdlevel=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_yuansu_cdlevel, 0.50)
call TriggerAddAction(gg_trg_yuansu_cdlevel, function Trig_yuansu_cdlevelActions)
endfunction
function Trig_yuansu_cdConditions takes nothing returns boolean
return ( ( GetUnitTypeId(GetTriggerUnit()) == 0x486B616C ) )
endfunction
function Trig_yuansu_cdActions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
if ( ( ( GetSpellAbilityId() == 0x41304343 ) or ( GetSpellAbilityId() == 0x41304356 ) or ( GetSpellAbilityId() == 0x41304346 ) or ( GetSpellAbilityId() == 0x41304353 ) or ( GetSpellAbilityId() == 0x41304347 ) or ( GetSpellAbilityId() == 0x41304352 ) or ( GetSpellAbilityId() == 0x41304349 ) or ( GetSpellAbilityId() == 0x41304355 ) or ( GetSpellAbilityId() == 0x4130434C ) or ( GetSpellAbilityId() == 0x41304354 ) or ( GetSpellAbilityId() == 0x41304345 ) or ( GetSpellAbilityId() == 0x41304344 ) or ( GetSpellAbilityId() == 0x41304348 ) or ( GetSpellAbilityId() == 0x4130434A ) or ( GetSpellAbilityId() == 0x4130434B ) ) ) then
set udg_zhengshu2[374]=IMinBJ(( udg_zhengshu2[374] + ( 15 - ( 1 * GetUnitAbilityLevel(udg_danwei2[0], 0x4130444C) ) ) ), 60)
call SetUnitAbilityLevel(udg_danwei2[0], 0x41304654, IMinBJ(( GetUnitAbilityLevel(udg_danwei2[0], 0x41304654) + 1 ), 13))
set udg_zhengshu2[3]=GetUnitAbilityLevel(udg_danwei2[0], 0x41304654)
call UnitRemoveAbility(udg_danwei2[0], 0x41304654)
call UnitAddAbility(udg_danwei2[0], 0x41304654)
call SetUnitAbilityLevel(udg_danwei2[0], 0x41304654, udg_zhengshu2[3])
call DisableTrigger(gg_trg_yuansupeizhi_1)
call IssueImmediateOrderById(udg_danwei2[0], 852100)
call EnableTrigger(gg_trg_yuansupeizhi_1)
else
endif
if ( ( ( GetSpellAbilityId() == 0x41304433 ) or ( GetSpellAbilityId() == 0x4130435A ) or ( GetSpellAbilityId() == 0x41304358 ) or ( GetSpellAbilityId() == 0x41304350 ) or ( GetSpellAbilityId() == 0x41304431 ) or ( GetSpellAbilityId() == 0x41304430 ) or ( GetSpellAbilityId() == 0x4130434D ) or ( GetSpellAbilityId() == 0x41304357 ) or ( GetSpellAbilityId() == 0x41304351 ) or ( GetSpellAbilityId() == 0x41304359 ) or ( GetSpellAbilityId() == 0x41304632 ) ) ) then
set udg_zhengshu2[374]=IMinBJ(( udg_zhengshu2[374] + ( 20 - ( 2 * GetUnitAbilityLevel(udg_danwei2[0], 0x4130444C) ) ) ), 60)
call SetUnitAbilityLevel(udg_danwei2[0], 0x41304654, IMinBJ(( GetUnitAbilityLevel(udg_danwei2[0], 0x41304654) + 2 ), 13))
set udg_zhengshu2[3]=GetUnitAbilityLevel(udg_danwei2[0], 0x41304654)
call UnitRemoveAbility(udg_danwei2[0], 0x41304654)
call UnitAddAbility(udg_danwei2[0], 0x41304654)
call SetUnitAbilityLevel(udg_danwei2[0], 0x41304654, udg_zhengshu2[3])
call DisableTrigger(gg_trg_yuansupeizhi_1)
call IssueImmediateOrderById(udg_danwei2[0], 852100)
call EnableTrigger(gg_trg_yuansupeizhi_1)
else
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_yuansu_cd takes nothing returns nothing
set gg_trg_yuansu_cd=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_yuansu_cd, EVENT_PLAYER_UNIT_SPELL_FINISH)
call TriggerAddCondition(gg_trg_yuansu_cd, Condition(function Trig_yuansu_cdConditions))
call TriggerAddAction(gg_trg_yuansu_cd, function Trig_yuansu_cdActions)
endfunction
function Trig_yuansu_cd_2Conditions takes nothing returns boolean
return ( ( GetUnitTypeId(GetTriggerUnit()) == 0x486B616C ) )
endfunction
function Trig_yuansu_cd_2Actions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
if ( ( ( GetSpellAbilityId() == 0x4130434F ) or ( GetSpellAbilityId() == 0x4130434E ) ) ) then
set udg_zhengshu2[374]=IMinBJ(( udg_zhengshu2[374] + ( 20 - ( 2 * GetUnitAbilityLevel(udg_danwei2[0], 0x4130444C) ) ) ), 60)
call SetUnitAbilityLevel(udg_danwei2[0], 0x41304654, IMinBJ(( GetUnitAbilityLevel(udg_danwei2[0], 0x41304654) + 2 ), 13))
set udg_zhengshu2[3]=GetUnitAbilityLevel(udg_danwei2[0], 0x41304654)
call UnitRemoveAbility(udg_danwei2[0], 0x41304654)
call UnitAddAbility(udg_danwei2[0], 0x41304654)
call SetUnitAbilityLevel(udg_danwei2[0], 0x41304654, udg_zhengshu2[3])
call DisableTrigger(gg_trg_yuansupeizhi_1)
call IssueImmediateOrderById(udg_danwei2[0], 852100)
call EnableTrigger(gg_trg_yuansupeizhi_1)
else
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_yuansu_cd_2 takes nothing returns nothing
set gg_trg_yuansu_cd_2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_yuansu_cd_2, EVENT_PLAYER_UNIT_SPELL_ENDCAST)
call TriggerAddCondition(gg_trg_yuansu_cd_2, Condition(function Trig_yuansu_cd_2Conditions))
call TriggerAddAction(gg_trg_yuansu_cd_2, function Trig_yuansu_cd_2Actions)
endfunction
function Trig_huofu_a_1Conditions takes nothing returns boolean
return ( ( ( GetSpellAbilityId() == 0x41304343 ) or ( GetSpellAbilityId() == 0x41304356 ) ) )
endfunction
function Trig_huofu_a_1Actions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
set udg_danwei2[2]=GetSpellTargetUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[1]=GetUnitLoc(udg_danwei2[2])
set udg_aXUNHUAN[158]=1
loop
exitwhen udg_aXUNHUAN[158] > 6
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303437, udg_dian2[0], ( ( GetUnitFacing(udg_danwei2[0]) + 30.00 ) + ( 60.00 * I2R(udg_aXUNHUAN[158]) ) ))
call GroupAddUnit(udg_DAZE[0], udg_danwei2[1])
call SetUnitScale(udg_danwei2[1], ( 0.85 + ( 0.06 * I2R(GetUnitAbilityLevel(udg_danwei2[0], 0x41304334)) ) ), ( 0.85 + ( 0.06 * I2R(GetUnitAbilityLevel(udg_danwei2[0], 0x41304334)) ) ), ( 0.85 + ( 0.06 + I2R(GetUnitAbilityLevel(udg_danwei2[0], 0x41304334)) ) ))
call SetUnitLifeBJ(udg_danwei2[1], ( ( I2R(GetHeroInt(udg_danwei2[0], true)) * 0.30 ) + ( 6.00 * I2R(GetUnitAbilityLevel(udg_danwei2[264], 0x41304334)) ) ))
call SetUnitUserData(udg_danwei2[1], 50)
call GroupAddUnit(udg_danweizu2[205], udg_danwei2[1])
call s__baka_IssueTargetOrderById2(udg_danwei2[1] , 851986 , udg_danwei2[2])
set udg_danwei2[1]=null
set udg_aXUNHUAN[158]=udg_aXUNHUAN[158] + 1
endloop
set udg_danwei2[0]=null
set udg_danwei2[2]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
endfunction
function InitTrig_huofu_a_1 takes nothing returns nothing
set gg_trg_huofu_a_1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_huofu_a_1, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_huofu_a_1, Condition(function Trig_huofu_a_1Conditions))
call TriggerAddAction(gg_trg_huofu_a_1, function Trig_huofu_a_1Actions)
endfunction
function Trig_huofu_a_2Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[205]) == false ) )
endfunction
function Trig_huofu_a_2Func001Func003Func004A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[1], GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_FIRE, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_huofu_a_2Func001Func003Func016A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call SetUnitUserData(udg_danwei2[0], - 100)
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_huofu_a_2Func001A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
if ( ( GetUnitUserData(udg_danwei2[0]) > 0 ) and ( IsTerrainPathableBJ(udg_dian2[0], PATHING_TYPE_FLYABILITY) == false ) ) then
if ( ( GetUnitUserData(udg_danwei2[0]) == 15 ) ) then
call SetUnitTurnSpeed(udg_danwei2[0], 0.5)
else
endif
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 40.00, GetUnitFacing(udg_danwei2[0]))
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(125.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_huofu_a_2Func001Func003Func016A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[1])
else
call PlaySoundAtPointBJ(gg_snd_SearingArrowTarget2, 100, udg_dian2[0], ( GetLocationZ(udg_dian2[0]) + 400.00 ))
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(( 210.00 + ( 15.00 * I2R(GetUnitAbilityLevel(udg_danwei2[264], 0x41304334)) ) ) , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_huofu_a_2Func001Func003Func004A)
call DestroyGroup(udg_xuanqu)
call GroupRemoveUnit(udg_danweizu2[205], udg_danwei2[0])
call KillUnit(udg_danwei2[0])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\RedDragonBreath\\RedDragonMissile.mdl", udg_dian2[0]))
endif
call RemoveLocation(udg_dian2[0])
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_huofu_a_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[205], function Trig_huofu_a_2Func001A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_huofu_a_2 takes nothing returns nothing
set gg_trg_huofu_a_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_huofu_a_2, udg_Times[3])
call TriggerAddCondition(gg_trg_huofu_a_2, Condition(function Trig_huofu_a_2Conditions))
call TriggerAddAction(gg_trg_huofu_a_2, function Trig_huofu_a_2Actions)
endfunction
function Trig_huofu_b_1Actions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
set udg_danwei2[2]=GetSpellTargetUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[1]=GetUnitLoc(udg_danwei2[2])
call PlaySoundAtPointBJ(gg_snd_GargoyleMissileLaunch1, 100, udg_dian2[0], ( GetLocationZ(udg_dian2[0]) + 400.00 ))
set udg_aXUNHUAN[159]=1
loop
exitwhen udg_aXUNHUAN[159] > 3
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303357, udg_dian2[0], AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
call GroupAddUnit(udg_DAZE[0], udg_danwei2[1])
call SetUnitLifeBJ(udg_danwei2[1], ( ( I2R(GetHeroInt(udg_danwei2[0], true)) * 0.60 ) + ( ( 40.00 / 3.00 ) * I2R(GetUnitAbilityLevel(udg_danwei2[264], 0x41304334)) ) ))
call SetUnitUserData(udg_danwei2[1], ( ( R2I(DistanceBetweenPoints(udg_dian2[0], udg_dian2[1])) / 40 ) + 10 ))
call GroupAddUnit(udg_danweizu2[206], udg_danwei2[1])
set udg_danwei2[1]=null
set udg_aXUNHUAN[159]=udg_aXUNHUAN[159] + 1
endloop
set udg_danwei2[0]=null
set udg_danwei2[2]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
endfunction
function InitTrig_huofu_b_1 takes nothing returns nothing
set gg_trg_huofu_b_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_huofu_b_1 , 3 , 0x41304344)
call TriggerAddAction(gg_trg_huofu_b_1, function Trig_huofu_b_1Actions)
endfunction
function Trig_huofu_b_2Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[206]) == false ) )
endfunction
function Trig_huofu_b_2Func001Func004Func001Func007A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
set udg_dian2[2]=GetUnitLoc(udg_danwei2[1])
set udg_dian2[3]=PolarProjectionBJ(udg_dian2[2], 10.00, AngleBetweenPoints(udg_dian2[0], udg_dian2[2]))
if ( ( IsTerrainPathableBJ(udg_dian2[3], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[3]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[3]))
else
endif
if ( ( GetUnitUserData(udg_danwei2[0]) == - 1 ) ) then
call s__baka_IssueTargetOrderById2(udg_danwei2[0] , 852095 , udg_danwei2[1])
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[1], GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_FIRE, WEAPON_TYPE_WHOKNOWS)
else
endif
call RemoveLocation(udg_dian2[2])
call RemoveLocation(udg_dian2[3])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_huofu_b_2Func001Func004Func008A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call SetUnitUserData(udg_danwei2[0], 0)
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_huofu_b_2Func001A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
if ( ( GetUnitUserData(udg_danwei2[0]) > 0 ) and ( IsTerrainPathableBJ(udg_dian2[0], PATHING_TYPE_FLYABILITY) == false ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 40.00, GetUnitFacing(udg_danwei2[0]))
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(150.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_huofu_b_2Func001Func004Func008A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[1])
else
if ( ( GetUnitUserData(udg_danwei2[0]) > - 5 ) ) then
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\Incinerate\\FireLordDeathExplode.mdl", udg_dian2[0]))
if ( ( GetUnitUserData(udg_danwei2[0]) == - 1 ) ) then
call PlaySoundAtPointBJ(gg_snd_CannonTowerMissile3, 100, udg_dian2[0], ( GetLocationZ(udg_dian2[0]) + 400.00 ))
else
endif
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(350.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_huofu_b_2Func001Func004Func001Func007A)
call DestroyGroup(udg_xuanqu)
else
call GroupRemoveUnit(udg_danweizu2[206], udg_danwei2[0])
call KillUnit(udg_danwei2[0])
endif
endif
call RemoveLocation(udg_dian2[0])
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_huofu_b_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[206], function Trig_huofu_b_2Func001A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_huofu_b_2 takes nothing returns nothing
set gg_trg_huofu_b_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_huofu_b_2, udg_Times[4])
call TriggerAddCondition(gg_trg_huofu_b_2, Condition(function Trig_huofu_b_2Conditions))
call TriggerAddAction(gg_trg_huofu_b_2, function Trig_huofu_b_2Actions)
endfunction
function Trig_huotufu_1Func013T takes nothing returns nothing
call SaveUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x62DD4FAA, s__Unit_CreateUnitAtLocMU(GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x458B7DE9)) , 0x65303447 , GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x458B7DE9)) , ( GetUnitFacing(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x458B7DE9)) + ( 15.00 * SinBJ(( I2R(LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x300B6E6B)) * 20.00 )) ) )))
call GroupAddUnit(udg_DAZE[0], LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x62DD4FAA))
call SetUnitUserData(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x62DD4FAA), ( 35 + ( 10 * GetUnitAbilityLevel(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x458B7DE9), 0x41304453) ) ))
call SetUnitTimeScale(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x62DD4FAA), 0.50)
call GroupAddUnit(LoadGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x691E9C62), LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x62DD4FAA))
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x300B6E6B, ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x300B6E6B) - 1 ))
if ( ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x300B6E6B) == 0 ) ) then
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
call BJDebugMsg("[火土符]-火焰马甲创建结束")
else
endif
endfunction
function Trig_huotufu_1Func014Func003Func002A takes nothing returns nothing
call SaveBoolean(YDHT, GetHandleId(GetExpiredTimer()), 0x14B2F788, false)
call SetUnitUserData(GetEnumUnit(), ( GetUnitUserData(GetEnumUnit()) - 1 ))
if ( ( GetUnitUserData(GetEnumUnit()) > 5 ) and ( IsTerrainPathable(GetUnitX(GetEnumUnit()), GetUnitY(GetEnumUnit()), PATHING_TYPE_FLYABILITY) == false ) ) then
call s__Unit_Move(GetEnumUnit() , GetUnitFacing(GetEnumUnit()) , RMaxBJ(0.00, RMinBJ(50.00, ( I2R(GetUnitUserData(GetEnumUnit())) - 5.00 ))))
else
if ( ( GetUnitUserData(GetEnumUnit()) == - 15 ) ) then
call KillUnit(GetEnumUnit())
call GroupRemoveUnit(LoadGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x691E9C62), GetEnumUnit())
else
endif
endif
endfunction
function Trig_huotufu_1Func014Func003T takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call SaveBoolean(YDHT, GetHandleId(GetExpiredTimer()), 0x14B2F788, true)
call ForGroupBJ(LoadGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x691E9C62), function Trig_huotufu_1Func014Func003Func002A)
if ( ( LoadBoolean(YDHT, GetHandleId(GetExpiredTimer()), 0x14B2F788) == true ) ) then
call DestroyGroup(LoadGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x691E9C62))
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
call BJDebugMsg("[火土符]-火焰马甲移动结束")
else
endif
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_huotufu_1Func014Func005Func003A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call SaveBoolean(YDHT, GetHandleId(GetExpiredTimer()), 0x14B2F788, false)
if ( ( GetUnitUserData(GetEnumUnit()) > 0 ) ) then
set ydl_group=CreateGroup()
call GroupEnumUnitsInRange(ydl_group, GetUnitX(GetEnumUnit()), GetUnitY(GetEnumUnit()), 200.00, null)
loop
set ydl_unit=FirstOfGroup(ydl_group)
exitwhen ydl_unit == null
call GroupRemoveUnit(ydl_group, ydl_unit)
if ( ( IsUnitType(ydl_unit, UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(ydl_unit, UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(ydl_unit, UNIT_TYPE_FLYING) == false ) and ( IsUnitType(ydl_unit, UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(ydl_unit, GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x436C6C8F))) == true ) ) then
if ( ( YDWEGetIntegerByInteger(YDWEH2I(ydl_unit) , LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xDB7C34FA)) == 0 ) ) then
call GroupAddUnit(LoadGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60E03440), ydl_unit)
call YDWESaveIntegerByInteger(LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xDB7C34FA) , YDWEH2I(ydl_unit) , s__process_Create(ydl_unit , "灼热粉尘" , 100 , false))
else
endif
call YDWESaveIntegerByInteger(YDWEH2I(ydl_unit) , LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xDB7C34FA) , 6)
else
endif
endloop
call DestroyGroup(ydl_group)
else
endif
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_huotufu_1Func014Func005Func005A takes nothing returns nothing
call SaveBoolean(YDHT, GetHandleId(GetExpiredTimer()), 0x14B2F788, false)
call YDWESaveIntegerByInteger(YDWEH2I(GetEnumUnit()) , LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xDB7C34FA) , ( YDWEGetIntegerByInteger(YDWEH2I(GetEnumUnit()) , LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xDB7C34FA)) - 1 ))
if ( ( s__process_IsEnable(YDWEGetIntegerByInteger(LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xDB7C34FA) , YDWEH2I(GetEnumUnit()))) == true ) ) then
call UnitDamageTarget(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x436C6C8F), GetEnumUnit(), ( LoadReal(YDHT, GetHandleId(GetExpiredTimer()), 0x9375D887) * ( 2.00 - ( GetUnitState(GetEnumUnit(), UNIT_STATE_LIFE) / GetUnitState(GetEnumUnit(), UNIT_STATE_MAX_LIFE) ) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
call YDWESaveIntegerByInteger(YDWEH2I(GetEnumUnit()) , LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xDB7C34FA) , 0)
endif
if ( ( YDWEGetIntegerByInteger(YDWEH2I(GetEnumUnit()) , LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xDB7C34FA)) == 0 ) ) then
call GroupRemoveUnit(LoadGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60E03440), GetEnumUnit())
call s__process_Remove(YDWEGetIntegerByInteger(LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xDB7C34FA) , YDWEH2I(GetEnumUnit())))
else
endif
endfunction
function Trig_huotufu_1Func014Func005T takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call SaveBoolean(YDHT, GetHandleId(GetExpiredTimer()), 0x14B2F788, true)
call ForGroupBJ(LoadGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x691E9C62), function Trig_huotufu_1Func014Func005Func003A)
call ForGroupBJ(LoadGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60E03440), function Trig_huotufu_1Func014Func005Func005A)
if ( ( LoadBoolean(YDHT, GetHandleId(GetExpiredTimer()), 0x14B2F788) == true ) ) then
call DestroyGroup(LoadGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60E03440))
call YDWEFlushMissionByInteger(LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xDB7C34FA))
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
call BJDebugMsg("[火土符]-全部结束")
else
endif
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_huotufu_1Func014T takes nothing returns nothing
local timer ydl_timer
set ydl_timer=CreateTimer()
call SaveBoolean(YDHT, GetHandleId(ydl_timer), 0x14B2F788, LoadBoolean(YDHT, GetHandleId(GetExpiredTimer()), 0x14B2F788))
call SaveGroupHandle(YDHT, GetHandleId(ydl_timer), 0x691E9C62, LoadGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x691E9C62))
call TimerStart(ydl_timer, 0.04, true, function Trig_huotufu_1Func014Func003T)
set ydl_timer=CreateTimer()
call SaveInteger(YDHT, GetHandleId(ydl_timer), 0xDB7C34FA, LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xDB7C34FA))
call SaveReal(YDHT, GetHandleId(ydl_timer), 0x9375D887, LoadReal(YDHT, GetHandleId(GetExpiredTimer()), 0x9375D887))
call SaveBoolean(YDHT, GetHandleId(ydl_timer), 0x14B2F788, LoadBoolean(YDHT, GetHandleId(GetExpiredTimer()), 0x14B2F788))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x436C6C8F, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x436C6C8F))
call SaveGroupHandle(YDHT, GetHandleId(ydl_timer), 0x691E9C62, LoadGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x691E9C62))
call SaveGroupHandle(YDHT, GetHandleId(ydl_timer), 0x60E03440, LoadGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x60E03440))
call TimerStart(ydl_timer, 0.20, true, function Trig_huotufu_1Func014Func005T)
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
set ydl_timer=null
endfunction
function Trig_huotufu_1Actions takes nothing returns nothing
local timer ydl_timer
local integer ydl_localvar_step=LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76)
set ydl_localvar_step=ydl_localvar_step + 3
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76, ydl_localvar_step)
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xECE825E7, ydl_localvar_step)
call StopSoundBJ(gg_snd_RainOfFireTarget1, false)
call PlaySoundOnUnitBJ(gg_snd_RainOfFireTarget1, 100, GetTriggerUnit())
call SaveReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x9375D887, ( ( ( 25.00 + ( 25.00 * I2R(GetUnitAbilityLevel(GetTriggerUnit(), 0x41304453)) ) ) + ( 1.50 * I2R(GetHeroInt(GetTriggerUnit(), true)) ) ) / 6.00 ))
call SaveGroupHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x691E9C62, CreateGroup())
call SaveGroupHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x60E03440, CreateGroup())
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xDB7C34FA, YDWEH2I(LoadGroupHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x60E03440)))
set ydl_timer=CreateTimer()
call SaveInteger(YDHT, GetHandleId(ydl_timer), 0x300B6E6B, ( 25 + ( 5 * GetUnitAbilityLevel(GetTriggerUnit(), 0x41304453) ) ))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x458B7DE9, GetTriggerUnit())
call SaveGroupHandle(YDHT, GetHandleId(ydl_timer), 0x691E9C62, LoadGroupHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x691E9C62))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x62DD4FAA, LoadUnitHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x62DD4FAA))
call TimerStart(ydl_timer, 0.05, true, function Trig_huotufu_1Func013T)
set ydl_timer=CreateTimer()
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x436C6C8F, GetTriggerUnit())
call SaveInteger(YDHT, GetHandleId(ydl_timer), 0xDB7C34FA, LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xDB7C34FA))
call SaveReal(YDHT, GetHandleId(ydl_timer), 0x9375D887, LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x9375D887))
call SaveBoolean(YDHT, GetHandleId(ydl_timer), 0x14B2F788, LoadBoolean(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x14B2F788))
call SaveGroupHandle(YDHT, GetHandleId(ydl_timer), 0x691E9C62, LoadGroupHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x691E9C62))
call SaveGroupHandle(YDHT, GetHandleId(ydl_timer), 0x60E03440, LoadGroupHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x60E03440))
call TimerStart(ydl_timer, 0.05, false, function Trig_huotufu_1Func014T)
call FlushChildHashtable(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step)
set ydl_timer=null
endfunction
function InitTrig_huotufu_1 takes nothing returns nothing
set gg_trg_huotufu_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_huotufu_1 , 3 , 0x4130434D)
call TriggerAddAction(gg_trg_huotufu_1, function Trig_huotufu_1Actions)
endfunction
function Trig_huojinfu_1Actions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
set udg_danwei2[2]=GetSpellTargetUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[1]=GetUnitLoc(udg_danwei2[2])
set udg_aXUNHUAN[160]=1
loop
exitwhen udg_aXUNHUAN[160] > 6
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303449, udg_dian2[0], AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
call GroupAddUnit(udg_DAZE[0], udg_danwei2[1])
call SetUnitLifeBJ(udg_danwei2[1], ( ( I2R(GetHeroInt(udg_danwei2[0], true)) * 3.00 ) + ( 125.00 * I2R(GetUnitAbilityLevel(udg_danwei2[264], 0x41304453)) ) ))
call SetUnitManaBJ(udg_danwei2[1], ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) / 8.00 ))
call SetUnitUserData(udg_danwei2[1], 30)
call SetUnitAnimation(udg_danwei2[1], "birth")
if ( ( udg_aXUNHUAN[160] == 1 ) ) then
call GroupAddUnit(udg_danweizu2[215], udg_danwei2[1])
else
endif
call GroupAddUnit(udg_danweizu2[214], udg_danwei2[1])
set udg_danwei2[1]=null
set udg_aXUNHUAN[160]=udg_aXUNHUAN[160] + 1
endloop
set udg_danwei2[0]=null
set udg_danwei2[2]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
endfunction
function InitTrig_huojinfu_1 takes nothing returns nothing
set gg_trg_huojinfu_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_huojinfu_1 , 3 , 0x41304351)
call TriggerAddAction(gg_trg_huojinfu_1, function Trig_huojinfu_1Actions)
endfunction
function Trig_huojinfu_2Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[214]) == false ) )
endfunction
function Trig_huojinfu_2Func001Func004Func001Func003Func011Func010A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call UnitDamageTarget(udg_danwei2[264], udg_danwei2[1], GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_FIRE, WEAPON_TYPE_WHOKNOWS)
call s__baka_IssueTargetOrderById2(udg_danwei2[2] , 852095 , udg_danwei2[1])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_huojinfu_2Func001A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
if ( ( GetUnitUserData(udg_danwei2[0]) > 0 ) and ( IsTerrainPathableBJ(udg_dian2[0], PATHING_TYPE_FLYABILITY) == false ) ) then
if ( ( GetUnitUserData(udg_danwei2[0]) <= 8 ) ) then
call s__maphack_SetHeight(udg_danwei2[0] , ( s__maphack_GetHeight(udg_danwei2[0]) - 37.50 ) , 0.00)
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], GetUnitState(udg_danwei2[0], UNIT_STATE_MANA), GetUnitFacing(udg_danwei2[0]))
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
call RemoveLocation(udg_dian2[1])
else
endif
else
if ( ( IsUnitInGroup(udg_danwei2[0], udg_danweizu2[215]) == true ) ) then
if ( ( GetUnitUserData(udg_danwei2[0]) > - 10 ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], ( - 28.00 * I2R(GetUnitUserData(udg_danwei2[0])) ), GetUnitFacing(udg_danwei2[0]))
set udg_danwei2[2]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303450, udg_dian2[1], GetUnitFacing(udg_danwei2[0]))
call UnitApplyTimedLife(udg_danwei2[2], 0x42487765, 1.00)
call SetUnitTimeScale(udg_danwei2[2], 2.00)
call s__maphack_SetHeight(udg_danwei2[2] , ( 100.00 - ( 100.00 * I2R(GetUnitUserData(udg_danwei2[0])) ) ) , 0.00)
set udg_danwei2[2]=null
if ( ( GetUnitUserData(udg_danwei2[0]) == 0 ) ) then
call SetUnitAnimation(udg_danwei2[0], "death")
call StopSoundBJ(gg_snd_BuildingDeathLargeHuman, false)
call PlaySoundAtPointBJ(gg_snd_BuildingDeathLargeHuman, 100, udg_dian2[0], GetLocationZ(udg_dian2[0]))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl", udg_dian2[0]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl", udg_dian2[0]))
set udg_danwei2[2]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303130, udg_dian2[1], GetUnitFacing(udg_danwei2[0]))
call UnitAddAbility(udg_danwei2[2], 0x41304236)
call UnitApplyTimedLife(udg_danwei2[2], 0x42487765, 1.00)
set udg_danweizu2[331]=YDWEGetUnitsInRangeOfLocAllNull(275.00 , udg_dian2[0])
call ForGroupBJ(udg_danweizu2[331], function Trig_huojinfu_2Func001Func004Func001Func003Func011Func010A)
call DestroyGroup(udg_danweizu2[331])
set udg_danwei2[2]=null
else
endif
call RemoveLocation(udg_dian2[1])
else
call KillUnit(udg_danwei2[0])
call GroupRemoveUnit(udg_danweizu2[214], udg_danwei2[0])
call GroupRemoveUnit(udg_danweizu2[215], udg_danwei2[0])
endif
else
call KillUnit(udg_danwei2[0])
call GroupRemoveUnit(udg_danweizu2[214], udg_danwei2[0])
endif
endif
call RemoveLocation(udg_dian2[0])
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_huojinfu_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[214], function Trig_huojinfu_2Func001A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_huojinfu_2 takes nothing returns nothing
set gg_trg_huojinfu_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_huojinfu_2, udg_Times[4])
call TriggerAddCondition(gg_trg_huojinfu_2, Condition(function Trig_huojinfu_2Conditions))
call TriggerAddAction(gg_trg_huojinfu_2, function Trig_huojinfu_2Actions)
endfunction
function Trig_huoshuifu_1Actions takes nothing returns nothing
set udg_danwei2[217]=GetTriggerUnit()
set udg_dian2[217]=GetUnitLoc(udg_danwei2[217])
set udg_dian2[218]=GetSpellTargetLoc()
set udg_zhengshu2[217]=0
call StartTimerBJ(udg_times[217], true, 0.10)
endfunction
function InitTrig_huoshuifu_1 takes nothing returns nothing
set gg_trg_huoshuifu_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_huoshuifu_1 , 3 , 0x41304357)
call TriggerAddAction(gg_trg_huoshuifu_1, function Trig_huoshuifu_1Actions)
endfunction
function Trig_huoshuifu_2Actions takes nothing returns nothing
set udg_zhengshu2[217]=( udg_zhengshu2[217] + 1 )
if ( ( ( udg_zhengshu2[217] <= 10 ) or ( udg_zhengshu2[217] <= ( R2I(( DistanceBetweenPoints(udg_dian2[217], udg_dian2[218]) / 100.00 )) + 5 ) ) ) ) then
call StopSoundBJ(gg_snd_Incinerate1, false)
call PlaySoundAtPointBJ(gg_snd_Incinerate1, 100, udg_dian2[218], ( GetLocationZ(udg_dian2[218]) + 800.00 ))
if ( ( udg_zhengshu2[217] <= 10 ) ) then
set udg_dian2[0]=PolarProjectionBJ(udg_dian2[217], ( 100.00 + ( 100.00 * I2R(udg_zhengshu2[217]) ) ), AngleBetweenPoints(udg_dian2[217], udg_dian2[218]))
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[217], ( 50.00 + ( 100.00 * I2R(udg_zhengshu2[217]) ) ), AngleBetweenPoints(udg_dian2[217], udg_dian2[218]))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[217]), 0x65303446, udg_dian2[0], 270.00)
call SetUnitTimeScale(udg_danwei2[1], 0.50)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 2.00)
set udg_danwei2[1]=null
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[217]), 0x65303445, udg_dian2[1], 270.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 2.00)
set udg_danwei2[1]=null
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[217]), 0x65303447, udg_dian2[0], GetRandomReal(0, 360.00))
call SetUnitUserData(udg_danwei2[1], 22)
call GroupAddUnit(udg_danweizu2[217], udg_danwei2[1])
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
endif
if ( ( ( 100.00 * I2R(udg_zhengshu2[217]) ) >= DistanceBetweenPoints(udg_dian2[217], udg_dian2[218]) ) and ( udg_zhengshu2[217] <= ( R2I(( DistanceBetweenPoints(udg_dian2[217], udg_dian2[218]) / 100.00 )) + 5 ) ) ) then
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[218], ( 100.00 + ( 100.00 * ( I2R(udg_zhengshu2[217]) - ( DistanceBetweenPoints(udg_dian2[217], udg_dian2[218]) / 100.00 ) ) ) ), ( AngleBetweenPoints(udg_dian2[217], udg_dian2[218]) + 90.00 ))
set udg_dian2[3]=PolarProjectionBJ(udg_dian2[218], ( 50.00 + ( 100.00 * ( I2R(udg_zhengshu2[217]) - ( DistanceBetweenPoints(udg_dian2[217], udg_dian2[218]) / 100.00 ) ) ) ), ( AngleBetweenPoints(udg_dian2[217], udg_dian2[218]) + 90.00 ))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[217]), 0x65303446, udg_dian2[2], 270.00)
call SetUnitTimeScale(udg_danwei2[1], 0.50)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 2.00)
set udg_danwei2[1]=null
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[217]), 0x65303445, udg_dian2[3], 270.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 2.00)
set udg_danwei2[1]=null
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[217]), 0x65303447, udg_dian2[2], GetRandomReal(0, 360.00))
call SetUnitUserData(udg_danwei2[1], 22)
call GroupAddUnit(udg_danweizu2[217], udg_danwei2[1])
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[2])
call RemoveLocation(udg_dian2[3])
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[218], ( 100.00 + ( 100.00 * ( I2R(udg_zhengshu2[217]) - ( DistanceBetweenPoints(udg_dian2[217], udg_dian2[218]) / 100.00 ) ) ) ), ( AngleBetweenPoints(udg_dian2[217], udg_dian2[218]) - 90.00 ))
set udg_dian2[3]=PolarProjectionBJ(udg_dian2[218], ( 50.00 + ( 100.00 * ( I2R(udg_zhengshu2[217]) - ( DistanceBetweenPoints(udg_dian2[217], udg_dian2[218]) / 100.00 ) ) ) ), ( AngleBetweenPoints(udg_dian2[217], udg_dian2[218]) - 90.00 ))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[217]), 0x65303446, udg_dian2[2], 270.00)
call SetUnitTimeScale(udg_danwei2[1], 0.50)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 2.00)
set udg_danwei2[1]=null
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[217]), 0x65303445, udg_dian2[3], 270.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 2.00)
set udg_danwei2[1]=null
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[217]), 0x65303447, udg_dian2[2], GetRandomReal(0, 360.00))
call SetUnitUserData(udg_danwei2[1], 22)
call GroupAddUnit(udg_danweizu2[217], udg_danwei2[1])
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[2])
call RemoveLocation(udg_dian2[3])
else
endif
else
call PauseTimer(udg_times[217])
set udg_danwei2[217]=null
call RemoveLocation(udg_dian2[217])
call RemoveLocation(udg_dian2[218])
endif
endfunction
function InitTrig_huoshuifu_2 takes nothing returns nothing
set gg_trg_huoshuifu_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_huoshuifu_2, udg_times[217])
call TriggerAddAction(gg_trg_huoshuifu_2, function Trig_huoshuifu_2Actions)
endfunction
function Trig_huoshuifu_3Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[217]) == false ) )
endfunction
function Trig_huoshuifu_3Func002Func003Func008A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[331]) == false ) ) then
call GroupAddUnit(udg_danweizu2[331], udg_danwei2[1])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_huoshuifu_3Func002A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
if ( ( GetUnitUserData(udg_danwei2[0]) > 0 ) and ( IsTerrainPathableBJ(udg_dian2[0], PATHING_TYPE_FLYABILITY) == false ) ) then
if ( ( GetUnitUserData(udg_danwei2[0]) == 5 ) ) then
call SetUnitTimeScale(udg_danwei2[1], 0.01)
else
endif
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(180.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_huoshuifu_3Func002Func003Func008A)
call DestroyGroup(udg_xuanqu)
else
call KillUnit(udg_danwei2[0])
call GroupRemoveUnit(udg_danweizu2[217], udg_danwei2[0])
endif
call RemoveLocation(udg_dian2[0])
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_huoshuifu_3Func003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
call UnitDamageTarget(udg_danwei2[264], udg_danwei2[1], ( ( I2R(GetHeroInt(udg_danwei2[264], true)) * 0.07 ) + ( I2R(GetUnitAbilityLevel(udg_danwei2[264], 0x41304453)) * 3.50 ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_FIRE, WEAPON_TYPE_WHOKNOWS)
set udg_danwei2[1]=null
endfunction
function Trig_huoshuifu_3Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danweizu2[331]=CreateGroup()
call ForGroupBJ(udg_danweizu2[217], function Trig_huoshuifu_3Func002A)
call ForGroupBJ(udg_danweizu2[331], function Trig_huoshuifu_3Func003A)
call DestroyGroup(udg_danweizu2[331])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_huoshuifu_3 takes nothing returns nothing
set gg_trg_huoshuifu_3=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_huoshuifu_3, 0.07)
call TriggerAddCondition(gg_trg_huoshuifu_3, Condition(function Trig_huoshuifu_3Conditions))
call TriggerAddAction(gg_trg_huoshuifu_3, function Trig_huoshuifu_3Actions)
endfunction
function Trig_shuifu_a_1Conditions takes nothing returns boolean
return ( ( ( GetSpellAbilityId() == 0x41304346 ) or ( GetSpellAbilityId() == 0x41304353 ) ) )
endfunction
function Trig_shuifu_a_1Actions takes nothing returns nothing
set udg_danwei2[213]=GetTriggerUnit()
set udg_dian2[212]=GetUnitLoc(udg_danwei2[213])
set udg_dian2[213]=GetSpellTargetLoc()
set udg_zhengshu2[213]=0
call StartTimerBJ(udg_times[213], true, 0.05)
endfunction
function InitTrig_shuifu_a_1 takes nothing returns nothing
set gg_trg_shuifu_a_1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_shuifu_a_1, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_shuifu_a_1, Condition(function Trig_shuifu_a_1Conditions))
call TriggerAddAction(gg_trg_shuifu_a_1, function Trig_shuifu_a_1Actions)
endfunction
function Trig_shuifu_a_2Actions takes nothing returns nothing
set udg_zhengshu2[213]=( udg_zhengshu2[213] + 1 )
if ( ( udg_zhengshu2[213] <= ( 7 + GetUnitAbilityLevel(udg_danwei2[264], 0x41304334) ) ) ) then
set udg_dian2[0]=PolarProjectionBJ(udg_dian2[212], 75.00, ( AngleBetweenPoints(udg_dian2[212], udg_dian2[213]) + GetRandomReal(- 7.00, 7.00) ))
call StopSoundBJ(gg_snd_HuntressMissileLaunch, false)
call PlaySoundAtPointBJ(gg_snd_HuntressMissileLaunch, 100, udg_dian2[0], GetLocationZ(udg_dian2[0]))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[213]), 0x65303438, udg_dian2[0], AngleBetweenPoints(udg_dian2[212], udg_dian2[0]))
call GroupAddUnit(udg_DAZE[0], udg_danwei2[1])
call SetUnitLifeBJ(udg_danwei2[1], ( ( I2R(GetHeroInt(udg_danwei2[213], true)) * 0.15 ) + 15.00 ))
call SetUnitUserData(udg_danwei2[1], 15)
call GroupAddUnit(udg_danweizu2[207], udg_danwei2[1])
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
call PauseTimer(udg_times[213])
set udg_danwei2[213]=null
call RemoveLocation(udg_dian2[212])
call RemoveLocation(udg_dian2[213])
endif
endfunction
function InitTrig_shuifu_a_2 takes nothing returns nothing
set gg_trg_shuifu_a_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_shuifu_a_2, udg_times[213])
call TriggerAddAction(gg_trg_shuifu_a_2, function Trig_shuifu_a_2Actions)
endfunction
function Trig_shuifu_b_1Actions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
set udg_dian2[0]=GetSpellTargetLoc()
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303444, udg_dian2[0], 0.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 1.50)
call SetUnitLifeBJ(udg_danwei2[1], ( ( I2R(GetHeroInt(udg_danwei2[0], true)) * 0.10 ) + ( 5.00 * I2R(GetUnitAbilityLevel(udg_danwei2[264], 0x41304334)) ) ))
call SetUnitUserData(udg_danwei2[1], 50)
call ShowUnitHide(udg_danwei2[1])
call SetUnitTimeScale(udg_danwei2[1], 0.10)
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Items\\TomeOfRetraining\\TomeOfRetrainingCaster.mdl", udg_dian2[0]))
call GroupAddUnit(udg_danweizu2[211], udg_danwei2[1])
set udg_danwei2[0]=null
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
endfunction
function InitTrig_shuifu_b_1 takes nothing returns nothing
set gg_trg_shuifu_b_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_shuifu_b_1 , 3 , 0x41304345)
call TriggerAddAction(gg_trg_shuifu_b_1, function Trig_shuifu_b_1Actions)
endfunction
function Trig_shuifu_b_2Func001Func002Func005Func003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) or ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[347]) == true ) ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
if ( ( GetUnitUserData(udg_danwei2[0]) <= 25 ) ) then
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], RMinBJ(( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) * 0.95 ), 150.00), ( AngleBetweenPoints(udg_dian2[0], udg_dian2[1]) + 14.40 ))
if ( ( IsTerrainPathableBJ(udg_dian2[2], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[2]))
else
endif
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[1], GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_FIRE, WEAPON_TYPE_WHOKNOWS)
call UnitAddAbility(udg_danwei2[1], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[1] , RMinBJ(( s__maphack_GetHeight(udg_danwei2[1]) + ( ( 800.00 - s__maphack_GetHeight(udg_danwei2[1]) ) * 0.18 ) ), 800.00) , 0.00)
call UnitRemoveAbility(udg_danwei2[1], 0x41726176)
if ( ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[347]) == false ) ) then
call GroupAddUnit(udg_danweizu2[347], udg_danwei2[1])
else
endif
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
else
endif
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_shuifu_b_2Func001Func002A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(200.00 , udg_dian2[0])
if ( ( GetUnitUserData(udg_danwei2[0]) > - 10 ) ) then
if ( ( GetUnitUserData(udg_danwei2[0]) <= 25 ) ) then
if ( ( GetUnitUserData(udg_danwei2[0]) > 0 ) ) then
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303444, udg_dian2[0], 90.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 1.00)
call s__maphack_SetHeight(udg_danwei2[1] , ( 625.00 - ( 25.00 * I2R(GetUnitUserData(udg_danwei2[0])) ) ) , 0.00)
call SetUnitScale(udg_danwei2[1], ( 2.00 - ( 0.05 * I2R(GetUnitUserData(udg_danwei2[0])) ) ), ( 2.00 - ( 0.05 * I2R(GetUnitUserData(udg_danwei2[0])) ) ), ( 2.00 - ( 0.05 * I2R(GetUnitUserData(udg_danwei2[0])) ) ))
if ( ( GetUnitUserData(udg_danwei2[0]) == 25 ) ) then
call SetUnitTimeScale(udg_danwei2[1], 0.15)
else
call SetUnitTimeScale(udg_danwei2[1], 2.50)
endif
set udg_danwei2[1]=null
else
endif
else
endif
call ForGroupBJ(udg_xuanqu, function Trig_shuifu_b_2Func001Func002Func005Func003A)
else
call GroupRemoveUnit(udg_danweizu2[211], udg_danwei2[0])
endif
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[0])
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_shuifu_b_2Func002Func002A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( s__maphack_GetHeight(udg_danwei2[1]) > 1.00 ) ) then
call UnitAddAbility(udg_danwei2[1], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[1] , ( s__maphack_GetHeight(udg_danwei2[1]) - ( ( 850.00 - s__maphack_GetHeight(udg_danwei2[1]) ) * 0.12 ) ) , 0.00)
call UnitRemoveAbility(udg_danwei2[1], 0x41726176)
else
call GroupRemoveUnit(udg_danweizu2[347], udg_danwei2[1])
endif
set udg_danwei2[1]=null
endfunction
function Trig_shuifu_b_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( IsUnitGroupEmptyBJ(udg_danweizu2[211]) == false ) ) then
call ForGroupBJ(udg_danweizu2[211], function Trig_shuifu_b_2Func001Func002A)
else
endif
if ( ( IsUnitGroupEmptyBJ(udg_danweizu2[347]) == false ) ) then
call ForGroupBJ(udg_danweizu2[347], function Trig_shuifu_b_2Func002Func002A)
else
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_shuifu_b_2 takes nothing returns nothing
set gg_trg_shuifu_b_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_shuifu_b_2, udg_Times[4])
call TriggerAddAction(gg_trg_shuifu_b_2, function Trig_shuifu_b_2Actions)
endfunction
function Trig_shuitu_1Actions takes nothing returns nothing
set udg_danwei2[205]=GetTriggerUnit()
set udg_dian2[205]=GetUnitLoc(udg_danwei2[205])
set udg_dian2[206]=GetSpellTargetLoc()
set udg_zhengshu2[205]=0
call StartTimerBJ(udg_times[205], true, 0.05)
endfunction
function InitTrig_shuitu_1 takes nothing returns nothing
set gg_trg_shuitu_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_shuitu_1 , 3 , 0x41304350)
call TriggerAddAction(gg_trg_shuitu_1, function Trig_shuitu_1Actions)
endfunction
function Trig_shuitu_2Actions takes nothing returns nothing
set udg_zhengshu2[205]=( udg_zhengshu2[205] + 1 )
if ( ( udg_zhengshu2[205] <= 16 ) ) then
if ( ( udg_zhengshu2[205] <= 4 ) ) then
set udg_dian2[0]=PolarProjectionBJ(udg_dian2[205], ( 15.00 * I2R(udg_zhengshu2[205]) ), ( AngleBetweenPoints(udg_dian2[205], udg_dian2[206]) + 90.00 ))
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[205], ( 15.00 * I2R(udg_zhengshu2[205]) ), ( AngleBetweenPoints(udg_dian2[205], udg_dian2[206]) - 90.00 ))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[205]), 0x65303438, udg_dian2[0], ( AngleBetweenPoints(udg_dian2[205], udg_dian2[206]) + ( 2.00 * I2R(udg_zhengshu2[205]) ) ))
set udg_danwei2[2]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[205]), 0x65303438, udg_dian2[1], ( AngleBetweenPoints(udg_dian2[205], udg_dian2[206]) - ( 2.00 * I2R(udg_zhengshu2[205]) ) ))
else
if ( ( udg_zhengshu2[205] <= 8 ) ) then
set udg_dian2[0]=PolarProjectionBJ(udg_dian2[205], ( 135.00 - ( 15.00 * I2R(udg_zhengshu2[205]) ) ), ( AngleBetweenPoints(udg_dian2[205], udg_dian2[206]) + 90.00 ))
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[205], ( 135.00 - ( 15.00 * I2R(udg_zhengshu2[205]) ) ), ( AngleBetweenPoints(udg_dian2[205], udg_dian2[206]) - 90.00 ))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[205]), 0x65303438, udg_dian2[0], ( AngleBetweenPoints(udg_dian2[205], udg_dian2[206]) + ( 18.00 - ( 2.00 * I2R(udg_zhengshu2[205]) ) ) ))
set udg_danwei2[2]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[205]), 0x65303438, udg_dian2[1], ( AngleBetweenPoints(udg_dian2[205], udg_dian2[206]) - ( 18.00 - ( 2.00 * I2R(udg_zhengshu2[205]) ) ) ))
else
if ( ( udg_zhengshu2[205] <= 12 ) ) then
set udg_dian2[0]=PolarProjectionBJ(udg_dian2[205], ( 15.00 * I2R(( udg_zhengshu2[205] - 8 )) ), ( AngleBetweenPoints(udg_dian2[205], udg_dian2[206]) + 90.00 ))
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[205], ( 15.00 * I2R(( udg_zhengshu2[205] - 8 )) ), ( AngleBetweenPoints(udg_dian2[205], udg_dian2[206]) - 90.00 ))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[205]), 0x65303438, udg_dian2[0], ( AngleBetweenPoints(udg_dian2[205], udg_dian2[206]) + ( 2.00 * ( I2R(udg_zhengshu2[205]) - 8.00 ) ) ))
set udg_danwei2[2]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[205]), 0x65303438, udg_dian2[1], ( AngleBetweenPoints(udg_dian2[205], udg_dian2[206]) - ( 2.00 * ( I2R(udg_zhengshu2[205]) - 8.00 ) ) ))
else
set udg_dian2[0]=PolarProjectionBJ(udg_dian2[205], ( 255.00 - ( 15.00 * I2R(udg_zhengshu2[205]) ) ), ( AngleBetweenPoints(udg_dian2[205], udg_dian2[206]) + 90.00 ))
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[205], ( 255.00 - ( 15.00 * I2R(udg_zhengshu2[205]) ) ), ( AngleBetweenPoints(udg_dian2[205], udg_dian2[206]) - 90.00 ))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[205]), 0x65303438, udg_dian2[0], ( AngleBetweenPoints(udg_dian2[205], udg_dian2[206]) + ( 34.00 - ( 2.00 * I2R(udg_zhengshu2[205]) ) ) ))
set udg_danwei2[2]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[205]), 0x65303438, udg_dian2[1], ( AngleBetweenPoints(udg_dian2[205], udg_dian2[206]) - ( 34.00 - ( 2.00 * I2R(udg_zhengshu2[205]) ) ) ))
endif
endif
endif
call GroupAddUnit(udg_DAZE[0], udg_danwei2[1])
call GroupAddUnit(udg_DAZE[0], udg_danwei2[2])
call StopSoundBJ(gg_snd_WaterElementalMissile3, false)
call PlaySoundAtPointBJ(gg_snd_WaterElementalMissile3, 100, udg_dian2[0], GetLocationZ(udg_dian2[0]))
call SetUnitLifeBJ(udg_danwei2[1], ( ( I2R(GetHeroInt(udg_danwei2[205], true)) * 0.12 ) + ( 7.00 * I2R(GetUnitAbilityLevel(udg_danwei2[264], 0x41304453)) ) ))
call SetUnitUserData(udg_danwei2[1], 20)
call GroupAddUnit(udg_danweizu2[207], udg_danwei2[1])
call SetUnitLifeBJ(udg_danwei2[2], ( ( I2R(GetHeroInt(udg_danwei2[205], true)) * 0.12 ) + ( 7.00 * I2R(GetUnitAbilityLevel(udg_danwei2[264], 0x41304453)) ) ))
call SetUnitUserData(udg_danwei2[2], 20)
call GroupAddUnit(udg_danweizu2[207], udg_danwei2[2])
set udg_danwei2[1]=null
set udg_danwei2[2]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
call PauseTimer(udg_times[205])
set udg_danwei2[205]=null
call RemoveLocation(udg_dian2[205])
call RemoveLocation(udg_dian2[206])
endif
endfunction
function InitTrig_shuitu_2 takes nothing returns nothing
set gg_trg_shuitu_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_shuitu_2, udg_times[205])
call TriggerAddAction(gg_trg_shuitu_2, function Trig_shuitu_2Actions)
endfunction
function Trig_shuitu_3Func001Func001Func001A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
call UnitRemoveAbility(udg_danwei2[0], 0x41304653)
call UnitRemoveBuffBJ(0x4230305A, udg_danwei2[0])
set udg_danwei2[0]=null
endfunction
function Trig_shuitu_3Func001Func003Func003Func010A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\CrushingWave\\CrushingWaveDamage.mdl", udg_dian2[0]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\SpiritOfVengeanceMissile\\SpiritOfVengeanceMissile.mdl", udg_dian2[0]))
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[1], GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call UnitAddAbility(udg_danwei2[1], 0x41304653)
call GroupAddUnit(udg_danweizu2[370], udg_danwei2[1])
call GroupRemoveUnit(udg_danweizu2[207], udg_danwei2[0])
call KillUnit(udg_danwei2[0])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_shuitu_3Func001Func003A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
if ( ( GetUnitUserData(udg_danwei2[0]) > 0 ) and ( IsTerrainPathableBJ(udg_dian2[0], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 70.00, GetUnitFacing(udg_danwei2[0]))
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(100.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_shuitu_3Func001Func003Func003Func010A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[1])
else
call KillUnit(udg_danwei2[0])
call GroupRemoveUnit(udg_danweizu2[207], udg_danwei2[0])
endif
call RemoveLocation(udg_dian2[0])
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_shuitu_3Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( IsUnitGroupEmptyBJ(udg_danweizu2[207]) == false ) ) then
call ForGroupBJ(udg_danweizu2[207], function Trig_shuitu_3Func001Func003A)
else
if ( ( IsUnitGroupEmptyBJ(udg_danweizu2[370]) == false ) ) then
call ForGroupBJ(udg_danweizu2[370], function Trig_shuitu_3Func001Func001Func001A)
call GroupClear(udg_danweizu2[370])
else
endif
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_shuitu_3 takes nothing returns nothing
set gg_trg_shuitu_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_shuitu_3, udg_Times[4])
call TriggerAddAction(gg_trg_shuitu_3, function Trig_shuitu_3Actions)
endfunction
function Trig_shuimufu_1Actions takes nothing returns nothing
set udg_shishu2[220]=0.00
set udg_zhengshu2[219]=0
set udg_zhengshu2[220]=0
set udg_danwei2[219]=GetTriggerUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[219])
set udg_danwei2[220]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[219]), 0x65303452, udg_dian2[0], 270.00)
call SetUnitAnimation(udg_danwei2[220], "stand")
call SetUnitTimeScale(udg_danwei2[220], 0.00)
call StartTimerBJ(udg_times[220], true, 0.04)
call EnableTrigger(gg_trg_shuimufu_3)
if ( ( GetTriggerExecCount(GetTriggeringTrigger()) == 1 ) ) then
call TriggerRegisterUnitEvent(gg_trg_shuimufu_3, udg_danwei2[219], EVENT_UNIT_DAMAGED)
else
endif
call RemoveLocation(udg_dian2[0])
endfunction
function InitTrig_shuimufu_1 takes nothing returns nothing
set gg_trg_shuimufu_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_shuimufu_1 , 3 , 0x41304431)
call TriggerAddAction(gg_trg_shuimufu_1, function Trig_shuimufu_1Actions)
endfunction
function Trig_shuimufu_2Actions takes nothing returns nothing
set udg_zhengshu2[219]=( udg_zhengshu2[219] + 1 )
if ( ( udg_zhengshu2[219] <= 300 ) and ( IsUnitType(udg_danwei2[219], UNIT_TYPE_DEAD) == false ) ) then
if ( ( udg_zhengshu2[219] <= 12 ) ) then
call SetUnitScale(udg_danwei2[220], I2R(udg_zhengshu2[219]), I2R(udg_zhengshu2[219]), I2R(udg_zhengshu2[219]))
else
if ( ( udg_zhengshu2[219] <= 15 ) ) then
call SetUnitScale(udg_danwei2[220], ( 25.00 - I2R(udg_zhengshu2[219]) ), ( 25.00 - I2R(udg_zhengshu2[219]) ), ( 25.00 - I2R(udg_zhengshu2[219]) ))
else
endif
endif
set udg_Dian[65]=GetUnitLoc(udg_danwei2[219])
call SetUnitX(udg_danwei2[220], GetLocationX(udg_Dian[65]))
call SetUnitY(udg_danwei2[220], GetLocationY(udg_Dian[65]))
call RemoveLocation(udg_Dian[65])
else
set udg_Dian[65]=GetUnitLoc(udg_danwei2[219])
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl", udg_Dian[65]))
call RemoveLocation(udg_Dian[65])
call DisableTrigger(gg_trg_shuimufu_3)
call PauseTimer(udg_times[220])
call RemoveUnit(udg_danwei2[220])
set udg_danwei2[219]=null
set udg_danwei2[220]=null
endif
endfunction
function InitTrig_shuimufu_2 takes nothing returns nothing
set gg_trg_shuimufu_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_shuimufu_2, udg_times[220])
call TriggerAddAction(gg_trg_shuimufu_2, function Trig_shuimufu_2Actions)
endfunction
function Trig_shuimufu_3Actions takes nothing returns nothing
if ( ( udg_shishu2[220] <= ( ( I2R(GetHeroInt(udg_danwei2[264], true)) * 3.00 ) + ( 100.00 * I2R(GetUnitAbilityLevel(udg_danwei2[264], 0x41304453)) ) ) ) ) then
else
set udg_zhengshu2[219]=300
endif
set udg_Danwei[44]=GetEventDamageSource()
set udg_Dian[44]=GetUnitLoc(udg_danwei2[219])
set udg_Dian[45]=GetUnitLoc(udg_Danwei[44])
set udg_Dian[46]=PolarProjectionBJ(udg_Dian[44], RMinBJ(RMaxBJ(( DistanceBetweenPoints(udg_Dian[44], udg_Dian[45]) - 60.00 ), 40.00), 155.00), AngleBetweenPoints(udg_Dian[44], udg_Dian[45]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\CrushingWave\\CrushingWaveDamage.mdl", udg_Dian[46]))
call RemoveLocation(udg_Dian[44])
call RemoveLocation(udg_Dian[45])
call RemoveLocation(udg_Dian[46])
set udg_Danwei[44]=null
set udg_shishu2[219]=( GetEventDamage() * 0.75 )
if ( ( GetEventDamage() > GetUnitState(udg_danwei2[219], UNIT_STATE_LIFE) ) ) then
call SetUnitLifeBJ(udg_danwei2[219], ( GetUnitState(udg_danwei2[219], UNIT_STATE_LIFE) + udg_shishu2[219] ))
else
if ( ( ( GetUnitState(udg_danwei2[219], UNIT_STATE_MAX_LIFE) - GetUnitState(udg_danwei2[219], UNIT_STATE_LIFE) ) < GetEventDamage() ) ) then
call PauseTimer(udg_times[219])
call StartTimerBJ(udg_times[219], false, 0.00)
else
call SetUnitLifeBJ(udg_danwei2[219], ( GetUnitState(udg_danwei2[219], UNIT_STATE_LIFE) + udg_shishu2[219] ))
endif
endif
set udg_shishu2[220]=( udg_shishu2[220] + ( GetEventDamage() * 1.00 ) )
endfunction
function InitTrig_shuimufu_3 takes nothing returns nothing
set gg_trg_shuimufu_3=CreateTrigger()
call TriggerAddAction(gg_trg_shuimufu_3, function Trig_shuimufu_3Actions)
endfunction
function Trig_shuimufu_4Actions takes nothing returns nothing
call SetUnitLifeBJ(udg_danwei2[219], ( GetUnitState(udg_danwei2[219], UNIT_STATE_LIFE) + udg_shishu2[219] ))
endfunction
function InitTrig_shuimufu_4 takes nothing returns nothing
set gg_trg_shuimufu_4=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_shuimufu_4, udg_times[219])
call TriggerAddAction(gg_trg_shuimufu_4, function Trig_shuimufu_4Actions)
endfunction
function Trig_shuijinfu_1Actions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[1]=GetSpellTargetLoc()
set udg_aXUNHUAN[161]=1
loop
exitwhen udg_aXUNHUAN[161] > 3
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x6530344E, udg_dian2[0], ( AngleBetweenPoints(udg_dian2[0], udg_dian2[1]) - ( 10.00 * ( I2R(udg_aXUNHUAN[161]) - 2.00 ) ) ))
call GroupAddUnit(udg_DAZE[0], udg_danwei2[1])
call SetUnitLifeBJ(udg_danwei2[1], ( ( I2R(GetHeroInt(udg_danwei2[0], true)) * 0.00 ) + ( 40.00 * I2R(GetUnitAbilityLevel(udg_danwei2[264], 0x41304453)) ) ))
call SetUnitManaBJ(udg_danwei2[1], 3.00)
call SetUnitUserData(udg_danwei2[1], 15)
call GroupAddUnit(udg_danweizu2[260], udg_danwei2[1])
set udg_danwei2[1]=null
set udg_aXUNHUAN[161]=udg_aXUNHUAN[161] + 1
endloop
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
endfunction
function InitTrig_shuijinfu_1 takes nothing returns nothing
set gg_trg_shuijinfu_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_shuijinfu_1 , 3 , 0x41304430)
call TriggerAddAction(gg_trg_shuijinfu_1, function Trig_shuijinfu_1Actions)
endfunction
function Trig_shuijinfu_2Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[260]) == false ) )
endfunction
function Trig_shuijinfu_2Func001Func003Func007A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( UnitHasBuffBJ(udg_danwei2[1], 0x42637963) == false ) and ( UnitHasBuffBJ(udg_danwei2[1], 0x42637932) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
if ( ( GetUnitUserData(udg_danwei2[0]) < 50 ) ) then
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[1], GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_COLD, WEAPON_TYPE_WHOKNOWS)
call SetUnitManaBJ(udg_danwei2[1], ( GetUnitState(udg_danwei2[1], UNIT_STATE_MANA) - GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE) ))
call SetUnitUserData(udg_danwei2[0], 150)
call SetUnitAnimation(udg_danwei2[0], "death")
if ( ( GetUnitState(udg_danwei2[1], UNIT_STATE_MAX_MANA) > 0.00 ) ) then
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=R2I(Pow(2.00, ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) - 1 )))
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Undead\\OrbOfDeath\\OrbOfDeathMissile.mdl", udg_dian2[0]))
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
else
endif
else
endif
if ( ( GetUnitState(udg_danwei2[1], UNIT_STATE_MAX_MANA) > 0.00 ) ) then
else
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[1])
endif
else
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[1])
endif
set udg_danwei2[1]=null
endfunction
function Trig_shuijinfu_2Func001A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
if ( ( GetUnitUserData(udg_danwei2[0]) > 0 ) and ( IsTerrainPathableBJ(udg_dian2[0], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(( 75.00 + ( 25.00 * GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) ) ) , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_shuijinfu_2Func001Func003Func007A)
if ( ( GetUnitUserData(udg_danwei2[0]) >= 50 ) ) then
if ( ( IsUnitGroupEmptyBJ(udg_xuanqu) == false ) ) then
set udg_danwei2[1]=GroupPickRandomUnit(udg_xuanqu)
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
if ( ( I2R(( GetUnitUserData(udg_danwei2[0]) / 5 )) == ( I2R(GetUnitUserData(udg_danwei2[0])) / 5.00 ) ) ) then
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) > 1.00 ) ) then
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=R2I(Pow(2.00, ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) - 1 )))
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\Feedback\\ArcaneTowerAttack.mdl", udg_dian2[1]))
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call SetUnitManaBJ(udg_danwei2[1], ( GetUnitState(udg_danwei2[1], UNIT_STATE_MANA) - ( GetUnitState(udg_danwei2[1], UNIT_STATE_MAX_MANA) * ( ( 0.10 * ( 0.20 * Pow(2.00, ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) - 0.00 )) ) ) / 24.00 ) ) ))
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[1], ( GetUnitState(udg_danwei2[1], UNIT_STATE_MAX_MANA) * ( ( 0.10 * ( 0.20 * Pow(2.00, ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) - 0.00 )) ) ) / 24.00 ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_SLOW_POISON, WEAPON_TYPE_WHOKNOWS)
else
endif
else
endif
if ( ( GetUnitUserData(udg_danwei2[0]) == 50 ) ) then
call GroupRemoveUnit(udg_danweizu2[260], udg_danwei2[0])
call KillUnit(udg_danwei2[0])
else
endif
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[1])
else
call KillUnit(udg_danwei2[0])
call GroupRemoveUnit(udg_danweizu2[260], udg_danwei2[0])
endif
else
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 25.00, GetUnitFacing(udg_danwei2[0]))
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
call RemoveLocation(udg_dian2[1])
endif
call DestroyGroup(udg_xuanqu)
else
if ( ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) == 3.00 ) ) then
set udg_aXUNHUAN[162]=1
loop
exitwhen udg_aXUNHUAN[162] > 2
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x6530344E, udg_dian2[0], ( ( GetUnitFacing(udg_danwei2[0]) + 5.00 ) - ( 10.00 * ( I2R(udg_aXUNHUAN[162]) - 1.00 ) ) ))
call GroupAddUnit(udg_DAZE[0], udg_danwei2[1])
call SetUnitScale(udg_danwei2[1], 2.50, 2.50, 2.50)
call SetUnitLifeBJ(udg_danwei2[1], ( GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE) * 0.50 ))
call SetUnitManaBJ(udg_danwei2[1], 2.00)
call SetUnitUserData(udg_danwei2[1], 15)
call GroupAddUnit(udg_danweizu2[260], udg_danwei2[1])
set udg_danwei2[1]=null
set udg_aXUNHUAN[162]=udg_aXUNHUAN[162] + 1
endloop
call GroupRemoveUnit(udg_danweizu2[260], udg_danwei2[0])
call RemoveUnit(udg_danwei2[0])
else
if ( ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) == 2.00 ) ) then
set udg_aXUNHUAN[163]=1
loop
exitwhen udg_aXUNHUAN[163] > 2
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x6530344E, udg_dian2[0], ( ( GetUnitFacing(udg_danwei2[0]) + 9.00 ) - ( 18.00 * ( I2R(udg_aXUNHUAN[163]) - 1.00 ) ) ))
call GroupAddUnit(udg_DAZE[0], udg_danwei2[1])
call SetUnitScale(udg_danwei2[1], 1.50, 1.50, 1.50)
call SetUnitLifeBJ(udg_danwei2[1], ( GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE) * 0.50 ))
call SetUnitManaBJ(udg_danwei2[1], 1.00)
call SetUnitUserData(udg_danwei2[1], 15)
call GroupAddUnit(udg_danweizu2[260], udg_danwei2[1])
set udg_danwei2[1]=null
set udg_aXUNHUAN[163]=udg_aXUNHUAN[163] + 1
endloop
call GroupRemoveUnit(udg_danweizu2[260], udg_danwei2[0])
call RemoveUnit(udg_danwei2[0])
else
if ( ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) == 1.00 ) ) then
set udg_aXUNHUAN[164]=1
loop
exitwhen udg_aXUNHUAN[164] > 2
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x6530344E, udg_dian2[0], ( ( GetUnitFacing(udg_danwei2[0]) + 18.00 ) - ( 36.00 * ( I2R(udg_aXUNHUAN[164]) - 1.00 ) ) ))
call GroupAddUnit(udg_DAZE[0], udg_danwei2[1])
call SetUnitScale(udg_danwei2[1], 0.80, 0.80, 0.80)
call SetUnitLifeBJ(udg_danwei2[1], ( GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE) * 0.50 ))
call SetUnitManaBJ(udg_danwei2[1], 0.00)
call SetUnitUserData(udg_danwei2[1], 20)
call GroupAddUnit(udg_danweizu2[260], udg_danwei2[1])
set udg_danwei2[1]=null
set udg_aXUNHUAN[164]=udg_aXUNHUAN[164] + 1
endloop
call GroupRemoveUnit(udg_danweizu2[260], udg_danwei2[0])
call RemoveUnit(udg_danwei2[0])
else
call GroupRemoveUnit(udg_danweizu2[260], udg_danwei2[0])
call KillUnit(udg_danwei2[0])
endif
endif
endif
call GroupRemoveUnit(udg_danweizu2[260], udg_danwei2[0])
endif
call RemoveLocation(udg_dian2[0])
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_shuijinfu_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[260], function Trig_shuijinfu_2Func001A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_shuijinfu_2 takes nothing returns nothing
set gg_trg_shuijinfu_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_shuijinfu_2, udg_Times[4])
call TriggerAddCondition(gg_trg_shuijinfu_2, Condition(function Trig_shuijinfu_2Conditions))
call TriggerAddAction(gg_trg_shuijinfu_2, function Trig_shuijinfu_2Actions)
endfunction
function Trig_jinfu_a_1Conditions takes nothing returns boolean
return ( ( ( GetSpellAbilityId() == 0x41304349 ) or ( GetSpellAbilityId() == 0x41304355 ) ) )
endfunction
function Trig_jinfu_a_1Actions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[1]=GetSpellTargetLoc()
set udg_aXUNHUAN[165]=1
loop
exitwhen udg_aXUNHUAN[165] > 4
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303439, udg_dian2[0], ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) + 0.00 ) + ( 30.00 * I2R(udg_aXUNHUAN[165]) ) ))
call GroupAddUnit(udg_DAZE[0], udg_danwei2[1])
call SetUnitLifeBJ(udg_danwei2[1], ( ( I2R(GetHeroInt(udg_danwei2[0], true)) * 0.20 ) + ( 7.50 * I2R(GetUnitAbilityLevel(udg_danwei2[264], 0x41304335)) ) ))
call SetUnitManaBJ(udg_danwei2[1], ( AngleBetweenPoints(udg_dian2[0], udg_dian2[1]) + ( 360.00 - 15.00 ) ))
call SetUnitUserData(udg_danwei2[1], 50)
call GroupAddUnit(udg_danweizu2[208], udg_danwei2[1])
call SetUnitTimeScale(udg_danwei2[1], 0.50)
set udg_danwei2[1]=null
set udg_aXUNHUAN[165]=udg_aXUNHUAN[165] + 1
endloop
set udg_aXUNHUAN[166]=1
loop
exitwhen udg_aXUNHUAN[166] > 4
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303439, udg_dian2[0], ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) + 0.00 ) + ( 30.00 * I2R(udg_aXUNHUAN[166]) ) ))
call GroupAddUnit(udg_DAZE[0], udg_danwei2[1])
call SetUnitLifeBJ(udg_danwei2[1], ( ( I2R(GetHeroInt(udg_danwei2[0], true)) * 0.20 ) + ( 7.50 * I2R(GetUnitAbilityLevel(udg_danwei2[264], 0x41304335)) ) ))
call SetUnitManaBJ(udg_danwei2[1], ( AngleBetweenPoints(udg_dian2[0], udg_dian2[1]) + ( 360.00 + 15.00 ) ))
call SetUnitUserData(udg_danwei2[1], 50)
call GroupAddUnit(udg_danweizu2[208], udg_danwei2[1])
call GroupAddUnit(udg_danweizu2[395], udg_danwei2[1])
call SetUnitTimeScale(udg_danwei2[1], 0.50)
set udg_danwei2[1]=null
set udg_aXUNHUAN[166]=udg_aXUNHUAN[166] + 1
endloop
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
endfunction
function InitTrig_jinfu_a_1 takes nothing returns nothing
set gg_trg_jinfu_a_1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_jinfu_a_1, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_jinfu_a_1, Condition(function Trig_jinfu_a_1Conditions))
call TriggerAddAction(gg_trg_jinfu_a_1, function Trig_jinfu_a_1Actions)
endfunction
function Trig_jinfu_a_2Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[208]) == false ) )
endfunction
function Trig_jinfu_a_2Func001Func003Func006A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[1], GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_HEAVY_SLICE)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl", udg_danwei2[1], "chest"))
call GroupRemoveUnit(udg_danweizu2[208], udg_danwei2[0])
if ( ( IsUnitInGroup(udg_danwei2[0], udg_danweizu2[395]) == true ) ) then
call GroupRemoveUnit(udg_danweizu2[395], udg_danwei2[0])
else
endif
call KillUnit(udg_danwei2[0])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_jinfu_a_2Func001A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
if ( ( GetUnitUserData(udg_danwei2[0]) > - 11 ) and ( IsTerrainPathableBJ(udg_dian2[0], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(( 230.00 - ( 2.00 * I2R(GetUnitUserData(udg_danwei2[0])) ) ) , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_jinfu_a_2Func001Func003Func006A)
call DestroyGroup(udg_xuanqu)
if ( ( GetUnitUserData(udg_danwei2[0]) < 50 ) ) then
if ( ( GetUnitUserData(udg_danwei2[0]) > 25 ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 35.00, GetUnitState(udg_danwei2[0], UNIT_STATE_MANA))
else
if ( ( GetUnitUserData(udg_danwei2[0]) > 15 ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 5.00, ( GetUnitFacing(udg_danwei2[0]) * 3.00 ))
else
if ( ( IsUnitInGroup(udg_danwei2[0], udg_danweizu2[395]) == true ) ) then
call SetUnitFacing(udg_danwei2[0], ( GetUnitFacing(udg_danwei2[0]) - 5.00 ))
else
call SetUnitFacing(udg_danwei2[0], ( GetUnitFacing(udg_danwei2[0]) + 5.00 ))
endif
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 50.00, ( GetUnitFacing(udg_danwei2[0]) * 3.00 ))
endif
endif
else
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 15.00, GetUnitState(udg_danwei2[0], UNIT_STATE_MANA))
if ( ( GetUnitUserData(udg_danwei2[0]) == 50 ) ) then
call GroupRemoveUnit(udg_danweizu2[208], udg_danwei2[0])
if ( ( IsUnitInGroup(udg_danwei2[0], udg_danweizu2[395]) == true ) ) then
call GroupRemoveUnit(udg_danweizu2[395], udg_danwei2[0])
else
endif
call KillUnit(udg_danwei2[0])
else
endif
endif
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
call RemoveLocation(udg_dian2[1])
else
call GroupRemoveUnit(udg_danweizu2[208], udg_danwei2[0])
if ( ( IsUnitInGroup(udg_danwei2[0], udg_danweizu2[395]) == true ) ) then
call GroupRemoveUnit(udg_danweizu2[395], udg_danwei2[0])
else
endif
call KillUnit(udg_danwei2[0])
endif
call RemoveLocation(udg_dian2[0])
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_jinfu_a_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[208], function Trig_jinfu_a_2Func001A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_jinfu_a_2 takes nothing returns nothing
set gg_trg_jinfu_a_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_jinfu_a_2, udg_Times[4])
call TriggerAddCondition(gg_trg_jinfu_a_2, Condition(function Trig_jinfu_a_2Conditions))
call TriggerAddAction(gg_trg_jinfu_a_2, function Trig_jinfu_a_2Actions)
endfunction
function Trig_jinfu_b_1Actions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
set udg_danwei2[208]=GetSpellTargetUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[1]=GetUnitLoc(udg_danwei2[208])
call StopSoundBJ(gg_snd_StrongDrinkMissile1, false)
call PlaySoundOnUnitBJ(gg_snd_StrongDrinkMissile1, 100, udg_danwei2[0])
set udg_aXUNHUAN[167]=1
loop
exitwhen udg_aXUNHUAN[167] > 7
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], ( 400.00 - ( 100.00 * I2R(udg_aXUNHUAN[167]) ) ), ( AngleBetweenPoints(udg_dian2[0], udg_dian2[1]) + 90.00 ))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303441, udg_dian2[2], AngleBetweenPoints(udg_dian2[2], udg_dian2[1]))
call GroupAddUnit(udg_DAZE[0], udg_danwei2[1])
call SetUnitLifeBJ(udg_danwei2[1], ( ( I2R(GetHeroInt(udg_danwei2[0], true)) * 0.20 ) + ( 10.00 * I2R(GetUnitAbilityLevel(udg_danwei2[264], 0x41304335)) ) ))
call SetUnitUserData(udg_danwei2[1], 40)
call GroupAddUnit(udg_danweizu2[209], udg_danwei2[1])
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[2])
set udg_aXUNHUAN[167]=udg_aXUNHUAN[167] + 1
endloop
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
endfunction
function InitTrig_jinfu_b_1 takes nothing returns nothing
set gg_trg_jinfu_b_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_jinfu_b_1 , 3 , 0x4130434A)
call TriggerAddAction(gg_trg_jinfu_b_1, function Trig_jinfu_b_1Actions)
endfunction
function Trig_jinfu_b_2Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[209]) == false ) )
endfunction
function Trig_jinfu_b_2Func001A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
if ( ( GetUnitUserData(udg_danwei2[0]) > 0 ) and ( IsTerrainPathableBJ(udg_dian2[0], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
if ( ( GetUnitUserData(udg_danwei2[0]) == 15 ) ) then
set udg_dian2[3]=GetUnitLoc(udg_danwei2[208])
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[3], RMaxBJ(DistanceBetweenPoints(udg_dian2[0], udg_dian2[3]), 400.00), AngleBetweenPoints(udg_dian2[3], udg_dian2[0]))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303441, udg_dian2[2], AngleBetweenPoints(udg_dian2[0], udg_dian2[3]))
call SetUnitLifeBJ(udg_danwei2[1], ( GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE) * 1.00 ))
call SetUnitUserData(udg_danwei2[1], 14)
call GroupAddUnit(udg_danweizu2[209], udg_danwei2[1])
call RemoveUnit(udg_danwei2[0])
call GroupRemoveUnit(udg_danweizu2[209], udg_danwei2[0])
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[2])
call RemoveLocation(udg_dian2[3])
else
endif
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 50.00, GetUnitFacing(udg_danwei2[0]))
if ( ( GetUnitUserData(udg_danwei2[0]) <= 30 ) ) then
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
else
endif
set udg_dian2[4]=GetUnitLoc(udg_danwei2[208])
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[4]) <= 120.00 ) ) then
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[208], GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_HEAVY_SLICE)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl", udg_danwei2[208], "chest"))
call KillUnit(udg_danwei2[0])
call GroupRemoveUnit(udg_danweizu2[209], udg_danwei2[0])
else
endif
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[4])
else
call GroupRemoveUnit(udg_danweizu2[209], udg_danwei2[0])
call KillUnit(udg_danwei2[0])
endif
call RemoveLocation(udg_dian2[0])
set udg_danwei2[0]=null
endfunction
function Trig_jinfu_b_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[209], function Trig_jinfu_b_2Func001A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_jinfu_b_2 takes nothing returns nothing
set gg_trg_jinfu_b_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_jinfu_b_2, udg_Times[4])
call TriggerAddCondition(gg_trg_jinfu_b_2, Condition(function Trig_jinfu_b_2Conditions))
call TriggerAddAction(gg_trg_jinfu_b_2, function Trig_jinfu_b_2Actions)
endfunction
function Trig_mufu_a_1Conditions takes nothing returns boolean
return ( ( ( GetSpellAbilityId() == 0x41304347 ) or ( GetSpellAbilityId() == 0x41304352 ) ) )
endfunction
function Trig_mufu_a_1Actions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
call StopSoundBJ(gg_snd_BreathOfFire1, false)
call PlaySoundOnUnitBJ(gg_snd_BreathOfFire1, 100, udg_danwei2[0])
set udg_aXUNHUAN[168]=1
loop
exitwhen udg_aXUNHUAN[168] > 6
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303442, udg_dian2[0], GetRandomReal(0, 360.00))
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 1.50)
call SetUnitScale(udg_danwei2[1], ( 3.00 + ( 0.50 * I2R(bj_forLoopAIndex) ) ), ( 3.00 + ( 0.50 * I2R(bj_forLoopAIndex) ) ), ( 3.00 + ( 0.50 * I2R(bj_forLoopAIndex) ) ))
call SetUnitTimeScale(udg_danwei2[1], 10.00)
set udg_danwei2[1]=null
set udg_aXUNHUAN[168]=udg_aXUNHUAN[168] + 1
endloop
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303442, udg_dian2[0], GetRandomReal(0, 360.00))
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 1.50)
call SetUnitUserData(udg_danwei2[1], 25)
call GroupAddUnit(udg_danweizu2[210], udg_danwei2[1])
call SetUnitScale(udg_danwei2[1], 3.00, 3.00, 3.00)
call SetUnitTimeScale(udg_danwei2[1], 10.00)
set udg_danwei2[0]=null
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
call PauseTimer(udg_times[210])
call StartTimerBJ(udg_times[210], false, ( 0.25 + ( 0.25 * I2R(GetUnitAbilityLevel(udg_danwei2[264], 0x41304335)) ) ))
call UnitAddAbility(udg_danwei2[264], 0x41304545)
call SetUnitMoveSpeed(udg_danwei2[264], GetUnitDefaultMoveSpeed(udg_danwei2[264]))
endfunction
function InitTrig_mufu_a_1 takes nothing returns nothing
set gg_trg_mufu_a_1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_mufu_a_1, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_mufu_a_1, Condition(function Trig_mufu_a_1Conditions))
call TriggerAddAction(gg_trg_mufu_a_1, function Trig_mufu_a_1Actions)
endfunction
function Trig_mufu_a_2Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[210]) == false ) )
endfunction
function Trig_mufu_a_2Func002Func003Func006A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) + ( 12.00 + ( 4.00 * I2R(GetUnitAbilityLevel(udg_danwei2[264], 0x41304335)) ) ) ), AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
if ( ( IsTerrainPathableBJ(udg_dian2[2], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[2]))
else
endif
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_mufu_a_2Func002A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
if ( ( GetUnitUserData(udg_danwei2[0]) > 0 ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_aXUNHUAN[169]=1
loop
exitwhen udg_aXUNHUAN[169] > 12
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], ( 500.00 - ( 12.00 * I2R(GetUnitUserData(udg_danwei2[0])) ) ), ( GetRandomReal(0, 30.00) + ( 30.00 * I2R(udg_aXUNHUAN[169]) ) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl", udg_dian2[2]))
call RemoveLocation(udg_dian2[2])
set udg_aXUNHUAN[169]=udg_aXUNHUAN[169] + 1
endloop
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(( 500.00 - ( 12.00 * I2R(GetUnitUserData(udg_danwei2[0])) ) ) , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_mufu_a_2Func002Func003Func006A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[0])
else
call GroupRemoveUnit(udg_danweizu2[210], udg_danwei2[0])
call KillUnit(udg_danwei2[0])
endif
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_mufu_a_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[210], function Trig_mufu_a_2Func002A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_mufu_a_2 takes nothing returns nothing
set gg_trg_mufu_a_2=CreateTrigger()
call TriggerRegisterTimerEventPeriodic(gg_trg_mufu_a_2, 0.05)
call TriggerAddCondition(gg_trg_mufu_a_2, Condition(function Trig_mufu_a_2Conditions))
call TriggerAddAction(gg_trg_mufu_a_2, function Trig_mufu_a_2Actions)
endfunction
function Trig_mufu_a_3Actions takes nothing returns nothing
call UnitRemoveAbility(udg_danwei2[264], 0x41304545)
call SetUnitMoveSpeed(udg_danwei2[264], GetUnitDefaultMoveSpeed(udg_danwei2[264]))
endfunction
function InitTrig_mufu_a_3 takes nothing returns nothing
set gg_trg_mufu_a_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_mufu_a_3, udg_times[210])
call TriggerAddAction(gg_trg_mufu_a_3, function Trig_mufu_a_3Actions)
endfunction
function Trig_mufu_b_1Actions takes nothing returns nothing
set udg_danwei2[261]=GetTriggerUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[261])
set udg_dian2[1]=GetSpellTargetLoc()
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], 200.00, AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
set udg_danwei2[262]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[261]), 0x65303533, udg_dian2[2], AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
call GroupAddUnit(udg_DAZE[0], udg_danwei2[262])
call GroupAddUnit(udg_DAZE[1], udg_danwei2[262])
set udg_zhengshu2[261]=45
call StartTimerBJ(udg_times[261], true, 0.04)
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
endfunction
function InitTrig_mufu_b_1 takes nothing returns nothing
set gg_trg_mufu_b_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_mufu_b_1 , 3 , 0x41304348)
call TriggerAddAction(gg_trg_mufu_b_1, function Trig_mufu_b_1Actions)
endfunction
function Trig_mufu_b_2Func002Func002Func003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[261])) == true ) ) then
call UnitDamageTarget(udg_danwei2[261], udg_danwei2[1], ( ( 0.30 * I2R(GetHeroInt(udg_danwei2[264], true)) ) + ( 8.00 * I2R(GetUnitAbilityLevel(udg_danwei2[264], 0x41304335)) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\RockBoltMissile\\RockBoltMissile.mdl", udg_danwei2[1], "chest"))
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_mufu_b_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu2[261]=( udg_zhengshu2[261] - 1 )
if ( ( udg_zhengshu2[261] >= 0 ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[262])
if ( ( udg_zhengshu2[261] >= 25 ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], GetRandomReal(100.00, 300.00), GetRandomReal(0, 360.00))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[261]), 0x65303443, udg_dian2[1], AngleBetweenPoints(udg_dian2[1], udg_dian2[0]))
call SetUnitManaBJ(udg_danwei2[1], ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) / 10.00 ))
call SetUnitUserData(udg_danwei2[1], 10)
call GroupAddUnit(udg_danweizu2[261], udg_danwei2[1])
set udg_danwei2[1]=null
if ( ( udg_zhengshu2[261] == 25 ) ) then
call PauseTimer(udg_times[261])
call StartTimerBJ(udg_times[261], true, 0.02)
else
endif
else
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 80.00, GetUnitFacing(udg_danwei2[262]))
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(180.00 , udg_dian2[1])
call ForGroupBJ(udg_xuanqu, function Trig_mufu_b_2Func002Func002Func003A)
call DestroyGroup(udg_xuanqu)
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[261]), 0x65303443, udg_dian2[1], GetRandomReal(0, 360.00))
call SetUnitManaBJ(udg_danwei2[1], GetRandomReal(0.00, 10.00))
call SetUnitUserData(udg_danwei2[1], 15)
call GroupAddUnit(udg_danweizu2[261], udg_danwei2[1])
set udg_danwei2[1]=null
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_danwei2[262], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[262], GetLocationY(udg_dian2[1]))
else
endif
call RemoveLocation(udg_dian2[1])
set udg_aXUNHUAN[170]=1
loop
exitwhen udg_aXUNHUAN[170] > 2
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], ( 40.00 * I2R(udg_aXUNHUAN[170]) ), ( GetUnitFacing(udg_danwei2[262]) - 180.00 ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl", udg_dian2[1]))
call RemoveLocation(udg_dian2[1])
set udg_aXUNHUAN[170]=udg_aXUNHUAN[170] + 1
endloop
endif
call RemoveLocation(udg_dian2[0])
else
call PauseTimer(udg_times[261])
call KillUnit(udg_danwei2[262])
set udg_danwei2[261]=null
set udg_danwei2[262]=null
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_mufu_b_2 takes nothing returns nothing
set gg_trg_mufu_b_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_mufu_b_2, udg_times[261])
call TriggerAddAction(gg_trg_mufu_b_2, function Trig_mufu_b_2Actions)
endfunction
function Trig_mufu_b_3Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[261]) == false ) )
endfunction
function Trig_mufu_b_3Func001A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
if ( ( GetUnitUserData(udg_danwei2[0]) > 0 ) and ( IsTerrainPathableBJ(udg_dian2[0], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], GetUnitState(udg_danwei2[0], UNIT_STATE_MANA), GetUnitFacing(udg_danwei2[0]))
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
call RemoveLocation(udg_dian2[1])
else
call KillUnit(udg_danwei2[0])
call GroupRemoveUnit(udg_danweizu2[261], udg_danwei2[0])
endif
call RemoveLocation(udg_dian2[0])
set udg_danwei2[0]=null
endfunction
function Trig_mufu_b_3Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[261], function Trig_mufu_b_3Func001A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_mufu_b_3 takes nothing returns nothing
set gg_trg_mufu_b_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_mufu_b_3, udg_Times[4])
call TriggerAddCondition(gg_trg_mufu_b_3, Condition(function Trig_mufu_b_3Conditions))
call TriggerAddAction(gg_trg_mufu_b_3, function Trig_mufu_b_3Actions)
endfunction
function Trig_rimufu_1Actions takes nothing returns nothing
set udg_danwei2[216]=GetTriggerUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[216])
call PlaySoundAtPointBJ(gg_snd_ReviveNightElf, 100, udg_dian2[0], GetLocationZ(udg_dian2[0]))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[216]), 0x65303451, udg_dian2[0], 270.00)
call SetUnitUserData(udg_danwei2[1], 0)
call GroupAddUnit(udg_danweizu2[216], udg_danwei2[1])
set udg_shishu2[216]=GetUnitState(udg_danwei2[216], UNIT_STATE_MANA)
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
call StartTimerBJ(udg_times[216], true, 0.05)
endfunction
function InitTrig_rimufu_1 takes nothing returns nothing
set gg_trg_rimufu_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_rimufu_1 , 3 , 0x4130435A)
call TriggerAddAction(gg_trg_rimufu_1, function Trig_rimufu_1Actions)
endfunction
function Trig_rimufu_2Func002Func003Func007A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitAlly(udg_danwei2[1], GetOwningPlayer(udg_danwei2[216])) == true ) ) then
call SetUnitLifeBJ(udg_danwei2[1], ( GetUnitState(udg_danwei2[1], UNIT_STATE_LIFE) + ( GetUnitState(udg_danwei2[1], UNIT_STATE_MAX_LIFE) * ( 0.01 * 0.20 ) ) ))
call SetUnitManaBJ(udg_danwei2[1], ( GetUnitState(udg_danwei2[1], UNIT_STATE_MANA) + ( GetUnitState(udg_danwei2[1], UNIT_STATE_MAX_MANA) * ( 0.01 * 0.20 ) ) ))
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_rimufu_2Func002A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
if ( ( GetUnitUserData(udg_danwei2[0]) <= ( 120 + ( 40 * GetUnitAbilityLevel(udg_danwei2[216], 0x41304453) ) ) ) ) then
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) + 1 ))
set udg_dian2[1]=GetUnitLoc(udg_danwei2[216])
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) > 50.00 ) ) then
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], 12.00, AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[2]))
call RemoveLocation(udg_dian2[2])
else
endif
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) <= 250.00 ) ) then
call SetUnitManaBJ(udg_danwei2[216], RMaxBJ(udg_shishu2[216], GetUnitState(udg_danwei2[216], UNIT_STATE_MANA)))
set udg_zhengshuex[0]=GetUnitAbilityLevel(udg_danwei2[216], 0x41304654)
call UnitRemoveAbility(udg_danwei2[216], 0x41304654)
call UnitAddAbility(udg_danwei2[216], 0x41304654)
call SetUnitAbilityLevel(udg_danwei2[216], 0x41304654, IMaxBJ(( udg_zhengshuex[0] - 1 ), 1))
else
endif
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(250.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_rimufu_2Func002Func003Func007A)
call DestroyGroup(udg_xuanqu)
set udg_shishu2[216]=GetUnitState(udg_danwei2[216], UNIT_STATE_MANA)
if ( ( GetUnitUserData(udg_danwei2[0]) == 13 ) ) then
call SetUnitTimeScale(udg_danwei2[0], 0.00)
else
endif
if ( ( GetUnitUserData(udg_danwei2[0]) == ( 100 + ( 40 * GetUnitAbilityLevel(udg_danwei2[216], 0x41304453) ) ) ) ) then
call SetUnitTimeScale(udg_danwei2[0], ( 0.00 - 1 ))
else
endif
call RemoveLocation(udg_dian2[1])
else
call KillUnit(udg_danwei2[0])
call GroupRemoveUnit(udg_danweizu2[216], udg_danwei2[0])
call PauseTimer(udg_times[216])
endif
call RemoveLocation(udg_dian2[0])
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_rimufu_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[216], function Trig_rimufu_2Func002A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_rimufu_2 takes nothing returns nothing
set gg_trg_rimufu_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_rimufu_2, udg_times[216])
call TriggerAddAction(gg_trg_rimufu_2, function Trig_rimufu_2Actions)
endfunction
function Trig_jinmufu_1Actions takes nothing returns nothing
set udg_danwei2[256]=GetTriggerUnit()
set udg_dian2[256]=GetUnitLoc(udg_danwei2[256])
call StopSoundBJ(gg_snd_TinkerMorphAlt1, false)
call PlaySoundOnUnitBJ(gg_snd_TinkerMorphAlt1, 100, udg_danwei2[256])
call UnitAddAbility(udg_danwei2[256], 0x41304455)
call UnitAddAbility(udg_danwei2[256], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[256] , 80.00 , 0.00)
call UnitRemoveAbility(udg_danwei2[256], 0x41726176)
set udg_aXUNHUAN[171]=1
loop
exitwhen udg_aXUNHUAN[171] > 8
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[256]), 0x6530344A, udg_dian2[256], ( 45.00 * I2R(udg_aXUNHUAN[171]) ))
call SetUnitColor(udg_danwei2[1], PLAYER_COLOR_LIGHT_GRAY)
call GroupAddUnit(udg_danweizu2[256], udg_danwei2[1])
set udg_danwei2[1]=null
set udg_aXUNHUAN[171]=udg_aXUNHUAN[171] + 1
endloop
set udg_aXUNHUAN[172]=1
loop
exitwhen udg_aXUNHUAN[172] > 3
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[256], 200.00, ( 120.00 * I2R(udg_aXUNHUAN[172]) ))
set udg_aXUNHUAN[173]=1
loop
exitwhen udg_aXUNHUAN[173] > 3
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[256]), 0x65303439, udg_dian2[1], ( 150.00 * I2R(udg_aXUNHUAN[173]) ))
call GroupAddUnit(udg_danweizu2[256], udg_danwei2[1])
set udg_danwei2[1]=null
set udg_aXUNHUAN[173]=udg_aXUNHUAN[173] + 1
endloop
call RemoveLocation(udg_dian2[1])
set udg_aXUNHUAN[172]=udg_aXUNHUAN[172] + 1
endloop
set udg_zhengshu2[256]=0
set udg_zhengshu2[257]=3
call StartTimerBJ(udg_times[256], true, 0.04)
call RemoveLocation(udg_dian2[256])
endfunction
function InitTrig_jinmufu_1 takes nothing returns nothing
set gg_trg_jinmufu_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_jinmufu_1 , 3 , 0x41304359)
call TriggerAddAction(gg_trg_jinmufu_1, function Trig_jinmufu_1Actions)
endfunction
function Trig_jinmufu_2Func002Func006A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
call RemoveUnit(udg_danwei2[0])
set udg_danwei2[0]=null
endfunction
function Trig_jinmufu_2Func002Func010Func003Func004Func003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[256])) == true ) ) then
call UnitDamageTarget(udg_danwei2[256], udg_danwei2[1], ( ( I2R(GetHeroInt(udg_danwei2[256], true)) * 0.10 ) + 0.00 ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_MEDIUM_SLICE)
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_jinmufu_2Func002Func010A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
if ( ( GetUnitTypeId(udg_danwei2[0]) == 0x65303439 ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[256], 200.00, ( AngleBetweenPoints(udg_dian2[256], udg_dian2[0]) - 18.00 ))
if ( ( udg_zhengshu2[257] == 3 ) ) then
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(125.00 , udg_dian2[1])
call ForGroupBJ(udg_xuanqu, function Trig_jinmufu_2Func002Func010Func003Func004Func003A)
call DestroyGroup(udg_xuanqu)
else
endif
else
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[256], 0.00, 0.00)
endif
if ( ( IsTerrainPathableBJ(udg_dian2[0], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
else
endif
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_jinmufu_2Func002Func011Func004A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[256])) == true ) ) then
call UnitDamageTarget(udg_danwei2[256], udg_danwei2[1], ( ( I2R(GetHeroInt(udg_danwei2[256], true)) * 0.00 ) + ( 12.00 * I2R(GetUnitAbilityLevel(udg_danwei2[264], 0x41304453)) ) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_HEAVY_SLICE)
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl", udg_danwei2[1], "chest"))
else
endif
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_jinmufu_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu2[256]=( udg_zhengshu2[256] + 1 )
if ( ( udg_zhengshu2[256] <= 75 ) ) then
set udg_dian2[256]=GetUnitLoc(udg_danwei2[256])
call ForGroupBJ(udg_danweizu2[256], function Trig_jinmufu_2Func002Func010A)
if ( ( udg_zhengshu2[257] == 3 ) ) then
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(225.00 , udg_dian2[256])
call ForGroupBJ(udg_xuanqu, function Trig_jinmufu_2Func002Func011Func004A)
call DestroyGroup(udg_xuanqu)
set udg_zhengshu2[257]=0
else
set udg_zhengshu2[257]=( udg_zhengshu2[257] + 1 )
endif
call RemoveLocation(udg_dian2[256])
else
call UnitRemoveAbility(udg_danwei2[256], 0x41304455)
call UnitAddAbility(udg_danwei2[256], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[256] , 0.00 , 0.00)
call UnitRemoveAbility(udg_danwei2[256], 0x41726176)
call ForGroupBJ(udg_danweizu2[256], function Trig_jinmufu_2Func002Func006A)
call GroupClear(udg_danweizu2[256])
call PauseTimer(udg_times[256])
set udg_danwei2[256]=null
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_jinmufu_2 takes nothing returns nothing
set gg_trg_jinmufu_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_jinmufu_2, udg_times[256])
call TriggerAddAction(gg_trg_jinmufu_2, function Trig_jinmufu_2Actions)
endfunction
function Trig_yuemufu_1Actions takes nothing returns nothing
set udg_danwei2[290]=GetTriggerUnit()
set udg_zhengshu2[290]=0
set udg_shishu2[290]=GetUnitFacing(udg_danwei2[290])
set udg_dian2[290]=GetSpellTargetLoc()
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[290], ( 150.00 + ( 1.50 * I2R(udg_zhengshu2[290]) ) ), udg_shishu2[290])
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[290], ( 150.00 + ( 1.50 * I2R(udg_zhengshu2[290]) ) ), ( udg_shishu2[290] + 180.00 ))
set udg_danwei2[291]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[290]), 0x65303534, udg_dian2[1], ( udg_shishu2[290] + 90.00 ))
set udg_danwei2[292]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[290]), 0x65303534, udg_dian2[2], ( udg_shishu2[290] - 90.00 ))
call StartTimerBJ(udg_times[290], true, 0.04)
call PlaySoundAtPointBJ(gg_snd_StarfallCaster101, 100, udg_dian2[290], ( GetLocationZ(udg_dian2[290]) + 400.00 ))
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
endfunction
function InitTrig_yuemufu_1 takes nothing returns nothing
set gg_trg_yuemufu_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_yuemufu_1 , 3 , 0x41304358)
call TriggerAddAction(gg_trg_yuemufu_1, function Trig_yuemufu_1Actions)
endfunction
function Trig_yuemufu_2Func002Func013A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[290])) == true ) ) then
if ( ( GetUnitLifePercent(udg_danwei2[1]) > 1.00 ) and ( udg_Points == - 1 ) ) then
call SetUnitLifeBJ(udg_danwei2[1], ( GetUnitState(udg_danwei2[1], UNIT_STATE_LIFE) - ( ( GetUnitState(udg_danwei2[1], UNIT_STATE_MAX_LIFE) * 0.01 ) * ( 0.04 + ( 0.04 * I2R(GetUnitAbilityLevel(udg_danwei2[264], 0x41304453)) ) ) ) ))
else
endif
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ETHEREAL) == true ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[1])
set udg_dian2[3]=PolarProjectionBJ(udg_dian2[0], ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) / DistanceBetweenPoints(udg_dian2[1], udg_dian2[2]) ) * ( GetUnitMoveSpeed(udg_danwei2[1]) * ( 0.02 * 0.80 ) ) ), AngleBetweenPoints(udg_dian2[0], udg_dian2[1]))
set udg_dian2[4]=PolarProjectionBJ(udg_dian2[3], ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[2]) / DistanceBetweenPoints(udg_dian2[1], udg_dian2[2]) ) * ( GetUnitMoveSpeed(udg_danwei2[1]) * ( 0.02 * 0.80 ) ) ), AngleBetweenPoints(udg_dian2[0], udg_dian2[2]))
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian2[4]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian2[4]))
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[3])
call RemoveLocation(udg_dian2[4])
else
endif
call SetUnitManaBJ(udg_danwei2[1], ( GetUnitState(udg_danwei2[1], UNIT_STATE_MANA) - ( ( GetUnitState(udg_danwei2[1], UNIT_STATE_MAX_MANA) * 0.01 ) * ( 0.04 + ( 0.04 * I2R(GetUnitAbilityLevel(udg_danwei2[264], 0x41304453)) ) ) ) ))
else
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[1])
endif
set udg_danwei2[1]=null
endfunction
function Trig_yuemufu_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu2[290]=( udg_zhengshu2[290] + 1 )
if ( ( udg_zhengshu2[290] < 150 ) ) then
set udg_shishu2[290]=( udg_shishu2[290] + 10.00 )
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[290], ( 150.00 + ( 1.50 * I2R(udg_zhengshu2[290]) ) ), udg_shishu2[290])
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[290], ( 150.00 + ( 1.50 * I2R(udg_zhengshu2[290]) ) ), ( udg_shishu2[290] + 180.00 ))
call SetUnitX(udg_danwei2[291], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[291], GetLocationY(udg_dian2[1]))
call SetUnitX(udg_danwei2[292], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_danwei2[292], GetLocationY(udg_dian2[2]))
call SetUnitFacing(udg_danwei2[291], ( udg_shishu2[290] + 90.00 ))
call SetUnitFacing(udg_danwei2[292], ( udg_shishu2[290] - 90.00 ))
call s__maphack_SetHeight(udg_danwei2[291] , ( s__maphack_GetHeight(udg_danwei2[291]) + 4.00 ) , 0.00)
call s__maphack_SetHeight(udg_danwei2[292] , ( s__maphack_GetHeight(udg_danwei2[292]) + 4.00 ) , 0.00)
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(( 350.00 + ( 3.00 * I2R(udg_zhengshu2[290]) ) ) , udg_dian2[290])
call ForGroupBJ(udg_xuanqu, function Trig_yuemufu_2Func002Func013A)
if ( ( IsUnitGroupEmptyBJ(udg_xuanqu) == false ) ) then
set udg_danwei2[1]=GroupPickRandomUnit(udg_xuanqu)
call s__baka_IssueTargetOrderById2(udg_danwei2[291] , 852119 , udg_danwei2[1])
call s__baka_IssueTargetOrderById2(udg_danwei2[291] , 852486 , udg_danwei2[1])
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[1])
set udg_danwei2[1]=null
if ( ( IsUnitGroupEmptyBJ(udg_xuanqu) == false ) ) then
set udg_danwei2[1]=GroupPickRandomUnit(udg_xuanqu)
call s__baka_IssueTargetOrderById2(udg_danwei2[292] , 852119 , udg_danwei2[1])
call s__baka_IssueTargetOrderById2(udg_danwei2[292] , 852486 , udg_danwei2[1])
call GroupRemoveUnit(udg_xuanqu, udg_danwei2[1])
set udg_danwei2[1]=null
else
endif
else
endif
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
else
call PauseTimer(udg_times[290])
call KillUnit(udg_danwei2[291])
call KillUnit(udg_danwei2[292])
set udg_danwei2[290]=null
set udg_danwei2[291]=null
set udg_danwei2[292]=null
call RemoveLocation(udg_dian2[290])
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_yuemufu_2 takes nothing returns nothing
set gg_trg_yuemufu_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_yuemufu_2, udg_times[290])
call TriggerAddAction(gg_trg_yuemufu_2, function Trig_yuemufu_2Actions)
endfunction
function Trig_tufu_a_1Conditions takes nothing returns boolean
return ( ( ( GetSpellAbilityId() == 0x4130434C ) or ( GetSpellAbilityId() == 0x41304354 ) ) )
endfunction
function Trig_tufu_a_1Actions takes nothing returns nothing
set udg_danwei2[241]=GetTriggerUnit()
set udg_dian2[241]=GetSpellTargetLoc()
set udg_zhengshu2[241]=0
call StartTimerBJ(udg_times[241], true, 0.08)
endfunction
function InitTrig_tufu_a_1 takes nothing returns nothing
set gg_trg_tufu_a_1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_tufu_a_1, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_tufu_a_1, Condition(function Trig_tufu_a_1Conditions))
call TriggerAddAction(gg_trg_tufu_a_1, function Trig_tufu_a_1Actions)
endfunction
function Trig_tufu_a_2Actions takes nothing returns nothing
set udg_zhengshu2[241]=( udg_zhengshu2[241] + 1 )
if ( ( udg_zhengshu2[241] <= 7 ) ) then
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[241], GetRandomReal(25.00, 225.00), GetRandomReal(0, 360.00))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl", udg_dian2[2]))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[241]), 0x65303454, udg_dian2[2], GetRandomReal(0, 360.00))
call SetUnitLifeBJ(udg_danwei2[1], ( ( I2R(GetHeroInt(udg_danwei2[241], true)) * 0.20 ) + ( 8.00 * I2R(GetUnitAbilityLevel(udg_danwei2[264], 0x41304335)) ) ))
call SetUnitManaBJ(udg_danwei2[1], GetRandomReal(260.00, 300.00))
call s__maphack_SetHeight(udg_danwei2[1] , 20.00 , 0.00)
call SetUnitUserData(udg_danwei2[1], 20)
call GroupAddUnit(udg_danweizu2[220], udg_danwei2[1])
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[2])
else
call PauseTimer(udg_times[241])
set udg_danwei2[241]=null
call RemoveLocation(udg_dian2[241])
endif
endfunction
function InitTrig_tufu_a_2 takes nothing returns nothing
set gg_trg_tufu_a_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_tufu_a_2, udg_times[241])
call TriggerAddAction(gg_trg_tufu_a_2, function Trig_tufu_a_2Actions)
endfunction
function Trig_tufu_a_3Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[220]) == false ) )
endfunction
function Trig_tufu_a_3Func001Func003Func009A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
call s__baka_IssueTargetOrderById2(udg_danwei2[2] , 852095 , udg_danwei2[1])
call SetUnitAnimation(udg_danwei2[2], "death")
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[1], GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_tufu_a_3Func001A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
if ( ( s__maphack_GetHeight(udg_danwei2[0]) >= 10 ) ) then
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
if ( ( GetUnitUserData(udg_danwei2[0]) > 0 ) ) then
call s__maphack_SetHeight(udg_danwei2[0] , ( s__maphack_GetHeight(udg_danwei2[0]) + ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) - 200.00 ) ) , 0.00)
else
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x65303453, udg_dian2[0], GetRandomReal(0, 360.00))
call SetUnitUserData(udg_danwei2[1], 100)
call SetUnitLifeBJ(udg_danwei2[1], GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE))
call SetUnitManaBJ(udg_danwei2[1], 75.00)
call s__maphack_SetHeight(udg_danwei2[1] , 1300.00 , 0.00)
call GroupAddUnit(udg_danweizu2[220], udg_danwei2[1])
call GroupRemoveUnit(udg_danweizu2[220], udg_danwei2[0])
call RemoveUnit(udg_danwei2[0])
set udg_danwei2[1]=null
endif
else
set udg_danwei2[2]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x6530344C, udg_dian2[0], GetRandomReal(0, 360.00))
call StopSoundBJ(gg_snd_MetalLightChopMetal2, false)
call PlaySoundAtPointBJ(gg_snd_MetalLightChopMetal2, 100, udg_dian2[0], ( GetLocationZ(udg_dian2[0]) + 400.00 ))
call SetUnitAnimation(udg_danwei2[2], "death")
call UnitApplyTimedLife(udg_danwei2[2], 0x42487765, 1.00)
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(200.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_tufu_a_3Func001Func003Func009A)
call DestroyGroup(udg_xuanqu)
call GroupRemoveUnit(udg_danweizu2[220], udg_danwei2[0])
call RemoveUnit(udg_danwei2[0])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\GlaiveMissile\\GlaiveMissileTarget.mdl", udg_dian2[0]))
set udg_danwei2[2]=null
endif
call RemoveLocation(udg_dian2[0])
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_tufu_a_3Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[220], function Trig_tufu_a_3Func001A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_tufu_a_3 takes nothing returns nothing
set gg_trg_tufu_a_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_tufu_a_3, udg_Times[3])
call TriggerAddCondition(gg_trg_tufu_a_3, Condition(function Trig_tufu_a_3Conditions))
call TriggerAddAction(gg_trg_tufu_a_3, function Trig_tufu_a_3Actions)
endfunction
function Trig_tufu_b_1Actions takes nothing returns nothing
set udg_danwei2[288]=GetTriggerUnit()
set udg_danweizu2[288]=CreateGroup()
set udg_zhengshu2[288]=0
set udg_dian2[0]=GetUnitLoc(udg_danwei2[288])
call PlaySoundAtPointBJ(gg_snd_PolymorphDone, 100, udg_dian2[0], ( GetLocationZ(udg_dian2[0]) + 400.00 ))
set udg_danwei2[289]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[288]), 0x65303538, udg_dian2[0], 0.00)
call SetUnitTimeScale(udg_danwei2[289], 0.00)
call StartTimerBJ(udg_times[288], true, 0.04)
call RemoveLocation(udg_dian2[0])
endfunction
function InitTrig_tufu_b_1 takes nothing returns nothing
set gg_trg_tufu_b_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_tufu_b_1 , 3 , 0x4130434B)
call TriggerAddAction(gg_trg_tufu_b_1, function Trig_tufu_b_1Actions)
endfunction
function Trig_tufu_b_2Func002Func007A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[288]) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[288])) == true ) ) then
call GroupAddUnit(udg_danweizu2[288], udg_danwei2[1])
call s__baka_IssueTargetOrderById2(udg_danwei2[289] , 852095 , udg_danwei2[1])
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
set udg_danwei2[2]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[288]), 0x6530344C, udg_dian2[1], GetRandomReal(0, 360.00))
call SetUnitAnimation(udg_danwei2[2], "death")
call UnitApplyTimedLife(udg_danwei2[2], 0x42487765, 1.00)
set udg_danwei2[2]=null
call RemoveLocation(udg_dian2[1])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_tufu_b_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu2[288]=( udg_zhengshu2[288] + 1 )
if ( ( udg_zhengshu2[288] < ( 75 + ( 25 * GetUnitAbilityLevel(udg_danwei2[288], 0x41304335) ) ) ) and ( IsUnitType(udg_danwei2[288], UNIT_TYPE_DEAD) == false ) ) then
call UnitRemoveBuffBJ(0x4253544E, udg_danwei2[288])
call UnitRemoveBuffBJ(0x42505345, udg_danwei2[288])
set udg_dian2[0]=GetUnitLoc(udg_danwei2[288])
call SetUnitPositionLoc(udg_danwei2[289], udg_dian2[0])
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(200.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_tufu_b_2Func002Func007A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[0])
else
call DestroyGroup(udg_danweizu2[288])
call PauseTimer(udg_times[288])
call RemoveUnit(udg_danwei2[289])
set udg_danwei2[288]=null
set udg_danwei2[289]=null
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_tufu_b_2 takes nothing returns nothing
set gg_trg_tufu_b_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_tufu_b_2, udg_times[288])
call TriggerAddAction(gg_trg_tufu_b_2, function Trig_tufu_b_2Actions)
endfunction
function Trig_tujinfu_1Actions takes nothing returns nothing
set udg_danwei2[240]=GetTriggerUnit()
set udg_dian2[240]=GetUnitLoc(udg_danwei2[240])
set udg_zhengshu2[240]=0
set udg_shishu2[240]=GetUnitFacing(udg_danwei2[240])
call StartTimerBJ(udg_times[298], false, 0.50)
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[240], 120.00, GetUnitFacing(udg_danwei2[240]))
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[240], 120.00, ( GetUnitFacing(udg_danwei2[240]) - 180.00 ))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[240]), 0x65303539, udg_dian2[1], udg_shishu2[240])
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 1.00)
call SetUnitTimeScale(udg_danwei2[1], 3.00)
call SetUnitAnimation(udg_danwei2[1], "birth")
set udg_danwei2[1]=null
set udg_danwei2[2]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[240]), 0x65303539, udg_dian2[2], udg_shishu2[240])
call UnitApplyTimedLife(udg_danwei2[2], 0x42487765, 1.00)
call SetUnitTimeScale(udg_danwei2[2], 3.00)
call SetUnitAnimation(udg_danwei2[2], "birth")
set udg_danwei2[2]=null
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
endfunction
function InitTrig_tujinfu_1 takes nothing returns nothing
set gg_trg_tujinfu_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_tujinfu_1 , 3 , 0x41304433)
call TriggerAddAction(gg_trg_tujinfu_1, function Trig_tujinfu_1Actions)
endfunction
function Trig_tujinfu_1_5Func015A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[0], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[0], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[0], GetOwningPlayer(udg_danwei2[240])) == true ) ) then
set udg_dian2[4]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[5]=PolarProjectionBJ(udg_dian2[4], ( ( DistanceBetweenPoints(udg_dian2[1], udg_dian2[4]) * CosBJ(( AngleBetweenPoints(udg_dian2[4], udg_dian2[1]) - udg_shishu2[240] )) ) + 60.00 ), udg_shishu2[240])
if ( ( IsTerrainPathableBJ(udg_dian2[5], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[5]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[5]))
else
endif
call s__baka_IssueTargetOrderById2(udg_danwei2[1] , 852095 , udg_danwei2[0])
call UnitDamageTarget(udg_danwei2[240], udg_danwei2[0], ( ( I2R(GetHeroInt(udg_danwei2[240], true)) * 0.30 ) + ( 40.00 * I2R(GetUnitAbilityLevel(udg_danwei2[264], 0x41304453)) ) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_HEAVY_BASH)
call SetUnitAnimation(udg_danwei2[1], "birth")
call UnitAddAbility(udg_danwei2[0], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[0] , RMinBJ(( s__maphack_GetHeight(udg_danwei2[0]) + 300.00 ), 500.00) , 0.00)
call UnitRemoveAbility(udg_danwei2[0], 0x41726176)
call GroupAddUnit(udg_danweizu2[294], udg_danwei2[0])
call RemoveLocation(udg_dian2[4])
call RemoveLocation(udg_dian2[5])
else
endif
set udg_danwei2[0]=null
endfunction
function Trig_tujinfu_1_5Func018A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[0], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[0], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[0], GetOwningPlayer(udg_danwei2[240])) == true ) ) then
set udg_dian2[4]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[5]=PolarProjectionBJ(udg_dian2[4], ( ( DistanceBetweenPoints(udg_dian2[2], udg_dian2[4]) * CosBJ(( AngleBetweenPoints(udg_dian2[4], udg_dian2[2]) - ( udg_shishu2[240] - 180.00 ) )) ) + 60.00 ), ( udg_shishu2[240] + 180.00 ))
if ( ( IsTerrainPathableBJ(udg_dian2[5], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[5]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[5]))
else
endif
call s__baka_IssueTargetOrderById2(udg_danwei2[2] , 852095 , udg_danwei2[0])
call UnitDamageTarget(udg_danwei2[240], udg_danwei2[0], ( ( I2R(GetHeroInt(udg_danwei2[240], true)) * 0.30 ) + ( 40.00 * I2R(GetUnitAbilityLevel(udg_danwei2[264], 0x41304453)) ) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_HEAVY_BASH)
call SetUnitAnimation(udg_danwei2[2], "birth")
call UnitAddAbility(udg_danwei2[0], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[0] , RMinBJ(( s__maphack_GetHeight(udg_danwei2[0]) + 300.00 ), 500.00) , 0.00)
call UnitRemoveAbility(udg_danwei2[0], 0x41726176)
call GroupAddUnit(udg_danweizu2[294], udg_danwei2[0])
call RemoveLocation(udg_dian2[4])
call RemoveLocation(udg_dian2[5])
else
endif
set udg_danwei2[0]=null
endfunction
function Trig_tujinfu_1_5Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call StartTimerBJ(udg_times[240], true, 0.35)
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[240], 120.00, udg_shishu2[240])
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[240], 120.00, ( udg_shishu2[240] - 180.00 ))
call StopSoundBJ(gg_snd_FeralSpiritTarget1, false)
call PlaySoundAtPointBJ(gg_snd_FeralSpiritTarget1, 100, udg_dian2[240], ( GetLocationZ(udg_dian2[240]) + 400.00 ))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[240]), 0x65303448, udg_dian2[1], udg_shishu2[240])
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 2.00)
call SetUnitTimeScale(udg_danwei2[1], 3.00)
call SetUnitAnimation(udg_danwei2[1], "birth")
set udg_danwei2[2]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[240]), 0x65303448, udg_dian2[2], udg_shishu2[240])
call UnitApplyTimedLife(udg_danwei2[2], 0x42487765, 2.00)
call SetUnitTimeScale(udg_danwei2[2], 3.00)
call SetUnitAnimation(udg_danwei2[2], "birth")
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(200.00 , udg_dian2[1])
call ForGroupBJ(udg_xuanqu, function Trig_tujinfu_1_5Func015A)
call DestroyGroup(udg_xuanqu)
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(200.00 , udg_dian2[2])
call ForGroupBJ(udg_xuanqu, function Trig_tujinfu_1_5Func018A)
call DestroyGroup(udg_xuanqu)
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_tujinfu_1_5 takes nothing returns nothing
set gg_trg_tujinfu_1_5=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_tujinfu_1_5, udg_times[298])
call TriggerAddAction(gg_trg_tujinfu_1_5, function Trig_tujinfu_1_5Actions)
endfunction
function Trig_tujinfu_2Func002Func006Func007A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[0], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[0], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[0], GetOwningPlayer(udg_danwei2[240])) == true ) and ( IsUnitInGroup(udg_danwei2[0], udg_danweizu2[295]) == false ) ) then
call s__baka_IssueTargetOrderById2(udg_danwei2[2] , 852095 , udg_danwei2[0])
call SetUnitAnimation(udg_danwei2[2], "birth")
call GroupAddUnit(udg_danweizu2[295], udg_danwei2[0])
set udg_dian2[4]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[5]=PolarProjectionBJ(udg_dian2[4], ( ( DistanceBetweenPoints(udg_dian2[3], udg_dian2[4]) * CosBJ(( AngleBetweenPoints(udg_dian2[4], udg_dian2[3]) - udg_shishu2[240] )) ) + 60.00 ), udg_shishu2[240])
if ( ( IsTerrainPathableBJ(udg_dian2[5], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[5]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[5]))
else
endif
call UnitDamageTarget(udg_danwei2[240], udg_danwei2[0], ( ( I2R(GetHeroInt(udg_danwei2[240], true)) * 0.30 ) + ( 40.00 * I2R(GetUnitAbilityLevel(udg_danwei2[264], 0x41304453)) ) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_HEAVY_BASH)
call UnitAddAbility(udg_danwei2[0], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[0] , RMinBJ(( s__maphack_GetHeight(udg_danwei2[0]) + 275.00 ), 500.00) , 0.00)
call UnitRemoveAbility(udg_danwei2[0], 0x41726176)
call GroupAddUnit(udg_danweizu2[294], udg_danwei2[0])
call RemoveLocation(udg_dian2[4])
call RemoveLocation(udg_dian2[5])
else
endif
set udg_danwei2[0]=null
endfunction
function Trig_tujinfu_2Func002Func007Func007A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[0], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[0], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[0], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[0], GetOwningPlayer(udg_danwei2[240])) == true ) and ( IsUnitInGroup(udg_danwei2[0], udg_danweizu2[295]) == false ) ) then
call s__baka_IssueTargetOrderById2(udg_danwei2[2] , 852095 , udg_danwei2[0])
call SetUnitAnimation(udg_danwei2[2], "birth")
call GroupAddUnit(udg_danweizu2[295], udg_danwei2[0])
set udg_dian2[4]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[5]=PolarProjectionBJ(udg_dian2[4], ( ( DistanceBetweenPoints(udg_dian2[3], udg_dian2[4]) * CosBJ(( AngleBetweenPoints(udg_dian2[4], udg_dian2[3]) - ( udg_shishu2[240] - 180.00 ) )) ) + 60.00 ), ( udg_shishu2[240] + 180.00 ))
if ( ( IsTerrainPathableBJ(udg_dian2[5], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[5]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[5]))
else
endif
call UnitDamageTarget(udg_danwei2[240], udg_danwei2[0], ( ( I2R(GetHeroInt(udg_danwei2[240], true)) * 0.30 ) + ( 40.00 * I2R(GetUnitAbilityLevel(udg_danwei2[264], 0x41304453)) ) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_HEAVY_BASH)
call UnitAddAbility(udg_danwei2[0], 0x41726176)
call s__maphack_SetHeight(udg_danwei2[0] , RMinBJ(( s__maphack_GetHeight(udg_danwei2[0]) + 275.00 ), 500.00) , 0.00)
call UnitRemoveAbility(udg_danwei2[0], 0x41726176)
call GroupAddUnit(udg_danweizu2[294], udg_danwei2[0])
call RemoveLocation(udg_dian2[4])
call RemoveLocation(udg_dian2[5])
else
endif
set udg_danwei2[0]=null
endfunction
function Trig_tujinfu_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu2[240]=( udg_zhengshu2[240] + 1 )
if ( ( udg_zhengshu2[240] <= 4 ) ) then
call StopSoundBJ(gg_snd_FeralSpiritTarget1, false)
call PlaySoundAtPointBJ(gg_snd_FeralSpiritTarget1, 100, udg_dian2[240], ( GetLocationZ(udg_dian2[240]) + 400.00 ))
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[240], ( 120.00 * I2R(( udg_zhengshu2[240] + 1 )) ), udg_shishu2[240])
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[240], ( 120.00 * I2R(( udg_zhengshu2[240] + 1 )) ), ( udg_shishu2[240] - 180.00 ))
set udg_danweizu2[295]=CreateGroup()
set udg_aXUNHUAN[174]=1
loop
exitwhen udg_aXUNHUAN[174] > ( 1 + udg_zhengshu2[240] )
set udg_dian2[3]=PolarProjectionBJ(udg_dian2[1], ( ( 120.00 * I2R(udg_aXUNHUAN[174]) ) - ( 120.00 + ( 60.00 * I2R(udg_zhengshu2[240]) ) ) ), ( udg_shishu2[240] - 90.00 ))
set udg_danwei2[2]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[240]), 0x65303448, udg_dian2[3], udg_shishu2[240])
call UnitApplyTimedLife(udg_danwei2[2], 0x42487765, 2.00)
call SetUnitAnimation(udg_danwei2[2], "birth")
call SetUnitTimeScale(udg_danwei2[2], 3.00)
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(175.00 , udg_dian2[3])
call ForGroupBJ(udg_xuanqu, function Trig_tujinfu_2Func002Func006Func007A)
call DestroyGroup(udg_xuanqu)
set udg_danwei2[2]=null
call RemoveLocation(udg_dian2[3])
set udg_aXUNHUAN[174]=udg_aXUNHUAN[174] + 1
endloop
set udg_aXUNHUAN[175]=1
loop
exitwhen udg_aXUNHUAN[175] > ( 1 + udg_zhengshu2[240] )
set udg_dian2[3]=PolarProjectionBJ(udg_dian2[2], ( ( 120.00 * I2R(udg_aXUNHUAN[175]) ) - ( 120.00 + ( 60.00 * I2R(udg_zhengshu2[240]) ) ) ), ( udg_shishu2[240] - 90.00 ))
set udg_danwei2[2]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[240]), 0x65303448, udg_dian2[3], udg_shishu2[240])
call UnitApplyTimedLife(udg_danwei2[2], 0x42487765, 2.00)
call SetUnitAnimation(udg_danwei2[2], "birth")
call SetUnitTimeScale(udg_danwei2[2], 3.00)
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(175.00 , udg_dian2[3])
call ForGroupBJ(udg_xuanqu, function Trig_tujinfu_2Func002Func007Func007A)
call DestroyGroup(udg_xuanqu)
set udg_danwei2[2]=null
call RemoveLocation(udg_dian2[3])
set udg_aXUNHUAN[175]=udg_aXUNHUAN[175] + 1
endloop
call DestroyGroup(udg_danweizu2[295])
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
else
if ( ( udg_zhengshu2[240] <= 8 ) ) then
else
call PauseTimer(udg_times[240])
set udg_danwei2[240]=null
call RemoveLocation(udg_dian2[240])
endif
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_tujinfu_2 takes nothing returns nothing
set gg_trg_tujinfu_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_tujinfu_2, udg_times[240])
call TriggerAddAction(gg_trg_tujinfu_2, function Trig_tujinfu_2Actions)
endfunction
function Trig_tujinfu_3Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[294]) == false ) )
endfunction
function Trig_tujinfu_3Func001A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
call UnitAddAbility(udg_danwei2[0], 0x41726176)
if ( ( s__maphack_GetHeight(udg_danwei2[0]) >= 10 ) ) then
call s__maphack_SetHeight(udg_danwei2[0] , ( s__maphack_GetHeight(udg_danwei2[0]) - 20.00 ) , 0.00)
else
call s__maphack_SetHeight(udg_danwei2[0] , 0.00 , 0.00)
call GroupRemoveUnit(udg_danweizu2[220], udg_danwei2[0])
endif
call UnitRemoveAbility(udg_danwei2[0], 0x41726176)
set udg_danwei2[0]=null
endfunction
function Trig_tujinfu_3Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[294], function Trig_tujinfu_3Func001A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_tujinfu_3 takes nothing returns nothing
set gg_trg_tujinfu_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_tujinfu_3, udg_Times[4])
call TriggerAddCondition(gg_trg_tujinfu_3, Condition(function Trig_tujinfu_3Conditions))
call TriggerAddAction(gg_trg_tujinfu_3, function Trig_tujinfu_3Actions)
endfunction
function Trig_rifu_1Actions takes nothing returns nothing
set udg_danwei2[221]=GetTriggerUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[221])
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 100.00, GetUnitFacing(udg_danwei2[221]))
set udg_aXUNHUAN[176]=222
loop
exitwhen udg_aXUNHUAN[176] > 224
set udg_danwei2[udg_aXUNHUAN[176]]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[221]), 0x65303455, udg_dian2[1], 270.00)
set udg_aXUNHUAN[176]=udg_aXUNHUAN[176] + 1
endloop
set udg_Danwei[37]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[221]), 0x65303649, udg_dian2[0], 270.00)
call SetUnitManaBJ(udg_Danwei[37], 255.00)
call SetUnitColor(udg_Danwei[37], PLAYER_COLOR_YELLOW)
call SetUnitTimeScale(udg_Danwei[37], ( 1.00 / 3.00 ))
call GroupAddUnit(udg_Danweizu[37], udg_Danwei[37])
set udg_Danwei[37]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
set udg_zhengshu2[221]=0
set udg_zhengshu2[222]=0
set udg_zhengshu2[223]=5
set udg_zhengshu2[224]=0
call StartTimerBJ(udg_times[221], true, 0.04)
endfunction
function InitTrig_rifu_1 takes nothing returns nothing
set gg_trg_rifu_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_rifu_1 , 3 , 0x4130434F)
call TriggerAddAction(gg_trg_rifu_1, function Trig_rifu_1Actions)
endfunction
function Trig_rifu_2Func001Func001Func005A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[221])) == true ) ) then
call UnitDamageTarget(udg_danwei2[221], udg_danwei2[1], ( ( I2R(GetHeroInt(udg_danwei2[221], true)) * 0.08 ) + 5.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FireBallMissile\\FireBallMissile.mdl", udg_danwei2[1], "chest"))
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_rifu_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_zhengshu2[222] == 0 ) ) then
set udg_zhengshu2[221]=( udg_zhengshu2[221] + 1 )
if ( ( udg_zhengshu2[221] <= 10 ) ) then
set udg_aXUNHUAN[177]=222
loop
exitwhen udg_aXUNHUAN[177] > 224
call SetUnitScale(udg_danwei2[udg_aXUNHUAN[177]], ( 1.00 + ( I2R(udg_zhengshu2[221]) / 8.00 ) ), ( 1.00 + ( I2R(udg_zhengshu2[221]) / 8.00 ) ), ( 1 + ( I2R(udg_zhengshu2[221]) / 8.00 ) ))
set udg_aXUNHUAN[177]=udg_aXUNHUAN[177] + 1
endloop
else
endif
if ( ( udg_zhengshu2[223] >= ( 10 - IMinBJ(( udg_zhengshu2[221] / 6 ), 10) ) ) ) then
set udg_zhengshu2[223]=0
set udg_dian2[0]=GetUnitLoc(udg_danwei2[222])
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[221]), 0x65303456, udg_dian2[0], GetRandomReal(0, 360.00))
call SetUnitScale(udg_danwei2[1], ( 0.80 + ( I2R(udg_zhengshu2[221]) / 75.00 ) ), ( 0.80 + ( I2R(udg_zhengshu2[221]) / 75.00 ) ), ( 0.80 + ( I2R(udg_zhengshu2[221]) / 75.00 ) ))
call SetUnitAnimation(udg_danwei2[1], "birth")
call SetUnitFacing(udg_danwei2[1], ( GetUnitFacing(udg_danwei2[1]) - 90.00 ))
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 1.50)
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[0])
else
set udg_zhengshu2[223]=( udg_zhengshu2[223] + 1 )
endif
if ( ( udg_zhengshu2[221] == 75 ) ) then
set udg_zhengshu2[222]=1
set udg_dian2[0]=GetUnitLoc(udg_danwei2[222])
call PlaySoundAtPointBJ(gg_snd_VolcanoLoop, 100, udg_dian2[0], 250.00)
call RemoveLocation(udg_dian2[0])
else
endif
else
if ( ( udg_zhengshu2[221] >= 75 ) and ( udg_zhengshu2[224] <= 100 ) ) then
set udg_zhengshu2[224]=( udg_zhengshu2[224] + 1 )
set udg_dian2[0]=GetUnitLoc(udg_danwei2[222])
if ( ( udg_zhengshu2[224] == 50 ) ) then
call PlaySoundAtPointBJ(gg_snd_FlameStrikeBirth101, 100, udg_dian2[0], 250.00)
else
endif
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(900.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_rifu_2Func001Func001Func005A)
call DestroyGroup(udg_xuanqu)
set udg_aXUNHUAN[178]=222
loop
exitwhen udg_aXUNHUAN[178] > 224
call SetUnitScale(udg_danwei2[udg_aXUNHUAN[178]], RMinBJ(( I2R(udg_zhengshu2[224]) * 2.50 ), 50.00), RMinBJ(( I2R(udg_zhengshu2[224]) * 2.50 ), 50.00), RMinBJ(( I2R(udg_zhengshu2[224]) * 2.50 ), 50.00))
set udg_aXUNHUAN[178]=udg_aXUNHUAN[178] + 1
endloop
else
call PauseTimer(udg_times[221])
set udg_aXUNHUAN[179]=222
loop
exitwhen udg_aXUNHUAN[179] > 224
call UnitApplyTimedLife(udg_danwei2[udg_aXUNHUAN[179]], 0x42487765, ( ( I2R(udg_aXUNHUAN[179]) - 220.00 ) * 0.10 ))
set udg_danwei2[udg_aXUNHUAN[179]]=null
set udg_aXUNHUAN[179]=udg_aXUNHUAN[179] + 1
endloop
set udg_danwei2[221]=null
endif
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_rifu_2 takes nothing returns nothing
set gg_trg_rifu_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_rifu_2, udg_times[221])
call TriggerAddAction(gg_trg_rifu_2, function Trig_rifu_2Actions)
endfunction
function Trig_rifu_3Func002A takes nothing returns nothing
set udg_Danwei[37]=GetEnumUnit()
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[37])) + 1 ) == ( s__baka_SGetPlayerId(GetOwningPlayer(udg_danwei2[221])) + 1 ) ) ) then
if ( ( udg_zhengshu2[221] >= 75 ) ) then
call SetUnitColor(udg_Danwei[37], PLAYER_COLOR_ORANGE)
else
call SetUnitColor(udg_Danwei[37], PLAYER_COLOR_LIGHT_GRAY)
endif
call SetUnitTimeScale(udg_Danwei[37], 0.00)
call SetUnitManaBJ(udg_Danwei[37], 100.00)
else
endif
set udg_Danwei[37]=null
endfunction
function Trig_rifu_3Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu2[222]=1
call ForGroupBJ(udg_Danweizu[37], function Trig_rifu_3Func002A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_rifu_3 takes nothing returns nothing
set gg_trg_rifu_3=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_rifu_3 , 4 , 0x4130434F)
call s__Event_AnyUnitSkill(gg_trg_rifu_3 , 5 , 0x4130434F)
call TriggerAddAction(gg_trg_rifu_3, function Trig_rifu_3Actions)
endfunction
function Trig_yuefu_1Actions takes nothing returns nothing
set udg_danwei2[225]=GetTriggerUnit()
set udg_dian2[225]=GetUnitLoc(udg_danwei2[225])
set udg_aXUNHUAN[180]=226
loop
exitwhen udg_aXUNHUAN[180] > 229
set udg_danwei2[udg_aXUNHUAN[180]]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[225]), 0x65303458, udg_dian2[225], 270.00)
call SetUnitScale(udg_danwei2[udg_aXUNHUAN[180]], 0.10, 0.10, 0.10)
set udg_aXUNHUAN[180]=udg_aXUNHUAN[180] + 1
endloop
set udg_zhengshu2[225]=0
set udg_zhengshu2[226]=0
call StopSoundBJ(gg_snd_StarfallCaster101, false)
call PlaySoundOnUnitBJ(gg_snd_StarfallCaster101, 100, udg_danwei2[225])
call StartTimerBJ(udg_times[225], true, 0.03)
call s__Unit_PauseUnitMU(udg_danwei2[225] , true , "元素-月符")
endfunction
function InitTrig_yuefu_1 takes nothing returns nothing
set gg_trg_yuefu_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_yuefu_1 , 3 , 0x4130434E)
call TriggerAddAction(gg_trg_yuefu_1, function Trig_yuefu_1Actions)
endfunction
function Trig_yuefu_2Func002Func001Func007A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[225], RMinBJ(( DistanceBetweenPoints(udg_dian2[225], udg_dian2[0]) + 5.00 ), 275.00), ( AngleBetweenPoints(udg_dian2[225], udg_dian2[0]) - 6.00 ))
if ( ( GetUnitUserData(udg_danwei2[0]) > 0 ) and ( IsTerrainPathableBJ(udg_dian2[0], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
else
call GroupRemoveUnit(udg_danweizu2[225], udg_danwei2[0])
call RemoveUnit(udg_danwei2[0])
endif
if ( ( GetUnitUserData(udg_danwei2[0]) == 47 ) ) then
call SetUnitTimeScale(udg_danwei2[0], 0.10)
else
endif
set udg_danwei2[0]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
endfunction
function Trig_yuefu_2Func002Func001Func009A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[225])) == true ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[225], RMinBJ(( DistanceBetweenPoints(udg_dian2[225], udg_dian2[0]) + 5.00 ), 325.00), ( AngleBetweenPoints(udg_dian2[225], udg_dian2[0]) - 6.00 ))
call UnitDamageTarget(udg_danwei2[225], udg_danwei2[1], ( ( I2R(GetHeroInt(udg_danwei2[225], true)) * 0.04 ) + 5.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call IssueImmediateOrderById(udg_danwei2[1], 851972)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl", udg_danwei2[1], "chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SpiritOfVengeanceMissile\\SpiritOfVengeanceMissile.mdl", udg_danwei2[1], "chest"))
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_yuefu_2Func002Func002Func002Func002A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
call RemoveUnit(udg_danwei2[0])
set udg_danwei2[0]=null
endfunction
function Trig_yuefu_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu2[225]=( udg_zhengshu2[225] + 1 )
if ( ( udg_zhengshu2[225] <= 125 ) ) then
if ( ( udg_zhengshu2[225] <= 25 ) ) then
set udg_aXUNHUAN[181]=226
loop
exitwhen udg_aXUNHUAN[181] > 229
if ( ( udg_zhengshu2[225] <= 10 ) ) then
call SetUnitScale(udg_danwei2[udg_aXUNHUAN[181]], ( 0.30 * I2R(udg_zhengshu2[225]) ), ( 0.30 * I2R(udg_zhengshu2[225]) ), ( 0.30 * I2R(udg_zhengshu2[225]) ))
else
endif
set udg_aXUNHUAN[181]=udg_aXUNHUAN[181] + 1
endloop
call s__maphack_SetHeight(udg_danwei2[228] , ( s__maphack_GetHeight(udg_danwei2[bj_forLoopAIndex]) + ( Pow(I2R(udg_zhengshu2[225]), 1.50) * 8.00 ) ) , 0.00)
call s__maphack_SetHeight(udg_danwei2[229] , ( s__maphack_GetHeight(udg_danwei2[bj_forLoopAIndex]) + ( Pow(I2R(udg_zhengshu2[225]), 1.50) * 8.00 ) ) , 0.00)
if ( ( udg_zhengshu2[225] == 25 ) ) then
call SetUnitInvulnerable(udg_danwei2[225], true)
set udg_aXUNHUAN[182]=1
loop
exitwhen udg_aXUNHUAN[182] > 4
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[225], GetRandomReal(75.00, 300.00), ( 45.00 + ( 90.00 * I2R(udg_aXUNHUAN[182]) ) ))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[225]), 0x65303457, udg_dian2[1], ( 45.00 + ( 90.00 * I2R(udg_aXUNHUAN[182]) ) ))
call SetUnitUserData(udg_danwei2[1], 50)
call GroupAddUnit(udg_danweizu2[225], udg_danwei2[1])
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[1])
set udg_aXUNHUAN[182]=udg_aXUNHUAN[182] + 1
endloop
else
endif
else
if ( ( udg_zhengshu2[226] >= 10 ) ) then
set udg_zhengshu2[226]=0
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[225], GetRandomReal(50.00, 300.00), ( 7.00 * I2R(udg_zhengshu2[225]) ))
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[225], DistanceBetweenPoints(udg_dian2[225], udg_dian2[1]), AngleBetweenPoints(udg_dian2[1], udg_dian2[225]))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[225]), 0x65303457, udg_dian2[1], AngleBetweenPoints(udg_dian2[225], udg_dian2[1]))
set udg_danwei2[2]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[225]), 0x65303457, udg_dian2[2], AngleBetweenPoints(udg_dian2[1], udg_dian2[225]))
call SetUnitUserData(udg_danwei2[1], 50)
call SetUnitUserData(udg_danwei2[2], 50)
call GroupAddUnit(udg_danweizu2[225], udg_danwei2[1])
call GroupAddUnit(udg_danweizu2[225], udg_danwei2[2])
set udg_danwei2[1]=null
set udg_danwei2[2]=null
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
else
set udg_zhengshu2[226]=( udg_zhengshu2[226] + 1 )
endif
call ForGroupBJ(udg_danweizu2[225], function Trig_yuefu_2Func002Func001Func007A)
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(350.00 , udg_dian2[225])
call ForGroupBJ(udg_xuanqu, function Trig_yuefu_2Func002Func001Func009A)
call DestroyGroup(udg_xuanqu)
endif
else
if ( ( udg_zhengshu2[225] <= 135 ) ) then
if ( ( udg_zhengshu2[225] == 126 ) ) then
call SetUnitInvulnerable(udg_danwei2[225], false)
call ForGroupBJ(udg_danweizu2[225], function Trig_yuefu_2Func002Func002Func002Func002A)
call GroupClear(udg_danweizu2[225])
else
endif
set udg_aXUNHUAN[183]=226
loop
exitwhen udg_aXUNHUAN[183] > 229
call SetUnitScale(udg_danwei2[udg_aXUNHUAN[183]], ( 40.50 - ( I2R(udg_zhengshu2[225]) * 0.30 ) ), ( 40.50 - ( I2R(udg_zhengshu2[225]) * 0.30 ) ), ( 40.50 - ( I2R(udg_zhengshu2[225]) * 0.30 ) ))
set udg_aXUNHUAN[183]=udg_aXUNHUAN[183] + 1
endloop
else
call PauseTimer(udg_times[225])
call s__Unit_PauseUnitMU(udg_danwei2[225] , false , "元素-月符")
set udg_aXUNHUAN[184]=226
loop
exitwhen udg_aXUNHUAN[184] > 229
call RemoveUnit(udg_danwei2[udg_aXUNHUAN[184]])
set udg_danwei2[udg_aXUNHUAN[184]]=null
set udg_aXUNHUAN[184]=udg_aXUNHUAN[184] + 1
endloop
set udg_danwei2[225]=null
call RemoveLocation(udg_dian2[225])
endif
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_yuefu_2 takes nothing returns nothing
set gg_trg_yuefu_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_yuefu_2, udg_times[225])
call TriggerAddAction(gg_trg_yuefu_2, function Trig_yuefu_2Actions)
endfunction
function Trig_riyuefu_1Actions takes nothing returns nothing
set udg_danwei2[364]=GetTriggerUnit()
set udg_zhengshu2[364]=0
set udg_dian2[364]=GetSpellTargetLoc()
call StartTimerBJ(udg_times[364], true, 0.06)
endfunction
function InitTrig_riyuefu_1 takes nothing returns nothing
set gg_trg_riyuefu_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_riyuefu_1 , 3 , 0x41304632)
call TriggerAddAction(gg_trg_riyuefu_1, function Trig_riyuefu_1Actions)
endfunction
function Trig_riyuefu_2Func002Func001Func008A takes nothing returns nothing
set udg_danwei2[2]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[2], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[2], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[2], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[2], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[2], GetOwningPlayer(udg_danwei2[364])) == true ) and ( UnitHasBuffBJ(udg_danwei2[2], 0x42303146) == false ) ) then
call s__baka_IssueTargetOrderById2(udg_danwei2[1] , 852668 , udg_danwei2[2])
else
endif
set udg_danwei2[2]=null
endfunction
function Trig_riyuefu_2Func002Func001Func012A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[364])) == true ) ) then
set udg_dian2[1]=GetUnitLoc(udg_danwei2[1])
if ( ( DistanceBetweenPoints(udg_dian2[364], udg_dian2[1]) >= ( - 150.00 + ( I2R(udg_zhengshu2[364]) * 10.00 ) ) ) ) then
call UnitDamageTarget(udg_danwei2[364], udg_danwei2[1], ( ( I2R(GetHeroInt(udg_danwei2[364], true)) * 0.24 ) + 12.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
call RemoveLocation(udg_dian2[1])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_riyuefu_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu2[364]=( udg_zhengshu2[364] + 1 )
if ( ( udg_zhengshu2[364] < 40 ) ) then
if ( ( ( I2R(udg_zhengshu2[364]) / 2.00 ) == I2R(( udg_zhengshu2[364] / 2 )) ) ) then
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[364]), 0x65303553, udg_dian2[364], 270.00)
call SetUnitScale(udg_danwei2[1], ( 1.00 + ( I2R(udg_zhengshu2[364]) / 13.30 ) ), ( 1.00 + ( I2R(udg_zhengshu2[364]) / 13.30 ) ), ( 1.00 + ( I2R(udg_zhengshu2[364]) / 13.30 ) ))
call SetUnitAnimation(udg_danwei2[1], "birth")
call SetUnitTimeScale(udg_danwei2[1], 4.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 0.75)
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(( 150.00 + ( I2R(udg_zhengshu2[364]) * 10.00 ) ) , udg_dian2[364])
call ForGroupBJ(udg_xuanqu, function Trig_riyuefu_2Func002Func001Func008A)
call DestroyGroup(udg_xuanqu)
set udg_danwei2[1]=null
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(Pow(( Pow(( 0.00 + ( I2R(udg_zhengshu2[364]) * 10.00 ) ), 2.00) + Pow(RMinBJ(( 75.00 + ( 60.00 * I2R(udg_zhengshu2[364]) ) ), 550.00), 2.00) ), 0.50) , udg_dian2[364])
call ForGroupBJ(udg_xuanqu, function Trig_riyuefu_2Func002Func001Func012A)
call DestroyGroup(udg_xuanqu)
else
endif
set udg_aXUNHUAN[185]=1
loop
exitwhen udg_aXUNHUAN[185] > ( ( udg_zhengshu2[364] / 12 ) + 3 )
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[364], ( - 75.00 + ( I2R(udg_zhengshu2[364]) * 10.00 ) ), ( ( 360.00 / ( ( ( I2R(udg_zhengshu2[364]) / 12.00 ) + 3.00 ) / I2R(udg_aXUNHUAN[185]) ) ) + ( 24.00 * I2R(udg_zhengshu2[364]) ) ))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[364]), 0x65303552, udg_dian2[1], ( AngleBetweenPoints(udg_dian2[364], udg_dian2[1]) + 90.00 ))
call SetUnitUserData(udg_danwei2[1], 7)
call GroupAddUnit(udg_danweizu2[364], udg_danwei2[1])
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[1])
set udg_aXUNHUAN[185]=udg_aXUNHUAN[185] + 1
endloop
else
call PauseTimer(udg_times[364])
set udg_danwei2[364]=null
call RemoveLocation(udg_dian2[364])
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_riyuefu_2 takes nothing returns nothing
set gg_trg_riyuefu_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_riyuefu_2, udg_times[364])
call TriggerAddAction(gg_trg_riyuefu_2, function Trig_riyuefu_2Actions)
endfunction
function Trig_riyuefu_3Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[364]) == false ) )
endfunction
function Trig_riyuefu_3Func001A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
if ( ( GetUnitUserData(udg_danwei2[0]) > 0 ) and ( IsTerrainPathableBJ(udg_dian2[0], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 75.00, GetUnitFacing(udg_danwei2[0]))
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
call RemoveLocation(udg_dian2[1])
else
call KillUnit(udg_danwei2[0])
call GroupRemoveUnit(udg_danweizu2[364], udg_danwei2[0])
endif
call RemoveLocation(udg_dian2[0])
set udg_danwei2[0]=null
endfunction
function Trig_riyuefu_3Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[364], function Trig_riyuefu_3Func001A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_riyuefu_3 takes nothing returns nothing
set gg_trg_riyuefu_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_riyuefu_3, udg_Times[4])
call TriggerAddCondition(gg_trg_riyuefu_3, Condition(function Trig_riyuefu_3Conditions))
call TriggerAddAction(gg_trg_riyuefu_3, function Trig_riyuefu_3Actions)
endfunction
function Trig_xianzhezhishi_1Actions takes nothing returns nothing
set udg_danwei2[230]=GetTriggerUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[230])
set udg_aXUNHUAN[186]=231
loop
exitwhen udg_aXUNHUAN[186] > 235
set udg_danwei2[udg_aXUNHUAN[186]]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[230]), 0x6530344D, udg_dian2[0], 270.00)
call SetUnitUserData(udg_danwei2[udg_aXUNHUAN[186]], 90)
call SetUnitAnimation(udg_danwei2[udg_aXUNHUAN[186]], "birth")
set udg_aXUNHUAN[186]=udg_aXUNHUAN[186] + 1
endloop
call SetUnitVertexColor(udg_danwei2[231], 150, 150, 255, 255)
call SetUnitColor(udg_danwei2[231], PLAYER_COLOR_BLUE)
call SetUnitVertexColor(udg_danwei2[232], 255, 150, 150, 255)
call SetUnitColor(udg_danwei2[232], PLAYER_COLOR_RED)
call SetUnitVertexColor(udg_danwei2[233], 150, 255, 150, 255)
call SetUnitColor(udg_danwei2[233], PLAYER_COLOR_GREEN)
call SetUnitVertexColor(udg_danwei2[234], 255, 255, 0, 255)
call SetUnitColor(udg_danwei2[234], PLAYER_COLOR_ORANGE)
call SetUnitVertexColor(udg_danwei2[235], 255, 150, 255, 255)
call SetUnitColor(udg_danwei2[235], PLAYER_COLOR_PINK)
set udg_zhengshu2[230]=0
call StartTimerBJ(udg_times[230], true, 0.04)
endfunction
function InitTrig_xianzhezhishi_1 takes nothing returns nothing
set gg_trg_xianzhezhishi_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_xianzhezhishi_1 , 3 , 0x41304432)
call TriggerAddAction(gg_trg_xianzhezhishi_1, function Trig_xianzhezhishi_1Actions)
endfunction
function Trig_xianzhezhishi_2Actions takes nothing returns nothing
set udg_zhengshu2[230]=( udg_zhengshu2[230] + 1 )
if ( ( udg_zhengshu2[230] <= 500 ) and ( IsUnitType(udg_danwei2[230], UNIT_TYPE_DEAD) == false ) ) then
set udg_dian2[0]=GetUnitLoc(udg_danwei2[230])
set udg_aXUNHUAN[187]=231
loop
exitwhen udg_aXUNHUAN[187] > 235
call SetUnitUserData(udg_danwei2[udg_aXUNHUAN[187]], IMinBJ(( GetUnitUserData(udg_danwei2[udg_aXUNHUAN[187]]) + 1 ), 100))
if ( ( udg_zhengshu2[230] <= 5 ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], ( 20.00 * I2R(udg_zhengshu2[230]) ), ( ( ( I2R(udg_zhengshu2[230]) * 10.00 ) - 36.00 ) + ( 72.00 * I2R(udg_aXUNHUAN[187]) ) ))
else
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 100.00, ( ( ( I2R(udg_zhengshu2[230]) * 5.00 ) - 11.00 ) + ( 72.00 * I2R(udg_aXUNHUAN[187]) ) ))
endif
call SetUnitX(udg_danwei2[udg_aXUNHUAN[187]], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[udg_aXUNHUAN[187]], GetLocationY(udg_dian2[1]))
call RemoveLocation(udg_dian2[1])
set udg_aXUNHUAN[187]=udg_aXUNHUAN[187] + 1
endloop
if ( ( GetUnitUserData(udg_danwei2[231]) >= 100 ) ) then
call SetUnitVertexColor(udg_danwei2[231], 150, 150, 255, 255)
else
endif
if ( ( GetUnitUserData(udg_danwei2[232]) >= 100 ) ) then
call SetUnitVertexColor(udg_danwei2[232], 255, 150, 150, 255)
else
endif
if ( ( GetUnitUserData(udg_danwei2[233]) >= 100 ) ) then
call SetUnitVertexColor(udg_danwei2[233], 150, 255, 150, 255)
else
endif
if ( ( GetUnitUserData(udg_danwei2[234]) >= 100 ) ) then
call SetUnitVertexColor(udg_danwei2[234], 255, 255, 0, 255)
else
endif
if ( ( GetUnitUserData(udg_danwei2[235]) >= 100 ) ) then
call SetUnitVertexColor(udg_danwei2[235], 255, 150, 255, 255)
else
endif
call RemoveLocation(udg_dian2[0])
else
call PauseTimer(udg_times[230])
set udg_danwei2[230]=null
call RemoveLocation(udg_dian2[230])
set udg_aXUNHUAN[188]=231
loop
exitwhen udg_aXUNHUAN[188] > 235
call KillUnit(udg_danwei2[udg_aXUNHUAN[188]])
set udg_danwei2[udg_aXUNHUAN[188]]=null
set udg_aXUNHUAN[188]=udg_aXUNHUAN[188] + 1
endloop
endif
endfunction
function InitTrig_xianzhezhishi_2 takes nothing returns nothing
set gg_trg_xianzhezhishi_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_xianzhezhishi_2, udg_times[230])
call TriggerAddAction(gg_trg_xianzhezhishi_2, function Trig_xianzhezhishi_2Actions)
endfunction
function Trig_xianzhezhishi_3Conditions takes nothing returns boolean
return ( ( GetUnitTypeId(GetTriggerUnit()) == 0x486B616C ) )
endfunction
function Trig_xianzhezhishi_3Actions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
set udg_danwei2[2]=GetSpellTargetUnit()
set udg_dian2[2]=GetSpellTargetLoc()
if ( ( ( ( ( GetSpellAbilityId() == 0x41304346 ) or ( GetSpellAbilityId() == 0x41304353 ) or ( GetSpellAbilityId() == 0x41304345 ) ) and ( GetUnitUserData(udg_danwei2[231]) >= 100 ) ) or ( ( ( GetSpellAbilityId() == 0x41304343 ) or ( GetSpellAbilityId() == 0x41304356 ) or ( GetSpellAbilityId() == 0x41304344 ) ) and ( GetUnitUserData(udg_danwei2[232]) >= 100 ) ) or ( ( ( GetSpellAbilityId() == 0x41304347 ) or ( GetSpellAbilityId() == 0x41304352 ) or ( GetSpellAbilityId() == 0x41304348 ) ) and ( GetUnitUserData(udg_danwei2[233]) >= 100 ) ) or ( ( ( GetSpellAbilityId() == 0x41304349 ) or ( GetSpellAbilityId() == 0x41304355 ) or ( GetSpellAbilityId() == 0x4130434A ) ) and ( GetUnitUserData(udg_danwei2[234]) >= 100 ) ) or ( ( ( GetSpellAbilityId() == 0x4130434C ) or ( GetSpellAbilityId() == 0x41304354 ) or ( GetSpellAbilityId() == 0x4130434B ) ) and ( GetUnitUserData(udg_danwei2[235]) >= 100 ) ) ) ) then
call StopSoundBJ(gg_snd_FrostArrowHit1, false)
call PlaySoundAtPointBJ(gg_snd_FrostArrowHit1, 100, udg_dian2[0], ( GetLocationZ(udg_dian2[0]) + 400.00 ))
if ( ( ( GetSpellAbilityId() == 0x41304346 ) or ( GetSpellAbilityId() == 0x41304353 ) or ( GetSpellAbilityId() == 0x41304345 ) ) ) then
call SetUnitUserData(udg_danwei2[231], 0)
call SetUnitVertexColor(udg_danwei2[231], 0, 0, 0, 50)
set udg_dian2[1]=GetUnitLoc(udg_danwei2[231])
else
if ( ( ( GetSpellAbilityId() == 0x41304343 ) or ( GetSpellAbilityId() == 0x41304356 ) or ( GetSpellAbilityId() == 0x41304344 ) ) ) then
call SetUnitUserData(udg_danwei2[232], 0)
call SetUnitVertexColor(udg_danwei2[232], 0, 0, 0, 50)
set udg_dian2[1]=GetUnitLoc(udg_danwei2[232])
else
if ( ( ( GetSpellAbilityId() == 0x41304347 ) or ( GetSpellAbilityId() == 0x41304352 ) or ( GetSpellAbilityId() == 0x41304348 ) ) ) then
call SetUnitUserData(udg_danwei2[233], 0)
call SetUnitVertexColor(udg_danwei2[233], 0, 0, 0, 50)
set udg_dian2[1]=GetUnitLoc(udg_danwei2[233])
else
if ( ( ( GetSpellAbilityId() == 0x41304349 ) or ( GetSpellAbilityId() == 0x41304355 ) or ( GetSpellAbilityId() == 0x4130434A ) ) ) then
call SetUnitUserData(udg_danwei2[234], 0)
call SetUnitVertexColor(udg_danwei2[234], 0, 0, 0, 50)
set udg_dian2[1]=GetUnitLoc(udg_danwei2[234])
else
if ( ( ( GetSpellAbilityId() == 0x4130434C ) or ( GetSpellAbilityId() == 0x41304354 ) or ( GetSpellAbilityId() == 0x4130434B ) ) ) then
call SetUnitUserData(udg_danwei2[235], 0)
call SetUnitVertexColor(udg_danwei2[235], 0, 0, 0, 50)
set udg_dian2[1]=GetUnitLoc(udg_danwei2[235])
else
endif
endif
endif
endif
endif
set udg_aXUNHUAN[189]=1
loop
exitwhen udg_aXUNHUAN[189] > 5
if ( ( udg_danwei2[2] != null ) ) then
set udg_dian2[3]=GetUnitLoc(udg_danwei2[2])
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x6530344B, udg_dian2[1], ( DistanceBetweenPoints(udg_dian2[1], udg_dian2[3]) + ( 72.00 * I2R(udg_aXUNHUAN[189]) ) ))
call GroupAddUnit(udg_DAZE[0], udg_danwei2[1])
call s__baka_IssueTargetOrderById2(udg_danwei2[1] , 851986 , udg_danwei2[2])
call RemoveLocation(udg_dian2[3])
else
if ( ( GetLocationX(udg_dian2[2]) != 0.00 ) and ( GetLocationY(udg_dian2[2]) != 0.00 ) ) then
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x6530344B, udg_dian2[1], ( DistanceBetweenPoints(udg_dian2[1], udg_dian2[2]) + ( 72.00 * I2R(udg_aXUNHUAN[189]) ) ))
call IssuePointOrderByIdLoc(udg_danwei2[1], 851986, udg_dian2[2])
else
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[0]), 0x6530344B, udg_dian2[1], ( GetUnitFacing(udg_danwei2[0]) + ( 72.00 * I2R(udg_aXUNHUAN[189]) ) ))
call SetUnitFacing(udg_danwei2[1], GetUnitFacing(udg_danwei2[0]))
endif
call GroupAddUnit(udg_DAZE[0], udg_danwei2[1])
endif
if ( ( ( GetSpellAbilityId() == 0x41304346 ) or ( GetSpellAbilityId() == 0x41304353 ) or ( GetSpellAbilityId() == 0x41304345 ) ) ) then
call SetUnitVertexColor(udg_danwei2[1], 0, 75, 255, 255)
else
if ( ( ( GetSpellAbilityId() == 0x41304343 ) or ( GetSpellAbilityId() == 0x41304356 ) or ( GetSpellAbilityId() == 0x41304344 ) ) ) then
call SetUnitVertexColor(udg_danwei2[1], 255, 25, 0, 255)
else
if ( ( ( GetSpellAbilityId() == 0x41304347 ) or ( GetSpellAbilityId() == 0x41304352 ) or ( GetSpellAbilityId() == 0x41304348 ) ) ) then
call SetUnitVertexColor(udg_danwei2[1], 0, 255, 50, 255)
else
if ( ( ( GetSpellAbilityId() == 0x41304349 ) or ( GetSpellAbilityId() == 0x41304355 ) or ( GetSpellAbilityId() == 0x4130434A ) ) ) then
call SetUnitVertexColor(udg_danwei2[1], 255, 255, 0, 255)
else
if ( ( ( GetSpellAbilityId() == 0x4130434C ) or ( GetSpellAbilityId() == 0x41304354 ) or ( GetSpellAbilityId() == 0x4130434B ) ) ) then
call SetUnitVertexColor(udg_danwei2[1], 255, 100, 200, 255)
else
endif
endif
endif
endif
endif
call SetUnitLifeBJ(udg_danwei2[1], ( ( I2R(GetHeroInt(udg_danwei2[0], true)) * 0.40 ) + 10.00 ))
call SetUnitManaBJ(udg_danwei2[1], ( I2R(udg_aXUNHUAN[189]) * 72.00 ))
call SetUnitUserData(udg_danwei2[1], 40)
call GroupAddUnit(udg_danweizu2[235], udg_danwei2[1])
set udg_danwei2[1]=null
set udg_aXUNHUAN[189]=udg_aXUNHUAN[189] + 1
endloop
else
endif
set udg_danwei2[0]=null
set udg_danwei2[2]=null
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
call RemoveLocation(udg_dian2[2])
endfunction
function InitTrig_xianzhezhishi_3 takes nothing returns nothing
set gg_trg_xianzhezhishi_3=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_xianzhezhishi_3, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_xianzhezhishi_3, Condition(function Trig_xianzhezhishi_3Conditions))
call TriggerAddAction(gg_trg_xianzhezhishi_3, function Trig_xianzhezhishi_3Actions)
endfunction
function Trig_xianzhezhishi_4Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_danweizu2[235]) == false ) )
endfunction
function Trig_xianzhezhishi_4Func001Func003Func003Func004A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_FLYING) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei2[0])) == true ) ) then
set udg_dian2[2]=GetUnitLoc(udg_danwei2[1])
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[2]) <= 120.00 ) ) then
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl", udg_dian2[2]))
call UnitDamageTarget(udg_danwei2[0], udg_danwei2[1], GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_COLD, WEAPON_TYPE_WHOKNOWS)
call GroupRemoveUnit(udg_danweizu2[235], udg_danwei2[0])
call KillUnit(udg_danwei2[0])
else
call SetUnitFacing(udg_danwei2[0], AngleBetweenPoints(udg_dian2[0], udg_dian2[2]))
endif
call RemoveLocation(udg_dian2[2])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_xianzhezhishi_4Func001A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
if ( ( GetUnitUserData(udg_danwei2[0]) > 0 ) and ( IsTerrainPathableBJ(udg_dian2[0], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitUserData(udg_danwei2[0], ( GetUnitUserData(udg_danwei2[0]) - 1 ))
if ( ( GetUnitUserData(udg_danwei2[0]) > 25 ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 20.00, GetUnitState(udg_danwei2[0], UNIT_STATE_MANA))
else
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 60.00, GetUnitFacing(udg_danwei2[0]))
set udg_xuanqu=YDWEGetUnitsInRangeOfLocAllNull(600.00 , udg_dian2[0])
call ForGroupBJ(udg_xuanqu, function Trig_xianzhezhishi_4Func001Func003Func003Func004A)
call DestroyGroup(udg_xuanqu)
endif
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
call RemoveLocation(udg_dian2[1])
else
call KillUnit(udg_danwei2[0])
call GroupRemoveUnit(udg_danweizu2[235], udg_danwei2[0])
endif
call RemoveLocation(udg_dian2[0])
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_xianzhezhishi_4Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_danweizu2[235], function Trig_xianzhezhishi_4Func001A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_xianzhezhishi_4 takes nothing returns nothing
set gg_trg_xianzhezhishi_4=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_xianzhezhishi_4, udg_Times[4])
call TriggerAddCondition(gg_trg_xianzhezhishi_4, Condition(function Trig_xianzhezhishi_4Conditions))
call TriggerAddAction(gg_trg_xianzhezhishi_4, function Trig_xianzhezhishi_4Actions)
endfunction
function Trig_PLD1Actions takes nothing returns nothing
set udg_HeoZiFuChuan[0]=StringIdentity("TRIGSTR_3805")
set udg_HeoZiFuChuan[1]=StringIdentity("TRIGSTR_6216")
set udg_HeoZiFuChuan[2]=GetLocalizedString("TRIGSTR_6317")
set udg_HeoZiFuChuan[3]=GetLocalizedString("TRIGSTR_4898")
set udg_HeoZiFuChuan[4]=GetLocalizedString("TRIGSTR_7087")
set udg_HeoZiFuChuan[5]=GetLocalizedString("TRIGSTR_6193")
set udg_HeoZiFuChuan[6]=GetLocalizedString("TRIGSTR_6175")
set udg_HeoZiFuChuan[9]=GetLocalizedString("TRIGSTR_6168")
set udg_HeoZiFuChuan[10]=GetLocalizedString("TRIGSTR_6498")
set udg_HeoZiFuChuan[12]=GetLocalizedString("TRIGSTR_2646")
set udg_HeoZiFuChuan[13]=GetLocalizedString("TRIGSTR_6267")
set udg_HeoZiFuChuan[14]=GetLocalizedString("TRIGSTR_6232")
set udg_HeoZiFuChuan[15]=GetLocalizedString("TRIGSTR_6153")
set udg_HeoZiFuChuan[16]=GetLocalizedString("TRIGSTR_6764")
set udg_HeoZiFuChuan[17]=GetLocalizedString("TRIGSTR_2603")
set udg_HeoZiFuChuan[18]=GetLocalizedString("TRIGSTR_6471")
set udg_HeoZiFuChuan[19]=GetLocalizedString("TRIGSTR_6122")
set udg_HeoZiFuChuan[20]=GetLocalizedString("TRIGSTR_6611")
set udg_HeoZiFuChuan[21]=GetLocalizedString("TRIGSTR_6613")
set udg_HeoZiFuChuan[22]=GetLocalizedString("TRIGSTR_7232")
set udg_HeoZiFuChuan[23]=GetLocalizedString("TRIGSTR_6664")
set udg_HeoZiFuChuan[24]=GetLocalizedString("TRIGSTR_2990")
set udg_HeoZiFuChuan[25]=GetLocalizedString("TRIGSTR_4880")
set udg_HeoZiFuChuan[26]=GetLocalizedString("TRIGSTR_5712")
set udg_HeoZiFuChuan[27]=GetLocalizedString("TRIGSTR_4226")
set udg_HeoZiFuChuan[28]=GetLocalizedString("TRIGSTR_7098")
set udg_HeoZiFuChuan[29]=GetLocalizedString("TRIGSTR_2006")
set udg_HeoZiFuChuan[30]=GetLocalizedString("TRIGSTR_6082")
set udg_HeoZiFuChuan[31]=GetLocalizedString("TRIGSTR_188")
set udg_HeoZiFuChuan[32]=GetLocalizedString("TRIGSTR_2699")
set udg_HeoZiFuChuan[33]=GetLocalizedString("TRIGSTR_936")
set udg_HeoZiFuChuan[34]=GetLocalizedString("TRIGSTR_4748")
set udg_HeoZiFuChuan[35]=GetLocalizedString("TRIGSTR_6062")
set udg_HeoZiFuChuan[36]=GetLocalizedString("TRIGSTR_1466")
set udg_HeoZiFuChuan[37]=GetLocalizedString("TRIGSTR_7016")
set udg_HeoZiFuChuan[38]=GetLocalizedString("TRIGSTR_4699")
set udg_HeoZiFuChuan[39]=GetLocalizedString("TRIGSTR_7798")
endfunction
function InitTrig_PLD1 takes nothing returns nothing
set gg_trg_PLD1=CreateTrigger()
call TriggerRegisterTimerEventSingle(gg_trg_PLD1, 0.00)
call TriggerAddAction(gg_trg_PLD1, function Trig_PLD1Actions)
endfunction
function Trig_Handsonic_0Conditions takes nothing returns boolean
return ( ( GetLearnedSkill() == 0x41304D30 ) and ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true ) )
endfunction
function Trig_Handsonic_0Actions takes nothing returns nothing
if ( ( GetUnitAbilityLevel(GetTriggerUnit(), 0x41304D30) == 1 ) ) then
set udg_Danwei[128]=GetTriggerUnit()
call UnitAddAbility(GetTriggerUnit(), 0x41304943)
else
endif
set udg_aXUNHUAN[196]=0
loop
exitwhen udg_aXUNHUAN[196] > 4
set udg_Zhengshu[( 50 + udg_aXUNHUAN[196] )]=- 1
set udg_aXUNHUAN[196]=udg_aXUNHUAN[196] + 1
endloop
endfunction
function InitTrig_Handsonic_0 takes nothing returns nothing
set gg_trg_Handsonic_0=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Handsonic_0, EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(gg_trg_Handsonic_0, Condition(function Trig_Handsonic_0Conditions))
call TriggerAddAction(gg_trg_Handsonic_0, function Trig_Handsonic_0Actions)
endfunction
function Trig_HandsonicActions takes nothing returns nothing
set udg_danwei[430]=GetTriggerUnit()
set udg_Zhengshu[49]=0
set udg_dian[350]=GetUnitLoc(udg_danwei[430])
if ( ( GetTriggerExecCount(GetTriggeringTrigger()) == 1 ) and ( GetTriggerExecCount(gg_trg_Distortion) != 1 ) and ( GetTriggerExecCount(gg_trg_Overdrive_0) != 1 ) ) then
call TriggerRegisterUnitEvent(gg_trg_Distortion2, udg_danwei[430], EVENT_UNIT_DAMAGED)
else
endif
set udg_Danwei[( 50 + udg_Zhengshu[49] )]=GetTriggerUnit()
set udg_Danwei[( 55 + udg_Zhengshu[49] )]=GetSpellTargetUnit()
set udg_Zhengshu[( 50 + udg_Zhengshu[49] )]=16
set udg_Dian[( 50 + udg_Zhengshu[49] )]=GetUnitLoc(udg_Danwei[( 50 + udg_Zhengshu[49] )])
set udg_Dian[( 55 + udg_Zhengshu[49] )]=GetUnitLoc(udg_Danwei[( 55 + udg_Zhengshu[49] )])
call UnitAddAbility(udg_danwei[430], 0x41304A44)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=15
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_danwei[435]=CreateUnit(GetOwningPlayer(udg_Danwei[( 50 + udg_Zhengshu[49] )]), 0x6530364A, GetLocationX(udg_Dian[( 50 + udg_Zhengshu[49] )]), GetLocationY(udg_Dian[( 50 + udg_Zhengshu[49] )]), GetUnitFacing(udg_Danwei[( 50 + udg_Zhengshu[49] )]))
call SetUnitTimeScale(udg_danwei[435], ( 1.00 / 1.00 ))
call SetUnitVertexColor(udg_danwei[435], 255, 255, 255, 0)
call SetUnitAnimationByIndex(udg_danwei[435], 2)
call SetUnitManaBJ(udg_danwei[435], 255.00)
call GroupAddUnit(udg_Danweizu[40], udg_danwei[435])
call GroupAddUnit(udg_Danweizu[( 50 + udg_Zhengshu[49] )], udg_danwei[435])
set udg_danwei[435]=null
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call StartTimerBJ(udg_jishiqi[130], false, 0.00)
call StartTimerBJ(udg_jishiqi[131], true, 0.03)
call RemoveLocation(udg_dian[350])
set udg_danwei[430]=null
endfunction
function InitTrig_Handsonic takes nothing returns nothing
set gg_trg_Handsonic=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_Handsonic , 3 , 0x41304D30)
call TriggerAddAction(gg_trg_Handsonic, function Trig_HandsonicActions)
endfunction
function Trig_Handsonic_0_5Actions takes nothing returns nothing
set udg_Dian[89]=GetUnitLoc(udg_Danwei[128])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[128]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304C47)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_Danwei[128])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
call SetUnitAnimationByIndex(udg_Danwei[128], 2)
call SetUnitTimeScale(udg_Danwei[128], ( 1.00 / 1.00 ))
endfunction
function InitTrig_Handsonic_0_5 takes nothing returns nothing
set gg_trg_Handsonic_0_5=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_Handsonic_0_5, udg_jishiqi[130])
call TriggerAddAction(gg_trg_Handsonic_0_5, function Trig_Handsonic_0_5Actions)
endfunction
function Trig_Handsonic_1Actions takes nothing returns nothing
call UnitAddAbility(udg_Danwei[128], 0x41304943)
endfunction
function InitTrig_Handsonic_1 takes nothing returns nothing
set gg_trg_Handsonic_1=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_Handsonic_1, udg_Times[128])
call TriggerAddAction(gg_trg_Handsonic_1, function Trig_Handsonic_1Actions)
endfunction
function Trig_Handsonic_2Actions takes nothing returns nothing
set udg_danwei[431]=GetAttacker()
set udg_danwei[432]=GetAttackedUnitBJ()
if ( ( GetUnitTypeId(udg_danwei[431]) == 0x48303044 ) ) then
call SetUnitTimeScale(udg_danwei[431], 1.00)
else
endif
if ( ( ( GetUnitTypeId(udg_danwei[431]) == 0x48303036 ) or ( GetUnitTypeId(udg_danwei[431]) == 0x48303044 ) ) and ( GetUnitAbilityLevel(udg_danwei[431], 0x41304943) > 0 ) and ( IsUnitType(udg_danwei[432], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei[432], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitAlly(udg_danwei[432], GetOwningPlayer(udg_danwei[431])) == false ) ) then
if ( ( GetUnitTypeId(udg_danwei[431]) == 0x48303036 ) ) then
set udg_Zhengshu[49]=0
call UnitRemoveAbility(udg_danwei[431], 0x41304943)
call StartTimerBJ(udg_Times[128], false, ( 3.60 - ( 0.40 * I2R(GetUnitAbilityLevel(udg_Danwei[128], 0x41304D30)) ) ))
else
set udg_Zhengshu[49]=GetUnitUserData(udg_danwei[431])
endif
set udg_Danwei[( 50 + udg_Zhengshu[49] )]=udg_danwei[431]
set udg_Danwei[( 55 + udg_Zhengshu[49] )]=udg_danwei[432]
set udg_Dian[( 50 + udg_Zhengshu[49] )]=GetUnitLoc(udg_Danwei[( 50 + udg_Zhengshu[49] )])
set udg_Dian[( 55 + udg_Zhengshu[49] )]=GetUnitLoc(udg_Danwei[( 55 + udg_Zhengshu[49] )])
set udg_Zhengshu[( 50 + udg_Zhengshu[49] )]=8
if ( ( IsUnitGroupEmptyBJ(udg_Danweizu[40]) == true ) ) then
call StartTimerBJ(udg_jishiqi[131], true, 0.03)
else
endif
call SetUnitAnimationByIndex(udg_Danwei[( 50 + udg_Zhengshu[49] )], 2)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=7
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_danwei[435]=CreateUnit(GetOwningPlayer(udg_Danwei[( 50 + udg_Zhengshu[49] )]), 0x6530364A, GetLocationX(udg_Dian[( 50 + udg_Zhengshu[49] )]), GetLocationY(udg_Dian[( 50 + udg_Zhengshu[49] )]), GetUnitFacing(udg_Danwei[( 50 + udg_Zhengshu[49] )]))
call SetUnitTimeScale(udg_danwei[435], ( 1.00 / 0.35 ))
call SetUnitVertexColor(udg_danwei[435], 255, 255, 255, 0)
call SetUnitAnimationByIndex(udg_danwei[435], 2)
call SetUnitManaBJ(udg_danwei[435], 255.00)
call GroupAddUnit(udg_Danweizu[40], udg_danwei[435])
call GroupAddUnit(udg_Danweizu[( 50 + udg_Zhengshu[49] )], udg_danwei[435])
set udg_danwei[435]=null
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
else
endif
set udg_danwei[432]=null
set udg_danwei[431]=null
endfunction
function InitTrig_Handsonic_2 takes nothing returns nothing
set gg_trg_Handsonic_2=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Handsonic_2, EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddAction(gg_trg_Handsonic_2, function Trig_Handsonic_2Actions)
endfunction
function Trig_Handsonic_3Func002Func003A takes nothing returns nothing
set udg_danwei[435]=GetEnumUnit()
if ( ( GetUnitState(udg_danwei[435], UNIT_STATE_MANA) < 255.00 ) ) then
if ( ( GetUnitState(udg_danwei[435], UNIT_STATE_MANA) > 1.00 ) ) then
call SetUnitManaBJ(udg_danwei[435], ( GetUnitState(udg_danwei[435], UNIT_STATE_MANA) - 15.00 ))
call SetUnitVertexColor(udg_danwei[435], 255, 255, 255, R2I(GetUnitState(udg_danwei[435], UNIT_STATE_MANA)))
else
call GroupRemoveUnit(udg_Danweizu[40], udg_danwei[435])
call RemoveUnit(udg_danwei[435])
endif
else
endif
set udg_danwei[435]=null
endfunction
function Trig_Handsonic_3Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_aXUNHUAN[196]=0
loop
exitwhen udg_aXUNHUAN[196] > 4
set udg_Zhengshu[( 50 + udg_aXUNHUAN[196] )]=( udg_Zhengshu[( 50 + udg_aXUNHUAN[196] )] - 1 )
if ( ( udg_Zhengshu[( 50 + udg_aXUNHUAN[196] )] > 0 ) ) then
set udg_dian[354]=GetUnitLoc(udg_Danwei[( 50 + udg_aXUNHUAN[196] )])
if ( ( udg_aXUNHUAN[196] == 0 ) and ( GetUnitAbilityLevel(udg_Danwei[128], 0x41304A44) == 1 ) ) then
set udg_dian[352]=PolarProjectionBJ(udg_dian[354], ( ( DistanceBetweenPoints(udg_Dian[( 50 + udg_aXUNHUAN[196] )], udg_Dian[( 55 + udg_aXUNHUAN[196] )]) + 128.00 ) / 15.00 ), AngleBetweenPoints(udg_Dian[( 50 + udg_aXUNHUAN[196] )], udg_Dian[( 55 + udg_aXUNHUAN[196] )]))
else
set udg_dian[352]=PolarProjectionBJ(udg_dian[354], ( ( DistanceBetweenPoints(udg_Dian[( 50 + udg_aXUNHUAN[196] )], udg_Dian[( 55 + udg_aXUNHUAN[196] )]) + 128.00 ) / 7.00 ), AngleBetweenPoints(udg_Dian[( 50 + udg_aXUNHUAN[196] )], udg_Dian[( 55 + udg_aXUNHUAN[196] )]))
endif
set udg_danwei[435]=FirstOfGroup(udg_Danweizu[( 50 + udg_aXUNHUAN[196] )])
call SetUnitManaBJ(udg_danwei[435], 150.00)
call SetUnitVertexColor(udg_danwei[435], 255, 255, 255, 150)
call SetUnitTimeScale(udg_danwei[435], 0.00)
call GroupRemoveUnit(udg_Danweizu[( 50 + udg_aXUNHUAN[196] )], udg_danwei[435])
call SetUnitX(udg_Danwei[( 50 + udg_aXUNHUAN[196] )], GetLocationX(udg_dian[352]))
call SetUnitY(udg_Danwei[( 50 + udg_aXUNHUAN[196] )], GetLocationY(udg_dian[352]))
call SetUnitX(udg_danwei[435], GetLocationX(udg_dian[352]))
call SetUnitY(udg_danwei[435], GetLocationY(udg_dian[352]))
set udg_danwei[435]=null
if ( ( udg_Zhengshu[( 50 + udg_aXUNHUAN[196] )] == 3 ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\MakuraMissile\\MakuraMissile.mdl", udg_Danwei[( 55 + udg_aXUNHUAN[196] )], "chest"))
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Critters\\Albatross\\CritterBloodAlbatross.mdl", udg_Danwei[( 55 + udg_aXUNHUAN[196] )], "chest"))
if ( ( udg_aXUNHUAN[196] == 0 ) ) then
if ( ( GetUnitAbilityLevel(udg_Danwei[128], 0x41304A44) == 1 ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\GlaiveMissile\\GlaiveMissileTarget.mdl", udg_Danwei[( 55 + udg_aXUNHUAN[196] )], "chest"))
call UnitDamageTarget(udg_Danwei[( 50 + udg_aXUNHUAN[196] )], udg_Danwei[( 55 + udg_aXUNHUAN[196] )], ( ( 35.00 + ( 15.00 * I2R(GetUnitAbilityLevel(udg_Danwei[50], 0x41304D30)) ) ) + ( 0.50 * I2R(GetHeroStr(udg_Danwei[50], true)) ) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_HEAVY_SLICE)
else
call UnitDamageTarget(udg_Danwei[( 50 + udg_aXUNHUAN[196] )], udg_Danwei[( 55 + udg_aXUNHUAN[196] )], ( ( 10.00 + ( 10.00 * I2R(GetUnitAbilityLevel(udg_Danwei[50], 0x41304D30)) ) ) + ( 0.30 * I2R(GetHeroStr(udg_Danwei[50], true)) ) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_HEAVY_SLICE)
endif
call s__baka_IssueTargetOrderById2(udg_Danwei[50] , 851983 , udg_Danwei[55])
if ( ( udg_Zhengshu[65] > 0 ) ) then
set udg_Zhengshu[65]=( udg_Zhengshu[65] + ( 3 + GetUnitAbilityLevel(udg_Danwei[128], 0x41304946) ) )
else
endif
else
call UnitDamageTarget(udg_Danwei[( 50 + udg_aXUNHUAN[196] )], udg_Danwei[( 55 + udg_aXUNHUAN[196] )], ( ( 10.00 + ( 10.00 * I2R(GetUnitAbilityLevel(udg_Danwei[50], 0x41304936)) ) ) + ( 0.50 * I2R(GetHeroStr(udg_Danwei[50], true)) ) ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_HEAVY_SLICE)
endif
else
endif
call RemoveLocation(udg_dian[354])
call RemoveLocation(udg_dian[352])
else
if ( ( udg_Zhengshu[( 50 + udg_aXUNHUAN[196] )] == - 1 ) ) then
if ( ( udg_aXUNHUAN[196] == 0 ) ) then
call UnitRemoveBuffBJ(0x42505345, udg_Danwei[128])
call UnitRemoveAbility(udg_Danwei[128], 0x41304A44)
call SetUnitTimeScale(udg_Danwei[128], 1.00)
else
endif
set udg_Zhengshu[( 50 + udg_aXUNHUAN[196] )]=- 1
set udg_Danwei[( 50 + udg_aXUNHUAN[196] )]=null
set udg_Danwei[( 55 + udg_aXUNHUAN[196] )]=null
call RemoveLocation(udg_Dian[( 50 + udg_aXUNHUAN[196] )])
call RemoveLocation(udg_Dian[( 55 + udg_aXUNHUAN[196] )])
else
endif
endif
set udg_aXUNHUAN[196]=udg_aXUNHUAN[196] + 1
endloop
if ( ( IsUnitGroupEmptyBJ(udg_Danweizu[40]) == false ) ) then
call ForGroupBJ(udg_Danweizu[40], function Trig_Handsonic_3Func002Func003A)
else
call PauseTimer(udg_jishiqi[131])
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_Handsonic_3 takes nothing returns nothing
set gg_trg_Handsonic_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_Handsonic_3, udg_jishiqi[131])
call TriggerAddAction(gg_trg_Handsonic_3, function Trig_Handsonic_3Actions)
endfunction
function Trig_fenshen_1Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_Danweizu[49]) == false ) )
endfunction
function Trig_fenshen_1Func001Func003Func004Func003Func007A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[1]=GetUnitLoc(udg_danwei2[0])
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) <= 500.00 ) and ( IsUnitEnemy(udg_danwei2[0], GetOwningPlayer(udg_Danwei[49])) == true ) ) then
call UnitAddAbility(udg_Danwei[49], 0x4162756E)
else
endif
call RemoveLocation(udg_dian2[1])
set udg_danwei2[0]=null
endfunction
function Trig_fenshen_1Func001A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_Danwei[49]=GetEnumUnit()
set udg_Zhengshu[( 55 + GetUnitUserData(udg_Danwei[49]) )]=( udg_Zhengshu[( 55 + GetUnitUserData(udg_Danwei[49]) )] + 1 )
if ( ( IsUnitType(udg_Danwei[65], UNIT_TYPE_DEAD) == false ) ) then
if ( ( udg_Zhengshu[( 55 + GetUnitUserData(udg_Danwei[49]) )] <= 11 ) ) then
set udg_dian2[0]=GetUnitLoc(udg_Danwei[49])
if ( ( udg_Zhengshu[( 55 + GetUnitUserData(udg_Danwei[49]) )] <= 10 ) ) then
call SetUnitVertexColor(udg_Danwei[49], 255, 255, 255, ( 25 * udg_Zhengshu[( 55 + GetUnitUserData(udg_Danwei[49]) )] ))
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[0], 20.00, udg_Shishu[( 55 + GetUnitUserData(udg_Danwei[49]) )])
if ( ( IsTerrainPathableBJ(udg_dian2[2], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_Danwei[49], GetLocationX(udg_dian2[2]))
call SetUnitY(udg_Danwei[49], GetLocationY(udg_dian2[2]))
else
endif
call RemoveLocation(udg_dian2[2])
else
call UnitRemoveAbility(udg_Danwei[49], 0x4162756E)
call ForGroupBJ(udg_danweizu2[51], function Trig_fenshen_1Func001Func003Func004Func003Func007A)
endif
call RemoveLocation(udg_dian2[0])
if ( ( udg_Zhengshu[( 55 + GetUnitUserData(udg_Danwei[49]) )] == 11 ) ) then
call s__Unit_PauseUnitMU(udg_Danwei[49] , false , "谐波叠加")
call UnitAddAbility(udg_Danwei[49], 0x41304943)
if ( ( CountUnitsInGroup(udg_Danweizu[49]) == 1 ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_Danwei[65]), 0x41304938, false)
call UnitAddAbility(udg_Danwei[65], 0x41304D48)
else
endif
if ( ( CountUnitsInGroup(udg_Danweizu[49]) == 4 ) ) then
call UnitRemoveAbility(udg_Danwei[65], 0x41304D48)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_Danwei[65]), 0x41304938, true)
else
endif
if ( ( GetUnitAbilityLevel(udg_Danwei[65], 0x41304944) > 0 ) ) then
call UnitAddAbility(udg_Danwei[49], 0x41304944)
else
endif
if ( ( udg_Zhengshu[61] == 2 ) ) then
call s__baka_IssueTargetOrderById2(udg_Danwei[49] , 851990 , udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[49])) + 1 )])
else
if ( ( udg_Zhengshu[61] == 3 ) ) then
call IssuePointOrderByIdLoc(udg_Danwei[49], 851983, udg_Dian[61])
else
if ( ( udg_Zhengshu[61] == 4 ) ) then
call s__baka_IssueTargetOrderById2(udg_Danwei[49] , 851983 , udg_Danwei[61])
else
endif
endif
endif
else
endif
else
endif
else
set udg_dian2[0]=GetUnitLoc(udg_Danwei[49])
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\A15_lei.mdx", udg_dian2[0]))
call RemoveLocation(udg_dian2[0])
call RemoveUnit(udg_Danwei[49])
call GroupRemoveUnit(udg_Danweizu[49], udg_Danwei[49])
endif
set udg_Danwei[49]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_fenshen_1Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_Danweizu[49], function Trig_fenshen_1Func001A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_fenshen_1 takes nothing returns nothing
set gg_trg_fenshen_1=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_fenshen_1, udg_Times[3])
call TriggerAddCondition(gg_trg_fenshen_1, Condition(function Trig_fenshen_1Conditions))
call TriggerAddAction(gg_trg_fenshen_1, function Trig_fenshen_1Actions)
endfunction
function Trig_fenshen_2Conditions takes nothing returns boolean
return ( ( ( GetIssuedOrderIdBJ() == String2OrderIdBJ("stop") ) or ( GetIssuedOrderIdBJ() == String2OrderIdBJ("holdposition") ) ) )
endfunction
function Trig_fenshen_2Actions takes nothing returns nothing
set udg_Zhengshu[61]=2
endfunction
function InitTrig_fenshen_2 takes nothing returns nothing
set gg_trg_fenshen_2=CreateTrigger()
call TriggerAddCondition(gg_trg_fenshen_2, Condition(function Trig_fenshen_2Conditions))
call TriggerAddAction(gg_trg_fenshen_2, function Trig_fenshen_2Actions)
endfunction
function Trig_fenshen_3Actions takes nothing returns nothing
call RemoveLocation(udg_Dian[61])
set udg_Dian[61]=GetOrderPointLoc()
set udg_Zhengshu[61]=3
endfunction
function InitTrig_fenshen_3 takes nothing returns nothing
set gg_trg_fenshen_3=CreateTrigger()
call TriggerAddAction(gg_trg_fenshen_3, function Trig_fenshen_3Actions)
endfunction
function Trig_fenshen_4Actions takes nothing returns nothing
if ( ( IsUnitEnemy(udg_Danwei[61], GetOwningPlayer(udg_Danwei[49])) == true ) ) then
set udg_Danwei[61]=GetOrderTargetUnit()
set udg_Zhengshu[61]=4
else
call RemoveLocation(udg_Dian[61])
set udg_Dian[61]=GetOrderPointLoc()
set udg_Zhengshu[61]=3
endif
endfunction
function InitTrig_fenshen_4 takes nothing returns nothing
set gg_trg_fenshen_4=CreateTrigger()
call TriggerAddAction(gg_trg_fenshen_4, function Trig_fenshen_4Actions)
endfunction
function Trig_Howling1_EXActions takes nothing returns nothing
set udg_danwei[430]=GetTriggerUnit()
set udg_dian[350]=GetUnitLoc(udg_danwei[430])
set udg_Danwei[49]=CreateUnit(GetOwningPlayer(udg_danwei[430]), 0x48303044, GetLocationX(udg_dian[350]), GetLocationY(udg_dian[350]), GetUnitFacing(udg_danwei[430]))
call SetHeroLevelBJ(udg_Danwei[49], 30, false)
call SetHeroStr(udg_Danwei[49], GetHeroStr(udg_danwei[430], true), true)
call UnitAddAbility(udg_Danwei[49], 0x416C6F63)
call UnitAddAbility(udg_Danwei[49], 0x41304857)
call SetUnitX(udg_Danwei[49], GetLocationX(udg_dian[350]))
call SetUnitY(udg_Danwei[49], GetLocationY(udg_dian[350]))
call SetUnitAbilityLevel(udg_Danwei[49], 0x41304857, GetUnitAbilityLevel(udg_danwei[430], 0x41304945))
call IssueImmediateOrderById(udg_Danwei[49], 852096)
set udg_Danwei[49]=null
set udg_danwei[430]=null
call RemoveLocation(udg_dian[350])
set udg_Zhengshu[66]=8
set udg_Shishu[66]=GetUnitFacing(udg_Danwei[65])
endfunction
function InitTrig_Howling1_EX takes nothing returns nothing
set gg_trg_Howling1_EX=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_Howling1_EX , 3 , 0x41304945)
call TriggerAddAction(gg_trg_Howling1_EX, function Trig_Howling1_EXActions)
endfunction
function Trig_Howling1Actions takes nothing returns nothing
set udg_Danwei[152]=GetTriggerUnit()
set udg_dian[355]=GetUnitLoc(udg_Danwei[152])
call SetSoundPosition(gg_snd_GPPX1, GetLocationX(udg_dian[355]), GetLocationY(udg_dian[355]), 500.00)
call PlaySoundBJ(gg_snd_GPPX1)
call SetSoundPosition(gg_snd_GPPXB2, GetLocationX(udg_dian[355]), GetLocationY(udg_dian[355]), 500.00)
call PlaySoundBJ(gg_snd_GPPXB2)
call SetUnitAnimation(udg_Danwei[152], "spell")
set udg_shishu2ex[8]=0.00
call EnableTrigger(gg_trg_Howling4)
call StartTimerBJ(udg_jishiqi[132], true, 0.04)
call GroupClear(udg_Danweizu[65])
call RemoveLocation(udg_dian[355])
endfunction
function InitTrig_Howling1 takes nothing returns nothing
set gg_trg_Howling1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_Howling1 , 3 , 0x41304857)
call TriggerAddAction(gg_trg_Howling1, function Trig_Howling1Actions)
endfunction
function Trig_Howling2Func001Func001A takes nothing returns nothing
call UnitRemoveAbility(GetEnumUnit(), 0x41304942)
call UnitRemoveAbility(GetEnumUnit(), 0x41304941)
call UnitRemoveBuffBJ(0x42303042, GetEnumUnit())
endfunction
function Trig_Howling2Func001Func003A takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Trig_Howling2Func001Func022A takes nothing returns nothing
set udg_danwei[437]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei[437], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei[437], UNIT_TYPE_DEAD) == false ) and ( IsUnitInGroup(udg_danwei[437], udg_danweizu2[369]) == false ) and ( IsUnitEnemy(udg_danwei[437], GetOwningPlayer(udg_Danwei[152])) == true ) ) then
set udg_dian[357]=GetUnitLoc(udg_danwei[437])
if ( ( IsUnitInGroup(udg_danwei[437], udg_Danweizu[65]) == true ) ) then
set udg_dian[358]=PolarProjectionBJ(udg_dian[357], RMinBJ(( 0.60 * udg_shishu2ex[8] ), 12.00), AngleBetweenPoints(udg_dian[355], udg_dian[357]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBoltImpact.mdl", udg_dian[357]))
else
set udg_dian[358]=PolarProjectionBJ(udg_dian[357], RMinBJ(( 0.15 * udg_shishu2ex[8] ), 3.00), AngleBetweenPoints(udg_dian[355], udg_dian[357]))
endif
if ( ( IsTerrainPathableBJ(udg_dian[358], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei[437], GetLocationX(udg_dian[358]))
call SetUnitY(udg_danwei[437], GetLocationY(udg_dian[358]))
else
endif
call UnitDamageTarget(udg_Danwei[152], udg_danwei[437], ( ( 3.00 * I2R(GetUnitAbilityLevel(udg_Danwei[152], 0x41304857)) ) + ( 0.02 * I2R(GetHeroStr(udg_Danwei[152], true)) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
if ( ( IsUnitInGroup(udg_danwei[437], udg_Danweizu[47]) == false ) ) then
call UnitAddAbility(udg_danwei[437], 0x41304942)
call UnitAddAbility(udg_danwei[437], 0x41304941)
call GroupAddUnit(udg_Danweizu[47], udg_danwei[437])
else
endif
call RemoveLocation(udg_dian[357])
call RemoveLocation(udg_dian[358])
else
endif
set udg_danwei[437]=null
endfunction
function Trig_Howling2Func001Func024A takes nothing returns nothing
set udg_dian[357]=GetUnitLoc(GetEnumUnit())
if ( ( DistanceBetweenPoints(udg_dian[355], udg_dian[357]) >= 500.00 ) ) then
call GroupRemoveUnit(udg_Danweizu[47], GetEnumUnit())
call UnitRemoveAbility(GetEnumUnit(), 0x41304942)
call UnitRemoveAbility(GetEnumUnit(), 0x41304941)
call UnitRemoveBuffBJ(0x42303042, GetEnumUnit())
else
endif
call RemoveLocation(udg_dian[357])
endfunction
function Trig_Howling2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( IsUnitType(udg_Danwei[152], UNIT_TYPE_DEAD) == false ) and ( udg_shishu2ex[8] <= 100.00 ) ) then
set udg_dian[355]=GetUnitLoc(udg_Danwei[152])
set udg_shishu2ex[8]=( udg_shishu2ex[8] + 1.00 )
if ( ( udg_shishu2ex[8] == 10 ) ) then
set udg_Danwei[47]=CreateUnit(GetOwningPlayer(udg_Danwei[152]), 0x65303648, GetLocationX(udg_dian[355]), GetLocationY(udg_dian[355]), 0)
call SetUnitTimeScale(udg_Danwei[47], 0.20)
else
endif
call SetUnitX(udg_Danwei[47], GetLocationX(udg_dian[355]))
call SetUnitY(udg_Danwei[47], GetLocationY(udg_dian[355]))
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\A6_zisepili.mdx", udg_dian[355]))
if ( ( ( udg_shishu2ex[8] / 10.00 ) == I2R(( R2I(udg_shishu2ex[8]) / 10 )) ) ) then
set udg_danwei[438]=CreateUnit(GetOwningPlayer(udg_Danwei[152]), 0x6530364D, GetLocationX(udg_dian[355]), GetLocationY(udg_dian[355]), 0)
call SetUnitTimeScale(udg_danwei[438], 1.50)
call UnitApplyTimedLife(udg_danwei[438], 0x42487765, 1.00)
call GroupAddUnit(udg_Danweizu[48], udg_danwei[438])
set udg_danwei[438]=null
else
endif
set udg_danweizu[130]=YDWEGetUnitsInRangeOfLocAllNull(500.00 , udg_dian[355])
call ForGroupBJ(udg_danweizu[130], function Trig_Howling2Func001Func022A)
call DestroyGroup(udg_danweizu[130])
call ForGroupBJ(udg_Danweizu[47], function Trig_Howling2Func001Func024A)
call RemoveLocation(udg_dian[355])
else
call ForGroupBJ(udg_Danweizu[47], function Trig_Howling2Func001Func001A)
call GroupClear(udg_Danweizu[47])
call ForGroupBJ(udg_Danweizu[48], function Trig_Howling2Func001Func003A)
call RemoveUnit(udg_Danwei[47])
call PauseTimer(udg_jishiqi[132])
call DisableTrigger(gg_trg_Howling4)
call StopSoundBJ(gg_snd_GPPX1, false)
call StopSoundBJ(gg_snd_GPPXB2, false)
if ( ( GetUnitTypeId(udg_Danwei[152]) == 0x48303044 ) ) then
call RemoveUnit(udg_Danwei[152])
else
endif
set udg_Danwei[152]=null
set udg_Danwei[47]=null
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_Howling2 takes nothing returns nothing
set gg_trg_Howling2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_Howling2, udg_jishiqi[132])
call TriggerAddAction(gg_trg_Howling2, function Trig_Howling2Actions)
endfunction
function Trig_Howling3Func001A takes nothing returns nothing
call UnitRemoveAbility(GetEnumUnit(), 0x41304942)
call UnitRemoveAbility(GetEnumUnit(), 0x41304941)
call UnitRemoveBuffBJ(0x42303042, GetEnumUnit())
endfunction
function Trig_Howling3Func003A takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Trig_Howling3Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(udg_Danweizu[47], function Trig_Howling3Func001A)
call GroupClear(udg_Danweizu[47])
call ForGroupBJ(udg_Danweizu[48], function Trig_Howling3Func003A)
call RemoveUnit(udg_Danwei[47])
call PauseTimer(udg_jishiqi[132])
call DisableTrigger(gg_trg_Howling4)
call StopSoundBJ(gg_snd_GPPX1, false)
call StopSoundBJ(gg_snd_GPPXB2, false)
if ( ( GetUnitTypeId(udg_Danwei[152]) == 0x48303044 ) ) then
call RemoveUnit(udg_Danwei[152])
else
endif
set udg_Danwei[47]=null
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_Howling3 takes nothing returns nothing
set gg_trg_Howling3=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_Howling3 , 4 , 0x41304857)
call s__Event_AnyUnitSkill(gg_trg_Howling3 , 5 , 0x41304857)
call TriggerAddAction(gg_trg_Howling3, function Trig_Howling3Actions)
endfunction
function Trig_Howling4Actions takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())
set udg_danwei[439]=GetTriggerUnit()
set udg_dian[358]=GetUnitLoc(udg_danwei[439])
if ( ( IsUnitType(udg_danwei[439], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitEnemy(udg_danwei[439], GetOwningPlayer(udg_Danwei[152])) == true ) and ( UnitHasBuffBJ(udg_danwei[439], 0x42303042) == true ) and ( IsUnitInGroup(udg_danwei[439], udg_Danweizu[65]) == false ) ) then
set udg_danwei[440]=CreateUnit(GetOwningPlayer(udg_Danwei[152]), 0x65303130, GetLocationX(udg_dian[358]), GetLocationY(udg_dian[358]), 0)
call UnitApplyTimedLife(udg_danwei[440], 0x42487765, 0.50)
call UnitAddAbility(udg_danwei[440], 0x41303033)
call s__baka_IssueTargetOrder2(udg_danwei[440] , "thunderbolt" , udg_danwei[439])
call UnitDamageTarget(udg_Danwei[152], udg_danwei[439], ( ( 100.00 * I2R(GetUnitAbilityLevel(udg_Danwei[152], 0x41304857)) ) + ( 1.00 * I2R(GetHeroStr(udg_Danwei[152], true)) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call GroupAddUnit(udg_Danweizu[65], udg_danwei[439])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBoltImpact.mdl", udg_dian[358]))
set udg_danwei[440]=null
else
endif
set udg_danwei[439]=null
call RemoveLocation(udg_dian[358])
call EnableTrigger(GetTriggeringTrigger())
endfunction
function InitTrig_Howling4 takes nothing returns nothing
set gg_trg_Howling4=CreateTrigger()
call DisableTrigger(gg_trg_Howling4)
call TriggerRegisterAnyUnitEventBJ(gg_trg_Howling4, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(gg_trg_Howling4, function Trig_Howling4Actions)
endfunction
function Trig_DistortionActions takes nothing returns nothing
set udg_danwei[442]=GetTriggerUnit()
set udg_dian[360]=GetUnitLoc(udg_danwei[442])
call SetSoundPosition(gg_snd_NQLC3, GetLocationX(udg_dian[360]), GetLocationY(udg_dian[360]), 500.00)
call PlaySoundBJ(gg_snd_NQLC3)
call RemoveLocation(udg_dian[360])
call AddSpecialEffectTargetUnitBJ("origin", udg_danwei[442], "war3mapImported\\distorsionnewsfxbydeckai.mdx")
set udg_texiao[40]=bj_lastCreatedEffect
set udg_shishu2ex[5]=9999999.00
set udg_shishu2ex[7]=0.00
if ( ( GetTriggerExecCount(GetTriggeringTrigger()) == 1 ) and ( GetTriggerExecCount(gg_trg_Handsonic) != 1 ) and ( GetTriggerExecCount(gg_trg_Overdrive_0) != 1 ) ) then
call TriggerRegisterUnitEvent(gg_trg_Distortion2, udg_danwei[442], EVENT_UNIT_DAMAGED)
else
endif
call StartTimerBJ(udg_Times[65], true, 0.10)
set udg_Zhengshu[65]=( 35 + ( 5 * GetUnitAbilityLevel(udg_danwei[442], 0x41304946) ) )
endfunction
function InitTrig_Distortion takes nothing returns nothing
set gg_trg_Distortion=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_Distortion , 3 , 0x41304946)
call TriggerAddAction(gg_trg_Distortion, function Trig_DistortionActions)
endfunction
function Trig_Distortion2Actions takes nothing returns nothing
set udg_dian[352]=GetUnitLoc(GetTriggerUnit())
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1 ) <= 10 ) ) then
set udg_dian[354]=GetUnitLoc(udg_player[( s__baka_SGetPlayerId(GetOwningPlayer(GetEventDamageSource())) + 1 )])
else
set udg_dian[354]=GetUnitLoc(GetEventDamageSource())
endif
if ( ( udg_Zhengshu[50] > 0 ) ) then
call UnitRemoveBuffBJ(0x42505345, udg_danwei[442])
if ( ( udg_shishu2ex[12] == 0.00 ) ) then
set udg_shishu2ex[12]=GetUnitState(udg_danwei[442], UNIT_STATE_LIFE)
call SetUnitLifePercentBJ(udg_danwei[442], 100)
call StartTimerBJ(udg_Times[67], false, 0.00)
else
endif
else
if ( ( DistanceBetweenPoints(udg_dian[352], udg_dian[354]) >= 350.00 ) ) then
if ( ( udg_Zhengshu[65] > 0 ) ) then
set udg_shishu2ex[6]=GetEventDamage()
if ( ( udg_shishu2ex[6] > udg_shishu2ex[5] ) ) then
set udg_shishu2ex[7]=( udg_shishu2ex[6] - udg_shishu2ex[5] )
else
set udg_shishu2ex[7]=0.00
endif
if ( ( udg_shishu2ex[12] == 0.00 ) ) then
set udg_shishu2ex[12]=GetUnitState(udg_danwei[442], UNIT_STATE_LIFE)
call SetUnitLifePercentBJ(udg_danwei[442], 100)
call StartTimerBJ(udg_jishiqi[133], false, 0.00)
set udg_dian[350]=PolarProjectionBJ(udg_dian[352], 75.00, AngleBetweenPoints(udg_dian[352], udg_dian[354]))
set udg_danwei[435]=CreateUnit(GetOwningPlayer(udg_danwei[442]), 0x65303646, GetLocationX(udg_dian[350]), GetLocationY(udg_dian[350]), AngleBetweenPoints(udg_dian[352], udg_dian[354]))
call SetUnitTimeScale(udg_danwei[435], 2.00)
call SetUnitManaBJ(udg_danwei[435], 200.00)
call GroupAddUnit(udg_Danweizu[41], udg_danwei[435])
set udg_danwei[435]=null
call RemoveLocation(udg_dian[350])
else
endif
set udg_shishu2ex[5]=( udg_shishu2ex[5] - udg_shishu2ex[6] )
else
endif
else
endif
endif
call RemoveLocation(udg_dian[352])
call RemoveLocation(udg_dian[354])
endfunction
function InitTrig_Distortion2 takes nothing returns nothing
set gg_trg_Distortion2=CreateTrigger()
call TriggerAddAction(gg_trg_Distortion2, function Trig_Distortion2Actions)
endfunction
function Trig_Distortion3Conditions takes nothing returns boolean
return ( ( IsUnitGroupEmptyBJ(udg_Danweizu[41]) == false ) )
endfunction
function Trig_Distortion3Func001Func002A takes nothing returns nothing
set udg_danwei[435]=GetEnumUnit()
if ( ( GetUnitState(udg_danwei[435], UNIT_STATE_MANA) > 1.00 ) ) then
call SetUnitManaBJ(udg_danwei[435], ( GetUnitState(udg_danwei[435], UNIT_STATE_MANA) - 10.00 ))
set udg_dian[350]=PolarProjectionBJ(udg_dian[352], 75.00, GetUnitFacing(udg_danwei[435]))
call SetUnitX(udg_danwei[435], GetLocationX(udg_dian[350]))
call SetUnitY(udg_danwei[435], GetLocationY(udg_dian[350]))
call RemoveLocation(udg_dian[350])
else
call GroupRemoveUnit(udg_Danweizu[41], udg_danwei[435])
call RemoveUnit(udg_danwei[435])
endif
set udg_danwei[435]=null
endfunction
function Trig_Distortion3Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_shishu2ex[5] > 0.00 ) ) then
set udg_dian[352]=GetUnitLoc(udg_danwei[442])
call ForGroupBJ(udg_Danweizu[41], function Trig_Distortion3Func001Func002A)
call RemoveLocation(udg_dian[352])
else
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_Distortion3 takes nothing returns nothing
set gg_trg_Distortion3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_Distortion3, udg_Times[3])
call TriggerAddCondition(gg_trg_Distortion3, Condition(function Trig_Distortion3Conditions))
call TriggerAddAction(gg_trg_Distortion3, function Trig_Distortion3Actions)
endfunction
function Trig_Distortion4Actions takes nothing returns nothing
call SetUnitLifeBJ(udg_danwei[442], udg_shishu2ex[12])
set udg_shishu2ex[12]=0.00
endfunction
function InitTrig_Distortion4 takes nothing returns nothing
set gg_trg_Distortion4=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_Distortion4, udg_Times[67])
call TriggerAddAction(gg_trg_Distortion4, function Trig_Distortion4Actions)
endfunction
function Trig_Distortion4_5Actions takes nothing returns nothing
call SetUnitLifeBJ(udg_danwei[442], ( udg_shishu2ex[12] - udg_shishu2ex[7] ))
set udg_shishu2ex[12]=0.00
if ( ( udg_shishu2ex[5] <= 0.00 ) ) then
call DestroyEffect(udg_texiao[40])
set udg_danwei[442]=null
else
endif
endfunction
function InitTrig_Distortion4_5 takes nothing returns nothing
set gg_trg_Distortion4_5=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_Distortion4_5, udg_jishiqi[133])
call TriggerAddAction(gg_trg_Distortion4_5, function Trig_Distortion4_5Actions)
endfunction
function Trig_Distortion5Actions takes nothing returns nothing
set udg_Zhengshu[65]=( udg_Zhengshu[65] - 1 )
if ( ( udg_Zhengshu[65] >= 0 ) ) then
else
call PauseTimer(udg_Times[65])
call DestroyEffect(udg_texiao[40])
set udg_danwei[442]=null
endif
endfunction
function InitTrig_Distortion5 takes nothing returns nothing
set gg_trg_Distortion5=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_Distortion5, udg_Times[65])
call TriggerAddAction(gg_trg_Distortion5, function Trig_Distortion5Actions)
endfunction
function Trig_Overdrive_0Func008A takes nothing returns nothing
set udg_Danwei[49]=GetEnumUnit()
call UnitAddAbility(udg_Danwei[49], 0x41304944)
set udg_Danwei[49]=null
endfunction
function Trig_Overdrive_0Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_Danwei[64]=GetTriggerUnit()
call StartTimerBJ(udg_Times[63], true, ( 0.35 - ( 0.05 * I2R(GetUnitAbilityLevel(udg_Danwei[64], 0x41303841)) ) ))
set udg_Zhengshu[63]=( 25 + ( 5 * GetUnitAbilityLevel(udg_Danwei[64], 0x41303841) ) )
set udg_Zhengshu[64]=0
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_Danwei[64]), 0x41303841, false)
call UnitAddAbility(udg_Danwei[64], 0x41304A4A)
call UnitAddAbility(udg_Danwei[64], 0x41304944)
call ForGroupBJ(udg_Danweizu[49], function Trig_Overdrive_0Func008A)
if ( ( GetTriggerExecCount(GetTriggeringTrigger()) == 1 ) and ( GetTriggerExecCount(gg_trg_Distortion) != 1 ) and ( GetTriggerExecCount(gg_trg_Handsonic) != 1 ) ) then
call TriggerRegisterUnitEvent(gg_trg_Distortion2, udg_Danwei[64], EVENT_UNIT_DAMAGED)
else
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_Overdrive_0 takes nothing returns nothing
set gg_trg_Overdrive_0=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_Overdrive_0 , 3 , 0x41303841)
call TriggerAddAction(gg_trg_Overdrive_0, function Trig_Overdrive_0Actions)
endfunction
function Trig_Overdrive_1Func002Func004A takes nothing returns nothing
set udg_Danwei[49]=GetEnumUnit()
call SetHeroStr(udg_Danwei[49], ( GetHeroStr(udg_Danwei[49], false) + 1 ), true)
set udg_Danwei[49]=null
endfunction
function Trig_Overdrive_1Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_Zhengshu[63]=( udg_Zhengshu[63] - 1 )
if ( ( udg_Zhengshu[63] >= 0 ) and ( IsUnitType(udg_Danwei[64], UNIT_TYPE_DEAD) == false ) ) then
call SetHeroStr(udg_Danwei[64], ( GetHeroStr(udg_Danwei[64], false) + 1 ), true)
call ForGroupBJ(udg_Danweizu[49], function Trig_Overdrive_1Func002Func004A)
set udg_Zhengshu[64]=( udg_Zhengshu[64] + 1 )
if ( ( udg_Zhengshu[63] == 0 ) ) then
call UnitRemoveAbility(udg_Danwei[64], 0x41304A4A)
call UnitAddAbility(udg_Danwei[64], 0x41304937)
call UnitAddAbility(udg_Danwei[64], 0x41304854)
else
endif
else
call PauseTimer(udg_Times[63])
if ( ( GetUnitAbilityLevel(udg_Danwei[64], 0x41303841) == 5 ) ) then
call StartTimerBJ(udg_Times[64], false, 9.00)
else
if ( ( GetUnitAbilityLevel(udg_Danwei[64], 0x41303841) == 4 ) ) then
call StartTimerBJ(udg_Times[64], false, 8.75)
else
if ( ( GetUnitAbilityLevel(udg_Danwei[64], 0x41303841) == 3 ) ) then
call StartTimerBJ(udg_Times[64], false, 8.00)
else
if ( ( GetUnitAbilityLevel(udg_Danwei[64], 0x41303841) == 2 ) ) then
call StartTimerBJ(udg_Times[64], false, 6.75)
else
call StartTimerBJ(udg_Times[64], false, 5.00)
endif
endif
endif
endif
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_Overdrive_1 takes nothing returns nothing
set gg_trg_Overdrive_1=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_Overdrive_1, udg_Times[63])
call TriggerAddAction(gg_trg_Overdrive_1, function Trig_Overdrive_1Actions)
endfunction
function Trig_Overdrive_2Func002A takes nothing returns nothing
set udg_Danwei[49]=GetEnumUnit()
call SetHeroStr(udg_Danwei[49], ( GetHeroStr(udg_Danwei[49], false) - udg_Zhengshu[64] ), true)
set udg_Danwei[49]=null
endfunction
function Trig_Overdrive_2Func008A takes nothing returns nothing
set udg_Danwei[49]=GetEnumUnit()
call UnitRemoveAbility(udg_Danwei[49], 0x41304944)
set udg_Danwei[49]=null
endfunction
function Trig_Overdrive_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call SetHeroStr(udg_Danwei[64], ( GetHeroStr(udg_Danwei[64], false) - udg_Zhengshu[64] ), true)
call ForGroupBJ(udg_Danweizu[49], function Trig_Overdrive_2Func002A)
call UnitRemoveAbility(udg_Danwei[64], 0x41303842)
call UnitRemoveAbility(udg_Danwei[64], 0x41304937)
call UnitRemoveAbility(udg_Danwei[64], 0x41304A4A)
call UnitRemoveAbility(udg_Danwei[64], 0x41304944)
call UnitRemoveAbility(udg_Danwei[64], 0x41304854)
call ForGroupBJ(udg_Danweizu[49], function Trig_Overdrive_2Func008A)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_Danwei[64]), 0x41303841, true)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_Overdrive_2 takes nothing returns nothing
set gg_trg_Overdrive_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_Overdrive_2, udg_Times[64])
call TriggerAddAction(gg_trg_Overdrive_2, function Trig_Overdrive_2Actions)
endfunction
function Trig_Overdrive_3Func009A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_Danwei[62])) == true ) ) then
call s__baka_IssueTargetOrder2(udg_Danwei[63] , "thunderbolt" , udg_danwei2[1])
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\A4_lvbai.mdx", udg_danwei2[1], "origin"))
call UnitDamageTarget(udg_Danwei[62], udg_danwei2[1], ( ( 50.00 + ( 30.00 * I2R(GetUnitAbilityLevel(udg_Danwei[62], 0x41303841)) ) ) + ( 2.00 * I2R(GetHeroStr(udg_Danwei[62], true)) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
call GroupRemoveUnit(udg_Danweizu[62], udg_danwei2[1])
endif
set udg_danwei2[1]=null
endfunction
function Trig_Overdrive_3Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call UnitRemoveAbility(udg_Danwei[64], 0x41304937)
call UnitAddAbility(udg_Danwei[64], 0x41303842)
set udg_Danwei[62]=GetTriggerUnit()
set udg_Dian[62]=GetUnitLoc(udg_Danwei[62])
set udg_Danwei[63]=CreateUnit(GetOwningPlayer(udg_Danwei[62]), 0x65303130, GetLocationX(udg_Dian[62]), GetLocationY(udg_Dian[62]), 0.00)
call UnitApplyTimedLife(udg_Danwei[63], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[63], 0x41303033)
set udg_Danweizu[62]=YDWEGetUnitsInRangeOfLocAllNull(300.00 , udg_Dian[62])
call ForGroupBJ(udg_Danweizu[62], function Trig_Overdrive_3Func009A)
set udg_Danwei[63]=null
set udg_Danwei[63]=CreateUnit(GetOwningPlayer(udg_Danwei[62]), 0x6530364E, GetLocationX(udg_Dian[62]), GetLocationY(udg_Dian[62]), 0.00)
call UnitApplyTimedLife(udg_Danwei[63], 0x42487765, 2.00)
call SetUnitTimeScale(udg_Danwei[63], 2.00)
call StartTimerBJ(udg_Times[62], true, 0.03)
set udg_Zhengshu[62]=30
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_Overdrive_3 takes nothing returns nothing
set gg_trg_Overdrive_3=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_Overdrive_3 , 3 , 0x41304937)
call TriggerAddAction(gg_trg_Overdrive_3, function Trig_Overdrive_3Actions)
endfunction
function Trig_Overdrive_3_5Func009A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_danweizu2[369]) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_Danwei[62])) == true ) ) then
call s__baka_IssueTargetOrder2(udg_Danwei[63] , "slow" , udg_danwei2[1])
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\A4_lvbai.mdx", udg_danwei2[1], "origin"))
call UnitDamageTarget(udg_Danwei[62], udg_danwei2[1], ( ( 30.00 + ( 30.00 * I2R(GetUnitAbilityLevel(udg_Danwei[62], 0x41303841)) ) ) + ( 1.00 * I2R(GetHeroStr(udg_Danwei[62], true)) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
call GroupRemoveUnit(udg_Danweizu[62], udg_danwei2[1])
endif
set udg_danwei2[1]=null
endfunction
function Trig_Overdrive_3_5Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call UnitRemoveAbility(udg_Danwei[64], 0x41304A4A)
call UnitAddAbility(udg_Danwei[64], 0x41303842)
set udg_Danwei[62]=GetTriggerUnit()
set udg_Dian[62]=GetUnitLoc(udg_Danwei[62])
set udg_Danwei[63]=CreateUnit(GetOwningPlayer(udg_Danwei[62]), 0x65303130, GetLocationX(udg_Dian[62]), GetLocationY(udg_Dian[62]), 0.00)
call UnitApplyTimedLife(udg_Danwei[63], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[63], 0x4130324A)
set udg_Danweizu[62]=YDWEGetUnitsInRangeOfLocAllNull(300.00 , udg_Dian[62])
call ForGroupBJ(udg_Danweizu[62], function Trig_Overdrive_3_5Func009A)
set udg_Danwei[63]=null
set udg_Danwei[63]=CreateUnit(GetOwningPlayer(udg_Danwei[62]), 0x65303653, GetLocationX(udg_Dian[62]), GetLocationY(udg_Dian[62]), 0.00)
call UnitApplyTimedLife(udg_Danwei[63], 0x42487765, 2.00)
call SetUnitTimeScale(udg_Danwei[63], 0.50)
call StartTimerBJ(udg_Times[62], true, 0.03)
set udg_Zhengshu[62]=30
set udg_Zhengshu[63]=0
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_Overdrive_3_5 takes nothing returns nothing
set gg_trg_Overdrive_3_5=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_Overdrive_3_5 , 3 , 0x41304A4A)
call TriggerAddAction(gg_trg_Overdrive_3_5, function Trig_Overdrive_3_5Actions)
endfunction
function Trig_Overdrive_4Func001Func002Func001A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
call UnitAddAbility(udg_danwei2[1], 0x41726176)
if ( ( udg_Zhengshu[62] >= 20 ) ) then
call s__maphack_SetHeight(udg_danwei2[1] , ( s__maphack_GetHeight(udg_danwei2[1]) + ( ( I2R(udg_Zhengshu[62]) - 20.00 ) * 8.00 ) ) , 0.00)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIlb\\AIlbSpecialArt.mdl", udg_danwei2[1], "origin"))
else
call s__maphack_SetHeight(udg_danwei2[1] , ( s__maphack_GetHeight(udg_danwei2[1]) + ( ( I2R(udg_Zhengshu[62]) - 20.00 ) * 2.50 ) ) , 0.00)
endif
call UnitRemoveAbility(udg_danwei2[1], 0x41726176)
set udg_danwei2[1]=null
endfunction
function Trig_Overdrive_4Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_Zhengshu[62] >= 0 ) ) then
if ( ( udg_Zhengshu[62] <= 25 ) ) then
call SetUnitTimeScale(udg_Danwei[63], ( 0.20 + ( 0.02 * I2R(udg_Zhengshu[62]) ) ))
else
endif
if ( ( GetUnitTypeId(udg_Danwei[63]) == 0x6530364E ) ) then
call ForGroupBJ(udg_Danweizu[62], function Trig_Overdrive_4Func001Func002Func001A)
else
endif
else
call PauseTimer(udg_Times[62])
call DestroyGroup(udg_Danweizu[62])
set udg_Danwei[62]=null
set udg_Danwei[63]=null
call RemoveLocation(udg_Dian[62])
endif
set udg_Zhengshu[62]=( udg_Zhengshu[62] - 1 )
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_Overdrive_4 takes nothing returns nothing
set gg_trg_Overdrive_4=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_Overdrive_4, udg_Times[62])
call TriggerAddAction(gg_trg_Overdrive_4, function Trig_Overdrive_4Actions)
endfunction
function Trig_Harmonics_0Conditions takes nothing returns boolean
return ( ( GetLearnedSkill() == 0x41304938 ) and ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true ) )
endfunction
function Trig_Harmonics_0Actions takes nothing returns nothing
set udg_Danwei[65]=GetTriggerUnit()
call TriggerRegisterUnitEvent(gg_trg_fenshen_2, GetTriggerUnit(), EVENT_UNIT_ISSUED_ORDER)
call TriggerRegisterUnitEvent(gg_trg_fenshen_3, GetTriggerUnit(), EVENT_UNIT_ISSUED_POINT_ORDER)
call TriggerRegisterUnitEvent(gg_trg_fenshen_4, GetTriggerUnit(), EVENT_UNIT_ISSUED_TARGET_ORDER)
call UnitAddAbility(udg_Danwei[65], 0x41304947)
endfunction
function InitTrig_Harmonics_0 takes nothing returns nothing
set gg_trg_Harmonics_0=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Harmonics_0, EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(gg_trg_Harmonics_0, Condition(function Trig_Harmonics_0Conditions))
call TriggerAddAction(gg_trg_Harmonics_0, function Trig_Harmonics_0Actions)
endfunction
function Trig_HarmonicsConditions takes nothing returns boolean
return ( ( ( GetSpellAbilityId() == 0x41304938 ) or ( GetSpellAbilityId() == 0x41304D48 ) ) )
endfunction
function Trig_HarmonicsActions takes nothing returns nothing
set udg_danwei[430]=GetTriggerUnit()
if ( ( GetSpellAbilityId() == 0x41304938 ) ) then
call StartTimerBJ(udg_Times[140], false, 15.00)
else
call IncUnitAbilityLevel(udg_Danwei[65], 0x41304D48)
endif
set udg_dian[350]=GetUnitLoc(udg_danwei[430])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\Polymorph\\PolyMorphDoneGround.mdl", udg_dian[350]))
set udg_Danwei[49]=CreateUnit(GetOwningPlayer(udg_danwei[430]), 0x48303044, GetLocationX(udg_dian[350]), GetLocationY(udg_dian[350]), GetUnitFacing(udg_danwei[430]))
call SetHeroLevelBJ(udg_Danwei[49], 30, false)
call SetHeroStr(udg_Danwei[49], GetHeroStr(udg_danwei[430], false), true)
set udg_aXUNHUAN[197]=1
loop
exitwhen udg_aXUNHUAN[197] > 10
call UnitAddItemByIdSwapped(GetItemTypeId(UnitItemInSlotBJ(udg_danwei[430], udg_aXUNHUAN[197])), udg_Danwei[49])
set udg_aXUNHUAN[197]=udg_aXUNHUAN[197] + 1
endloop
call SetUnitX(udg_Danwei[49], GetLocationX(udg_dian[350]))
call SetUnitY(udg_Danwei[49], GetLocationY(udg_dian[350]))
call s__Unit_PauseUnitMU(udg_Danwei[49] , true , "谐波叠加")
call UnitAddAbility(udg_Danwei[49], 0x416C6F63)
call GroupAddUnit(udg_Danweizu[49], udg_Danwei[49])
if ( ( udg_Zhengshu[48] < 4 ) ) then
set udg_Zhengshu[48]=( udg_Zhengshu[48] + 1 )
else
set udg_Zhengshu[48]=1
endif
call SetUnitUserData(udg_Danwei[49], udg_Zhengshu[48])
if ( ( udg_Zhengshu[67] == 0 ) ) then
set udg_Shishu[( 55 + GetUnitUserData(udg_Danwei[49]) )]=( GetUnitFacing(udg_danwei[430]) + GetRandomReal(75.00, 90.00) )
set udg_Zhengshu[67]=1
else
set udg_Shishu[( 55 + GetUnitUserData(udg_Danwei[49]) )]=( GetUnitFacing(udg_danwei[430]) - GetRandomReal(75.00, 90.00) )
set udg_Zhengshu[67]=0
endif
set udg_Zhengshu[( 55 + GetUnitUserData(udg_Danwei[49]) )]=0
call SetUnitVertexColor(udg_Danwei[49], 255, 255, 255, ( 25 * udg_Zhengshu[( 55 + GetUnitUserData(udg_Danwei[49]) )] ))
set udg_Danwei[49]=null
set udg_danwei[430]=null
call RemoveLocation(udg_dian[350])
endfunction
function InitTrig_Harmonics takes nothing returns nothing
set gg_trg_Harmonics=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Harmonics, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_Harmonics, Condition(function Trig_HarmonicsConditions))
call TriggerAddAction(gg_trg_Harmonics, function Trig_HarmonicsActions)
endfunction
function Trig_Harmonics_1Func003A takes nothing returns nothing
call SetUnitLifePercentBJ(udg_Danwei[65], ( GetUnitLifePercent(udg_Danwei[65]) * 0.90 ))
set udg_dian2[0]=GetUnitLoc(udg_Danwei[65])
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\A15_lei.mdx", udg_dian2[0]))
call RemoveLocation(udg_dian2[0])
set udg_Danwei[49]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_Danwei[49])
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\A15_lei.mdx", udg_dian2[0]))
call RemoveLocation(udg_dian2[0])
call RemoveUnit(udg_Danwei[49])
set udg_Danwei[49]=null
endfunction
function Trig_Harmonics_1Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call UnitRemoveAbility(udg_Danwei[65], 0x41304D48)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_Danwei[65]), 0x41304938, true)
call ForGroupBJ(udg_Danweizu[49], function Trig_Harmonics_1Func003A)
call GroupClear(udg_Danweizu[49])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_Harmonics_1 takes nothing returns nothing
set gg_trg_Harmonics_1=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_Harmonics_1, udg_Times[140])
call TriggerAddAction(gg_trg_Harmonics_1, function Trig_Harmonics_1Actions)
endfunction
function Trig_lihuazouyidongActions takes nothing returns nothing
if ( ( udg_Zhengshu[66] > 0 ) ) then
set udg_Zhengshu[66]=( udg_Zhengshu[66] - 1 )
set udg_dian2[0]=GetUnitLoc(udg_Danwei[65])
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], 15.00, udg_Shishu[66])
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_Danwei[65], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_Danwei[65], GetLocationY(udg_dian2[1]))
else
endif
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
else
endif
endfunction
function InitTrig_lihuazouyidong takes nothing returns nothing
set gg_trg_lihuazouyidong=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_lihuazouyidong, udg_Times[3])
call TriggerAddAction(gg_trg_lihuazouyidong, function Trig_lihuazouyidongActions)
endfunction
function Trig_paoxiao_newActions takes nothing returns nothing
set udg_danwei[411]=GetTriggerUnit()
set udg_dian[320]=GetUnitLoc(udg_danwei[411])
set udg_dian[323]=GetSpellTargetLoc()
set udg_dian[371]=PolarProjectionBJ(udg_dian[320], 100.00, AngleBetweenPoints(udg_dian[320], udg_dian[323]))
set udg_danwei[414]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[411]), 0x68303046, udg_dian[371], AngleBetweenPoints(udg_dian[320], udg_dian[323]))
set udg_danweizu[131]=CreateGroup()
call UnitApplyTimedLife(udg_danwei[414], 0x42487765, 1.00)
set udg_zhengshu[121]=0
call StartTimerBJ(udg_jishiqi[125], true, 0.04)
endfunction
function InitTrig_paoxiao_new takes nothing returns nothing
set gg_trg_paoxiao_new=CreateTrigger()
call TriggerAddAction(gg_trg_paoxiao_new, function Trig_paoxiao_newActions)
endfunction
function Trig_paoxiao_new2Func002Func005A takes nothing returns nothing
set udg_danwei[413]=GetEnumUnit()
call UnitDamageTarget(udg_danwei[411], udg_danwei[413], ( ( 100.00 + ( 30.00 * I2R(GetUnitAbilityLevel(udg_danwei[411], 0x41304546)) ) ) + I2R(GetHeroStr(udg_danwei[411], true)) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
set udg_danwei[445]=FirstOfGroup(udg_danweizu[131])
set udg_dian[372]=GetUnitLoc(udg_danwei[445])
set udg_danwei[412]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[411]), 0x68303047, udg_dian[372], 0.00)
call UnitApplyTimedLife(udg_danwei[412], 0x42487765, 2.00)
set udg_Axunhuan2[1]=1
loop
exitwhen udg_Axunhuan2[1] > 4
set udg_dian[373]=PolarProjectionBJ(udg_dian[372], 100.00, ( ( ( I2R(udg_Axunhuan2[1]) ) ) * ( 90.00 ) ))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl", udg_dian[373]))
call RemoveLocation(udg_dian[373])
set udg_Axunhuan2[1]=udg_Axunhuan2[1] + 1
endloop
set udg_danwei[445]=null
set udg_danwei[413]=null
endfunction
function Trig_paoxiao_new2Func002Func021002003 takes nothing returns boolean
return ( ( ( IsUnitEnemy(GetFilterUnit(), GetOwningPlayer(udg_danwei[411])) == true ) and ( ( IsUnitType(GetFilterUnit(), UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(GetFilterUnit(), UNIT_TYPE_DEAD) == false ) ) ) )
endfunction
function Trig_paoxiao_new2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu[121]=( udg_zhengshu[121] + 1 )
if ( ( IsUnitGroupEmptyBJ(udg_danweizu[131]) == true ) and ( udg_zhengshu[121] < 20 ) ) then
call SetUnitScale(udg_danwei[414], ( 1.00 + ( 0.05 * I2R(udg_zhengshu[121]) ) ), ( 1 + ( 0.05 * I2R(udg_zhengshu[121]) ) ), ( 1 + ( 0.05 * I2R(udg_zhengshu[121]) ) ))
set udg_dian[321]=GetUnitLoc(udg_danwei[414])
set udg_dian[322]=PolarProjectionBJ(udg_dian[321], 60.00, AngleBetweenPoints(udg_dian[320], udg_dian[323]))
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\tx9.mdl", udg_dian[322]))
call SetUnitX(udg_danwei[414], GetLocationX(udg_dian[322]))
call SetUnitY(udg_danwei[414], GetLocationY(udg_dian[322]))
set udg_danweizu[131]=YDWEGetUnitsInRangeOfLocMatchingNull(300.00 , udg_dian[322] , Condition(function Trig_paoxiao_new2Func002Func021002003))
call RemoveLocation(udg_dian[321])
call RemoveLocation(udg_dian[322])
else
call PauseTimer(udg_jishiqi[125])
call SetUnitTimeScale(udg_danwei[412], 2.00)
call SetUnitAnimation(udg_danwei[412], "birth")
call ForGroupBJ(udg_danweizu[131], function Trig_paoxiao_new2Func002Func005A)
call RemoveLocation(udg_dian[320])
call RemoveLocation(udg_dian[323])
call RemoveLocation(udg_dian[371])
call RemoveLocation(udg_dian[372])
set udg_danwei[411]=null
set udg_danwei[414]=null
set udg_danwei[412]=null
call DestroyGroup(udg_danweizu[131])
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_paoxiao_new2 takes nothing returns nothing
set gg_trg_paoxiao_new2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_paoxiao_new2, udg_jishiqi[125])
call TriggerAddAction(gg_trg_paoxiao_new2, function Trig_paoxiao_new2Actions)
endfunction
function Trig_mielongConditions takes nothing returns boolean
return ( ( ( GetLearnedSkill() == 0x41304549 ) or ( GetLearnedSkill() == 0x4130454D ) or ( GetLearnedSkill() == 0x4130454B ) ) )
endfunction
function Trig_mielongActions takes nothing returns nothing
set udg_danwei2[0]=GetTriggerUnit()
if ( ( GetUnitAbilityLevel(udg_danwei2[0], 0x41304549) == 1 ) ) then
set udg_Ajnbuer[0]=true
set udg_danwei[415]=GetTriggerUnit()
call StartTimerBJ(udg_jishiqi[126], true, 1.00)
else
endif
if ( ( GetUnitAbilityLevel(udg_danwei2[0], 0x4130454D) == 1 ) ) then
else
endif
if ( ( GetUnitAbilityLevel(udg_danwei2[0], 0x4130454B) == 1 ) ) then
else
endif
set udg_danwei2[0]=null
endfunction
function InitTrig_mielong takes nothing returns nothing
set gg_trg_mielong=CreateTrigger()
call TriggerAddCondition(gg_trg_mielong, Condition(function Trig_mielongConditions))
call TriggerAddAction(gg_trg_mielong, function Trig_mielongActions)
endfunction
function Trig_mielong3Actions takes nothing returns nothing
if ( ( IsUnitDeadBJ(udg_danwei[415]) == false ) and ( R2I(GetUnitStateSwap(UNIT_STATE_LIFE, udg_danwei[415])) < ( ( R2I(GetUnitStateSwap(UNIT_STATE_MAX_LIFE, udg_danwei[415])) / 100 ) * ( 35 + ( 5 * GetUnitAbilityLevel(udg_danwei[415], 0x41304549) ) ) ) ) ) then
call SetUnitLifeBJ(udg_danwei[415], ( GetUnitState(udg_danwei[415], UNIT_STATE_LIFE) + ( 5.00 + ( 5.00 * I2R(GetUnitAbilityLevel(udg_danwei[415], 0x41304549)) ) ) ))
if ( ( udg_Ajnbuer[0] == true ) ) then
set udg_Ajnbuer[0]=false
call AddSpecialEffectTargetUnitBJ("chest", udg_danwei[415], "Abilities\\Spells\\Other\\ImmolationRed\\ImmolationRedTarget.mdl")
set udg_texiao[39]=bj_lastCreatedEffect
else
endif
else
set udg_Ajnbuer[0]=true
call DestroyEffect(udg_texiao[39])
endif
endfunction
function InitTrig_mielong3 takes nothing returns nothing
set gg_trg_mielong3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_mielong3, udg_jishiqi[126])
call TriggerAddAction(gg_trg_mielong3, function Trig_mielong3Actions)
endfunction
function Trig_tunhuoActions takes nothing returns nothing
set udg_danwei[416]=GetTriggerUnit()
set udg_dian[325]=GetUnitLoc(udg_danwei[416])
set udg_dian[326]=PolarProjectionBJ(udg_dian[325], 100.00, GetUnitFacing(udg_danwei[416]))
set udg_zhengshu[115]=( 10 + ( GetHeroLevel(udg_danwei[416]) * 1 ) )
set udg_zhengshu[137]=0
call SetHeroStr(udg_danwei[416], ( GetHeroStr(udg_danwei[416], false) + ( 10 + ( GetHeroLevel(udg_danwei[416]) * 1 ) ) ), true)
call StartTimerBJ(udg_jishiqi[127], true, 0.10)
call RemoveLocation(udg_dian[325])
call RemoveLocation(udg_dian[326])
set udg_danwei[446]=null
endfunction
function InitTrig_tunhuo takes nothing returns nothing
set gg_trg_tunhuo=CreateTrigger()
call TriggerAddAction(gg_trg_tunhuo, function Trig_tunhuoActions)
endfunction
function Trig_tunhuo2Actions takes nothing returns nothing
set udg_zhengshu[137]=( udg_zhengshu[137] + 1 )
if ( ( UnitHasBuffBJ(udg_danwei[416], 0x42303157) == true ) ) then
set udg_dian[325]=GetUnitLoc(udg_danwei[416])
set udg_danwei[446]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[416]), 0x68303048, udg_dian[325], 0)
call SetUnitAnimation(udg_danwei[446], "death")
call UnitApplyTimedLife(udg_danwei[446], 0x42487765, 0.30)
if ( ( false ) ) then
else
endif
else
call PauseTimer(udg_jishiqi[127])
call SetHeroStr(udg_danwei[416], ( GetHeroStr(udg_danwei[416], false) - udg_zhengshu[115] ), true)
set udg_danwei[416]=null
endif
endfunction
function InitTrig_tunhuo2 takes nothing returns nothing
set gg_trg_tunhuo2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_tunhuo2, udg_jishiqi[127])
call TriggerAddAction(gg_trg_tunhuo2, function Trig_tunhuo2Actions)
endfunction
function Trig_huolongActions takes nothing returns nothing
set udg_danwei[417]=GetTriggerUnit()
set udg_danwei[418]=GetSpellTargetUnit()
set udg_dian[327]=GetUnitLoc(udg_danwei[417])
set udg_dian[328]=GetUnitLoc(udg_danwei[418])
set udg_dian[329]=PolarProjectionBJ(udg_dian[328], 80.00, AngleBetweenPoints(udg_dian[328], udg_dian[327]))
set udg_zhengshu[122]=0
set udg_danweizu[117]=CreateGroup()
call SetUnitX(udg_danwei[417], GetLocationX(udg_dian[329]))
call SetUnitY(udg_danwei[417], GetLocationY(udg_dian[329]))
call PauseUnit(udg_danwei[417], true)
call SetUnitTimeScale(udg_danwei[417], 5.00)
call StartTimerBJ(udg_jishiqi[128], true, 0.10)
endfunction
function InitTrig_huolong takes nothing returns nothing
set gg_trg_huolong=CreateTrigger()
call TriggerAddAction(gg_trg_huolong, function Trig_huolongActions)
endfunction
function Trig_huologn2Func002Func001A takes nothing returns nothing
set udg_danwei[420]=GetEnumUnit()
call RemoveUnit(udg_danwei[420])
set udg_danwei[420]=null
endfunction
function Trig_huologn2Func002Func014Func005A takes nothing returns nothing
set udg_danwei[420]=GetEnumUnit()
set udg_dian[331]=GetUnitLoc(udg_danwei[420])
set udg_dian[332]=PolarProjectionBJ(udg_dian[331], 45.00, GetUnitFacing(udg_danwei[420]))
if ( ( IsTerrainPathable(GetLocationX(udg_dian[332]), GetLocationY(udg_dian[332]), PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei[420], GetLocationX(udg_dian[332]))
call SetUnitY(udg_danwei[420], GetLocationY(udg_dian[332]))
else
call GroupRemoveUnit(udg_danweizu[117], udg_danwei[420])
call RemoveUnit(udg_danwei[420])
endif
call RemoveLocation(udg_dian[331])
call RemoveLocation(udg_dian[332])
set udg_danwei[420]=null
endfunction
function Trig_huologn2Func002Func015Func002A takes nothing returns nothing
set udg_danwei[421]=GetEnumUnit()
if ( ( udg_danwei[421] != udg_danwei[418] ) and ( IsUnitType(udg_danwei[421], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitDeadBJ(udg_danwei[421]) == false ) and ( IsUnitEnemy(udg_danwei[421], GetOwningPlayer(udg_danwei[417])) == true ) ) then
call UnitDamageTarget(udg_danwei[417], udg_danwei[421], ( 10.00 + ( 5.00 * I2R(GetUnitAbilityLevel(udg_danwei[417], 0x4130454A)) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_FIRE, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei[421]=null
endfunction
function Trig_huologn2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu[122]=( udg_zhengshu[122] + 1 )
if ( ( udg_zhengshu[122] <= 25 ) ) then
call SetUnitAnimation(udg_danwei[417], "Attack")
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\reddrum.mdx", udg_dian[328]))
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=3
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_dian[330]=PolarProjectionBJ(udg_dian[328], GetRandomReal(50.00, 150.00), GetRandomReal(( GetUnitFacing(udg_danwei[417]) - 90.00 ), ( GetUnitFacing(udg_danwei[417]) + 90.00 )))
set udg_danwei[419]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[417]), 0x65303543, udg_dian[330], AngleBetweenPoints(udg_dian[327], udg_dian[330]))
call UnitApplyTimedLife(udg_danwei[419], 0x42487765, 0.80)
call GroupAddUnit(udg_danweizu[117], udg_danwei[419])
call ForGroupBJ(udg_danweizu[117], function Trig_huologn2Func002Func014Func005A)
call RemoveLocation(udg_dian[330])
set udg_danwei[419]=null
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
if ( ( udg_zhengshu[122] > 3 ) and ( udg_zhengshu[122] <= 23 ) ) then
set udg_danweizu[118]=YDWEGetUnitsInRangeOfLocAllNull(500.00 , udg_dian[328])
call ForGroupBJ(udg_danweizu[118], function Trig_huologn2Func002Func015Func002A)
call DestroyGroup(udg_danweizu[118])
call RemoveLocation(udg_dian[331])
else
endif
else
call ForGroupBJ(udg_danweizu[117], function Trig_huologn2Func002Func001A)
call PauseUnit(udg_danwei[417], false)
call SetUnitTimeScale(udg_danwei[417], 1)
set udg_danwei[417]=null
call PauseTimer(udg_jishiqi[128])
call RemoveLocation(udg_dian[327])
call RemoveLocation(udg_dian[328])
call RemoveLocation(udg_dian[329])
set udg_danwei[418]=null
call DestroyGroup(udg_danweizu[117])
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_huologn2 takes nothing returns nothing
set gg_trg_huologn2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_huologn2, udg_jishiqi[128])
call TriggerAddAction(gg_trg_huologn2, function Trig_huologn2Actions)
endfunction
function Trig_honglianbaoyanren_1Actions takes nothing returns nothing
set udg_danwei2[345]=GetTriggerUnit()
set udg_zhengshu2[345]=0
set udg_dian2[345]=GetUnitLoc(udg_danwei2[345])
call PauseUnit(udg_danwei2[345], true)
call StartTimerBJ(udg_times[345], true, 0.04)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=9
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[345], ( 350.00 + GetRandomReal(0, 45.00) ), GetRandomReal(0, 360.00))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[345]), 0x6530354E, udg_dian2[1], ( AngleBetweenPoints(udg_dian2[345], udg_dian2[1]) + 90.00 ))
call GroupAddUnit(udg_danweizu2[345], udg_danwei2[1])
call s__maphack_SetHeight(udg_danwei2[1] , ( DistanceBetweenPoints(udg_dian2[345], udg_dian2[1]) * 2.00 ) , 0.00)
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[1])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
endfunction
function InitTrig_honglianbaoyanren_1 takes nothing returns nothing
set gg_trg_honglianbaoyanren_1=CreateTrigger()
call TriggerAddAction(gg_trg_honglianbaoyanren_1, function Trig_honglianbaoyanren_1Actions)
endfunction
function Trig_honglianbaoyanren_2Func003Func004A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
call KillUnit(udg_danwei2[0])
set udg_danwei2[0]=null
endfunction
function Trig_honglianbaoyanren_2Func003Func007A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
if ( ( DistanceBetweenPoints(udg_dian2[345], udg_dian2[0]) >= 50.00 ) ) then
call SetUnitFacing(udg_danwei2[0], ( AngleBetweenPoints(udg_dian2[345], udg_dian2[0]) - 90.00 ))
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[345], ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[345]) - 15.00 ), ( AngleBetweenPoints(udg_dian2[345], udg_dian2[0]) - 15.00 ))
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
call s__maphack_SetHeight(udg_danwei2[0] , ( DistanceBetweenPoints(udg_dian2[345], udg_dian2[1]) * 2.00 ) , 0.00)
call RemoveLocation(udg_dian2[1])
else
call KillUnit(udg_danwei2[0])
call GroupRemoveUnit(udg_danweizu2[345], udg_danwei2[0])
endif
set udg_danwei2[0]=null
endfunction
function Trig_honglianbaoyanren_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_zhengshu2[345]=( udg_zhengshu2[345] + 1 )
if ( ( udg_zhengshu2[345] <= 25 ) ) then
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[345], ( 300.00 + GetRandomReal(0, 45.00) ), GetRandomReal(0, 360.00))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei2[345]), 0x6530354E, udg_dian2[1], ( AngleBetweenPoints(udg_dian2[345], udg_dian2[1]) + 90.00 ))
call GroupAddUnit(udg_danweizu2[345], udg_danwei2[1])
call s__maphack_SetHeight(udg_danwei2[1] , ( DistanceBetweenPoints(udg_dian2[345], udg_dian2[1]) * 2.00 ) , 0.00)
set udg_danwei2[1]=null
call RemoveLocation(udg_dian2[1])
else
if ( ( udg_zhengshu2[345] == 40 ) ) then
call PauseUnit(udg_danwei2[345], false)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=15
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[345], 175.00, ( I2R(bj_forLoopAIndex) * 24.00 ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\Incinerate\\FireLordDeathExplode.mdl", udg_dian2[1]))
call RemoveLocation(udg_dian2[1])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=8
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[345], ( 175.00 * ( Pow(2.00, 0.50) / 2.00 ) ), ( 45.00 * I2R(bj_forLoopAIndex) ))
set bj_forLoopBIndex=1
set bj_forLoopBIndexEnd=6
loop
exitwhen bj_forLoopBIndex > bj_forLoopBIndexEnd
set udg_dian2[2]=PolarProjectionBJ(udg_dian2[1], ( 175.00 * ( Pow(2.00, 0.50) / 2.00 ) ), ( ( ( 45.00 * I2R(bj_forLoopAIndex) ) - 90.00 ) + ( 30.00 * I2R(bj_forLoopBIndex) ) ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\Incinerate\\FireLordDeathExplode.mdl", udg_dian2[2]))
call RemoveLocation(udg_dian2[2])
set bj_forLoopBIndex=bj_forLoopBIndex + 1
endloop
call RemoveLocation(udg_dian2[1])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
else
endif
endif
if ( ( IsUnitGroupEmptyBJ(udg_danweizu2[345]) == false ) ) then
call ForGroupBJ(udg_danweizu2[345], function Trig_honglianbaoyanren_2Func003Func007A)
else
set udg_danwei2[345]=null
call RemoveLocation(udg_dian2[345])
call PauseTimer(udg_times[345])
call ForGroupBJ(udg_danweizu2[345], function Trig_honglianbaoyanren_2Func003Func004A)
call GroupClear(udg_danweizu2[345])
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_honglianbaoyanren_2 takes nothing returns nothing
set gg_trg_honglianbaoyanren_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_honglianbaoyanren_2, udg_times[345])
call TriggerAddAction(gg_trg_honglianbaoyanren_2, function Trig_honglianbaoyanren_2Actions)
endfunction
function Trig_huolongyuji_1Actions takes nothing returns nothing
set udg_danwei2[343]=GetTriggerUnit()
set udg_danwei2[344]=GetSpellTargetUnit()
set udg_zhengshu2[343]=0
call StartTimerBJ(udg_jishiqi[343], true, 0.04)
set udg_danwei2[343]=null
set udg_danwei2[344]=null
endfunction
function InitTrig_huolongyuji_1 takes nothing returns nothing
set gg_trg_huolongyuji_1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_huolongyuji_1, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(gg_trg_huolongyuji_1, function Trig_huolongyuji_1Actions)
endfunction
function Trig_zuzhou_1Actions takes nothing returns nothing
set udg_Danwei[83]=GetTriggerUnit()
set udg_Danwei[84]=GetSpellTargetUnit()
set udg_Zhengshu[83]=27
call StartTimerBJ(udg_Times[83], false, 0.00)
endfunction
function InitTrig_zuzhou_1 takes nothing returns nothing
set gg_trg_zuzhou_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_zuzhou_1 , 3 , 0x41303750)
call TriggerAddAction(gg_trg_zuzhou_1, function Trig_zuzhou_1Actions)
endfunction
function Trig_zuzhou_2Func001Func012Func011Func007A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitDeadBJ(udg_danwei2[1]) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_Danwei[83])) == true ) ) then
call UnitDamageTarget(udg_Danwei[83], udg_danwei2[1], ( ( ( ( 0.00 + ( 30.00 * I2R(GetUnitAbilityLevel(udg_Danwei[83], 0x41303750)) ) ) + ( 1.00 * I2R(GetHeroInt(udg_Danwei[83], true)) ) ) * 1.00 ) * 1.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\OrbOfDeath\\AnnihilationMissile.mdl", GetEnumUnit(), "chest"))
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_zuzhou_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_Zhengshu[83] == 27 ) ) then
set udg_Zhengshu[83]=( udg_Zhengshu[83] - 1 )
set udg_Dian[89]=GetUnitLoc(udg_Danwei[83])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[83]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304B50)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_Danwei[83])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
call StartTimerBJ(udg_Times[83], false, 0.50)
call SetUnitAnimationByIndex(udg_Danwei[83], 4)
else
if ( ( udg_Zhengshu[83] == 26 ) ) then
set udg_Zhengshu[83]=( udg_Zhengshu[83] - 1 )
set udg_Zhengshu[84]=0
call UnitAddAbility(udg_Danwei[84], 0x41304A5A)
call UnitAddAbility(udg_Danwei[84], 0x41304B31)
call EnableTrigger(gg_trg_zuzhou_3)
call PlaySoundOnUnitBJ(gg_snd_AcolyteMining, 100, udg_Danwei[84])
call StartTimerBJ(udg_Times[83], true, 0.20)
else
set udg_Zhengshu[83]=( udg_Zhengshu[83] - 1 )
set udg_Zhengshu[84]=( udg_Zhengshu[84] + 1 )
if ( ( udg_Zhengshu[83] > 0 ) and ( udg_Zhengshu[84] < 75 ) and ( IsUnitType(udg_Danwei[84], UNIT_TYPE_DEAD) == false ) ) then
call UnitDamageTarget(udg_Danwei[83], udg_Danwei[84], ( ( ( ( 5.00 + ( 3.00 * I2R(GetUnitAbilityLevel(udg_Danwei[83], 0x41303750)) ) ) + ( 0.10 * I2R(GetHeroInt(udg_Danwei[83], true)) ) ) * 0.20 ) * ( 1.00 + ( 0.02 * I2R(udg_Zhengshu[84]) ) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
call DisableTrigger(gg_trg_zuzhou_3)
set udg_Dian[83]=GetUnitLoc(udg_Danwei[84])
if ( ( udg_Zhengshu[84] >= 75 ) ) then
set udg_Danwei[85]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[83]), 0x65303130, udg_Dian[83], 0)
call UnitApplyTimedLife(udg_Danwei[85], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[85], 0x41303033)
call s__baka_IssueTargetOrder2(udg_Danwei[85] , "thunderbolt" , udg_Danwei[84])
set udg_Danwei[85]=null
else
endif
call PlaySoundOnUnitBJ(gg_snd_SoulBurn1, 100, udg_Danwei[84])
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\A17_zi.mdx", udg_Dian[83]))
set udg_Danweizu[83]=YDWEGetUnitsInRangeOfLocAllNull(500.00 , udg_Dian[83])
call ForGroupBJ(udg_Danweizu[83], function Trig_zuzhou_2Func001Func012Func011Func007A)
call DestroyGroup(udg_Danweizu[83])
call RemoveLocation(udg_Dian[83])
call UnitRemoveAbility(udg_Danwei[84], 0x41304A5A)
call UnitRemoveAbility(udg_Danwei[84], 0x41304B31)
call UnitRemoveBuffBJ(0x4230324D, udg_Danwei[84])
call PauseTimer(udg_Times[83])
set udg_Danwei[83]=null
set udg_Danwei[84]=null
endif
endif
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_zuzhou_2 takes nothing returns nothing
set gg_trg_zuzhou_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_zuzhou_2, udg_Times[83])
call TriggerAddAction(gg_trg_zuzhou_2, function Trig_zuzhou_2Actions)
endfunction
function Trig_zuzhou_3Actions takes nothing returns nothing
if ( ( UnitHasBuffBJ(GetTriggerUnit(), 0x4230324D) == true ) ) then
set udg_Zhengshu[83]=25
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayTarget.mdl", udg_Danwei[84], "origin"))
else
endif
endfunction
function InitTrig_zuzhou_3 takes nothing returns nothing
set gg_trg_zuzhou_3=CreateTrigger()
call DisableTrigger(gg_trg_zuzhou_3)
call TriggerRegisterAnyUnitEventBJ(gg_trg_zuzhou_3, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddAction(gg_trg_zuzhou_3, function Trig_zuzhou_3Actions)
endfunction
function Trig_wuran_1Actions takes nothing returns nothing
set udg_Danwei[86]=GetTriggerUnit()
set udg_Dian[158]=GetSpellTargetLoc()
set udg_Zhengshu[153]=17
call StartTimerBJ(udg_Times[153], false, 0.00)
endfunction
function InitTrig_wuran_1 takes nothing returns nothing
set gg_trg_wuran_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_wuran_1 , 3 , 0x41304B32)
call TriggerAddAction(gg_trg_wuran_1, function Trig_wuran_1Actions)
endfunction
function Trig_wuran_2Func001Func012Func009A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitDeadBJ(udg_danwei2[1]) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_Danwei[86])) == true ) ) then
if ( ( IsUnitInGroup(udg_danwei2[1], udg_Danweizu[154]) == true ) ) then
call UnitRemoveAbility(udg_danwei2[1], 0x41304E36)
call UnitRemoveBuffBJ(0x42303338, udg_danwei2[1])
call UnitAddAbility(udg_danwei2[1], 0x41304E37)
else
call UnitAddAbility(udg_danwei2[1], 0x41304E36)
endif
call GroupAddUnit(udg_Danweizu[153], udg_danwei2[1])
else
call GroupRemoveUnit(udg_Danweizu[83], udg_danwei2[1])
endif
set udg_danwei2[1]=null
endfunction
function Trig_wuran_2Func001Func012Func011A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
call GroupAddUnit(udg_Danweizu[154], udg_danwei2[1])
set udg_danwei2[1]=null
endfunction
function Trig_wuran_2Func001Func012Func014Func004A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitDeadBJ(udg_danwei2[1]) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_Danwei[86])) == true ) and ( IsUnitInGroup(udg_danwei2[1], udg_Danweizu[153]) == false ) ) then
call GroupAddUnit(udg_Danweizu[153], udg_danwei2[1])
call GroupAddUnit(udg_Danweizu[154], udg_danwei2[1])
call UnitAddAbility(udg_danwei2[1], 0x41304E36)
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_wuran_2Func001Func012Func014Func006A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( GetUnitAbilityLevel(udg_danwei2[1], 0x41304E37) == 1 ) ) then
call UnitDamageTarget(udg_Danwei[86], udg_danwei2[1], ( ( ( ( 35.00 + ( 25.00 * I2R(GetUnitAbilityLevel(udg_Danwei[86], 0x41304B32)) ) ) + ( 1.20 * I2R(GetHeroInt(udg_Danwei[86], true)) ) ) / 14.00 ) * 1.25 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\BlackArrow\\BlackArrowMissile.mdl", udg_danwei2[1], "origin"))
else
call UnitDamageTarget(udg_Danwei[86], udg_danwei2[1], ( ( ( ( 35.00 + ( 25.00 * I2R(GetUnitAbilityLevel(udg_Danwei[86], 0x41304B32)) ) ) + ( 1.20 * I2R(GetHeroInt(udg_Danwei[86], true)) ) ) / 14.00 ) * 1.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\CarrionSwarm\\CarrionSwarmDamage.mdl", udg_danwei2[1], "origin"))
set udg_danwei2[1]=null
endfunction
function Trig_wuran_2Func001Func012Func014Func007Func001A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
call UnitRemoveAbility(udg_danwei2[1], 0x41304E36)
call UnitRemoveAbility(udg_danwei2[1], 0x41304E37)
call UnitRemoveBuffBJ(0x42303338, udg_danwei2[1])
set udg_danwei2[1]=null
endfunction
function Trig_wuran_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_Zhengshu[153] == 17 ) ) then
set udg_Zhengshu[153]=( udg_Zhengshu[153] - 1 )
set udg_Dian[89]=GetUnitLoc(udg_Danwei[86])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[86]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304B50)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_Danwei[86])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
call StartTimerBJ(udg_Times[153], false, 0.50)
call SetUnitAnimationByIndex(udg_Danwei[86], 4)
else
if ( ( udg_Zhengshu[153] == 16 ) ) then
set udg_Zhengshu[153]=( udg_Zhengshu[153] - 1 )
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[86]), 0x6530365A, udg_Dian[158], 0.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 5.00)
set udg_danwei2[1]=null
call StopSoundBJ(gg_snd_TheBlackArrow01, false)
call PlaySoundOnUnitBJ(gg_snd_TheBlackArrow01, 100, udg_Danwei[86])
set udg_Danweizu[83]=YDWEGetUnitsInRangeOfLocAllNull(350.00 , udg_Dian[158])
call ForGroupBJ(udg_Danweizu[83], function Trig_wuran_2Func001Func012Func009A)
call GroupClear(udg_Danweizu[154])
call ForGroupBJ(udg_Danweizu[83], function Trig_wuran_2Func001Func012Func011A)
call DestroyGroup(udg_Danweizu[83])
call StartTimerBJ(udg_Times[153], true, 0.25)
else
if ( ( udg_Zhengshu[153] > 1 ) ) then
set udg_Zhengshu[153]=( udg_Zhengshu[153] - 1 )
set udg_Danweizu[83]=YDWEGetUnitsInRangeOfLocAllNull(350.00 , udg_Dian[158])
call ForGroupBJ(udg_Danweizu[83], function Trig_wuran_2Func001Func012Func014Func004A)
call DestroyGroup(udg_Danweizu[83])
call ForGroupBJ(udg_Danweizu[153], function Trig_wuran_2Func001Func012Func014Func006A)
if ( ( udg_Zhengshu[153] == 1 ) ) then
call ForGroupBJ(udg_Danweizu[153], function Trig_wuran_2Func001Func012Func014Func007Func001A)
call PauseTimer(udg_Times[153])
call StartTimerBJ(udg_Times[153], false, 3.50)
call RemoveLocation(udg_Dian[158])
call GroupClear(udg_Danweizu[153])
else
endif
else
call GroupClear(udg_Danweizu[154])
endif
endif
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_wuran_2 takes nothing returns nothing
set gg_trg_wuran_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_wuran_2, udg_Times[153])
call TriggerAddAction(gg_trg_wuran_2, function Trig_wuran_2Actions)
endfunction
function Trig_linghunmoshi_0Actions takes nothing returns nothing
set udg_dian2[1]=GetSpellTargetLoc()
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_WALKABILITY) == true ) ) then
call IssueImmediateOrderById(GetTriggerUnit(), 851972)
call DisplayTextToPlayer(s__baka_SPlayer(( s__baka_SGetPlayerId(GetOwningPlayer(GetTriggerUnit())) + 1 ) - 1), 0, 0, "TRIGSTR_6762")
else
endif
call RemoveLocation(udg_dian2[1])
endfunction
function InitTrig_linghunmoshi_0 takes nothing returns nothing
set gg_trg_linghunmoshi_0=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_linghunmoshi_0 , 3 , 0x41304B33)
call TriggerAddAction(gg_trg_linghunmoshi_0, function Trig_linghunmoshi_0Actions)
endfunction
function Trig_linghunmoshi_1Actions takes nothing returns nothing
set udg_Danwei[86]=GetTriggerUnit()
set udg_Dian[156]=GetSpellTargetLoc()
set udg_Zhengshu[86]=- 2
call StartTimerBJ(udg_Times[86], false, 0.00)
endfunction
function InitTrig_linghunmoshi_1 takes nothing returns nothing
set gg_trg_linghunmoshi_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_linghunmoshi_1 , 3 , 0x41304B33)
call TriggerAddAction(gg_trg_linghunmoshi_1, function Trig_linghunmoshi_1Actions)
endfunction
function Trig_linghunmoshi_2Actions takes nothing returns nothing
if ( ( udg_Zhengshu[86] == - 2 ) ) then
set udg_Zhengshu[86]=( udg_Zhengshu[86] + 1 )
set udg_Dian[89]=GetUnitLoc(udg_Danwei[86])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[86]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304C36)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_Danwei[86])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
call StartTimerBJ(udg_Times[86], false, 0.20)
call SetUnitAnimationByIndex(udg_Danwei[86], 3)
else
if ( ( udg_Zhengshu[86] == - 1 ) ) then
set udg_Zhengshu[86]=( udg_Zhengshu[86] + 1 )
set udg_Dian[83]=GetUnitLoc(udg_Danwei[86])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl", udg_Dian[83]))
set udg_Danwei[87]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[86]), 0x65303730, udg_Dian[83], GetUnitFacing(udg_Danwei[86]))
call RemoveLocation(udg_Dian[83])
call SetUnitX(udg_Danwei[86], GetLocationX(udg_Dian[156]))
call SetUnitY(udg_Danwei[86], GetLocationY(udg_Dian[156]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl", udg_Dian[156]))
call RemoveLocation(udg_Dian[156])
call UnitAddAbility(udg_Danwei[86], 0x41304B35)
call UnitAddAbility(udg_Danwei[86], 0x41304E38)
call UnitAddAbility(udg_Danwei[86], 0x4162756E)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_Danwei[86]), 0x41304B33, false)
call StartTimerBJ(udg_Times[86], true, 0.04)
else
set udg_Zhengshu[86]=( udg_Zhengshu[86] + 1 )
if ( ( IsUnitType(udg_Danwei[86], UNIT_TYPE_DEAD) == false ) and ( ( ( udg_Danwei[88] != null ) and ( udg_Zhengshu[154] <= 100 ) ) or ( udg_Zhengshu[156] > 0 ) or ( udg_Zhengshu[86] <= ( 100 + ( 15 * GetUnitAbilityLevel(udg_Danwei[86], 0x41304B33) ) ) ) ) ) then
set udg_Dian[86]=GetUnitLoc(udg_Danwei[86])
set udg_Dian[87]=GetUnitLoc(udg_Danwei[87])
if ( ( DistanceBetweenPoints(udg_Dian[86], udg_Dian[87]) > 2000.00 ) ) then
if ( ( DistanceBetweenPoints(udg_Dian[86], udg_Dian[87]) > 2500.00 ) ) then
set udg_Dian[85]=PolarProjectionBJ(udg_Dian[87], 2450.00, AngleBetweenPoints(udg_Dian[87], udg_Dian[86]))
else
set udg_Dian[85]=PolarProjectionBJ(udg_Dian[86], ( ( GetUnitMoveSpeed(udg_Danwei[86]) * ( ( DistanceBetweenPoints(udg_Dian[86], udg_Dian[87]) - 2000.00 ) / 400.00 ) ) * 0.04 ), AngleBetweenPoints(udg_Dian[86], udg_Dian[87]))
endif
call SetUnitX(udg_Danwei[86], GetLocationX(udg_Dian[85]))
call SetUnitY(udg_Danwei[86], GetLocationY(udg_Dian[85]))
call RemoveLocation(udg_Dian[85])
else
endif
if ( ( IsUnitPausedBJ(udg_Danwei[86]) == false ) ) then
call SetUnitVertexColor(udg_Danwei[86], 255, 255, 255, R2I(RMaxBJ(25.00, ( 255.00 - ( 255.00 * ( ( RMaxBJ(2000.00, DistanceBetweenPoints(udg_Dian[86], udg_Dian[87])) - 2000.00 ) / 500.00 ) ) ))))
else
endif
call RemoveLocation(udg_Dian[87])
if ( ( udg_Danwei[88] != null ) ) then
set udg_Dian[88]=GetUnitLoc(udg_Danwei[88])
if ( ( IsUnitType(udg_Danwei[88], UNIT_TYPE_DEAD) == false ) and ( GetUnitState(udg_Danwei[86], UNIT_STATE_MANA) > 10 ) and ( DistanceBetweenPoints(udg_Dian[86], udg_Dian[88]) <= 1200.00 ) and ( udg_Zhengshu[154] <= 100 ) ) then
set udg_Zhengshu[154]=( udg_Zhengshu[154] + 1 )
set udg_Dian[87]=PolarProjectionBJ(udg_Dian[88], ( ( 3.00 + ( 0.04 * ( 0.05 * DistanceBetweenPoints(udg_Dian[86], udg_Dian[88]) ) ) ) + ( 0.60 * I2R(GetUnitAbilityLevel(udg_Danwei[86], 0x41304B33)) ) ), AngleBetweenPoints(udg_Dian[88], udg_Dian[86]))
call SetUnitManaBJ(udg_Danwei[86], ( GetUnitState(udg_Danwei[86], UNIT_STATE_MANA) - ( ( GetUnitState(udg_Danwei[86], UNIT_STATE_MAX_MANA) * 0.03 ) * 0.04 ) ))
call UnitDamageTarget(udg_Danwei[86], udg_Danwei[88], ( ( ( GetUnitState(udg_Danwei[86], UNIT_STATE_MAX_MANA) * 0.03 ) + ( 0.00 + ( 6.00 * I2R(GetUnitAbilityLevel(udg_Danwei[86], 0x41304B33)) ) ) ) * 0.04 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
if ( ( IsTerrainPathableBJ(udg_Dian[88], PATHING_TYPE_WALKABILITY) == false ) and ( DistanceBetweenPoints(udg_Dian[86], udg_Dian[88]) >= 120.00 ) ) then
call SetUnitX(udg_Danwei[88], GetLocationX(udg_Dian[87]))
call SetUnitY(udg_Danwei[88], GetLocationY(udg_Dian[87]))
else
endif
call MoveLightningEx(udg_shandian[26], false, GetLocationX(udg_Dian[88]), GetLocationY(udg_Dian[88]), ( GetLocationZ(udg_Dian[88]) + ( s__maphack_GetHeight(udg_Danwei[88]) + 65.00 ) ), GetLocationX(udg_Dian[86]), GetLocationY(udg_Dian[86]), ( GetLocationZ(udg_Dian[86]) + ( s__maphack_GetHeight(udg_Danwei[86]) + 65.00 ) ))
call RemoveLocation(udg_Dian[87])
else
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", udg_Danwei[88], "chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\VengeanceMissile\\VengeanceMissile.mdl", udg_Danwei[88], "chest"))
call UnitDamageTarget(udg_Danwei[86], udg_Danwei[88], ( ( ( I2R(GetHeroInt(udg_Danwei[86], true)) * 1.00 ) + ( 0.00 + ( 30.00 * I2R(GetUnitAbilityLevel(udg_Danwei[86], 0x41304B33)) ) ) ) * 1.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
set udg_Danwei[85]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[86]), 0x65303130, udg_Dian[88], 0)
call UnitApplyTimedLife(udg_Danwei[85], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[85], 0x41303551)
call s__baka_IssueTargetOrder2(udg_Danwei[85] , "thunderbolt" , udg_Danwei[88])
set udg_Danwei[85]=null
set udg_Danwei[88]=null
call UnitRemoveAbility(udg_Danwei[86], 0x41304B36)
call DestroyLightning(udg_shandian[26])
endif
call RemoveLocation(udg_Dian[88])
else
endif
call RemoveLocation(udg_Dian[86])
else
if ( ( GetUnitAbilityLevel(udg_Danwei[86], 0x41304B36) == 1 ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", udg_Danwei[88], "chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\VengeanceMissile\\VengeanceMissile.mdl", udg_Danwei[88], "chest"))
call UnitDamageTarget(udg_Danwei[86], udg_Danwei[88], ( ( ( I2R(GetHeroInt(udg_Danwei[86], true)) * 1.00 ) + ( 0.00 + ( 30.00 * I2R(GetUnitAbilityLevel(udg_Danwei[86], 0x41304B33)) ) ) ) * 1.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
set udg_Dian[88]=GetUnitLoc(udg_Danwei[88])
set udg_Danwei[85]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[86]), 0x65303130, udg_Dian[88], 0)
call UnitApplyTimedLife(udg_Danwei[85], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[85], 0x41303551)
call s__baka_IssueTargetOrder2(udg_Danwei[85] , "thunderbolt" , udg_Danwei[88])
set udg_Danwei[85]=null
set udg_Danwei[88]=null
call RemoveLocation(udg_Dian[88])
call DestroyLightning(udg_shandian[26])
else
endif
call UnitRemoveAbility(udg_Danwei[86], 0x41304E38)
call UnitRemoveAbility(udg_Danwei[86], 0x41304B35)
call UnitRemoveAbility(udg_Danwei[86], 0x41304B36)
call UnitRemoveAbility(udg_Danwei[86], 0x4162756E)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_Danwei[86]), 0x41304B33, true)
call SetUnitVertexColor(udg_Danwei[86], 255, 255, 255, 255)
set udg_Dian[83]=GetUnitLoc(udg_Danwei[86])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl", udg_Dian[83]))
call RemoveLocation(udg_Dian[83])
set udg_Dian[83]=GetUnitLoc(udg_Danwei[87])
call SetUnitX(udg_Danwei[86], GetLocationX(udg_Dian[83]))
call SetUnitY(udg_Danwei[86], GetLocationY(udg_Dian[83]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl", udg_Dian[83]))
call RemoveLocation(udg_Dian[83])
call PauseTimer(udg_Times[86])
call RemoveUnit(udg_Danwei[87])
set udg_Danwei[87]=null
endif
endif
endif
endfunction
function InitTrig_linghunmoshi_2 takes nothing returns nothing
set gg_trg_linghunmoshi_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_linghunmoshi_2, udg_Times[86])
call TriggerAddAction(gg_trg_linghunmoshi_2, function Trig_linghunmoshi_2Actions)
endfunction
function Trig_linghunmoshi_3Actions takes nothing returns nothing
if ( ( GetUnitAbilityLevel(udg_Danwei[86], 0x41304B36) == 1 ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", udg_Danwei[88], "chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\VengeanceMissile\\VengeanceMissile.mdl", udg_Danwei[88], "chest"))
call UnitDamageTarget(udg_Danwei[86], udg_Danwei[88], ( ( ( I2R(GetHeroInt(udg_Danwei[86], true)) * 1.00 ) + ( 0.00 + ( 30.00 * I2R(GetUnitAbilityLevel(udg_Danwei[86], 0x41304B33)) ) ) ) * 1.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
set udg_Dian[88]=GetUnitLoc(udg_Danwei[88])
set udg_Danwei[85]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[86]), 0x65303130, udg_Dian[88], 0)
call UnitApplyTimedLife(udg_Danwei[85], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[85], 0x41303551)
call s__baka_IssueTargetOrder2(udg_Danwei[85] , "thunderbolt" , udg_Danwei[88])
set udg_Danwei[85]=null
set udg_Danwei[88]=null
call RemoveLocation(udg_Dian[88])
call DestroyLightning(udg_shandian[26])
else
endif
call UnitRemoveAbility(udg_Danwei[86], 0x41304E38)
call UnitRemoveAbility(udg_Danwei[86], 0x41304B35)
call UnitRemoveAbility(udg_Danwei[86], 0x41304B36)
call UnitRemoveAbility(udg_Danwei[86], 0x4162756E)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_Danwei[86]), 0x41304B33, true)
call SetUnitVertexColor(udg_Danwei[86], 255, 255, 255, 255)
set udg_Dian[83]=GetUnitLoc(udg_Danwei[86])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl", udg_Dian[83]))
call RemoveLocation(udg_Dian[83])
set udg_Dian[83]=GetUnitLoc(udg_Danwei[87])
call SetUnitX(udg_Danwei[86], GetLocationX(udg_Dian[83]))
call SetUnitY(udg_Danwei[86], GetLocationY(udg_Dian[83]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl", udg_Dian[83]))
call RemoveLocation(udg_Dian[83])
call PauseTimer(udg_Times[86])
call RemoveUnit(udg_Danwei[87])
set udg_Danwei[87]=null
endfunction
function InitTrig_linghunmoshi_3 takes nothing returns nothing
set gg_trg_linghunmoshi_3=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_linghunmoshi_3 , 3 , 0x41304E38)
call TriggerAddAction(gg_trg_linghunmoshi_3, function Trig_linghunmoshi_3Actions)
endfunction
function Trig_linghunsuolian_1Func008T takes nothing returns nothing
call UnitAddAbility(udg_Danwei[86], 0x41304B36)
call UnitRemoveAbility(udg_Danwei[86], 0x41304B35)
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
endfunction
function Trig_linghunsuolian_1Actions takes nothing returns nothing
local timer ydl_timer
set udg_Danwei[88]=GetSpellTargetUnit()
set udg_Dian[86]=GetUnitLoc(udg_Danwei[86])
set udg_Dian[88]=GetUnitLoc(udg_Danwei[88])
set udg_shandian[26]=AddLightningEx("SPLK", false, GetLocationX(udg_Dian[88]), GetLocationY(udg_Dian[88]), ( GetLocationZ(udg_Dian[88]) + ( s__maphack_GetHeight(udg_Danwei[88]) + 65.00 ) ), GetLocationX(udg_Dian[86]), GetLocationY(udg_Dian[86]), ( GetLocationZ(udg_Dian[86]) + ( s__maphack_GetHeight(udg_Danwei[86]) + 65.00 ) ))
call SetLightningColor(udg_shandian[26], 0.50, 0.10, 1, 1)
call RemoveLocation(udg_Dian[86])
call RemoveLocation(udg_Dian[88])
set ydl_timer=CreateTimer()
call TimerStart(ydl_timer, 0.00, false, function Trig_linghunsuolian_1Func008T)
call PlaySoundOnUnitBJ(gg_snd_LifeDrain, 100, udg_Danwei[88])
set udg_Zhengshu[154]=0
set ydl_timer=null
endfunction
function InitTrig_linghunsuolian_1 takes nothing returns nothing
set gg_trg_linghunsuolian_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_linghunsuolian_1 , 3 , 0x41304B35)
call TriggerAddAction(gg_trg_linghunsuolian_1, function Trig_linghunsuolian_1Actions)
endfunction
function Trig_linghunsuolian_2Actions takes nothing returns nothing
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl", udg_Danwei[88], "chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\VengeanceMissile\\VengeanceMissile.mdl", udg_Danwei[88], "chest"))
call UnitDamageTarget(udg_Danwei[86], udg_Danwei[88], ( ( ( I2R(GetHeroInt(udg_Danwei[86], true)) * 1.00 ) + ( 0.00 + ( 30.00 * I2R(GetUnitAbilityLevel(udg_Danwei[86], 0x41304B33)) ) ) ) * 1.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
set udg_Dian[88]=GetUnitLoc(udg_Danwei[88])
set udg_Danwei[85]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[86]), 0x65303130, udg_Dian[88], 0)
call UnitApplyTimedLife(udg_Danwei[85], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[85], 0x41303551)
call s__baka_IssueTargetOrder2(udg_Danwei[85] , "thunderbolt" , udg_Danwei[88])
set udg_Danwei[85]=null
set udg_Danwei[88]=null
call RemoveLocation(udg_Dian[88])
call UnitRemoveAbility(udg_Danwei[86], 0x41304B36)
call DestroyLightning(udg_shandian[26])
endfunction
function InitTrig_linghunsuolian_2 takes nothing returns nothing
set gg_trg_linghunsuolian_2=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_linghunsuolian_2 , 3 , 0x41304B36)
call TriggerAddAction(gg_trg_linghunsuolian_2, function Trig_linghunsuolian_2Actions)
endfunction
function Trig_juduActions takes nothing returns nothing
set udg_danwei[447]=GetTriggerUnit()
set udg_dian[374]=GetSpellTargetLoc()
set udg_zhengshu[138]=- 2
call StartTimerBJ(udg_jishiqi[139], false, 0.00)
endfunction
function InitTrig_judu takes nothing returns nothing
set gg_trg_judu=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_judu , 3 , 0x41304A52)
call TriggerAddAction(gg_trg_judu, function Trig_juduActions)
endfunction
function Trig_judu2Func001Func012Func012A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
call UnitRemoveAbility(udg_danwei2[1], 0x41304E39)
set udg_danwei2[1]=null
endfunction
function Trig_judu2Func001Func012Func015A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitDeadBJ(udg_danwei2[1]) == false ) ) then
if ( ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei[447])) == true ) ) then
else
if ( ( IsUnitAlly(udg_danwei2[1], GetOwningPlayer(udg_danwei[447])) == true ) ) then
call UnitAddAbility(udg_danwei2[1], 0x41304E39)
else
endif
endif
call GroupAddUnit(udg_danweizu[143], udg_danwei2[1])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_judu2Func001Func012Func017A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_danwei[447])) == true ) ) then
set udg_dian[375]=GetUnitLoc(udg_danwei2[1])
set udg_dian[376]=PolarProjectionBJ(udg_dian[375], ( ( DistanceBetweenPoints(udg_dian[373], udg_dian[375]) * 0.01 ) + 3.00 ), AngleBetweenPoints(udg_dian[375], udg_dian[373]))
if ( ( IsTerrainPathableBJ(udg_dian[376], PATHING_TYPE_WALKABILITY) == false ) and ( DistanceBetweenPoints(udg_dian[373], udg_dian[375]) >= 25.00 ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_dian[376]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_dian[376]))
else
endif
call RemoveLocation(udg_dian[375])
call RemoveLocation(udg_dian[376])
call UnitDamageTarget(udg_danwei[447], udg_danwei2[1], ( ( ( ( 5.00 + ( 20.00 * I2R(GetUnitAbilityLevel(udg_danwei[447], 0x41304A52)) ) ) + ( 0.20 * I2R(GetHeroInt(udg_danwei[447], true)) ) ) * 0.04 ) * ( 1.00 + ( ( 2.00 / 125.00 ) * I2R(udg_zhengshu[138]) ) ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_judu2Func001Func012Func018Func001A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
set udg_dian[375]=GetUnitLoc(udg_danwei2[0])
set udg_dian[376]=PolarProjectionBJ(udg_dian[375], ( 12.00 - ( 0.24 * I2R(udg_zhengshu[138]) ) ), GetUnitFacing(udg_danwei2[0]))
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian[376]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian[376]))
set udg_danwei2[0]=null
call RemoveLocation(udg_dian[375])
call RemoveLocation(udg_dian[376])
endfunction
function Trig_judu2Func001Func012Func018Func002Func001Func001A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
set udg_dian[375]=GetUnitLoc(udg_danwei2[0])
set udg_dian[376]=PolarProjectionBJ(udg_dian[375], ( 0.00 + ( 0.24 * ( I2R(udg_zhengshu[138]) - 50.00 ) ) ), ( GetUnitFacing(udg_danwei2[0]) + 180.00 ))
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian[376]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian[376]))
set udg_danwei2[0]=null
call RemoveLocation(udg_dian[375])
call RemoveLocation(udg_dian[376])
endfunction
function Trig_judu2Func001Func012Func018Func002Func001Func003A takes nothing returns nothing
set udg_danwei2[0]=GetEnumUnit()
call SetUnitTimeScale(udg_danwei2[0], 1.00)
call KillUnit(udg_danwei2[0])
set udg_danwei2[0]=null
endfunction
function Trig_judu2Func001Func012Func018Func002Func002Func003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
call UnitRemoveAbility(udg_danwei2[1], 0x41304E39)
set udg_danwei2[1]=null
endfunction
function Trig_judu2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_zhengshu[138] == - 2 ) ) then
set udg_zhengshu[138]=( udg_zhengshu[138] + 1 )
set udg_Dian[89]=GetUnitLoc(udg_danwei[447])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[447]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304B50)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_danwei[447])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
call StartTimerBJ(udg_jishiqi[139], false, 0.50)
call SetUnitAnimationByIndex(udg_danwei[447], 4)
else
if ( ( udg_zhengshu[138] == - 1 ) ) then
set udg_zhengshu[138]=( udg_zhengshu[138] + 1 )
set udg_dian[373]=GetUnitLoc(udg_danwei[447])
set udg_Dian[157]=GetUnitLoc(udg_danwei[447])
set udg_Axunhuan2[2]=1
loop
exitwhen udg_Axunhuan2[2] > 8
set udg_dian[375]=PolarProjectionBJ(udg_dian[373], 100.00, ( ( ( I2R(udg_Axunhuan2[2]) ) ) * ( 45.00 ) ))
set udg_danwei2[0]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[447]), 0x65303656, udg_dian[375], AngleBetweenPoints(udg_dian[373], udg_dian[375]))
call SetUnitTimeScale(udg_danwei2[0], 0.00)
call GroupAddUnit(udg_danweizu[133], udg_danwei2[0])
set udg_danwei2[0]=null
call RemoveLocation(udg_dian[375])
set udg_Axunhuan2[2]=udg_Axunhuan2[2] + 1
endloop
set udg_danwei2[133]=CreateUnitAtLoc(GetOwningPlayer(udg_danwei[447]), 0x65303656, udg_dian[373], AngleBetweenPoints(udg_dian[373], udg_dian[375]))
call SetUnitTimeScale(udg_danwei2[133], 0.00)
call PlaySoundAtPointBJ(gg_snd_CycloneLoop1, 100, udg_dian[373], 300.00)
call PlaySoundAtPointBJ(gg_snd_CarrionSwarmDamage1, 100, udg_dian[373], 300.00)
call StartTimerBJ(udg_jishiqi[139], true, 0.04)
else
set udg_zhengshu[138]=( udg_zhengshu[138] + 1 )
call ForGroupBJ(udg_danweizu[143], function Trig_judu2Func001Func012Func012A)
call GroupClear(udg_danweizu[143])
if ( ( udg_zhengshu[138] <= 50 ) ) then
set udg_danweizu[132]=YDWEGetUnitsInRangeOfLocAllNull(( 300.00 + ( 100.00 + ( ( ( 12.00 + ( 12.00 - ( 0.24 * I2R(udg_zhengshu[138]) ) ) ) * I2R(udg_zhengshu[138]) ) / 2.00 ) ) ) , udg_Dian[157])
else
if ( ( udg_zhengshu[138] <= 100 ) ) then
set udg_danweizu[132]=YDWEGetUnitsInRangeOfLocAllNull(( 300.00 + ( 100.00 + ( ( ( 12.00 + ( 12.00 - ( 0.24 * ( 100.00 - I2R(udg_zhengshu[138]) ) ) ) ) * ( 100.00 - I2R(udg_zhengshu[138]) ) ) / 2.00 ) ) ) , udg_Dian[157])
else
set udg_danweizu[132]=YDWEGetUnitsInRangeOfLocAllNull(400.00 , udg_Dian[157])
endif
endif
call ForGroupBJ(udg_danweizu[132], function Trig_judu2Func001Func012Func015A)
call DestroyGroup(udg_danweizu[132])
call ForGroupBJ(udg_danweizu[143], function Trig_judu2Func001Func012Func017A)
if ( ( udg_zhengshu[138] <= 50 ) ) then
call ForGroupBJ(udg_danweizu[133], function Trig_judu2Func001Func012Func018Func001A)
else
if ( ( udg_zhengshu[138] <= 100 ) ) then
if ( ( udg_zhengshu[138] == 100 ) ) then
call ForGroupBJ(udg_danweizu[133], function Trig_judu2Func001Func012Func018Func002Func001Func003A)
call GroupClear(udg_danweizu2[133])
call SetUnitTimeScale(udg_danwei2[133], 1.00)
call KillUnit(udg_danwei2[133])
else
call ForGroupBJ(udg_danweizu[133], function Trig_judu2Func001Func012Func018Func002Func001Func001A)
endif
else
if ( ( udg_zhengshu[138] <= 125 ) ) then
if ( ( udg_zhengshu[138] == 110 ) ) then
call PlaySoundAtPointBJ(gg_snd_KeeperOfTheGroveMissileHit3, 100, udg_dian[373], 300.00)
else
endif
else
call RemoveLocation(udg_dian[373])
call ForGroupBJ(udg_danweizu[143], function Trig_judu2Func001Func012Func018Func002Func002Func003A)
call PauseTimer(udg_jishiqi[139])
call GroupClear(udg_danweizu[143])
set udg_danwei[447]=null
call RemoveLocation(udg_dian[374])
call RemoveLocation(udg_Dian[157])
endif
endif
endif
endif
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_judu2 takes nothing returns nothing
set gg_trg_judu2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_judu2, udg_jishiqi[139])
call TriggerAddAction(gg_trg_judu2, function Trig_judu2Actions)
endfunction
function Trig_emeng_1Actions takes nothing returns nothing
set udg_Danwei[86]=GetTriggerUnit()
set udg_Dian[89]=GetUnitLoc(udg_Danwei[86])
set udg_Danwei[37]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[86]), 0x65303649, udg_Dian[89], 270.00)
call SetUnitManaBJ(udg_Danwei[37], 255.00)
call SetUnitColor(udg_Danwei[37], PLAYER_COLOR_YELLOW)
call SetUnitTimeScale(udg_Danwei[37], ( 1.00 / 2.00 ))
call GroupAddUnit(udg_Danweizu[37], udg_Danwei[37])
set udg_Danwei[37]=null
call RemoveLocation(udg_Dian[89])
set udg_Zhengshu[156]=0
set udg_Zhengshu[157]=0
call StartTimerBJ(udg_Times[156], true, 0.10)
set udg_Dian[83]=GetUnitLoc(udg_Danwei[86])
set udg_Danwei[156]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[86]), 0x65303659, udg_Dian[83], 270.00)
call SetUnitVertexColor(udg_Danwei[156], 255, 255, 255, 0)
call RemoveLocation(udg_Dian[83])
call PlaySoundOnUnitBJ(gg_snd_DeathPactTargetBirth101, 100, udg_Danwei[86])
endfunction
function InitTrig_emeng_1 takes nothing returns nothing
set gg_trg_emeng_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_emeng_1 , 3 , 0x41304B34)
call TriggerAddAction(gg_trg_emeng_1, function Trig_emeng_1Actions)
endfunction
function Trig_emeng_1_5Actions takes nothing returns nothing
set udg_Zhengshu[156]=( udg_Zhengshu[156] + 1 )
call SetUnitVertexColor(udg_Danwei[156], 255, 255, 255, ( 20 * udg_Zhengshu[156] ))
set udg_Dian[83]=GetUnitLoc(udg_Danwei[86])
call SetUnitX(udg_Danwei[156], GetLocationX(udg_Dian[83]))
call SetUnitY(udg_Danwei[156], GetLocationY(udg_Dian[83]))
call RemoveLocation(udg_Dian[83])
endfunction
function InitTrig_emeng_1_5 takes nothing returns nothing
set gg_trg_emeng_1_5=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_emeng_1_5, udg_Times[156])
call TriggerAddAction(gg_trg_emeng_1_5, function Trig_emeng_1_5Actions)
endfunction
function Trig_emeng_2Conditions takes nothing returns boolean
return ( ( udg_Zhengshu[156] >= 0 ) )
endfunction
function Trig_emeng_2Func002A takes nothing returns nothing
set udg_Danwei[37]=GetEnumUnit()
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[37])) + 1 ) == ( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[86])) + 1 ) ) ) then
if ( ( udg_Zhengshu[156] >= 19 ) ) then
call SetUnitColor(udg_Danwei[37], PLAYER_COLOR_PURPLE)
else
call SetUnitColor(udg_Danwei[37], PLAYER_COLOR_LIGHT_GRAY)
endif
call SetUnitTimeScale(udg_Danwei[37], 0.00)
call SetUnitManaBJ(udg_Danwei[37], 250.00)
else
endif
set udg_Danwei[37]=null
endfunction
function Trig_emeng_2Func012A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitDeadBJ(udg_danwei2[1]) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_Danwei[86])) == true ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Demon\\DemonBoltImpact\\DemonBoltImpact.mdl", udg_danwei2[1], "origin"))
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_danwei2[1])
call UnitDamageTarget(udg_Danwei[86], udg_danwei2[1], ( ( ( 100.00 + ( 1.00 * I2R(GetHeroInt(udg_Danwei[86], true)) ) ) / 1.00 ) * 1.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_emeng_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call PauseTimer(udg_Times[156])
call ForGroupBJ(udg_Danweizu[37], function Trig_emeng_2Func002A)
call StartTimerBJ(udg_Times[157], true, 0.04)
call KillUnit(udg_Danwei[156])
set udg_Dian[83]=GetUnitLoc(udg_Danwei[86])
set udg_Danwei[156]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[86]), 0x65303757, udg_Dian[83], 270.00)
call SetUnitTimeScale(udg_Danwei[156], 0.50)
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[86]), 0x65303130, udg_Dian[83], 0)
if ( ( udg_Zhengshu[156] >= 19 ) ) then
set udg_Zhengshu[156]=- 1
call UnitAddAbility(udg_Danwei[92], 0x41303033)
else
set udg_Zhengshu[156]=- 2
call UnitAddAbility(udg_Danwei[92], 0x41303551)
call SetUnitVertexColor(udg_Danwei[156], 255, 255, 255, 100)
endif
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
set udg_Danweizu[156]=YDWEGetUnitsInRangeOfLocAllNull(700.00 , udg_Dian[83])
call ForGroupBJ(udg_Danweizu[156], function Trig_emeng_2Func012A)
set udg_Danwei[92]=null
call DestroyGroup(udg_Danweizu[156])
call RemoveLocation(udg_Dian[83])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_emeng_2 takes nothing returns nothing
set gg_trg_emeng_2=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_emeng_2 , 5 , 0x41304B34)
call s__Event_AnyUnitSkill(gg_trg_emeng_2 , 4 , 0x41304B34)
call TriggerAddCondition(gg_trg_emeng_2, Condition(function Trig_emeng_2Conditions))
call TriggerAddAction(gg_trg_emeng_2, function Trig_emeng_2Actions)
endfunction
function Trig_emeng_2_5Func001Func005Func005A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitDeadBJ(udg_danwei2[1]) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_Danwei[86])) == true ) ) then
if ( ( GetRandomInt(1, 7) == 1 ) ) then
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Undead\\UndeadDissipate\\UndeadDissipate.mdl", udg_danwei2[1], "origin"))
else
endif
call UnitDamageTarget(udg_Danwei[86], udg_danwei2[1], ( ( ( 500.00 + ( 4.00 * I2R(GetHeroInt(udg_Danwei[86], true)) ) ) / 100.00 ) * 1.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_emeng_2_5Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_Zhengshu[157] < 100 ) ) then
set udg_Zhengshu[157]=( udg_Zhengshu[157] + 1 )
if ( ( ( udg_Zhengshu[156] == - 1 ) or ( ( I2R(udg_Zhengshu[157]) / 2.00 ) == I2R(( udg_Zhengshu[157] / 2 )) ) ) ) then
set udg_Dian[83]=GetUnitLoc(udg_Danwei[156])
if ( ( udg_Zhengshu[157] <= 25 ) ) then
set udg_Dian[86]=PolarProjectionBJ(udg_Dian[83], ( 100.00 + ( 25.00 * I2R(udg_Zhengshu[157]) ) ), ( 0.00 + ( 1.00 * ( 20.00 * I2R(udg_Zhengshu[157]) ) ) ))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Undead\\UndeadDissipate\\UndeadDissipate.mdl", udg_Dian[86]))
call RemoveLocation(udg_Dian[86])
set udg_Dian[86]=PolarProjectionBJ(udg_Dian[83], ( 100.00 + ( 25.00 * I2R(udg_Zhengshu[157]) ) ), ( 180.00 + ( 1.00 * ( 20.00 * I2R(udg_Zhengshu[157]) ) ) ))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Undead\\UndeadDissipate\\UndeadDissipate.mdl", udg_Dian[86]))
call RemoveLocation(udg_Dian[86])
else
set udg_Dian[86]=PolarProjectionBJ(udg_Dian[83], GetRandomReal(0, 600.00), ( 0.00 + ( 1.00 * ( 20.00 * I2R(udg_Zhengshu[157]) ) ) ))
call DestroyEffect(AddSpecialEffectLoc("Objects\\Spawnmodels\\Undead\\UndeadDissipate\\UndeadDissipate.mdl", udg_Dian[86]))
call RemoveLocation(udg_Dian[86])
endif
set udg_Danweizu[156]=YDWEGetUnitsInRangeOfLocAllNull(700.00 , udg_Dian[83])
call ForGroupBJ(udg_Danweizu[156], function Trig_emeng_2_5Func001Func005Func005A)
call DestroyGroup(udg_Danweizu[156])
call RemoveLocation(udg_Dian[83])
else
endif
else
call KillUnit(udg_Danwei[156])
call PauseTimer(udg_Times[157])
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_emeng_2_5 takes nothing returns nothing
set gg_trg_emeng_2_5=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_emeng_2_5, udg_Times[157])
call TriggerAddAction(gg_trg_emeng_2_5, function Trig_emeng_2_5Actions)
endfunction
function Trig_hengkan_1Func002A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
call UnitRemoveAbility(udg_danwei2[1], 0x4130484C)
call UnitRemoveBuffBJ(0x42303242, udg_danwei2[1])
set udg_danwei2[1]=null
endfunction
function Trig_hengkan_1Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_Zhengshu[118] == 0 ) ) then
call SetUnitManaBJ(udg_Danwei[93], ( GetUnitState(udg_Danwei[93], UNIT_STATE_MANA) + ( 35.00 + ( 5.00 * I2R(GetUnitAbilityLevel(udg_Danwei[93], 0x41304B51)) ) ) ))
else
endif
call ForGroupBJ(udg_Danweizu[98], function Trig_hengkan_1Func002A)
call PauseTimer(udg_Times[93])
call AddUnitAnimationProperties(udg_Danwei[93], "spin", false)
call SetUnitTurnSpeed(udg_Danwei[93], GetUnitDefaultTurnSpeed(udg_Danwei[93]))
set udg_Zhengshu[93]=0
set udg_Danwei[89]=GetTriggerUnit()
set udg_Danwei[90]=GetSpellTargetUnit()
call SetUnitAnimationByIndex(udg_Danwei[89], 6)
set udg_Dian[89]=GetUnitLoc(udg_Danwei[89])
set udg_Dian[90]=GetUnitLoc(udg_Danwei[90])
set udg_Zhengshu[89]=10
set udg_Zhengshu[90]=- 1
set udg_Shishu[89]=( DistanceBetweenPoints(udg_Dian[89], udg_Dian[90]) - 100.00 )
set udg_Shishu[90]=AngleBetweenPoints(udg_Dian[89], udg_Dian[90])
call RemoveLocation(udg_Dian[89])
call RemoveLocation(udg_Dian[90])
call StartTimerBJ(udg_Times[89], true, 0.03)
call StartTimerBJ(udg_Times[90], false, 0.00)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_hengkan_1 takes nothing returns nothing
set gg_trg_hengkan_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_hengkan_1 , 3 , 0x41304B4D)
call TriggerAddAction(gg_trg_hengkan_1, function Trig_hengkan_1Actions)
endfunction
function Trig_hengkan_2Actions takes nothing returns nothing
if ( ( IsUnitPausedBJ(udg_Danwei[89]) == false ) ) then
if ( ( IsUnitType(udg_Danwei[89], UNIT_TYPE_DEAD) == false ) and ( udg_Zhengshu[89] > 0 ) ) then
set udg_Zhengshu[89]=( udg_Zhengshu[89] - 1 )
set udg_Dian[89]=GetUnitLoc(udg_Danwei[89])
set udg_Dian[90]=PolarProjectionBJ(udg_Dian[89], ( udg_Shishu[89] * 0.10 ), udg_Shishu[90])
if ( ( IsTerrainPathableBJ(udg_Dian[89], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_Danwei[89], GetLocationX(udg_Dian[90]))
call SetUnitY(udg_Danwei[89], GetLocationY(udg_Dian[90]))
else
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\LordofFlameMissile\\LordofFlameMissile.mdl", udg_Danwei[89], "weapon"))
call RemoveLocation(udg_Dian[89])
call RemoveLocation(udg_Dian[90])
else
if ( ( udg_Zhengshu[90] == - 1 ) and ( IsUnitType(udg_Danwei[89], UNIT_TYPE_DEAD) == false ) ) then
set udg_Dian[89]=GetUnitLoc(udg_Danwei[89])
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl", udg_Danwei[90], "chest"))
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", udg_Danwei[90], "chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\LavaSpawnMissile\\LavaSpawnBirthMissile.mdl", udg_Danwei[90], "chest"))
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", udg_Danwei[90], "chest"))
call UnitDamageTarget(udg_Danwei[89], udg_Danwei[90], ( ( ( ( 0.00 + ( 30.00 * I2R(GetUnitAbilityLevel(udg_Danwei[89], 0x41304B4D)) ) ) + ( 1.50 * I2R(GetHeroStr(udg_Danwei[89], true)) ) ) * 1.00 ) * 1.00 ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_HEAVY_SLICE)
set udg_Zhengshu[90]=( 75 + ( 125 - R2I(( GetUnitLifePercent(udg_Danwei[90]) * 1.25 )) ) )
call UnitAddAbility(udg_Danwei[90], 0x41304757)
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[89]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304236)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_Danwei[90])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
else
endif
if ( ( IsUnitType(udg_Danwei[90], UNIT_TYPE_DEAD) == false ) and ( udg_Zhengshu[90] > 0 ) ) then
set udg_Zhengshu[90]=( udg_Zhengshu[90] - 1 )
call SetUnitLifeBJ(udg_Danwei[90], RMaxBJ(( GetUnitState(udg_Danwei[90], UNIT_STATE_LIFE) - ( ( GetUnitState(udg_Danwei[90], UNIT_STATE_LIFE) * 0.03 ) * 0.03 ) ), 1.00))
if ( ( ( I2R(udg_Zhengshu[90]) / 10.00 ) == I2R(( udg_Zhengshu[90] / 10 )) ) and ( udg_Zhengshu[90] > 25 ) ) then
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl", udg_Danwei[90], "chest"))
else
endif
else
call PauseTimer(udg_Times[89])
call UnitRemoveAbility(udg_Danwei[90], 0x41304757)
call UnitRemoveBuffBJ(0x42303255, udg_Danwei[90])
endif
endif
else
endif
endfunction
function InitTrig_hengkan_2 takes nothing returns nothing
set gg_trg_hengkan_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_hengkan_2, udg_Times[89])
call TriggerAddAction(gg_trg_hengkan_2, function Trig_hengkan_2Actions)
endfunction
function Trig_hengkan_3Actions takes nothing returns nothing
set udg_Dian[89]=GetUnitLoc(udg_Danwei[89])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[89]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304B4F)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_Danwei[89])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
endfunction
function InitTrig_hengkan_3 takes nothing returns nothing
set gg_trg_hengkan_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_hengkan_3, udg_Times[90])
call TriggerAddAction(gg_trg_hengkan_3, function Trig_hengkan_3Actions)
endfunction
function Trig_huaji_1Func002A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
call UnitRemoveAbility(udg_danwei2[1], 0x4130484C)
call UnitRemoveBuffBJ(0x42303242, udg_danwei2[1])
set udg_danwei2[1]=null
endfunction
function Trig_huaji_1Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_Zhengshu[118] == 0 ) ) then
call SetUnitManaBJ(udg_Danwei[93], ( GetUnitState(udg_Danwei[93], UNIT_STATE_MANA) + ( 35.00 + ( 5.00 * I2R(GetUnitAbilityLevel(udg_Danwei[93], 0x41304B51)) ) ) ))
else
endif
call ForGroupBJ(udg_Danweizu[98], function Trig_huaji_1Func002A)
call PauseTimer(udg_Times[93])
call AddUnitAnimationProperties(udg_Danwei[93], "spin", false)
call SetUnitTurnSpeed(udg_Danwei[93], GetUnitDefaultTurnSpeed(udg_Danwei[93]))
set udg_Zhengshu[93]=0
set udg_Danwei[91]=GetTriggerUnit()
call SetUnitAnimationByIndex(udg_Danwei[91], 8)
set udg_Dian[91]=GetUnitLoc(udg_Danwei[91])
if ( ( GetSpellTargetUnit() != null ) ) then
set udg_Dian[92]=GetUnitLoc(GetSpellTargetUnit())
else
set udg_Dian[92]=GetSpellTargetLoc()
endif
set udg_Zhengshu[91]=15
set udg_Shishu[91]=( 375.00 + ( 25.00 * I2R(GetUnitAbilityLevel(udg_Danwei[91], 0x41304B4E)) ) )
set udg_Shishu[92]=AngleBetweenPoints(udg_Dian[91], udg_Dian[92])
call RemoveLocation(udg_Dian[91])
call RemoveLocation(udg_Dian[92])
set udg_Danweizu[92]=CreateGroup()
call StartTimerBJ(udg_Times[91], true, 0.04)
call StartTimerBJ(udg_Times[92], false, 0.00)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_huaji_1 takes nothing returns nothing
set gg_trg_huaji_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_huaji_1 , 3 , 0x41304B4E)
call TriggerAddAction(gg_trg_huaji_1, function Trig_huaji_1Actions)
endfunction
function Trig_huaji_2Func001Func001Func004Func005Func004A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitDeadBJ(udg_danwei2[1]) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_Danwei[91])) == true ) ) then
if ( ( IsUnitInGroup(udg_danwei2[1], udg_Danweizu[92]) == false ) ) then
call UnitDamageTarget(udg_Danwei[91], udg_danwei2[1], ( ( ( ( 0.00 + ( 35.00 * I2R(GetUnitAbilityLevel(udg_Danwei[91], 0x41304B4E)) ) ) + ( 1.20 * I2R(GetHeroStr(udg_Danwei[91], true)) ) ) * 1.00 ) * 1.00 ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_LIGHT_SLICE)
call GroupAddUnit(udg_Danweizu[92], udg_danwei2[1])
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl", udg_danwei2[1], "chest"))
if ( ( IsTerrainPathableBJ(udg_Dian[91], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_Dian[91]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_Dian[91]))
else
endif
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[91]), 0x65303130, udg_Dian[91], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41303935)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "slow" , udg_danwei2[1])
set udg_Danwei[92]=null
else
endif
set udg_Dian[89]=GetUnitLoc(udg_danwei2[1])
set udg_Dian[90]=PolarProjectionBJ(udg_Dian[89], ( ( 12.50 + ( 3.50 * I2R(udg_Zhengshu[91]) ) ) + ( 1.50 * I2R(GetUnitAbilityLevel(udg_Danwei[91], 0x41304B4E)) ) ), ( udg_Shishu[92] + 180.00 ))
if ( ( IsTerrainPathableBJ(udg_Dian[90], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_Dian[90]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_Dian[90]))
else
endif
call RemoveLocation(udg_Dian[89])
call RemoveLocation(udg_Dian[90])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_huaji_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( IsUnitPausedBJ(udg_Danwei[91]) == false ) ) then
if ( ( IsUnitType(udg_Danwei[91], UNIT_TYPE_DEAD) == false ) ) then
if ( ( udg_Zhengshu[91] > 0 ) ) then
set udg_Zhengshu[91]=( udg_Zhengshu[91] - 1 )
set udg_Dian[91]=GetUnitLoc(udg_Danwei[91])
if ( ( udg_Zhengshu[91] >= 9 ) ) then
set udg_Dian[92]=PolarProjectionBJ(udg_Dian[91], ( udg_Shishu[91] / 6.00 ), udg_Shishu[92])
else
set udg_Dian[92]=PolarProjectionBJ(udg_Dian[91], ( udg_Shishu[91] / 9.00 ), ( udg_Shishu[92] + 180.00 ))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Weapons\\BloodElfSpellThiefMISSILE\\BloodElfSpellThiefMISSILE.mdl", udg_Dian[91]))
set udg_Danweizu[91]=YDWEGetUnitsInRangeOfLocAllNull(150.00 , udg_Dian[91])
call ForGroupBJ(udg_Danweizu[91], function Trig_huaji_2Func001Func001Func004Func005Func004A)
call DestroyGroup(udg_Danweizu[91])
endif
if ( ( IsTerrainPathableBJ(udg_Dian[92], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_Danwei[91], GetLocationX(udg_Dian[92]))
call SetUnitY(udg_Danwei[91], GetLocationY(udg_Dian[92]))
else
endif
call RemoveLocation(udg_Dian[91])
call RemoveLocation(udg_Dian[92])
else
call PauseTimer(udg_Times[91])
call DestroyGroup(udg_Danweizu[92])
endif
else
call PauseTimer(udg_Times[91])
call DestroyGroup(udg_Danweizu[92])
endif
else
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_huaji_2 takes nothing returns nothing
set gg_trg_huaji_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_huaji_2, udg_Times[91])
call TriggerAddAction(gg_trg_huaji_2, function Trig_huaji_2Actions)
endfunction
function Trig_huaji_3Actions takes nothing returns nothing
set udg_Dian[89]=GetUnitLoc(udg_Danwei[91])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[91]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304B4F)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_Danwei[91])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
endfunction
function InitTrig_huaji_3 takes nothing returns nothing
set gg_trg_huaji_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_huaji_3, udg_Times[92])
call TriggerAddAction(gg_trg_huaji_3, function Trig_huaji_3Actions)
endfunction
function Trig_hengsao_1Actions takes nothing returns nothing
set udg_Danwei[93]=GetTriggerUnit()
call AddUnitAnimationProperties(udg_Danwei[93], "spin", true)
call SetUnitTurnSpeed(udg_Danwei[93], 0.04)
set udg_Zhengshu[93]=100
set udg_Zhengshu[98]=10
set udg_Zhengshu[118]=0
call StartTimerBJ(udg_Times[93], true, 0.03)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_Danwei[93]), 0x41304B51, false)
call UnitAddAbility(udg_Danwei[93], 0x41304A38)
if ( ( GetTriggerExecCount(GetTriggeringTrigger()) == 1 ) ) then
call TriggerRegisterUnitEvent(gg_trg_tiaokan_4, udg_Danwei[93], EVENT_UNIT_ISSUED_ORDER)
call TriggerRegisterUnitEvent(gg_trg_tiaokan_4, udg_Danwei[93], EVENT_UNIT_ISSUED_POINT_ORDER)
call TriggerRegisterUnitEvent(gg_trg_tiaokan_4, udg_Danwei[93], EVENT_UNIT_ISSUED_TARGET_ORDER)
else
endif
call EnableTrigger(gg_trg_tiaokan_4)
call StartTimerBJ(udg_Times[98], false, 0.00)
endfunction
function InitTrig_hengsao_1 takes nothing returns nothing
set gg_trg_hengsao_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_hengsao_1 , 3 , 0x41304B51)
call TriggerAddAction(gg_trg_hengsao_1, function Trig_hengsao_1Actions)
endfunction
function Trig_hengsao_2Func001Func001Func002A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
call UnitRemoveAbility(udg_danwei2[1], 0x4130484C)
call UnitRemoveBuffBJ(0x42303242, udg_danwei2[1])
set udg_danwei2[1]=null
endfunction
function Trig_hengsao_2Func001Func001Func015Func002A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
call UnitRemoveAbility(udg_danwei2[1], 0x4130484C)
call UnitRemoveBuffBJ(0x42303242, udg_danwei2[1])
set udg_danwei2[1]=null
endfunction
function Trig_hengsao_2Func001Func001Func019A takes nothing returns nothing
set udg_Dian[91]=GetDestructableLoc(GetEnumDestructable())
if ( ( GetDestructableTypeId(GetEnumDestructable()) != 0x59543131 ) and ( IsDestructableDeadBJ(GetEnumDestructable()) == false ) and ( DistanceBetweenPoints(udg_Dian[93], udg_Dian[91]) <= 175.00 ) ) then
call RemoveLocation(udg_Dian[94])
set udg_Dian[94]=GetUnitLoc(udg_Danwei[93])
else
endif
call RemoveLocation(udg_Dian[91])
endfunction
function Trig_hengsao_2Func001Func001Func025A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitDeadBJ(udg_danwei2[1]) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_Danwei[93])) == true ) ) then
if ( ( IsUnitInGroup(udg_danwei2[1], udg_Danweizu[98]) == false ) ) then
set udg_Zhengshu[118]=( udg_Zhengshu[118] + 1 )
call UnitAddAbility(udg_danwei2[1], 0x4130484C)
call UnitDamageTarget(udg_Danwei[93], udg_danwei2[1], ( ( ( ( 0.00 + ( 20.00 * I2R(GetUnitAbilityLevel(udg_Danwei[93], 0x41304B51)) ) ) + ( 0.40 * I2R(GetHeroStr(udg_Danwei[93], true)) ) ) * 1.00 ) * 1.00 ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_HEAVY_CHOP)
call GroupAddUnit(udg_Danweizu[98], udg_danwei2[1])
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl", udg_danwei2[1], "chest"))
else
endif
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_hengsao_2Func001Func001Func027A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
set udg_Dian[89]=GetUnitLoc(udg_danwei2[1])
set udg_Dian[90]=PolarProjectionBJ(udg_Dian[89], ( 12.00 + ( 1.00 * I2R(udg_Zhengshu[98]) ) ), GetUnitFacing(udg_Danwei[93]))
if ( ( ( I2R(udg_Zhengshu[98]) / 2.00 ) == I2R(( udg_Zhengshu[98] / 2 )) ) ) then
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl", udg_Dian[89]))
else
endif
if ( ( IsTerrainPathableBJ(udg_Dian[90], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_danwei2[1], GetLocationX(udg_Dian[90]))
call SetUnitY(udg_danwei2[1], GetLocationY(udg_Dian[90]))
else
endif
call RemoveLocation(udg_Dian[89])
call RemoveLocation(udg_Dian[90])
set udg_danwei2[1]=null
endfunction
function Trig_hengsao_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( IsUnitPausedBJ(udg_Danwei[93]) == false ) ) then
if ( ( IsUnitType(udg_Danwei[93], UNIT_TYPE_DEAD) == false ) and ( UnitHasBuffBJ(udg_Danwei[93], 0x42303250) == true ) and ( ( UnitHasBuffBJ(udg_Danwei[93], 0x42303256) == true ) or ( ( UnitHasBuffBJ(udg_Danwei[93], 0x4253544E) == false ) and ( UnitHasBuffBJ(udg_Danwei[93], 0x42505345) == false ) ) ) and ( udg_Zhengshu[93] > 0 ) ) then
set udg_Zhengshu[93]=( udg_Zhengshu[93] - 1 )
if ( ( udg_Zhengshu[98] > 0 ) ) then
set udg_Zhengshu[98]=( udg_Zhengshu[98] - 1 )
else
set udg_Zhengshu[98]=10
call ForGroupBJ(udg_Danweizu[98], function Trig_hengsao_2Func001Func001Func015Func002A)
call GroupClear(udg_Danweizu[98])
endif
set udg_Dian[93]=GetUnitLoc(udg_Danwei[93])
set udg_Dian[94]=PolarProjectionBJ(udg_Dian[93], 15.00, GetUnitFacing(udg_Danwei[93]))
set udg_quyu[0]=RectFromCenterSizeBJ(udg_Dian[94], 200.00, 200.00)
call EnumDestructablesInRectAll(udg_quyu[0], function Trig_hengsao_2Func001Func001Func019A)
call RemoveRect(udg_quyu[0])
if ( ( IsTerrainPathableBJ(udg_Dian[94], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_Danwei[93], GetLocationX(udg_Dian[94]))
call SetUnitY(udg_Danwei[93], GetLocationY(udg_Dian[94]))
else
endif
call RemoveLocation(udg_Dian[94])
set udg_Dian[94]=PolarProjectionBJ(udg_Dian[93], 0.00, GetUnitFacing(udg_Danwei[93]))
set udg_Danweizu[91]=YDWEGetUnitsInRangeOfLocAllNull(150.00 , udg_Dian[94])
call ForGroupBJ(udg_Danweizu[91], function Trig_hengsao_2Func001Func001Func025A)
call DestroyGroup(udg_Danweizu[91])
call ForGroupBJ(udg_Danweizu[98], function Trig_hengsao_2Func001Func001Func027A)
call RemoveLocation(udg_Dian[93])
call RemoveLocation(udg_Dian[94])
else
if ( ( udg_Zhengshu[118] == 0 ) ) then
call SetUnitManaBJ(udg_Danwei[93], ( GetUnitState(udg_Danwei[93], UNIT_STATE_MANA) + ( 35.00 + ( 5.00 * I2R(GetUnitAbilityLevel(udg_Danwei[93], 0x41304B51)) ) ) ))
else
endif
call ForGroupBJ(udg_Danweizu[98], function Trig_hengsao_2Func001Func001Func002A)
call DisableTrigger(gg_trg_tiaokan_4)
call PauseTimer(udg_Times[93])
call AddUnitAnimationProperties(udg_Danwei[93], "spin", false)
call SetUnitTurnSpeed(udg_Danwei[93], GetUnitDefaultTurnSpeed(udg_Danwei[93]))
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_Danwei[93]), 0x41304B51, true)
call UnitRemoveAbility(udg_Danwei[93], 0x41304A38)
call UnitRemoveBuffBJ(0x42303250, udg_Danwei[93])
endif
else
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_hengsao_2 takes nothing returns nothing
set gg_trg_hengsao_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_hengsao_2, udg_Times[93])
call TriggerAddAction(gg_trg_hengsao_2, function Trig_hengsao_2Actions)
endfunction
function Trig_hengsao_3Actions takes nothing returns nothing
set udg_Dian[89]=GetUnitLoc(udg_Danwei[93])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[93]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41305148)
call s__Unit_IssuePointOrderLocMU(udg_Danwei[92] , "silence" , udg_Dian[89])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
endfunction
function InitTrig_hengsao_3 takes nothing returns nothing
set gg_trg_hengsao_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_hengsao_3, udg_Times[98])
call TriggerAddAction(gg_trg_hengsao_3, function Trig_hengsao_3Actions)
endfunction
function Trig_tiaokan_1Actions takes nothing returns nothing
call DisableTrigger(gg_trg_tiaokan_4)
set udg_Danwei[94]=GetTriggerUnit()
call SetUnitAnimationByIndex(udg_Danwei[94], 4)
set udg_Dian[94]=GetUnitLoc(udg_Danwei[94])
set udg_Dian[95]=GetSpellTargetLoc()
set udg_Zhengshu[94]=25
set udg_Shishu[94]=( DistanceBetweenPoints(udg_Dian[94], udg_Dian[95]) - 160.00 )
set udg_Shishu[95]=AngleBetweenPoints(udg_Dian[94], udg_Dian[95])
call RemoveLocation(udg_Dian[94])
call RemoveLocation(udg_Dian[95])
call StartTimerBJ(udg_Times[94], true, 0.04)
call StartTimerBJ(udg_Times[95], false, 0.00)
call StartTimerBJ(udg_Times[99], false, 40.00)
endfunction
function InitTrig_tiaokan_1 takes nothing returns nothing
set gg_trg_tiaokan_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_tiaokan_1 , 3 , 0x41304A38)
call TriggerAddAction(gg_trg_tiaokan_1, function Trig_tiaokan_1Actions)
endfunction
function Trig_tiaokan_2Func001Func001Func004Func009A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitDeadBJ(udg_danwei2[1]) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_Danwei[94])) == true ) ) then
call UnitDamageTarget(udg_Danwei[94], udg_danwei2[1], ( ( ( ( 25.00 + ( 125.00 * I2R(GetUnitAbilityLevel(udg_Danwei[94], 0x41304B51)) ) ) + ( 2.00 * I2R(GetHeroStr(udg_Danwei[94], true)) ) ) * 1.00 ) * 1.00 ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_danwei2[1])
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl", udg_danwei2[1], "chest"))
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_tiaokan_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( IsUnitPausedBJ(udg_Danwei[94]) == false ) ) then
if ( ( IsUnitType(udg_Danwei[94], UNIT_TYPE_DEAD) == false ) ) then
if ( ( udg_Zhengshu[94] > 0 ) ) then
set udg_Zhengshu[94]=( udg_Zhengshu[94] - 1 )
set udg_Dian[94]=GetUnitLoc(udg_Danwei[94])
set udg_Dian[95]=PolarProjectionBJ(udg_Dian[94], ( udg_Shishu[94] / 25.00 ), udg_Shishu[95])
if ( ( IsTerrainPathableBJ(udg_Dian[95], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_Danwei[94], GetLocationX(udg_Dian[95]))
call SetUnitY(udg_Danwei[94], GetLocationY(udg_Dian[95]))
else
endif
call RemoveLocation(udg_Dian[94])
call RemoveLocation(udg_Dian[95])
else
set udg_Dian[94]=GetUnitLoc(udg_Danwei[94])
set udg_Dian[95]=PolarProjectionBJ(udg_Dian[94], 160.00, GetUnitFacing(udg_Danwei[94]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl", udg_Dian[95]))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Other\\Volcano\\VolcanoMissile.mdl", udg_Dian[95]))
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[94]), 0x65303130, udg_Dian[95], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304449)
set udg_Danweizu[91]=YDWEGetUnitsInRangeOfLocAllNull(300.00 , udg_Dian[95])
call ForGroupBJ(udg_Danweizu[91], function Trig_tiaokan_2Func001Func001Func004Func009A)
call DestroyGroup(udg_Danweizu[91])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[94])
call RemoveLocation(udg_Dian[94])
call PauseTimer(udg_Times[94])
call UnitRemoveBuffBJ(0x42303250, udg_Danwei[93])
endif
else
call PauseTimer(udg_Times[94])
call UnitRemoveBuffBJ(0x42303250, udg_Danwei[93])
endif
else
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_tiaokan_2 takes nothing returns nothing
set gg_trg_tiaokan_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_tiaokan_2, udg_Times[94])
call TriggerAddAction(gg_trg_tiaokan_2, function Trig_tiaokan_2Actions)
endfunction
function Trig_tiaokan_3Actions takes nothing returns nothing
set udg_Dian[89]=GetUnitLoc(udg_Danwei[94])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[94]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304B52)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_Danwei[94])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
endfunction
function InitTrig_tiaokan_3 takes nothing returns nothing
set gg_trg_tiaokan_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_tiaokan_3, udg_Times[95])
call TriggerAddAction(gg_trg_tiaokan_3, function Trig_tiaokan_3Actions)
endfunction
function Trig_tiaokan_4Func001Func002Func001Func002A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
call UnitRemoveAbility(udg_danwei2[1], 0x4130484C)
call UnitRemoveBuffBJ(0x42303242, udg_danwei2[1])
set udg_danwei2[1]=null
endfunction
function Trig_tiaokan_4Func001Func004A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
call UnitRemoveAbility(udg_danwei2[1], 0x4130484C)
call UnitRemoveBuffBJ(0x42303242, udg_danwei2[1])
set udg_danwei2[1]=null
endfunction
function Trig_tiaokan_4Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( GetIssuedOrderIdBJ() == String2OrderIdBJ("breathoffire") ) ) then
if ( ( udg_Zhengshu[118] == 0 ) ) then
call SetUnitManaBJ(udg_Danwei[93], ( GetUnitState(udg_Danwei[93], UNIT_STATE_MANA) + ( 35.00 + ( 5.00 * I2R(GetUnitAbilityLevel(udg_Danwei[93], 0x41304B51)) ) ) ))
else
endif
call ForGroupBJ(udg_Danweizu[98], function Trig_tiaokan_4Func001Func004A)
call PauseTimer(udg_Times[93])
call AddUnitAnimationProperties(udg_Danwei[93], "spin", false)
call SetUnitTurnSpeed(udg_Danwei[93], GetUnitDefaultTurnSpeed(udg_Danwei[93]))
set udg_Zhengshu[93]=0
else
if ( ( udg_Zhengshu[93] == 0 ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_Danwei[93]), 0x41304B51, true)
call UnitRemoveAbility(udg_Danwei[93], 0x41304A38)
call UnitRemoveBuffBJ(0x42303250, udg_Danwei[93])
else
if ( ( GetIssuedOrderIdBJ() == String2OrderIdBJ("holdposition") ) ) then
if ( ( udg_Zhengshu[118] == 0 ) ) then
call SetUnitManaBJ(udg_Danwei[93], ( GetUnitState(udg_Danwei[93], UNIT_STATE_MANA) + ( 35.00 + ( 5.00 * I2R(GetUnitAbilityLevel(udg_Danwei[93], 0x41304B51)) ) ) ))
else
endif
call ForGroupBJ(udg_Danweizu[98], function Trig_tiaokan_4Func001Func002Func001Func002A)
call DisableTrigger(gg_trg_tiaokan_4)
call PauseTimer(udg_Times[93])
call AddUnitAnimationProperties(udg_Danwei[93], "spin", false)
call SetUnitTurnSpeed(udg_Danwei[93], GetUnitDefaultTurnSpeed(udg_Danwei[93]))
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_Danwei[93]), 0x41304B51, true)
call UnitRemoveAbility(udg_Danwei[93], 0x41304A38)
call UnitRemoveBuffBJ(0x42303250, udg_Danwei[93])
else
endif
endif
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_tiaokan_4 takes nothing returns nothing
set gg_trg_tiaokan_4=CreateTrigger()
call DisableTrigger(gg_trg_tiaokan_4)
call TriggerAddAction(gg_trg_tiaokan_4, function Trig_tiaokan_4Actions)
endfunction
function Trig_tiaokan_5Actions takes nothing returns nothing
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_Danwei[93]), 0x41304B51, true)
call UnitRemoveAbility(udg_Danwei[93], 0x41304A38)
endfunction
function InitTrig_tiaokan_5 takes nothing returns nothing
set gg_trg_tiaokan_5=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_tiaokan_5, udg_Times[99])
call TriggerAddAction(gg_trg_tiaokan_5, function Trig_tiaokan_5Actions)
endfunction
function Trig_feifu_1Func002A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
call UnitRemoveAbility(udg_danwei2[1], 0x41305151)
call UnitRemoveBuffBJ(0x42303358, udg_danwei2[1])
set udg_danwei2[1]=null
endfunction
function Trig_feifu_1Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_Zhengshu[118] == 0 ) ) then
call SetUnitManaBJ(udg_Danwei[93], ( GetUnitState(udg_Danwei[93], UNIT_STATE_MANA) + ( 35.00 + ( 5.00 * I2R(GetUnitAbilityLevel(udg_Danwei[93], 0x41304B51)) ) ) ))
else
endif
call ForGroupBJ(udg_Danweizu[98], function Trig_feifu_1Func002A)
call PauseTimer(udg_Times[93])
call AddUnitAnimationProperties(udg_Danwei[93], "spin", false)
call SetUnitTurnSpeed(udg_Danwei[93], GetUnitDefaultTurnSpeed(udg_Danwei[93]))
set udg_Zhengshu[93]=0
set udg_Danwei[96]=GetTriggerUnit()
set udg_Dian[97]=GetSpellTargetLoc()
set udg_Zhengshu[96]=26
set udg_Zhengshu[97]=0
call StartTimerBJ(udg_Times[96], false, 0.50)
call StartTimerBJ(udg_Times[97], false, 0.00)
call SetUnitAnimationByIndex(udg_Danwei[96], 5)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_feifu_1 takes nothing returns nothing
set gg_trg_feifu_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_feifu_1 , 3 , 0x41304B54)
call TriggerAddAction(gg_trg_feifu_1, function Trig_feifu_1Actions)
endfunction
function Trig_feifu_2Func001Func004Func004Func001A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
call UnitRemoveAbility(udg_danwei2[1], 0x41305151)
call UnitRemoveBuffBJ(0x42303358, udg_danwei2[1])
set udg_danwei2[1]=null
endfunction
function Trig_feifu_2Func001Func004Func004Func010A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitDeadBJ(udg_danwei2[1]) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_Danwei[96])) == true ) ) then
if ( ( IsUnitInGroup(udg_danwei2[1], udg_Danweizu[96]) == false ) ) then
call UnitDamageTarget(udg_Danwei[96], udg_danwei2[1], ( ( ( ( 0.00 + ( 20.00 * I2R(GetUnitAbilityLevel(udg_Danwei[96], 0x41304B54)) ) ) + ( 0.60 * I2R(GetHeroStr(udg_Danwei[96], true)) ) ) * ( ( 1 + ( 0.02 * RAbsBJ(I2R(udg_Zhengshu[96])) ) ) * Pow(0.95, I2R(udg_Zhengshu[97])) ) ) * 1.00 ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_LIGHT_SLICE)
call UnitAddAbility(udg_danwei2[1], 0x41305151)
call GroupAddUnit(udg_Danweizu[96], udg_danwei2[1])
call GroupAddUnit(udg_Danweizu[97], udg_danwei2[1])
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl", udg_danwei2[1], "chest"))
set udg_Zhengshu[97]=( udg_Zhengshu[97] + 1 )
else
endif
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_feifu_2Func001Func004Func013A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitDeadBJ(udg_danwei2[1]) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_Danwei[96])) == true ) ) then
if ( ( IsUnitInGroup(udg_danwei2[1], udg_Danweizu[96]) == false ) ) then
call UnitDamageTarget(udg_Danwei[96], udg_danwei2[1], ( ( ( ( 0.00 + ( 20.00 * I2R(GetUnitAbilityLevel(udg_Danwei[96], 0x41304B54)) ) ) + ( 0.60 * I2R(GetHeroStr(udg_Danwei[96], true)) ) ) * ( ( 1 + ( 0.02 * RAbsBJ(I2R(udg_Zhengshu[96])) ) ) * Pow(0.95, I2R(udg_Zhengshu[97])) ) ) * 1.00 ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_LIGHT_SLICE)
call UnitAddAbility(udg_danwei2[1], 0x41305151)
call GroupAddUnit(udg_Danweizu[96], udg_danwei2[1])
call GroupAddUnit(udg_Danweizu[97], udg_danwei2[1])
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl", udg_danwei2[1], "chest"))
set udg_Zhengshu[97]=( udg_Zhengshu[97] + 1 )
else
endif
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_feifu_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_Zhengshu[96] > 25 ) ) then
set udg_Zhengshu[96]=( udg_Zhengshu[96] - 1 )
if ( ( udg_Zhengshu[96] == 25 ) ) then
set udg_Dian[96]=GetUnitLoc(udg_Danwei[96])
set udg_Danwei[97]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[96]), 0x65303731, udg_Dian[96], AngleBetweenPoints(udg_Dian[96], udg_Dian[97]))
set udg_Danwei[98]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[96]), 0x65303732, udg_Dian[96], AngleBetweenPoints(udg_Dian[96], udg_Dian[97]))
call GroupAddUnit(udg_DAZE[0], udg_Danwei[97])
call GroupAddUnit(udg_DAZE[1], udg_Danwei[97])
call SetUnitTimeScale(udg_Danwei[97], 3.00)
call SetUnitTimeScale(udg_Danwei[98], 6.00)
call RemoveLocation(udg_Dian[96])
call RemoveLocation(udg_Dian[97])
call StartTimerBJ(udg_Times[96], true, 0.03)
call StopSoundBJ(gg_snd_StrongDrinkMissile1, false)
call PlaySoundOnUnitBJ(gg_snd_StrongDrinkMissile1, 100, udg_Danwei[96])
else
endif
else
if ( ( udg_Zhengshu[96] > 0 ) ) then
set udg_Zhengshu[96]=( udg_Zhengshu[96] - 1 )
if ( ( udg_Zhengshu[96] == 0 ) ) then
call GroupClear(udg_Danweizu[96])
else
endif
set udg_Dian[93]=GetUnitLoc(udg_Danwei[97])
set udg_Dian[94]=PolarProjectionBJ(udg_Dian[93], ( 3.00 * I2R(udg_Zhengshu[96]) ), GetUnitFacing(udg_Danwei[97]))
if ( ( IsTerrainPathableBJ(udg_Dian[94], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_Danwei[97], GetLocationX(udg_Dian[94]))
call SetUnitY(udg_Danwei[97], GetLocationY(udg_Dian[94]))
call SetUnitX(udg_Danwei[98], GetLocationX(udg_Dian[94]))
call SetUnitY(udg_Danwei[98], GetLocationY(udg_Dian[94]))
else
endif
set udg_Danweizu[91]=YDWEGetUnitsInRangeOfLocAllNull(180.00 , udg_Dian[93])
call ForGroupBJ(udg_Danweizu[91], function Trig_feifu_2Func001Func004Func013A)
call DestroyGroup(udg_Danweizu[91])
call RemoveLocation(udg_Dian[93])
call RemoveLocation(udg_Dian[94])
else
set udg_Zhengshu[96]=( udg_Zhengshu[96] - 1 )
set udg_Dian[95]=GetUnitLoc(udg_Danwei[96])
set udg_Dian[93]=GetUnitLoc(udg_Danwei[97])
if ( ( DistanceBetweenPoints(udg_Dian[95], udg_Dian[93]) >= 100.00 ) ) then
set udg_Dian[94]=PolarProjectionBJ(udg_Dian[93], ( - 2.50 * I2R(udg_Zhengshu[96]) ), AngleBetweenPoints(udg_Dian[93], udg_Dian[95]))
if ( ( IsTerrainPathableBJ(udg_Dian[94], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_Danwei[97], GetLocationX(udg_Dian[94]))
call SetUnitY(udg_Danwei[97], GetLocationY(udg_Dian[94]))
call SetUnitX(udg_Danwei[98], GetLocationX(udg_Dian[94]))
call SetUnitY(udg_Danwei[98], GetLocationY(udg_Dian[94]))
else
endif
set udg_Danweizu[91]=YDWEGetUnitsInRangeOfLocAllNull(180.00 , udg_Dian[93])
call ForGroupBJ(udg_Danweizu[91], function Trig_feifu_2Func001Func004Func004Func010A)
call DestroyGroup(udg_Danweizu[91])
call RemoveLocation(udg_Dian[94])
else
call ForGroupBJ(udg_Danweizu[97], function Trig_feifu_2Func001Func004Func004Func001A)
call GroupClear(udg_Danweizu[96])
call KillUnit(udg_Danwei[97])
call KillUnit(udg_Danwei[98])
call PauseTimer(udg_Times[96])
endif
call RemoveLocation(udg_Dian[95])
call RemoveLocation(udg_Dian[93])
endif
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_feifu_2 takes nothing returns nothing
set gg_trg_feifu_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_feifu_2, udg_Times[96])
call TriggerAddAction(gg_trg_feifu_2, function Trig_feifu_2Actions)
endfunction
function Trig_feifu_3Actions takes nothing returns nothing
set udg_Dian[89]=GetUnitLoc(udg_Danwei[96])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[96]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304B50)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_Danwei[96])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
endfunction
function InitTrig_feifu_3 takes nothing returns nothing
set gg_trg_feifu_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_feifu_3, udg_Times[97])
call TriggerAddAction(gg_trg_feifu_3, function Trig_feifu_3Actions)
endfunction
function Trig_heihua_1Actions takes nothing returns nothing
set udg_Danwei[99]=GetTriggerUnit()
call UnitAddAbility(udg_Danwei[99], 0x41304C33)
call UnitAddAbility(udg_Danwei[99], 0x41304C32)
call UnitAddAbility(udg_Danwei[99], 0x41304C35)
set udg_Zhengshu[99]=400
set udg_Shishu[99]=0.00
call StartTimerBJ(udg_Times[100], true, 0.03)
set udg_piaofuwenzi[5]=CreateTextTag()
call SetTextTagTextBJ(udg_piaofuwenzi[5], ( "狂化：" + R2SW(( I2R(udg_Zhengshu[99]) * 0.03 ), 1, 1) ), 11.00)
call SetTextTagPos(udg_piaofuwenzi[5], ( GetUnitX(udg_Danwei[99]) - 35.00 ), GetUnitY(udg_Danwei[99]), ( s__maphack_GetHeight(udg_Danwei[99]) + 200.00 ))
call SetTextTagColor(udg_piaofuwenzi[5], 255, 0, 150, 255)
call SetTextTagVisibility(udg_piaofuwenzi[5], false)
set udg_wanjiazu[0]=CreateForce()
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ( ( IsUnitAlly(udg_Danwei[99], s__baka_SPlayer(bj_forLoopAIndex - 1)) == true ) ) then
call ForceAddPlayer(udg_wanjiazu[0], s__baka_SPlayer(bj_forLoopAIndex - 1))
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call ShowTextTagForceBJ(true, udg_piaofuwenzi[5], udg_wanjiazu[0])
call DestroyForce(udg_wanjiazu[0])
endfunction
function InitTrig_heihua_1 takes nothing returns nothing
set gg_trg_heihua_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_heihua_1 , 3 , 0x41304C34)
call TriggerAddAction(gg_trg_heihua_1, function Trig_heihua_1Actions)
endfunction
function Trig_heihua_2Actions takes nothing returns nothing
if ( ( IsUnitPausedBJ(udg_Danwei[99]) == false ) ) then
if ( ( IsUnitType(udg_Danwei[99], UNIT_TYPE_DEAD) == false ) and ( udg_Zhengshu[99] > 0 ) ) then
set udg_Zhengshu[99]=( udg_Zhengshu[99] - 1 )
call SetTextTagTextBJ(udg_piaofuwenzi[5], ( "狂化：" + R2SW(( I2R(udg_Zhengshu[99]) * 0.03 ), 1, 1) ), 11.00)
call SetTextTagPos(udg_piaofuwenzi[5], ( GetUnitX(udg_Danwei[99]) - 35.00 ), GetUnitY(udg_Danwei[99]), ( s__maphack_GetHeight(udg_Danwei[99]) + 200.00 ))
call UnitRemoveBuffBJ(0x4253544E, udg_Danwei[99])
call UnitRemoveBuffBJ(0x42505345, udg_Danwei[99])
call UnitRemoveBuffBJ(0x42303132, udg_Danwei[99])
call UnitRemoveBuffBJ(0x4230304A, udg_Danwei[99])
if ( ( UnitHasBuffBJ(udg_Danwei[99], 0x42303250) == false ) ) then
call UnitRemoveBuffsEx(udg_Danwei[99], false, true, false, false, false, false, true)
else
endif
set udg_zhengshuex[0]=R2I(udg_Shishu[99])
set udg_aXUNHUAN[79]=0
loop
exitwhen udg_aXUNHUAN[79] > 11
call UnitRemoveAbility(udg_Danwei[99], udg_attackforce[udg_aXUNHUAN[79]])
set udg_aXUNHUAN[79]=udg_aXUNHUAN[79] + 1
endloop
set udg_aXUNHUAN[78]=0
loop
exitwhen udg_aXUNHUAN[78] > 11
if ( ( udg_zhengshuex[0] >= R2I(Pow(2.00, ( 11.00 - I2R(udg_aXUNHUAN[78]) ))) ) ) then
set udg_zhengshuex[0]=( udg_zhengshuex[0] - R2I(Pow(2.00, ( 11.00 - I2R(udg_aXUNHUAN[78]) ))) )
call UnitAddAbility(udg_Danwei[99], udg_attackforce[( 11 - udg_aXUNHUAN[78] )])
else
endif
set udg_aXUNHUAN[78]=udg_aXUNHUAN[78] + 1
endloop
else
if ( ( udg_Zhengshu[99] == 0 ) ) then
call SetTextTagPermanent(udg_piaofuwenzi[5], false)
call SetTextTagAge(udg_piaofuwenzi[5], 0)
call SetTextTagLifespan(udg_piaofuwenzi[5], 0.25)
call SetTextTagFadepoint(udg_piaofuwenzi[5], 0.10)
call UnitRemoveAbility(udg_Danwei[99], 0x41304C33)
call UnitRemoveAbility(udg_Danwei[99], 0x41304C32)
call UnitRemoveBuffBJ(0x42303256, udg_Danwei[99])
else
endif
set udg_Zhengshu[99]=( udg_Zhengshu[99] - 1 )
if ( ( udg_Zhengshu[99] > - 166 ) ) then
if ( ( udg_Zhengshu[99] == - 100 ) ) then
call UnitRemoveAbility(udg_Danwei[99], 0x41304C35)
else
endif
else
set udg_aXUNHUAN[79]=0
loop
exitwhen udg_aXUNHUAN[79] > 11
call UnitRemoveAbility(udg_Danwei[99], udg_attackforce[udg_aXUNHUAN[79]])
set udg_aXUNHUAN[79]=udg_aXUNHUAN[79] + 1
endloop
call PauseTimer(udg_Times[100])
endif
endif
else
endif
endfunction
function InitTrig_heihua_2 takes nothing returns nothing
set gg_trg_heihua_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_heihua_2, udg_Times[100])
call TriggerAddAction(gg_trg_heihua_2, function Trig_heihua_2Actions)
endfunction
function Trig_caiyansheji_1Actions takes nothing returns nothing
set udg_Danwei[132]=GetTriggerUnit()
set udg_Danwei[133]=GetSpellTargetUnit()
call UnitShareVision(udg_Danwei[133], GetOwningPlayer(udg_Danwei[132]), true)
set udg_Zhengshu[132]=4
call StartTimerBJ(udg_Times[132], false, 0.00)
endfunction
function InitTrig_caiyansheji_1 takes nothing returns nothing
set gg_trg_caiyansheji_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_caiyansheji_1 , 3 , 0x41304D34)
call TriggerAddAction(gg_trg_caiyansheji_1, function Trig_caiyansheji_1Actions)
endfunction
function Trig_caiyansheji_2Func001Func001Func012Func001A takes nothing returns nothing
call UnitAddAbility(GetEnumUnit(), 0x4162756E)
endfunction
function Trig_caiyansheji_2Func001Func001Func012T takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call ForGroupBJ(LoadGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x38601DA8), function Trig_caiyansheji_2Func001Func001Func012Func001A)
call DestroyGroup(LoadGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x38601DA8))
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_caiyansheji_2Func001Func001Func013A takes nothing returns nothing
local integer ydul_i
set udg_Danwei[134]=GetEnumUnit()
if ( ( IsUnitType(udg_Danwei[134], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_Danwei[134], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_Danwei[134], UNIT_TYPE_DEAD) == false ) and ( IsUnitVisible(udg_Danwei[134], GetOwningPlayer(udg_Danwei[132])) == true ) and ( IsUnitEnemy(udg_Danwei[134], GetOwningPlayer(udg_Danwei[132])) == true ) ) then
set udg_Dian[134]=GetUnitLoc(udg_Danwei[134])
set udg_Danwei[135]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[132]), 0x4830304D, udg_Dian[132], AngleBetweenPoints(udg_Dian[132], udg_Dian[134]))
call GroupAddUnit(udg_attack, udg_Danwei[135])
call GroupAddUnit(LoadGroupHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xECE825E7), 0x38601DA8), udg_Danwei[135])
call SetHeroLevelBJ(udg_Danwei[135], 30, false)
call SetHeroAgi(udg_Danwei[135], ( GetHeroAgi(udg_Danwei[132], false) + 0 ), true)
call SetHeroInt(udg_Danwei[135], ( GetHeroInt(udg_Danwei[132], false) + 0 ), true)
set ydul_i=1
loop
exitwhen ydul_i > 6
call UnitAddItemByIdSwapped(GetItemTypeId(UnitItemInSlotBJ(udg_Danwei[132], ydul_i)), udg_Danwei[135])
set ydul_i=ydul_i + 1
endloop
call SetUnitX(udg_Danwei[135], GetLocationX(udg_Dian[132]))
call SetUnitY(udg_Danwei[135], GetLocationY(udg_Dian[132]))
call UnitAddAbility(udg_Danwei[135], 0x416C6F63)
call s__baka_IssueTargetOrderById2(udg_Danwei[135] , 851983 , udg_Danwei[134])
call ShowUnitHide(udg_Danwei[135])
set udg_Danwei[135]=null
call RemoveLocation(udg_Dian[134])
else
call GroupRemoveUnit(udg_Danweizu[132], udg_Danwei[134])
endif
set udg_Danwei[134]=null
endfunction
function Trig_caiyansheji_2Actions takes nothing returns nothing
local timer ydl_timer
local group ydl_group
local unit ydl_unit
local integer ydul_i
local integer ydl_localvar_step=LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76)
set ydl_localvar_step=ydl_localvar_step + 3
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76, ydl_localvar_step)
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xECE825E7, ydl_localvar_step)
if ( ( udg_Zhengshu[132] == 4 ) ) then
set udg_Zhengshu[132]=( udg_Zhengshu[132] - 1 )
set udg_Dian[89]=GetUnitLoc(udg_Danwei[132])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[132]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304B58)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_Danwei[132])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
call StartTimerBJ(udg_Times[132], false, 0.45)
call SetUnitAnimationByIndex(udg_Danwei[132], 6)
else
if ( ( IsUnitPausedBJ(udg_Danwei[132]) == false ) and ( IsUnitType(udg_Danwei[132], UNIT_TYPE_DEAD) == false ) and ( udg_Zhengshu[132] > 0 ) ) then
set udg_Zhengshu[132]=( udg_Zhengshu[132] - 1 )
call StopSoundBJ(gg_snd_ArrowAttack1, false)
call PlaySoundOnUnitBJ(gg_snd_ArrowAttack1, 100, udg_Danwei[132])
call StartTimerBJ(udg_Times[132], false, 0.30)
set udg_Dian[132]=GetUnitLoc(udg_Danwei[132])
set udg_Dian[133]=GetUnitLoc(udg_Danwei[133])
set udg_Danweizu[132]=YDWEGetUnitsInRangeOfLocAllNull(( 50.00 + ( 50.00 * I2R(GetUnitAbilityLevel(udg_Danwei[132], 0x41304D34)) ) ) , udg_Dian[133])
call SaveGroupHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x38601DA8, CreateGroup())
set ydl_timer=CreateTimer()
call SaveGroupHandle(YDHT, GetHandleId(ydl_timer), 0x38601DA8, LoadGroupHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x38601DA8))
call TimerStart(ydl_timer, 1.00, false, function Trig_caiyansheji_2Func001Func001Func012T)
call ForGroupBJ(udg_Danweizu[132], function Trig_caiyansheji_2Func001Func001Func013A)
call DestroyGroup(udg_Danweizu[132])
call RemoveLocation(udg_Dian[132])
call RemoveLocation(udg_Dian[133])
else
call UnitShareVision(udg_Danwei[133], GetOwningPlayer(udg_Danwei[132]), false)
set udg_Zhengshu[132]=0
endif
endif
call FlushChildHashtable(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step)
set ydl_timer=null
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_caiyansheji_2 takes nothing returns nothing
set gg_trg_caiyansheji_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_caiyansheji_2, udg_Times[132])
call TriggerAddAction(gg_trg_caiyansheji_2, function Trig_caiyansheji_2Actions)
endfunction
function Trig_hongzhishi_1Actions takes nothing returns nothing
set udg_Danwei[132]=GetTriggerUnit()
call StartTimerBJ(udg_Times[133], false, 0.00)
set udg_Zhengshu[133]=77
set udg_Shishu[132]=20.00
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_Danwei[132]), 0x41304D35, false)
call UnitAddAbility(udg_Danwei[132], 0x41304D37)
if ( ( GetTriggerExecCount(GetTriggeringTrigger()) == 1 ) ) then
call TriggerRegisterUnitEvent(gg_trg_hongzhishi_4, udg_Danwei[132], EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(gg_trg_hongzhishi_2_5, udg_Danwei[132], EVENT_UNIT_ISSUED_POINT_ORDER)
call TriggerRegisterUnitEvent(gg_trg_hongzhishi_2_6, udg_Danwei[132], EVENT_UNIT_ISSUED_TARGET_ORDER)
call TriggerRegisterUnitEvent(gg_trg_hongzhishi_2_7, udg_Danwei[132], EVENT_UNIT_ISSUED_ORDER)
else
endif
endfunction
function InitTrig_hongzhishi_1 takes nothing returns nothing
set gg_trg_hongzhishi_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_hongzhishi_1 , 3 , 0x41304D35)
call TriggerAddAction(gg_trg_hongzhishi_1, function Trig_hongzhishi_1Actions)
endfunction
function Trig_hongzhishi_2Func001Func001Func019Func016A takes nothing returns nothing
set udg_Danwei[37]=GetEnumUnit()
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[37])) + 1 ) == ( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[132])) + 1 ) ) ) then
if ( ( udg_Zhengshu[133] > 0 ) ) then
call SetUnitColor(udg_Danwei[37], PLAYER_COLOR_LIGHT_GRAY)
else
call SetUnitColor(udg_Danwei[37], PLAYER_COLOR_PINK)
endif
call SetUnitTimeScale(udg_Danwei[37], 0.00)
call SetUnitManaBJ(udg_Danwei[37], 250.00)
else
endif
set udg_Danwei[37]=null
endfunction
function Trig_hongzhishi_2Func001Func001Func019Func031A takes nothing returns nothing
set udg_Danwei[135]=GetEnumUnit()
call s__maphack_SetHeight(udg_Danwei[135] , ( ( 110.00 + ( GetLocationZ(udg_Dian[135]) - GetLocationZ(udg_Dian[136]) ) ) + 0.00 ) , 0.00)
call SetUnitX(udg_Danwei[135], GetLocationX(udg_Dian[136]))
call SetUnitY(udg_Danwei[135], GetLocationY(udg_Dian[136]))
call SetUnitFacing(udg_Danwei[135], GetUnitFacing(udg_Danwei[132]))
set udg_Danwei[135]=null
endfunction
function Trig_hongzhishi_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_Zhengshu[133] == 77 ) ) then
set udg_Zhengshu[133]=( udg_Zhengshu[133] - 1 )
set udg_Dian[89]=GetUnitLoc(udg_Danwei[132])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[132]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41305149)
call IssuePointOrderLoc(udg_Danwei[92], "silence", udg_Dian[89])
call UnitAddAbility(udg_Danwei[92], 0x41304B4F)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_Danwei[132])
set udg_Danwei[92]=null
call SetUnitAnimationByIndex(udg_Danwei[132], 8)
call StartTimerBJ(udg_Times[133], false, 0.60)
call SetUnitTurnSpeed(udg_Danwei[132], 0.00)
call EnableTrigger(gg_trg_hongzhishi_2_5)
call EnableTrigger(gg_trg_hongzhishi_2_6)
call EnableTrigger(gg_trg_hongzhishi_2_7)
call EnableTrigger(gg_trg_hongzhishi_4)
set udg_Danwei[37]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[132]), 0x65303649, udg_Dian[89], 270.00)
call SetUnitManaBJ(udg_Danwei[37], 255.00)
call SetUnitColor(udg_Danwei[37], PLAYER_COLOR_YELLOW)
call SetUnitTimeScale(udg_Danwei[37], ( 1.00 / 3.60 ))
call GroupAddUnit(udg_Danweizu[37], udg_Danwei[37])
set udg_Danwei[37]=null
call RemoveLocation(udg_Dian[89])
else
if ( ( udg_Zhengshu[133] == 76 ) ) then
set udg_Zhengshu[133]=( udg_Zhengshu[133] - 1 )
set udg_Dian[135]=GetUnitLoc(udg_Danwei[132])
set udg_Dian[136]=PolarProjectionBJ(udg_Dian[135], 50.00, GetUnitFacing(udg_Danwei[132]))
set udg_Danwei[136]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[132]), 0x6530374D, udg_Dian[136], GetUnitFacing(udg_Danwei[132]))
call GroupAddUnit(udg_DAZE[0], udg_Danwei[136])
call GroupAddUnit(udg_DAZE[1], udg_Danwei[136])
call s__maphack_SetHeight(udg_Danwei[136] , ( ( 85.00 + ( GetLocationZ(udg_Dian[135]) - GetLocationZ(udg_Dian[136]) ) ) + ( 0.35 * I2R(udg_Zhengshu[133]) ) ) , 0.00)
call SetUnitScale(udg_Danwei[136], 0.20, 0.20, 0.20)
call StartTimerBJ(udg_Times[133], true, 0.04)
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[132]), 0x6530374E, udg_Dian[136], GetUnitFacing(udg_Danwei[132]))
call SetUnitScale(udg_danwei2[1], ( 3.00 - ( 0.04 * I2R(udg_Zhengshu[133]) ) ), ( 3.00 - ( 0.04 * I2R(udg_Zhengshu[133]) ) ), ( 3.00 - ( 0.04 * I2R(udg_Zhengshu[133]) ) ))
call GroupAddUnit(udg_Danweizu[133], udg_danwei2[1])
set udg_danwei2[1]=null
call RemoveLocation(udg_Dian[135])
call RemoveLocation(udg_Dian[136])
set udg_Shishu[133]=GetUnitFacing(udg_Danwei[132])
set udg_Shishu[135]=GetUnitFacing(udg_Danwei[132])
else
if ( ( IsUnitType(udg_Danwei[132], UNIT_TYPE_DEAD) == false ) and ( UnitHasBuffBJ(udg_Danwei[132], 0x42303259) == true ) and ( UnitHasBuffBJ(udg_Danwei[132], 0x42505345) == false ) and ( IsUnitPausedBJ(udg_Danwei[132]) == false ) and ( udg_Zhengshu[133] > 0 ) ) then
set udg_Zhengshu[133]=( udg_Zhengshu[133] - 1 )
set udg_Shishu[132]=( udg_Shishu[132] + 0.40 )
set udg_Shishu[134]=( GetUnitFacing(udg_Danwei[132]) - udg_Shishu[133] )
if ( ( udg_Shishu[134] > 360.00 ) ) then
set udg_Shishu[134]=( udg_Shishu[134] - 360.00 )
else
endif
if ( ( udg_Shishu[134] < 0.00 ) ) then
set udg_Shishu[134]=( udg_Shishu[134] + 360.00 )
else
endif
if ( ( RAbsBJ(udg_Shishu[134]) <= 5.00 ) ) then
set udg_Shishu[135]=udg_Shishu[133]
else
if ( ( udg_Shishu[134] < 180.00 ) ) then
set udg_Shishu[135]=( udg_Shishu[135] - 3.00 )
else
set udg_Shishu[135]=( udg_Shishu[135] + 3.00 )
endif
endif
call SetUnitFacing(udg_Danwei[132], udg_Shishu[135])
set udg_Dian[135]=GetUnitLoc(udg_Danwei[132])
set udg_Dian[136]=PolarProjectionBJ(udg_Dian[135], ( 200.00 - ( 2.00 * I2R(udg_Zhengshu[133]) ) ), GetUnitFacing(udg_Danwei[132]))
call s__maphack_SetHeight(udg_Danwei[136] , ( ( 85.00 + ( GetLocationZ(udg_Dian[135]) - GetLocationZ(udg_Dian[136]) ) ) + ( 0.35 * I2R(udg_Zhengshu[133]) ) ) , 0.00)
call SetUnitScale(udg_Danwei[136], ( 0.90 - ( 0.01 * I2R(udg_Zhengshu[133]) ) ), ( 0.90 - ( 0.01 * I2R(udg_Zhengshu[133]) ) ), ( 0.90 - ( 0.01 * I2R(udg_Zhengshu[133]) ) ))
call SetUnitX(udg_Danwei[136], GetLocationX(udg_Dian[136]))
call SetUnitY(udg_Danwei[136], GetLocationY(udg_Dian[136]))
call SetUnitFacing(udg_Danwei[136], GetUnitFacing(udg_Danwei[132]))
call ForGroupBJ(udg_Danweizu[133], function Trig_hongzhishi_2Func001Func001Func019Func031A)
if ( ( ( I2R(udg_Zhengshu[133]) / 4.00 ) == I2R(( udg_Zhengshu[133] / 4 )) ) ) then
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[132]), 0x6530374E, udg_Dian[136], GetUnitFacing(udg_Danwei[132]))
call SetUnitScale(udg_danwei2[1], ( 3.00 - ( 0.04 * I2R(udg_Zhengshu[133]) ) ), ( 3.00 - ( 0.04 * I2R(udg_Zhengshu[133]) ) ), ( 3.00 - ( 0.04 * I2R(udg_Zhengshu[133]) ) ))
call GroupAddUnit(udg_Danweizu[133], udg_danwei2[1])
set udg_danwei2[1]=null
else
endif
call RemoveLocation(udg_Dian[135])
call RemoveLocation(udg_Dian[136])
else
set udg_Zhengshu[133]=0
call StopSoundBJ(gg_snd_FrostArrowLaunch1, false)
call PlaySoundOnUnitBJ(gg_snd_FrostArrowLaunch1, 100, udg_Danwei[132])
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_Danwei[132]), 0x41304D35, true)
call UnitRemoveAbility(udg_Danwei[132], 0x41304D37)
call UnitRemoveBuffBJ(0x42303259, udg_Danwei[132])
call ResetUnitAnimation(udg_Danwei[132])
call SetUnitTurnSpeed(udg_Danwei[132], GetUnitDefaultTurnSpeed(udg_Danwei[132]))
call PauseTimer(udg_Times[133])
set udg_Zhengshu[134]=50
call StartTimerBJ(udg_Times[134], true, 0.01)
call DisableTrigger(gg_trg_hongzhishi_2_5)
call DisableTrigger(gg_trg_hongzhishi_2_6)
call DisableTrigger(gg_trg_hongzhishi_2_7)
call DisableTrigger(gg_trg_hongzhishi_4)
call ForGroupBJ(udg_Danweizu[37], function Trig_hongzhishi_2Func001Func001Func019Func016A)
endif
endif
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_hongzhishi_2 takes nothing returns nothing
set gg_trg_hongzhishi_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_hongzhishi_2, udg_Times[133])
call TriggerAddAction(gg_trg_hongzhishi_2, function Trig_hongzhishi_2Actions)
endfunction
function Trig_hongzhishi_2_5Func005T takes nothing returns nothing
call DisableTrigger(gg_trg_hongzhishi_2_7)
call IssueImmediateOrderById(udg_Danwei[132], 851972)
call EnableTrigger(gg_trg_hongzhishi_2_7)
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
endfunction
function Trig_hongzhishi_2_5Actions takes nothing returns nothing
local timer ydl_timer
set udg_Dian[135]=GetUnitLoc(udg_Danwei[132])
set udg_Dian[136]=GetOrderPointLoc()
set udg_Shishu[133]=AngleBetweenPoints(udg_Dian[135], udg_Dian[136])
if ( ( udg_Shishu[133] < 0.00 ) ) then
set udg_Shishu[133]=( udg_Shishu[133] + 360.00 )
else
endif
set ydl_timer=CreateTimer()
call TimerStart(ydl_timer, 0.00, false, function Trig_hongzhishi_2_5Func005T)
call SetUnitFacingTimed(udg_Danwei[132], udg_Shishu[133], ( s__math_Angle(udg_Shishu[133] , GetUnitFacing(udg_Danwei[132])) / 90.00 ))
call RemoveLocation(udg_Dian[135])
call RemoveLocation(udg_Dian[136])
set ydl_timer=null
endfunction
function InitTrig_hongzhishi_2_5 takes nothing returns nothing
set gg_trg_hongzhishi_2_5=CreateTrigger()
call DisableTrigger(gg_trg_hongzhishi_2_5)
call TriggerAddAction(gg_trg_hongzhishi_2_5, function Trig_hongzhishi_2_5Actions)
endfunction
function Trig_hongzhishi_2_6Func005T takes nothing returns nothing
call DisableTrigger(gg_trg_hongzhishi_2_7)
call IssueImmediateOrderById(udg_Danwei[132], 851972)
call EnableTrigger(gg_trg_hongzhishi_2_7)
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
endfunction
function Trig_hongzhishi_2_6Actions takes nothing returns nothing
local timer ydl_timer
set udg_Dian[135]=GetUnitLoc(udg_Danwei[132])
set udg_Dian[136]=GetUnitLoc(GetOrderTargetUnit())
set udg_Shishu[133]=AngleBetweenPoints(udg_Dian[135], udg_Dian[136])
if ( ( udg_Shishu[133] < 0.00 ) ) then
set udg_Shishu[133]=( udg_Shishu[133] + 360.00 )
else
endif
set ydl_timer=CreateTimer()
call TimerStart(ydl_timer, 0.00, false, function Trig_hongzhishi_2_6Func005T)
call SetUnitFacingTimed(udg_Danwei[132], udg_Shishu[133], ( s__math_Angle(udg_Shishu[133] , GetUnitFacing(udg_Danwei[132])) / 90.00 ))
call RemoveLocation(udg_Dian[135])
call RemoveLocation(udg_Dian[136])
set ydl_timer=null
endfunction
function InitTrig_hongzhishi_2_6 takes nothing returns nothing
set gg_trg_hongzhishi_2_6=CreateTrigger()
call DisableTrigger(gg_trg_hongzhishi_2_6)
call TriggerAddAction(gg_trg_hongzhishi_2_6, function Trig_hongzhishi_2_6Actions)
endfunction
function Trig_hongzhishi_2_7Actions takes nothing returns nothing
set udg_Shishu[133]=GetUnitFacing(udg_Danwei[132])
endfunction
function InitTrig_hongzhishi_2_7 takes nothing returns nothing
set gg_trg_hongzhishi_2_7=CreateTrigger()
call DisableTrigger(gg_trg_hongzhishi_2_7)
call TriggerAddAction(gg_trg_hongzhishi_2_7, function Trig_hongzhishi_2_7Actions)
endfunction
function Trig_hongzhishi_3Func001Func002A takes nothing returns nothing
set udg_Danwei[135]=GetEnumUnit()
call KillUnit(udg_Danwei[135])
set udg_Danwei[135]=null
endfunction
function Trig_hongzhishi_3Func001Func009Func004A takes nothing returns nothing
set udg_Danwei[135]=GetEnumUnit()
call SetUnitX(udg_Danwei[135], GetLocationX(udg_Dian[136]))
call SetUnitY(udg_Danwei[135], GetLocationY(udg_Dian[136]))
set udg_Danwei[135]=null
endfunction
function Trig_hongzhishi_3Func001Func011A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitDeadBJ(udg_danwei2[1]) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_Danwei[132])) == true ) ) then
if ( ( IsUnitInGroup(udg_danwei2[1], udg_Danweizu[135]) == false ) ) then
call UnitDamageTarget(udg_Danwei[132], udg_danwei2[1], ( ( ( ( 10.00 + ( 30.00 * I2R(GetUnitAbilityLevel(udg_Danwei[132], 0x41304D35)) ) ) + ( 1.20 * I2R(GetHeroInt(udg_Danwei[132], true)) ) ) * ( udg_Shishu[132] / 20.00 ) ) * 1.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call GroupAddUnit(udg_Danweizu[135], udg_danwei2[1])
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\OrbOfDeath\\OrbOfDeathMissile.mdl", udg_danwei2[1], "chest"))
set udg_Shishu[132]=( udg_Shishu[132] * 0.85 )
else
endif
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_hongzhishi_3Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_Zhengshu[134] > 0 ) ) then
set udg_Zhengshu[134]=( udg_Zhengshu[134] - 1 )
set udg_Dian[135]=GetUnitLoc(udg_Danwei[136])
set udg_Dian[136]=PolarProjectionBJ(udg_Dian[135], udg_Shishu[132], GetUnitFacing(udg_Danwei[136]))
if ( ( IsTerrainPathableBJ(udg_Dian[135], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(udg_Danwei[136], GetLocationX(udg_Dian[136]))
call SetUnitY(udg_Danwei[136], GetLocationY(udg_Dian[136]))
call ForGroupBJ(udg_Danweizu[133], function Trig_hongzhishi_3Func001Func009Func004A)
else
set udg_Zhengshu[134]=0
endif
set udg_Danweizu[134]=YDWEGetUnitsInRangeOfLocAllNull(( 50.00 + ( 2.50 * udg_Shishu[132] ) ) , udg_Dian[135])
call ForGroupBJ(udg_Danweizu[134], function Trig_hongzhishi_3Func001Func011A)
call DestroyGroup(udg_Danweizu[134])
call RemoveLocation(udg_Dian[135])
call RemoveLocation(udg_Dian[136])
else
call KillUnit(udg_Danwei[136])
call ForGroupBJ(udg_Danweizu[133], function Trig_hongzhishi_3Func001Func002A)
call GroupClear(udg_Danweizu[133])
call GroupClear(udg_Danweizu[135])
call PauseTimer(udg_Times[134])
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_hongzhishi_3 takes nothing returns nothing
set gg_trg_hongzhishi_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_hongzhishi_3, udg_Times[134])
call TriggerAddAction(gg_trg_hongzhishi_3, function Trig_hongzhishi_3Actions)
endfunction
function Trig_hongzhishi_4Conditions takes nothing returns boolean
return ( ( GetSpellAbilityId() != 0x41304D35 ) )
endfunction
function Trig_hongzhishi_4Func017A takes nothing returns nothing
set udg_Danwei[37]=GetEnumUnit()
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[37])) + 1 ) == ( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[132])) + 1 ) ) ) then
call SetUnitColor(udg_Danwei[37], PLAYER_COLOR_LIGHT_GRAY)
call SetUnitTimeScale(udg_Danwei[37], 0.00)
call SetUnitManaBJ(udg_Danwei[37], 250.00)
else
endif
set udg_Danwei[37]=null
endfunction
function Trig_hongzhishi_4Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_Zhengshu[133]=0
call StopSoundBJ(gg_snd_FrostArrowLaunch1, false)
call PlaySoundOnUnitBJ(gg_snd_FrostArrowLaunch1, 100, udg_Danwei[132])
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_Danwei[132]), 0x41304D35, true)
call UnitRemoveAbility(udg_Danwei[132], 0x41304D37)
call SetUnitPathing(udg_Danwei[132], true)
call UnitRemoveBuffBJ(0x42303259, udg_Danwei[132])
call ResetUnitAnimation(udg_Danwei[132])
call SetUnitTurnSpeed(udg_Danwei[132], GetUnitDefaultTurnSpeed(udg_Danwei[132]))
call PauseTimer(udg_Times[133])
set udg_Zhengshu[134]=50
call StartTimerBJ(udg_Times[134], true, 0.01)
call DisableTrigger(gg_trg_hongzhishi_2_5)
call DisableTrigger(gg_trg_hongzhishi_2_6)
call DisableTrigger(gg_trg_hongzhishi_2_7)
call DisableTrigger(gg_trg_hongzhishi_4)
call ForGroupBJ(udg_Danweizu[37], function Trig_hongzhishi_4Func017A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_hongzhishi_4 takes nothing returns nothing
set gg_trg_hongzhishi_4=CreateTrigger()
call DisableTrigger(gg_trg_hongzhishi_4)
call TriggerAddCondition(gg_trg_hongzhishi_4, Condition(function Trig_hongzhishi_4Conditions))
call TriggerAddAction(gg_trg_hongzhishi_4, function Trig_hongzhishi_4Actions)
endfunction
function Trig_molipingzhang_0Conditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41304D38 ) )
endfunction
function Trig_molipingzhang_0Actions takes nothing returns nothing
set udg_dian2[1]=GetSpellTargetLoc()
if ( ( IsTerrainPathableBJ(udg_dian2[1], PATHING_TYPE_WALKABILITY) == true ) ) then
call IssueImmediateOrderById(GetTriggerUnit(), 851972)
call DisplayTextToPlayer(s__baka_SPlayer(( s__baka_SGetPlayerId(GetOwningPlayer(GetTriggerUnit())) + 1 ) - 1), 0, 0, "TRIGSTR_1135")
else
endif
call RemoveLocation(udg_dian2[1])
endfunction
function InitTrig_molipingzhang_0 takes nothing returns nothing
set gg_trg_molipingzhang_0=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_molipingzhang_0, EVENT_PLAYER_UNIT_SPELL_CHANNEL)
call TriggerAddCondition(gg_trg_molipingzhang_0, Condition(function Trig_molipingzhang_0Conditions))
call TriggerAddAction(gg_trg_molipingzhang_0, function Trig_molipingzhang_0Actions)
endfunction
function Trig_molipingzhang_1Conditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41304D38 ) )
endfunction
function Trig_molipingzhang_1Actions takes nothing returns nothing
set udg_Danwei[132]=GetTriggerUnit()
set udg_Dian[137]=GetSpellTargetLoc()
call StartTimerBJ(udg_Times[135], false, 0.00)
set udg_Zhengshu[135]=0
endfunction
function InitTrig_molipingzhang_1 takes nothing returns nothing
set gg_trg_molipingzhang_1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_molipingzhang_1, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_molipingzhang_1, Condition(function Trig_molipingzhang_1Conditions))
call TriggerAddAction(gg_trg_molipingzhang_1, function Trig_molipingzhang_1Actions)
endfunction
function Trig_molipingzhang_2Func001Func001Func001Func005A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitDeadBJ(udg_danwei2[1]) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_Danweizu[137]) == false ) ) then
call GroupAddUnit(udg_Danweizu[137], udg_danwei2[1])
if ( ( IsUnitAlly(udg_danwei2[1], GetOwningPlayer(udg_Danwei[132])) == true ) ) then
call UnitAddAbility(udg_danwei2[1], 0x41304D4E)
else
endif
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_molipingzhang_2Func001Func001Func001Func008Func001A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
call UnitRemoveAbility(udg_danwei2[1], 0x41304D4E)
set udg_danwei2[1]=null
endfunction
function Trig_molipingzhang_2Func001Func001Func001Func008Func002A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
call UnitRemoveAbility(udg_danwei2[1], 0x41304D41)
call UnitRemoveAbility(udg_danwei2[1], 0x41304D39)
call UnitRemoveAbility(udg_danwei2[1], 0x41304D42)
set udg_danwei2[1]=null
endfunction
function Trig_molipingzhang_2Func001Func001Func001Func008Func008A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitDeadBJ(udg_danwei2[1]) == false ) ) then
set udg_Dian[135]=GetUnitLoc(udg_Danwei[137])
set udg_Dian[136]=GetUnitLoc(udg_danwei2[1])
if ( ( IsUnitInGroup(udg_danwei2[1], udg_Danweizu[137]) == false ) and ( IsUnitInGroup(udg_danwei2[1], udg_Danweizu[138]) == false ) and ( DistanceBetweenPoints(udg_Dian[135], udg_Dian[136]) > 250.00 ) ) then
if ( ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_Danwei[132])) == true ) ) then
call UnitAddAbility(udg_danwei2[1], 0x41304D39)
call StopSoundBJ(gg_snd_SearingArrowTarget3, false)
call PlaySoundOnUnitBJ(gg_snd_SearingArrowTarget3, 100, udg_danwei2[1])
call UnitDamageTarget(udg_Danwei[132], udg_danwei2[1], ( ( ( ( 0.00 + ( 30.00 * I2R(GetUnitAbilityLevel(udg_Danwei[132], 0x41304D38)) ) ) + ( 1.00 * I2R(GetHeroInt(udg_Danwei[132], true)) ) ) * 1.00 ) * 1.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
call UnitAddAbility(udg_danwei2[1], 0x41304D41)
call StopSoundBJ(gg_snd_PhoenixAttack, false)
call PlaySoundOnUnitBJ(gg_snd_PhoenixAttack, 100, udg_danwei2[1])
endif
call UnitAddAbility(udg_danwei2[1], 0x41304D42)
call GroupAddUnit(udg_Danweizu[138], udg_danwei2[1])
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Items\\AIil\\AIilTarget.mdl", udg_Dian[136]))
else
endif
call RemoveLocation(udg_Dian[135])
call RemoveLocation(udg_Dian[136])
if ( ( IsUnitInGroup(udg_danwei2[1], udg_Danweizu[137]) == false ) ) then
call GroupAddUnit(udg_Danweizu[137], udg_danwei2[1])
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_HERO) == false ) and ( IsUnitAlly(udg_danwei2[1], GetOwningPlayer(udg_Danwei[132])) == true ) ) then
call UnitAddAbility(udg_danwei2[1], 0x41304D4E)
else
endif
else
endif
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_molipingzhang_2Func001Func001Func001Func008Func010A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitDeadBJ(udg_danwei2[1]) == false ) ) then
set udg_Dian[135]=GetUnitLoc(udg_Danwei[137])
set udg_Dian[136]=GetUnitLoc(udg_danwei2[1])
if ( ( DistanceBetweenPoints(udg_Dian[135], udg_Dian[136]) > 280.00 ) ) then
if ( ( DistanceBetweenPoints(udg_Dian[135], udg_Dian[136]) <= 350.00 ) and ( IsUnitInGroup(udg_danwei2[1], udg_Danweizu[138]) == false ) ) then
if ( ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_Danwei[132])) == true ) ) then
call UnitAddAbility(udg_danwei2[1], 0x41304D39)
call StopSoundBJ(gg_snd_SearingArrowTarget3, false)
call PlaySoundOnUnitBJ(gg_snd_SearingArrowTarget3, 100, udg_danwei2[1])
call UnitDamageTarget(udg_Danwei[132], udg_danwei2[1], ( ( ( ( 0.00 + ( 30.00 * I2R(GetUnitAbilityLevel(udg_Danwei[132], 0x41304D38)) ) ) + ( 1.00 * I2R(GetHeroInt(udg_Danwei[132], true)) ) ) * 1.00 ) * 1.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
call UnitAddAbility(udg_danwei2[1], 0x41304D41)
call StopSoundBJ(gg_snd_PhoenixAttack, false)
call PlaySoundOnUnitBJ(gg_snd_PhoenixAttack, 100, udg_danwei2[1])
endif
call UnitAddAbility(udg_danwei2[1], 0x41304D42)
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Items\\AIil\\AIilTarget.mdl", udg_Dian[136]))
call GroupAddUnit(udg_Danweizu[138], udg_danwei2[1])
else
endif
if ( ( DistanceBetweenPoints(udg_Dian[135], udg_Dian[136]) > 300.00 ) ) then
call UnitRemoveAbility(udg_danwei2[1], 0x41304D4E)
call GroupRemoveUnit(udg_Danweizu[137], udg_danwei2[1])
else
endif
else
endif
call RemoveLocation(udg_Dian[135])
call RemoveLocation(udg_Dian[136])
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_molipingzhang_2Func001Func006A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_HERO) == true ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitDeadBJ(udg_danwei2[1]) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_Danwei[132])) == true ) ) then
else
call GroupRemoveUnit(udg_Danweizu[134], udg_danwei2[1])
endif
set udg_danwei2[1]=null
endfunction
function Trig_molipingzhang_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_Zhengshu[135] == 0 ) ) then
set udg_Zhengshu[135]=( udg_Zhengshu[135] + 1 )
set udg_Dian[89]=GetUnitLoc(udg_Danwei[132])
set udg_Danweizu[134]=YDWEGetUnitsInRangeOfLocAllNull(300.00 , udg_Dian[89])
call ForGroupBJ(udg_Danweizu[134], function Trig_molipingzhang_2Func001Func006A)
if ( ( IsUnitGroupEmptyBJ(udg_Danweizu[134]) == true ) ) then
call SetUnitManaBJ(udg_Danwei[132], ( GetUnitState(udg_Danwei[132], UNIT_STATE_MANA) + ( ( 85.00 + ( 5.00 * I2R(GetUnitAbilityLevel(udg_Danwei[132], 0x41304D38)) ) ) * 1.00 ) ))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishMana\\SpiritTouchTarget.mdl", udg_Danwei[132], "chest"))
else
endif
call DestroyGroup(udg_Danweizu[134])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[132]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304B52)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_Danwei[132])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
call SetUnitAnimationByIndex(udg_Danwei[132], 1)
call StartTimerBJ(udg_Times[135], false, 0.60)
set udg_Danwei[137]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[132]), 0x6530374B, udg_Dian[137], 0.00)
call SetUnitAnimation(udg_Danwei[137], "birth")
call PlaySoundOnUnitBJ(gg_snd_FaerieFireLaunch1, 100, udg_Danwei[132])
else
if ( ( udg_Zhengshu[135] == 1 ) ) then
set udg_Zhengshu[135]=( udg_Zhengshu[135] + 1 )
call SetUnitX(udg_Danwei[132], GetLocationX(udg_Dian[137]))
call SetUnitY(udg_Danwei[132], GetLocationY(udg_Dian[137]))
call PlaySoundOnUnitBJ(gg_snd_PhaseShift1, 100, udg_Danwei[132])
call StartTimerBJ(udg_Times[135], false, 0.60)
else
if ( ( udg_Zhengshu[135] == 2 ) ) then
set udg_Zhengshu[135]=( udg_Zhengshu[135] + 1 )
if ( ( udg_Zhengshu[132] == 0 ) and ( udg_Zhengshu[133] == 0 ) and ( udg_Zhengshu[136] == 0 ) and ( udg_Zhengshu[137] == 0 ) ) then
call ResetUnitAnimation(udg_Danwei[132])
else
endif
call StartTimerBJ(udg_Times[135], true, 0.04)
set udg_Danweizu[136]=YDWEGetUnitsInRangeOfLocAllNull(300.00 , udg_Dian[137])
call ForGroupBJ(udg_Danweizu[136], function Trig_molipingzhang_2Func001Func001Func001Func005A)
call DestroyGroup(udg_Danweizu[136])
else
if ( ( udg_Zhengshu[135] <= ( 77 + ( 25 * GetUnitAbilityLevel(udg_Danwei[132], 0x41304D38) ) ) ) ) then
set udg_Zhengshu[135]=( udg_Zhengshu[135] + 1 )
set udg_Danweizu[136]=YDWEGetUnitsInRangeOfLocAllNull(300.00 , udg_Dian[137])
call ForGroupBJ(udg_Danweizu[136], function Trig_molipingzhang_2Func001Func001Func001Func008Func008A)
call DestroyGroup(udg_Danweizu[136])
call ForGroupBJ(udg_Danweizu[137], function Trig_molipingzhang_2Func001Func001Func001Func008Func010A)
else
call ForGroupBJ(udg_Danweizu[137], function Trig_molipingzhang_2Func001Func001Func001Func008Func001A)
call ForGroupBJ(udg_Danweizu[138], function Trig_molipingzhang_2Func001Func001Func001Func008Func002A)
call GroupClear(udg_Danweizu[137])
call GroupClear(udg_Danweizu[138])
call RemoveLocation(udg_Dian[137])
call KillUnit(udg_Danwei[137])
call PauseTimer(udg_Times[135])
endif
endif
endif
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_molipingzhang_2 takes nothing returns nothing
set gg_trg_molipingzhang_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_molipingzhang_2, udg_Times[135])
call TriggerAddAction(gg_trg_molipingzhang_2, function Trig_molipingzhang_2Actions)
endfunction
function Trig_jinghuazhiyu_1Actions takes nothing returns nothing
set udg_Danwei[132]=GetTriggerUnit()
call StartTimerBJ(udg_Times[136], false, 0.00)
set udg_Zhengshu[136]=81
endfunction
function InitTrig_jinghuazhiyu_1 takes nothing returns nothing
set gg_trg_jinghuazhiyu_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_jinghuazhiyu_1 , 3 , 0x41304D43)
call TriggerAddAction(gg_trg_jinghuazhiyu_1, function Trig_jinghuazhiyu_1Actions)
endfunction
function Trig_jinghuazhiyu_2Func001Func001Func001Func001Func004Func003A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitDeadBJ(udg_danwei2[1]) == false ) ) then
if ( ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_Danwei[132])) == true ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayTarget.mdl", udg_danwei2[1], "origin"))
if ( ( IsUnitInGroup(udg_danwei2[1], udg_Danweizu[139]) == false ) ) then
call GroupAddUnit(udg_Danweizu[139], udg_danwei2[1])
call UnitAddAbility(udg_danwei2[1], 0x41304D4B)
call UnitAddAbility(udg_danwei2[1], 0x41304D49)
else
endif
call UnitDamageTarget(udg_Danwei[132], udg_danwei2[1], ( ( ( ( 50.00 + ( 100.00 * I2R(GetUnitAbilityLevel(udg_Danwei[132], 0x41304D43)) ) ) + ( 1.50 * I2R(GetHeroInt(udg_Danwei[132], true)) ) ) / 30.00 ) * 1.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
call SetUnitManaBJ(udg_danwei2[1], ( GetUnitState(udg_danwei2[1], UNIT_STATE_MANA) - ( ( ( 50.00 + ( 100.00 * I2R(GetUnitAbilityLevel(udg_Danwei[132], 0x41304D43)) ) ) + ( 1.50 * I2R(GetHeroInt(udg_Danwei[132], true)) ) ) / 60.00 ) ))
else
endif
if ( ( IsUnitAlly(udg_danwei2[1], GetOwningPlayer(udg_Danwei[132])) == true ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayDamage.mdl", udg_danwei2[1], "origin"))
if ( ( IsUnitInGroup(udg_danwei2[1], udg_Danweizu[139]) == false ) ) then
call GroupAddUnit(udg_Danweizu[139], udg_danwei2[1])
call UnitAddAbility(udg_danwei2[1], 0x41304D4C)
call UnitAddAbility(udg_danwei2[1], 0x41304D4A)
else
endif
call SetUnitLifeBJ(udg_danwei2[1], ( GetUnitState(udg_danwei2[1], UNIT_STATE_LIFE) + ( ( ( 50.00 + ( 100.00 * I2R(GetUnitAbilityLevel(udg_Danwei[132], 0x41304D43)) ) ) + ( 1.50 * I2R(GetHeroInt(udg_Danwei[132], true)) ) ) / 30.00 ) ))
else
endif
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_jinghuazhiyu_2Func001Func001Func001Func001Func005Func002A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
call UnitRemoveAbility(udg_danwei2[1], 0x41304D4B)
call UnitRemoveAbility(udg_danwei2[1], 0x41304D4C)
call UnitRemoveAbility(udg_danwei2[1], 0x41304D49)
call UnitRemoveAbility(udg_danwei2[1], 0x41304D4A)
call UnitRemoveBuffBJ(0x42303333, udg_danwei2[1])
call UnitRemoveBuffBJ(0x42303334, udg_danwei2[1])
set udg_danwei2[1]=null
endfunction
function Trig_jinghuazhiyu_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_Zhengshu[136] == 81 ) ) then
set udg_Zhengshu[136]=( udg_Zhengshu[136] - 1 )
set udg_Dian[89]=GetUnitLoc(udg_Danwei[132])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[132]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304B58)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_Danwei[132])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
call StartTimerBJ(udg_Times[136], true, 0.04)
call SetUnitAnimationByIndex(udg_Danwei[132], 5)
set udg_Dian[135]=GetUnitLoc(udg_Danwei[132])
set udg_Danwei[138]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[132]), 0x6530374C, udg_Dian[135], 0.00)
call SetUnitVertexColor(udg_Danwei[138], 255, 255, 255, 5)
call RemoveLocation(udg_Dian[135])
call PlaySoundOnUnitBJ(gg_snd_ReviveOrc, 100, udg_Danwei[132])
else
if ( ( udg_Zhengshu[136] > 65 ) ) then
set udg_Zhengshu[136]=( udg_Zhengshu[136] - 1 )
call SetUnitVertexColor(udg_Danwei[138], 255, 255, 255, ( 15 + ( 16 * ( 80 - udg_Zhengshu[136] ) ) ))
if ( ( udg_Zhengshu[136] == 65 ) ) then
set udg_Dian[135]=GetUnitLoc(udg_Danwei[132])
set udg_Dian[136]=PolarProjectionBJ(udg_Dian[135], 30.00, ( GetUnitFacing(udg_Danwei[132]) + 180.00 ))
set udg_Danwei[139]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[132]), 0x6530374F, udg_Dian[136], 270.00)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=3
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
call DestroyEffect(AddSpecialEffectLoc("war3mapImported\\A7_zisekuosan.mdx", udg_Dian[136]))
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call RemoveLocation(udg_Dian[135])
call RemoveLocation(udg_Dian[136])
call PauseTimer(udg_Times[136])
call StartTimerBJ(udg_Times[136], true, 0.02)
call PlaySoundOnUnitBJ(gg_snd_FeralSpiritTarget101, 100, udg_Danwei[132])
else
endif
else
if ( ( udg_Zhengshu[136] > 45 ) ) then
set udg_Zhengshu[136]=( udg_Zhengshu[136] - 1 )
set udg_Dian[135]=GetUnitLoc(udg_Danwei[139])
call s__maphack_SetHeight(udg_Danwei[139] , ( s__maphack_GetHeight(udg_Danwei[139]) + 50.00 ) , 0.00)
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[132]), 0x65303750, udg_Dian[135], 270.00)
call s__maphack_SetHeight(udg_danwei2[1] , ( s__maphack_GetHeight(udg_Danwei[139]) + 0.00 ) , 0.00)
call SetUnitTimeScale(udg_danwei2[1], 5.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 0.50)
set udg_danwei2[1]=null
if ( ( udg_Zhengshu[136] == 45 ) ) then
call RemoveUnit(udg_Danwei[139])
call s__maphack_SetHeight(udg_Danwei[138] , 1000.00 , 0.00)
call SetUnitScale(udg_Danwei[138], 4.50, 4.50, 4.50)
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=12
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
set udg_Dian[136]=PolarProjectionBJ(udg_Dian[135], 200.00, ( 30.00 * I2R(bj_forLoopAIndex) ))
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[132]), 0x65303130, udg_Dian[135], ( 30.00 * I2R(bj_forLoopAIndex) ))
call s__maphack_SetHeight(udg_Danwei[92] , 2000.00 , 0.00)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 3.00)
call UnitAddAbility(udg_Danwei[92], 0x41304D44)
call IssuePointOrderLoc(udg_Danwei[92], "clusterrockets", udg_Dian[136])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[136])
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
call PauseTimer(udg_Times[136])
call StartTimerBJ(udg_Times[136], true, 0.10)
call PlaySoundAtPointBJ(gg_snd_FlameStrikeBirth1, 100, udg_Dian[135], 1000.00)
else
endif
call RemoveLocation(udg_Dian[135])
else
if ( ( udg_Zhengshu[136] > 10 ) ) then
set udg_Zhengshu[136]=( udg_Zhengshu[136] - 1 )
if ( ( udg_Zhengshu[136] < 40 ) ) then
set udg_Dian[135]=GetUnitLoc(udg_Danwei[138])
set udg_Danweizu[134]=YDWEGetUnitsInRangeOfLocAllNull(800.00 , udg_Dian[135])
call ForGroupBJ(udg_Danweizu[134], function Trig_jinghuazhiyu_2Func001Func001Func001Func001Func004Func003A)
call DestroyGroup(udg_Danweizu[134])
call RemoveLocation(udg_Dian[135])
else
endif
else
if ( ( udg_Zhengshu[136] == 10 ) ) then
call SetUnitTimeScale(udg_Danwei[132], 1.00)
call PauseTimer(udg_Times[136])
call StartTimerBJ(udg_Times[136], true, 0.03)
else
endif
if ( ( udg_Zhengshu[136] > 0 ) ) then
set udg_Zhengshu[136]=( udg_Zhengshu[136] - 1 )
call SetUnitVertexColor(udg_Danwei[138], 255, 255, 255, ( 15 + ( 24 * udg_Zhengshu[136] ) ))
if ( ( udg_Zhengshu[136] == 0 ) ) then
call KillUnit(udg_Danwei[138])
call PauseTimer(udg_Times[136])
call StartTimerBJ(udg_Times[136], false, ( 0.50 + ( 0.50 * I2R(GetUnitAbilityLevel(udg_Danwei[132], 0x41304D43)) ) ))
else
endif
else
set udg_Zhengshu[136]=0
call ForGroupBJ(udg_Danweizu[139], function Trig_jinghuazhiyu_2Func001Func001Func001Func001Func005Func002A)
call GroupClear(udg_Danweizu[139])
endif
endif
endif
endif
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_jinghuazhiyu_2 takes nothing returns nothing
set gg_trg_jinghuazhiyu_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_jinghuazhiyu_2, udg_Times[136])
call TriggerAddAction(gg_trg_jinghuazhiyu_2, function Trig_jinghuazhiyu_2Actions)
endfunction
function Trig_yuanhuanzhili_0Conditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41303246 ) )
endfunction
function Trig_yuanhuanzhili_0Actions takes nothing returns nothing
set udg_dian2[0]=GetUnitLoc(GetTriggerUnit())
set udg_dian2[1]=GetSpellTargetLoc()
if ( ( DistanceBetweenPoints(udg_dian2[0], udg_dian2[1]) <= 1000.00 ) ) then
call IssueImmediateOrderById(GetTriggerUnit(), 851972)
call DisplayTextToPlayer(s__baka_SPlayer(( s__baka_SGetPlayerId(GetOwningPlayer(GetTriggerUnit())) + 1 ) - 1), 0, 0, "TRIGSTR_4546")
else
endif
call RemoveLocation(udg_dian2[0])
call RemoveLocation(udg_dian2[1])
endfunction
function InitTrig_yuanhuanzhili_0 takes nothing returns nothing
set gg_trg_yuanhuanzhili_0=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_yuanhuanzhili_0, EVENT_PLAYER_UNIT_SPELL_CHANNEL)
call TriggerAddCondition(gg_trg_yuanhuanzhili_0, Condition(function Trig_yuanhuanzhili_0Conditions))
call TriggerAddAction(gg_trg_yuanhuanzhili_0, function Trig_yuanhuanzhili_0Actions)
endfunction
function Trig_yuanhuanzhili_1Conditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41303246 ) )
endfunction
function Trig_yuanhuanzhili_1Actions takes nothing returns nothing
set udg_Danwei[132]=GetTriggerUnit()
call StartTimerBJ(udg_Times[137], false, 0.00)
set udg_Zhengshu[137]=111
set udg_Dian[139]=GetSpellTargetLoc()
call PlaySoundOnUnitBJ(gg_snd_xyd, 100.00, udg_Danwei[132])
endfunction
function InitTrig_yuanhuanzhili_1 takes nothing returns nothing
set gg_trg_yuanhuanzhili_1=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_yuanhuanzhili_1, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_yuanhuanzhili_1, Condition(function Trig_yuanhuanzhili_1Conditions))
call TriggerAddAction(gg_trg_yuanhuanzhili_1, function Trig_yuanhuanzhili_1Actions)
endfunction
function Trig_yuanhuanzhili_2Func001Func001Func001Func001Func001Func001Func003Func013A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitDeadBJ(udg_danwei2[1]) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_Danwei[132])) == true ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\OrbOfDeath\\OrbOfDeathMissile.mdl", udg_danwei2[1], "chest"))
call UnitDamageTarget(udg_Danwei[132], udg_danwei2[1], ( ( ( 300.00 + ( 2.00 * I2R(GetHeroInt(udg_Danwei[132], true)) ) ) / 15.00 ) * 1.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_yuanhuanzhili_2Func001Func001Func001Func001Func001Func001A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
if ( ( GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE) >= 5.00 ) and ( IsTerrainPathableBJ(udg_dian2[0], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitLifeBJ(udg_danwei2[0], ( GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE) - 1 ))
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) / 1.00 ), GetUnitFacing(udg_danwei2[0]))
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
call RemoveLocation(udg_dian2[1])
else
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[132]), 0x65303032, udg_Dian[139], 0.00)
call SetUnitAnimation(udg_danwei2[1], "death")
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 1.00)
set udg_danwei2[1]=null
call GroupRemoveUnit(udg_Danweizu[140], udg_danwei2[0])
call KillUnit(udg_danwei2[0])
set udg_Danweizu[134]=YDWEGetUnitsInRangeOfLocAllNull(400.00 , udg_Dian[139])
call ForGroupBJ(udg_Danweizu[134], function Trig_yuanhuanzhili_2Func001Func001Func001Func001Func001Func001Func003Func013A)
call DestroyGroup(udg_Danweizu[134])
endif
call RemoveLocation(udg_dian2[0])
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_yuanhuanzhili_2Func001Func001Func001Func001Func001Func003Func002Func008A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitDeadBJ(udg_danwei2[1]) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_Danwei[132])) == true ) ) then
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_danwei2[1])
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\OrbOfDeath\\AnnihilationMissile.mdl", udg_danwei2[1], "chest"))
call UnitDamageTarget(udg_Danwei[132], udg_danwei2[1], ( ( ( 100.00 + ( 1.00 * I2R(GetHeroInt(udg_Danwei[132], true)) ) ) * 1.00 ) * 1.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_yuanhuanzhili_2Func001Func001Func001Func001Func015Func003Func013A takes nothing returns nothing
set udg_danwei2[1]=GetEnumUnit()
if ( ( IsUnitType(udg_danwei2[1], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_danwei2[1], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitDeadBJ(udg_danwei2[1]) == false ) and ( IsUnitEnemy(udg_danwei2[1], GetOwningPlayer(udg_Danwei[132])) == true ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\OrbOfDeath\\AnnihilationMissile.mdl", udg_danwei2[1], "chest"))
call UnitDamageTarget(udg_Danwei[132], udg_danwei2[1], ( ( ( 300.00 + ( 2.00 * I2R(GetHeroInt(udg_Danwei[132], true)) ) ) / 15.00 ) * 1.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_danwei2[1]=null
endfunction
function Trig_yuanhuanzhili_2Func001Func001Func001Func001Func015A takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_danwei2[0]=GetEnumUnit()
set udg_dian2[0]=GetUnitLoc(udg_danwei2[0])
if ( ( GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE) >= 5.00 ) and ( IsTerrainPathableBJ(udg_dian2[0], PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitLifeBJ(udg_danwei2[0], ( GetUnitState(udg_danwei2[0], UNIT_STATE_LIFE) - 1 ))
set udg_dian2[1]=PolarProjectionBJ(udg_dian2[0], ( GetUnitState(udg_danwei2[0], UNIT_STATE_MANA) / 1.00 ), GetUnitFacing(udg_danwei2[0]))
call SetUnitX(udg_danwei2[0], GetLocationX(udg_dian2[1]))
call SetUnitY(udg_danwei2[0], GetLocationY(udg_dian2[1]))
call RemoveLocation(udg_dian2[1])
else
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[132]), 0x65303032, udg_Dian[139], 0.00)
call SetUnitAnimation(udg_danwei2[1], "death")
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 1.00)
set udg_danwei2[1]=null
call GroupRemoveUnit(udg_Danweizu[140], udg_danwei2[0])
call KillUnit(udg_danwei2[0])
set udg_Danweizu[134]=YDWEGetUnitsInRangeOfLocAllNull(400.00 , udg_Dian[139])
call ForGroupBJ(udg_Danweizu[134], function Trig_yuanhuanzhili_2Func001Func001Func001Func001Func015Func003Func013A)
call DestroyGroup(udg_Danweizu[134])
endif
call RemoveLocation(udg_dian2[0])
set udg_danwei2[0]=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_yuanhuanzhili_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_Zhengshu[137] == 111 ) ) then
set udg_Zhengshu[137]=( udg_Zhengshu[137] - 1 )
set udg_Dian[89]=GetUnitLoc(udg_Danwei[132])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[132]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41303959)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_Danwei[132])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
call SetUnitAnimationByIndex(udg_Danwei[132], 7)
set udg_Dian[135]=GetUnitLoc(udg_Danwei[132])
call SetUnitFacing(udg_Danwei[132], AngleBetweenPoints(udg_Dian[135], udg_Dian[139]))
call RemoveLocation(udg_Dian[135])
call StartTimerBJ(udg_Times[137], false, 1.50)
call PlaySoundOnUnitBJ(gg_snd_InvisibilityTarget01, 100, udg_Danwei[132])
else
if ( ( udg_Zhengshu[137] == 110 ) ) then
set udg_Zhengshu[137]=( udg_Zhengshu[137] - 1 )
set udg_Dian[135]=GetUnitLoc(udg_Danwei[132])
set udg_Dian[136]=PolarProjectionBJ(udg_Dian[135], 100.00, AngleBetweenPoints(udg_Dian[135], udg_Dian[139]))
set udg_Danwei[140]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[132]), 0x65303751, udg_Dian[136], GetUnitFacing(udg_Danwei[132]))
call s__maphack_SetHeight(udg_Danwei[140] , ( ( GetLocationZ(udg_Dian[135]) - GetLocationZ(udg_Dian[136]) ) + 525.00 ) , 0.00)
call SetUnitVertexColor(udg_Danwei[140], 255, 255, 255, 5)
call SetUnitFacing(udg_Danwei[132], AngleBetweenPoints(udg_Dian[135], udg_Dian[139]))
call RemoveLocation(udg_Dian[135])
call RemoveLocation(udg_Dian[136])
call StartTimerBJ(udg_Times[137], true, 0.04)
call SetUnitTimeScale(udg_Danwei[132], 0.00)
call PlaySoundOnUnitBJ(gg_snd_Disenchant01, 100, udg_Danwei[132])
else
if ( ( udg_Zhengshu[137] > 100 ) ) then
set udg_Zhengshu[137]=( udg_Zhengshu[137] - 1 )
call SetUnitVertexColor(udg_Danwei[140], 255, 255, 255, ( 15 + ( 24 * ( 110 - udg_Zhengshu[137] ) ) ))
if ( ( udg_Zhengshu[137] == 100 ) ) then
call PlaySoundOnUnitBJ(gg_snd_KeeperOfTheGroveMissileHit2, 100, udg_Danwei[132])
else
endif
else
if ( ( udg_Zhengshu[137] > 85 ) ) then
set udg_Zhengshu[137]=( udg_Zhengshu[137] - 1 )
set udg_Dian[135]=GetUnitLoc(udg_Danwei[132])
set udg_Dian[136]=PolarProjectionBJ(udg_Dian[135], ( 175.00 + ( 15.00 * ( 100.00 - I2R(udg_Zhengshu[137]) ) ) ), AngleBetweenPoints(udg_Dian[135], udg_Dian[139]))
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[132]), 0x6530374D, udg_Dian[136], AngleBetweenPoints(udg_Dian[135], udg_Dian[139]))
call s__maphack_SetHeight(udg_danwei2[1] , ( ( GetLocationZ(udg_Dian[135]) - GetLocationZ(udg_Dian[136]) ) + 500.00 ) , 0.00)
call SetUnitScale(udg_danwei2[1], ( 0.50 + ( 0.05 * ( 100.00 - I2R(udg_Zhengshu[137]) ) ) ), ( 0.50 + ( 0.05 * ( 100.00 - I2R(udg_Zhengshu[137]) ) ) ), ( 0.50 + ( 0.05 * ( 100.00 - I2R(udg_Zhengshu[137]) ) ) ))
call SetUnitLifeBJ(udg_danwei2[1], 24.00)
call SetUnitManaBJ(udg_danwei2[1], ( ( DistanceBetweenPoints(udg_Dian[136], udg_Dian[139]) - DistanceBetweenPoints(udg_Dian[135], udg_Dian[136]) ) / 20.00 ))
call GroupAddUnit(udg_Danweizu[140], udg_danwei2[1])
call RemoveLocation(udg_Dian[135])
call RemoveLocation(udg_Dian[136])
set udg_danwei2[1]=null
if ( ( udg_Zhengshu[137] == 85 ) ) then
call SetUnitTimeScale(udg_Danwei[132], 1.00)
else
endif
call ForGroupBJ(udg_Danweizu[140], function Trig_yuanhuanzhili_2Func001Func001Func001Func001Func015A)
else
if ( ( IsUnitGroupEmptyBJ(udg_Danweizu[140]) == false ) ) then
call ForGroupBJ(udg_Danweizu[140], function Trig_yuanhuanzhili_2Func001Func001Func001Func001Func001Func001A)
else
if ( ( udg_Zhengshu[137] > 75 ) ) then
if ( ( udg_Zhengshu[137] == 85 ) ) then
set udg_danwei2[1]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[132]), 0x65303033, udg_Dian[139], 0.00)
call UnitApplyTimedLife(udg_danwei2[1], 0x42487765, 5.00)
set udg_danwei2[1]=null
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[132]), 0x65303130, udg_Dian[139], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304236)
set udg_Danweizu[134]=YDWEGetUnitsInRangeOfLocAllNull(400.00 , udg_Dian[139])
call ForGroupBJ(udg_Danweizu[134], function Trig_yuanhuanzhili_2Func001Func001Func001Func001Func001Func003Func002Func008A)
set udg_Danwei[92]=null
call DestroyGroup(udg_Danweizu[134])
call PlaySoundOnUnitBJ(gg_snd_AncestralSpirit, 100, udg_Danwei[132])
else
endif
set udg_Zhengshu[137]=( udg_Zhengshu[137] - 1 )
call SetUnitVertexColor(udg_Danwei[140], 255, 255, 255, ( 15 + ( 24 * ( udg_Zhengshu[137] - 75 ) ) ))
if ( ( udg_Zhengshu[137] == 75 ) ) then
call RemoveUnit(udg_Danwei[140])
call SetTerrainFogEx(0, 0.00, 51500.00, 0, 1, 0.45, 0.75)
call PlaySoundBJ(gg_snd_InnerFireBirth)
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[132])) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[132])) + 1 ) <= 5 ) ) then
set bj_forLoopAIndex=6
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ( ( RectContainsUnit(gg_rct_yaoqingjuedou, udg_Danwei[132]) == RectContainsUnit(gg_rct_yaoqingjuedou, udg_player[bj_forLoopAIndex]) ) ) then
call UnitAddAbility(udg_player[bj_forLoopAIndex], 0x4130334A)
set udg_Shishu[( 129 + bj_forLoopAIndex )]=GetUnitState(udg_player[bj_forLoopAIndex], UNIT_STATE_MANA)
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
else
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=5
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ( ( RectContainsUnit(gg_rct_yaoqingjuedou, udg_Danwei[132]) == RectContainsUnit(gg_rct_yaoqingjuedou, udg_player[bj_forLoopAIndex]) ) ) then
call UnitAddAbility(udg_player[bj_forLoopAIndex], 0x4130334A)
set udg_Shishu[( 134 + bj_forLoopAIndex )]=GetUnitState(udg_player[bj_forLoopAIndex], UNIT_STATE_MANA)
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
endif
else
endif
else
if ( ( udg_Zhengshu[137] > 50 ) ) then
set udg_Zhengshu[137]=( udg_Zhengshu[137] - 1 )
call SetTerrainFogEx(0, 0.00, ( - 91000.00 + ( 1900.00 * I2R(udg_Zhengshu[137]) ) ), 0, 1, 0.45, 0.75)
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[132])) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[132])) + 1 ) <= 5 ) ) then
set bj_forLoopAIndex=6
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ( ( RectContainsUnit(gg_rct_yaoqingjuedou, udg_Danwei[132]) == RectContainsUnit(gg_rct_yaoqingjuedou, udg_player[bj_forLoopAIndex]) ) ) then
if ( ( GetUnitState(udg_player[bj_forLoopAIndex], UNIT_STATE_MANA) < ( udg_Shishu[( 129 + bj_forLoopAIndex )] * ( 1.00 - ( ( 75.00 - I2R(udg_Zhengshu[137]) ) / 25.00 ) ) ) ) ) then
set udg_Shishu[( 129 + bj_forLoopAIndex )]=( GetUnitState(udg_player[bj_forLoopAIndex], UNIT_STATE_MANA) / ( 1.00 - ( ( 75.00 - I2R(udg_Zhengshu[137]) ) / 25.00 ) ) )
else
endif
call SetUnitManaBJ(udg_player[bj_forLoopAIndex], ( udg_Shishu[( 129 + bj_forLoopAIndex )] * ( 1.00 - ( ( 75.00 - I2R(udg_Zhengshu[137]) ) / 25.00 ) ) ))
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
else
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=5
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ( ( RectContainsUnit(gg_rct_yaoqingjuedou, udg_Danwei[132]) == RectContainsUnit(gg_rct_yaoqingjuedou, udg_player[bj_forLoopAIndex]) ) ) then
if ( ( GetUnitState(udg_player[bj_forLoopAIndex], UNIT_STATE_MANA) < ( udg_Shishu[( 134 + bj_forLoopAIndex )] * ( 1.00 - ( ( 75.00 - I2R(udg_Zhengshu[137]) ) / 25.00 ) ) ) ) ) then
set udg_Shishu[( 134 + bj_forLoopAIndex )]=( GetUnitState(udg_player[bj_forLoopAIndex], UNIT_STATE_MANA) / ( 1.00 - ( ( 75.00 - I2R(udg_Zhengshu[137]) ) / 25.00 ) ) )
else
endif
call SetUnitManaBJ(udg_player[bj_forLoopAIndex], ( udg_Shishu[( 134 + bj_forLoopAIndex )] * ( 1.00 - ( ( 75.00 - I2R(udg_Zhengshu[137]) ) / 25.00 ) ) ))
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
endif
else
call SetTerrainFogEx(0, 0.00, 4000.00, 0, 1, 0.45, 0.75)
if ( ( udg_Zhengshu[137] > 0 ) ) then
set udg_Zhengshu[137]=( udg_Zhengshu[137] - 1 )
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[132])) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[132])) + 1 ) <= 5 ) ) then
set bj_forLoopAIndex=6
set bj_forLoopAIndexEnd=10
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ( ( RectContainsUnit(gg_rct_yaoqingjuedou, udg_Danwei[132]) == RectContainsUnit(gg_rct_yaoqingjuedou, udg_player[bj_forLoopAIndex]) ) ) then
call SetUnitManaBJ(udg_player[bj_forLoopAIndex], 0.00)
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
else
set bj_forLoopAIndex=1
set bj_forLoopAIndexEnd=5
loop
exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
if ( ( RectContainsUnit(gg_rct_yaoqingjuedou, udg_Danwei[132]) == RectContainsUnit(gg_rct_yaoqingjuedou, udg_player[bj_forLoopAIndex]) ) ) then
call SetUnitManaBJ(udg_player[bj_forLoopAIndex], 0.00)
else
endif
set bj_forLoopAIndex=bj_forLoopAIndex + 1
endloop
endif
if ( ( udg_Zhengshu[137] == 0 ) ) then
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[132])) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[132])) + 1 ) <= 5 ) ) then
set udg_Axunhuan2[0]=6
loop
exitwhen udg_Axunhuan2[0] > 10
if ( ( RectContainsUnit(gg_rct_yaoqingjuedou, udg_Danwei[132]) == RectContainsUnit(gg_rct_yaoqingjuedou, udg_player[udg_Axunhuan2[0]]) ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\OrbOfDeath\\AnnihilationMissile.mdl", udg_player[udg_Axunhuan2[0]], "chest"))
call UnitRemoveAbility(udg_player[udg_Axunhuan2[0]], 0x4130334A)
call UnitDamageTarget(udg_Danwei[132], udg_player[udg_Axunhuan2[0]], ( udg_Shishu[( 129 + udg_Axunhuan2[0] )] * 0.20 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
set udg_Shishu[( 129 + udg_Axunhuan2[0] )]=( udg_Shishu[( 129 + udg_Axunhuan2[0] )] * 0.80 )
else
endif
set udg_Axunhuan2[0]=udg_Axunhuan2[0] + 1
endloop
else
set udg_Axunhuan2[0]=1
loop
exitwhen udg_Axunhuan2[0] > 5
if ( ( RectContainsUnit(gg_rct_yaoqingjuedou, udg_Danwei[132]) == RectContainsUnit(gg_rct_yaoqingjuedou, udg_player[udg_Axunhuan2[0]]) ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\OrbOfDeath\\AnnihilationMissile.mdl", udg_player[udg_Axunhuan2[0]], "chest"))
call UnitRemoveAbility(udg_player[udg_Axunhuan2[0]], 0x4130334A)
call UnitDamageTarget(udg_Danwei[132], udg_player[udg_Axunhuan2[0]], ( udg_Shishu[( 134 + udg_Axunhuan2[0] )] * 0.20 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
set udg_Shishu[( 134 + udg_Axunhuan2[0] )]=( udg_Shishu[( 134 + udg_Axunhuan2[0] )] * 0.80 )
else
endif
set udg_Axunhuan2[0]=udg_Axunhuan2[0] + 1
endloop
endif
else
endif
else
if ( ( udg_Zhengshu[137] > - 75 ) ) then
set udg_Zhengshu[137]=( udg_Zhengshu[137] - 1 )
call SetTerrainFogEx(0, 0.00, ( 4000.00 - ( 633.33 * I2R(udg_Zhengshu[137]) ) ), 0, 1, 0.45, 0.75)
if ( ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[132])) + 1 ) >= 1 ) and ( ( s__baka_SGetPlayerId(GetOwningPlayer(udg_Danwei[132])) + 1 ) <= 5 ) ) then
set udg_Axunhuan2[0]=6
loop
exitwhen udg_Axunhuan2[0] > 10
if ( ( RectContainsUnit(gg_rct_yaoqingjuedou, udg_Danwei[132]) == RectContainsUnit(gg_rct_yaoqingjuedou, udg_player[udg_Axunhuan2[0]]) ) ) then
call SetUnitManaBJ(udg_player[udg_Axunhuan2[0]], ( udg_Shishu[( 129 + udg_Axunhuan2[0] )] * ( 0.00 - ( I2R(udg_Zhengshu[137]) / 75.00 ) ) ))
else
endif
set udg_Axunhuan2[0]=udg_Axunhuan2[0] + 1
endloop
else
set udg_Axunhuan2[0]=1
loop
exitwhen udg_Axunhuan2[0] > 5
if ( ( RectContainsUnit(gg_rct_yaoqingjuedou, udg_Danwei[132]) == RectContainsUnit(gg_rct_yaoqingjuedou, udg_player[udg_Axunhuan2[0]]) ) ) then
call SetUnitManaBJ(udg_player[udg_Axunhuan2[0]], ( udg_Shishu[( 134 + udg_Axunhuan2[0] )] * ( 0.00 - ( I2R(udg_Zhengshu[137]) / 75.00 ) ) ))
else
endif
set udg_Axunhuan2[0]=udg_Axunhuan2[0] + 1
endloop
endif
else
call ResetTerrainFog()
set udg_Zhengshu[137]=0
call PauseTimer(udg_Times[137])
call RemoveLocation(udg_Dian[139])
endif
endif
endif
endif
endif
endif
endif
endif
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_yuanhuanzhili_2 takes nothing returns nothing
set gg_trg_yuanhuanzhili_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_yuanhuanzhili_2, udg_Times[137])
call TriggerAddAction(gg_trg_yuanhuanzhili_2, function Trig_yuanhuanzhili_2Actions)
endfunction
function Trig_baoliehuoqiang_1Actions takes nothing returns nothing
set udg_Danwei[161]=GetTriggerUnit()
if ( ( GetUnitAbilityLevel(udg_Danwei[161], 0x41304F4D) >= 1 ) ) then
call StartTimerBJ(udg_Times[178], false, 0.00)
else
call UnitAddAbility(udg_Danwei[161], 0x41304F56)
call UnitAddAbility(udg_Danwei[161], 0x41304F4D)
call SetUnitAbilityLevel(udg_Danwei[161], 0x41304F4D, IMaxBJ(GetUnitAbilityLevel(udg_Danwei[161], 0x41304F50), GetUnitAbilityLevel(udg_Danwei[161], 0x41304F55)))
endif
endfunction
function InitTrig_baoliehuoqiang_1 takes nothing returns nothing
set gg_trg_baoliehuoqiang_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_baoliehuoqiang_1 , 3 , 0x41304F50)
call s__Event_AnyUnitSkill(gg_trg_baoliehuoqiang_1 , 3 , 0x41304F55)
call TriggerAddAction(gg_trg_baoliehuoqiang_1, function Trig_baoliehuoqiang_1Actions)
endfunction
function Trig_baoliehuoqiang_2Actions takes nothing returns nothing
set udg_zhengshuex[0]=GetUnitAbilityLevel(udg_Danwei[161], 0x41304F55)
call UnitRemoveAbility(udg_Danwei[161], 0x41304F55)
call UnitAddAbility(udg_Danwei[161], 0x41304F55)
call SetUnitAbilityLevel(udg_Danwei[161], 0x41304F55, udg_zhengshuex[0])
call SetUnitManaBJ(udg_Danwei[161], ( GetUnitState(udg_Danwei[161], UNIT_STATE_MANA) + 40.00 ))
endfunction
function InitTrig_baoliehuoqiang_2 takes nothing returns nothing
set gg_trg_baoliehuoqiang_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_baoliehuoqiang_2, udg_Times[178])
call TriggerAddAction(gg_trg_baoliehuoqiang_2, function Trig_baoliehuoqiang_2Actions)
endfunction
function Trig_baoliehuoqiang_3Conditions takes nothing returns boolean
return ( ( ( GetLearnedSkill() == 0x41304F50 ) or ( GetLearnedSkill() == 0x41304F55 ) ) and ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true ) )
endfunction
function Trig_baoliehuoqiang_3Actions takes nothing returns nothing
set udg_Danwei[161]=GetTriggerUnit()
if ( ( GetUnitAbilityLevel(udg_Danwei[161], 0x41304F4D) >= 1 ) ) then
call SetUnitAbilityLevel(udg_Danwei[161], 0x41304F4D, IMaxBJ(GetUnitAbilityLevel(udg_Danwei[161], 0x41304F50), GetUnitAbilityLevel(udg_Danwei[161], 0x41304F55)))
else
endif
endfunction
function InitTrig_baoliehuoqiang_3 takes nothing returns nothing
set gg_trg_baoliehuoqiang_3=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_baoliehuoqiang_3, EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(gg_trg_baoliehuoqiang_3, Condition(function Trig_baoliehuoqiang_3Conditions))
call TriggerAddAction(gg_trg_baoliehuoqiang_3, function Trig_baoliehuoqiang_3Actions)
endfunction
function Trig_xuanfengsheji_1Actions takes nothing returns nothing
set udg_Danwei[161]=GetTriggerUnit()
set udg_Zhengshu[162]=23
call StartTimerBJ(udg_Times[171], false, 0.00)
endfunction
function InitTrig_xuanfengsheji_1 takes nothing returns nothing
set gg_trg_xuanfengsheji_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_xuanfengsheji_1 , 3 , 0x41304F37)
call TriggerAddAction(gg_trg_xuanfengsheji_1, function Trig_xuanfengsheji_1Actions)
endfunction
function Trig_xuanfengsheji_2Func001Func001Func005Func008Func007A takes nothing returns nothing
set udg_Danwei[162]=GetEnumUnit()
if ( ( IsUnitType(udg_Danwei[162], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_Danwei[162], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_Danwei[162], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_Danwei[162], GetOwningPlayer(udg_Danwei[161])) == true ) ) then
if ( ( ( I2R(udg_Zhengshu[162]) / 4.00 ) == I2R(( udg_Zhengshu[162] / 4 )) ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\RocketMissile\\RocketMissile.mdl", udg_Danwei[162], "chest"))
if ( ( IsUnitInGroup(udg_Danwei[162], udg_Danweizu[163]) == false ) ) then
call GroupAddUnit(udg_Danweizu[163], udg_Danwei[162])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[161]), 0x65303130, udg_Dian[162], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41303033)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_Danwei[162])
set udg_Danwei[92]=null
else
endif
call UnitDamageTarget(udg_Danwei[161], udg_Danwei[162], ( ( ( ( 55.00 + ( 45.00 * I2R(GetUnitAbilityLevel(udg_Danwei[161], 0x41304F37)) ) ) + ( 1.50 * I2R(GetHeroAgi(udg_Danwei[161], true)) ) ) / 5.00 ) * 1.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
if ( ( ( I2R(udg_Zhengshu[162]) / 2.00 ) == I2R(( udg_Zhengshu[162] / 2 )) ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Rifle\\RifleImpact.mdl", udg_Danwei[162], "chest"))
else
endif
endif
set udg_Dian[163]=GetUnitLoc(udg_Danwei[162])
if ( ( DistanceBetweenPoints(udg_Dian[162], udg_Dian[163]) < 400.00 ) ) then
set udg_Dian[164]=PolarProjectionBJ(udg_Dian[162], RMinBJ(( DistanceBetweenPoints(udg_Dian[162], udg_Dian[163]) + 20.00 ), 400.00), AngleBetweenPoints(udg_Dian[162], udg_Dian[163]))
if ( ( ( I2R(udg_Zhengshu[162]) / 3.00 ) == I2R(( udg_Zhengshu[162] / 3 )) ) ) then
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl", udg_Dian[163]))
else
endif
if ( ( IsTerrainPathableBJ(udg_Dian[164], PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(udg_Danwei[162], GetLocationX(udg_Dian[164]))
call SetUnitY(udg_Danwei[162], GetLocationY(udg_Dian[164]))
else
endif
call RemoveLocation(udg_Dian[164])
else
endif
call RemoveLocation(udg_Dian[163])
else
endif
set udg_Danwei[162]=null
endfunction
function Trig_xuanfengsheji_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_Zhengshu[162] == 23 ) ) then
set udg_Zhengshu[162]=( udg_Zhengshu[162] - 1 )
set udg_Dian[89]=GetUnitLoc(udg_Danwei[161])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[161]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304B58)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_Danwei[161])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
call StartTimerBJ(udg_Times[171], false, 0.01)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_Danwei[161]), 0x41304F37, false)
call UnitAddAbility(udg_Danwei[161], 0x41304F38)
else
if ( ( udg_Zhengshu[162] == 22 ) ) then
set udg_Zhengshu[162]=( udg_Zhengshu[162] - 1 )
call StartTimerBJ(udg_Times[171], false, 0.40)
call SetUnitAnimationByIndex(udg_Danwei[161], 9)
else
if ( ( udg_Zhengshu[162] == 21 ) ) then
call PlaySoundOnUnitBJ(gg_snd_RIFLE4, 100, udg_Danwei[161])
set udg_Zhengshu[162]=( udg_Zhengshu[162] - 1 )
call StartTimerBJ(udg_Times[171], true, 0.03)
set udg_Dian[162]=GetUnitLoc(udg_Danwei[161])
set udg_jubuzs1=1
loop
exitwhen udg_jubuzs1 > 2
call CreateNUnitsAtLoc(1, 0x65303832, GetOwningPlayer(udg_Danwei[161]), udg_Dian[162], GetUnitFacing(udg_Danwei[161]))
call UnitApplyTimedLife(bj_lastCreatedUnit, 0x42487765, 1.00)
call SetUnitTimeScale(bj_lastCreatedUnit, 1.50)
call SetUnitAnimation(bj_lastCreatedUnit, "death")
set udg_jubuzs1=udg_jubuzs1 + 1
endloop
call RemoveLocation(udg_Dian[162])
else
if ( ( udg_Zhengshu[162] > 0 ) and ( IsUnitType(udg_Danwei[161], UNIT_TYPE_DEAD) == false ) ) then
set udg_Zhengshu[162]=( udg_Zhengshu[162] - 1 )
set udg_Dian[162]=GetUnitLoc(udg_Danwei[161])
set udg_Danweizu[162]=YDWEGetUnitsInRangeOfLocAllNull(500.00 , udg_Dian[162])
call ForGroupBJ(udg_Danweizu[162], function Trig_xuanfengsheji_2Func001Func001Func005Func008Func007A)
call DestroyGroup(udg_Danweizu[162])
call RemoveLocation(udg_Dian[162])
if ( ( udg_Zhengshu[162] == 0 ) ) then
call PauseTimer(udg_Times[171])
call StartTimerBJ(udg_Times[171], false, 8.00)
else
endif
else
call GroupClear(udg_Danweizu[163])
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_Danwei[161]), 0x41304F37, true)
call UnitRemoveAbility(udg_Danwei[161], 0x41304F38)
endif
endif
endif
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_xuanfengsheji_2 takes nothing returns nothing
set gg_trg_xuanfengsheji_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_xuanfengsheji_2, udg_Times[171])
call TriggerAddAction(gg_trg_xuanfengsheji_2, function Trig_xuanfengsheji_2Actions)
endfunction
function Trig_sizhidan_0Conditions takes nothing returns boolean
return ( ( GetLearnedSkill() == 0x41304F37 ) and ( IsUnitType(GetTriggerUnit(), UNIT_TYPE_HERO) == true ) )
endfunction
function Trig_sizhidan_0Actions takes nothing returns nothing
if ( ( GetTriggerExecCount(GetTriggeringTrigger()) == 1 ) ) then
set udg_Danwei[161]=GetTriggerUnit()
set udg_Zhengshu[166]=1
call StartTimerBJ(udg_Times[176], true, 0.20)
else
endif
endfunction
function InitTrig_sizhidan_0 takes nothing returns nothing
set gg_trg_sizhidan_0=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_sizhidan_0, EVENT_PLAYER_HERO_SKILL)
call TriggerAddCondition(gg_trg_sizhidan_0, Condition(function Trig_sizhidan_0Conditions))
call TriggerAddAction(gg_trg_sizhidan_0, function Trig_sizhidan_0Actions)
endfunction
function Trig_sizhidan_1Actions takes nothing returns nothing
set udg_Danwei[161]=GetTriggerUnit()
set udg_Zhengshu[161]=2
call StartTimerBJ(udg_Times[170], false, 0.00)
call PauseTimer(udg_Times[171])
call StartTimerBJ(udg_Times[171], false, 60.00)
set udg_Dian[168]=GetUnitLoc(udg_Danwei[161])
call PlaySoundAtPointBJ(gg_snd_4zd3, 100, udg_Dian[168], 500.00)
call RemoveLocation(udg_Dian[168])
endfunction
function InitTrig_sizhidan_1 takes nothing returns nothing
set gg_trg_sizhidan_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_sizhidan_1 , 3 , 0x41304F38)
call TriggerAddAction(gg_trg_sizhidan_1, function Trig_sizhidan_1Actions)
endfunction
function Trig_sizhidan_2Actions takes nothing returns nothing
set udg_shishukuangshan[udg_Zhengshu[166]]=GetUnitState(udg_Danwei[161], UNIT_STATE_LIFE)
if ( ( udg_Zhengshu[166] == 40 ) ) then
set udg_Zhengshu[166]=1
else
set udg_Zhengshu[166]=( udg_Zhengshu[166] + 1 )
endif
endfunction
function InitTrig_sizhidan_2 takes nothing returns nothing
set gg_trg_sizhidan_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_sizhidan_2, udg_Times[176])
call TriggerAddAction(gg_trg_sizhidan_2, function Trig_sizhidan_2Actions)
endfunction
function Trig_sizhidan_3Actions takes nothing returns nothing
if ( ( udg_Zhengshu[161] == 2 ) ) then
set udg_Zhengshu[161]=( udg_Zhengshu[161] - 1 )
set udg_Dian[89]=GetUnitLoc(udg_Danwei[161])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[161]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304F39)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_Danwei[161])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
call StartTimerBJ(udg_Times[170], false, 1.60)
call SetUnitAnimationByIndex(udg_Danwei[161], 5)
set udg_Zhengshu[170]=1
else
if ( ( udg_Zhengshu[161] == 1 ) and ( IsUnitType(udg_Danwei[161], UNIT_TYPE_DEAD) == false ) ) then
set udg_Zhengshu[170]=0
call UnitRemoveBuffBJ(0x42505345, udg_Danwei[161])
set udg_Zhengshu[161]=( udg_Zhengshu[161] - 1 )
call StopSoundBJ(gg_snd_RIFLE3HD, false)
call PlaySoundOnUnitBJ(gg_snd_RIFLE3HD, 100, udg_Danwei[161])
set udg_shishukuangshan[0]=GetUnitState(udg_Danwei[161], UNIT_STATE_LIFE)
set udg_zhengshuex[0]=1
loop
exitwhen udg_zhengshuex[0] > 40
if ( ( udg_shishukuangshan[udg_zhengshuex[0]] > udg_shishukuangshan[0] ) ) then
set udg_shishukuangshan[0]=udg_shishukuangshan[udg_zhengshuex[0]]
else
endif
set udg_zhengshuex[0]=udg_zhengshuex[0] + 1
endloop
call SetUnitLifeBJ(udg_Danwei[161], udg_shishukuangshan[0])
call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\A13_hong.mdx", udg_Danwei[161], "chest"))
else
endif
endif
endfunction
function InitTrig_sizhidan_3 takes nothing returns nothing
set gg_trg_sizhidan_3=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_sizhidan_3, udg_Times[170])
call TriggerAddAction(gg_trg_sizhidan_3, function Trig_sizhidan_3Actions)
endfunction
function Trig_yizhidan_1Actions takes nothing returns nothing
set udg_Danwei[161]=GetTriggerUnit()
set udg_Zhengshu[165]=3
call StartTimerBJ(udg_Times[174], false, 0.00)
set udg_Dian[168]=GetUnitLoc(udg_Danwei[161])
call PlaySoundAtPointBJ(gg_snd_ks3, 100, udg_Dian[168], 500.00)
call RemoveLocation(udg_Dian[168])
endfunction
function InitTrig_yizhidan_1 takes nothing returns nothing
set gg_trg_yizhidan_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_yizhidan_1 , 3 , 0x41304F4A)
call TriggerAddAction(gg_trg_yizhidan_1, function Trig_yizhidan_1Actions)
endfunction
function Trig_yizhidan_2Func001Func001Func009A takes nothing returns nothing
call UnitAddAbility(GetEnumUnit(), 0x41304F51)
call SetUnitAbilityLevel(GetEnumUnit(), 0x41304F51, GetUnitAbilityLevel(udg_Danwei[161], 0x41304F4A))
endfunction
function Trig_yizhidan_2Func001Func001Func012Func006A takes nothing returns nothing
call UnitRemoveAbility(GetEnumUnit(), 0x41304F51)
endfunction
function Trig_yizhidan_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_Zhengshu[165] == 3 ) ) then
set udg_Zhengshu[165]=( udg_Zhengshu[165] - 1 )
set udg_Dian[89]=GetUnitLoc(udg_Danwei[161])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[161]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304F39)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_Danwei[161])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
call StartTimerBJ(udg_Times[174], false, 1.60)
call SetUnitAnimationByIndex(udg_Danwei[161], 5)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_Danwei[161]), 0x41304F4A, false)
call UnitAddAbility(udg_Danwei[161], 0x41304F49)
if ( ( GetUnitAbilityLevel(udg_Danwei[161], 0x41304F4A) >= 4 ) ) then
set udg_Zhengshu[168]=3
else
set udg_Zhengshu[168]=2
endif
set udg_Zhengshu[169]=1
set udg_Zhengshu[170]=1
else
if ( ( udg_Zhengshu[165] == 2 ) ) then
set udg_Zhengshu[165]=( udg_Zhengshu[165] - 1 )
set udg_Zhengshu[170]=0
call UnitRemoveBuffBJ(0x42505345, udg_Danwei[161])
call StopSoundBJ(gg_snd_RIFLE3HD, false)
call PlaySoundOnUnitBJ(gg_snd_RIFLE3HD, 100, udg_Danwei[161])
call StartTimerBJ(udg_Times[174], false, ( 10.90 + ( 1.00 * I2R(GetUnitAbilityLevel(udg_Danwei[161], 0x41304F4A)) ) ))
call UnitAddAbility(udg_Danwei[161], 0x41304F51)
call SetUnitAbilityLevel(udg_Danwei[161], 0x41304F51, GetUnitAbilityLevel(udg_Danwei[161], 0x41304F4A))
call ForGroupBJ(udg_Danweizu[164], function Trig_yizhidan_2Func001Func001Func009A)
call StartTimerBJ(udg_jishiqi[178], false, 3.00)
else
if ( ( udg_Zhengshu[165] == 1 ) ) then
set udg_Zhengshu[165]=( udg_Zhengshu[165] - 1 )
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_Danwei[161]), 0x41304F4A, true)
call UnitRemoveAbility(udg_Danwei[161], 0x41304F49)
call UnitRemoveAbility(udg_Danwei[161], 0x41304F51)
call ForGroupBJ(udg_Danweizu[164], function Trig_yizhidan_2Func001Func001Func012Func006A)
else
endif
endif
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_yizhidan_2 takes nothing returns nothing
set gg_trg_yizhidan_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_yizhidan_2, udg_Times[174])
call TriggerAddAction(gg_trg_yizhidan_2, function Trig_yizhidan_2Actions)
endfunction
function Trig_yizhidan_shunyi_1Actions takes nothing returns nothing
set udg_Danwei[161]=GetTriggerUnit()
set udg_Zhengshu[164]=21
set udg_Dian[162]=GetUnitLoc(udg_Danwei[161])
set udg_Dian[163]=GetSpellTargetLoc()
set udg_Dian[165]=PolarProjectionBJ(udg_Dian[162], RMinBJ(( ( 400.00 + ( 50.00 * I2R(GetUnitAbilityLevel(udg_Danwei[161], 0x41304F4A)) ) ) + ( 1.00 * I2R(GetHeroAgi(udg_Danwei[161], true)) ) ), DistanceBetweenPoints(udg_Dian[162], udg_Dian[163])), AngleBetweenPoints(udg_Dian[162], udg_Dian[163]))
call RemoveLocation(udg_Dian[162])
call RemoveLocation(udg_Dian[163])
call StartTimerBJ(udg_Times[173], false, 0.00)
endfunction
function InitTrig_yizhidan_shunyi_1 takes nothing returns nothing
set gg_trg_yizhidan_shunyi_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_yizhidan_shunyi_1 , 3 , 0x41304F49)
call TriggerAddAction(gg_trg_yizhidan_shunyi_1, function Trig_yizhidan_shunyi_1Actions)
endfunction
function Trig_yizhidan_shunyi_2Func001Func001Func001Func001Func003A takes nothing returns nothing
call UnitAddAbility(GetEnumUnit(), 0x41304F51)
call SetUnitAbilityLevel(GetEnumUnit(), 0x41304F51, GetUnitAbilityLevel(udg_Danwei[161], 0x41304F4A))
endfunction
function Trig_yizhidan_shunyi_2Func001Func001Func006Func005Func002A takes nothing returns nothing
set udg_Danwei[162]=GetEnumUnit()
if ( ( IsUnitType(udg_Danwei[162], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_Danwei[162], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_Danwei[162], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_Danwei[162], GetOwningPlayer(udg_Danwei[161])) == true ) ) then
else
call GroupRemoveUnit(udg_Danweizu[162], udg_Danwei[162])
endif
set udg_Danwei[162]=null
endfunction
function Trig_yizhidan_shunyi_2Func001Func001Func006Func005Func003Func012A takes nothing returns nothing
set udg_Danwei[162]=GetEnumUnit()
if ( ( IsUnitType(udg_Danwei[162], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_Danwei[162], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_Danwei[162], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_Danwei[162], GetOwningPlayer(udg_Danwei[161])) == true ) ) then
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "slow" , udg_Danwei[162])
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\OrbOfDeath\\AnnihilationMissile.mdl", udg_Danwei[162], "chest"))
call UnitDamageTarget(udg_Danwei[161], udg_Danwei[162], ( ( ( ( 25.00 + ( 25.00 * I2R(GetUnitAbilityLevel(udg_Danwei[161], 0x41304F4A)) ) ) + ( 1.00 * I2R(GetHeroAgi(udg_Danwei[161], true)) ) ) * 1.00 ) * 1.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
else
endif
set udg_Danwei[162]=null
endfunction
function Trig_yizhidan_shunyi_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_Zhengshu[164] == 21 ) ) then
set udg_Zhengshu[164]=( udg_Zhengshu[164] - 1 )
set udg_Dian[89]=GetUnitLoc(udg_Danwei[161])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[161]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304B4F)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_Danwei[161])
set udg_Danwei[92]=null
set udg_Danwei[165]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[161]), 0x65303835, udg_Dian[89], AngleBetweenPoints(udg_Dian[89], udg_Dian[165]))
call SetUnitAnimation(udg_Danwei[165], "death")
call SetUnitTimeScale(udg_Danwei[165], 0.00)
call RemoveLocation(udg_Dian[89])
call StartTimerBJ(udg_Times[173], true, 0.03)
set udg_Zhengshu[168]=( udg_Zhengshu[168] - 1 )
if ( ( udg_Zhengshu[168] == 0 ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_Danwei[161]), 0x41304F4A, true)
call UnitRemoveAbility(udg_Danwei[161], 0x41304F49)
else
endif
call StopSoundBJ(gg_snd_ZigguratMissileLaunch1, false)
call PlaySoundOnUnitBJ(gg_snd_ZigguratMissileLaunch1, 100, udg_Danwei[161])
else
if ( ( udg_Zhengshu[164] > 10 ) ) then
set udg_Zhengshu[164]=( udg_Zhengshu[164] - 1 )
call SetUnitVertexColor(udg_Danwei[161], 255, 255, 255, ( 0 + ( 25 * ( udg_Zhengshu[164] - 10 ) ) ))
call SetUnitScale(udg_Danwei[165], ( 0.00 + ( 0.05 * ( I2R(udg_Zhengshu[164]) - 10.00 ) ) ), ( 0.00 + ( 0.05 * ( I2R(udg_Zhengshu[164]) - 10.00 ) ) ), ( 0.00 + ( 0.05 * ( I2R(udg_Zhengshu[164]) - 10.00 ) ) ))
call s__maphack_SetHeight(udg_Danwei[165] , ( 90.00 - ( 9.00 * ( I2R(udg_Zhengshu[164]) - 10.00 ) ) ) , 0.00)
if ( ( udg_Zhengshu[164] == 10 ) ) then
call SetUnitX(udg_Danwei[161], GetLocationX(udg_Dian[165]))
call SetUnitY(udg_Danwei[161], GetLocationY(udg_Dian[165]))
call SetUnitX(udg_Danwei[165], GetLocationX(udg_Dian[165]))
call SetUnitY(udg_Danwei[165], GetLocationY(udg_Dian[165]))
if ( ( udg_Zhengshu[169] == 1 ) ) then
set udg_Danweizu[162]=YDWEGetUnitsInRangeOfLocAllNull(250.00 , udg_Dian[165])
call ForGroupBJ(udg_Danweizu[162], function Trig_yizhidan_shunyi_2Func001Func001Func006Func005Func002A)
if ( ( IsUnitGroupEmptyBJ(udg_Danweizu[162]) == false ) ) then
call DestroyGroup(udg_Danweizu[162])
set udg_Zhengshu[169]=0
set udg_Danwei[166]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[161]), 0x65303838, udg_Dian[165], 0)
call UnitApplyTimedLife(udg_Danwei[166], 0x42487765, 1.50)
set udg_Danwei[166]=null
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[161]), 0x65303130, udg_Dian[165], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304F52)
set udg_Danweizu[162]=YDWEGetUnitsInRangeOfLocAllNull(250.00 , udg_Dian[165])
call ForGroupBJ(udg_Danweizu[162], function Trig_yizhidan_shunyi_2Func001Func001Func006Func005Func003Func012A)
call DestroyGroup(udg_Danweizu[162])
set udg_Danwei[92]=null
else
call DestroyGroup(udg_Danweizu[162])
endif
else
endif
else
endif
else
if ( ( udg_Zhengshu[164] > 0 ) ) then
set udg_Zhengshu[164]=( udg_Zhengshu[164] - 1 )
call SetUnitVertexColor(udg_Danwei[161], 255, 255, 255, ( 0 - ( 25 * ( udg_Zhengshu[164] - 10 ) ) ))
call SetUnitScale(udg_Danwei[165], ( 0.00 - ( 0.05 * ( I2R(udg_Zhengshu[164]) - 10.00 ) ) ), ( 0.00 - ( 0.05 * ( I2R(udg_Zhengshu[164]) - 10.00 ) ) ), ( 0.00 - ( 0.05 * ( I2R(udg_Zhengshu[164]) - 10.00 ) ) ))
call s__maphack_SetHeight(udg_Danwei[165] , ( 90.00 + ( 9.00 * ( I2R(udg_Zhengshu[164]) - 10.00 ) ) ) , 0.00)
else
if ( ( udg_Zhengshu[164] > - 10 ) ) then
set udg_Zhengshu[164]=( udg_Zhengshu[164] - 1 )
call SetUnitVertexColor(udg_Danwei[165], 100, 0, 35, ( 250 + ( 25 * udg_Zhengshu[164] ) ))
else
call UnitAddAbility(udg_Danwei[161], 0x41304F51)
call SetUnitAbilityLevel(udg_Danwei[161], 0x41304F51, GetUnitAbilityLevel(udg_Danwei[161], 0x41304F4A))
call ForGroupBJ(udg_Danweizu[164], function Trig_yizhidan_shunyi_2Func001Func001Func001Func001Func003A)
call StartTimerBJ(udg_jishiqi[178], false, RMaxBJ(1.50, TimerGetRemaining(udg_jishiqi[178])))
call RemoveLocation(udg_Dian[165])
call KillUnit(udg_Danwei[165])
call SetUnitTimeScale(udg_Danwei[165], 5.00)
call PauseTimer(udg_Times[173])
call SetUnitVertexColor(udg_Danwei[161], 255, 255, 255, 255)
endif
endif
endif
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_yizhidan_shunyi_2 takes nothing returns nothing
set gg_trg_yizhidan_shunyi_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_yizhidan_shunyi_2, udg_Times[173])
call TriggerAddAction(gg_trg_yizhidan_shunyi_2, function Trig_yizhidan_shunyi_2Actions)
endfunction
function Trig_yizhidangongsuFunc002A takes nothing returns nothing
call UnitRemoveAbility(GetEnumUnit(), 0x41304F51)
endfunction
function Trig_yizhidangongsuActions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
call UnitRemoveAbility(udg_Danwei[161], 0x41304F51)
call ForGroupBJ(udg_Danweizu[164], function Trig_yizhidangongsuFunc002A)
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_yizhidangongsu takes nothing returns nothing
set gg_trg_yizhidangongsu=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_yizhidangongsu, udg_jishiqi[178])
call TriggerAddAction(gg_trg_yizhidangongsu, function Trig_yizhidangongsuActions)
endfunction
function Trig_qizhidan_1Actions takes nothing returns nothing
set udg_Danwei[161]=GetTriggerUnit()
set udg_Danwei[163]=GetSpellTargetUnit()
set udg_Zhengshu[163]=5
call StartTimerBJ(udg_Times[172], false, 0.00)
set udg_Dian[168]=GetUnitLoc(udg_Danwei[161])
call PlaySoundAtPointBJ(gg_snd_7zd3, 100, udg_Dian[168], 500.00)
call RemoveLocation(udg_Dian[168])
endfunction
function InitTrig_qizhidan_1 takes nothing returns nothing
set gg_trg_qizhidan_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_qizhidan_1 , 3 , 0x41304F41)
call TriggerAddAction(gg_trg_qizhidan_1, function Trig_qizhidan_1Actions)
endfunction
function Trig_qizhidan_2Func001Func001Func021Func005T takes nothing returns nothing
call SetUnitX(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x62274AD0), LoadReal(YDHT, GetHandleId(GetExpiredTimer()), 0xE1E302A1))
call SetUnitY(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x62274AD0), LoadReal(YDHT, GetHandleId(GetExpiredTimer()), 0x8E7ECCD1))
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x300B6E6B, ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x300B6E6B) - 1 ))
if ( ( ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x300B6E6B) == 0 ) or ( IsUnitType(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x62274AD0), UNIT_TYPE_DEAD) == true ) ) ) then
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
else
endif
endfunction
function Trig_qizhidan_2Actions takes nothing returns nothing
local timer ydl_timer
local integer ydl_localvar_step=LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76)
set ydl_localvar_step=ydl_localvar_step + 3
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76, ydl_localvar_step)
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xECE825E7, ydl_localvar_step)
if ( ( udg_Zhengshu[163] == 5 ) ) then
set udg_Zhengshu[163]=( udg_Zhengshu[163] - 1 )
set udg_Dian[89]=GetUnitLoc(udg_Danwei[161])
set udg_Danwei[92]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[161]), 0x65303130, udg_Dian[89], 0)
call UnitApplyTimedLife(udg_Danwei[92], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[92], 0x41304B57)
call s__baka_IssueTargetOrder2(udg_Danwei[92] , "thunderbolt" , udg_Danwei[161])
set udg_Danwei[92]=null
call RemoveLocation(udg_Dian[89])
call StartTimerBJ(udg_Times[172], false, 1.80)
call SetUnitAnimationByIndex(udg_Danwei[161], 6)
set udg_Dian[162]=GetUnitLoc(udg_Danwei[163])
set udg_Danwei[164]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[161]), 0x65303551, udg_Dian[162], 0)
call RemoveLocation(udg_Dian[162])
set udg_Zhengshu[170]=1
else
if ( ( udg_Zhengshu[163] == 4 ) ) then
set udg_Zhengshu[170]=0
call UnitRemoveBuffBJ(0x42505345, udg_Danwei[161])
call RemoveUnit(udg_Danwei[164])
set udg_Zhengshu[163]=( udg_Zhengshu[163] - 1 )
set udg_Dian[162]=GetUnitLoc(udg_Danwei[164])
call SetUnitX(udg_Danwei[163], GetLocationX(udg_Dian[162]))
call SetUnitY(udg_Danwei[163], GetLocationY(udg_Dian[162]))
call RemoveLocation(udg_Dian[162])
set udg_Dian[162]=GetUnitLoc(udg_Danwei[163])
set udg_Danwei[164]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[161]), 0x65303833, udg_Dian[162], 0)
call RemoveLocation(udg_Dian[162])
call s__Unit_PauseUnitMU(udg_Danwei[163] , true , "七之弹")
call SetUnitTimeScale(udg_Danwei[163], 0.00)
call SetUnitVertexColor(udg_Danwei[163], 128, 128, 128, 128)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\RocketMissile\\RocketMissile.mdl", udg_Danwei[163], "chest"))
call StartTimerBJ(udg_Times[172], false, 0.70)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_Danwei[161]), 0x41304F41, false)
call UnitAddAbility(udg_Danwei[161], 0x41304F4B)
call StopSoundBJ(gg_snd_RIFLE3HD, false)
call PlaySoundOnUnitBJ(gg_snd_RIFLE3HD, 100, udg_Danwei[161])
else
if ( ( udg_Zhengshu[163] == 3 ) ) then
set udg_Zhengshu[163]=( udg_Zhengshu[163] - 1 )
call StartTimerBJ(udg_Times[172], false, ( 2.25 + ( 0.25 * I2R(GetUnitAbilityLevel(udg_Danwei[161], 0x41304F41)) ) ))
call SetUnitTimeScale(udg_Danwei[164], 0.00)
set ydl_timer=CreateTimer()
call SaveInteger(YDHT, GetHandleId(ydl_timer), 0x300B6E6B, R2I(( TimerGetTimeout(udg_Times[172]) / 0.03 )))
call SaveReal(YDHT, GetHandleId(ydl_timer), 0xE1E302A1, GetUnitX(udg_Danwei[164]))
call SaveReal(YDHT, GetHandleId(ydl_timer), 0x8E7ECCD1, GetUnitY(udg_Danwei[164]))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x62274AD0, udg_Danwei[163])
call TimerStart(ydl_timer, 0.03, true, function Trig_qizhidan_2Func001Func001Func021Func005T)
else
if ( ( udg_Zhengshu[163] == 2 ) ) then
set udg_Zhengshu[163]=( udg_Zhengshu[163] - 1 )
call s__Unit_PauseUnitMU(udg_Danwei[163] , false , "七之弹")
call SetUnitTimeScale(udg_Danwei[163], 1.00)
call SetUnitVertexColor(udg_Danwei[163], 255, 255, 255, 255)
call StartTimerBJ(udg_Times[172], false, 3.00)
call RemoveUnit(udg_Danwei[164])
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_Danwei[161]), 0x41304F41, true)
call UnitRemoveAbility(udg_Danwei[161], 0x41304F4B)
else
if ( ( udg_Zhengshu[163] == 1 ) and ( IsTriggerEnabled(gg_trg_fengkuangsheji_3) == true ) ) then
call PauseTimer(udg_Times[175])
call DisableTrigger(gg_trg_fengkuangsheji_3)
call DisableTrigger(gg_trg_fengkuangsheji_3_5)
call ResetUnitAnimation(udg_Danwei[161])
call UnitRemoveAbility(udg_Danwei[161], 0x4162756E)
else
endif
endif
endif
endif
endif
call FlushChildHashtable(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step)
set ydl_timer=null
endfunction
function InitTrig_qizhidan_2 takes nothing returns nothing
set gg_trg_qizhidan_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_qizhidan_2, udg_Times[172])
call TriggerAddAction(gg_trg_qizhidan_2, function Trig_qizhidan_2Actions)
endfunction
function Trig_fengkuangsheji_1Actions takes nothing returns nothing
set udg_Danwei[161]=GetTriggerUnit()
call StopSoundBJ(gg_snd_RIFLE2HD, false)
call PlaySoundOnUnitBJ(gg_snd_RIFLE2HD, 100, udg_Danwei[161])
set udg_Dian[162]=GetUnitLoc(udg_Danwei[161])
set udg_Dian[163]=GetUnitLoc(udg_Danwei[163])
call SetUnitFacing(udg_Danwei[161], AngleBetweenPoints(udg_Dian[162], udg_Dian[163]))
call RemoveLocation(udg_Dian[162])
call RemoveLocation(udg_Dian[163])
if ( ( GetTriggerExecCount(GetTriggeringTrigger()) == 1 ) ) then
call TriggerRegisterUnitEvent(gg_trg_fengkuangsheji_3, udg_Danwei[161], EVENT_UNIT_ISSUED_POINT_ORDER)
call TriggerRegisterUnitEvent(gg_trg_fengkuangsheji_3, udg_Danwei[161], EVENT_UNIT_ISSUED_TARGET_ORDER)
call TriggerRegisterUnitEvent(gg_trg_fengkuangsheji_3_5, udg_Danwei[161], EVENT_UNIT_ISSUED_ORDER)
else
endif
call StartTimerBJ(udg_Times[175], false, 0.00)
call SetPlayerAbilityAvailable(GetOwningPlayer(udg_Danwei[161]), 0x41304F41, true)
call UnitRemoveAbility(udg_Danwei[161], 0x41304F4B)
endfunction
function InitTrig_fengkuangsheji_1 takes nothing returns nothing
set gg_trg_fengkuangsheji_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_fengkuangsheji_1 , 3 , 0x41304F4B)
call TriggerAddAction(gg_trg_fengkuangsheji_1, function Trig_fengkuangsheji_1Actions)
endfunction
function Trig_fengkuangsheji_2Actions takes nothing returns nothing
if ( ( IsTriggerEnabled(gg_trg_fengkuangsheji_3) == true ) ) then
set udg_Dian[162]=GetUnitLoc(udg_Danwei[161])
set udg_Dian[163]=GetUnitLoc(udg_Danwei[163])
if ( ( IsUnitType(udg_Danwei[161], UNIT_TYPE_DEAD) == false ) and ( IsUnitType(udg_Danwei[163], UNIT_TYPE_DEAD) == false ) and ( UnitHasBuffBJ(udg_Danwei[161], 0x42505345) == false ) and ( IsUnitPausedBJ(udg_Danwei[161]) == false ) and ( DistanceBetweenPoints(udg_Dian[162], udg_Dian[163]) <= 1000.00 ) ) then
call StopSoundBJ(gg_snd_RIFLE2HD, false)
call PlaySoundOnUnitBJ(gg_snd_RIFLE2HD, 100, udg_Danwei[161])
call SetUnitFacing(udg_Danwei[161], AngleBetweenPoints(udg_Dian[162], udg_Dian[163]))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\RocketMissile\\RocketMissile.mdl", udg_Danwei[163], "chest"))
call UnitAddAbility(udg_Danwei[163], 0x41304F42)
call UnitDamageTarget(udg_Danwei[161], udg_Danwei[163], ( ( ( ( 0.00 + ( 15.00 * I2R(GetUnitAbilityLevel(udg_Danwei[161], 0x41304F41)) ) ) + ( 0.40 * I2R(GetHeroAgi(udg_Danwei[161], true)) ) ) * 1.00 ) * 1.00 ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_WHOKNOWS)
call UnitRemoveAbility(udg_Danwei[163], 0x41304F42)
else
call PauseTimer(udg_Times[175])
call DisableTrigger(gg_trg_fengkuangsheji_3)
call DisableTrigger(gg_trg_fengkuangsheji_3_5)
call ResetUnitAnimation(udg_Danwei[161])
call UnitRemoveAbility(udg_Danwei[161], 0x4162756E)
endif
call RemoveLocation(udg_Dian[162])
call RemoveLocation(udg_Dian[163])
else
call EnableTrigger(gg_trg_fengkuangsheji_3)
call EnableTrigger(gg_trg_fengkuangsheji_3_5)
call StartTimerBJ(udg_Times[175], true, 0.30)
call SetUnitAnimationByIndex(udg_Danwei[161], 8)
call UnitAddAbility(udg_Danwei[161], 0x4162756E)
endif
endfunction
function InitTrig_fengkuangsheji_2 takes nothing returns nothing
set gg_trg_fengkuangsheji_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_fengkuangsheji_2, udg_Times[175])
call TriggerAddAction(gg_trg_fengkuangsheji_2, function Trig_fengkuangsheji_2Actions)
endfunction
function Trig_fengkuangsheji_3Actions takes nothing returns nothing
call PauseTimer(udg_Times[175])
call DisableTrigger(gg_trg_fengkuangsheji_3)
call DisableTrigger(gg_trg_fengkuangsheji_3_5)
call UnitRemoveAbility(udg_Danwei[161], 0x4162756E)
endfunction
function InitTrig_fengkuangsheji_3 takes nothing returns nothing
set gg_trg_fengkuangsheji_3=CreateTrigger()
call DisableTrigger(gg_trg_fengkuangsheji_3)
call TriggerAddAction(gg_trg_fengkuangsheji_3, function Trig_fengkuangsheji_3Actions)
endfunction
function Trig_fengkuangsheji_3_5Conditions takes nothing returns boolean
return ( ( ( GetIssuedOrderIdBJ() == String2OrderIdBJ("stop") ) or ( GetIssuedOrderIdBJ() == String2OrderIdBJ("holdposition") ) ) )
endfunction
function Trig_fengkuangsheji_3_5Actions takes nothing returns nothing
call PauseTimer(udg_Times[175])
call DisableTrigger(gg_trg_fengkuangsheji_3)
call DisableTrigger(gg_trg_fengkuangsheji_3_5)
call ResetUnitAnimation(udg_Danwei[161])
call UnitRemoveAbility(udg_Danwei[161], 0x4162756E)
endfunction
function InitTrig_fengkuangsheji_3_5 takes nothing returns nothing
set gg_trg_fengkuangsheji_3_5=CreateTrigger()
call DisableTrigger(gg_trg_fengkuangsheji_3_5)
call TriggerAddCondition(gg_trg_fengkuangsheji_3_5, Condition(function Trig_fengkuangsheji_3_5Conditions))
call TriggerAddAction(gg_trg_fengkuangsheji_3_5, function Trig_fengkuangsheji_3_5Actions)
endfunction
function Trig_shishizhicheng_1Func012A takes nothing returns nothing
set udg_Danwei[162]=GetEnumUnit()
if ( ( IsUnitType(udg_Danwei[162], UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(udg_Danwei[162], UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(udg_Danwei[162], UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(udg_Danwei[162], GetOwningPlayer(udg_Danwei[161])) == true ) ) then
call UnitDamageTarget(udg_Danwei[161], udg_Danwei[162], ( ( GetUnitState(udg_Danwei[162], UNIT_STATE_LIFE) * 0.10 ) * 1.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_WHOKNOWS)
set udg_Dian[162]=GetUnitLoc(udg_Danwei[162])
set udg_Danwei[166]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[161]), 0x6530375A, udg_Dian[162], AngleBetweenPoints(udg_Dian[162], udg_Dian[167]))
call SetUnitManaBJ(udg_Danwei[166], ( ( DistanceBetweenPoints(udg_Dian[162], udg_Dian[167]) * 0.50 ) * 0.01 ))
call GroupAddUnit(udg_Danweizu[159], udg_Danwei[166])
set udg_Danwei[166]=null
call RemoveLocation(udg_Dian[162])
else
endif
set udg_Danwei[162]=null
endfunction
function Trig_shishizhicheng_1Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
set udg_Danwei[161]=GetTriggerUnit()
set udg_Dian[167]=GetUnitLoc(udg_Danwei[161])
set udg_Danwei[166]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[161]), 0x65303837, udg_Dian[167], 0)
call UnitApplyTimedLife(udg_Danwei[166], 0x42487765, 10.00)
set udg_Danwei[166]=null
set udg_Danwei[166]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[161]), 0x65303836, udg_Dian[167], 0)
call UnitApplyTimedLife(udg_Danwei[166], 0x42487765, 10.00)
set udg_Danwei[166]=null
set udg_Zhengshu[167]=20
call StartTimerBJ(udg_Times[177], true, 0.50)
set udg_Danweizu[162]=YDWEGetUnitsInRangeOfLocAllNull(800.00 , udg_Dian[167])
call ForGroupBJ(udg_Danweizu[162], function Trig_shishizhicheng_1Func012A)
call DestroyGroup(udg_Danweizu[162])
call PlaySoundOnUnitBJ(gg_snd_SoulGem, 100, udg_Danwei[161])
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_shishizhicheng_1 takes nothing returns nothing
set gg_trg_shishizhicheng_1=CreateTrigger()
call s__Event_AnyUnitSkill(gg_trg_shishizhicheng_1 , 3 , 0x41304F4F)
call TriggerAddAction(gg_trg_shishizhicheng_1, function Trig_shishizhicheng_1Actions)
endfunction
function Trig_shishizhicheng_2Func001Func001A takes nothing returns nothing
if ( ( IsUnitType(GetEnumUnit(), UNIT_TYPE_HERO) == false ) ) then
call UnitRemoveAbility(GetEnumUnit(), 0x41304F54)
else
call UnitRemoveAbility(GetEnumUnit(), 0x41304F53)
endif
call UnitRemoveBuffBJ(0x4230334E, GetEnumUnit())
endfunction
function Trig_shishizhicheng_2Func001Func009A takes nothing returns nothing
set udg_Dian[163]=GetUnitLoc(GetEnumUnit())
if ( ( UnitHasBuffBJ(GetEnumUnit(), 0x4230334E) == false ) and ( IsUnitType(GetEnumUnit(), UNIT_TYPE_DEAD) == false ) and ( DistanceBetweenPoints(udg_Dian[163], udg_Dian[167]) < 800.00 ) ) then
if ( ( IsUnitType(GetEnumUnit(), UNIT_TYPE_HERO) == false ) ) then
call UnitAddAbility(GetEnumUnit(), 0x41304F54)
else
call UnitAddAbility(GetEnumUnit(), 0x41304F53)
endif
else
endif
if ( ( DistanceBetweenPoints(udg_Dian[163], udg_Dian[167]) > 800.00 ) ) then
if ( ( IsUnitType(GetEnumUnit(), UNIT_TYPE_HERO) == false ) ) then
call UnitRemoveAbility(GetEnumUnit(), 0x41304F54)
else
call UnitRemoveAbility(GetEnumUnit(), 0x41304F53)
endif
call UnitRemoveBuffBJ(0x4230334E, GetEnumUnit())
call GroupRemoveUnit(udg_Danweizu[165], GetEnumUnit())
else
endif
call RemoveLocation(udg_Dian[163])
endfunction
function Trig_shishizhicheng_2Actions takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( udg_Zhengshu[167] > 0 ) ) then
set udg_Zhengshu[167]=( udg_Zhengshu[167] - 1 )
if ( ( udg_Zhengshu[167] > 5 ) ) then
set udg_Danwei[166]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[161]), 0x65303834, udg_Dian[167], 0)
call SetUnitTimeScale(udg_Danwei[166], 0.30)
call UnitApplyTimedLife(udg_Danwei[166], 0x42487765, 5.00)
set udg_Danwei[166]=null
else
endif
if ( ( IsUnitType(udg_Danwei[161], UNIT_TYPE_DEAD) == false ) and ( udg_Zhengshu[167] > 11 ) ) then
set udg_Danwei[166]=CreateUnitAtLoc(GetOwningPlayer(udg_Danwei[161]), 0x65303130, udg_Dian[167], 0)
call UnitApplyTimedLife(udg_Danwei[166], 0x42487765, 0.50)
call UnitAddAbility(udg_Danwei[166], 0x41304F4C)
call s__baka_IssueTargetOrderById2(udg_Danwei[166] , 852274 , udg_Danwei[161])
set udg_Danwei[166]=null
else
endif
set ydl_group=CreateGroup()
call GroupEnumUnitsInRange(ydl_group, GetLocationX(udg_Dian[167]), GetLocationY(udg_Dian[167]), 800.00, null)
loop
set ydl_unit=FirstOfGroup(ydl_group)
exitwhen ydl_unit == null
call GroupRemoveUnit(ydl_group, ydl_unit)
if ( ( IsUnitType(ydl_unit, UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(ydl_unit, UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(ydl_unit, UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(ydl_unit, GetOwningPlayer(udg_Danwei[161])) == true ) and ( IsUnitInGroup(ydl_unit, udg_Danweizu[165]) == false ) ) then
if ( ( IsUnitType(ydl_unit, UNIT_TYPE_HERO) == false ) ) then
call UnitAddAbility(ydl_unit, 0x41304F54)
else
call UnitAddAbility(ydl_unit, 0x41304F53)
endif
call GroupAddUnit(udg_Danweizu[165], ydl_unit)
else
endif
endloop
call DestroyGroup(ydl_group)
call ForGroupBJ(udg_Danweizu[165], function Trig_shishizhicheng_2Func001Func009A)
else
call ForGroupBJ(udg_Danweizu[165], function Trig_shishizhicheng_2Func001Func001A)
call GroupClear(udg_Danweizu[165])
call RemoveLocation(udg_Dian[167])
endif
set ydl_group=null
set ydl_unit=null
endfunction
function InitTrig_shishizhicheng_2 takes nothing returns nothing
set gg_trg_shishizhicheng_2=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_shishizhicheng_2, udg_Times[177])
call TriggerAddAction(gg_trg_shishizhicheng_2, function Trig_shishizhicheng_2Actions)
endfunction
function Trig_shishizhicheng_3Conditions takes nothing returns boolean
return ( ( GetUnitAbilityLevel(GetSummoningUnit(), 0x41304F4C) == 1 ) and ( IsUnitIllusionBJ(GetSummonedUnit()) == true ) )
endfunction
function Trig_shishizhicheng_3Func010T takes nothing returns nothing
if ( ( GetUnitAbilityLevel(udg_Danwei[161], 0x41304F51) >= 1 ) ) then
call UnitAddAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xC58841DE), 0x41304F51)
call SetUnitAbilityLevel(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xC58841DE), 0x41304F51, GetUnitAbilityLevel(udg_Danwei[161], 0x41304F4A))
else
endif
call s__Unit_PauseUnitMU(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xC58841DE) , false , "食时之城镜像")
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
endfunction
function Trig_shishizhicheng_3Actions takes nothing returns nothing
local timer ydl_timer
local integer ydl_localvar_step=LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76)
set ydl_localvar_step=ydl_localvar_step + 3
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76, ydl_localvar_step)
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xECE825E7, ydl_localvar_step)
set udg_Danwei[167]=GetSummonedUnit()
set udg_Dian[163]=PolarProjectionBJ(udg_Dian[167], GetRandomReal(300.00, 600.00), ( ( 45.00 * I2R(( udg_Zhengshu[167] - 1 )) ) + GetRandomReal(0, 30.00) ))
call SetUnitFacing(udg_Danwei[167], GetUnitFacing(udg_Danwei[161]))
call SetUnitX(udg_Danwei[167], GetLocationX(udg_Dian[163]))
call SetUnitY(udg_Danwei[167], GetLocationY(udg_Dian[163]))
call s__Unit_PauseUnitMU(udg_Danwei[167] , true , "食时之城镜像")
call SetUnitAnimationByIndex(udg_Danwei[167], 10)
call GroupAddUnit(udg_Danweizu[164], udg_Danwei[167])
call SelectUnitAddForPlayer(udg_Danwei[167], GetOwningPlayer(udg_Danwei[161]))
set ydl_timer=CreateTimer()
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0xC58841DE, GetSummonedUnit())
call TimerStart(ydl_timer, 0.65, false, function Trig_shishizhicheng_3Func010T)
set udg_Danwei[167]=null
call RemoveLocation(udg_Dian[163])
call FlushChildHashtable(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step)
set ydl_timer=null
endfunction
function InitTrig_shishizhicheng_3 takes nothing returns nothing
set gg_trg_shishizhicheng_3=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_shishizhicheng_3, EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(gg_trg_shishizhicheng_3, Condition(function Trig_shishizhicheng_3Conditions))
call TriggerAddAction(gg_trg_shishizhicheng_3, function Trig_shishizhicheng_3Actions)
endfunction
function Trig_litijidongConditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41305058 ) )
endfunction
function Trig_litijidongFunc003Func013Func005Func001Func001Func001Func004Func001Func008T takes nothing returns nothing
call SetUnitPathing(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), true)
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
endfunction
function Trig_litijidongFunc003Func013Func005Func001Func001Func001Func012Func003A takes nothing returns nothing
if ( ( GetEnumDestructable() != gg_dest_YT11_3231 ) and ( IsDestructableDeadBJ(GetEnumDestructable()) == false ) ) then
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xAF4CC8D0, 1)
else
endif
endfunction
function Trig_litijidongFunc003Func013Func005Func003Func007Func001Func008T takes nothing returns nothing
call SetUnitPathing(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), true)
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
endfunction
function Trig_litijidongFunc003Func013Func005Func003Func013Func003A takes nothing returns nothing
if ( ( GetEnumDestructable() != gg_dest_YT11_3231 ) and ( IsDestructableDeadBJ(GetEnumDestructable()) == false ) ) then
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xC8F7F1C1, 2)
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7, ( ( ( 15 + ( 2 * GetUnitAbilityLevel(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x41305058) ) ) - LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7) ) * 2 ))
call GroupRemoveUnit(udg_mksdwz[1], LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E))
call GroupAddUnit(udg_mksdwz[2], LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E))
if ( ( udg_mkszs[1] == 1 ) ) then
call SetUnitAnimationByIndex(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 7)
call SetUnitTimeScale(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 2.00)
call SaveUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5, CreateUnitAtLoc(GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)), 0x65303130, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), 0.00))
call UnitAddAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5), 0x41305059)
call s__baka_IssueTargetOrderById2(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5) , 852095 , LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))
call UnitApplyTimedLife(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5), 0x42487765, 0.50)
call s__Unit_RefreshSkill(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461) , 0x4130505A)
call DisableTrigger(gg_trg_litijidong_1_5)
else
endif
else
endif
endfunction
function Trig_litijidongFunc003Func013T takes nothing returns nothing
local timer ydl_timer
local group ydl_group
local unit ydl_unit
if ( ( IsUnitPausedBJ(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)) == true ) ) then
set ydl_timer=null
set ydl_group=null
set ydl_unit=null
return
else
endif
if ( ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xC8F7F1C1) == 0 ) ) then
if ( ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7) > 0 ) ) then
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7, ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7) - 1 ))
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)))
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E)))
if ( ( udg_mkszs[2] == 1 ) ) then
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF, PolarProjectionBJ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), 100.00, GetUnitFacing(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))))
call s__baka_MoveLightningEx2(LoadLightningHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8AD04E87) , false , GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF)) , GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF)) , ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF)) + ( s__maphack_GetHeight(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)) + 100.00 ) ) , GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)) , GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)) , ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)) + 100.00 ))
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF))
else
call s__baka_MoveLightningEx2(LoadLightningHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8AD04E87) , false , GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)) , GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)) , ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)) + ( s__maphack_GetHeight(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)) + 100.00 ) ) , GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)) , GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)) , ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)) + 100.00 ))
endif
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34, PolarProjectionBJ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7), 80.00, GetUnitFacing(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E))))
if ( ( ( GetTerrainCliffLevelBJ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)) > GetTerrainCliffLevelBJ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)) ) or ( IsTerrainPathableBJ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34), PATHING_TYPE_WALKABILITY) == true ) ) ) then
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xC8F7F1C1, 2)
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7, ( ( ( 15 + ( 2 * GetUnitAbilityLevel(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x41305058) ) ) - LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7) ) * 2 ))
call GroupRemoveUnit(udg_mksdwz[1], LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E))
call GroupAddUnit(udg_mksdwz[2], LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E))
if ( ( udg_mkszs[1] == 1 ) ) then
call SetUnitAnimationByIndex(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 7)
call SetUnitTimeScale(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 2.00)
call SaveUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5, CreateUnitAtLoc(GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)), 0x65303130, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), 0.00))
call UnitAddAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5), 0x41305059)
call s__baka_IssueTargetOrderById2(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5) , 852095 , LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))
call UnitApplyTimedLife(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5), 0x42487765, 0.50)
call s__Unit_RefreshSkill(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461) , 0x4130505A)
call DisableTrigger(gg_trg_litijidong_1_5)
else
endif
else
call SaveRectHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xFB65B3F0, RectFromCenterSizeBJ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34), 175.00, 175.00))
call EnumDestructablesInRectAll(LoadRectHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xFB65B3F0), function Trig_litijidongFunc003Func013Func005Func003Func013Func003A)
call RemoveRect(LoadRectHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xFB65B3F0))
if ( ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xC8F7F1C1) == 0 ) ) then
set ydl_group=CreateGroup()
call GroupEnumUnitsInRange(ydl_group, GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)), 250.00, null)
loop
set ydl_unit=FirstOfGroup(ydl_group)
exitwhen ydl_unit == null
call GroupRemoveUnit(ydl_group, ydl_unit)
if ( ( IsUnitType(ydl_unit, UNIT_TYPE_STRUCTURE) == true ) and ( IsUnitType(ydl_unit, UNIT_TYPE_DEAD) == false ) ) then
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF, GetUnitLoc(ydl_unit))
if ( ( ( ( ( GetUnitTypeId(ydl_unit) == 0x68636173 ) or ( GetUnitTypeId(ydl_unit) == 0x6E65666D ) ) and ( DistanceBetweenPoints(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34), LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF)) <= 175.00 ) ) or ( DistanceBetweenPoints(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34), LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF)) <= 100.00 ) ) ) then
if ( ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xC8F7F1C1) == 0 ) ) then
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xC8F7F1C1, 2)
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7, ( ( ( 15 + ( 2 * GetUnitAbilityLevel(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x41305058) ) ) - LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7) ) * 2 ))
call GroupRemoveUnit(udg_mksdwz[1], LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E))
call GroupAddUnit(udg_mksdwz[2], LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E))
if ( ( udg_mkszs[1] == 1 ) ) then
call SetUnitAnimationByIndex(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 7)
call SetUnitTimeScale(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 2.00)
call SaveUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5, CreateUnitAtLoc(GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)), 0x65303130, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), 0.00))
call UnitAddAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5), 0x41305059)
call s__baka_IssueTargetOrderById2(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5) , 852095 , LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))
call UnitApplyTimedLife(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5), 0x42487765, 0.50)
call s__Unit_RefreshSkill(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461) , 0x4130505A)
call DisableTrigger(gg_trg_litijidong_1_5)
else
endif
else
endif
else
endif
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF))
else
endif
endloop
call DestroyGroup(ydl_group)
else
endif
if ( ( IsTerrainPathableBJ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34), PATHING_TYPE_FLYABILITY) == false ) ) then
if ( ( udg_mkszs[2] == 1 ) ) then
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF, PolarProjectionBJ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), 100.00, GetUnitFacing(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))))
call s__baka_MoveLightningEx2(LoadLightningHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8AD04E87) , false , GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF)) , GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF)) , ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF)) + ( s__maphack_GetHeight(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)) + 100.00 ) ) , GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)) , GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)) , ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)) + 100.00 ))
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF))
else
call s__baka_MoveLightningEx2(LoadLightningHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8AD04E87) , false , GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)) , GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)) , ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)) + ( s__maphack_GetHeight(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)) + 100.00 ) ) , GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)) , GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)) , ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)) + 100.00 ))
endif
call SetUnitX(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E), GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)))
call SetUnitY(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)))
else
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xC8F7F1C1, 2)
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7, ( ( ( 15 + ( 2 * GetUnitAbilityLevel(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x41305058) ) ) - LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7) ) * 2 ))
call GroupRemoveUnit(udg_mksdwz[1], LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E))
call GroupAddUnit(udg_mksdwz[2], LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E))
if ( ( udg_mkszs[1] == 1 ) ) then
call SetUnitAnimationByIndex(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 7)
call SetUnitTimeScale(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 2.00)
call SaveUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5, CreateUnitAtLoc(GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)), 0x65303130, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), 0.00))
call UnitAddAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5), 0x41305059)
call s__baka_IssueTargetOrderById2(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5) , 852095 , LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))
call UnitApplyTimedLife(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5), 0x42487765, 0.50)
call s__Unit_RefreshSkill(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461) , 0x4130505A)
call DisableTrigger(gg_trg_litijidong_1_5)
else
endif
endif
endif
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280))
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7))
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34))
else
call GroupRemoveUnit(udg_mksdwz[1], LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E))
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xC8F7F1C1, 1)
call SetUnitManaBJ(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), ( GetUnitState(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), UNIT_STATE_MANA) + 20.00 ))
if ( ( udg_mkszs[1] == 1 ) ) then
call SetUnitManaBJ(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), ( GetUnitState(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), UNIT_STATE_MANA) + 20.00 ))
else
endif
set udg_mkszs[1]=0
if ( ( IsUnitGroupEmptyBJ(udg_mksdwz[1]) == true ) ) then
call UnitRemoveAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x4162756E)
else
endif
if ( ( IsUnitGroupEmptyBJ(udg_mksdwz[2]) == true ) ) then
if ( ( udg_mkszs[1] == 1 ) ) then
call SetUnitTimeScale(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 1.00)
call ResetUnitAnimation(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))
call UnitRemoveBuffBJ(0x4230324F, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))
call GroupClear(udg_mksdwz[3])
call SetUnitPathing(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), false)
set udg_mkszs[1]=0
set ydl_timer=CreateTimer()
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x6CD84461, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x6CD84461, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))
call TimerStart(ydl_timer, 3.00, false, function Trig_litijidongFunc003Func013Func005Func003Func007Func001Func008T)
else
endif
call UnitRemoveAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x4162756E)
call EnableTrigger(gg_trg_litijidong_1_5)
else
endif
endif
else
if ( ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xC8F7F1C1) == 1 ) ) then
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)))
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E)))
if ( ( udg_mkszs[2] == 1 ) ) then
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF, PolarProjectionBJ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), 100.00, GetUnitFacing(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))))
call s__baka_MoveLightningEx2(LoadLightningHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8AD04E87) , false , GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF)) , GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF)) , ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF)) + ( s__maphack_GetHeight(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)) + 100.00 ) ) , GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)) , GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)) , ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)) + 100.00 ))
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF))
else
call s__baka_MoveLightningEx2(LoadLightningHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8AD04E87) , false , GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)) , GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)) , ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)) + ( s__maphack_GetHeight(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)) + 100.00 ) ) , GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)) , GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)) , ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)) + 100.00 ))
endif
if ( ( DistanceBetweenPoints(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)) >= 80.00 ) ) then
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34, PolarProjectionBJ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7), ( 15.00 + ( 12.00 * I2R(GetUnitAbilityLevel(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x41305058)) ) ), AngleBetweenPoints(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7), LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280))))
call SetUnitFacing(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E), AngleBetweenPoints(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)))
call SetUnitX(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E), GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)))
call SetUnitY(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)))
call RemoveLocation(GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)))
else
call GroupRemoveUnit(udg_mksdwz[0], LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E))
if ( ( CountUnitsInGroup(udg_mksdwz[0]) < 2 ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)), 0x41305058, true)
call SetPlayerAbilityAvailable(GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)), 0x41305131, true)
else
endif
call RemoveUnit(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E))
call DestroyLightning(LoadLightningHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8AD04E87))
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
endif
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280))
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7))
else
if ( ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xC8F7F1C1) == 2 ) ) then
if ( ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7) > 0 ) ) then
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7, ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7) - 1 ))
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)))
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E)))
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xAF4CC8D0, 0)
if ( ( udg_mkszs[1] == 1 ) ) then
if ( ( IsUnitGroupEmptyBJ(udg_mksdwz[3]) == true ) ) then
call SaveUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x93AA82B4, CreateUnitAtLoc(GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)), 0x65303854, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), 0.00))
call GroupAddUnit(udg_mksdwz[3], LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x93AA82B4))
else
call SetUnitX(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x93AA82B4), GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)))
call SetUnitY(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x93AA82B4), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)))
endif
else
endif
set ydl_group=CreateGroup()
call GroupEnumUnitsInRange(ydl_group, GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)), 250.00, null)
loop
set ydl_unit=FirstOfGroup(ydl_group)
exitwhen ydl_unit == null
call GroupRemoveUnit(ydl_group, ydl_unit)
if ( ( IsUnitType(ydl_unit, UNIT_TYPE_STRUCTURE) == true ) and ( IsUnitType(ydl_unit, UNIT_TYPE_DEAD) == false ) ) then
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34, GetUnitLoc(ydl_unit))
if ( ( ( ( ( GetUnitTypeId(ydl_unit) == 0x68636173 ) or ( GetUnitTypeId(ydl_unit) == 0x6E65666D ) ) and ( DistanceBetweenPoints(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)) <= 150.00 ) ) or ( DistanceBetweenPoints(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)) <= 85.00 ) ) ) then
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xAF4CC8D0, 1)
else
endif
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34))
else
if ( ( udg_mkszs[1] == 1 ) ) then
if ( ( IsUnitType(ydl_unit, UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(ydl_unit, UNIT_TYPE_ANCIENT) == false ) and ( IsUnitType(ydl_unit, UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(ydl_unit, GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))) == true ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\QuillSprayMissile\\QuillSprayMissile.mdl", ydl_unit, "chest"))
if ( ( IsUnitInGroup(ydl_unit, udg_mksdwz[3]) == false ) ) then
if ( ( UnitHasBuffBJ(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x42303356) == true ) ) then
call UnitDamageTarget(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), ydl_unit, ( ( ( ( 50.00 + ( 25.00 * I2R(GetUnitAbilityLevel(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x4130505A)) ) ) + ( 1.00 * I2R(GetHeroAgi(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), true)) ) ) * 1.20 ) * 1.00 ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_SLICE)
else
call UnitDamageTarget(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), ydl_unit, ( ( ( ( 50.00 + ( 25.00 * I2R(GetUnitAbilityLevel(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x4130505A)) ) ) + ( 1.00 * I2R(GetHeroAgi(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), true)) ) ) * 1.00 ) * 1.00 ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_SLICE)
endif
call GroupAddUnit(udg_mksdwz[3], ydl_unit)
call SaveUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5, CreateUnitAtLoc(GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)), 0x65303130, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), 0.00))
call UnitAddAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5), 0x41303551)
call s__baka_IssueTargetOrderById2(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5) , 852095 , ydl_unit)
call UnitApplyTimedLife(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5), 0x42487765, 0.50)
else
if ( ( UnitHasBuffBJ(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x42303356) == true ) ) then
call UnitDamageTarget(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), ydl_unit, ( I2R(GetHeroAgi(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), true)) * 0.12 ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_HEAVY_SLICE)
else
call UnitDamageTarget(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), ydl_unit, ( I2R(GetHeroAgi(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), true)) * 0.10 ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_HEAVY_SLICE)
endif
endif
else
endif
else
endif
endif
endloop
call DestroyGroup(ydl_group)
if ( ( udg_mkszs[2] == 1 ) ) then
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34, PolarProjectionBJ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), 100.00, GetUnitFacing(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))))
call s__baka_MoveLightningEx2(LoadLightningHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8AD04E87) , false , GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)) , GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)) , ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)) + ( s__maphack_GetHeight(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)) + 100.00 ) ) , GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)) , GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)) , ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)) + 100.00 ))
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34))
else
call s__baka_MoveLightningEx2(LoadLightningHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8AD04E87) , false , GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)) , GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)) , ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)) + ( s__maphack_GetHeight(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)) + 100.00 ) ) , GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)) , GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)) , ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)) + 100.00 ))
endif
if ( ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x55BBA912) > 0 ) and ( udg_mkszs[2] == 0 ) ) then
if ( ( udg_mkszs[0] == 0 ) ) then
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34, PolarProjectionBJ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), 40.00, GetUnitFacing(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E))))
else
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34, PolarProjectionBJ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), ( I2R(LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x55BBA912)) * 2.00 ), GetUnitFacing(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E))))
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x55BBA912, ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x55BBA912) - 1 ))
endif
call SaveRectHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xFB65B3F0, RectFromCenterSizeBJ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34), 150.00, 150.00))
call EnumDestructablesInRectAll(LoadRectHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xFB65B3F0), function Trig_litijidongFunc003Func013Func005Func001Func001Func001Func012Func003A)
call RemoveRect(LoadRectHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xFB65B3F0))
if ( ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xAF4CC8D0) == 0 ) ) then
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xAF4CC8D0, 1)
if ( ( IsTerrainPathable(GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)), PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)))
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xAF4CC8D0, 0)
else
endif
if ( ( IsTerrainPathable(GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)), PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitY(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)))
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xAF4CC8D0, 0)
else
endif
if ( ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xAF4CC8D0) == 0 ) ) then
else
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7, 0)
endif
else
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7, 0)
endif
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34))
else
endif
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280))
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7))
else
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xC8F7F1C1, 1)
call GroupRemoveUnit(udg_mksdwz[2], LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E))
call RemoveUnit(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x93AA82B4))
if ( ( IsUnitGroupEmptyBJ(udg_mksdwz[2]) == true ) ) then
if ( ( UnitHasBuffBJ(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x4230324F) == true ) ) then
call SetUnitTimeScale(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 1.00)
call ResetUnitAnimation(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))
call UnitRemoveBuffBJ(0x4230324F, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))
call GroupClear(udg_mksdwz[3])
call SetUnitPathing(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), false)
set udg_mkszs[1]=0
set ydl_timer=CreateTimer()
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x6CD84461, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x6CD84461, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))
call TimerStart(ydl_timer, 3.00, false, function Trig_litijidongFunc003Func013Func005Func001Func001Func001Func004Func001Func008T)
else
endif
call UnitRemoveAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x4162756E)
call EnableTrigger(gg_trg_litijidong_1_5)
else
endif
endif
else
endif
endif
endif
set ydl_timer=null
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_litijidongFunc003T takes nothing returns nothing
local timer ydl_timer
set udg_mkszs[0]=0
call SaveUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E, CreateUnitAtLoc(GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)), 0x6530384D, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), AngleBetweenPoints(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xC90F02FD))))
call SetUnitManaBJ(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), ( GetUnitState(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), UNIT_STATE_MANA) - ( GetUnitState(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), UNIT_STATE_MAX_MANA) * 0.01 ) ))
call GroupAddUnit(udg_mksdwz[0], LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E))
if ( ( CountUnitsInGroup(udg_mksdwz[0]) >= 2 ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)), 0x41305058, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)), 0x41305131, false)
else
endif
call GroupAddUnit(udg_mksdwz[1], LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E))
call SaveLightningHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8AD04E87, AddLightningEx("SZ", false, GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)), ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)) + ( s__maphack_GetHeight(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)) + 100.00 ) ), GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)), ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)) + 100.00 )))
call SetUnitAnimationByIndex(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 5)
call UnitAddAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x4162756E)
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7, ( 15 + ( 2 * GetUnitAbilityLevel(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x41305058) ) ))
set ydl_timer=CreateTimer()
call SaveInteger(YDHT, GetHandleId(ydl_timer), 0x80A9ADA7, LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7))
call SaveInteger(YDHT, GetHandleId(ydl_timer), 0xC8F7F1C1, 0)
call SaveInteger(YDHT, GetHandleId(ydl_timer), 0x55BBA912, 20)
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x6CD84461, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0xC90F02FD, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xC90F02FD))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x1B1E869E, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E))
call SaveLightningHandle(YDHT, GetHandleId(ydl_timer), 0x8AD04E87, LoadLightningHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8AD04E87))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x6CD84461, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0x99149280, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0xC90F02FD, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xC90F02FD))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0x8A0E31E7, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0x3AA0CF34, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0xBF9304BF, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x1B1E869E, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x293DF2F5, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x93AA82B4, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x93AA82B4))
call SaveRectHandle(YDHT, GetHandleId(ydl_timer), 0xFB65B3F0, LoadRectHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xFB65B3F0))
call SaveLightningHandle(YDHT, GetHandleId(ydl_timer), 0x8AD04E87, LoadLightningHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8AD04E87))
call SaveInteger(YDHT, GetHandleId(ydl_timer), 0x80A9ADA7, LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7))
call SaveInteger(YDHT, GetHandleId(ydl_timer), 0xAF4CC8D0, LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xAF4CC8D0))
call TimerStart(ydl_timer, 0.03, true, function Trig_litijidongFunc003Func013T)
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
set ydl_timer=null
endfunction
function Trig_litijidongActions takes nothing returns nothing
local timer ydl_timer
local integer ydl_localvar_step=LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76)
set ydl_localvar_step=ydl_localvar_step + 3
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76, ydl_localvar_step)
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xECE825E7, ydl_localvar_step)
if ( ( s__sys_isIn11() == false ) and ( UnitHasBuffBJ(GetTriggerUnit(), 0x42303356) == true ) ) then
set udg_Int[1]=42
set udg_Int[2]=39
set udg_Int[3]=36
set udg_Int[4]=33
set udg_Int[5]=30
call SetUnitState(GetTriggerUnit(), UNIT_STATE_MANA, ( GetUnitState(GetTriggerUnit(), UNIT_STATE_MANA) - ( 0.50 * I2R(udg_Int[GetUnitAbilityLevel(GetTriggerUnit(), GetSpellAbilityId())]) ) ))
else
endif
if ( ( GetTriggerExecCount(GetTriggeringTrigger()) == 1 ) ) then
call TriggerRegisterUnitEvent(gg_trg_litijidong_1_5, GetTriggerUnit(), EVENT_UNIT_ISSUED_POINT_ORDER)
call TriggerRegisterUnitEvent(gg_trg_litijidong_1_5, GetTriggerUnit(), EVENT_UNIT_ISSUED_TARGET_ORDER)
else
endif
set ydl_timer=CreateTimer()
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x6CD84461, GetTriggerUnit())
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0x99149280, GetUnitLoc(GetTriggerUnit()))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0xC90F02FD, GetSpellTargetLoc())
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0x8A0E31E7, LoadLocationHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x8A0E31E7))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0x3AA0CF34, LoadLocationHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x3AA0CF34))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0xBF9304BF, LoadLocationHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xBF9304BF))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x1B1E869E, LoadUnitHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x1B1E869E))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x293DF2F5, LoadUnitHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x293DF2F5))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x93AA82B4, LoadUnitHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x93AA82B4))
call SaveRectHandle(YDHT, GetHandleId(ydl_timer), 0xFB65B3F0, LoadRectHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xFB65B3F0))
call SaveLightningHandle(YDHT, GetHandleId(ydl_timer), 0x8AD04E87, LoadLightningHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x8AD04E87))
call SaveInteger(YDHT, GetHandleId(ydl_timer), 0x80A9ADA7, LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x80A9ADA7))
call SaveInteger(YDHT, GetHandleId(ydl_timer), 0xAF4CC8D0, LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xAF4CC8D0))
call TimerStart(ydl_timer, 0.00, false, function Trig_litijidongFunc003T)
call FlushChildHashtable(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step)
set ydl_timer=null
endfunction
function InitTrig_litijidong takes nothing returns nothing
set gg_trg_litijidong=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_litijidong, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_litijidong, Condition(function Trig_litijidongConditions))
call TriggerAddAction(gg_trg_litijidong, function Trig_litijidongActions)
endfunction
function Trig_litijidong_1_5Conditions takes nothing returns boolean
return ( ( GetIssuedOrderIdBJ() != String2OrderIdBJ("channel") ) and ( GetIssuedOrderIdBJ() != String2OrderIdBJ("chemicalrage") ) and ( GetIssuedOrderIdBJ() != String2OrderIdBJ("cloudoffog") ) and ( IsUnitGroupEmptyBJ(udg_mksdwz[0]) == false ) )
endfunction
function Trig_litijidong_1_5Actions takes nothing returns nothing
set udg_mkszs[0]=1
call UnitRemoveAbility(GetTriggerUnit(), 0x4162756E)
endfunction
function InitTrig_litijidong_1_5 takes nothing returns nothing
set gg_trg_litijidong_1_5=CreateTrigger()
call TriggerAddCondition(gg_trg_litijidong_1_5, Condition(function Trig_litijidong_1_5Conditions))
call TriggerAddAction(gg_trg_litijidong_1_5, function Trig_litijidong_1_5Actions)
endfunction
function Trig_xuanfengzhanConditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x4130505A ) )
endfunction
function Trig_xuanfengzhanFunc002Func002Func002Func020Func010Func007Func001A takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Trig_xuanfengzhanFunc002Func002Func002Func020Func010Func007Func006A takes nothing returns nothing
call SetUnitScale(GetEnumUnit(), ( 8.00 - ( 0.45 * I2R(LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7)) ) ), ( 8.00 - ( 0.45 * I2R(LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7)) ) ), ( 8.00 - ( 0.45 * I2R(LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7)) ) ))
call SetUnitVertexColor(GetEnumUnit(), ( 0 + ( 26 * LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7) ) ), ( 0 + ( 26 * LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7) ) ), ( 0 + ( 26 * LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7) ) ), ( 0 + ( 26 * LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7) ) ))
endfunction
function Trig_xuanfengzhanFunc002Func002Func002Func020Func010T takes nothing returns nothing
local group ydl_group
local unit ydl_unit
if ( ( IsUnitPausedBJ(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)) == true ) ) then
set ydl_group=null
set ydl_unit=null
return
else
endif
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)))
if ( ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7) > 0 ) ) then
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7, ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7) - 1 ))
call ForGroupBJ(LoadGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF0EA2EC), function Trig_xuanfengzhanFunc002Func002Func002Func020Func010Func007Func006A)
if ( ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7) > 5 ) ) then
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7, PolarProjectionBJ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), ( 125.00 - ( 5.00 * I2R(LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7)) ) ), GetUnitFacing(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))))
call SaveUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5, CreateUnitAtLoc(GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)), 0x65303130, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7), 0.00))
call UnitAddAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5), 0x41305042)
call UnitApplyTimedLife(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5), 0x42487765, 0.50)
set ydl_group=CreateGroup()
call GroupEnumUnitsInRange(ydl_group, GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)), ( 175.00 - ( 5.00 * LoadReal(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7) ) ), null)
loop
set ydl_unit=FirstOfGroup(ydl_group)
exitwhen ydl_unit == null
call GroupRemoveUnit(ydl_group, ydl_unit)
if ( ( IsUnitType(ydl_unit, UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(ydl_unit, UNIT_TYPE_DEAD) == false ) and ( IsUnitType(ydl_unit, UNIT_TYPE_ANCIENT) == false ) and ( IsUnitInGroup(ydl_unit, LoadGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xEB494D94)) == false ) and ( IsUnitEnemy(ydl_unit, GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))) == true ) ) then
call s__baka_IssueTargetOrderById2(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5) , 852095 , ydl_unit)
if ( ( UnitHasBuffBJ(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x42303356) == true ) ) then
call UnitDamageTarget(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), ydl_unit, ( ( ( ( 50.00 + ( 25.00 * I2R(GetUnitAbilityLevel(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x4130505A)) ) ) + ( 1.00 * I2R(GetHeroAgi(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), true)) ) ) * 1.20 ) * 1.00 ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_HEAVY_SLICE)
else
call UnitDamageTarget(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), ydl_unit, ( ( ( ( 50.00 + ( 25.00 * I2R(GetUnitAbilityLevel(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x4130505A)) ) ) + ( 1.00 * I2R(GetHeroAgi(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), true)) ) ) * 1.00 ) * 1.00 ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_HEAVY_SLICE)
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl", ydl_unit, "chest"))
call GroupAddUnit(LoadGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xEB494D94), ydl_unit)
else
endif
endloop
call DestroyGroup(ydl_group)
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7))
else
endif
else
call ForGroupBJ(LoadGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF0EA2EC), function Trig_xuanfengzhanFunc002Func002Func002Func020Func010Func007Func001A)
call DestroyGroup(LoadGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF0EA2EC))
call DestroyGroup(LoadGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xEB494D94))
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
endif
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280))
set ydl_group=null
set ydl_unit=null
endfunction
function Trig_xuanfengzhanFunc002Func002Func002Func020T takes nothing returns nothing
local timer ydl_timer
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)))
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xC90F02FD, PolarProjectionBJ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), 75.00, GetUnitFacing(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))))
call SaveGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF0EA2EC, CreateGroup())
call SaveGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xEB494D94, CreateGroup())
set udg_mkszs[3]=1
loop
exitwhen udg_mkszs[3] > 3
call SaveUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E, CreateUnitAtLoc(GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)), 0x6530384E, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xC90F02FD), GetUnitFacing(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))))
call GroupAddUnit(LoadGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF0EA2EC), LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E))
set udg_mkszs[3]=udg_mkszs[3] + 1
endloop
set udg_mkszs[3]=1
loop
exitwhen udg_mkszs[3] > 3
call SaveUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E, CreateUnitAtLoc(GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)), 0x6530384F, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xC90F02FD), GetUnitFacing(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))))
call GroupAddUnit(LoadGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF0EA2EC), LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E))
set udg_mkszs[3]=udg_mkszs[3] + 1
endloop
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280))
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xC90F02FD))
set ydl_timer=CreateTimer()
call SaveInteger(YDHT, GetHandleId(ydl_timer), 0x80A9ADA7, 10)
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x6CD84461, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))
call SaveGroupHandle(YDHT, GetHandleId(ydl_timer), 0xBF0EA2EC, LoadGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF0EA2EC))
call SaveGroupHandle(YDHT, GetHandleId(ydl_timer), 0xEB494D94, LoadGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xEB494D94))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x6CD84461, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0x99149280, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0x8A0E31E7, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x293DF2F5, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5))
call SaveGroupHandle(YDHT, GetHandleId(ydl_timer), 0xBF0EA2EC, LoadGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF0EA2EC))
call SaveGroupHandle(YDHT, GetHandleId(ydl_timer), 0xEB494D94, LoadGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xEB494D94))
call TimerStart(ydl_timer, 0.02, true, function Trig_xuanfengzhanFunc002Func002Func002Func020Func010T)
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
set ydl_timer=null
endfunction
function Trig_xuanfengzhanFunc002T takes nothing returns nothing
local timer ydl_timer
call GroupClear(udg_mksdwz[3])
if ( ( IsUnitGroupEmptyBJ(udg_mksdwz[2]) == false ) ) then
set udg_mkszs[1]=1
call SetUnitAnimationByIndex(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 7)
call SetUnitTimeScale(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 2.00)
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)))
call SaveUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5, CreateUnitAtLoc(GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)), 0x65303130, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), 0.00))
call UnitAddAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5), 0x41305059)
call s__baka_IssueTargetOrderById2(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5) , 852095 , LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))
call UnitApplyTimedLife(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5), 0x42487765, 0.50)
call DisableTrigger(gg_trg_litijidong_1_5)
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280))
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xAF4CC8D0, GetUnitAbilityLevel(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x4130505A))
call UnitRemoveAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x4130505A)
call UnitAddAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x4130505A)
call SetUnitAbilityLevel(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x4130505A, LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xAF4CC8D0))
else
if ( ( IsUnitGroupEmptyBJ(udg_mksdwz[1]) == false ) ) then
set udg_mkszs[0]=0
set udg_mkszs[1]=1
call SetUnitAnimationByIndex(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 5)
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xAF4CC8D0, GetUnitAbilityLevel(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x4130505A))
call UnitRemoveAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x4130505A)
call UnitAddAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x4130505A)
call SetUnitAbilityLevel(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x4130505A, LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xAF4CC8D0))
else
set udg_mkszs[0]=1
set udg_mkszs[1]=0
call UnitRemoveAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x4162756E)
call SetUnitAnimationByIndex(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 2)
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)))
call SaveUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5, CreateUnitAtLoc(GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)), 0x65303130, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), 0.00))
call UnitAddAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5), 0x41304B50)
call s__baka_IssueTargetOrderById2(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5) , 852095 , LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))
call UnitApplyTimedLife(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5), 0x42487765, 0.50)
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Polymorph\\PolyMorphDoneGround.mdl", LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), "left weapon"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Polymorph\\PolyMorphDoneGround.mdl", LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), "right weapon"))
set ydl_timer=CreateTimer()
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x6CD84461, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x6CD84461, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0x99149280, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0xC90F02FD, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xC90F02FD))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0x8A0E31E7, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x1B1E869E, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x293DF2F5, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5))
call SaveGroupHandle(YDHT, GetHandleId(ydl_timer), 0xBF0EA2EC, LoadGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF0EA2EC))
call SaveGroupHandle(YDHT, GetHandleId(ydl_timer), 0xEB494D94, LoadGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xEB494D94))
call TimerStart(ydl_timer, 0.30, false, function Trig_xuanfengzhanFunc002Func002Func002Func020T)
endif
endif
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
set ydl_timer=null
endfunction
function Trig_xuanfengzhanActions takes nothing returns nothing
local timer ydl_timer
local integer ydl_localvar_step=LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76)
set ydl_localvar_step=ydl_localvar_step + 3
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76, ydl_localvar_step)
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xECE825E7, ydl_localvar_step)
if ( ( s__sys_isIn11() == false ) and ( UnitHasBuffBJ(GetTriggerUnit(), 0x42303356) == true ) ) then
set udg_Int[1]=30
set udg_Int[2]=30
set udg_Int[3]=30
set udg_Int[4]=30
set udg_Int[5]=30
call SetUnitState(GetTriggerUnit(), UNIT_STATE_MANA, ( GetUnitState(GetTriggerUnit(), UNIT_STATE_MANA) - ( 0.50 * I2R(udg_Int[GetUnitAbilityLevel(GetTriggerUnit(), GetSpellAbilityId())]) ) ))
else
endif
set ydl_timer=CreateTimer()
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x6CD84461, GetTriggerUnit())
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0x99149280, LoadLocationHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x99149280))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0xC90F02FD, LoadLocationHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xC90F02FD))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0x8A0E31E7, LoadLocationHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x8A0E31E7))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x1B1E869E, LoadUnitHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x1B1E869E))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x293DF2F5, LoadUnitHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x293DF2F5))
call SaveGroupHandle(YDHT, GetHandleId(ydl_timer), 0xBF0EA2EC, LoadGroupHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xBF0EA2EC))
call SaveGroupHandle(YDHT, GetHandleId(ydl_timer), 0xEB494D94, LoadGroupHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xEB494D94))
call SaveInteger(YDHT, GetHandleId(ydl_timer), 0xAF4CC8D0, LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xAF4CC8D0))
call TimerStart(ydl_timer, 0.00, false, function Trig_xuanfengzhanFunc002T)
call FlushChildHashtable(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step)
set ydl_timer=null
endfunction
function InitTrig_xuanfengzhan takes nothing returns nothing
set gg_trg_xuanfengzhan=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_xuanfengzhan, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_xuanfengzhan, Condition(function Trig_xuanfengzhanConditions))
call TriggerAddAction(gg_trg_xuanfengzhan, function Trig_xuanfengzhanActions)
endfunction
function Trig_shuangdaozhanConditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41305130 ) )
endfunction
function Trig_shuangdaozhanFunc002Func001Func007Func002Func006T takes nothing returns nothing
call UnitRemoveAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5), 0x41305134)
call UnitRemoveBuffBJ(0x42303355, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5))
endfunction
function Trig_shuangdaozhanFunc002Func001Func007T takes nothing returns nothing
local timer ydl_timer
if ( ( IsUnitPausedBJ(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)) == true ) ) then
set ydl_timer=null
return
else
endif
if ( ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7) > 0 ) ) then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\QuillSprayMissile\\QuillSprayMissile.mdl", LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), "right weapon"))
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7, ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7) - 1 ))
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)))
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34, PolarProjectionBJ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7), ( ( DistanceBetweenPoints(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xC90F02FD)) - 100.00 ) / 10.00 ), AngleBetweenPoints(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7), LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xC90F02FD))))
call SetUnitX(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)))
call SetUnitY(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)))
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7))
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34))
else
if ( ( UnitHasBuffBJ(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x42303356) == true ) ) then
call UnitDamageTarget(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5), ( ( ( ( 20.00 + ( 30.00 * I2R(GetUnitAbilityLevel(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x41305130)) ) ) + ( 1.50 * I2R(GetHeroAgi(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), true)) ) ) * 1.20 ) * 1.00 ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_HEAVY_SLICE)
else
call UnitDamageTarget(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5), ( ( ( ( 20.00 + ( 30.00 * I2R(GetUnitAbilityLevel(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x41305130)) ) ) + ( 1.50 * I2R(GetHeroAgi(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), true)) ) ) * 1.00 ) * 1.00 ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_HEAVY_SLICE)
endif
call UnitAddAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5), 0x41305134)
set udg_mkszs[2]=0
call SetUnitTimeScale(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 1.00)
set ydl_timer=CreateTimer()
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x293DF2F5, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x293DF2F5, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5))
call TimerStart(ydl_timer, 5.00, false, function Trig_shuangdaozhanFunc002Func001Func007Func002Func006T)
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
endif
set ydl_timer=null
endfunction
function Trig_shuangdaozhanFunc002Func001Func022T takes nothing returns nothing
if ( ( IsUnitPausedBJ(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)) == true ) ) then
return
else
endif
if ( ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7) > 15 ) ) then
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7, ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7) - 1 ))
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)))
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E)))
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3824AE9B, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5)))
if ( ( DistanceBetweenPoints(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xC90F02FD), LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3824AE9B)) >= 500.00 ) ) then
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7, 0)
call UnitRemoveAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5), 0x41305133)
call UnitRemoveBuffBJ(0x4230324E, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5))
set udg_mkszs[2]=0
call SetUnitTimeScale(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 1.00)
else
endif
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34, PolarProjectionBJ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF), ( ( DistanceBetweenPoints(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3824AE9B)) - 0.00 ) / 15.00 ), AngleBetweenPoints(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3824AE9B))))
call MoveLightningEx(LoadLightningHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8AD04E87), false, GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)), ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)) + ( s__maphack_GetHeight(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)) + 100.00 ) ), GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)), ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)) + 100.00 ))
call SetUnitX(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E), GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)))
call SetUnitY(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)))
if ( ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7) == 15 ) ) then
call UnitAddAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5), 0x41305133)
set udg_mkszs[2]=1
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)))
else
endif
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7))
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34))
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF))
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3824AE9B))
else
if ( ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7) > 0 ) ) then
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7, ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7) - 1 ))
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)))
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5)))
if ( ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7) == 0 ) ) then
call UnitRemoveAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5), 0x41305133)
call UnitRemoveBuffBJ(0x4230324E, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5))
set udg_mkszs[2]=0
call SetUnitTimeScale(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 1.00)
else
if ( ( DistanceBetweenPoints(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xC90F02FD), LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF)) >= 500.00 ) ) then
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7, 0)
call UnitRemoveAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5), 0x41305133)
call UnitRemoveBuffBJ(0x4230324E, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5))
set udg_mkszs[2]=0
call SetUnitTimeScale(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 1.00)
else
endif
endif
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34, PolarProjectionBJ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7), ( ( DistanceBetweenPoints(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF)) - 175.00 ) / 15.00 ), AngleBetweenPoints(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF))))
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3824AE9B, PolarProjectionBJ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7), 100.00, GetUnitFacing(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))))
call MoveLightningEx(LoadLightningHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8AD04E87), false, GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3824AE9B)), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3824AE9B)), ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3824AE9B)) + ( s__maphack_GetHeight(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)) + 100.00 ) ), GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF)), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF)), ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF)) + 100.00 ))
call SetUnitX(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E), GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF)))
call SetUnitY(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF)))
call SetUnitX(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)))
call SetUnitY(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)))
if ( ( ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7) == 3 ) or ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7) == 5 ) ) ) then
if ( ( UnitHasBuffBJ(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x42303356) == true ) ) then
call UnitDamageTarget(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5), ( ( ( ( 20.00 + ( 20.00 * I2R(GetUnitAbilityLevel(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x41305130)) ) ) + ( 1.00 * I2R(GetHeroAgi(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), true)) ) ) * 1.20 ) * 1.00 ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_HEAVY_SLICE)
else
call UnitDamageTarget(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5), ( ( ( ( 20.00 + ( 20.00 * I2R(GetUnitAbilityLevel(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x41305130)) ) ) + ( 1.00 * I2R(GetHeroAgi(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), true)) ) ) * 1.00 ) * 1.00 ), true, false, ATTACK_TYPE_HERO, DAMAGE_TYPE_ENHANCED, WEAPON_TYPE_METAL_HEAVY_SLICE)
endif
if ( ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7) == 5 ) ) then
call SaveUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xD78D4D25, CreateUnitAtLoc(GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)), 0x65303130, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF), 0.00))
call UnitAddAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xD78D4D25), 0x41304236)
call s__baka_IssueTargetOrderById2(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xD78D4D25) , 852095 , LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5))
call UnitApplyTimedLife(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xD78D4D25), 0x42487765, 0.50)
else
endif
else
endif
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7))
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34))
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF))
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3824AE9B))
else
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)))
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E)))
if ( ( udg_mkszs[2] == 1 ) ) then
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF, PolarProjectionBJ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), 100.00, GetUnitFacing(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))))
call MoveLightningEx(LoadLightningHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8AD04E87), false, GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF)), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF)), ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF)) + ( s__maphack_GetHeight(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)) + 100.00 ) ), GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)), ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)) + 100.00 ))
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF))
else
call MoveLightningEx(LoadLightningHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8AD04E87), false, GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)), ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)) + ( s__maphack_GetHeight(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)) + 100.00 ) ), GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)), ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)) + 100.00 ))
endif
if ( ( DistanceBetweenPoints(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)) >= 80.00 ) ) then
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34, PolarProjectionBJ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7), ( 15.00 + ( 12.00 * I2R(GetUnitAbilityLevel(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x41305058)) ) ), AngleBetweenPoints(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7), LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280))))
call SetUnitFacing(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E), AngleBetweenPoints(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)))
call SetUnitX(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E), GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)))
call SetUnitY(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)))
call RemoveLocation(GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)))
else
call GroupRemoveUnit(udg_mksdwz[0], LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E))
if ( ( CountUnitsInGroup(udg_mksdwz[0]) < 2 ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)), 0x41305058, true)
call SetPlayerAbilityAvailable(GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)), 0x41305131, true)
else
endif
call RemoveUnit(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E))
call DestroyLightning(LoadLightningHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8AD04E87))
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
endif
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280))
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7))
endif
endif
endfunction
function Trig_shuangdaozhanFunc002T takes nothing returns nothing
local timer ydl_timer
if ( ( DistanceBetweenPoints(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xC90F02FD)) >= 600.00 ) ) then
call SetUnitAnimationByIndex(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 8)
call SetUnitTimeScale(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 1.20)
call SaveUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E, CreateUnitAtLoc(GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)), 0x6530384D, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), AngleBetweenPoints(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xC90F02FD))))
call SetUnitScale(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E), 1.00, 1, 1)
call GroupAddUnit(udg_mksdwz[0], LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E))
if ( ( CountUnitsInGroup(udg_mksdwz[0]) >= 2 ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)), 0x41305058, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)), 0x41305131, false)
else
endif
call SaveLightningHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8AD04E87, AddLightningEx("SZ", true, GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)), ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)) + ( s__maphack_GetHeight(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)) + 100.00 ) ), GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)), ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)) + 100.00 )))
call SaveUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xD78D4D25, CreateUnitAtLoc(GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)), 0x65303130, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), 0.00))
call UnitAddAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xD78D4D25), 0x41304B58)
call s__baka_IssueTargetOrderById2(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xD78D4D25) , 852095 , LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))
call UnitApplyTimedLife(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xD78D4D25), 0x42487765, 0.50)
set ydl_timer=CreateTimer()
call SaveInteger(YDHT, GetHandleId(ydl_timer), 0x80A9ADA7, 30)
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x6CD84461, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x1B1E869E, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x293DF2F5, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0x99149280, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0xC90F02FD, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xC90F02FD))
call SaveLightningHandle(YDHT, GetHandleId(ydl_timer), 0x8AD04E87, LoadLightningHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8AD04E87))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x6CD84461, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0x99149280, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0xC90F02FD, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xC90F02FD))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0x8A0E31E7, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x3AA0CF34, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0xBF9304BF, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0x3824AE9B, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3824AE9B))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x1B1E869E, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x293DF2F5, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0xD78D4D25, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xD78D4D25))
call SaveLightningHandle(YDHT, GetHandleId(ydl_timer), 0x8AD04E87, LoadLightningHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8AD04E87))
call TimerStart(ydl_timer, 0.03, true, function Trig_shuangdaozhanFunc002Func001Func022T)
else
call SetUnitAnimationByIndex(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 1)
call SaveUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xD78D4D25, CreateUnitAtLoc(GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)), 0x65303130, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), 0.00))
call UnitAddAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xD78D4D25), 0x4130504A)
call s__baka_IssueTargetOrderById2(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xD78D4D25) , 852095 , LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))
call UnitApplyTimedLife(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xD78D4D25), 0x42487765, 0.50)
set udg_mkszs[2]=2
set ydl_timer=CreateTimer()
call SaveInteger(YDHT, GetHandleId(ydl_timer), 0x80A9ADA7, 10)
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x6CD84461, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x1B1E869E, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x293DF2F5, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0x99149280, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0xC90F02FD, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xC90F02FD))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x6CD84461, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0x99149280, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0xC90F02FD, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xC90F02FD))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0x8A0E31E7, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0x3AA0CF34, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x1B1E869E, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x293DF2F5, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5))
call TimerStart(ydl_timer, 0.03, true, function Trig_shuangdaozhanFunc002Func001Func007T)
endif
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
set ydl_timer=null
endfunction
function Trig_shuangdaozhanActions takes nothing returns nothing
local timer ydl_timer
local integer ydl_localvar_step=LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76)
set ydl_localvar_step=ydl_localvar_step + 3
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76, ydl_localvar_step)
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xECE825E7, ydl_localvar_step)
if ( ( s__sys_isIn11() == false ) and ( UnitHasBuffBJ(GetTriggerUnit(), 0x42303356) == true ) ) then
set udg_Int[1]=80
set udg_Int[2]=80
set udg_Int[3]=80
set udg_Int[4]=80
set udg_Int[5]=80
call SetUnitState(GetTriggerUnit(), UNIT_STATE_MANA, ( GetUnitState(GetTriggerUnit(), UNIT_STATE_MANA) - ( 0.50 * I2R(udg_Int[GetUnitAbilityLevel(GetTriggerUnit(), GetSpellAbilityId())]) ) ))
else
endif
set ydl_timer=CreateTimer()
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x6CD84461, GetTriggerUnit())
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x293DF2F5, GetSpellTargetUnit())
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0x99149280, GetUnitLoc(GetTriggerUnit()))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0xC90F02FD, GetUnitLoc(GetSpellTargetUnit()))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0x8A0E31E7, LoadLocationHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x8A0E31E7))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0x3AA0CF34, LoadLocationHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x3AA0CF34))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0xBF9304BF, LoadLocationHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xBF9304BF))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0x3824AE9B, LoadLocationHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x3824AE9B))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x1B1E869E, LoadUnitHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x1B1E869E))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0xD78D4D25, LoadUnitHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xD78D4D25))
call SaveLightningHandle(YDHT, GetHandleId(ydl_timer), 0x8AD04E87, LoadLightningHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x8AD04E87))
call TimerStart(ydl_timer, 0.00, false, function Trig_shuangdaozhanFunc002T)
call FlushChildHashtable(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step)
set ydl_timer=null
endfunction
function InitTrig_shuangdaozhan takes nothing returns nothing
set gg_trg_shuangdaozhan=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_shuangdaozhan, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_shuangdaozhan, Condition(function Trig_shuangdaozhanConditions))
call TriggerAddAction(gg_trg_shuangdaozhan, function Trig_shuangdaozhanActions)
endfunction
function Trig_huixuanzhanConditions takes nothing returns boolean
return ( ( GetSpellAbilityId() == 0x41305131 ) )
endfunction
function Trig_huixuanzhanFunc002Func015Func005Func002Func001Func002Func002A takes nothing returns nothing
call RemoveUnit(GetEnumUnit())
endfunction
function Trig_huixuanzhanFunc002Func015Func005Func002Func001Func002Func010T takes nothing returns nothing
call SetUnitPathing(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), true)
call UnitApplyTimedLife(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xC367145E), 0x42487765, 0.50)
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
endfunction
function Trig_huixuanzhanFunc002Func015Func005Func002Func001Func002Func021A takes nothing returns nothing
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF, PolarProjectionBJ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34), ( LoadReal(YDHT, GetHandleId(GetExpiredTimer()), 0x4F80CBBC) * 10.00 ), ( ( I2R(GetUnitUserData(GetEnumUnit())) * 90.00 ) + LoadReal(YDHT, GetHandleId(GetExpiredTimer()), 0xFE77D408) )))
call SetUnitX(GetEnumUnit(), GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF)))
call SetUnitY(GetEnumUnit(), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF)))
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF))
call SetUnitScale(GetEnumUnit(), ( 0.10 + ( 0.05 * LoadReal(YDHT, GetHandleId(GetExpiredTimer()), 0x4F80CBBC) ) ), ( 0.10 + ( 0.05 * LoadReal(YDHT, GetHandleId(GetExpiredTimer()), 0x4F80CBBC) ) ), ( 0.10 + ( 0.05 * LoadReal(YDHT, GetHandleId(GetExpiredTimer()), 0x4F80CBBC) ) ))
endfunction
function Trig_huixuanzhanFunc002Func015Func005Func004Func014Func002A takes nothing returns nothing
if ( ( GetEnumDestructable() != gg_dest_YT11_3231 ) and ( IsDestructableDeadBJ(GetEnumDestructable()) == false ) and ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xC8F7F1C1) == 0 ) ) then
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34))
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34, GetDestructableLoc(GetEnumDestructable()))
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xC8F7F1C1, 2)
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7, 165)
call GroupRemoveUnit(udg_mksdwz[1], LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E))
call GroupAddUnit(udg_mksdwz[2], LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E))
call SaveGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF0EA2EC, CreateGroup())
call SaveGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xEB494D94, CreateGroup())
set udg_mkszs[3]=1
loop
exitwhen udg_mkszs[3] > 4
call SaveUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5, CreateUnitAtLoc(GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)), 0x65303850, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), GetUnitFacing(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))))
call SetUnitUserData(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5), udg_mkszs[3])
call GroupAddUnit(LoadGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF0EA2EC), LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5))
set udg_mkszs[3]=udg_mkszs[3] + 1
endloop
else
endif
endfunction
function Trig_huixuanzhanFunc002Func015T takes nothing returns nothing
local group ydl_group
local unit ydl_unit
local timer ydl_timer
if ( ( IsUnitPausedBJ(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)) == true ) ) then
set ydl_group=null
set ydl_unit=null
set ydl_timer=null
return
else
endif
if ( ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xC8F7F1C1) == 0 ) ) then
if ( ( UnitHasBuffBJ(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x4230324F) == false ) ) then
call s__baka_IssueTargetOrderById2(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xC367145E) , 852095 , LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))
else
endif
if ( ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7) > 0 ) ) then
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7, ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7) - 1 ))
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)))
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E)))
if ( ( udg_mkszs[2] == 1 ) ) then
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF, PolarProjectionBJ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), 100.00, GetUnitFacing(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))))
call MoveLightningEx(LoadLightningHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8AD04E87), false, GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF)), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF)), ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF)) + ( s__maphack_GetHeight(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)) + 100.00 ) ), GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)), ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)) + 100.00 ))
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF))
else
call MoveLightningEx(LoadLightningHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8AD04E87), false, GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)), ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)) + ( s__maphack_GetHeight(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)) + 100.00 ) ), GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)), ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)) + 100.00 ))
endif
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34, PolarProjectionBJ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7), 80.00, GetUnitFacing(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E))))
if ( ( ( GetTerrainCliffLevelBJ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)) > GetTerrainCliffLevelBJ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)) ) or ( IsTerrainPathableBJ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34), PATHING_TYPE_WALKABILITY) == true ) ) ) then
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xC8F7F1C1, 2)
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7, 165)
call GroupRemoveUnit(udg_mksdwz[1], LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E))
call GroupAddUnit(udg_mksdwz[2], LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E))
call SaveGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF0EA2EC, CreateGroup())
call SaveGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xEB494D94, CreateGroup())
set udg_mkszs[3]=1
loop
exitwhen udg_mkszs[3] > 4
call SaveUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5, CreateUnitAtLoc(GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)), 0x65303850, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), GetUnitFacing(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))))
call SetUnitUserData(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5), udg_mkszs[3])
call GroupAddUnit(LoadGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF0EA2EC), LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5))
set udg_mkszs[3]=udg_mkszs[3] + 1
endloop
else
call SaveRectHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xFB65B3F0, RectFromCenterSizeBJ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34), 175.00, 175.00))
call EnumDestructablesInRectAll(LoadRectHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xFB65B3F0), function Trig_huixuanzhanFunc002Func015Func005Func004Func014Func002A)
call RemoveRect(LoadRectHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xFB65B3F0))
if ( ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xC8F7F1C1) == 0 ) ) then
set ydl_group=CreateGroup()
call GroupEnumUnitsInRange(ydl_group, GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)), 175.00, null)
loop
set ydl_unit=FirstOfGroup(ydl_group)
exitwhen ydl_unit == null
call GroupRemoveUnit(ydl_group, ydl_unit)
if ( ( IsUnitType(ydl_unit, UNIT_TYPE_STRUCTURE) == true ) and ( IsUnitType(ydl_unit, UNIT_TYPE_DEAD) == false ) ) then
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF, GetUnitLoc(ydl_unit))
if ( ( ( ( ( GetUnitTypeId(ydl_unit) == 0x68636173 ) or ( GetUnitTypeId(ydl_unit) == 0x6E65666D ) ) and ( DistanceBetweenPoints(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34), LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF)) <= 175.00 ) ) or ( DistanceBetweenPoints(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34), LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF)) <= 100.00 ) ) ) then
if ( ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xC8F7F1C1) == 0 ) ) then
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34))
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34, GetUnitLoc(ydl_unit))
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xC8F7F1C1, 2)
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7, 165)
call GroupRemoveUnit(udg_mksdwz[1], LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E))
call GroupAddUnit(udg_mksdwz[2], LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E))
call SaveGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF0EA2EC, CreateGroup())
call SaveGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xEB494D94, CreateGroup())
set udg_mkszs[3]=1
loop
exitwhen udg_mkszs[3] > 4
call SaveUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5, CreateUnitAtLoc(GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)), 0x65303850, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), GetUnitFacing(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))))
call SetUnitUserData(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5), udg_mkszs[3])
call GroupAddUnit(LoadGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF0EA2EC), LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5))
set udg_mkszs[3]=udg_mkszs[3] + 1
endloop
else
endif
else
endif
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF))
else
endif
endloop
call DestroyGroup(ydl_group)
else
endif
if ( ( IsTerrainPathableBJ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34), PATHING_TYPE_FLYABILITY) == false ) ) then
if ( ( udg_mkszs[2] == 1 ) ) then
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF, PolarProjectionBJ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), 100.00, GetUnitFacing(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))))
call MoveLightningEx(LoadLightningHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8AD04E87), false, GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF)), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF)), ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF)) + ( s__maphack_GetHeight(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)) + 100.00 ) ), GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)), ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)) + 100.00 ))
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF))
else
call MoveLightningEx(LoadLightningHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8AD04E87), false, GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)), ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)) + ( s__maphack_GetHeight(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)) + 100.00 ) ), GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)), ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)) + 100.00 ))
endif
call SetUnitX(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E), GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)))
call SetUnitY(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)))
else
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xC8F7F1C1, 2)
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7, 165)
call GroupRemoveUnit(udg_mksdwz[1], LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E))
call GroupAddUnit(udg_mksdwz[2], LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E))
call SaveGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF0EA2EC, CreateGroup())
set udg_mkszs[3]=1
loop
exitwhen udg_mkszs[3] > 4
call SaveUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5, CreateUnitAtLoc(GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)), 0x65303850, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), GetUnitFacing(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))))
call SetUnitUserData(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5), udg_mkszs[3])
call GroupAddUnit(LoadGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF0EA2EC), LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5))
set udg_mkszs[3]=udg_mkszs[3] + 1
endloop
endif
endif
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280))
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7))
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34))
else
call GroupRemoveUnit(udg_mksdwz[1], LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E))
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xC8F7F1C1, 1)
call UnitRemoveBuffBJ(0x4230324F, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))
call ResetUnitAnimation(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xAF4CC8D0, GetUnitAbilityLevel(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x41305131))
call UnitRemoveAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x41305131)
call UnitAddAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x41305131)
call SetUnitAbilityLevel(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x41305131, LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xAF4CC8D0))
endif
else
if ( ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xC8F7F1C1) == 1 ) ) then
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)))
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E)))
if ( ( udg_mkszs[2] == 1 ) ) then
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF, PolarProjectionBJ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), 100.00, GetUnitFacing(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))))
call MoveLightningEx(LoadLightningHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8AD04E87), false, GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF)), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF)), ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF)) + ( s__maphack_GetHeight(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)) + 100.00 ) ), GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)), ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)) + 100.00 ))
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF))
else
call MoveLightningEx(LoadLightningHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8AD04E87), false, GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)), ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)) + ( s__maphack_GetHeight(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)) + 100.00 ) ), GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)), ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)) + 100.00 ))
endif
if ( ( DistanceBetweenPoints(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)) >= 80.00 ) ) then
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34, PolarProjectionBJ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7), ( 15.00 + ( 12.00 * I2R(GetUnitAbilityLevel(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x41305058)) ) ), AngleBetweenPoints(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7), LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280))))
call SetUnitFacing(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E), AngleBetweenPoints(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)))
call SetUnitX(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E), GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)))
call SetUnitY(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)))
call RemoveLocation(GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)))
else
call GroupRemoveUnit(udg_mksdwz[0], LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E))
if ( ( CountUnitsInGroup(udg_mksdwz[0]) < 2 ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)), 0x41305058, true)
call SetPlayerAbilityAvailable(GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)), 0x41305131, true)
else
endif
call RemoveUnit(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E))
call DestroyLightning(LoadLightningHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8AD04E87))
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
endif
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280))
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7))
else
if ( ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xC8F7F1C1) == 2 ) ) then
if ( ( UnitHasBuffBJ(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x4230324F) == false ) ) then
call s__baka_IssueTargetOrderById2(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xC367145E) , 852095 , LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))
else
endif
if ( ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7) > 0 ) ) then
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7, ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7) - 1 ))
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)))
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E)))
if ( ( LoadReal(YDHT, GetHandleId(GetExpiredTimer()), 0x4F80CBBC) >= 5.00 ) and ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7) > 15 ) and ( LoadReal(YDHT, GetHandleId(GetExpiredTimer()), 0x0BA49B00) > 50.00 ) ) then
set ydl_group=CreateGroup()
call GroupEnumUnitsInRange(ydl_group, GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)), ( 100.00 + ( LoadReal(YDHT, GetHandleId(GetExpiredTimer()), 0x4F80CBBC) * 8.00 ) ), null)
loop
set ydl_unit=FirstOfGroup(ydl_group)
exitwhen ydl_unit == null
call GroupRemoveUnit(ydl_group, ydl_unit)
if ( ( IsUnitType(ydl_unit, UNIT_TYPE_STRUCTURE) == false ) and ( IsUnitType(ydl_unit, UNIT_TYPE_DEAD) == false ) and ( IsUnitEnemy(ydl_unit, GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))) == true ) ) then
if ( ( IsUnitInGroup(ydl_unit, LoadGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xEB494D94)) == false ) ) then
call GroupAddUnit(LoadGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xEB494D94), ydl_unit)
if ( ( UnitHasBuffBJ(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x42303356) == true ) ) then
call UnitDamageTarget(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), ydl_unit, ( ( ( ( 100.00 + ( 100.00 * I2R(GetUnitAbilityLevel(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x41305131)) ) ) + ( 2.00 * I2R(GetHeroAgi(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), true)) ) ) * 1.20 ) * 1.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_SLICE)
else
call UnitDamageTarget(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), ydl_unit, ( ( ( ( 100.00 + ( 100.00 * I2R(GetUnitAbilityLevel(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x41305131)) ) ) + ( 2.00 * I2R(GetHeroAgi(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), true)) ) ) * 1.00 ) * 1.00 ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_SLICE)
endif
call SaveUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5, CreateUnitAtLoc(GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)), 0x65303130, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), 0.00))
call UnitAddAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5), 0x41304449)
call s__baka_IssueTargetOrderById2(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5) , 852095 , ydl_unit)
call UnitApplyTimedLife(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5), 0x42487765, 0.50)
else
if ( ( UnitHasBuffBJ(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 0x42303356) == true ) ) then
call UnitDamageTarget(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), ydl_unit, ( I2R(GetHeroAgi(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), true)) * ( ( 0.10 + ( 0.02 * LoadReal(YDHT, GetHandleId(GetExpiredTimer()), 0x4F80CBBC) ) ) * 1.20 ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_SLICE)
else
call UnitDamageTarget(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), ydl_unit, ( I2R(GetHeroAgi(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), true)) * ( ( 0.10 + ( 0.02 * LoadReal(YDHT, GetHandleId(GetExpiredTimer()), 0x4F80CBBC) ) ) * 1.00 ) ), true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_MAGIC, WEAPON_TYPE_METAL_HEAVY_SLICE)
endif
endif
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl", ydl_unit, "chest"))
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34, GetUnitLoc(ydl_unit))
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF, PolarProjectionBJ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34), ( ( DistanceBetweenPoints(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34), LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)) - 500.00 ) * 0.10 ), AngleBetweenPoints(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34), LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7))))
if ( ( IsTerrainPathableBJ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF), PATHING_TYPE_WALKABILITY) == false ) ) then
call SetUnitX(ydl_unit, GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF)))
call SetUnitY(ydl_unit, GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF)))
else
endif
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34))
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF))
else
endif
endloop
call DestroyGroup(ydl_group)
else
endif
if ( ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7) == 120 ) ) then
call SaveUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x93AA82B4, CreateUnitAtLoc(GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)), 0x65303854, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), 0.00))
else
if ( ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7) > 120 ) ) then
call SetUnitX(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x93AA82B4), GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)))
call SetUnitY(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x93AA82B4), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)))
else
endif
endif
if ( ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7) > 100 ) ) then
call SaveReal(YDHT, GetHandleId(GetExpiredTimer()), 0x4F80CBBC, RMinBJ(( LoadReal(YDHT, GetHandleId(GetExpiredTimer()), 0x4F80CBBC) + 0.10 ), 20.00))
call SaveReal(YDHT, GetHandleId(GetExpiredTimer()), 0x804606DC, ( ( 500.00 - DistanceBetweenPoints(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)) ) * 0.01 ))
else
call SaveReal(YDHT, GetHandleId(GetExpiredTimer()), 0x804606DC, ( ( 500.00 - DistanceBetweenPoints(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)) ) * 0.02 ))
call SaveReal(YDHT, GetHandleId(GetExpiredTimer()), 0x804606DC, ( LoadReal(YDHT, GetHandleId(GetExpiredTimer()), 0x804606DC) + GetRandomReal(- 10.00, 10.00) ))
if ( ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7) > 40 ) ) then
call SaveReal(YDHT, GetHandleId(GetExpiredTimer()), 0x4F80CBBC, RMinBJ(( LoadReal(YDHT, GetHandleId(GetExpiredTimer()), 0x4F80CBBC) + 0.40 ), 30.00))
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl", LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)))
if ( ( IsUnitType(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), UNIT_TYPE_DEAD) == true ) ) then
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0x80A9ADA7, 15)
else
endif
else
call SaveReal(YDHT, GetHandleId(GetExpiredTimer()), 0x4F80CBBC, RMaxBJ(( ( LoadReal(YDHT, GetHandleId(GetExpiredTimer()), 0x4F80CBBC) * 0.97 ) - 0.35 ), 0.00))
endif
endif
call SaveReal(YDHT, GetHandleId(GetExpiredTimer()), 0xFE77D408, ( LoadReal(YDHT, GetHandleId(GetExpiredTimer()), 0xFE77D408) + ( ( LoadReal(YDHT, GetHandleId(GetExpiredTimer()), 0x4F80CBBC) * 5.00 ) + 5.00 ) ))
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34, PolarProjectionBJ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7), ( DistanceBetweenPoints(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7), LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)) + LoadReal(YDHT, GetHandleId(GetExpiredTimer()), 0x804606DC) ), ( AngleBetweenPoints(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7), LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)) + LoadReal(YDHT, GetHandleId(GetExpiredTimer()), 0x4F80CBBC) )))
call MoveLightningEx(LoadLightningHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8AD04E87), false, GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)), ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)) + ( s__maphack_GetHeight(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)) + 100.00 ) ), GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)), ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7)) + 100.00 ))
call ForGroupBJ(LoadGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF0EA2EC), function Trig_huixuanzhanFunc002Func015Func005Func002Func001Func002Func021A)
call SetUnitFacing(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), ( AngleBetweenPoints(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7), LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)) + 90.00 ))
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xAF4CC8D0, 0)
call SaveReal(YDHT, GetHandleId(GetExpiredTimer()), 0x0BA49B00, s__math_U2L(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461) , LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBB4E8B09) , 0 , true))
call SaveLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBB4E8B09, GetUnitLoc(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)))
if ( ( LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xAF4CC8D0) == 0 ) ) then
if ( ( IsTerrainPathable(GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)), PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitX(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)))
else
endif
if ( ( IsTerrainPathable(GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)), PATHING_TYPE_FLYABILITY) == false ) ) then
call SetUnitY(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34)))
else
endif
else
endif
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34))
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280))
call RemoveLocation(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7))
else
call RemoveUnit(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x93AA82B4))
call ForGroupBJ(LoadGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF0EA2EC), function Trig_huixuanzhanFunc002Func015Func005Func002Func001Func002Func002A)
call DestroyGroup(LoadGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF0EA2EC))
call DestroyGroup(LoadGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xEB494D94))
call SaveInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xC8F7F1C1, 1)
call GroupRemoveUnit(udg_mksdwz[2], LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E))
call ResetUnitAnimation(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))
call UnitRemoveBuffBJ(0x4230324F, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))
call SetUnitPathing(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), false)
set ydl_timer=CreateTimer()
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x6CD84461, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x6CD84461, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0xC367145E, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xC367145E))
call TimerStart(ydl_timer, 1.00, false, function Trig_huixuanzhanFunc002Func015Func005Func002Func001Func002Func010T)
call EnableTrigger(gg_trg_litijidong_1_5)
endif
else
endif
endif
endif
set ydl_group=null
set ydl_unit=null
set ydl_timer=null
endfunction
function Trig_huixuanzhanFunc002T takes nothing returns nothing
local timer ydl_timer
set udg_mkszs[0]=0
set udg_mkszs[1]=0
call SaveUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xC367145E, CreateUnitAtLoc(GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)), 0x65303130, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), 0.00))
call UnitAddAbility(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xC367145E), 0x41305059)
call s__baka_IssueTargetOrderById2(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xC367145E) , 852095 , LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))
call DisableTrigger(gg_trg_litijidong_1_5)
call SaveUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E, CreateUnitAtLoc(GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)), 0x6530384D, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), AngleBetweenPoints(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280), LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xC90F02FD))))
call GroupAddUnit(udg_mksdwz[0], LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E))
if ( ( CountUnitsInGroup(udg_mksdwz[0]) >= 2 ) ) then
call SetPlayerAbilityAvailable(GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)), 0x41305058, false)
call SetPlayerAbilityAvailable(GetOwningPlayer(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)), 0x41305131, false)
else
endif
call GroupAddUnit(udg_mksdwz[1], LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E))
call SaveLightningHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8AD04E87, AddLightningEx("SZ", true, GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)), ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)) + ( s__maphack_GetHeight(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461)) + 100.00 ) ), GetLocationX(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)), GetLocationY(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)), ( GetLocationZ(LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280)) + 100.00 )))
call SetUnitAnimationByIndex(LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461), 6)
set ydl_timer=CreateTimer()
call SaveInteger(YDHT, GetHandleId(ydl_timer), 0x80A9ADA7, 25)
call SaveInteger(YDHT, GetHandleId(ydl_timer), 0xC8F7F1C1, 0)
call SaveInteger(YDHT, GetHandleId(ydl_timer), 0x55BBA912, 20)
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x6CD84461, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0xC90F02FD, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xC90F02FD))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x1B1E869E, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E))
call SaveLightningHandle(YDHT, GetHandleId(ydl_timer), 0x8AD04E87, LoadLightningHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8AD04E87))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x6CD84461, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x6CD84461))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0x99149280, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x99149280))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0xC90F02FD, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xC90F02FD))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0x8A0E31E7, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8A0E31E7))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0x3AA0CF34, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x3AA0CF34))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0xBF9304BF, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF9304BF))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x1B1E869E, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x1B1E869E))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x293DF2F5, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x293DF2F5))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x93AA82B4, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x93AA82B4))
call SaveGroupHandle(YDHT, GetHandleId(ydl_timer), 0xBF0EA2EC, LoadGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBF0EA2EC))
call SaveGroupHandle(YDHT, GetHandleId(ydl_timer), 0xEB494D94, LoadGroupHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xEB494D94))
call SaveRectHandle(YDHT, GetHandleId(ydl_timer), 0xFB65B3F0, LoadRectHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xFB65B3F0))
call SaveLightningHandle(YDHT, GetHandleId(ydl_timer), 0x8AD04E87, LoadLightningHandle(YDHT, GetHandleId(GetExpiredTimer()), 0x8AD04E87))
call SaveReal(YDHT, GetHandleId(ydl_timer), 0x804606DC, LoadReal(YDHT, GetHandleId(GetExpiredTimer()), 0x804606DC))
call SaveReal(YDHT, GetHandleId(ydl_timer), 0x4F80CBBC, LoadReal(YDHT, GetHandleId(GetExpiredTimer()), 0x4F80CBBC))
call SaveReal(YDHT, GetHandleId(ydl_timer), 0xFE77D408, LoadReal(YDHT, GetHandleId(GetExpiredTimer()), 0xFE77D408))
call SaveInteger(YDHT, GetHandleId(ydl_timer), 0xAF4CC8D0, LoadInteger(YDHT, GetHandleId(GetExpiredTimer()), 0xAF4CC8D0))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0xBB4E8B09, LoadLocationHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xBB4E8B09))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0xC367145E, LoadUnitHandle(YDHT, GetHandleId(GetExpiredTimer()), 0xC367145E))
call SaveReal(YDHT, GetHandleId(ydl_timer), 0x0BA49B00, LoadReal(YDHT, GetHandleId(GetExpiredTimer()), 0x0BA49B00))
call TimerStart(ydl_timer, 0.03, true, function Trig_huixuanzhanFunc002Func015T)
call FlushChildHashtable(YDHT, GetHandleId(GetExpiredTimer()))
call PauseTimer(GetExpiredTimer())
call FlushChildHashtable(globalHashtable, GetHandleId(GetExpiredTimer()))
call DestroyTimer(GetExpiredTimer())
set ydl_timer=null
endfunction
function Trig_huixuanzhanActions takes nothing returns nothing
local timer ydl_timer
local integer ydl_localvar_step=LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76)
set ydl_localvar_step=ydl_localvar_step + 3
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xCFDE6C76, ydl_localvar_step)
call SaveInteger(YDHT, GetHandleId(GetTriggeringTrigger()), 0xECE825E7, ydl_localvar_step)
if ( ( s__sys_isIn11() == false ) and ( UnitHasBuffBJ(GetTriggerUnit(), 0x42303356) == true ) ) then
set udg_Int[1]=120
set udg_Int[2]=130
set udg_Int[3]=140
set udg_Int[4]=150
call SetUnitState(GetTriggerUnit(), UNIT_STATE_MANA, ( GetUnitState(GetTriggerUnit(), UNIT_STATE_MANA) - ( 0.50 * I2R(udg_Int[GetUnitAbilityLevel(GetTriggerUnit(), GetSpellAbilityId())]) ) ))
else
endif
set ydl_timer=CreateTimer()
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x6CD84461, GetTriggerUnit())
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0x99149280, GetUnitLoc(GetTriggerUnit()))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0xC90F02FD, GetSpellTargetLoc())
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0x8A0E31E7, LoadLocationHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x8A0E31E7))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0x3AA0CF34, LoadLocationHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x3AA0CF34))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0xBF9304BF, LoadLocationHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xBF9304BF))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x1B1E869E, LoadUnitHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x1B1E869E))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x293DF2F5, LoadUnitHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x293DF2F5))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0x93AA82B4, LoadUnitHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x93AA82B4))
call SaveGroupHandle(YDHT, GetHandleId(ydl_timer), 0xBF0EA2EC, LoadGroupHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xBF0EA2EC))
call SaveGroupHandle(YDHT, GetHandleId(ydl_timer), 0xEB494D94, LoadGroupHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xEB494D94))
call SaveRectHandle(YDHT, GetHandleId(ydl_timer), 0xFB65B3F0, LoadRectHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xFB65B3F0))
call SaveLightningHandle(YDHT, GetHandleId(ydl_timer), 0x8AD04E87, LoadLightningHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x8AD04E87))
call SaveReal(YDHT, GetHandleId(ydl_timer), 0x804606DC, LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x804606DC))
call SaveReal(YDHT, GetHandleId(ydl_timer), 0x4F80CBBC, LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x4F80CBBC))
call SaveReal(YDHT, GetHandleId(ydl_timer), 0xFE77D408, LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xFE77D408))
call SaveInteger(YDHT, GetHandleId(ydl_timer), 0xAF4CC8D0, LoadInteger(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xAF4CC8D0))
call SaveLocationHandle(YDHT, GetHandleId(ydl_timer), 0xBB4E8B09, LoadLocationHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xBB4E8B09))
call SaveUnitHandle(YDHT, GetHandleId(ydl_timer), 0xC367145E, LoadUnitHandle(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0xC367145E))
call SaveReal(YDHT, GetHandleId(ydl_timer), 0x0BA49B00, LoadReal(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step, 0x0BA49B00))
call TimerStart(ydl_timer, 0.00, false, function Trig_huixuanzhanFunc002T)
call FlushChildHashtable(YDHT, GetHandleId(GetTriggeringTrigger()) * ydl_localvar_step)
set ydl_timer=null
endfunction
function InitTrig_huixuanzhan takes nothing returns nothing
set gg_trg_huixuanzhan=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_huixuanzhan, EVENT_PLAYER_UNIT_SPELL_EFFECT)
call TriggerAddCondition(gg_trg_huixuanzhan, Condition(function Trig_huixuanzhanConditions))
call TriggerAddAction(gg_trg_huixuanzhan, function Trig_huixuanzhanActions)
endfunction
function Trig_undefActions takes nothing returns nothing
endfunction
function InitTrig_undef takes nothing returns nothing
set gg_trg_undef=CreateTrigger()
call TriggerAddAction(gg_trg_undef, function Trig_undefActions)
endfunction
function InitCustomTriggers takes nothing returns nothing
//Function not found: call InitTrig_Lua___LuaLibrary()
//Function not found: call InitTrig_base_lua()
//Function not found: call InitTrig_util_lua()
//Function not found: call InitTrig_timer_lua()
//Function not found: call InitTrig_player_lua()
//Function not found: call InitTrig_game_lua()
//Function not found: call InitTrig_text_lua()
//Function not found: call InitTrig____defineLibrary()
//Function not found: call InitTrig__________baseLibrary()
//Function not found: call InitTrig_11____________11plantRecord()
//Function not found: call InitTrig______________RecordFix()
//Function not found: call InitTrig__________eventLibrary()
//Function not found: call InitTrig__________mathLibrary()
//Function not found: call InitTrig_____________stringLibrary()
//Function not found: call InitTrig__________unitLibrary()
//Function not found: call InitTrig________________textLibrary()
//Function not found: call InitTrig__________effeLibrary()
//Function not found: call InitTrig__________soundLibrary()
//Function not found: call InitTrig__________bakaLibrary()
//Function not found: call InitTrig__________objectLibrary()
//Function not found: call InitTrig_______testLibrary()
//Function not found: call InitTrig_YDWEKLibrary()
//Function not found: call InitTrig__________processLibrary()
call InitTrig_suijiduiwu()
call InitTrig_chushihua()
call InitTrig_time_0()
call InitTrig_time_1()
call InitTrig__ctgbt()
call InitTrig__jzgtx()
call InitTrig_time40out_random()
call InitTrig_all_random()
call InitTrig_choose_hero()
call InitTrig_jinengxianshi()
call InitTrig_duihuakuang2()
call InitTrig_miwu_on_off()
call InitTrig_Competition()
call InitTrig_banben()
call InitTrig_v2_6()
call InitTrig_All_skills()
call InitTrig_Delete_trigger()
call InitTrig_lx()
call InitTrig_lx0_5()
call InitTrig_lx0_6_1212()
call InitTrig_lx0_6_2121()
call InitTrig_lx0_7_ban_hero1()
call InitTrig_lx0_7_ban_hero6()
call InitTrig_lx_1()
call InitTrig_lx1221122112()
call InitTrig_lx2112211221()
call InitTrig_lx_random_1()
call InitTrig_lx_random_2()
call InitTrig_lx_choose_hero()
call InitTrig_random_hero()
call InitTrig_random_hero2()
call InitTrig_duomianban()
call InitTrig_youxikaishi()
call InitTrig_game_time()
call InitTrig_kick_player()
call InitTrig_kick_cancel()
call InitTrig_kick_1()
call InitTrig_kick_2()
call InitTrig_game_money()
call InitTrig_game_gangshao()
call InitTrig_game_gangshao_2()
call InitTrig_shuabign()
call InitTrig_mijijinzhi()
call InitTrig_duomianban2_death()
call InitTrig_duomianban3_until()
call InitTrig_duomianban4_hero()
call InitTrig_duomianban5_chenghao()
call InitTrig_duomianban6_exe()
call InitTrig_duomianban6_exe_2()
call InitTrig_fuhuo()
call InitTrig_fh01()
call InitTrig_fh02()
call InitTrig_fh03()
call InitTrig_fh04()
call InitTrig_fh05()
call InitTrig_fh06()
call InitTrig_fh07()
call InitTrig_fh08()
call InitTrig_fh09()
call InitTrig_fh10()
call InitTrig_jishiqi79()
call InitTrig_shengfupanding()
call InitTrig_jidiboom_1()
call InitTrig_jidiboom_2()
call InitTrig_guanqiachongzhi()
call InitTrig_guanqiachongzhi_if()
call InitTrig_shengfupanding2()
call InitTrig_SC()
call InitTrig_water_SC()
call InitTrig_water_SC_2()
call InitTrig_water_SC_3()
call InitTrig_star_SC_1()
call InitTrig_star_SC_2()
call InitTrig_tree_SC_1()
call InitTrig_tree_SC_1_5()
call InitTrig_tree_SC_2()
call InitTrig_tree_SC_2_5()
call InitTrig_start()
call InitTrig_end()
call InitTrig_next()
call InitTrig_hg()
call InitTrig_level_10()
call InitTrig_lv_10_win()
call InitTrig_lv_10_win_60s()
call InitTrig_shuabing_JS()
call InitTrig_shuabing_JS_teshu()
call InitTrig_shuabing_gaoji()
call InitTrig_shuabing_boss()
call InitTrig_Start_go()
call InitTrig_Go()
call InitTrig_shuabing_left_up()
call InitTrig_shuabing_right_down()
call InitTrig_shuabing_all()
call InitTrig_shuabing_js()
call InitTrig_shuabign1()
call InitTrig_shuabign2()
call InitTrig_binglishengji()
call InitTrig_Extra()
call InitTrig_extra_ready()
call InitTrig_JS_AI_1s()
call InitTrig_JS_AI_3s()
call InitTrig_attack_js()
call InitTrig_huifu_15_u()
call InitTrig_siwang_zhongji()
call InitTrig_tufuzhenji()
call InitTrig_tufupenguozhi()
call InitTrig_ningshi_1()
call InitTrig_ningshi_2()
call InitTrig_xuanwo_1()
call InitTrig_xuanwo_2()
call InitTrig_duyepenshe_1()
call InitTrig_duyepenshe_2()
call InitTrig_duyepenshe_3()
call InitTrig_tujin_1()
call InitTrig_tujin_2()
call InitTrig_zhendang_1()
call InitTrig_zhendang_2()
call InitTrig_zhendang_3()
call InitTrig_boss_shiwangbaozou()
call InitTrig_boss_dajiangshan_1()
call InitTrig_boss_dajiangshan_2()
call InitTrig_boss_dajiangshan_3()
call InitTrig_boss_zhendangbo_1()
call InitTrig_boss_zhendangbo_2()
call InitTrig_boss_zhongquan_1()
call InitTrig_boss_zhongquan_2()
call InitTrig_boss_zhongquan_3()
call InitTrig_wajue_1()
call InitTrig_wajue_2()
call InitTrig_xuanfengshabao_1()
call InitTrig_xuanfengshabao_2()
call InitTrig_tiaoji_1()
call InitTrig_tiaoji_2()
call InitTrig_leishouzhenji_1()
call InitTrig_leishouzhenji_2()
call InitTrig_anwuzhi()
call InitTrig_tujin_jiaoxi()
call InitTrig_siwangchanrao_1()
call InitTrig_siwangchanrao_2()
call InitTrig_siwanghuimie_1()
call InitTrig_siwanghuimie_2()
call InitTrig_guishou_1()
call InitTrig_guishou_2()
call InitTrig_chuanci()
call InitTrig_zhixianchuanci_1()
call InitTrig_zhixianchuanci_2()
call InitTrig_boss2_jianta()
call InitTrig_boss2_hongtianlei_0()
call InitTrig_boss2_hongtianlei_1()
call InitTrig_boss2_hongtianlei_2()
call InitTrig_boss2_liuxingchui_0()
call InitTrig_boss2_liuxingchui_1()
call InitTrig_boss2_liuxingchui_2()
call InitTrig_boss2_huanxingzhenji()
call InitTrig_boss2_attack_1()
call InitTrig_boss2_attack_2()
call InitTrig_boss2_gouheji_1()
call InitTrig_boss2_gouheji_2()
call InitTrig_bossex_anxi_1()
call InitTrig_bossex_anxi_2()
call InitTrig_bossex_anren_1()
call InitTrig_bossex_anren_2()
call InitTrig_bossex_anren_3()
call InitTrig_bossex_canying()
call InitTrig_bossex_canying_2()
call InitTrig_skills()
call InitTrig_stop()
call InitTrig_tianqi()
call InitTrig_sheep_mie()
call InitTrig_sheep()
call InitTrig_sheep_death()
call InitTrig_lipinbao()
call InitTrig_FXT()
call InitTrig_huanlei()
call InitTrig_huanlei_2()
call InitTrig_0_33t_zhouqi()
call InitTrig_tognleidiejia()
call InitTrig_jineng()
call InitTrig_spell()
call InitTrig_swdw()
call InitTrig_kill_hero()
call InitTrig_double_kill()
call InitTrig_kill_ta()
call InitTrig_bingyin_1()
call InitTrig_bingyin_2()
call InitTrig_bingyin_3()
call InitTrig_bingyin_4()
call InitTrig_attack()
call InitTrig_Defense()
call InitTrig_test_djcs()
call InitTrig_djcs()
call InitTrig_cxxr()
call InitTrig_jfcx()
call InitTrig_zs()
call InitTrig_zs2()
call InitTrig_bug()
call InitTrig_out()
call InitTrig_guaji_1()
call InitTrig_DT_1()
call InitTrig_DT_1_out()
call InitTrig_DT_2()
call InitTrig_DT_2_out()
call InitTrig_chuansong_1()
call InitTrig_chuansong_2()
call InitTrig_chuansong_3()
call InitTrig_GH()
call InitTrig_GH_2()
call InitTrig_GH_3()
call InitTrig_gangshao_1()
call InitTrig_gangshao_2()
call InitTrig_chaichu()
call InitTrig_OB()
call InitTrig_SmD_swap_xx()
call InitTrig_SmD_swap()
call InitTrig_Smd_swap2()
call InitTrig_SmD_swap_no()
call InitTrig_SmD_OB()
call InitTrig_SmD_gpk()
call InitTrig_SmD_Random()
call InitTrig_SmD_repick()
call InitTrig_SmD_V()
call InitTrig_SmD_SG()
call InitTrig_SG01()
call InitTrig_SG02()
call InitTrig_SmD_fuhuo()
call InitTrig_SmD_dengta()
call InitTrig_SmD_xinshi()
call InitTrig_maihuo()
call InitTrig_shijiao()
call InitTrig_shijiao2()
call InitTrig_shijiao_time()
call InitTrig_money_balabala()
call InitTrig_HeroSkillPoint()
call InitTrig_StayHome()
call InitTrig_renyishanghai()
call InitTrig_renyishanghai_hero()
call InitTrig_gongxiangwupin()
call InitTrig_zhuangbei_new()
call InitTrig_fuwen()
call InitTrig_aoshufaqiu_2()
call InitTrig_aoshufaqiu_3()
call InitTrig_xuanfengzhanfu_2()
call InitTrig_xuanfengzhanfu_att()
call InitTrig_xuanfengzhanfu_down()
call InitTrig_rexuebiaoqiang_2()
call InitTrig_shengshisuipian()
call InitTrig_faqiufumo()
call InitTrig_faqiufumo_huoqiu()
call InitTrig_faqiufumo_duqiu()
call InitTrig_faqiufumo_bingqiu()
call InitTrig_longcha()
call InitTrig_nengliangzhiren()
call InitTrig_chongji_1()
call InitTrig_chongji_2()
call InitTrig_chongji_3()
call InitTrig_yinshenxie_0()
call InitTrig_yinshenxie_1()
call InitTrig_yuanzhihuo_1()
call InitTrig_yuanzhihuo_2()
call InitTrig_baowufengyin_1()
call InitTrig_huihuang()
call InitTrig_yuexi()
call InitTrig_yueyaohuandun()
call InitTrig_xiangchichongji()
call InitTrig_xiangchichongji_2()
call InitTrig_xuehongzhanfu_1()
call InitTrig_xuehongzhanfu_2()
call InitTrig_tuxizhiren()
call InitTrig_tuxizhiren_2()
call InitTrig_guangshi_1()
call InitTrig_guangshi_2()
call InitTrig_guangshi_3()
call InitTrig_yingyan_1()
call InitTrig_qidi_1()
call InitTrig_fengkiangliliang_1()
call InitTrig_fengkiangliliang_2()
call InitTrig_yuyi_1()
call InitTrig_xuezhou_1()
call InitTrig_xingcanpifeng()
call InitTrig_yuyi_3()
call InitTrig_yuyi_4()
call InitTrig_yuyi_5()
call InitTrig_yuyi_6()
call InitTrig_lichang_1()
call InitTrig_lichang_2()
call InitTrig_lichang_3()
call InitTrig_lingji_1()
call InitTrig_lingji_2()
call InitTrig_lingji_3()
call InitTrig_Hf_Yx_Lz()
call InitTrig_shanshuo()
call InitTrig_jushe_1()
call InitTrig_jushe_2()
call InitTrig_fengxing_1()
call InitTrig_fengxing_2()
call InitTrig_fengbao_1()
call InitTrig_fengbao_2()
call InitTrig_xingchenzhiren_1()
call InitTrig_xingchenzhiren_2()
call InitTrig_jixing_1()
call InitTrig_jixing_2()
call InitTrig_jufeng()
call InitTrig_shenlanemeng()
call InitTrig_shanxi()
call InitTrig_xuanyuanjian_20()
call InitTrig_guangzhang_15()
call InitTrig_jinghua()
call InitTrig_jinghua_2()
call InitTrig_zinengliang_1()
call InitTrig_zinengliang_2()
call InitTrig_zinengliang_3()
call InitTrig_zinengliang_4()
call InitTrig_xianzuquanzhang_1()
call InitTrig_xuhuachongji()
call InitTrig_xuhuachongji_2()
call InitTrig_mofaxishou()
call InitTrig_aoshujian_1()
call InitTrig_aoshujian_2()
call InitTrig_cangqiong_1()
call InitTrig_cangqiong_2()
call InitTrig_shengmingzhishi()
call InitTrig_huanxianxuwu()
call InitTrig_xuwulinghun()
call InitTrig_smr1()
call InitTrig_smr2()
call InitTrig_smr3()
call InitTrig_smr4()
call InitTrig_smr5()
call InitTrig_smrII_3()
call InitTrig_smrII_4()
call InitTrig_smrII_4_5()
call InitTrig_smrII_5()
call InitTrig_CTZY()
call InitTrig_xiaoxinshi()
call InitTrig_gongxiang_1()
call InitTrig_gongxiang_2()
call InitTrig_gongxiang_3()
call InitTrig_diuqi_all()
call InitTrig_jiyu()
call InitTrig_huijia()
call InitTrig_xuanqu_xinshi()
call InitTrig_xuanqu_hero()
call InitTrig_PK_start_0()
call InitTrig_PK_start_1()
call InitTrig_PK_start_2()
call InitTrig_PK_time()
call InitTrig_PK_time_2()
call InitTrig_PK_time_3()
call InitTrig_PK_leave()
call InitTrig_PK_be_home()
call InitTrig_pk_shanghai_1()
call InitTrig_pk_shanghai_2()
call InitTrig_zhizhu_1()
call InitTrig_juxiong()
call InitTrig_jumo()
call InitTrig_jumo_2()
call InitTrig_FMH()
call InitTrig_zhiyu_1()
call InitTrig_zhiyu_2()
call InitTrig_zhiyu_3()
call InitTrig_yuhuasongge_1()
call InitTrig_yuhuasongge_2()
call InitTrig_kongjianyuesong_0()
call InitTrig_kongjianyuesong_1()
call InitTrig_kongjianyuesong_2()
call InitTrig_kongjianyuesong_3()
call InitTrig_sstc()
call InitTrig_sstc2()
call InitTrig_star_1()
call InitTrig_star_2()
call InitTrig_star_3()
call InitTrig_star_4()
call InitTrig_qyzsg()
call InitTrig_qyzsg2()
call InitTrig_chifu()
call InitTrig_chifu2()
call InitTrig_syslzj()
call InitTrig_syslzj2()
call InitTrig_syslzj_3()
call InitTrig_syslzj_4()
call InitTrig_fwjj()
call InitTrig_fwjj2()
call InitTrig_fwjj3()
call InitTrig_fwjj4()
call InitTrig_zj()
call InitTrig_yylxx()
call InitTrig_yylxx2()
call InitTrig_yylxx3()
call InitTrig_yylxx4()
call InitTrig_molifangchu_1()
call InitTrig_molifangchu_2()
call InitTrig_trps()
call InitTrig_trps2()
call InitTrig_tianporangsui()
call InitTrig_hwzs()
call InitTrig_hwzs2()
call InitTrig_hwzs3()
call InitTrig_duanzui_1()
call InitTrig_duanzui_2()
call InitTrig_zhenhong_1()
call InitTrig_zhenhong_2()
call InitTrig_feiyan_1()
call InitTrig_feiyan_2()
call InitTrig_hwxj()
call InitTrig_hwxj2()
call InitTrig_baka_1()
call InitTrig_baka_2()
call InitTrig_baka_5()
call InitTrig_baka_6()
call InitTrig_zhidianzhena_1()
call InitTrig_zhidianzhena_3()
call InitTrig_zhuizongdaodan_1()
call InitTrig_zhuizongdaodan_2()
call InitTrig_danmu_1()
call InitTrig_danmu_2()
call InitTrig_danmu_3()
call InitTrig_majiagongji()
call InitTrig_daodanqishe_1()
call InitTrig_daodanqishe_2()
call InitTrig_dd()
call InitTrig_dd2()
call InitTrig_weixingshexian_0()
call InitTrig_weixingshexian_1()
call InitTrig_weixingshexian_2()
call InitTrig_lz()
call InitTrig_lz2()
call InitTrig_lz3()
call InitTrig_wuyun_1()
call InitTrig_wuyun_2()
call InitTrig_leiji_1()
call InitTrig_leiji_2()
call InitTrig_sphl()
call InitTrig_sphl2()
call InitTrig_sjqh()
call InitTrig_sjqh2()
call InitTrig_guangdun_1()
call InitTrig_guangdun_1_5()
call InitTrig_guangdun_xuexi()
call InitTrig_guangdun_2()
call InitTrig_guangdun_3()
call InitTrig_tbz()
call InitTrig_tbz2()
call InitTrig_zhuanshuyijian_1()
call InitTrig_zhuanzhuyijian_2()
call InitTrig_fzj()
call InitTrig_fzj2()
call InitTrig_lianshe_1()
call InitTrig_lianshe_2()
call InitTrig_lianshe_3()
call InitTrig_gmjz()
call InitTrig_baoyujianzhen_2()
call InitTrig_gmjz2()
call InitTrig_rongjiangjushi_1()
call InitTrig_rongjiangjushi_2()
call InitTrig_bf()
call InitTrig_bf2()
call InitTrig_huixiong()
call InitTrig_huixiong_2()
call InitTrig_huixiong_4()
call InitTrig_langrenxingtai()
call InitTrig_langrenxingtai_2()
call InitTrig_langren_up()
call InitTrig_mengshouzhixi_1()
call InitTrig_mengshouzhixi_2()
call InitTrig_mengshouzhinu_2()
call InitTrig_mengshouzhinu_3()
call InitTrig_yanzhua()
call InitTrig_huitianmiedi_1()
call InitTrig_huitianmiedi_2()
call InitTrig_huitianmiedi_3()
call InitTrig_qianxing_1()
call InitTrig_qianxing_2()
call InitTrig_qianxing_3()
call InitTrig_shunshenlianzhan()
call InitTrig_shunshenlianzhan_0()
call InitTrig_shunshenlianzhan_2()
call InitTrig_huibi_1()
call InitTrig_huibi_2()
call InitTrig_huibi_3()
call InitTrig_anyingbu_0()
call InitTrig_anyingbu_0_1()
call InitTrig_anyingbu_0_2()
call InitTrig_anyingbu_0_3()
call InitTrig_anyingbu_1()
call InitTrig_anyingbu_2()
call InitTrig_huixuanbiao_1()
call InitTrig_huixuanbiao_2()
call InitTrig_zhimigntiji()
call InitTrig_zhimingtiji2()
call InitTrig_dizhen()
call InitTrig_dizhen2()
call InitTrig_xunsu()
call InitTrig_xunsu_2()
call InitTrig_jiandun()
call InitTrig_dunji_1()
call InitTrig_dunji_2()
call InitTrig_shenpanjiasuo_1()
call InitTrig_shenpanjiasuo_2()
call InitTrig_shenshengzhicai()
call InitTrig_huangjinxuanfeng()
call InitTrig_huangjinxuanfeng2()
call InitTrig_aersaisideyizhi()
call InitTrig_aersaisideyizhi2()
call InitTrig_aersaisideyizhi3()
call InitTrig_siwangchanrao()
call InitTrig_siwangchanrao2()
call InitTrig_xiaowangyiji()
call InitTrig_xiaowangyiji1()
call InitTrig_xiaowangyiji2()
call InitTrig_heihuagognji()
call InitTrig_heihuagongji2()
call InitTrig_heihuagongji3()
call InitTrig_heianyishi()
call InitTrig_heianyishi2()
call InitTrig_heianzuzhou_1()
call InitTrig_heianzuzhou_2()
call InitTrig_quanliyiji()
call InitTrig_quanliyiji_2()
call InitTrig_quanliyiji_3()
call InitTrig_tiaoyue()
call InitTrig_tiaoyue_2()
call InitTrig_tiaoyue_boxing()
call InitTrig_xuanfengti_1()
call InitTrig_xuanfengti_2()
call InitTrig_shunshenlianxi()
call InitTrig_shunshenlianxi2()
call InitTrig_sanlianhengda_1()
call InitTrig_sanlianhengda_1_5()
call InitTrig_sanlianhengda_1_9()
call InitTrig_sanlianhengda_2()
call InitTrig_sanlianhengda_2_5()
call InitTrig_sanlianhengda_2_9()
call InitTrig_sanlianhengda_3()
call InitTrig_sanlianhengda_3_5()
call InitTrig_sanlianhengda_4()
call InitTrig_rougou_1()
call InitTrig_rougou_2()
call InitTrig_rougou_3()
call InitTrig_guishou0()
call InitTrig_guishou()
call InitTrig_guishou2()
call InitTrig_guishou_ex()
call InitTrig_qiangxingliliang()
call InitTrig_qiangxingliliang_2()
call InitTrig_fushiwenyi_1()
call InitTrig_fushiwenyi_2()
call InitTrig_fushiwenyi_ex()
call InitTrig_tufubaozha()
call InitTrig_tufubaozha_2()
call InitTrig_tufubaozha_3()
call InitTrig_kenyao_0()
call InitTrig_kenyao()
call InitTrig_dianciliqianyin_1()
call InitTrig_dianciliqianyin_2()
call InitTrig_dianciliqianyin_3()
call InitTrig_dianciliqianyin_4()
call InitTrig_fangdian_1()
call InitTrig_fangdian_2()
call InitTrig_fangdian_2_______u()
call InitTrig_leijizhiqiang_1()
call InitTrig_leijizhiqiang_2()
call InitTrig_leijizhiqiang_3()
call InitTrig_leijian()
call InitTrig_chaodiancipao_1()
call InitTrig_chaodiancipao_2()
call InitTrig_chaodiancipao_3()
call InitTrig_chaodiancipao_4()
call InitTrig_chaodiancipao_5()
call InitTrig_jiujibisha()
call InitTrig_jiujibisha2()
call InitTrig_jiujibisha3()
call InitTrig_xuesezhuahen()
call InitTrig_xuesezhuahen2()
call InitTrig_langxi()
call InitTrig_paoxiaochongji_1()
call InitTrig_paoxiaochongji_2()
call InitTrig_paoxiaochongji_3()
call InitTrig_langdebenneng()
call InitTrig_langdebenneng_2()
call InitTrig_langshenhoujiao()
call InitTrig_jianqizhan()
call InitTrig_jianqizhan2()
call InitTrig_xiongzhan_1()
call InitTrig_xiongzhan_2()
call InitTrig_xiongzhan_3()
call InitTrig_bingjian_1()
call InitTrig_bingjian_2()
call InitTrig_bingbi_1()
call InitTrig_bingbi_2()
call InitTrig_lianzhan()
call InitTrig_lianzhan2()
call InitTrig_penqiji()
call InitTrig_bingdong()
call InitTrig_bingdong2()
call InitTrig_bigndognzhan()
call InitTrig_bingdognzhan2()
call InitTrig_yidaorp_1()
call InitTrig_yidaorp_2()
call InitTrig_chaojiu_1()
call InitTrig_chaojiu_2()
call InitTrig_chaojiu_3()
call InitTrig_hualongdianjing_1()
call InitTrig_hualongdianjing_2()
call InitTrig_yanshiqiang_1()
call InitTrig_yanshiqiang_2()
call InitTrig_yanshiqiang_3()
call InitTrig_yanshiqiang_4()
call InitTrig_gangciliancheng()
call InitTrig_gangciliancheng_2()
call InitTrig_ganghuajiazhi()
call InitTrig_zhenlizhimen()
call InitTrig_zhenlizhimen_2()
call InitTrig_xianzhezhishi()
call InitTrig_xianzhezhishi2()
call InitTrig_diyuhuoyan_1()
call InitTrig_diyuhuoyan_2()
call InitTrig_diyuhuoyan_3()
call InitTrig_lunrudao_1()
call InitTrig_lunrudao_2()
call InitTrig_lunrudao_3()
call InitTrig_xuhuan_1()
call InitTrig_xuhuan_2()
call InitTrig_xuhuan_3()
call InitTrig_diyuweituo_1()
call InitTrig_diyuweituo_2()
call InitTrig_yuanheng_1()
call InitTrig_yuanheng_2()
call InitTrig_diushoulei()
call InitTrig_diushoulei2()
call InitTrig_duochongjuji_1()
call InitTrig_duochongjuji_1_5()
call InitTrig_duochongjuji_2()
call InitTrig_duochongjuji_3()
call InitTrig_houkongfan()
call InitTrig_houkognfan2()
call InitTrig_chongjidan_1()
call InitTrig_chongjidan_2()
call InitTrig_chongjidan_3()
call InitTrig_baoliedan_1()
call InitTrig_baoliedan_2()
call InitTrig_baoliedan_3()
call InitTrig_huabu_1()
call InitTrig_huabu_2()
call InitTrig_xiaoyefuka__1()
call InitTrig_xiaoyefuka_0()
call InitTrig_xiaoyefuka_1()
call InitTrig_xiaoyefuka_2()
call InitTrig_time_shoubiao()
call InitTrig_time_shoubiao_2()
call InitTrig_shunyimoshu_1()
call InitTrig_shunyimoshu_2()
call InitTrig_houzuoli_16()
call InitTrig_tansheyinren_2_1()
call InitTrig_tansheyinren_2_2()
call InitTrig_feidao()
call InitTrig_feidao_the_world()
call InitTrig_feidao_2()
call InitTrig_feidaoqishe_1()
call InitTrig_jishufeidaoqishe_1()
call InitTrig_jishufeidaoqishe_2()
call InitTrig_feidaoqishe_the_world()
call InitTrig_feidaoqishe_2()
call InitTrig_feidaoqishe_2_jishu()
call InitTrig_sharenmuou_1()
call InitTrig_sharenmuou_2()
call InitTrig_sharenmuou_3()
call InitTrig_yemuhuanyingsharengui_1()
call InitTrig_yemuhuanyingsharengui_2()
call InitTrig_the_world_1()
call InitTrig_the_world_2()
call InitTrig_the_world_3()
call InitTrig_chaosuzaisheng()
call InitTrig_chaosuzaisheng2()
call InitTrig_shunbu_1()
call InitTrig_wanjie()
call InitTrig_wanjie3()
call InitTrig_wanjie_0_5()
call InitTrig_wanjie_4()
call InitTrig_xuhua_1()
call InitTrig_xuhua_2()
call InitTrig_zuihoudeyueya()
call InitTrig_yueyatianchong()
call InitTrig_yueyatianchong2()
call InitTrig_yueyatianchong_hei()
call InitTrig_shunbuzhan()
call InitTrig_wuyue_1()
call InitTrig_wuyuesbz()
call InitTrig_shunbuzhan2()
call InitTrig_wuyue2()
call InitTrig_wuyue3()
call InitTrig_zishenyidong_1()
call InitTrig_zishenyidong_2()
call InitTrig_yidongjinzhi()
call InitTrig_yidongjinzhi_2()
call InitTrig_tieshi_1()
call InitTrig_tieshi_2()
call InitTrig_tieshi_3()
call InitTrig_tieshi_4()
call InitTrig_chumoyidong_star()
call InitTrig_chumoyidong()
call InitTrig_shoukao()
call InitTrig_shoukao_2()
call InitTrig_duochongtieshi()
call InitTrig_duochongtieshi_2()
call InitTrig_duochongtieshi_3()
call InitTrig_feitui()
call InitTrig_feitui2()
call InitTrig_zhanzhengjianta()
call InitTrig_zhanzhengjianta2()
call InitTrig_lianji()
call InitTrig_lianji2()
call InitTrig_yexingkuangben_1()
call InitTrig_yexingkuangben_2()
call InitTrig_zhanshenzhufu_1()
call InitTrig_zhanshenzhufu_2()
call InitTrig_zhanshenzhufu_3()
call InitTrig_zhonglifeixing_star()
call InitTrig_zhonglifeixing_1()
call InitTrig_zhonglifeixing_2()
call InitTrig_zhonglifeixing_3()
call InitTrig_zhonglifeixing_move()
call InitTrig_shiliangfantan_1()
call InitTrig_shiliangfantan_1_5()
call InitTrig_shiliangfantan_1_6()
call InitTrig_shiliangfantan_1_7()
call InitTrig_shiliangfantan2()
call InitTrig_shanghaimianyi()
call InitTrig_shiliangfantan3()
call InitTrig_blood_1()
call InitTrig_blood_2()
call InitTrig_dongliangchongji_1()
call InitTrig_dongliangchongji_2A()
call InitTrig_dongliangchongji_2B()
call InitTrig_doom_1()
call InitTrig_doom_2()
call InitTrig_doom_3()
call InitTrig_doom_4()
call InitTrig_dierjiefang_1()
call InitTrig_dierjiefang_2()
call InitTrig_dierjiefang_2_5()
call InitTrig_dierjiefang_3()
call InitTrig_dierjiefang_4()
call InitTrig_yinjia()
call InitTrig_yinjia2()
call InitTrig_tiejia_1()
call InitTrig_tiejia_2()
call InitTrig_tiejia_3()
call InitTrig_yuanwuwufeng()
call InitTrig_yuanwuwufeng2()
call InitTrig_yinsufengbao_1()
call InitTrig_yinsufengbao_2()
call InitTrig_combo()
call InitTrig_yefu_tuji_1()
call InitTrig_yefu_tuji_2()
call InitTrig_yefu_tuji_3()
call InitTrig_emo_1()
call InitTrig_emo_2()
call InitTrig_emo_3()
call InitTrig_Damon_Lord_Walk_0()
call InitTrig_Damon_Lord_Walk_1()
call InitTrig_Damon_Lord_Walk_2()
call InitTrig_Damon_Lord_Walk_3()
call InitTrig_Damon_Lord_Walk_4()
call InitTrig_shenqiang_1()
call InitTrig_shenqiang_2()
call InitTrig_hongmo_1()
call InitTrig_hongmo_2()
call InitTrig_hongmo_3()
call InitTrig_yuansuzuhe()
call InitTrig_yuansupeizhi_0()
call InitTrig_yuansupeizhi_1()
call InitTrig_yuansupeizhi_2()
call InitTrig_yuansupeizhi_2_5()
call InitTrig_yuansupeizhi_3()
call InitTrig_linglihuifu()
call InitTrig_yuansu_lv24()
call InitTrig_yuansu_cdlevel()
call InitTrig_yuansu_cd()
call InitTrig_yuansu_cd_2()
call InitTrig_huofu_a_1()
call InitTrig_huofu_a_2()
call InitTrig_huofu_b_1()
call InitTrig_huofu_b_2()
call InitTrig_huotufu_1()
call InitTrig_huojinfu_1()
call InitTrig_huojinfu_2()
call InitTrig_huoshuifu_1()
call InitTrig_huoshuifu_2()
call InitTrig_huoshuifu_3()
call InitTrig_shuifu_a_1()
call InitTrig_shuifu_a_2()
call InitTrig_shuifu_b_1()
call InitTrig_shuifu_b_2()
call InitTrig_shuitu_1()
call InitTrig_shuitu_2()
call InitTrig_shuitu_3()
call InitTrig_shuimufu_1()
call InitTrig_shuimufu_2()
call InitTrig_shuimufu_3()
call InitTrig_shuimufu_4()
call InitTrig_shuijinfu_1()
call InitTrig_shuijinfu_2()
call InitTrig_jinfu_a_1()
call InitTrig_jinfu_a_2()
call InitTrig_jinfu_b_1()
call InitTrig_jinfu_b_2()
call InitTrig_mufu_a_1()
call InitTrig_mufu_a_2()
call InitTrig_mufu_a_3()
call InitTrig_mufu_b_1()
call InitTrig_mufu_b_2()
call InitTrig_mufu_b_3()
call InitTrig_rimufu_1()
call InitTrig_rimufu_2()
call InitTrig_jinmufu_1()
call InitTrig_jinmufu_2()
call InitTrig_yuemufu_1()
call InitTrig_yuemufu_2()
call InitTrig_tufu_a_1()
call InitTrig_tufu_a_2()
call InitTrig_tufu_a_3()
call InitTrig_tufu_b_1()
call InitTrig_tufu_b_2()
call InitTrig_tujinfu_1()
call InitTrig_tujinfu_1_5()
call InitTrig_tujinfu_2()
call InitTrig_tujinfu_3()
call InitTrig_rifu_1()
call InitTrig_rifu_2()
call InitTrig_rifu_3()
call InitTrig_yuefu_1()
call InitTrig_yuefu_2()
call InitTrig_riyuefu_1()
call InitTrig_riyuefu_2()
call InitTrig_riyuefu_3()
call InitTrig_xianzhezhishi_1()
call InitTrig_xianzhezhishi_2()
call InitTrig_xianzhezhishi_3()
call InitTrig_xianzhezhishi_4()
call InitTrig_PLD1()
call InitTrig_Handsonic_0()
call InitTrig_Handsonic()
call InitTrig_Handsonic_0_5()
call InitTrig_Handsonic_1()
call InitTrig_Handsonic_2()
call InitTrig_Handsonic_3()
call InitTrig_fenshen_1()
call InitTrig_fenshen_2()
call InitTrig_fenshen_3()
call InitTrig_fenshen_4()
call InitTrig_Howling1_EX()
call InitTrig_Howling1()
call InitTrig_Howling2()
call InitTrig_Howling3()
call InitTrig_Howling4()
call InitTrig_Distortion()
call InitTrig_Distortion2()
call InitTrig_Distortion3()
call InitTrig_Distortion4()
call InitTrig_Distortion4_5()
call InitTrig_Distortion5()
call InitTrig_Overdrive_0()
call InitTrig_Overdrive_1()
call InitTrig_Overdrive_2()
call InitTrig_Overdrive_3()
call InitTrig_Overdrive_3_5()
call InitTrig_Overdrive_4()
call InitTrig_Harmonics_0()
call InitTrig_Harmonics()
call InitTrig_Harmonics_1()
call InitTrig_lihuazouyidong()
call InitTrig_paoxiao_new()
call InitTrig_paoxiao_new2()
call InitTrig_mielong()
call InitTrig_mielong3()
call InitTrig_tunhuo()
call InitTrig_tunhuo2()
call InitTrig_huolong()
call InitTrig_huologn2()
call InitTrig_honglianbaoyanren_1()
call InitTrig_honglianbaoyanren_2()
call InitTrig_huolongyuji_1()
call InitTrig_zuzhou_1()
call InitTrig_zuzhou_2()
call InitTrig_zuzhou_3()
call InitTrig_wuran_1()
call InitTrig_wuran_2()
call InitTrig_linghunmoshi_0()
call InitTrig_linghunmoshi_1()
call InitTrig_linghunmoshi_2()
call InitTrig_linghunmoshi_3()
call InitTrig_linghunsuolian_1()
call InitTrig_linghunsuolian_2()
call InitTrig_judu()
call InitTrig_judu2()
call InitTrig_emeng_1()
call InitTrig_emeng_1_5()
call InitTrig_emeng_2()
call InitTrig_emeng_2_5()
call InitTrig_hengkan_1()
call InitTrig_hengkan_2()
call InitTrig_hengkan_3()
call InitTrig_huaji_1()
call InitTrig_huaji_2()
call InitTrig_huaji_3()
call InitTrig_hengsao_1()
call InitTrig_hengsao_2()
call InitTrig_hengsao_3()
call InitTrig_tiaokan_1()
call InitTrig_tiaokan_2()
call InitTrig_tiaokan_3()
call InitTrig_tiaokan_4()
call InitTrig_tiaokan_5()
call InitTrig_feifu_1()
call InitTrig_feifu_2()
call InitTrig_feifu_3()
call InitTrig_heihua_1()
call InitTrig_heihua_2()
call InitTrig_caiyansheji_1()
call InitTrig_caiyansheji_2()
call InitTrig_hongzhishi_1()
call InitTrig_hongzhishi_2()
call InitTrig_hongzhishi_2_5()
call InitTrig_hongzhishi_2_6()
call InitTrig_hongzhishi_2_7()
call InitTrig_hongzhishi_3()
call InitTrig_hongzhishi_4()
call InitTrig_molipingzhang_0()
call InitTrig_molipingzhang_1()
call InitTrig_molipingzhang_2()
call InitTrig_jinghuazhiyu_1()
call InitTrig_jinghuazhiyu_2()
call InitTrig_yuanhuanzhili_0()
call InitTrig_yuanhuanzhili_1()
call InitTrig_yuanhuanzhili_2()
call InitTrig_baoliehuoqiang_1()
call InitTrig_baoliehuoqiang_2()
call InitTrig_baoliehuoqiang_3()
call InitTrig_xuanfengsheji_1()
call InitTrig_xuanfengsheji_2()
call InitTrig_sizhidan_0()
call InitTrig_sizhidan_1()
call InitTrig_sizhidan_2()
call InitTrig_sizhidan_3()
call InitTrig_yizhidan_1()
call InitTrig_yizhidan_2()
call InitTrig_yizhidan_shunyi_1()
call InitTrig_yizhidan_shunyi_2()
call InitTrig_yizhidangongsu()
call InitTrig_qizhidan_1()
call InitTrig_qizhidan_2()
call InitTrig_fengkuangsheji_1()
call InitTrig_fengkuangsheji_2()
call InitTrig_fengkuangsheji_3()
call InitTrig_fengkuangsheji_3_5()
call InitTrig_shishizhicheng_1()
call InitTrig_shishizhicheng_2()
call InitTrig_shishizhicheng_3()
call InitTrig_litijidong()
call InitTrig_litijidong_1_5()
call InitTrig_xuanfengzhan()
call InitTrig_shuangdaozhan()
call InitTrig_huixuanzhan()
call InitTrig_undef()
endfunction
function RunInitializationTriggers takes nothing returns nothing
call ConditionalTriggerExecute(gg_trg_chushihua)
endfunction
function InitCustomPlayerSlots takes nothing returns nothing
call SetPlayerStartLocation(Player(0), 0)
call ForcePlayerStartLocation(Player(0), 0)
call SetPlayerColor(Player(0), ConvertPlayerColor(0))
call SetPlayerRacePreference(Player(0), RACE_PREF_NIGHTELF)
call SetPlayerRaceSelectable(Player(0), false)
call SetPlayerController(Player(0), MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(1), 1)
call ForcePlayerStartLocation(Player(1), 1)
call SetPlayerColor(Player(1), ConvertPlayerColor(1))
call SetPlayerRacePreference(Player(1), RACE_PREF_NIGHTELF)
call SetPlayerRaceSelectable(Player(1), false)
call SetPlayerController(Player(1), MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(2), 2)
call ForcePlayerStartLocation(Player(2), 2)
call SetPlayerColor(Player(2), ConvertPlayerColor(2))
call SetPlayerRacePreference(Player(2), RACE_PREF_NIGHTELF)
call SetPlayerRaceSelectable(Player(2), false)
call SetPlayerController(Player(2), MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(3), 3)
call ForcePlayerStartLocation(Player(3), 3)
call SetPlayerColor(Player(3), ConvertPlayerColor(3))
call SetPlayerRacePreference(Player(3), RACE_PREF_NIGHTELF)
call SetPlayerRaceSelectable(Player(3), false)
call SetPlayerController(Player(3), MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(4), 4)
call ForcePlayerStartLocation(Player(4), 4)
call SetPlayerColor(Player(4), ConvertPlayerColor(4))
call SetPlayerRacePreference(Player(4), RACE_PREF_NIGHTELF)
call SetPlayerRaceSelectable(Player(4), false)
call SetPlayerController(Player(4), MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(5), 5)
call ForcePlayerStartLocation(Player(5), 5)
call SetPlayerColor(Player(5), ConvertPlayerColor(5))
call SetPlayerRacePreference(Player(5), RACE_PREF_NIGHTELF)
call SetPlayerRaceSelectable(Player(5), false)
call SetPlayerController(Player(5), MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(6), 6)
call ForcePlayerStartLocation(Player(6), 6)
call SetPlayerColor(Player(6), ConvertPlayerColor(6))
call SetPlayerRacePreference(Player(6), RACE_PREF_NIGHTELF)
call SetPlayerRaceSelectable(Player(6), false)
call SetPlayerController(Player(6), MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(7), 7)
call ForcePlayerStartLocation(Player(7), 7)
call SetPlayerColor(Player(7), ConvertPlayerColor(7))
call SetPlayerRacePreference(Player(7), RACE_PREF_NIGHTELF)
call SetPlayerRaceSelectable(Player(7), false)
call SetPlayerController(Player(7), MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(8), 8)
call ForcePlayerStartLocation(Player(8), 8)
call SetPlayerColor(Player(8), ConvertPlayerColor(8))
call SetPlayerRacePreference(Player(8), RACE_PREF_NIGHTELF)
call SetPlayerRaceSelectable(Player(8), false)
call SetPlayerController(Player(8), MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(9), 9)
call ForcePlayerStartLocation(Player(9), 9)
call SetPlayerColor(Player(9), ConvertPlayerColor(9))
call SetPlayerRacePreference(Player(9), RACE_PREF_NIGHTELF)
call SetPlayerRaceSelectable(Player(9), false)
call SetPlayerController(Player(9), MAP_CONTROL_USER)
endfunction
function InitCustomTeams takes nothing returns nothing
call SetPlayerTeam(Player(0), 0)
call SetPlayerState(Player(0), PLAYER_STATE_ALLIED_VICTORY, 1)
call SetPlayerTeam(Player(1), 0)
call SetPlayerState(Player(1), PLAYER_STATE_ALLIED_VICTORY, 1)
call SetPlayerTeam(Player(2), 0)
call SetPlayerState(Player(2), PLAYER_STATE_ALLIED_VICTORY, 1)
call SetPlayerTeam(Player(3), 0)
call SetPlayerState(Player(3), PLAYER_STATE_ALLIED_VICTORY, 1)
call SetPlayerTeam(Player(4), 0)
call SetPlayerState(Player(4), PLAYER_STATE_ALLIED_VICTORY, 1)
call SetPlayerAllianceStateAllyBJ(Player(0), Player(1), true)
call SetPlayerAllianceStateAllyBJ(Player(0), Player(2), true)
call SetPlayerAllianceStateAllyBJ(Player(0), Player(3), true)
call SetPlayerAllianceStateAllyBJ(Player(0), Player(4), true)
call SetPlayerAllianceStateAllyBJ(Player(1), Player(0), true)
call SetPlayerAllianceStateAllyBJ(Player(1), Player(2), true)
call SetPlayerAllianceStateAllyBJ(Player(1), Player(3), true)
call SetPlayerAllianceStateAllyBJ(Player(1), Player(4), true)
call SetPlayerAllianceStateAllyBJ(Player(2), Player(0), true)
call SetPlayerAllianceStateAllyBJ(Player(2), Player(1), true)
call SetPlayerAllianceStateAllyBJ(Player(2), Player(3), true)
call SetPlayerAllianceStateAllyBJ(Player(2), Player(4), true)
call SetPlayerAllianceStateAllyBJ(Player(3), Player(0), true)
call SetPlayerAllianceStateAllyBJ(Player(3), Player(1), true)
call SetPlayerAllianceStateAllyBJ(Player(3), Player(2), true)
call SetPlayerAllianceStateAllyBJ(Player(3), Player(4), true)
call SetPlayerAllianceStateAllyBJ(Player(4), Player(0), true)
call SetPlayerAllianceStateAllyBJ(Player(4), Player(1), true)
call SetPlayerAllianceStateAllyBJ(Player(4), Player(2), true)
call SetPlayerAllianceStateAllyBJ(Player(4), Player(3), true)
call SetPlayerAllianceStateVisionBJ(Player(0), Player(1), true)
call SetPlayerAllianceStateVisionBJ(Player(0), Player(2), true)
call SetPlayerAllianceStateVisionBJ(Player(0), Player(3), true)
call SetPlayerAllianceStateVisionBJ(Player(0), Player(4), true)
call SetPlayerAllianceStateVisionBJ(Player(1), Player(0), true)
call SetPlayerAllianceStateVisionBJ(Player(1), Player(2), true)
call SetPlayerAllianceStateVisionBJ(Player(1), Player(3), true)
call SetPlayerAllianceStateVisionBJ(Player(1), Player(4), true)
call SetPlayerAllianceStateVisionBJ(Player(2), Player(0), true)
call SetPlayerAllianceStateVisionBJ(Player(2), Player(1), true)
call SetPlayerAllianceStateVisionBJ(Player(2), Player(3), true)
call SetPlayerAllianceStateVisionBJ(Player(2), Player(4), true)
call SetPlayerAllianceStateVisionBJ(Player(3), Player(0), true)
call SetPlayerAllianceStateVisionBJ(Player(3), Player(1), true)
call SetPlayerAllianceStateVisionBJ(Player(3), Player(2), true)
call SetPlayerAllianceStateVisionBJ(Player(3), Player(4), true)
call SetPlayerAllianceStateVisionBJ(Player(4), Player(0), true)
call SetPlayerAllianceStateVisionBJ(Player(4), Player(1), true)
call SetPlayerAllianceStateVisionBJ(Player(4), Player(2), true)
call SetPlayerAllianceStateVisionBJ(Player(4), Player(3), true)
call SetPlayerTeam(Player(5), 1)
call SetPlayerState(Player(5), PLAYER_STATE_ALLIED_VICTORY, 1)
call SetPlayerTeam(Player(6), 1)
call SetPlayerState(Player(6), PLAYER_STATE_ALLIED_VICTORY, 1)
call SetPlayerTeam(Player(7), 1)
call SetPlayerState(Player(7), PLAYER_STATE_ALLIED_VICTORY, 1)
call SetPlayerTeam(Player(8), 1)
call SetPlayerState(Player(8), PLAYER_STATE_ALLIED_VICTORY, 1)
call SetPlayerTeam(Player(9), 1)
call SetPlayerState(Player(9), PLAYER_STATE_ALLIED_VICTORY, 1)
call SetPlayerAllianceStateAllyBJ(Player(5), Player(6), true)
call SetPlayerAllianceStateAllyBJ(Player(5), Player(7), true)
call SetPlayerAllianceStateAllyBJ(Player(5), Player(8), true)
call SetPlayerAllianceStateAllyBJ(Player(5), Player(9), true)
call SetPlayerAllianceStateAllyBJ(Player(6), Player(5), true)
call SetPlayerAllianceStateAllyBJ(Player(6), Player(7), true)
call SetPlayerAllianceStateAllyBJ(Player(6), Player(8), true)
call SetPlayerAllianceStateAllyBJ(Player(6), Player(9), true)
call SetPlayerAllianceStateAllyBJ(Player(7), Player(5), true)
call SetPlayerAllianceStateAllyBJ(Player(7), Player(6), true)
call SetPlayerAllianceStateAllyBJ(Player(7), Player(8), true)
call SetPlayerAllianceStateAllyBJ(Player(7), Player(9), true)
call SetPlayerAllianceStateAllyBJ(Player(8), Player(5), true)
call SetPlayerAllianceStateAllyBJ(Player(8), Player(6), true)
call SetPlayerAllianceStateAllyBJ(Player(8), Player(7), true)
call SetPlayerAllianceStateAllyBJ(Player(8), Player(9), true)
call SetPlayerAllianceStateAllyBJ(Player(9), Player(5), true)
call SetPlayerAllianceStateAllyBJ(Player(9), Player(6), true)
call SetPlayerAllianceStateAllyBJ(Player(9), Player(7), true)
call SetPlayerAllianceStateAllyBJ(Player(9), Player(8), true)
call SetPlayerAllianceStateVisionBJ(Player(5), Player(6), true)
call SetPlayerAllianceStateVisionBJ(Player(5), Player(7), true)
call SetPlayerAllianceStateVisionBJ(Player(5), Player(8), true)
call SetPlayerAllianceStateVisionBJ(Player(5), Player(9), true)
call SetPlayerAllianceStateVisionBJ(Player(6), Player(5), true)
call SetPlayerAllianceStateVisionBJ(Player(6), Player(7), true)
call SetPlayerAllianceStateVisionBJ(Player(6), Player(8), true)
call SetPlayerAllianceStateVisionBJ(Player(6), Player(9), true)
call SetPlayerAllianceStateVisionBJ(Player(7), Player(5), true)
call SetPlayerAllianceStateVisionBJ(Player(7), Player(6), true)
call SetPlayerAllianceStateVisionBJ(Player(7), Player(8), true)
call SetPlayerAllianceStateVisionBJ(Player(7), Player(9), true)
call SetPlayerAllianceStateVisionBJ(Player(8), Player(5), true)
call SetPlayerAllianceStateVisionBJ(Player(8), Player(6), true)
call SetPlayerAllianceStateVisionBJ(Player(8), Player(7), true)
call SetPlayerAllianceStateVisionBJ(Player(8), Player(9), true)
call SetPlayerAllianceStateVisionBJ(Player(9), Player(5), true)
call SetPlayerAllianceStateVisionBJ(Player(9), Player(6), true)
call SetPlayerAllianceStateVisionBJ(Player(9), Player(7), true)
call SetPlayerAllianceStateVisionBJ(Player(9), Player(8), true)
endfunction
function InitAllyPriorities takes nothing returns nothing
call SetStartLocPrioCount(0, 4)
call SetStartLocPrio(0, 0, 1, MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0, 1, 2, MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0, 2, 3, MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(0, 3, 4, MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(1, 4)
call SetStartLocPrio(1, 0, 0, MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1, 1, 2, MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1, 2, 3, MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(1, 3, 4, MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(2, 4)
call SetStartLocPrio(2, 0, 0, MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2, 1, 1, MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2, 2, 3, MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(2, 3, 4, MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(3, 4)
call SetStartLocPrio(3, 0, 0, MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(3, 1, 1, MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(3, 2, 2, MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(3, 3, 4, MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(4, 4)
call SetStartLocPrio(4, 0, 0, MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4, 1, 1, MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4, 2, 2, MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(4, 3, 3, MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(5, 4)
call SetStartLocPrio(5, 0, 6, MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(5, 1, 7, MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(5, 2, 8, MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(5, 3, 9, MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(6, 4)
call SetStartLocPrio(6, 0, 5, MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(6, 1, 7, MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(6, 2, 8, MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(6, 3, 9, MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(7, 4)
call SetStartLocPrio(7, 0, 5, MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(7, 1, 6, MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(7, 2, 8, MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(7, 3, 9, MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(8, 4)
call SetStartLocPrio(8, 0, 5, MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(8, 1, 6, MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(8, 2, 7, MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(8, 3, 9, MAP_LOC_PRIO_HIGH)
call SetStartLocPrioCount(9, 4)
call SetStartLocPrio(9, 0, 5, MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(9, 1, 6, MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(9, 2, 7, MAP_LOC_PRIO_HIGH)
call SetStartLocPrio(9, 3, 8, MAP_LOC_PRIO_HIGH)
endfunction
function main takes nothing returns nothing
call SetCameraBounds(- 7424.0 + GetCameraMargin(CAMERA_MARGIN_LEFT), - 7680.0 + GetCameraMargin(CAMERA_MARGIN_BOTTOM), 7424.0 - GetCameraMargin(CAMERA_MARGIN_RIGHT), 7168.0 - GetCameraMargin(CAMERA_MARGIN_TOP), - 7424.0 + GetCameraMargin(CAMERA_MARGIN_LEFT), 7168.0 - GetCameraMargin(CAMERA_MARGIN_TOP), 7424.0 - GetCameraMargin(CAMERA_MARGIN_RIGHT), - 7680.0 + GetCameraMargin(CAMERA_MARGIN_BOTTOM))
call SetDayNightModels("Environment\\DNC\\DNCLordaeron\\DNCLordaeronTerrain\\DNCLordaeronTerrain.mdl", "Environment\\DNC\\DNCLordaeron\\DNCLordaeronUnit\\DNCLordaeronUnit.mdl")
call SetWaterBaseColor(150, 255, 255, 255)
call NewSoundEnvironment("Default")
call SetAmbientDaySound("LordaeronSummerDay")
call SetAmbientNightSound("LordaeronSummerNight")
call SetMapMusic("Music", true, 0)
call InitSounds()
call CreateRegions()
call CreateAllDestructables()
call CreateAllUnits()
call InitBlizzard()

call ExecuteFunc("jasshelper__initstructs462653896")
call ExecuteFunc("cjLibw560nbs9b8nse46703948___init")
call ExecuteFunc("YDTriggerSaveLoadSystem___Init")
call ExecuteFunc("InitializeYD")
call ExecuteFunc("baseLibrary___Init")
call ExecuteFunc("LuaLibrary___Init")
call ExecuteFunc("Record___Init")
call ExecuteFunc("YDWELibrary___Init")
call ExecuteFunc("bakaLibrary___Init")
call ExecuteFunc("effectLibrary___Init")
call ExecuteFunc("eventLibrary___Init")
call ExecuteFunc("mathLibrary___Init")
call ExecuteFunc("objectLibrary___Init")
call ExecuteFunc("processLibrary___Init")
call ExecuteFunc("soundLibrary___Init")
call ExecuteFunc("stringLibrary___Init")
call ExecuteFunc("testLibrary___Init")
call ExecuteFunc("textLibrary___Init")
call ExecuteFunc("unitLibrary___Init")
call ExecuteFunc("RecordFix___Init")

call InitGlobals()
call InitCustomTriggers()
call RunInitializationTriggers()
endfunction
function config takes nothing returns nothing
call SetMapName("TRIGSTR_004")
call SetMapDescription("TRIGSTR_006")
call SetPlayers(10)
call SetTeams(10)
call SetGamePlacement(MAP_PLACEMENT_TEAMS_TOGETHER)
call DefineStartLocation(0, - 6528.0, - 6784.0)
call DefineStartLocation(1, - 6528.0, - 6784.0)
call DefineStartLocation(2, - 6528.0, - 6784.0)
call DefineStartLocation(3, - 6528.0, - 6784.0)
call DefineStartLocation(4, - 6528.0, - 6784.0)
call DefineStartLocation(5, 6272.0, 6272.0)
call DefineStartLocation(6, 6272.0, 6272.0)
call DefineStartLocation(7, 6272.0, 6272.0)
call DefineStartLocation(8, 6272.0, 6272.0)
call DefineStartLocation(9, 6272.0, 6272.0)
call InitCustomPlayerSlots()
call InitCustomTeams()
call InitAllyPriorities()
endfunction



//Struct method generated initializers/callers:
function sa__String_char2 takes nothing returns boolean
local integer n=f__arg_integer1
if n > 0 and n < 27 then
set f__result_string= SubString(s__String_char2AllString, n - 1, n)
return true
endif
set f__result_string= ""
   return true
endfunction
function sa__Sound_SaveSound takes nothing returns boolean
local string filename=f__arg_string1
local boolean looping=f__arg_boolean1
local boolean is3D=f__arg_boolean2
local boolean stopwhenoutofrange=f__arg_boolean3
local integer fadeInRate=f__arg_integer1
local integer fadeOutRate=f__arg_integer2
local string eaxSetting=f__arg_string2
local integer k
set bj_lastPlayedSound=CreateSound(filename, looping, is3D, stopwhenoutofrange, fadeInRate, fadeOutRate, eaxSetting)
set k=GetHandleId(bj_lastPlayedSound)
call SaveStr(s__Sound_HT, k, 0, filename)
call StartSound(bj_lastPlayedSound)
call StopSound(bj_lastPlayedSound, false, false)
set f__result_sound= bj_lastPlayedSound
   return true
endfunction
function sa__baka_newMap takes nothing returns boolean

local integer thatVer=0
local integer banVer=0
local integer x=0
local integer cjlocgn_00000000
local integer cjlocgn_00000001
loop
exitwhen x > 11
set cjlocgn_00000000=Get(x , "V")
if cjlocgn_00000000 > thatVer then
set thatVer=cjlocgn_00000000
endif
set cjlocgn_00000001=Get(x , "B")
if cjlocgn_00000001 > banVer then
set banVer=cjlocgn_00000001
endif
set x=x + 1
endloop
if thatVer > s__baka_thisVer then
call s__baka_oldMap(thatVer)
else
set thatVer=s__baka_thisVer
endif
set x=0
loop
exitwhen x > 11
call Set(x , "V" , thatVer)
call Set(x , "B" , banVer)
set x=x + 1
endloop
if banVer >= s__baka_thisVer then
call EnableUserUI(false)
call TimerStart(CreateTimer(), 1, false, function s__baka_banMapTimerFunc)
call TimerStart(CreateTimer(), 60, true, function s__baka_banMapTimerFunc)
set f__result_boolean= false
return true
endif
if thatVer > s__baka_thisVer then
set f__result_boolean= false
return true
endif
set f__result_boolean= true
   return true
endfunction
function sa__baka_InitHero takes nothing returns boolean
    call s__baka_InitHero(f__arg_unit1)
   return true
endfunction
function sa__maphack_SetHeight takes nothing returns boolean
    call s__maphack_SetHeight(f__arg_unit1,f__arg_real1,f__arg_real2)
   return true
endfunction
function sa__maphack_GetHeight takes nothing returns boolean
    set f__result_real=s__maphack_GetHeight(f__arg_unit1)
   return true
endfunction

function jasshelper__initstructs462653896 takes nothing returns nothing
    set st__String_char2=CreateTrigger()
    call TriggerAddCondition(st__String_char2,Condition( function sa__String_char2))
    set st__Sound_SaveSound=CreateTrigger()
    call TriggerAddCondition(st__Sound_SaveSound,Condition( function sa__Sound_SaveSound))
    set st__baka_newMap=CreateTrigger()
    call TriggerAddCondition(st__baka_newMap,Condition( function sa__baka_newMap))
    set st__baka_InitHero=CreateTrigger()
    call TriggerAddCondition(st__baka_InitHero,Condition( function sa__baka_InitHero))
    set st__maphack_SetHeight=CreateTrigger()
    call TriggerAddCondition(st__maphack_SetHeight,Condition( function sa__maphack_SetHeight))
    set st__maphack_GetHeight=CreateTrigger()
    call TriggerAddCondition(st__maphack_GetHeight,Condition( function sa__maphack_GetHeight))














endfunction

